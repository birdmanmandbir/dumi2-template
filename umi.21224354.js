(function(){var __webpack_modules__={41978:function(U){"use strict";(function(F,c){U.exports=c()})(this,function(){function F(B){var z=[];return B.AMapUI&&z.push(c(B.AMapUI)),B.Loca&&z.push(w(B.Loca)),Promise.all(z)}function c(B){return new Promise(function(z,Z){var W=[];if(B.plugins)for(var Y=0;Y<B.plugins.length;Y+=1)l.AMapUI.plugins.indexOf(B.plugins[Y])==-1&&W.push(B.plugins[Y]);if(R.AMapUI===v.failed)Z("\u524D\u6B21\u8BF7\u6C42 AMapUI \u5931\u8D25");else if(R.AMapUI===v.notload){R.AMapUI=v.loading,l.AMapUI.version=B.version||l.AMapUI.version,Y=l.AMapUI.version;var te=document.body||document.head,le=document.createElement("script");le.type="text/javascript",le.src="https://webapi.amap.com/ui/"+Y+"/main.js",le.onerror=function(be){R.AMapUI=v.failed,Z("\u8BF7\u6C42 AMapUI \u5931\u8D25")},le.onload=function(){if(R.AMapUI=v.loaded,W.length)window.AMapUI.loadUI(W,function(){for(var be=0,de=W.length;be<de;be++){var pe=W[be].split("/").slice(-1)[0];window.AMapUI[pe]=arguments[be]}for(z();A.AMapUI.length;)A.AMapUI.splice(0,1)[0]()});else for(z();A.AMapUI.length;)A.AMapUI.splice(0,1)[0]()},te.appendChild(le)}else R.AMapUI===v.loaded?B.version&&B.version!==l.AMapUI.version?Z("\u4E0D\u5141\u8BB8\u591A\u4E2A\u7248\u672C AMapUI \u6DF7\u7528"):W.length?window.AMapUI.loadUI(W,function(){for(var be=0,de=W.length;be<de;be++){var pe=W[be].split("/").slice(-1)[0];window.AMapUI[pe]=arguments[be]}z()}):z():B.version&&B.version!==l.AMapUI.version?Z("\u4E0D\u5141\u8BB8\u591A\u4E2A\u7248\u672C AMapUI \u6DF7\u7528"):A.AMapUI.push(function(be){be?Z(be):W.length?window.AMapUI.loadUI(W,function(){for(var de=0,pe=W.length;de<pe;de++){var Oe=W[de].split("/").slice(-1)[0];window.AMapUI[Oe]=arguments[de]}z()}):z()})})}function w(B){return new Promise(function(z,Z){if(R.Loca===v.failed)Z("\u524D\u6B21\u8BF7\u6C42 Loca \u5931\u8D25");else if(R.Loca===v.notload){R.Loca=v.loading,l.Loca.version=B.version||l.Loca.version;var W=l.Loca.version,Y=l.AMap.version.startsWith("2"),te=W.startsWith("2");if(Y&&!te||!Y&&te)Z("JSAPI \u4E0E Loca \u7248\u672C\u4E0D\u5BF9\u5E94\uFF01\uFF01");else{Y=l.key,te=document.body||document.head;var le=document.createElement("script");le.type="text/javascript",le.src="https://webapi.amap.com/loca?v="+W+"&key="+Y,le.onerror=function(be){R.Loca=v.failed,Z("\u8BF7\u6C42 AMapUI \u5931\u8D25")},le.onload=function(){for(R.Loca=v.loaded,z();A.Loca.length;)A.Loca.splice(0,1)[0]()},te.appendChild(le)}}else R.Loca===v.loaded?B.version&&B.version!==l.Loca.version?Z("\u4E0D\u5141\u8BB8\u591A\u4E2A\u7248\u672C Loca \u6DF7\u7528"):z():B.version&&B.version!==l.Loca.version?Z("\u4E0D\u5141\u8BB8\u591A\u4E2A\u7248\u672C Loca \u6DF7\u7528"):A.Loca.push(function(be){be?Z(be):Z()})})}if(!window)throw Error("AMap JSAPI can only be used in Browser.");var v;(function(B){B.notload="notload",B.loading="loading",B.loaded="loaded",B.failed="failed"})(v||(v={}));var l={key:"",AMap:{version:"1.4.15",plugins:[]},AMapUI:{version:"1.1",plugins:[]},Loca:{version:"1.3.2"}},R={AMap:v.notload,AMapUI:v.notload,Loca:v.notload},A={AMap:[],AMapUI:[],Loca:[]},D=[],k=function(B){typeof B=="function"&&(R.AMap===v.loaded?B(window.AMap):D.push(B))};return{load:function(B){return new Promise(function(z,Z){if(R.AMap==v.failed)Z("");else if(R.AMap==v.notload){var W=B.key,Y=B.version,te=B.plugins;W?(window.AMap&&location.host!=="lbs.amap.com"&&Z("\u7981\u6B62\u591A\u79CDAPI\u52A0\u8F7D\u65B9\u5F0F\u6DF7\u7528"),l.key=W,l.AMap.version=Y||l.AMap.version,l.AMap.plugins=te||l.AMap.plugins,R.AMap=v.loading,Y=document.body||document.head,window.___onAPILoaded=function(be){if(delete window.___onAPILoaded,be)R.AMap=v.failed,Z(be);else for(R.AMap=v.loaded,F(B).then(function(){z(window.AMap)}).catch(Z);D.length;)D.splice(0,1)[0]()},te=document.createElement("script"),te.type="text/javascript",te.src="https://webapi.amap.com/maps?callback=___onAPILoaded&v="+l.AMap.version+"&key="+W+"&plugin="+l.AMap.plugins.join(","),te.onerror=function(be){R.AMap=v.failed,Z(be)},Y.appendChild(te)):Z("\u8BF7\u586B\u5199key")}else if(R.AMap==v.loaded)if(B.key&&B.key!==l.key)Z("\u591A\u4E2A\u4E0D\u4E00\u81F4\u7684 key");else if(B.version&&B.version!==l.AMap.version)Z("\u4E0D\u5141\u8BB8\u591A\u4E2A\u7248\u672C JSAPI \u6DF7\u7528");else{if(W=[],B.plugins)for(Y=0;Y<B.plugins.length;Y+=1)l.AMap.plugins.indexOf(B.plugins[Y])==-1&&W.push(B.plugins[Y]);W.length?window.AMap.plugin(W,function(){F(B).then(function(){z(window.AMap)}).catch(Z)}):F(B).then(function(){z(window.AMap)}).catch(Z)}else if(B.key&&B.key!==l.key)Z("\u591A\u4E2A\u4E0D\u4E00\u81F4\u7684 key");else if(B.version&&B.version!==l.AMap.version)Z("\u4E0D\u5141\u8BB8\u591A\u4E2A\u7248\u672C JSAPI \u6DF7\u7528");else{var le=[];if(B.plugins)for(Y=0;Y<B.plugins.length;Y+=1)l.AMap.plugins.indexOf(B.plugins[Y])==-1&&le.push(B.plugins[Y]);k(function(){le.length?window.AMap.plugin(le,function(){F(B).then(function(){z(window.AMap)}).catch(Z)}):F(B).then(function(){z(window.AMap)}).catch(Z)})}})},reset:function(){delete window.AMap,delete window.AMapUI,delete window.Loca,l={key:"",AMap:{version:"1.4.15",plugins:[]},AMapUI:{version:"1.1",plugins:[]},Loca:{version:"1.3.2"}},R={AMap:v.notload,AMapUI:v.notload,Loca:v.notload},A={AMap:[],AMapUI:[],Loca:[]}}}})},74800:function(){window._iconfont_svg_string_3580659='<svg><symbol id="l7-icon-area1" viewBox="0 0 1024 1024"><path d="M796.444444 56.888889a113.777778 113.777778 0 0 1 43.064889 219.136l38.798223 466.261333a113.777778 113.777778 0 1 1-133.518223 145.237334H279.210667a113.777778 113.777778 0 1 1-60.302223-137.272889L697.856 227.555556A113.777778 113.777778 0 0 1 796.444444 56.888889z m56.888889 750.933333a45.511111 45.511111 0 1 0 0 91.022222 45.511111 45.511111 0 0 0 0-91.022222z m-682.666666 0a45.511111 45.511111 0 1 0 0 91.022222 45.511111 45.511111 0 0 0 0-91.022222z m577.592889-534.072889L269.198222 796.444444c4.152889 7.168 7.509333 14.791111 10.012445 22.812445h465.578666a114.119111 114.119111 0 0 1 65.479111-71.224889l-38.798222-466.261333a112.924444 112.924444 0 0 1-23.210666-7.964445zM796.444444 125.155556a45.511111 45.511111 0 1 0 0 91.022222 45.511111 45.511111 0 0 0 0-91.022222z"  ></path></symbol><symbol id="l7-icon-area" viewBox="0 0 1024 1024"><path d="M796.444444 56.888889a113.777778 113.777778 0 0 1 43.008 219.136l38.855112 466.261333a113.777778 113.777778 0 0 1-16.497778 224.540445L853.333333 967.111111a113.777778 113.777778 0 0 1-108.544-79.644444H279.210667a113.834667 113.834667 0 0 1-100.067556 79.36L170.666667 967.111111a113.777778 113.777778 0 0 1-17.066667-226.304l30.492444-351.175111a113.777778 113.777778 0 0 1 34.986667-218.680889L227.555556 170.666667a113.777778 113.777778 0 0 1 99.896888 59.221333l355.84-71.395556a113.777778 113.777778 0 0 1 104.675556-101.262222L796.444444 56.888889z m56.888889 750.933333a45.511111 45.511111 0 1 0 0 91.022222 45.511111 45.511111 0 0 0 0-91.022222z m-682.666666 0a45.511111 45.511111 0 1 0 0 91.022222 45.511111 45.511111 0 0 0 0-91.022222z m526.051555-582.314666L340.650667 296.903111a113.891556 113.891556 0 0 1-88.462223 98.645333l-30.947555 355.84c27.477333 13.653333 48.64 38.115556 58.026667 67.754667h465.521777a114.119111 114.119111 0 0 1 65.536-71.168l-38.855111-466.261333a113.948444 113.948444 0 0 1-74.752-56.206222zM227.555556 238.933333a45.511111 45.511111 0 1 0 0 91.022223 45.511111 45.511111 0 0 0 0-91.022223z m568.888888-113.777777a45.511111 45.511111 0 1 0 0 91.022222 45.511111 45.511111 0 0 0 0-91.022222z"  ></path></symbol><symbol id="l7-icon-delete" viewBox="0 0 1024 1024"><path d="M705.422222 85.333333a34.133333 34.133333 0 0 1 34.133334 34.133334V227.555556h136.533333a34.133333 34.133333 0 0 1 0 68.266666h-25.543111l-24.348445 610.076445a34.133333 34.133333 0 0 1-34.133333 32.768H231.936a34.133333 34.133333 0 0 1-34.076444-32.768L173.340444 295.822222H147.911111a34.133333 34.133333 0 1 1 0-68.266666H284.444444V119.466667a34.133333 34.133333 0 0 1 34.133334-34.133334h386.844444zM241.720889 295.822222l22.983111 574.577778h494.535111l23.04-574.577778H241.720889zM671.288889 153.6H352.711111V227.555556h318.577778V153.6z"  ></path></symbol><symbol id="l7-icon-color" viewBox="0 0 1024 1024"><path d="M512 56.888889c9.841778 0 19.626667 0.341333 29.354667 0.910222 69.176889 4.437333 119.068444 62.577778 124.302222 131.072l0.455111 9.386667c0.739556 44.600889 15.303111 84.935111 44.999111 114.631111 27.022222 27.022222 62.805333 41.528889 102.570667 44.430222l12.060444 0.568889c72.476444 1.194667 135.793778 52.451556 140.458667 124.757333 1.137778 18.261333 1.251556 36.807111 0.170667 55.637334-13.198222 233.585778-211.399111 424.220444-445.326223 428.714666L512 967.111111a455.111111 455.111111 0 0 1-455.054222-464.156444c4.551111-233.927111 195.185778-432.128 428.771555-445.326223C494.535111 57.116444 503.296 56.888889 512 56.888889z m0 68.266667a385.706667 385.706667 0 0 0-22.414222 0.625777C291.726222 136.988444 129.080889 305.948444 125.155556 504.263111c-4.152889 212.366222 163.100444 387.185778 372.508444 394.353778l13.425778 0.227555 8.533333-0.113777c198.371556-3.811556 367.331556-166.456889 378.538667-364.373334a396.174222 396.174222 0 0 0-0.170667-47.331555c-1.991111-31.232-29.127111-56.604444-67.128889-60.472889l-8.248889-0.455111-14.051555-0.682667c-56.547556-4.209778-107.406222-25.884444-145.806222-64.284444-38.855111-38.798222-60.416-90.225778-64.284445-145.749334l-0.910222-21.333333c-2.901333-38.001778-28.785778-66.048-60.302222-68.096A433.891556 433.891556 0 0 0 512 125.155556zM438.044444 682.666667a68.266667 68.266667 0 1 1 0 136.533333 68.266667 68.266667 0 0 1 0-136.533333z m-170.666666-227.555556a68.266667 68.266667 0 1 1 0 136.533333 68.266667 68.266667 0 0 1 0-136.533333z m142.222222-227.555555a68.266667 68.266667 0 1 1 0 136.533333 68.266667 68.266667 0 0 1 0-136.533333z"  ></path></symbol><symbol id="l7-icon-base-map" viewBox="0 0 1024 1024"><path d="M923.761778 115.029333A34.133333 34.133333 0 0 1 967.111111 147.911111v624.128a34.133333 34.133333 0 0 1-22.186667 32.028445l-278.755555 103.992888a34.133333 34.133333 0 0 1-23.665778 0.056889L381.724444 812.714667a34.133333 34.133333 0 0 0-23.665777 0.113777L102.968889 908.060444a34.133333 34.133333 0 0 1-45.738667-26.965333L56.888889 876.088889V251.960889a34.133333 34.133333 0 0 1 22.186667-32.028445l278.755555-103.992888a34.133333 34.133333 0 0 1 20.992-0.967112l266.183111 72.988445a34.133333 34.133333 0 0 0 18.204445 0zM403.911111 192.625778v555.576889l216.177778 79.075555V251.960889l-216.177778-59.335111z m-68.266667 4.380444L125.155556 275.569778v551.310222l210.432-78.506667V197.006222zM898.844444 192.853333l-210.545777 58.936889v575.089778l210.545777-78.563556V192.853333z"  ></path></symbol><symbol id="l7-icon-dot" viewBox="0 0 1024 1024"><path d="M341.333333 739.555556a113.777778 113.777778 0 0 1 8.533334 227.271111L341.333333 967.111111a113.777778 113.777778 0 0 1-8.533333-227.271111L341.333333 739.555556z m0 68.266666a45.511111 45.511111 0 1 0 0 91.022222 45.511111 45.511111 0 0 0 0-91.022222zM910.222222 341.333333a113.777778 113.777778 0 0 1 8.533334 227.271111L910.222222 568.888889a113.777778 113.777778 0 0 1-8.533333-227.271111L910.222222 341.333333z m0 68.266667a45.511111 45.511111 0 1 0 0 91.022222 45.511111 45.511111 0 0 0 0-91.022222zM227.555556 56.888889a113.777778 113.777778 0 0 1 8.533333 227.271111L227.555556 284.444444a113.777778 113.777778 0 0 1-8.533334-227.271111L227.555556 56.888889z m0 68.266667a45.511111 45.511111 0 1 0 0 91.022222 45.511111 45.511111 0 0 0 0-91.022222z"  ></path></symbol><symbol id="l7-icon-display" viewBox="0 0 1024 1024"><path d="M512 170.666667c284.444444 0 455.111111 227.555556 455.111111 341.333333s-170.666667 341.333333-455.111111 341.333333-455.111111-227.555556-455.111111-341.333333 170.666667-341.333333 455.111111-341.333333z m0 68.266666C303.729778 238.933333 125.155556 401.237333 125.155556 512c0 110.762667 178.574222 273.066667 386.844444 273.066667s386.844444-162.304 386.844444-273.066667c0-110.762667-178.574222-273.066667-386.844444-273.066667zM512 341.333333a170.666667 170.666667 0 1 1 0 341.333334 170.666667 170.666667 0 0 1 0-341.333334z m0 68.266667a102.4 102.4 0 1 0 0 204.8 102.4 102.4 0 0 0 0-204.8z"  ></path></symbol><symbol id="l7-icon-enlarge" viewBox="0 0 1024 1024"><path d="M546.133333 147.911111l-0.056889 329.955556H876.088889a34.133333 34.133333 0 0 1 0 68.266666H546.076444v329.955556a34.133333 34.133333 0 0 1-68.266666 0V546.133333H147.911111a34.133333 34.133333 0 1 1 0-68.266666h329.898667V147.911111a34.133333 34.133333 0 0 1 68.266666 0z"  ></path></symbol><symbol id="l7-icon-export-picture" viewBox="0 0 1024 1024"><path d="M883.873684 161.684211a32.336842 32.336842 0 0 1 32.336842 32.336842v582.063158a32.336842 32.336842 0 0 1-32.336842 32.336842H86.231579a32.336842 32.336842 0 0 1-32.336842-32.336842V194.021053a32.336842 32.336842 0 0 1 32.336842-32.336842h797.642105z m-32.336842 64.673684H118.568421v517.389473h170.792421a32.175158 32.175158 0 0 1 0.431158-0.646736l3.772632-4.473264 330.320842-330.374736a32.336842 32.336842 0 0 1 38.588631-5.389474l4.473263 3.018105 184.589474 147.725474V226.357895z m-202.428631 248.131368L379.850105 743.747368H851.536842v-107.304421l-202.428631-161.953684zM323.368421 323.368421a107.789474 107.789474 0 1 1 0 215.578947 107.789474 107.789474 0 0 1 0-215.578947z m0 64.673684a43.115789 43.115789 0 1 0 0 86.231579 43.115789 43.115789 0 0 0 0-86.231579z"  ></path></symbol><symbol id="l7-icon-exit-fullscreen" viewBox="0 0 1024 1024"><path d="M841.955556 591.644444a34.133333 34.133333 0 0 1 5.518222 67.811556l-5.518222 0.455111h-133.745778l192 192.056889a34.133333 34.133333 0 0 1-38.343111 55.182222l-5.176889-2.958222-4.721778-3.982222L659.911111 708.266667V841.955556a34.133333 34.133333 0 0 1-28.615111 33.678222L625.777778 876.088889a34.133333 34.133333 0 0 1-33.678222-28.615111L591.644444 841.955556V625.777778a34.133333 34.133333 0 0 1 28.615112-33.678222L625.777778 591.644444h216.177778z m-443.733334 0a34.133333 34.133333 0 0 1 33.678222 28.615112L432.355556 625.777778v216.177778a34.133333 34.133333 0 0 1-67.811556 5.518222L364.088889 841.955556v-133.745778l-192.056889 192a34.133333 34.133333 0 0 1-52.224-43.52l3.982222-4.721778L315.847111 659.911111H182.044444a34.133333 34.133333 0 0 1-33.678222-28.615111L147.911111 625.777778a34.133333 34.133333 0 0 1 28.615111-33.678222L182.044444 591.644444H398.222222zM167.310222 119.808l4.721778 3.982222L364.088889 315.847111V182.044444a34.133333 34.133333 0 0 1 28.615111-33.678222L398.222222 147.911111a34.133333 34.133333 0 0 1 33.678222 28.615111L432.355556 182.044444V398.222222a34.133333 34.133333 0 0 1-28.615112 33.678222L398.222222 432.355556H182.044444a34.133333 34.133333 0 0 1-5.518222-67.811556L182.044444 364.088889h133.802667L123.790222 172.032a34.133333 34.133333 0 0 1 43.52-52.224z m732.899556 3.982222a34.133333 34.133333 0 0 1 3.982222 43.52l-3.982222 4.721778L708.266667 364.088889H841.955556a34.133333 34.133333 0 0 1 33.678222 28.615111L876.088889 398.222222a34.133333 34.133333 0 0 1-28.615111 33.678222L841.955556 432.355556H625.777778a34.133333 34.133333 0 0 1-33.678222-28.615112L591.644444 398.222222V182.044444a34.133333 34.133333 0 0 1 67.811556-5.518222l0.455111 5.518222v133.802667l192.056889-192.056889a34.133333 34.133333 0 0 1 48.241778 0z"  ></path></symbol><symbol id="l7-icon-line" viewBox="0 0 1024 1024"><path d="M853.333333 56.888889a113.777778 113.777778 0 0 1 8.533334 227.271111L853.333333 284.444444c-19.000889 0-36.864-4.664889-52.622222-12.856888l-529.123555 529.066666a113.777778 113.777778 0 0 1-92.387556 166.115556L170.666667 967.111111a113.777778 113.777778 0 0 1-8.533334-227.271111L170.666667 739.555556c19.000889 0 36.864 4.664889 52.622222 12.856888l529.123555-529.066666a113.777778 113.777778 0 0 1 92.387556-166.115556L853.333333 56.888889zM170.666667 807.822222a45.511111 45.511111 0 1 0 0 91.022222 45.511111 45.511111 0 0 0 0-91.022222z m682.666666-682.666666a45.511111 45.511111 0 1 0 0 91.022222 45.511111 45.511111 0 0 0 0-91.022222z"  ></path></symbol><symbol id="l7-icon-layer" viewBox="0 0 1024 1024"><path d="M767.089778 625.777778l180.167111 82.773333a34.133333 34.133333 0 0 1 4.892444 59.278222l-4.892444 2.730667-420.977778 193.422222a34.133333 34.133333 0 0 1-22.983111 1.991111l-5.575111-1.991111-420.977778-193.422222a34.133333 34.133333 0 0 1-4.892444-59.278222l4.892444-2.730667L256.853333 625.777778l81.749334 37.546666L172.771556 739.555556 512 895.374222 851.171556 739.555556l-165.831112-76.231112 81.749334-37.546666z m0-227.555556l180.167111 82.773334a34.133333 34.133333 0 0 1 4.892444 59.278222l-4.892444 2.730666-420.977778 193.422223a34.133333 34.133333 0 0 1-22.983111 1.991111l-5.575111-1.991111-420.977778-193.422223a34.133333 34.133333 0 0 1-4.892444-59.278222l4.892444-2.730666L256.853333 398.222222l81.749334 37.546667-165.831111 76.174222L512 667.818667l339.171556-155.875556-165.831112-76.174222L767.089778 398.222222zM497.720889 60.017778a34.133333 34.133333 0 0 1 28.558222 0l420.977778 193.422222a34.133333 34.133333 0 0 1 0 62.008889l-420.977778 193.422222a34.133333 34.133333 0 0 1-28.558222 0l-420.977778-193.422222a34.133333 34.133333 0 0 1 0-62.008889zM512 128.568889L172.771556 284.387556 512 440.263111l339.171556-155.875555L512 128.568889z"  ></path></symbol><symbol id="l7-icon-narrow" viewBox="0 0 1024 1024"><path d="M910.222222 512a34.133333 34.133333 0 0 1-34.133333 34.133333H147.911111a34.133333 34.133333 0 1 1 0-68.266666h728.177778a34.133333 34.133333 0 0 1 34.133333 34.133333z"  ></path></symbol><symbol id="l7-icon-fullscreen" viewBox="0 0 1024 1024"><path d="M645.176889 597.674667l4.721778 3.982222L841.955556 793.6l0.056888-133.688889a34.133333 34.133333 0 0 1 28.615112-33.678222L876.088889 625.777778a34.133333 34.133333 0 0 1 33.678222 28.615111L910.222222 659.911111v216.177778a34.133333 34.133333 0 0 1-28.615111 33.678222L876.088889 910.222222h-216.177778a34.133333 34.133333 0 0 1-5.518222-67.811555l5.518222-0.455111h133.745778l-192-192.056889a34.133333 34.133333 0 0 1 43.52-52.224z m-222.833778 3.982222a34.133333 34.133333 0 0 1 3.982222 43.52l-3.982222 4.721778L230.286222 841.955556H364.088889a34.133333 34.133333 0 0 1 33.678222 28.615111L398.222222 876.088889a34.133333 34.133333 0 0 1-28.615111 33.678222L364.088889 910.222222H147.911111a34.133333 34.133333 0 0 1-33.678222-28.615111L113.777778 876.088889v-216.177778a34.133333 34.133333 0 0 1 67.811555-5.518222l0.455111 5.518222-0.056888 133.745778 192.113777-192a34.133333 34.133333 0 0 1 48.241778 0zM364.088889 113.777778a34.133333 34.133333 0 0 1 5.518222 67.811555L364.088889 182.044444H230.343111l192 192.056889a34.133333 34.133333 0 0 1-43.52 52.224l-4.721778-3.982222-192.113777-192.056889L182.044444 364.088889a34.133333 34.133333 0 0 1-28.615111 33.678222L147.911111 398.222222a34.133333 34.133333 0 0 1-33.678222-28.615111L113.777778 364.088889V147.911111a34.133333 34.133333 0 0 1 28.615111-33.678222L147.911111 113.777778h216.177778z m512 0a34.133333 34.133333 0 0 1 33.678222 28.615111L910.222222 147.911111v216.177778a34.133333 34.133333 0 0 1-67.811555 5.518222L841.955556 364.088889l-0.056889-133.745778-192 192a34.133333 34.133333 0 0 1-52.224-43.52l3.982222-4.721778L793.6 182.044444H659.911111a34.133333 34.133333 0 0 1-33.678222-28.615111L625.777778 147.911111a34.133333 34.133333 0 0 1 28.615111-33.678222L659.911111 113.777778h216.177778z"  ></path></symbol><symbol id="l7-icon-hide" viewBox="0 0 1024 1024"><path d="M875.52 87.836444a34.133333 34.133333 0 0 1 7.281778 43.121778l-3.527111 5.006222-682.666667 796.444445a34.133333 34.133333 0 0 1-55.409778-39.367111l3.527111-5.006222 97.166223-113.379556C123.164444 697.969778 56.888889 582.940444 56.888889 512c0-113.777778 170.666667-341.333333 455.111111-341.333333a496.64 496.64 0 0 1 208.952889 45.112889l106.439111-124.188445a34.133333 34.133333 0 0 1 48.128-3.754667z m-38.684444 202.524445C921.031111 362.951111 967.111111 452.835556 967.111111 512c0 113.777778-170.666667 341.333333-455.111111 341.333333-50.631111 0-97.678222-7.224889-140.8-19.740444l50.232889-58.595556A417.393778 417.393778 0 0 0 512 785.066667c208.270222 0 386.844444-162.304 386.844444-273.066667 0-52.849778-40.675556-117.418667-105.813333-170.496l43.804445-51.2zM512 238.933333C303.729778 238.933333 125.155556 401.237333 125.155556 512c0 66.787556 64.853333 152.291556 162.133333 209.692444L377.173333 616.675556a170.666667 170.666667 0 0 1 217.713778-253.895112l78.620445-91.704888A432.924444 432.924444 0 0 0 512 238.933333z m166.684444 236.088889a170.666667 170.666667 0 0 1-177.664 207.303111l177.607112-207.303111zM512 409.6a102.4 102.4 0 0 0-88.746667 153.486222L548.864 416.426667A102.172444 102.172444 0 0 0 512 409.6z"  ></path></symbol><symbol id="l7-icon-rectangle" viewBox="0 0 1024 1024"><path d="M170.666667 56.888889a113.777778 113.777778 0 0 1 108.544 79.644444H853.333333a34.133333 34.133333 0 0 1 33.678223 28.615111L887.466667 170.666667v574.122666a113.777778 113.777778 0 1 1-142.677334 142.734223L170.666667 887.466667a34.133333 34.133333 0 0 1-33.678223-28.615111L136.533333 853.333333V279.210667A113.777778 113.777778 0 0 1 170.666667 56.888889z m682.666666 750.933333a45.511111 45.511111 0 1 0 0 91.022222 45.511111 45.511111 0 0 0 0-91.022222z m-34.133333-603.022222H279.210667a114.062222 114.062222 0 0 1-74.353778 74.410667L204.8 819.2h539.989333a114.062222 114.062222 0 0 1 74.410667-74.410667V204.8zM170.666667 125.155556a45.511111 45.511111 0 1 0 0 91.022222 45.511111 45.511111 0 0 0 0-91.022222z"  ></path></symbol><symbol id="l7-icon-ranging" viewBox="0 0 1024 1024"><path d="M723.171556 50.403556l250.424888 250.424888a31.061333 31.061333 0 0 1 0 43.918223L344.746667 973.596444a31.061333 31.061333 0 0 1-43.918223 0L50.403556 723.171556a31.061333 31.061333 0 0 1 0-43.918223L679.253333 50.403556a31.061333 31.061333 0 0 1 43.918223 0z m-21.959112 74.524444l-39.765333 39.822222 98.986667 98.872889a34.133333 34.133333 0 0 1-44.088889 51.882667l-4.209778-3.640889-98.929778-98.929778-63.886222 63.886222 62.179556 62.122667a34.133333 34.133333 0 0 1-44.088889 51.882667L563.2 387.242667 501.077333 325.063111 437.191111 388.949333l98.986667 98.929778a34.133333 34.133333 0 0 1-44.088889 51.882667l-4.209778-3.640889-98.929778-98.929778-63.886222 63.886222L387.242667 563.2a34.133333 34.133333 0 0 1-44.088889 51.882667l-4.209778-3.584-62.122667-62.179556-63.886222 63.886222 98.986667 98.929778a34.133333 34.133333 0 0 1-44.088889 51.882667l-4.209778-3.640889-98.929778-98.929778-39.765333 39.822222 197.802667 197.745778 576.284444-576.284444-197.802667-197.745778z"  ></path></symbol><symbol id="l7-icon-reposition" viewBox="0 0 1024 1024"><path d="M512 56.888889a34.133333 34.133333 0 0 1 34.133333 34.133333v24.177778A398.336 398.336 0 0 1 908.856889 477.866667h24.177778a34.133333 34.133333 0 0 1 0 68.266666h-24.177778A398.336 398.336 0 0 1 546.133333 908.856889L546.133333 932.977778a34.133333 34.133333 0 0 1-68.266666 0v-24.177778A398.336 398.336 0 0 1 115.2 546.133333L91.022222 546.133333a34.133333 34.133333 0 1 1 0-68.266666h24.177778A398.336 398.336 0 0 1 477.866667 115.2V91.022222A34.133333 34.133333 0 0 1 512 56.888889z m34.190222 126.862222L546.133333 193.422222a34.133333 34.133333 0 1 1-68.266666 0v-9.671111A330.069333 330.069333 0 0 0 183.751111 477.866667h9.671111a34.133333 34.133333 0 1 1 0 68.266666l-9.671111 0.056889A330.069333 330.069333 0 0 0 477.866667 840.248889V830.577778a34.133333 34.133333 0 0 1 68.266666 0l0.056889 9.671111A330.069333 330.069333 0 0 0 840.248889 546.133333L830.577778 546.133333a34.133333 34.133333 0 0 1 0-68.266666h9.671111A330.069333 330.069333 0 0 0 546.133333 183.751111zM512 341.333333a170.666667 170.666667 0 1 1 0 341.333334 170.666667 170.666667 0 0 1 0-341.333334z m0 68.266667a102.4 102.4 0 1 0 0 204.8 102.4 102.4 0 0 0 0-204.8z"  ></path></symbol><symbol id="l7-icon-round" viewBox="0 0 1024 1024"><path d="M512 56.888889a455.111111 455.111111 0 0 1 391.395556 687.502222 113.777778 113.777778 0 0 1-159.061334 158.890667A455.111111 455.111111 0 0 1 120.604444 279.608889 113.777778 113.777778 0 0 1 279.608889 120.604444 452.835556 452.835556 0 0 1 512 56.888889z m0 68.266667a384.910222 384.910222 0 0 0-191.715556 50.744888A113.777778 113.777778 0 0 1 175.957333 320.284444a386.844444 386.844444 0 0 0 527.815111 527.758223 113.777778 113.777778 0 0 1 144.270223-144.440889A386.844444 386.844444 0 0 0 512 125.155556z m299.406222 640.739555a45.511111 45.511111 0 1 0 0 91.022222 45.511111 45.511111 0 0 0 0-91.022222zM212.593778 167.082667a45.511111 45.511111 0 1 0 0 91.022222 45.511111 45.511111 0 0 0 0-91.022222z"  ></path></symbol><symbol id="l7-icon-guanbi" viewBox="0 0 1024 1024"><path d="M576 512l277.333333 277.333333-64 64-277.333333-277.333333L234.666667 853.333333 170.666667 789.333333l277.333333-277.333333L170.666667 234.666667 234.666667 170.666667l277.333333 277.333333L789.333333 170.666667 853.333333 234.666667 576 512z"  ></path></symbol></svg>',function(U){try{let z=function(){A||(A=!0,l())},Z=function(){try{R.documentElement.doScroll("left")}catch(W){return void setTimeout(Z,50)}z()};var k=z,B=Z,c=(c=document.getElementsByTagName("script"))[c.length-1],F=c.getAttribute("data-injectcss"),c=c.getAttribute("data-disable-injectsvg");if(!c){var w,v,l,R,A,D=function(Y,te){te.parentNode.insertBefore(Y,te)};if(F&&!U.__iconfont__svg__cssinject__){U.__iconfont__svg__cssinject__=!0;try{document.write("<style>.svgfont {display: inline-block;width: 1em;height: 1em;fill: currentColor;vertical-align: -0.1em;font-size:16px;}</style>")}catch(W){console&&console.log(W)}}w=function(){var Y,te=document.createElement("div");te.innerHTML=U._iconfont_svg_string_3580659,(te=te.getElementsByTagName("svg")[0])&&(te.setAttribute("aria-hidden","true"),te.style.position="absolute",te.style.width=0,te.style.height=0,te.style.overflow="hidden",te=te,(Y=document.body).firstChild?D(te,Y.firstChild):Y.appendChild(te))},document.addEventListener?~["complete","loaded","interactive"].indexOf(document.readyState)?setTimeout(w,0):(v=function(){document.removeEventListener("DOMContentLoaded",v,!1),w()},document.addEventListener("DOMContentLoaded",v,!1)):document.attachEvent&&(l=w,R=U.document,A=!1,Z(),R.onreadystatechange=function(){R.readyState=="complete"&&(R.onreadystatechange=null,z())})}}catch(z){}}(window)},84827:function(U,F,c){"use strict";c.d(F,{lg:function(){return t7},Ie:function(){return Kg},pc:function(){return m7},ns:function(){return Mm},dW:function(){return Ib},xs:function(){return xP}});var w={};c.r(w),c.d(w,{add:function(){return Fv},adjoint:function(){return Xh},clone:function(){return Lp},copy:function(){return Hp},create:function(){return no},determinant:function(){return Ed},equals:function(){return Gd},exactEquals:function(){return vh},frob:function(){return Vd},fromQuat:function(){return ud},fromQuat2:function(){return iv},fromRotation:function(){return Rv},fromRotationTranslation:function(){return rh},fromRotationTranslationScale:function(){return hc},fromRotationTranslationScaleOrigin:function(){return xf},fromScaling:function(){return Ov},fromTranslation:function(){return nv},fromValues:function(){return ph},fromXRotation:function(){return Ip},fromYRotation:function(){return zd},fromZRotation:function(){return Ud},frustum:function(){return kv},getRotation:function(){return sd},getScaling:function(){return Dh},getTranslation:function(){return Pv},identity:function(){return Hu},invert:function(){return Dp},lookAt:function(){return jd},mul:function(){return Hd},multiply:function(){return Sp},multiplyScalar:function(){return cv},multiplyScalarAndAdd:function(){return Nv},ortho:function(){return dh},orthoNO:function(){return Zd},orthoZO:function(){return Dv},perspective:function(){return Sd},perspectiveFromFieldOfView:function(){return ov},perspectiveNO:function(){return av},perspectiveZO:function(){return Lv},rotate:function(){return Iv},rotateX:function(){return hh},rotateY:function(){return ad},rotateZ:function(){return od},scale:function(){return Ch},set:function(){return rv},str:function(){return uv},sub:function(){return f0},subtract:function(){return lv},targetTo:function(){return sv},translate:function(){return th},transpose:function(){return Bd}});var v={};c.r(v),c.d(v,{add:function(){return JT},angle:function(){return Wg},bezier:function(){return l3},ceil:function(){return qT},clone:function(){return YT},copy:function(){return KT},create:function(){return Kv},cross:function(){return Ux},dist:function(){return S3},distance:function(){return Dx},div:function(){return E3},divide:function(){return Lx},dot:function(){return zx},equals:function(){return x3},exactEquals:function(){return _3},floor:function(){return e3},forEach:function(){return T3},fromValues:function(){return lp},hermite:function(){return u3},inverse:function(){return o3},len:function(){return A3},length:function(){return Rx},lerp:function(){return s3},max:function(){return r3},min:function(){return t3},mul:function(){return b3},multiply:function(){return kx},negate:function(){return Bx},normalize:function(){return Qv},random:function(){return c3},rotateX:function(){return h3},rotateY:function(){return v3},rotateZ:function(){return m3},round:function(){return n3},scale:function(){return i3},scaleAndAdd:function(){return a3},set:function(){return QT},sqrDist:function(){return w3},sqrLen:function(){return C3},squaredDistance:function(){return Fx},squaredLength:function(){return Nx},str:function(){return y3},sub:function(){return $g},subtract:function(){return Px},transformMat3:function(){return f3},transformMat4:function(){return C0},transformQuat:function(){return p3},zero:function(){return g3}});var l={},R={},A=function(i){return R[i]},D=function(i,t){R[i]=t},k=function(i){return l[i]},B=function(i,t){l[i]=t},z={},Z={},W=34,Y=10,te=13;function le(e){return new Function("d","return {"+e.map(function(i,t){return JSON.stringify(i)+": d["+t+'] || ""'}).join(",")+"}")}function be(e,i){var t=le(e);return function(n,r){return i(t(n),r,e)}}function de(e){var i=Object.create(null),t=[];return e.forEach(function(n){for(var r in n)r in i||t.push(i[r]=r)}),t}function pe(e,i){var t=e+"",n=t.length;return n<i?new Array(i-n+1).join(0)+t:t}function Oe(e){return e<0?"-"+pe(-e,6):e>9999?"+"+pe(e,6):pe(e,4)}function xe(e){var i=e.getUTCHours(),t=e.getUTCMinutes(),n=e.getUTCSeconds(),r=e.getUTCMilliseconds();return isNaN(e)?"Invalid Date":Oe(e.getUTCFullYear(),4)+"-"+pe(e.getUTCMonth()+1,2)+"-"+pe(e.getUTCDate(),2)+(r?"T"+pe(i,2)+":"+pe(t,2)+":"+pe(n,2)+"."+pe(r,3)+"Z":n?"T"+pe(i,2)+":"+pe(t,2)+":"+pe(n,2)+"Z":t||i?"T"+pe(i,2)+":"+pe(t,2)+"Z":"")}function Ve(e){var i=new RegExp('["'+e+`
\r]`),t=e.charCodeAt(0);function n(P,G){var $,Ee,Se=r(P,function(Re,Ye){if($)return $(Re,Ye-1);Ee=Re,$=G?be(Re,G):le(Re)});return Se.columns=Ee||[],Se}function r(P,G){var $=[],Ee=P.length,Se=0,Re=0,Ye,St=Ee<=0,vt=!1;P.charCodeAt(Ee-1)===Y&&--Ee,P.charCodeAt(Ee-1)===te&&--Ee;function Ut(){if(St)return Z;if(vt)return vt=!1,z;var Tr,on=Se,dn;if(P.charCodeAt(on)===W){for(;Se++<Ee&&P.charCodeAt(Se)!==W||P.charCodeAt(++Se)===W;);return(Tr=Se)>=Ee?St=!0:(dn=P.charCodeAt(Se++))===Y?vt=!0:dn===te&&(vt=!0,P.charCodeAt(Se)===Y&&++Se),P.slice(on+1,Tr-1).replace(/""/g,'"')}for(;Se<Ee;){if((dn=P.charCodeAt(Tr=Se++))===Y)vt=!0;else if(dn===te)vt=!0,P.charCodeAt(Se)===Y&&++Se;else if(dn!==t)continue;return P.slice(on,Tr)}return St=!0,P.slice(on,Ee)}for(;(Ye=Ut())!==Z;){for(var Kt=[];Ye!==z&&Ye!==Z;)Kt.push(Ye),Ye=Ut();G&&(Kt=G(Kt,Re++))==null||$.push(Kt)}return $}function o(P,G){return P.map(function($){return G.map(function(Ee){return I($[Ee])}).join(e)})}function u(P,G){return G==null&&(G=de(P)),[G.map(I).join(e)].concat(o(P,G)).join(`
`)}function f(P,G){return G==null&&(G=de(P)),o(P,G).join(`
`)}function g(P){return P.map(x).join(`
`)}function x(P){return P.map(I).join(e)}function I(P){return P==null?"":P instanceof Date?xe(P):i.test(P+="")?'"'+P.replace(/"/g,'""')+'"':P}return{parse:n,parseRows:r,format:u,formatBody:f,formatRows:g,formatRow:x,formatValue:I}}var K=Ve(","),ke=K.parse,we=K.parseRows,Me=K.format,Xe=K.formatBody,Ke=K.formatRows,At=K.formatRow,mt=K.formatValue,ie=c(67442),oe=c(87643),he=c(47903),ye=c.n(he),se=63710088e-1,Ne={centimeters:se*100,centimetres:se*100,degrees:se/111325,feet:se*3.28084,inches:se*39.37,kilometers:se/1e3,kilometres:se/1e3,meters:se,metres:se,miles:se/1609.344,millimeters:se*1e3,millimetres:se*1e3,nauticalmiles:se/1852,radians:1,yards:se*1.0936},st={centimeters:100,centimetres:100,degrees:1/111325,feet:3.28084,inches:39.37,kilometers:1/1e3,kilometres:1/1e3,meters:1,metres:1,miles:1/1609.344,millimeters:1e3,millimetres:1e3,nauticalmiles:1/1852,radians:1/se,yards:1.0936133},Fe={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,hectares:1e-4,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046};function tt(e,i,t){t===void 0&&(t={});var n={type:"Feature"};return(t.id===0||t.id)&&(n.id=t.id),t.bbox&&(n.bbox=t.bbox),n.properties=i||{},n.geometry=e,n}function Wt(e,i,t){switch(t===void 0&&(t={}),e){case"Point":return Pr(i).geometry;case"LineString":return Cr(i).geometry;case"Polygon":return xr(i).geometry;case"MultiPoint":return cr(i).geometry;case"MultiLineString":return _r(i).geometry;case"MultiPolygon":return Vr(i).geometry;default:throw new Error(e+" is invalid")}}function Pr(e,i,t){if(t===void 0&&(t={}),!e)throw new Error("coordinates is required");if(!Array.isArray(e))throw new Error("coordinates must be an Array");if(e.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!Q(e[0])||!Q(e[1]))throw new Error("coordinates must contain numbers");var n={type:"Point",coordinates:e};return tt(n,i,t)}function Qt(e,i,t){return t===void 0&&(t={}),ot(e.map(function(n){return Pr(n,i)}),t)}function xr(e,i,t){t===void 0&&(t={});for(var n=0,r=e;n<r.length;n++){var o=r[n];if(o.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var u=0;u<o[o.length-1].length;u++)if(o[o.length-1][u]!==o[0][u])throw new Error("First and last Position are not equivalent.")}var f={type:"Polygon",coordinates:e};return tt(f,i,t)}function $r(e,i,t){return t===void 0&&(t={}),ot(e.map(function(n){return xr(n,i)}),t)}function Cr(e,i,t){if(t===void 0&&(t={}),e.length<2)throw new Error("coordinates must be an array of two or more positions");var n={type:"LineString",coordinates:e};return tt(n,i,t)}function sn(e,i,t){return t===void 0&&(t={}),ot(e.map(function(n){return Cr(n,i)}),t)}function ot(e,i){i===void 0&&(i={});var t={type:"FeatureCollection"};return i.id&&(t.id=i.id),i.bbox&&(t.bbox=i.bbox),t.features=e,t}function _r(e,i,t){t===void 0&&(t={});var n={type:"MultiLineString",coordinates:e};return tt(n,i,t)}function cr(e,i,t){t===void 0&&(t={});var n={type:"MultiPoint",coordinates:e};return tt(n,i,t)}function Vr(e,i,t){t===void 0&&(t={});var n={type:"MultiPolygon",coordinates:e};return tt(n,i,t)}function Qn(e,i,t){t===void 0&&(t={});var n={type:"GeometryCollection",geometries:e};return tt(n,i,t)}function mn(e,i){if(i===void 0&&(i=0),i&&!(i>=0))throw new Error("precision must be a positive number");var t=Math.pow(10,i||0);return Math.round(e*t)/t}function _n(e,i){i===void 0&&(i="kilometers");var t=Ne[i];if(!t)throw new Error(i+" units is invalid");return e*t}function Yr(e,i){i===void 0&&(i="kilometers");var t=Ne[i];if(!t)throw new Error(i+" units is invalid");return e/t}function Fr(e,i){return ft(Yr(e,i))}function kr(e){var i=e%360;return i<0&&(i+=360),i}function ft(e){var i=e%(2*Math.PI);return i*180/Math.PI}function me(e){var i=e%360;return i*Math.PI/180}function ne(e,i,t){if(i===void 0&&(i="kilometers"),t===void 0&&(t="kilometers"),!(e>=0))throw new Error("length must be a positive number");return _n(Yr(e,i),t)}function fe(e,i,t){if(i===void 0&&(i="meters"),t===void 0&&(t="kilometers"),!(e>=0))throw new Error("area must be a positive number");var n=Fe[i];if(!n)throw new Error("invalid original units");var r=Fe[t];if(!r)throw new Error("invalid final units");return e/n*r}function Q(e){return!isNaN(e)&&e!==null&&!Array.isArray(e)}function De(e){return!!e&&e.constructor===Object}function dt(e){if(!e)throw new Error("bbox is required");if(!Array.isArray(e))throw new Error("bbox must be an Array");if(e.length!==4&&e.length!==6)throw new Error("bbox must be an Array of 4 or 6 numbers");e.forEach(function(i){if(!Q(i))throw new Error("bbox must only contain numbers")})}function Jt(e){if(!e)throw new Error("id is required");if(["string","number"].indexOf(typeof e)===-1)throw new Error("id must be a number or a string")}function it(e){if(!e)throw new Error("coord is required");if(!Array.isArray(e)){if(e.type==="Feature"&&e.geometry!==null&&e.geometry.type==="Point")return e.geometry.coordinates;if(e.type==="Point")return e.coordinates}if(Array.isArray(e)&&e.length>=2&&!Array.isArray(e[0])&&!Array.isArray(e[1]))return e;throw new Error("coord must be GeoJSON Point or an Array of numbers")}function lt(e){if(Array.isArray(e))return e;if(e.type==="Feature"){if(e.geometry!==null)return e.geometry.coordinates}else if(e.coordinates)return e.coordinates;throw new Error("coords must be GeoJSON Feature, Geometry Object or an Array")}function qt(e){if(e.length>1&&isNumber(e[0])&&isNumber(e[1]))return!0;if(Array.isArray(e[0])&&e[0].length)return qt(e[0]);throw new Error("coordinates must only contain numbers")}function pr(e,i,t){if(!i||!t)throw new Error("type and name required");if(!e||e.type!==i)throw new Error("Invalid input to "+t+": must be a "+i+", given "+e.type)}function Hr(e,i,t){if(!e)throw new Error("No feature passed");if(!t)throw new Error(".featureOf() requires a name");if(!e||e.type!=="Feature"||!e.geometry)throw new Error("Invalid input to "+t+", Feature with geometry required");if(!e.geometry||e.geometry.type!==i)throw new Error("Invalid input to "+t+": must be a "+i+", given "+e.geometry.type)}function Xr(e,i,t){if(!e)throw new Error("No featureCollection passed");if(!t)throw new Error(".collectionOf() requires a name");if(!e||e.type!=="FeatureCollection")throw new Error("Invalid input to "+t+", FeatureCollection required");for(var n=0,r=e.features;n<r.length;n++){var o=r[n];if(!o||o.type!=="Feature"||!o.geometry)throw new Error("Invalid input to "+t+", Feature with geometry required");if(!o.geometry||o.geometry.type!==i)throw new Error("Invalid input to "+t+": must be a "+i+", given "+o.geometry.type)}}function ce(e){return e.type==="Feature"?e.geometry:e}function xt(e,i){return e.type==="FeatureCollection"?"FeatureCollection":e.type==="GeometryCollection"?"GeometryCollection":e.type==="Feature"&&e.geometry!==null?e.geometry.type:e.type}function Gt(e,i,t){if(e!==null)for(var n,r,o,u,f,g,x,I=0,P=0,G,$=e.type,Ee=$==="FeatureCollection",Se=$==="Feature",Re=Ee?e.features.length:1,Ye=0;Ye<Re;Ye++){x=Ee?e.features[Ye].geometry:Se?e.geometry:e,G=x?x.type==="GeometryCollection":!1,f=G?x.geometries.length:1;for(var St=0;St<f;St++){var vt=0,Ut=0;if(u=G?x.geometries[St]:x,u!==null){g=u.coordinates;var Kt=u.type;switch(I=t&&(Kt==="Polygon"||Kt==="MultiPolygon")?1:0,Kt){case null:break;case"Point":if(i(g,P,Ye,vt,Ut)===!1)return!1;P++,vt++;break;case"LineString":case"MultiPoint":for(n=0;n<g.length;n++){if(i(g[n],P,Ye,vt,Ut)===!1)return!1;P++,Kt==="MultiPoint"&&vt++}Kt==="LineString"&&vt++;break;case"Polygon":case"MultiLineString":for(n=0;n<g.length;n++){for(r=0;r<g[n].length-I;r++){if(i(g[n][r],P,Ye,vt,Ut)===!1)return!1;P++}Kt==="MultiLineString"&&vt++,Kt==="Polygon"&&Ut++}Kt==="Polygon"&&vt++;break;case"MultiPolygon":for(n=0;n<g.length;n++){for(Ut=0,r=0;r<g[n].length;r++){for(o=0;o<g[n][r].length-I;o++){if(i(g[n][r][o],P,Ye,vt,Ut)===!1)return!1;P++}Ut++}vt++}break;case"GeometryCollection":for(n=0;n<u.geometries.length;n++)if(Gt(u.geometries[n],i,t)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function Ir(e,i,t,n){var r=t;return Gt(e,function(o,u,f,g,x){u===0&&t===void 0?r=o:r=i(r,o,u,f,g,x)},n),r}function nn(e,i){var t;switch(e.type){case"FeatureCollection":for(t=0;t<e.features.length&&i(e.features[t].properties,t)!==!1;t++);break;case"Feature":i(e.properties,0);break}}function zi(e,i,t){var n=t;return nn(e,function(r,o){o===0&&t===void 0?n=r:n=i(n,r,o)}),n}function Ui(e,i){if(e.type==="Feature")i(e,0);else if(e.type==="FeatureCollection")for(var t=0;t<e.features.length&&i(e.features[t],t)!==!1;t++);}function Pi(e,i,t){var n=t;return Ui(e,function(r,o){o===0&&t===void 0?n=r:n=i(n,r,o)}),n}function ka(e){var i=[];return Gt(e,function(t){i.push(t)}),i}function Ti(e,i){var t,n,r,o,u,f,g,x,I,P,G=0,$=e.type==="FeatureCollection",Ee=e.type==="Feature",Se=$?e.features.length:1;for(t=0;t<Se;t++){for(f=$?e.features[t].geometry:Ee?e.geometry:e,x=$?e.features[t].properties:Ee?e.properties:{},I=$?e.features[t].bbox:Ee?e.bbox:void 0,P=$?e.features[t].id:Ee?e.id:void 0,g=f?f.type==="GeometryCollection":!1,u=g?f.geometries.length:1,r=0;r<u;r++){if(o=g?f.geometries[r]:f,o===null){if(i(null,G,x,I,P)===!1)return!1;continue}switch(o.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(i(o,G,x,I,P)===!1)return!1;break}case"GeometryCollection":{for(n=0;n<o.geometries.length;n++)if(i(o.geometries[n],G,x,I,P)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}G++}}function Ge(e,i,t){var n=t;return Ti(e,function(r,o,u,f,g){o===0&&t===void 0?n=r:n=i(n,r,o,u,f,g)}),n}function et(e,i){Ti(e,function(t,n,r,o,u){var f=t===null?null:t.type;switch(f){case null:case"Point":case"LineString":case"Polygon":return i(tt(t,r,{bbox:o,id:u}),n,0)===!1?!1:void 0}var g;switch(f){case"MultiPoint":g="Point";break;case"MultiLineString":g="LineString";break;case"MultiPolygon":g="Polygon";break}for(var x=0;x<t.coordinates.length;x++){var I=t.coordinates[x],P={type:g,coordinates:I};if(i(tt(P,r),n,x)===!1)return!1}})}function gt(e,i,t){var n=t;return et(e,function(r,o,u){o===0&&u===0&&t===void 0?n=r:n=i(n,r,o,u)}),n}function ht(e,i){et(e,function(t,n,r){var o=0;if(!!t.geometry){var u=t.geometry.type;if(!(u==="Point"||u==="MultiPoint")){var f,g=0,x=0,I=0;if(Gt(t,function(P,G,$,Ee,Se){if(f===void 0||n>g||Ee>x||Se>I){f=P,g=n,x=Ee,I=Se,o=0;return}var Re=lineString([f,P],t.properties);if(i(Re,n,r,Se,o)===!1)return!1;o++,f=P})===!1)return!1}}})}function Et(e,i,t){var n=t,r=!1;return ht(e,function(o,u,f,g,x){r===!1&&t===void 0?n=o:n=i(n,o,u,f,g,x),r=!0}),n}function Zt(e,i){if(!e)throw new Error("geojson is required");et(e,function(t,n,r){if(t.geometry!==null){var o=t.geometry.type,u=t.geometry.coordinates;switch(o){case"LineString":if(i(t,n,r,0,0)===!1)return!1;break;case"Polygon":for(var f=0;f<u.length;f++)if(i(lineString(u[f],t.properties),n,r,f)===!1)return!1;break}}})}function sr(e,i,t){var n=t;return Zt(e,function(r,o,u,f){o===0&&t===void 0?n=r:n=i(n,r,o,u,f)}),n}function bt(e,i){if(i=i||{},!isObject(i))throw new Error("options is invalid");var t=i.featureIndex||0,n=i.multiFeatureIndex||0,r=i.geometryIndex||0,o=i.segmentIndex||0,u=i.properties,f;switch(e.type){case"FeatureCollection":t<0&&(t=e.features.length+t),u=u||e.features[t].properties,f=e.features[t].geometry;break;case"Feature":u=u||e.properties,f=e.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":f=e;break;default:throw new Error("geojson is invalid")}if(f===null)return null;var g=f.coordinates;switch(f.type){case"Point":case"MultiPoint":return null;case"LineString":return o<0&&(o=g.length+o-1),lineString([g[o],g[o+1]],u,i);case"Polygon":return r<0&&(r=g.length+r),o<0&&(o=g[r].length+o-1),lineString([g[r][o],g[r][o+1]],u,i);case"MultiLineString":return n<0&&(n=g.length+n),o<0&&(o=g[n].length+o-1),lineString([g[n][o],g[n][o+1]],u,i);case"MultiPolygon":return n<0&&(n=g.length+n),r<0&&(r=g[n].length+r),o<0&&(o=g[n][r].length-o-1),lineString([g[n][r][o],g[n][r][o+1]],u,i)}throw new Error("geojson is invalid")}function Ft(e,i){if(i=i||{},!isObject(i))throw new Error("options is invalid");var t=i.featureIndex||0,n=i.multiFeatureIndex||0,r=i.geometryIndex||0,o=i.coordIndex||0,u=i.properties,f;switch(e.type){case"FeatureCollection":t<0&&(t=e.features.length+t),u=u||e.features[t].properties,f=e.features[t].geometry;break;case"Feature":u=u||e.properties,f=e.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":f=e;break;default:throw new Error("geojson is invalid")}if(f===null)return null;var g=f.coordinates;switch(f.type){case"Point":return point(g,u,i);case"MultiPoint":return n<0&&(n=g.length+n),point(g[n],u,i);case"LineString":return o<0&&(o=g.length+o),point(g[o],u,i);case"Polygon":return r<0&&(r=g.length+r),o<0&&(o=g[r].length+o),point(g[r][o],u,i);case"MultiLineString":return n<0&&(n=g.length+n),o<0&&(o=g[n].length+o),point(g[n][o],u,i);case"MultiPolygon":return n<0&&(n=g.length+n),r<0&&(r=g[n].length+r),o<0&&(o=g[n][r].length-o),point(g[n][r][o],u,i)}throw new Error("geojson is invalid")}function zr(e,i){var t=i.x,n=i.y,r=i.x1,o=i.y1,u=i.coordinates,f=i.geometry,g=[];if(!Array.isArray(e))return{dataArray:[]};if(f)return e.filter(function(Ye){return Ye[f]&&Ye[f].type&&Ye[f].coordinates&&Ye[f].coordinates.length>0}).forEach(function(Ye,St){var vt=ye()((0,oe.Z)({},Ye[f]),!0);et(vt,function(Ut){var Kt=lt(Ut),Tr=(0,oe.Z)((0,oe.Z)({},Ye),{},{_id:St,coordinates:Kt});g.push(Tr)})}),{dataArray:g};for(var x=0;x<e.length;x++){var I=e[x],P=[];if(u){var G="Polygon";Array.isArray(u[0])||(G="Point"),Array.isArray(u[0])&&!Array.isArray(u[0][0])&&(G="LineString");var $=ye()({type:G,coordinates:(0,ie.Z)(I[u])},!0);P=$.coordinates}else if(t&&n&&r&&o){var Ee=[parseFloat(I[t]),parseFloat(I[n])],Se=[parseFloat(I[r]),parseFloat(I[o])];P=[Ee,Se]}else t&&n&&(P=[parseFloat(I[t]),parseFloat(I[n])]);var Re=(0,oe.Z)((0,oe.Z)({},I),{},{_id:x,coordinates:P});g.push(Re)}return{dataArray:g}}function Jn(e,i){var t=ke(e);return zr(t,i)}function yn(e){for(var i=e.toString(),t=5381,n=i.length;n;)t=t*33^i.charCodeAt(--n);return t>>>0}function tn(e,i){return i===void 0?null:e.properties[i]?e.properties[i]:e.properties&&e.properties[i]?yn(e.properties[i]+"")%1000019:null}function ni(e,i){var t=[],n={};return e.features?(e.features=e.features.filter(function(r){var o=r.geometry;return r!=null&&o&&o.type&&o.coordinates&&o.coordinates.length>0}),ye()(e,!0),e.features.length===0?{dataArray:[],featureKeys:n}:(et(e,function(r,o){var u=tn(r,i==null?void 0:i.featureId);u===null&&(u=o);var f=u,g=lt(r),x=(0,oe.Z)((0,oe.Z)({},r.properties),{},{coordinates:g,_id:f});t.push(x)}),{dataArray:t,featureKeys:n})):(e.features=[],{dataArray:[]})}function ta(e){var i=131,t=137,n=0;e+="x";for(var r=Math.floor(9007199254740991/t),o=0;o<e.length;o++)n>r&&(n=Math.floor(n/t)),n=n*i+e.charCodeAt(o);return n}function fa(e){e=e.toString();for(var i=5381,t=e.length;t;)i=i*33^e.charCodeAt(--t);return i>>>0}var Mr=c(6961),Wr=c(32699),Zi="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function Wi(e){this.message=e}Wi.prototype=new Error,Wi.prototype.name="InvalidCharacterError";function xo(e){var i=String(e).replace(/=+$/,"");if(i.length%4===1)throw new Wi("'atob' failed: The string to be decoded is not correctly encoded.");for(var t="",n=0,r,o,u=0;o=i.charAt(u++);~o&&(r=n%4?r*64+o:o,n++%4)?t+=String.fromCharCode(255&r>>(-2*n&6)):0)o=Zi.indexOf(o);return t}function ua(e){e=String(e);for(var i,t,n,r,o="",u=0,f=e.length%3;u<e.length;){if((t=e.charCodeAt(u++))>255||(n=e.charCodeAt(u++))>255||(r=e.charCodeAt(u++))>255)throw new TypeError("Failed to execute 'btoa' on 'Window': The string to be encoded contains characters outside of the Latin1 range.");i=t<<16|n<<8|r,o+=Zi.charAt(i>>18&63)+Zi.charAt(i>>12&63)+Zi.charAt(i>>6&63)+Zi.charAt(i&63)}return f?o.slice(0,f-3)+"===".substring(f):o}var Ur=c(85665),Jr=c(58966),Eo=function(){function e(i,t){(0,Ur.Z)(this,e),this.buffers=i,this.type=t}return(0,Jr.Z)(e,[{key:"arraybuffer",value:function(){return Promise.resolve(this.buffers[0])}},{key:"stream",value:function(){throw new Error("not implemented")}},{key:"text",value:function(){throw new Error("not implemented")}},{key:"slice",value:function(t,n,r){throw new Error("not implemented")}}]),e}(),Fo,So=function(){return Fo||(Fo=typeof globalThis!="undefined"?globalThis:typeof self!="undefined"?self:typeof window!="undefined"?window:typeof c.g!="undefined"?c.g:{})};Fo=So();var Xa;typeof window=="undefined"?Xa={devicePixelRatio:1,navigator:{userAgent:"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/95.0.4638.69 Safari/537.36",browserLanguage:"zh-CN",language:"zh-CN",platform:""},location:"",document:{documentElement:{style:{}},createEvent:function(){return!0},getElementById:function(i){return!0},createElement:function(){return{className:"",classList:{add:function(){return""}}}},createElementNS:function(){return!0},addEventListener:function(){return!0},removeEventListener:function(){return!0},querySelector:function(){return!1}},performance:{mark:function(i){return null},clearMeasures:function(i){return null},clearMarks:function(i){return null},measure:function(i,t,n){return{duration:0}},now:function(){return new Date().getTime()}},Blob:"",dispatchEvent:function(i){return!0},Event:function(i,t){return!0},createElement:function(){return!0},createElementNS:function(){return!0},XMLHttpRequest:function(){return!0},addEventListener:function(){return!0},removeEventListener:function(){return!0},requestAnimationFrame:function(){return!0},cancelAnimationFrame:function(){return!0},clearTimeout:function(){return!0}}:Xa=window;var Ko=typeof my!="undefined"&&!!my&&typeof my.showToast=="function"&&my.isFRM!==!0,No=Ko?my.getSystemInfoSync().pixelRatio:Xa.devicePixelRatio,ui=c(29848),jn=c(85412),rr=c(28276),ps=(0,Jr.Z)(function e(i,t){(0,Ur.Z)(this,e),this.cancelBubble=!1,this.cancelable=!1,this.target=null,this.currentTarget=null,this.preventDefault=function(){},this.stopPropagation=function(){},this.type=i,this.timeStamp=Date.now()}),er=c(46102);function $s(e,i){var t=typeof Symbol!="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(!t){if(Array.isArray(e)||(t=Es(e))||i&&e&&typeof e.length=="number"){t&&(e=t);var n=0,r=function(){};return{s:r,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(x){throw x},f:r}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var o=!0,u=!1,f;return{s:function(){t=t.call(e)},n:function(){var x=t.next();return o=x.done,x},e:function(x){u=!0,f=x},f:function(){try{!o&&t.return!=null&&t.return()}finally{if(u)throw f}}}}function Es(e,i){if(!!e){if(typeof e=="string")return Os(e,i);var t=Object.prototype.toString.call(e).slice(8,-1);if(t==="Object"&&e.constructor&&(t=e.constructor.name),t==="Map"||t==="Set")return Array.from(e);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return Os(e,i)}}function Os(e,i){(i==null||i>e.length)&&(i=e.length);for(var t=0,n=new Array(i);t<i;t++)n[t]=e[t];return n}var xu=new WeakMap,bo=function(){function e(){(0,Ur.Z)(this,e),xu.set(this,{})}return(0,Jr.Z)(e,[{key:"addEventListener",value:function(t,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},o=xu.get(this);o||(o={}),o[t]||(o[t]=[]),o[t].push(n),xu.set(this,o),r.capture,r.once,r.passive}},{key:"removeEventListener",value:function(t,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},o=xu.get(this);if(o){var u=o[t];if(u&&u.length>0){for(var f=u.length;f--;f>0)if(u[f]===n){u.splice(f,1);break}}}}},{key:"dispatchEvent",value:function(t){var n=xu.get(this)[t.type];if(n){var r=$s(n),o;try{for(r.s();!(o=r.n()).done;){var u=o.value;u(t)}}catch(f){r.e(f)}finally{r.f()}}}}]),e}();function ic(e){var i=Ru();return function(){var n=(0,rr.Z)(e),r;if(i){var o=(0,rr.Z)(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return(0,jn.Z)(this,r)}}function Ru(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var Xs=function(e){(0,ui.Z)(t,e);var i=ic(t);function t(){var n;return(0,Ur.Z)(this,t),n=i.call(this),n.childNodes=[],n}return(0,Jr.Z)(t,[{key:"appendChild",value:function(r){this.childNodes.push(r)}},{key:"cloneNode",value:function(){var r=Object.create(this);return Object.assign(r,this),r}},{key:"removeChild",value:function(r){var o=this.childNodes.findIndex(function(u){return u===r});return o>-1?this.childNodes.splice(o,1):null}}]),t}(bo);function Ys(e){var i=rs();return function(){var n=(0,rr.Z)(e),r;if(i){var o=(0,rr.Z)(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return(0,jn.Z)(this,r)}}function rs(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var au=function(e){(0,ui.Z)(t,e);var i=Ys(t);function t(){var n;return(0,Ur.Z)(this,t),n=i.call(this),n.className="",n.children=[],n}return(0,Jr.Z)(t,[{key:"setAttribute",value:function(r,o){this[r]=o}},{key:"getAttribute",value:function(r){return this[r]}},{key:"setAttributeNS",value:function(r,o){this[r]=o}},{key:"getAttributeNS",value:function(r){return this[r]}}]),t}(Xs),Tu=typeof my!="undefined"&&!!my&&typeof my.showToast=="function"&&my.isFRM!==!0,Cl,hu,ou,ss;if(Tu){var nu=my.getSystemInfoSync();Cl=nu.screenWidth,hu=nu.screenHeight,ou=nu.windowWidth,ss=nu.windowHeight}else{var Pu=Xa.innerWidth,Ks=Xa.innerHeight;Cl=Pu,hu=Ks,ou=Pu,ss=Ks}var $u={width:Cl,height:hu,availWidth:ou,availHeight:ss,availLeft:0,availTop:0},qe=$u.availWidth,Bt=$u.availHeight,ge={style:[]};function je(e,i){if(!("parentNode"in e)){var t;i===0?t=function(){return null}:i===1?t=function(){return ge}:t=function(){return null},Object.defineProperty(e,"parentNode",{enumerable:!0,get:t})}if(!("parentElement"in e)){var n;i===0?n=function(){return null}:i===1?n=function(){return ge}:n=function(){return null},Object.defineProperty(e,"parentElement",{enumerable:!0,get:n})}}function wt(e){e.style=e.style||{},Object.assign(e.style,{top:"0px",left:"0px",width:qe+"px",height:Bt+"px",margin:"0px",padding:"0px"})}function nr(e){"clientLeft"in e||(e.clientLeft=0,e.clientTop=0),"clientWidth"in e||(e.clientWidth=qe,e.clientHeight=Bt),"getBoundingClientRect"in e||(e.getBoundingClientRect=function(){var i={x:0,y:0,top:0,left:0,width:this.clientWidth,height:this.clientHeight,right:this.clientWidth,bottom:this.clientHeight};return i})}function en(e){"offsetLeft"in e||(e.offsetLeft=0,e.offsetTop=0),"offsetWidth"in e||(e.offsetWidth=qe,e.offsetHeight=Bt)}function Dn(e){"scrollLeft"in e||(e.scrollLeft=0,e.scrollTop=0),"scrollWidth"in e||(e.scrollWidth=qe,e.scrollHeight=Bt)}function Ai(e){var i=function(){return!0};e.classList=[],e.classList.add=i,e.classList.remove=i,e.classList.contains=i,e.classList.toggle=i}function na(e){var i=Aa();return function(){var n=(0,rr.Z)(e),r;if(i){var o=(0,rr.Z)(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return(0,jn.Z)(this,r)}}function Aa(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function Ta(){}var Wa=function(e){(0,ui.Z)(t,e);var i=na(t);function t(){var n,r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",o=arguments.length>1?arguments[1]:void 0;return(0,Ur.Z)(this,t),n=i.call(this),n.className="",n.children=[],n.focus=Ta,n.blur=Ta,n.insertBefore=Ta,n.appendChild=Ta,n.removeChild=Ta,n.remove=Ta,n.innerHTML="",n.tagName=r.toUpperCase(),je((0,er.Z)(n),o),wt((0,er.Z)(n)),Ai((0,er.Z)(n)),nr((0,er.Z)(n)),en((0,er.Z)(n)),Dn((0,er.Z)(n)),n}return(0,Jr.Z)(t)}(au);function Co(e){var i=lo();return function(){var n=(0,rr.Z)(e),r;if(i){var o=(0,rr.Z)(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return(0,jn.Z)(this,r)}}function lo(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var Vo=function(e){(0,ui.Z)(t,e);var i=Co(t);function t(n){return(0,Ur.Z)(this,t),i.call(this,n)}return(0,Jr.Z)(t,[{key:"addTextTrack",value:function(){}},{key:"captureStream",value:function(){}},{key:"fastSeek",value:function(){}},{key:"load",value:function(){}},{key:"pause",value:function(){}},{key:"play",value:function(){}}]),t}(Wa);function gs(e){var i=su();return function(){var n=(0,rr.Z)(e),r;if(i){var o=(0,rr.Z)(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return(0,jn.Z)(this,r)}}function su(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var Zu=function(e){(0,ui.Z)(t,e);var i=gs(t);function t(){return(0,Ur.Z)(this,t),i.call(this,"video")}return(0,Jr.Z)(t)}(Vo),Ss={},Us={};function ys(e,i){Ss=e,Ss.id=i,"tagName"in Ss||(Ss.tagName="CANVAS"),Ss.type="canvas",Mixin.parentNode(Ss),Mixin.style(Ss),Mixin.classList(Ss),Mixin.clientRegion(Ss),Mixin.offsetRegion(Ss),Ss.focus=function(){},Ss.blur=function(){}}function Oo(e,i){var t=1024,n=1024;Us={width:t,height:n,clientWidth:t/devicePixelRatio,clientHeight:n/devicePixelRatio,id:i,type:"canvas"},"tagName"in Us||(Us.tagName="CANVAS"),Mixin.parentNode(Us),Mixin.style(Us),Mixin.classList(Us),Mixin.clientRegion(Us),Mixin.offsetRegion(Us),Us.getContext=function(r){if(r==="2d")return e},Us.focus=function(){},Us.blur=function(){}}function qo(){return Ss}function Rc(){return Us}var Hl=(0,Jr.Z)(function e(){(0,Ur.Z)(this,e);var i=qo(),t=i.createImage&&i.createImage()||{};return"tagName"in t||(t.tagName="IMG",t.__proto__=e.prototype),je(t),Ai(t),Object.assign(t,{addEventListener:function(r,o){t["on".concat(r)]=o.bind(t)},removeEventListener:function(r){t["on".concat(r)]=null}}),t}),sf={href:"",protocol:"",host:""};function Bf(e){var i=zf();return function(){var n=(0,rr.Z)(e),r;if(i){var o=(0,rr.Z)(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return(0,jn.Z)(this,r)}}function zf(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var ac=function(e){(0,ui.Z)(t,e);var i=Bf(t);function t(){return(0,Ur.Z)(this,t),i.call(this,"body",0)}return(0,Jr.Z)(t,[{key:"addEventListener",value:function(r,o){var u=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{}}},{key:"removeEventListener",value:function(r,o,u){}},{key:"dispatchEvent",value:function(r){}}]),t}(Wa),dc=function(e){(0,ui.Z)(t,e);var i=Bf(t);function t(){return(0,Ur.Z)(this,t),i.call(this,"html",0)}return(0,Jr.Z)(t,[{key:"addEventListener",value:function(r,o){var u=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{}}},{key:"removeEventListener",value:function(r,o){}},{key:"dispatchEvent",value:function(r){}}]),t}(Wa),O={},q={readyState:"complete",visibilityState:"visible",hidden:!1,fullscreen:!0,scripts:[],style:{},location:sf,ontouchstart:null,ontouchmove:null,ontouchend:null,onvisibilitychange:null,parentNode:null,parentElement:null,head:null,body:null,documentElement:{style:[]},createElement:function(i){return i=i.toLowerCase(),i==="canvas"?my.createOffscreenCanvas(1024,128,"2d"):i==="img"?new Hl:i==="video"?new Zu:new Wa(i)},createElementNS:function(i,t){return this.createElement(t)},createTextNode:function(i){return i},getElementById:function(i){return null},getElementsByTagName:function(i){return i=i.toLowerCase(),[]},getElementsByTagNameNS:function(i,t){return this.getElementsByTagName(t)},getElementsByName:function(i){return[]},querySelector:function(i){return null},querySelectorAll:function(i){return[]},addEventListener:function(i,t,n){O[i]||(O[i]=[]),O[i].push(t)},removeEventListener:function(i,t){var n=O[i];if(n&&n.length>0){for(var r=n.length;r--;r>0)if(n[r]===t){n.splice(r,1);break}}},dispatchEvent:function(i){var t=i.type,n=O[t];if(n)for(var r=0;r<n.length;r++)n[r](i);i.target&&typeof i.target["on"+t]=="function"&&i.target["on"+t](i)},createEvent:function(i){return new ps(i)}};q.documentElement=new dc,q.head=new Wa("head"),q.body=new ac;var Le=Object,ve=c(10082),ct=function(){function e(){(0,Ur.Z)(this,e);var i=arguments.length;if(i===2){if(typeof arguments[0]=="number"&&typeof arguments[1]=="number"){this._w=arguments[0],this._h=arguments[1],this._data=new Uint8ClampedArray(this._w*this._h*4);return}}else i===3&&(0,ve.Z)(arguments[0])==="object"&&typeof arguments[1]=="number"&&typeof arguments[2]=="number"&&(this._data=arguments[0],this._w=arguments[1],this._h=arguments[2]);throw new Error("ImageData: params error")}return(0,Jr.Z)(e,[{key:"width",get:function(){return this._w}},{key:"height",get:function(){return this._h}},{key:"data",get:function(){return this._data}}]),e}(),Lt=typeof my!="undefined"&&!!my&&typeof my.showToast=="function"&&my.isFRM!==!0,hr,lr,Gr;if(Lt){var ii=my.getSystemInfoSync();hr=ii.system,lr=ii.platform,Gr=ii.language}else{var fi={versions:function(){var e=Xa.navigator.userAgent;return{trident:e.indexOf("Trident")>-1,presto:e.indexOf("Presto")>-1,webKit:e.indexOf("AppleWebKit")>-1,gecko:e.indexOf("Gecko")>-1&&e.indexOf("KHTML")===-1,mobile:!!e.match(/AppleWebKit.*Mobile.*/),ios:!!e.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/),android:e.indexOf("Android")>-1||e.indexOf("Linux")>-1,iPhone:e.indexOf("iPhone")>-1,iPad:e.indexOf("iPad")>-1,webApp:e.indexOf("Safari")===-1,weixin:e.indexOf("MicroMessenger")>-1,qq:e.match(/\sQQ/i)===" qq"}}(),language:(Xa.navigator.browserLanguage||Xa.navigator.language).toLowerCase()};fi.versions.android?lr="android":fi.versions.trident?lr="IE":fi.versions.presto?lr="Opera":fi.versions.webKit?lr="webKit":fi.versions.gecko?lr="Firefox":fi.versions.mobile?lr="mobile":fi.versions.ios?lr="ios":fi.versions.iPhone?lr="iPhone":fi.versions.iPad?lr="ipad":fi.versions.webApp?lr="webApp":fi.versions.weixin?lr="weixin":fi.versions.qq&&(lr="qq"),hr=Xa.navigator.userAgent,Gr=fi.language}var Na=hr.toLowerCase().indexOf("android")!==-1,vo=Na?"Android; CPU Android 6.0":"iPhone; CPU iPhone OS 10_3_1 like Mac OS X",Va="Mozilla/5.0 (".concat(vo,") AppleWebKit/603.1.30 (KHTML, like Gecko) Mobile/14E8301 MicroMessenger/6.6.0 MiniGame NetType/WIFI Language/").concat(Gr),ha={platform:lr,language:Gr,appVersion:"5.0 (".concat(vo,") AppleWebKit/601.1.46 (KHTML, like Gecko) Version/9.0 Mobile/13B143 Safari/601.1"),userAgent:Va},$o={mark:function(i){return null},clearMeasures:function(i){return null},clearMarks:function(i){return null},measure:function(i,t,n){return{duration:0}},now:function(){}},ms=0,To=0;function Qs(e){var i=Date.now(),t=Math.max(ms+23,i);return To=setTimeout(function(){e(ms=t)},t-i),To}function Wl(e){var i=qo();return i.requestAnimationFrame?i.requestAnimationFrame(e):Qs(e)}function Pc(e){var i=qo();return i.cancelAnimationFrame?i.cancelAnimationFrame(e):clearTimeout(e)}var Js=function(){function e(i){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";if((0,Ur.Z)(this,e),i.indexOf("http://")==0||i.indexOf("https://")==0){this.href=i;return}this.href=t+i}return(0,Jr.Z)(e,null,[{key:"createObjectURL",value:function(t){var n=t.buffers[0],r=t.type,o=Tl(n),u="data:".concat(r,";base64, ");return u+o}}]),e}();function Tl(e){for(var i="",t=new Uint8Array(e),n=t.byteLength,r=0;r<n;r++)i+=String.fromCharCode(t[r]);return ua(i)}var bf={GCCSO_SHADER_BINARY_FJ:37472,_3DC_XY_AMD:34810,_3DC_X_AMD:34809,ACTIVE_ATTRIBUTES:35721,ACTIVE_ATTRIBUTE_MAX_LENGTH:35722,ACTIVE_PROGRAM_EXT:33369,ACTIVE_TEXTURE:34016,ACTIVE_UNIFORMS:35718,ACTIVE_UNIFORM_MAX_LENGTH:35719,ALIASED_LINE_WIDTH_RANGE:33902,ALIASED_POINT_SIZE_RANGE:33901,ALL_COMPLETED_NV:34034,ALL_SHADER_BITS_EXT:4294967295,ALPHA:6406,ALPHA16F_EXT:34844,ALPHA32F_EXT:34838,ALPHA8_EXT:32828,ALPHA8_OES:32828,ALPHA_BITS:3413,ALPHA_TEST_FUNC_QCOM:3009,ALPHA_TEST_QCOM:3008,ALPHA_TEST_REF_QCOM:3010,ALREADY_SIGNALED_APPLE:37146,ALWAYS:519,AMD_compressed_3DC_texture:1,AMD_compressed_ATC_texture:1,AMD_performance_monitor:1,AMD_program_binary_Z400:1,ANGLE_depth_texture:1,ANGLE_framebuffer_blit:1,ANGLE_framebuffer_multisample:1,ANGLE_instanced_arrays:1,ANGLE_pack_reverse_row_order:1,ANGLE_program_binary:1,ANGLE_texture_compression_dxt3:1,ANGLE_texture_compression_dxt5:1,ANGLE_texture_usage:1,ANGLE_translated_shader_source:1,ANY_SAMPLES_PASSED_CONSERVATIVE_EXT:36202,ANY_SAMPLES_PASSED_EXT:35887,APPLE_copy_texture_levels:1,APPLE_framebuffer_multisample:1,APPLE_rgb_422:1,APPLE_sync:1,APPLE_texture_format_BGRA8888:1,APPLE_texture_max_level:1,ARM_mali_program_binary:1,ARM_mali_shader_binary:1,ARM_rgba8:1,ARRAY_BUFFER:34962,ARRAY_BUFFER_BINDING:34964,ATC_RGBA_EXPLICIT_ALPHA_AMD:35987,ATC_RGBA_INTERPOLATED_ALPHA_AMD:34798,ATC_RGB_AMD:35986,ATTACHED_SHADERS:35717,BACK:1029,BGRA8_EXT:37793,BGRA_EXT:32993,BGRA_IMG:32993,BINNING_CONTROL_HINT_QCOM:36784,BLEND:3042,BLEND_COLOR:32773,BLEND_DST_ALPHA:32970,BLEND_DST_RGB:32968,BLEND_EQUATION:32777,BLEND_EQUATION_ALPHA:34877,BLEND_EQUATION_RGB:32777,BLEND_SRC_ALPHA:32971,BLEND_SRC_RGB:32969,BLUE_BITS:3412,BOOL:35670,BOOL_VEC2:35671,BOOL_VEC3:35672,BOOL_VEC4:35673,BUFFER:33504,BUFFER_ACCESS_OES:35003,BUFFER_MAPPED_OES:35004,BUFFER_MAP_POINTER_OES:35005,BUFFER_OBJECT_EXT:37201,BUFFER_SIZE:34660,BUFFER_USAGE:34661,BYTE:5120,CCW:2305,CLAMP_TO_BORDER_NV:33069,CLAMP_TO_EDGE:33071,COLOR_ATTACHMENT0:36064,COLOR_ATTACHMENT0_NV:36064,COLOR_ATTACHMENT10_NV:36074,COLOR_ATTACHMENT11_NV:36075,COLOR_ATTACHMENT12_NV:36076,COLOR_ATTACHMENT13_NV:36077,COLOR_ATTACHMENT14_NV:36078,COLOR_ATTACHMENT15_NV:36079,COLOR_ATTACHMENT1_NV:36065,COLOR_ATTACHMENT2_NV:36066,COLOR_ATTACHMENT3_NV:36067,COLOR_ATTACHMENT4_NV:36068,COLOR_ATTACHMENT5_NV:36069,COLOR_ATTACHMENT6_NV:36070,COLOR_ATTACHMENT7_NV:36071,COLOR_ATTACHMENT8_NV:36072,COLOR_ATTACHMENT9_NV:36073,COLOR_ATTACHMENT_EXT:37104,COLOR_BUFFER_BIT:16384,COLOR_BUFFER_BIT0_QCOM:1,COLOR_BUFFER_BIT1_QCOM:2,COLOR_BUFFER_BIT2_QCOM:4,COLOR_BUFFER_BIT3_QCOM:8,COLOR_BUFFER_BIT4_QCOM:16,COLOR_BUFFER_BIT5_QCOM:32,COLOR_BUFFER_BIT6_QCOM:64,COLOR_BUFFER_BIT7_QCOM:128,COLOR_CLEAR_VALUE:3106,COLOR_EXT:6144,COLOR_WRITEMASK:3107,COMPARE_REF_TO_TEXTURE_EXT:34894,COMPILE_STATUS:35713,COMPRESSED_RGBA_ASTC_10x10_KHR:37819,COMPRESSED_RGBA_ASTC_10x5_KHR:37816,COMPRESSED_RGBA_ASTC_10x6_KHR:37817,COMPRESSED_RGBA_ASTC_10x8_KHR:37818,COMPRESSED_RGBA_ASTC_12x10_KHR:37820,COMPRESSED_RGBA_ASTC_12x12_KHR:37821,COMPRESSED_RGBA_ASTC_4x4_KHR:37808,COMPRESSED_RGBA_ASTC_5x4_KHR:37809,COMPRESSED_RGBA_ASTC_5x5_KHR:37810,COMPRESSED_RGBA_ASTC_6x5_KHR:37811,COMPRESSED_RGBA_ASTC_6x6_KHR:37812,COMPRESSED_RGBA_ASTC_8x5_KHR:37813,COMPRESSED_RGBA_ASTC_8x6_KHR:37814,COMPRESSED_RGBA_ASTC_8x8_KHR:37815,COMPRESSED_RGBA_PVRTC_2BPPV1_IMG:35843,COMPRESSED_RGBA_PVRTC_2BPPV2_IMG:37175,COMPRESSED_RGBA_PVRTC_4BPPV1_IMG:35842,COMPRESSED_RGBA_PVRTC_4BPPV2_IMG:37176,COMPRESSED_RGBA_S3TC_DXT1_EXT:33777,COMPRESSED_RGBA_S3TC_DXT3_ANGLE:33778,COMPRESSED_RGBA_S3TC_DXT5_ANGLE:33779,COMPRESSED_RGB_PVRTC_2BPPV1_IMG:35841,COMPRESSED_RGB_PVRTC_4BPPV1_IMG:35840,COMPRESSED_RGB_S3TC_DXT1_EXT:33776,COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:37851,COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:37848,COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:37849,COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:37850,COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:37852,COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:37853,COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:37840,COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:37841,COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:37842,COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:37843,COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:37844,COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:37845,COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:37846,COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:37847,COMPRESSED_SRGB_ALPHA_S3TC_DXT1_NV:35917,COMPRESSED_SRGB_ALPHA_S3TC_DXT3_NV:35918,COMPRESSED_SRGB_ALPHA_S3TC_DXT5_NV:35919,COMPRESSED_SRGB_S3TC_DXT1_NV:35916,COMPRESSED_TEXTURE_FORMATS:34467,CONDITION_SATISFIED_APPLE:37148,CONSTANT_ALPHA:32771,CONSTANT_COLOR:32769,CONTEXT_FLAG_DEBUG_BIT:2,CONTEXT_ROBUST_ACCESS_EXT:37107,COUNTER_RANGE_AMD:35777,COUNTER_TYPE_AMD:35776,COVERAGE_ALL_FRAGMENTS_NV:36565,COVERAGE_ATTACHMENT_NV:36562,COVERAGE_AUTOMATIC_NV:36567,COVERAGE_BUFFERS_NV:36563,COVERAGE_BUFFER_BIT_NV:32768,COVERAGE_COMPONENT4_NV:36561,COVERAGE_COMPONENT_NV:36560,COVERAGE_EDGE_FRAGMENTS_NV:36566,COVERAGE_SAMPLES_NV:36564,CPU_OPTIMIZED_QCOM:36785,CULL_FACE:2884,CULL_FACE_MODE:2885,CURRENT_PROGRAM:35725,CURRENT_QUERY_EXT:34917,CURRENT_VERTEX_ATTRIB:34342,CW:2304,DEBUG_CALLBACK_FUNCTION:33348,DEBUG_CALLBACK_USER_PARAM:33349,DEBUG_GROUP_STACK_DEPTH:33389,DEBUG_LOGGED_MESSAGES:37189,DEBUG_NEXT_LOGGED_MESSAGE_LENGTH:33347,DEBUG_OUTPUT:37600,DEBUG_OUTPUT_SYNCHRONOUS:33346,DEBUG_SEVERITY_HIGH:37190,DEBUG_SEVERITY_LOW:37192,DEBUG_SEVERITY_MEDIUM:37191,DEBUG_SEVERITY_NOTIFICATION:33387,DEBUG_SOURCE_API:33350,DEBUG_SOURCE_APPLICATION:33354,DEBUG_SOURCE_OTHER:33355,DEBUG_SOURCE_SHADER_COMPILER:33352,DEBUG_SOURCE_THIRD_PARTY:33353,DEBUG_SOURCE_WINDOW_SYSTEM:33351,DEBUG_TYPE_DEPRECATED_BEHAVIOR:33357,DEBUG_TYPE_ERROR:33356,DEBUG_TYPE_MARKER:33384,DEBUG_TYPE_OTHER:33361,DEBUG_TYPE_PERFORMANCE:33360,DEBUG_TYPE_POP_GROUP:33386,DEBUG_TYPE_PORTABILITY:33359,DEBUG_TYPE_PUSH_GROUP:33385,DEBUG_TYPE_UNDEFINED_BEHAVIOR:33358,DECR:7683,DECR_WRAP:34056,DELETE_STATUS:35712,DEPTH24_STENCIL8_OES:35056,DEPTH_ATTACHMENT:36096,DEPTH_STENCIL_ATTACHMENT:33306,DEPTH_BITS:3414,DEPTH_BUFFER_BIT:256,DEPTH_BUFFER_BIT0_QCOM:256,DEPTH_BUFFER_BIT1_QCOM:512,DEPTH_BUFFER_BIT2_QCOM:1024,DEPTH_BUFFER_BIT3_QCOM:2048,DEPTH_BUFFER_BIT4_QCOM:4096,DEPTH_BUFFER_BIT5_QCOM:8192,DEPTH_BUFFER_BIT6_QCOM:16384,DEPTH_BUFFER_BIT7_QCOM:32768,DEPTH_CLEAR_VALUE:2931,DEPTH_COMPONENT:6402,DEPTH_COMPONENT16:33189,DEPTH_COMPONENT16_NONLINEAR_NV:36396,DEPTH_COMPONENT16_OES:33189,DEPTH_COMPONENT24_OES:33190,DEPTH_COMPONENT32_OES:33191,DEPTH_EXT:6145,DEPTH_FUNC:2932,DEPTH_RANGE:2928,DEPTH_STENCIL:34041,DEPTH_STENCIL_OES:34041,DEPTH_TEST:2929,DEPTH_WRITEMASK:2930,DITHER:3024,DMP_shader_binary:1,DONT_CARE:4352,DRAW_BUFFER0_NV:34853,DRAW_BUFFER10_NV:34863,DRAW_BUFFER11_NV:34864,DRAW_BUFFER12_NV:34865,DRAW_BUFFER13_NV:34866,DRAW_BUFFER14_NV:34867,DRAW_BUFFER15_NV:34868,DRAW_BUFFER1_NV:34854,DRAW_BUFFER2_NV:34855,DRAW_BUFFER3_NV:34856,DRAW_BUFFER4_NV:34857,DRAW_BUFFER5_NV:34858,DRAW_BUFFER6_NV:34859,DRAW_BUFFER7_NV:34860,DRAW_BUFFER8_NV:34861,DRAW_BUFFER9_NV:34862,DRAW_BUFFER_EXT:3073,DRAW_FRAMEBUFFER_ANGLE:36009,DRAW_FRAMEBUFFER_APPLE:36009,DRAW_FRAMEBUFFER_BINDING_ANGLE:36006,DRAW_FRAMEBUFFER_BINDING_APPLE:36006,DRAW_FRAMEBUFFER_BINDING_NV:36006,DRAW_FRAMEBUFFER_NV:36009,DST_ALPHA:772,DST_COLOR:774,DYNAMIC_DRAW:35048,ELEMENT_ARRAY_BUFFER:34963,ELEMENT_ARRAY_BUFFER_BINDING:34965,EQUAL:514,ES_VERSION_2_0:1,ETC1_RGB8_OES:36196,ETC1_SRGB8_NV:35054,EXTENSIONS:7939,EXT_blend_minmax:1,EXT_color_buffer_half_float:1,EXT_debug_label:1,EXT_debug_marker:1,EXT_discard_framebuffer:1,EXT_map_buffer_range:1,EXT_multi_draw_arrays:1,EXT_multisampled_render_to_texture:1,EXT_multiview_draw_buffers:1,EXT_occlusion_query_boolean:1,EXT_read_format_bgra:1,EXT_robustness:1,EXT_sRGB:1,EXT_separate_shader_objects:1,EXT_shader_framebuffer_fetch:1,EXT_shader_texture_lod:1,EXT_shadow_samplers:1,EXT_texture_compression_dxt1:1,EXT_texture_filter_anisotropic:1,EXT_texture_format_BGRA8888:1,EXT_texture_rg:1,EXT_texture_storage:1,EXT_texture_type_2_10_10_10_REV:1,EXT_unpack_subimage:1,FALSE:0,FASTEST:4353,FENCE_CONDITION_NV:34036,FENCE_STATUS_NV:34035,FIXED:5132,FJ_shader_binary_GCCSO:1,FLOAT:5126,FLOAT_MAT2:35674,FLOAT_MAT3:35675,FLOAT_MAT4:35676,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,FRAGMENT_SHADER:35632,FRAGMENT_SHADER_BIT_EXT:2,FRAGMENT_SHADER_DERIVATIVE_HINT_OES:35723,FRAGMENT_SHADER_DISCARDS_SAMPLES_EXT:35410,FRAMEBUFFER:36160,FRAMEBUFFER_ATTACHMENT_ANGLE:37795,FRAMEBUFFER_ATTACHMENT_COLOR_ENCODING_EXT:33296,FRAMEBUFFER_ATTACHMENT_COMPONENT_TYPE_EXT:33297,FRAMEBUFFER_ATTACHMENT_OBJECT_NAME:36049,FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE:36048,FRAMEBUFFER_ATTACHMENT_TEXTURE_3D_ZOFFSET_OES:36052,FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE:36051,FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL:36050,FRAMEBUFFER_ATTACHMENT_TEXTURE_SAMPLES_EXT:36204,FRAMEBUFFER_BINDING:36006,FRAMEBUFFER_COMPLETE:36053,FRAMEBUFFER_INCOMPLETE_ATTACHMENT:36054,FRAMEBUFFER_INCOMPLETE_DIMENSIONS:36057,FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:36055,FRAMEBUFFER_INCOMPLETE_MULTISAMPLE_ANGLE:36182,FRAMEBUFFER_INCOMPLETE_MULTISAMPLE_APPLE:36182,FRAMEBUFFER_INCOMPLETE_MULTISAMPLE_EXT:36182,FRAMEBUFFER_INCOMPLETE_MULTISAMPLE_IMG:37172,FRAMEBUFFER_INCOMPLETE_MULTISAMPLE_NV:36182,FRAMEBUFFER_UNDEFINED_OES:33305,FRAMEBUFFER_UNSUPPORTED:36061,FRONT:1028,FRONT_AND_BACK:1032,FRONT_FACE:2886,FUNC_ADD:32774,FUNC_REVERSE_SUBTRACT:32779,FUNC_SUBTRACT:32778,GENERATE_MIPMAP_HINT:33170,GEQUAL:518,GPU_OPTIMIZED_QCOM:36786,GREATER:516,GREEN_BITS:3411,GUILTY_CONTEXT_RESET_EXT:33363,HALF_FLOAT_OES:36193,HIGH_FLOAT:36338,HIGH_INT:36341,IMG_multisampled_render_to_texture:1,IMG_program_binary:1,IMG_read_format:1,IMG_shader_binary:1,IMG_texture_compression_pvrtc:1,IMG_texture_compression_pvrtc2:1,IMPLEMENTATION_COLOR_READ_FORMAT:35739,IMPLEMENTATION_COLOR_READ_TYPE:35738,INCR:7682,INCR_WRAP:34055,INFO_LOG_LENGTH:35716,INNOCENT_CONTEXT_RESET_EXT:33364,INT:5124,INT_10_10_10_2_OES:36343,INT_VEC2:35667,INT_VEC3:35668,INT_VEC4:35669,INVALID_ENUM:1280,INVALID_FRAMEBUFFER_OPERATION:1286,INVALID_OPERATION:1282,INVALID_VALUE:1281,INVERT:5386,KEEP:7680,KHR_debug:1,KHR_texture_compression_astc_ldr:1,LEFT:1030,LEQUAL:515,LESS:513,LINEAR:9729,LINEAR_MIPMAP_LINEAR:9987,LINEAR_MIPMAP_NEAREST:9985,LINES:1,LINE_LOOP:2,LINE_STRIP:3,LINE_WIDTH:2849,LINK_STATUS:35714,LOSE_CONTEXT_ON_RESET_EXT:33362,LOW_FLOAT:36336,LOW_INT:36339,LUMINANCE:6409,LUMINANCE16F_EXT:34846,LUMINANCE32F_EXT:34840,LUMINANCE4_ALPHA4_OES:32835,LUMINANCE8_ALPHA8_EXT:32837,LUMINANCE8_ALPHA8_OES:32837,LUMINANCE8_EXT:32832,LUMINANCE8_OES:32832,LUMINANCE_ALPHA:6410,LUMINANCE_ALPHA16F_EXT:34847,LUMINANCE_ALPHA32F_EXT:34841,MALI_PROGRAM_BINARY_ARM:36705,MALI_SHADER_BINARY_ARM:36704,MAP_FLUSH_EXPLICIT_BIT_EXT:16,MAP_INVALIDATE_BUFFER_BIT_EXT:8,MAP_INVALIDATE_RANGE_BIT_EXT:4,MAP_READ_BIT_EXT:1,MAP_UNSYNCHRONIZED_BIT_EXT:32,MAP_WRITE_BIT_EXT:2,MAX_3D_TEXTURE_SIZE_OES:32883,MAX_COLOR_ATTACHMENTS_NV:36063,MAX_COMBINED_TEXTURE_IMAGE_UNITS:35661,MAX_CUBE_MAP_TEXTURE_SIZE:34076,MAX_DEBUG_GROUP_STACK_DEPTH:33388,MAX_DEBUG_LOGGED_MESSAGES:37188,MAX_DEBUG_MESSAGE_LENGTH:37187,MAX_DRAW_BUFFERS_NV:34852,MAX_EXT:32776,MAX_FRAGMENT_UNIFORM_VECTORS:36349,MAX_LABEL_LENGTH:33512,MAX_MULTIVIEW_BUFFERS_EXT:37106,MAX_RENDERBUFFER_SIZE:34024,MAX_SAMPLES_ANGLE:36183,MAX_SAMPLES_APPLE:36183,MAX_SAMPLES_EXT:36183,MAX_SAMPLES_IMG:37173,MAX_SAMPLES_NV:36183,MAX_SERVER_WAIT_TIMEOUT_APPLE:37137,MAX_TEXTURE_IMAGE_UNITS:34930,MAX_TEXTURE_MAX_ANISOTROPY_EXT:34047,MAX_TEXTURE_SIZE:3379,MAX_VARYING_VECTORS:36348,MAX_VERTEX_ATTRIBS:34921,MAX_VERTEX_TEXTURE_IMAGE_UNITS:35660,MAX_VERTEX_UNIFORM_VECTORS:36347,MAX_VIEWPORT_DIMS:3386,MEDIUM_FLOAT:36337,MEDIUM_INT:36340,MIN_EXT:32775,MIRRORED_REPEAT:33648,MULTISAMPLE_BUFFER_BIT0_QCOM:16777216,MULTISAMPLE_BUFFER_BIT1_QCOM:33554432,MULTISAMPLE_BUFFER_BIT2_QCOM:67108864,MULTISAMPLE_BUFFER_BIT3_QCOM:134217728,MULTISAMPLE_BUFFER_BIT4_QCOM:268435456,MULTISAMPLE_BUFFER_BIT5_QCOM:536870912,MULTISAMPLE_BUFFER_BIT6_QCOM:1073741824,MULTISAMPLE_BUFFER_BIT7_QCOM:2147483648,MULTIVIEW_EXT:37105,NEAREST:9728,NEAREST_MIPMAP_LINEAR:9986,NEAREST_MIPMAP_NEAREST:9984,NEVER:512,NICEST:4354,NONE:0,NOTEQUAL:517,NO_ERROR:0,NO_RESET_NOTIFICATION_EXT:33377,NUM_COMPRESSED_TEXTURE_FORMATS:34466,NUM_PROGRAM_BINARY_FORMATS_OES:34814,NUM_SHADER_BINARY_FORMATS:36345,NV_coverage_sample:1,NV_depth_nonlinear:1,NV_draw_buffers:1,NV_draw_instanced:1,NV_fbo_color_attachments:1,NV_fence:1,NV_framebuffer_blit:1,NV_framebuffer_multisample:1,NV_generate_mipmap_sRGB:1,NV_instanced_arrays:1,NV_read_buffer:1,NV_read_buffer_front:1,NV_read_depth:1,NV_read_depth_stencil:1,NV_read_stencil:1,NV_sRGB_formats:1,NV_shadow_samplers_array:1,NV_shadow_samplers_cube:1,NV_texture_border_clamp:1,NV_texture_compression_s3tc_update:1,NV_texture_npot_2D_mipmap:1,OBJECT_TYPE_APPLE:37138,OES_EGL_image:1,OES_EGL_image_external:1,OES_compressed_ETC1_RGB8_texture:1,OES_compressed_paletted_texture:1,OES_depth24:1,OES_depth32:1,OES_depth_texture:1,OES_element_index_uint:1,OES_fbo_render_mipmap:1,OES_fragment_precision_high:1,OES_get_program_binary:1,OES_mapbuffer:1,OES_packed_depth_stencil:1,OES_required_internalformat:1,OES_rgb8_rgba8:1,OES_standard_derivatives:1,OES_stencil1:1,OES_stencil4:1,OES_surfaceless_context:1,OES_texture_3D:1,OES_texture_float:1,OES_texture_float_linear:1,OES_texture_half_float:1,OES_texture_half_float_linear:1,OES_texture_npot:1,OES_vertex_array_object:1,OES_vertex_half_float:1,OES_vertex_type_10_10_10_2:1,ONE:1,ONE_MINUS_CONSTANT_ALPHA:32772,ONE_MINUS_CONSTANT_COLOR:32770,ONE_MINUS_DST_ALPHA:773,ONE_MINUS_DST_COLOR:775,ONE_MINUS_SRC_ALPHA:771,ONE_MINUS_SRC_COLOR:769,OUT_OF_MEMORY:1285,PACK_ALIGNMENT:3333,PACK_REVERSE_ROW_ORDER_ANGLE:37796,PALETTE4_R5_G6_B5_OES:35730,PALETTE4_RGB5_A1_OES:35732,PALETTE4_RGB8_OES:35728,PALETTE4_RGBA4_OES:35731,PALETTE4_RGBA8_OES:35729,PALETTE8_R5_G6_B5_OES:35735,PALETTE8_RGB5_A1_OES:35737,PALETTE8_RGB8_OES:35733,PALETTE8_RGBA4_OES:35736,PALETTE8_RGBA8_OES:35734,PERCENTAGE_AMD:35779,PERFMON_GLOBAL_MODE_QCOM:36768,PERFMON_RESULT_AMD:35782,PERFMON_RESULT_AVAILABLE_AMD:35780,PERFMON_RESULT_SIZE_AMD:35781,POINTS:0,POLYGON_OFFSET_FACTOR:32824,POLYGON_OFFSET_FILL:32823,POLYGON_OFFSET_UNITS:10752,PROGRAM:33506,PROGRAM_BINARY_ANGLE:37798,PROGRAM_BINARY_FORMATS_OES:34815,PROGRAM_BINARY_LENGTH_OES:34625,PROGRAM_OBJECT_EXT:35648,PROGRAM_PIPELINE_BINDING_EXT:33370,PROGRAM_PIPELINE_OBJECT_EXT:35407,PROGRAM_SEPARABLE_EXT:33368,QCOM_alpha_test:1,QCOM_binning_control:1,QCOM_driver_control:1,QCOM_extended_get:1,QCOM_extended_get2:1,QCOM_perfmon_global_mode:1,QCOM_tiled_rendering:1,QCOM_writeonly_rendering:1,QUERY:33507,QUERY_OBJECT_EXT:37203,QUERY_RESULT_AVAILABLE_EXT:34919,QUERY_RESULT_EXT:34918,R16F_EXT:33325,R32F_EXT:33326,R8_EXT:33321,READ_BUFFER_EXT:3074,READ_BUFFER_NV:3074,READ_FRAMEBUFFER_ANGLE:36008,READ_FRAMEBUFFER_APPLE:36008,READ_FRAMEBUFFER_BINDING_ANGLE:36010,READ_FRAMEBUFFER_BINDING_APPLE:36010,READ_FRAMEBUFFER_BINDING_NV:36010,READ_FRAMEBUFFER_NV:36008,RED_BITS:3410,RED_EXT:6403,RENDERBUFFER:36161,RENDERBUFFER_ALPHA_SIZE:36179,RENDERBUFFER_BINDING:36007,RENDERBUFFER_BLUE_SIZE:36178,RENDERBUFFER_DEPTH_SIZE:36180,RENDERBUFFER_GREEN_SIZE:36177,RENDERBUFFER_HEIGHT:36163,RENDERBUFFER_INTERNAL_FORMAT:36164,RENDERBUFFER_RED_SIZE:36176,RENDERBUFFER_SAMPLES_ANGLE:36011,RENDERBUFFER_SAMPLES_APPLE:36011,RENDERBUFFER_SAMPLES_EXT:36011,RENDERBUFFER_SAMPLES_IMG:37171,RENDERBUFFER_SAMPLES_NV:36011,RENDERBUFFER_STENCIL_SIZE:36181,RENDERBUFFER_WIDTH:36162,RENDERER:7937,RENDER_DIRECT_TO_FRAMEBUFFER_QCOM:36787,REPEAT:10497,REPLACE:7681,REQUIRED_TEXTURE_IMAGE_UNITS_OES:36200,RESET_NOTIFICATION_STRATEGY_EXT:33366,RG16F_EXT:33327,RG32F_EXT:33328,RG8_EXT:33323,RGB:6407,RGB10_A2_EXT:32857,RGB10_EXT:32850,RGB16F_EXT:34843,RGB32F_EXT:34837,RGB565:36194,RGB565_OES:36194,RGB5_A1:32855,RGB5_A1_OES:32855,RGB8_OES:32849,RGBA:6408,RGBA16F_EXT:34842,RGBA32F_EXT:34836,RGBA4:32854,RGBA4_OES:32854,RGBA8_OES:32856,RGB_422_APPLE:35359,RG_EXT:33319,RIGHT:1031,SAMPLER:33510,SAMPLER_2D:35678,SAMPLER_2D_ARRAY_SHADOW_NV:36292,SAMPLER_2D_SHADOW_EXT:35682,SAMPLER_3D_OES:35679,SAMPLER_CUBE:35680,SAMPLER_CUBE_SHADOW_NV:36293,SAMPLER_EXTERNAL_OES:36198,SAMPLES:32937,SAMPLE_ALPHA_TO_COVERAGE:32926,SAMPLE_BUFFERS:32936,SAMPLE_COVERAGE:32928,SAMPLE_COVERAGE_INVERT:32939,SAMPLE_COVERAGE_VALUE:32938,SCISSOR_BOX:3088,SCISSOR_TEST:3089,SGX_BINARY_IMG:35850,SGX_PROGRAM_BINARY_IMG:37168,SHADER:33505,SHADER_BINARY_DMP:37456,SHADER_BINARY_FORMATS:36344,SHADER_BINARY_VIV:36804,SHADER_COMPILER:36346,SHADER_OBJECT_EXT:35656,SHADER_SOURCE_LENGTH:35720,SHADER_TYPE:35663,SHADING_LANGUAGE_VERSION:35724,SHORT:5122,SIGNALED_APPLE:37145,SLUMINANCE8_ALPHA8_NV:35909,SLUMINANCE8_NV:35911,SLUMINANCE_ALPHA_NV:35908,SLUMINANCE_NV:35910,SRC_ALPHA:770,SRC_ALPHA_SATURATE:776,SRC_COLOR:768,SRGB8_ALPHA8_EXT:35907,SRGB8_NV:35905,SRGB_ALPHA_EXT:35906,SRGB_EXT:35904,STACK_OVERFLOW:1283,STACK_UNDERFLOW:1284,STATE_RESTORE:35804,STATIC_DRAW:35044,STENCIL_ATTACHMENT:36128,STENCIL_BACK_FAIL:34817,STENCIL_BACK_FUNC:34816,STENCIL_BACK_PASS_DEPTH_FAIL:34818,STENCIL_BACK_PASS_DEPTH_PASS:34819,STENCIL_BACK_REF:36003,STENCIL_BACK_VALUE_MASK:36004,STENCIL_BACK_WRITEMASK:36005,STENCIL_BITS:3415,STENCIL_BUFFER_BIT:1024,STENCIL_BUFFER_BIT0_QCOM:65536,STENCIL_BUFFER_BIT1_QCOM:131072,STENCIL_BUFFER_BIT2_QCOM:262144,STENCIL_BUFFER_BIT3_QCOM:524288,STENCIL_BUFFER_BIT4_QCOM:1048576,STENCIL_BUFFER_BIT5_QCOM:2097152,STENCIL_BUFFER_BIT6_QCOM:4194304,STENCIL_BUFFER_BIT7_QCOM:8388608,STENCIL_CLEAR_VALUE:2961,STENCIL_EXT:6146,STENCIL_FAIL:2964,STENCIL_FUNC:2962,STENCIL_INDEX1_OES:36166,STENCIL_INDEX4_OES:36167,STENCIL_INDEX:6401,STENCIL_INDEX8:36168,STENCIL_PASS_DEPTH_FAIL:2965,STENCIL_PASS_DEPTH_PASS:2966,STENCIL_REF:2967,STENCIL_TEST:2960,STENCIL_VALUE_MASK:2963,STENCIL_WRITEMASK:2968,STREAM_DRAW:35040,SUBPIXEL_BITS:3408,SYNC_CONDITION_APPLE:37139,SYNC_FENCE_APPLE:37142,SYNC_FLAGS_APPLE:37141,SYNC_FLUSH_COMMANDS_BIT_APPLE:1,SYNC_GPU_COMMANDS_COMPLETE_APPLE:37143,SYNC_OBJECT_APPLE:35411,SYNC_STATUS_APPLE:37140,TEXTURE:5890,TEXTURE0:33984,TEXTURE1:33985,TEXTURE10:33994,TEXTURE11:33995,TEXTURE12:33996,TEXTURE13:33997,TEXTURE14:33998,TEXTURE15:33999,TEXTURE16:34e3,TEXTURE17:34001,TEXTURE18:34002,TEXTURE19:34003,TEXTURE2:33986,TEXTURE20:34004,TEXTURE21:34005,TEXTURE22:34006,TEXTURE23:34007,TEXTURE24:34008,TEXTURE25:34009,TEXTURE26:34010,TEXTURE27:34011,TEXTURE28:34012,TEXTURE29:34013,TEXTURE3:33987,TEXTURE30:34014,TEXTURE31:34015,TEXTURE4:33988,TEXTURE5:33989,TEXTURE6:33990,TEXTURE7:33991,TEXTURE8:33992,TEXTURE9:33993,TEXTURE_2D:3553,TEXTURE_3D_OES:32879,TEXTURE_BINDING_2D:32873,TEXTURE_BINDING_3D_OES:32874,TEXTURE_BINDING_CUBE_MAP:34068,TEXTURE_BINDING_EXTERNAL_OES:36199,TEXTURE_BORDER_COLOR_NV:4100,TEXTURE_COMPARE_FUNC_EXT:34893,TEXTURE_COMPARE_MODE_EXT:34892,TEXTURE_CUBE_MAP:34067,TEXTURE_CUBE_MAP_NEGATIVE_X:34070,TEXTURE_CUBE_MAP_NEGATIVE_Y:34072,TEXTURE_CUBE_MAP_NEGATIVE_Z:34074,TEXTURE_CUBE_MAP_POSITIVE_X:34069,TEXTURE_CUBE_MAP_POSITIVE_Y:34071,TEXTURE_CUBE_MAP_POSITIVE_Z:34073,TEXTURE_DEPTH_QCOM:35796,TEXTURE_EXTERNAL_OES:36197,TEXTURE_FORMAT_QCOM:35798,TEXTURE_HEIGHT_QCOM:35795,TEXTURE_IMAGE_VALID_QCOM:35800,TEXTURE_IMMUTABLE_FORMAT_EXT:37167,TEXTURE_INTERNAL_FORMAT_QCOM:35797,TEXTURE_MAG_FILTER:10240,TEXTURE_MAX_ANISOTROPY_EXT:34046,TEXTURE_MAX_LEVEL_APPLE:33085,TEXTURE_MIN_FILTER:10241,TEXTURE_NUM_LEVELS_QCOM:35801,TEXTURE_OBJECT_VALID_QCOM:35803,TEXTURE_SAMPLES_IMG:37174,TEXTURE_TARGET_QCOM:35802,TEXTURE_TYPE_QCOM:35799,TEXTURE_USAGE_ANGLE:37794,TEXTURE_WIDTH_QCOM:35794,TEXTURE_WRAP_R_OES:32882,TEXTURE_WRAP_S:10242,TEXTURE_WRAP_T:10243,TIMEOUT_EXPIRED_APPLE:37147,TIMEOUT_IGNORED_APPLE:18446744073709552e3,TRANSLATED_SHADER_SOURCE_LENGTH_ANGLE:37792,TRIANGLES:4,TRIANGLE_FAN:6,TRIANGLE_STRIP:5,TRUE:1,UNKNOWN_CONTEXT_RESET_EXT:33365,UNPACK_ALIGNMENT:3317,UNPACK_ROW_LENGTH:3314,UNPACK_SKIP_PIXELS:3316,UNPACK_SKIP_ROWS:3315,UNSIGNALED_APPLE:37144,UNSIGNED_BYTE:5121,UNSIGNED_INT:5125,UNSIGNED_INT64_AMD:35778,UNSIGNED_INT_10_10_10_2_OES:36342,UNSIGNED_INT_24_8_OES:34042,UNSIGNED_INT_2_10_10_10_REV_EXT:33640,UNSIGNED_NORMALIZED_EXT:35863,UNSIGNED_SHORT:5123,UNSIGNED_SHORT_1_5_5_5_REV_EXT:33638,UNSIGNED_SHORT_4_4_4_4:32819,UNSIGNED_SHORT_4_4_4_4_REV_EXT:33637,UNSIGNED_SHORT_4_4_4_4_REV_IMG:33637,UNSIGNED_SHORT_5_5_5_1:32820,UNSIGNED_SHORT_5_6_5:33635,UNSIGNED_SHORT_8_8_APPLE:34234,UNSIGNED_SHORT_8_8_REV_APPLE:34235,VALIDATE_STATUS:35715,VENDOR:7936,VERSION:7938,VERTEX_ARRAY_BINDING_OES:34229,VERTEX_ARRAY_OBJECT_EXT:37204,VERTEX_ATTRIB_ARRAY_BUFFER_BINDING:34975,VERTEX_ATTRIB_ARRAY_DIVISOR_ANGLE:35070,VERTEX_ATTRIB_ARRAY_DIVISOR_NV:35070,VERTEX_ATTRIB_ARRAY_ENABLED:34338,VERTEX_ATTRIB_ARRAY_NORMALIZED:34922,VERTEX_ATTRIB_ARRAY_POINTER:34373,VERTEX_ATTRIB_ARRAY_SIZE:34339,VERTEX_ATTRIB_ARRAY_STRIDE:34340,VERTEX_ATTRIB_ARRAY_TYPE:34341,VERTEX_SHADER:35633,VERTEX_SHADER_BIT_EXT:1,VIEWPORT:2978,VIV_shader_binary:1,WAIT_FAILED_APPLE:37149,WRITEONLY_RENDERING_QCOM:34851,WRITE_ONLY_OES:35001,Z400_BINARY_AMD:34624,ZERO:0,RASTERIZER_DISCARD:35977,UNPACK_FLIP_Y_WEBGL:37440,UNPACK_PREMULTIPLY_ALPHA_WEBGL:37441,CONTEXT_LOST_WEBGL:37442,UNPACK_COLORSPACE_CONVERSION_WEBGL:37443,BROWSER_DEFAULT_WEBGL:37444},Zc={};function vc(e){var i=jc();return function(){var n=(0,rr.Z)(e),r;if(i){var o=(0,rr.Z)(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return(0,jn.Z)(this,r)}}function jc(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var bu=new Map,cp=new Map,Yf=new Map,Ju={json:"application/json",text:"application/text",arraybuffer:"application/octet-stream"};function Vc(e){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{target:this};typeof this["on".concat(e)]=="function"&&this["on".concat(e)].call(this,i)}function Gc(e){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{readyState:e};this.readyState=e,Vc.call(this,"readystatechange",i)}var ju=function(e){(0,ui.Z)(t,e);var i=vc(t);function t(){var n;return(0,Ur.Z)(this,t),n=i.call(this),n.onabort=null,n.onerror=null,n.onload=null,n.onloadstart=null,n.onprogress=null,n.ontimeout=null,n.onloadend=null,n.onreadystatechange=null,n.readyState=0,n.response=null,n.responseText=null,n._responseType="text",n.responseXML=null,n.status=0,n.statusText="",n.upload={},n.withCredentials=!1,bu.set("requestHeader",{"content-type":"application/x-www-form-urlencoded"}),n}return(0,Jr.Z)(t,[{key:"responseType",set:function(r){this._responseType=r}},{key:"abort",value:function(){var r=Yf.get("requestTask");r&&r.abort()}},{key:"getAllResponseHeaders",value:function(){var r=cp.get("responseHeader");return Object.keys(r).map(function(o){return"".concat(o,": ").concat(r[o])}).join(`
`)}},{key:"getResponseHeader",value:function(r){return cp.get("responseHeader")[r]}},{key:"open",value:function(r,o,u){this._method=r,this._url=o}},{key:"overrideMimeType",value:function(){}},{key:"send",value:function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:""}},{key:"setRequestHeader",value:function(r,o){var u=bu.get("requestHeader");u[r]=o,bu.set("requestHeader",u)}},{key:"addEventListener",value:function(r,o){var u=this;typeof o=="function"&&(this["on"+r]=function(){var f=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};f.target=f.target||u,o.call(u,f)})}},{key:"removeEventListener",value:function(r,o){this["on"+r]===o&&(this["on"+r]=null)}}]),t}(bo);ju.UNSEND=0,ju.OPENED=1,ju.HEADERS_RECEIVED=2,ju.LOADING=3,ju.DONE=4;function fp(e){var i=$l();return function(){var n=(0,rr.Z)(e),r;if(i){var o=(0,rr.Z)(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return(0,jn.Z)(this,r)}}function $l(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var Rs=function(e){(0,ui.Z)(t,e);var i=fp(t);function t(n){var r;return(0,Ur.Z)(this,t),r=i.call(this,n),r.touches=[],r.targetTouches=[],r.changedTouches=[],r.target=qo(),r.currentTarget=qo(),r}return(0,Jr.Z)(t)}(ps);function Ml(e){var i=e||{},t=i.x,n=t===void 0?0:t,r=i.y,o=r===void 0?0:r,u=i.clientX,f=u===void 0?0:u,g=i.clientY,x=g===void 0?0:g;Object.keys(e).indexOf("x")!==-1?(e.pageX=e.clientX=n,e.pageY=e.clientY=o):(e.x=f,e.y=x)}function Ef(e){return function(i){var t=new Rs(e);t.changedTouches=i.changedTouches,t.touches=i.touches,t.targetTouches=Array.prototype.slice.call(i.touches),t.timeStamp=i.timeStamp,t.changedTouches.forEach(function(n){return Ml(n)}),t.touches.forEach(function(n){return Ml(n)}),t.targetTouches.forEach(function(n){return Ml(n)}),q.dispatchEvent(t)}}function Hc(e){return function(i){i.type=e,q.dispatchEvent(i)}}var Xl=Ef("touchstart"),ah=Ef("touchmove"),Kf=Ef("touchend"),Ll=Hc("mapCameaParams");function Wc(e){var i=uu();return function(){var n=(0,rr.Z)(e),r;if(i){var o=(0,rr.Z)(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return(0,jn.Z)(this,r)}}function uu(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var hs=function(e){(0,ui.Z)(t,e);var i=Wc(t);function t(n){var r;return(0,Ur.Z)(this,t),r=i.call(this,n),r.target=qo(),r.currentTarget=qo(),r}return(0,Jr.Z)(t)}(ps),kc=["bubbles","cancelable","view","detail","screenX","screenY","clientX","clientY","ctrlKey","altKey","shiftKey","metaKey","button","relatedTarget","pointerId","width","height","pressure","tiltX","tiltY","pointerType","hwTimestamp","isPrimary","pageX","pageY","timeStamp"],oc=[!1,!1,null,null,0,0,0,0,!1,!1,!1,!1,0,null,0,0,0,0,0,0,0,"",0,!1,0,0,0],uf="touch";function mc(e,i,t){for(var n=new hs(e),r=0;r<kc.length;r++){var o=kc[r];n[o]=i[o]||oc[r]}return n.type=e,n.target=qo(),n.currentTarget=qo(),n.buttons=ds(e),n.which=n.buttons,n.pointerId=(i.identifier||0)+2,n.bubbles=!0,n.cancelable=!0,n.button=0,n.width=(i.radiusX||.5)*2,n.height=(i.radiusY||.5)*2,n.pressure=i.force||.5,n.isPrimary=vl(i),n.pointerType=uf,n.altKey=t.altKey,n.ctrlKey=t.ctrlKey,n.metaKey=t.metaKey,n.shiftKey=t.shiftKey,t.preventDefault&&(n.preventDefault=function(){t.preventDefault()}),n}function ds(e){var i=0;return(e==="touchstart"||e==="touchmove"||e==="pointerdown"||e==="pointermove")&&(i=1),i}var sc=null;function vl(e){return sc===e.identifier}function pp(e){sc===null&&(sc=e.identifier)}function Lc(e){sc===e.identifier&&(sc=null)}function uc(e){return function(i){for(var t=i.changedTouches,n=0;n<t.length;n++){var r=t[n];n===0&&e==="pointerdown"?pp(r):(e==="pointerup"||e==="pointercancel")&&Lc(r);var o=mc(e,r,i);q.dispatchEvent(o)}}}var Qf=uc("pointerdown"),Yl=uc("pointermove"),Dc=uc("pointerup");function Jf(e){var i=gc();return function(){var n=(0,rr.Z)(e),r;if(i){var o=(0,rr.Z)(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return(0,jn.Z)(this,r)}}function gc(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var $c=function(e){(0,ui.Z)(t,e);var i=Jf(t);function t(n){return(0,Ur.Z)(this,t),i.call(this,n)}return(0,Jr.Z)(t)}(ps);function Fc(e){return function(i){i.type=e,q.dispatchEvent(i)}}var Kl=Fc("mousedown"),Ql=Fc("mousemove"),Uf=Fc("mouseup"),qf=typeof my!="undefined"&&!!my&&typeof my.showToast=="function"&&my.isFRM!==!0,ep=typeof wx!="undefined"&&wx!==null&&(typeof wx.request!="undefined"||typeof wx.miniProgram!="undefined"),qu=qf||ep,Zf={atob:xo,btoa:ua,devicePixelRatio:No,Blob:Eo,document:q,Element:au,Event:ps,EventTarget:bo,HTMLCanvasElement:Le,HTMLElement:Wa,HTMLMediaElement:Vo,HTMLVideoElement:Zu,Image:Hl,ImageData:ct,navigator:ha,Node:Xs,requestAnimationFrame:Wl,cancelAnimationFrame:Pc,screen:$u,XMLHttpRequest:ju,performance:$o,URL:Js,WebGLRenderingContext:bf,WebGL2RenderingContext:Zc,addEventListener:function(i,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};q.addEventListener(i,t,n)},removeEventListener:function(i,t,n){q.removeEventListener(i,t)},dispatchEvent:function(i){q.dispatchEvent(i)},innerWidth:$u.availWidth,innerHeight:$u.availHeight,setTimeout,clearTimeout,setInterval,clearInterval},vs=qu?Zf:Xa,Kr=qu?ju:Xa.XMLHttpRequest,vi=qu?sf:Xa.location;function ei(e){var i=e;return typeof e=="string"&&(i=vs.document.getElementById(e)),i}function xi(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}function da(e){return xi(e).split(/\s+/)}function uo(e){var i,t,n=vs==null||(i=vs.document)===null||i===void 0||(t=i.documentElement)===null||t===void 0?void 0:t.style;if(!n)return e[0];for(var r in e)if(e[r]&&e[r]in n)return e[r];return e[0]}function Ua(e,i,t){var n=vs.document.createElement(e);return i&&(n.className=i||""),t&&t.appendChild(n),n}function ns(e){var i=e.parentNode;i&&i.removeChild(e)}function Vu(e,i){if(e.classList!==void 0)for(var t=da(i),n=0,r=t.length;n<r;n++)e.classList.add(t[n]);else if(!yc(e,i)){var o=_c(e);tp(e,(o?o+" ":"")+i)}}function lc(e,i){e.classList!==void 0?e.classList.remove(i):tp(e,xi((" "+_c(e)+" ").replace(" "+i+" "," ")))}function yc(e,i){if(e.classList!==void 0)return e.classList.contains(i);var t=_c(e);return t.length>0&&new RegExp("(^|\\s)"+i+"(\\s|$)").test(t)}function tp(e,i){e instanceof HTMLElement?e.className=i:e.className.baseVal=i}function _c(e){return e instanceof SVGElement&&(e=e.correspondingElement),e.className.baseVal===void 0?e.className:e.className.baseVal}function Jl(e){for(;e&&e.firstChild;)e.removeChild(e.firstChild)}var ml=uo(["transform","WebkitTransform"]);function lu(e,i){e.style[ml]=i}function _s(){if(typeof Event=="function")vs.dispatchEvent(new Event("resize"));else{var e=vs.document.createEvent("UIEvents");e.initUIEvent("resize",!0,!1,vs,0),vs.dispatchEvent(e)}}function jf(e){var i=["padding: "+(e.height/2-8)+"px "+e.width/2+"px;","line-height: "+e.height+"px;","background-image: url("+e.toDataURL()+");"];console.log(`%c
`,i.join(""))}function qs(){var e,i=vs.document.querySelector('meta[name="viewport"]');if(!i)return 1;var t=(e=i.content)===null||e===void 0?void 0:e.split(","),n=t.find(function(r){var o=r.split("="),u=(0,Mr.Z)(o,1),f=u[0];return f==="initial-scale"});return n?n.split("=")[1]*1:1}var ji=qs()<1?1:vs.devicePixelRatio;function Gs(e,i){e.setAttribute("style","".concat(e.style.cssText).concat(i))}function ql(e){return e.split(";").map(function(i){return i.trim()}).filter(function(i){return i})}function Xc(e,i){var t,n=ql((t=e.getAttribute("style"))!==null&&t!==void 0?t:""),r=ql(i),o=Wr.pull.apply(void 0,[n].concat((0,ie.Z)(r)));e.setAttribute("style",o.join(";"))}function Il(e){return Object.entries(e).map(function(i){var t=(0,Mr.Z)(i,2),n=t[0],r=t[1];return"".concat(n,": ").concat(r)}).join(";")}function ku(e,i){return{left:e.left-i.left,top:e.top-i.top,right:i.left+i.width-e.left-e.width,bottom:i.top+i.height-e.top-e.height}}function ec(e,i){e.checked=i,i?e.setAttribute("checked","true"):e.removeAttribute("checked")}function ia(e){e.innerHTML=""}function lf(e){e.setAttribute("draggable","false")}function xc(e){if(e.length===0)throw new Error("max requires at least one data point");for(var i=e[0],t=1;t<e.length;t++)e[t]>i&&(i=e[t]);return i*1}function cc(e){if(e.length===0)throw new Error("min requires at least one data point");for(var i=e[0],t=1;t<e.length;t++)e[t]<i&&(i=e[t]);return i*1}function Ps(e){if(e.length===0)return 0;for(var i=e[0]*1,t=1;t<e.length;t++)i+=e[t]*1;return i}function ol(e){if(e.length===0)throw new Error("mean requires at least one data point");return Ps(e)/e.length}function Yc(e){if(e.length===0)throw new Error("mean requires at least one data point");if(e.length<3)return e[0];e.sort();for(var i=e[0],t=NaN,n=0,r=1,o=1;o<e.length+1;o++)e[o]!==i?(r>n&&(n=r,t=i),r=1,i=e[o]):r++;return t*1}var Eu={min:cc,max:xc,mean:ol,sum:Ps,mode:Yc};function el(e,i){return e.map(function(t){return t[i]})}function bc(e,i){return Eu[e](i)}var Vf=c(34419);function qr(e){return Function.toString.call(e).indexOf("[native code]")!==-1}var ri=c(4878);function Kn(e,i,t){return(0,ri.Z)()?Kn=Reflect.construct.bind():Kn=function(r,o,u){var f=[null];f.push.apply(f,o);var g=Function.bind.apply(r,f),x=new g;return u&&(0,Vf.Z)(x,u.prototype),x},Kn.apply(null,arguments)}function Vn(e){var i=typeof Map=="function"?new Map:void 0;return Vn=function(n){if(n===null||!qr(n))return n;if(typeof n!="function")throw new TypeError("Super expression must either be null or a function");if(typeof i!="undefined"){if(i.has(n))return i.get(n);i.set(n,r)}function r(){return Kn(n,arguments,(0,rr.Z)(this).constructor)}return r.prototype=Object.create(n.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),(0,Vf.Z)(r,n)},Vn(e)}function Ri(e){var i=li();return function(){var n=(0,rr.Z)(e),r;if(i){var o=(0,rr.Z)(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return(0,jn.Z)(this,r)}}function li(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var ga=function(e){(0,ui.Z)(t,e);var i=Ri(t);function t(n,r,o,u){var f;return(0,Ur.Z)(this,t),f=i.call(this,"AJAXError: ".concat(r," (").concat(n,"): ").concat(o)),f.status=n,f.statusText=r,f.url=o,f.body=u,f}return(0,Jr.Z)(t)}(Vn(Error));function Ka(e,i){var t=new Kr,n=Array.isArray(e.url)?e.url[0]:e.url;t.open(e.method||"GET",n,!0),e.type==="arrayBuffer"&&(t.responseType="arraybuffer");for(var r in e.headers)e.headers.hasOwnProperty(r)&&t.setRequestHeader(r,e.headers[r]);return e.type==="json"&&(t.responseType="text",t.setRequestHeader("Accept","application/json")),t.withCredentials=e.credentials==="include",t.onerror=function(){i(new Error(t.statusText))},t.onload=function(){if((t.status>=200&&t.status<300||t.status===0)&&t.response!==null){var o=t.response;if(e.type==="json")try{o=JSON.parse(t.response)}catch(f){return i(f)}i(null,o,t.getResponseHeader("Cache-Control"),t.getResponseHeader("Expires"),t)}else{var u=new Blob([t.response],{type:t.getResponseHeader("Content-Type")});i(new ga(t.status,t.statusText,n.toString(),u))}},t.send(e.body),t}function Ma(e){return new Promise(function(i,t){Ka(e,function(n,r,o,u,f){n?t({err:n,data:null,xhr:f}):i({err:null,data:r,cacheControl:o,expires:u,xhr:f})})})}function Bo(e,i){return Ka(e,i)}var As=function(i,t){return Bo((0,oe.Z)((0,oe.Z)({},i),{},{type:"json"}),t)},Su=function(i,t){return Bo((0,oe.Z)((0,oe.Z)({},i),{},{type:"arrayBuffer"}),t)},cu=function(i,t){return Bo(_objectSpread(_objectSpread({},i),{},{method:"POST"}),t)};function tl(e){var i=$window.document.createElement("a");return i.href=e,i.protocol===$window.document.location.protocol&&i.host===$window.document.location.host}var Pa="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";function la(e,i){var t=new vs.Image,n=vs.URL||vs.webkitURL;t.crossOrigin="anonymous",t.onload=function(){i(null,t),n.revokeObjectURL(t.src),t.onload=null,window.requestAnimationFrame(function(){t.src=Pa})},t.onerror=function(){return i(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))};var r=new Blob([new Uint8Array(e)],{type:"image/png"});t.src=e.byteLength?n.createObjectURL(r):Pa}function sl(e,i){var t=new Blob([new Uint8Array(e)],{type:"image/png"});createImageBitmap(t).then(function(n){i(null,n)}).catch(function(n){i(new Error("Could not load image because of ".concat(n.message,". Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.")))})}var us=function(i,t,n){var r=function(u,f){if(u)t(u);else if(f){var g=typeof createImageBitmap=="function",x=n?n(f):f;g?sl(x,t):la(x,t)}};return i.type==="json"?As(i,r):Su(i,r)};function wu(e){return typeof e=="number"}function Zs(e){var i=[1/0,1/0,-1/0,-1/0];return Gt(e,function(t){i[0]>t[0]&&(i[0]=t[0]),i[1]>t[1]&&(i[1]=t[1]),i[2]<t[0]&&(i[2]=t[0]),i[3]<t[1]&&(i[3]=t[1])}),i}Zs.default=Zs;var ul=Zs,Ec=2*Math.PI*6378137/2;function cf(e,i){var t=(0,Mr.Z)(i,4),n=t[0],r=t[1],o=t[2],u=t[3];return e.lng>n&&e.lng<=o&&e.lat>r&&e.lat<=u}function ws(e){var i=[1/0,1/0,-1/0,-1/0];return e.forEach(function(t){var n=t.coordinates;Qo(i,n)}),i}function Qo(e,i){return Array.isArray(i[0])?i.forEach(function(t){Qo(e,t)}):(e[0]>i[0]&&(e[0]=i[0]),e[1]>i[1]&&(e[1]=i[1]),e[2]<i[0]&&(e[2]=i[0]),e[3]<i[1]&&(e[3]=i[1])),e}function ff(e,i){return Du(e,i)}function Du(e,i){return Array.isArray(e[0])?e.map(function(t){return Du(t,i)}):i(e)}function du(e){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{enable:!0,decimal:1};e=mo(e,i);var n=e[0],r=e[1],o=n*Ec/180,u=Math.log(Math.tan((90+r)*Math.PI/360))/(Math.PI/180);return u=u*Ec/180,t.enable&&(o=Number(o.toFixed(t.decimal)),u=Number(u.toFixed(t.decimal))),e.length===3?[o,u,e[2]]:[o,u]}function ll(e){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,t=e[0],n=e[1],r=t/Ec*180,o=n/Ec*180;return o=180/Math.PI*(2*Math.atan(Math.exp(o*Math.PI/180))-Math.PI/2),i!=null&&(r=Number(r.toFixed(i)),o=Number(o.toFixed(i))),e.length===3?[r,o,e[2]]:[r,o]}function eu(e){if(e==null)throw new Error("lng is required");return(e>180||e<-180)&&(e=e%360,e>180&&(e=-360+e),e<-180&&(e=360+e),e===0&&(e=0)),e}function Rt(e){if(e==null)throw new Error("lat is required");return(e>90||e<-90)&&(e=e%180,e>90&&(e=-180+e),e<-90&&(e=180+e),e===0&&(e=0)),e}function mo(e,i){if(i===!1)return e;var t=eu(e[0]),n=Rt(e[1]);return n>85&&(n=85),n<-85&&(n=-85),e.length===3?[t,n,e[2]]:[t,n]}function xs(e){var i=85.0511287798,t=Math.max(Math.min(i,e[1]),-i),n=256<<20,r=Math.PI/180,o=e[0]*r,u=t*r;u=Math.log(Math.tan(Math.PI/4+u/2));var f=.5/Math.PI,g=.5,x=-.5/Math.PI;return r=.5,o=n*(f*o+g),u=n*(x*u+r),[Math.floor(o),Math.floor(u)]}function tu(e){var i=.5/Math.PI,t=.5,n=-.5/Math.PI,r=.5,o=256<<20,u=_slicedToArray(e,2),f=u[0],g=u[1];f=(f/o-t)/i,g=(g/o-r)/n,g=(Math.atan(Math.pow(Math.E,g))-Math.PI/4)*2,r=Math.PI/180;var x=g/r,I=f/r;return[I,x]}function Mo(e,i){var t=85.0511287798,n=Math.PI/180,r=6378137;return i=Math.max(Math.min(t,i),-t),e*=n,i*=n,i=Math.log(Math.tan(Math.PI/4+i/2)),[e*r,i*r]}function rp(e,i){var t=Math.PI/180,n=6378137,r=e/n/t,o=2*(Math.atan(Math.exp(i/n))-Math.PI/4)/t;return[r,o]}function pf(e,i,t){var n=me(i[1]-e[1]),r=me(i[0]-e[0]),o=me(e[1]),u=me(i[1]),f=Math.pow(Math.sin(n/2),2)+Math.pow(Math.sin(r/2),2)*Math.cos(o)*Math.cos(u);return _n(2*Math.atan2(Math.sqrt(f),Math.sqrt(1-f)),t="meters")}function np(e){var i=Math.PI/180,t=85.0511287798,n=6378137,r=Math.max(Math.min(t,e[1]),-t),o=Math.sin(r*i),u=n*e[0]*i,f=n*Math.log((1+o)/(1-o))/2;return[u,f]}function cl(e,i){var t=Math.abs(e[1][1]-e[0][1])*i,n=Math.abs(e[1][0]-e[0][0])*i;return[[e[0][0]-n,e[0][1]-t],[e[1][0]+n,e[1][1]+t]]}function Dl(e,i){return e[0][0]<=i[0][0]&&e[0][1]<=i[0][1]&&e[1][0]>=i[1][0]&&e[1][1]>=i[1][1]}function Cs(e){return[[e[0],e[1]],[e[2],e[3]]]}function fu(e){var i=Zl(e,[0,0]);return[e[0]/i,e[1]/i]}function Zl(e,i){return Math.sqrt(Math.pow(e[0]-i[0],2)+Math.pow(e[1]-i[1],2))}function Mu(e,i){return e[0]*i[0]+e[1]*i[1]}function Fu(e){return Math.sqrt(e[0]*e[0]+e[1]*e[1])}function Nc(e,i){return Math.acos(Mu(e,i)/(Fu(e)*Fu(i)))*180/Math.PI}function hf(e,i){return i[0]>0?i[1]>0?90-Math.atan(i[1]/i[0])*180/Math.PI:90+Math.atan(-i[1]/i[0])*180/Math.PI:i[1]<0?180+(90-Math.atan(i[1]/i[0])*180/Math.PI):270+Math.atan(i[1]/-i[0])*180/Math.PI}function Ol(e){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:100;if(!(!e||e.length<2)){for(var t=[0,1],n=0,r=[],o=0;o<e.length-1;o++){var u=e[o],f=e[o+1],g=Zl(u,f);n+=g;var x=[u[0]-f[0],u[1]-f[1]],I=hf(t,x);if(o>0){var P=r[o-1].rotation;P-I>360-P+I&&(I=I+360)}r.push({start:u,end:f,dis:g,rotation:I,duration:0})}return r.map(function(G){G.duration=i*(G.dis/n)}),r}}function d(e){if(wu(e[0]))return e;if(wu(e[0][0]))throw new Error("\u5F53\u524D\u6570\u636E\u4E0D\u652F\u6301\u6807\u6CE8");if(wu(e[0][0][0])){var i=e,t=0,n=0,r=0;return i.forEach(function(o){o.forEach(function(u){t+=u[0],n+=u[1],r++})}),[t/r,n/r,0]}else throw new Error("\u5F53\u524D\u6570\u636E\u4E0D\u652F\u6301\u6807\u6CE8")}function _(e){for(var i=e[0],t=e[1],n=e[0],r=e[1],o=0,u=0,f=0,g=0;g<e.length;g+=2){var x=e[g],I=e[g+1];x&&I&&(i=Math.max(x,i),t=Math.max(I,t),n=Math.min(x,n),r=Math.min(I,r),o+=x,u+=I,f++)}return{center:[o/f,u/f],radius:Math.sqrt(Math.pow(i-n,2)+Math.pow(t-r,2))/2}}function m(e){return ul(ot([Cr(e)]))}var S=function(){function e(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:50,t=arguments.length>1?arguments[1]:void 0;(0,Ur.Z)(this,e),this.limit=i,this.destroy=t||this.defaultDestroy,this.order=[],this.clear()}return(0,Jr.Z)(e,[{key:"clear",value:function(){var t=this;this.order.forEach(function(n){t.delete(n)}),this.cache={},this.order=[]}},{key:"get",value:function(t){var n=this.cache[t];return n&&(this.deleteOrder(t),this.appendOrder(t)),n}},{key:"set",value:function(t,n){this.cache[t]?(this.delete(t),this.cache[t]=n,this.appendOrder(t)):(Object.keys(this.cache).length===this.limit&&this.delete(this.order[0]),this.cache[t]=n,this.appendOrder(t))}},{key:"delete",value:function(t){var n=this.cache[t];n&&(this.deleteCache(t),this.deleteOrder(t),this.destroy(n,t))}},{key:"deleteCache",value:function(t){delete this.cache[t]}},{key:"deleteOrder",value:function(t){var n=this.order.findIndex(function(r){return r===t});n>=0&&this.order.splice(n,1)}},{key:"appendOrder",value:function(t){this.order.push(t)}},{key:"defaultDestroy",value:function(t,n){return null}}]),e}();function N(e,i){e.forEach(function(t){!i[t]||(i[t]=i[t].bind(i))})}var X=null;function ee(e,i,t){e.prototype=i.prototype=t,t.constructor=e}function Ae(e,i){var t=Object.create(e.prototype);for(var n in i)t[n]=i[n];return t}function Ze(){}var nt=.7,Ct=1/nt,Tt="\\s*([+-]?\\d+)\\s*",Pt="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",tr="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",or=/^#([0-9a-f]{3,8})$/,gr=new RegExp("^rgb\\("+[Tt,Tt,Tt]+"\\)$"),Yt=new RegExp("^rgb\\("+[tr,tr,tr]+"\\)$"),br=new RegExp("^rgba\\("+[Tt,Tt,Tt,Pt]+"\\)$"),Lr=new RegExp("^rgba\\("+[tr,tr,tr,Pt]+"\\)$"),pn=new RegExp("^hsl\\("+[Pt,tr,tr]+"\\)$"),zn=new RegExp("^hsla\\("+[Pt,tr,tr,Pt]+"\\)$"),Nn={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};ee(Ze,Ei,{copy:function(e){return Object.assign(new this.constructor,this,e)},displayable:function(){return this.rgb().displayable()},hex:Xn,formatHex:Xn,formatHsl:yi,formatRgb:Li,toString:Li});function Xn(){return this.rgb().formatHex()}function yi(){return Ha(this).formatHsl()}function Li(){return this.rgb().formatRgb()}function Ei(e){var i,t;return e=(e+"").trim().toLowerCase(),(i=or.exec(e))?(t=i[1].length,i=parseInt(i[1],16),t===6?Vi(i):t===3?new io(i>>8&15|i>>4&240,i>>4&15|i&240,(i&15)<<4|i&15,1):t===8?Ea(i>>24&255,i>>16&255,i>>8&255,(i&255)/255):t===4?Ea(i>>12&15|i>>8&240,i>>8&15|i>>4&240,i>>4&15|i&240,((i&15)<<4|i&15)/255):null):(i=gr.exec(e))?new io(i[1],i[2],i[3],1):(i=Yt.exec(e))?new io(i[1]*255/100,i[2]*255/100,i[3]*255/100,1):(i=br.exec(e))?Ea(i[1],i[2],i[3],i[4]):(i=Lr.exec(e))?Ea(i[1]*255/100,i[2]*255/100,i[3]*255/100,i[4]):(i=pn.exec(e))?po(i[1],i[2]/100,i[3]/100,1):(i=zn.exec(e))?po(i[1],i[2]/100,i[3]/100,i[4]):Nn.hasOwnProperty(e)?Vi(Nn[e]):e==="transparent"?new io(NaN,NaN,NaN,0):null}function Vi(e){return new io(e>>16&255,e>>8&255,e&255,1)}function Ea(e,i,t,n){return n<=0&&(e=i=t=NaN),new io(e,i,t,n)}function Qa(e){return e instanceof Ze||(e=Ei(e)),e?(e=e.rgb(),new io(e.r,e.g,e.b,e.opacity)):new io}function Ga(e,i,t,n){return arguments.length===1?Qa(e):new io(e,i,t,n==null?1:n)}function io(e,i,t,n){this.r=+e,this.g=+i,this.b=+t,this.opacity=+n}ee(io,Ga,Ae(Ze,{brighter:function(e){return e=e==null?Ct:Math.pow(Ct,e),new io(this.r*e,this.g*e,this.b*e,this.opacity)},darker:function(e){return e=e==null?nt:Math.pow(nt,e),new io(this.r*e,this.g*e,this.b*e,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:ya,formatHex:ya,formatRgb:yo,toString:yo}));function ya(){return"#"+_o(this.r)+_o(this.g)+_o(this.b)}function yo(){var e=this.opacity;return e=isNaN(e)?1:Math.max(0,Math.min(1,e)),(e===1?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(e===1?")":", "+e+")")}function _o(e){return e=Math.max(0,Math.min(255,Math.round(e)||0)),(e<16?"0":"")+e.toString(16)}function po(e,i,t,n){return n<=0?e=i=t=NaN:t<=0||t>=1?e=i=NaN:i<=0&&(e=NaN),new eo(e,i,t,n)}function Ha(e){if(e instanceof eo)return new eo(e.h,e.s,e.l,e.opacity);if(e instanceof Ze||(e=Ei(e)),!e)return new eo;if(e instanceof eo)return e;e=e.rgb();var i=e.r/255,t=e.g/255,n=e.b/255,r=Math.min(i,t,n),o=Math.max(i,t,n),u=NaN,f=o-r,g=(o+r)/2;return f?(i===o?u=(t-n)/f+(t<n)*6:t===o?u=(n-i)/f+2:u=(i-t)/f+4,f/=g<.5?o+r:2-o-r,u*=60):f=g>0&&g<1?0:u,new eo(u,f,g,e.opacity)}function Ro(e,i,t,n){return arguments.length===1?Ha(e):new eo(e,i,t,n==null?1:n)}function eo(e,i,t,n){this.h=+e,this.s=+i,this.l=+t,this.opacity=+n}ee(eo,Ro,Ae(Ze,{brighter:function(e){return e=e==null?Ct:Math.pow(Ct,e),new eo(this.h,this.s,this.l*e,this.opacity)},darker:function(e){return e=e==null?nt:Math.pow(nt,e),new eo(this.h,this.s,this.l*e,this.opacity)},rgb:function(){var e=this.h%360+(this.h<0)*360,i=isNaN(e)||isNaN(this.s)?0:this.s,t=this.l,n=t+(t<.5?t:1-t)*i,r=2*t-n;return new io(Ia(e>=240?e-240:e+120,r,n),Ia(e,r,n),Ia(e<120?e+240:e-120,r,n),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var e=this.opacity;return e=isNaN(e)?1:Math.max(0,Math.min(1,e)),(e===1?"hsl(":"hsla(")+(this.h||0)+", "+(this.s||0)*100+"%, "+(this.l||0)*100+"%"+(e===1?")":", "+e+")")}}));function Ia(e,i,t){return(e<60?i+(t-i)*e/60:e<180?t:e<240?i+(t-i)*(240-e)/60:i)*255}function Gu(e){return typeof e=="string"?!!d3.color(e):!1}function co(e){var i=Ei(e),t=[0,0,0,0];return i!=null&&(t[0]=i.r/255,t[1]=i.g/255,t[2]=i.b/255,t[3]=i.opacity),t}function es(e){var i=e&&e[0],t=e&&e[1],n=e&&e[2],r=i+t*256+n*65536-1;return r}function ru(e){return[e+1&255,e+1>>8&255,e+1>>8>>8&255]}function pu(e){var i=vs.document.createElement("canvas"),t=i.getContext("2d");i.width=256,i.height=1;var n=null;if(e.weights){var r=0;e.weights.map(function(G,$){var Ee=e.colors[$]||"rgba(0, 0, 0, 0)",Se=r+G;t.fillStyle=Ee,t.fillRect(r*256,0,Se*256,1),r=Se})}else{for(var o=t.createLinearGradient(0,0,256,1),u=e.positions[0],f=e.positions[e.positions.length-1],g=0;g<e.colors.length;++g){var x=(e.positions[g]-u)/(f-u);o.addColorStop(x,e.colors[g])}t.fillStyle=o,t.fillRect(0,0,256,1)}if(qu)return n=new Uint8ClampedArray(t.getImageData(0,0,256,1).data),i=null,t=null,{data:n,width:256,height:1};n=t.getImageData(0,0,256,1).data;for(var I=t.createImageData(256,1),P=0;P<I.data.length;P+=4)I.data[P+0]=n[P+0],I.data[P+1]=n[P+1],I.data[P+2]=n[P+2],I.data[P+3]=n[P+3];return i=null,t=null,I}var Ts;(function(e){e.CENTER="center",e.TOP="top",e["TOP-LEFT"]="top-left",e["TOP-RIGHT"]="top-right",e.BOTTOM="bottom",e["BOTTOM-LEFT"]="bottom-left",e["BOTTOM-RIGHT"]="bottom-right",e.LEFT="left",e.RIGHT="right"})(Ts||(Ts={}));var rl={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function Nu(e,i,t){var n=e.classList;for(var r in rl)rl.hasOwnProperty(r)&&n.remove("l7-".concat(t,"-anchor-").concat(r));n.add("l7-".concat(t,"-anchor-").concat(i))}function zo(e,i){return{enable:e,mask:255,func:{cmp:514,ref:i?1:0,mask:255}}}var An=c(17374),vu=c(63363),Nt=c.n(vu);function gl(e,i){if(!e)throw new Error(i||"web worker helper assertion failed.")}var Xu={self:typeof self!="undefined"&&self,window:typeof window!="undefined"&&window,document:typeof document!="undefined"&&document},Sf=Xu.self||Xu.window||{},ip=Xu.window||Xu.self||{},Kc=Xu.self||Xu.window||{},fl=Xu.document||{},Qc=typeof importScripts=="function",Sc=typeof window!="undefined"&&typeof window.orientation!="undefined",Lu=function(){function e(i,t){var n=this;this.name=i,this.workerThread=t,this.isRunning=!0,this.resolve=function(){},this.reject=function(){},this.result=new Promise(function(r,o){n.resolve=r,n.reject=o})}return e.prototype.postMessage=function(i,t){this.workerThread.postMessage({source:"Main thread",type:i,payload:t})},e.prototype.done=function(i){gl(this.isRunning,"WorkerJob isRunning false."),this.isRunning=!1,this.resolve(i)},e.prototype.error=function(i){gl(this.isRunning,"WorkerJob isRunning false."),this.isRunning=!1,this.reject(i)},e}(),Fl=Lu,fc=new Map;function Jc(e){gl(e.source&&!e.url||!e.source&&e.url);var i=fc.get(e.source||e.url);return i||(e.url&&(i=ts(e.url),fc.set(e.url,i)),e.source&&(i=pl(e.source),fc.set(e.source,i))),gl(i),i}function ts(e){if(!e.startsWith("http"))return e;var i=Rl(e);return pl(i)}function pl(e){var i=new Blob([e],{type:"application/javascript"});return URL.createObjectURL(i)}function Rl(e){return`try {
  importScripts('`+e+`');
} catch (error) {
  console.error(error);
  throw error;
}`}function qc(e,i,t){i===void 0&&(i=!0);var n=t||new Set;if(e){if(ap(e))n.add(e);else if(ap(e.buffer))n.add(e.buffer);else if(!ArrayBuffer.isView(e)){if(i&&typeof e=="object")for(var r in e)qc(e[r],i,n)}}return t===void 0?Array.from(n):[]}function ap(e){return e?e instanceof ArrayBuffer||typeof MessagePort!="undefined"&&e instanceof MessagePort||typeof ImageBitmap!="undefined"&&e instanceof ImageBitmap||typeof OffscreenCanvas!="undefined"&&e instanceof OffscreenCanvas:!1}var ef=function(){},wf=function(){function e(i){this.terminated=!1,this.loadableURL="";var t=i.name,n=i.source,r=i.url;gl(n||r),this.name=t,this.source=n,this.url=r,this.onMessage=ef,this.onError=function(o){return console.log(o)},this.worker=this.createBrowserWorker()}return e.isSupported=function(){return typeof Worker!="undefined"},e.prototype.destroy=function(){this.onMessage=ef,this.onError=ef,this.worker.terminate(),this.terminated=!0},Object.defineProperty(e.prototype,"isRunning",{get:function(){return Boolean(this.onMessage)},enumerable:!1,configurable:!0}),e.prototype.postMessage=function(i,t){t=t||qc(i),this.worker.postMessage(i,t)},e.prototype.getErrorFromErrorEvent=function(i){var t="Failed to load ";return t+="worker "+this.name+" from "+this.url+". ",i.message&&(t+=i.message+" in "),i.lineno&&(t+=":"+i.lineno+":"+i.colno),new Error(t)},e.prototype.createBrowserWorker=function(){var i=this;this.loadableURL=Jc({source:this.source,url:this.url});var t=new Worker(this.loadableURL,{name:this.name});return t.onmessage=function(n){n.data?i.onMessage(n.data):i.onError(new Error("No data received"))},t.onerror=function(n){i.onError(i.getErrorFromErrorEvent(n)),i.terminated=!0},t.onmessageerror=function(n){return console.error("worker "+i.name+", message error: "+n)},t},e}(),tc=wf,tf=function(){return tf=Object.assign||function(e){for(var i,t=1,n=arguments.length;t<n;t++){i=arguments[t];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r])}return e},tf.apply(this,arguments)},Pl=function(e,i,t,n){function r(o){return o instanceof t?o:new t(function(u){u(o)})}return new(t||(t=Promise))(function(o,u){function f(I){try{x(n.next(I))}catch(P){u(P)}}function g(I){try{x(n.throw(I))}catch(P){u(P)}}function x(I){I.done?o(I.value):r(I.value).then(f,g)}x((n=n.apply(e,i||[])).next())})},rf=function(e,i){var t={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,r,o,u;return u={next:f(0),throw:f(1),return:f(2)},typeof Symbol=="function"&&(u[Symbol.iterator]=function(){return this}),u;function f(x){return function(I){return g([x,I])}}function g(x){if(n)throw new TypeError("Generator is already executing.");for(;t;)try{if(n=1,r&&(o=x[0]&2?r.return:x[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,x[1])).done)return o;switch(r=0,o&&(x=[x[0]&2,o.value]),x[0]){case 0:case 1:o=x;break;case 4:return t.label++,{value:x[1],done:!1};case 5:t.label++,r=x[1],x=[0];continue;case 7:x=t.ops.pop(),t.trys.pop();continue;default:if(o=t.trys,!(o=o.length>0&&o[o.length-1])&&(x[0]===6||x[0]===2)){t=0;continue}if(x[0]===3&&(!o||x[1]>o[0]&&x[1]<o[3])){t.label=x[1];break}if(x[0]===6&&t.label<o[1]){t.label=o[1],o=x;break}if(o&&t.label<o[2]){t.label=o[2],t.ops.push(x);break}o[2]&&t.ops.pop(),t.trys.pop();continue}x=i.call(e,t)}catch(I){x=[6,I],r=0}finally{n=o=0}if(x[0]&5)throw x[1];return{value:x[0]?x[1]:void 0,done:!0}}},Af=function(){function e(i){this.name="unnamed",this.maxConcurrency=1,this.maxMobileConcurrency=1,this.onDebug=function(){},this.reuseWorkers=!0,this.props={},this.jobQueue=[],this.idleQueue=[],this.count=0,this.isDestroyed=!1,this.source=i.source,this.url=i.url,this.setProps(i)}return e.prototype.destroy=function(){this.idleQueue.forEach(function(i){return i.destroy()}),this.isDestroyed=!0},e.prototype.setProps=function(i){this.props=tf(tf({},this.props),i),i.name!==void 0&&(this.name=i.name),i.maxConcurrency!==void 0&&(this.maxConcurrency=i.maxConcurrency),i.maxMobileConcurrency!==void 0&&(this.maxMobileConcurrency=i.maxMobileConcurrency),i.reuseWorkers!==void 0&&(this.reuseWorkers=i.reuseWorkers),i.onDebug!==void 0&&(this.onDebug=i.onDebug)},e.prototype.startJob=function(i,t,n){return t===void 0&&(t=function(r,o,u){return r.done(u)}),n===void 0&&(n=function(r,o){return r.error(o)}),Pl(this,void 0,void 0,function(){var r,o=this;return rf(this,function(u){switch(u.label){case 0:return r=new Promise(function(f){return o.jobQueue.push({name:i,onMessage:t,onError:n,onStart:f}),o}),this.startQueuedJob(),[4,r];case 1:return[2,u.sent()]}})})},e.prototype.startQueuedJob=function(){return Pl(this,void 0,void 0,function(){var i,t,n;return rf(this,function(r){switch(r.label){case 0:if(!this.jobQueue.length)return[2];if(i=this.getAvailableWorker(),!i)return[2];if(t=this.jobQueue.shift(),!t)return[3,4];this.onDebug({message:"Starting job",name:t.name,backlog:this.jobQueue.length,workerThread:i}),n=new Fl(t.name,i),i.onMessage=function(o){return t.onMessage(n,o.type,o.payload)},i.onError=function(o){return t.onError(n,o)},t.onStart(n),r.label=1;case 1:return r.trys.push([1,,3,4]),[4,n.result];case 2:return r.sent(),[3,4];case 3:return this.returnWorkerToQueue(i),[7];case 4:return[2]}})})},e.prototype.returnWorkerToQueue=function(i){var t=this.isDestroyed||!this.reuseWorkers||this.count>this.getMaxConcurrency();t?(i.destroy(),this.count--):this.idleQueue.push(i),this.isDestroyed||this.startQueuedJob()},e.prototype.getAvailableWorker=function(){if(this.idleQueue.length>0)return this.idleQueue.shift()||null;if(this.count<this.getMaxConcurrency()){this.count++;var i=this.name.toLowerCase()+" (#"+this.count+" of "+this.maxConcurrency+")";return new tc({name:i,source:this.source,url:this.url})}return null},e.prototype.getMaxConcurrency=function(){return Sc?this.maxMobileConcurrency:this.maxConcurrency},e}(),Yu=Af,mu=function(){return mu=Object.assign||function(e){for(var i,t=1,n=arguments.length;t<n;t++){i=arguments[t];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r])}return e},mu.apply(this,arguments)},nf=function(e){var i=typeof Symbol=="function"&&Symbol.iterator,t=i&&e[i],n=0;if(t)return t.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(i?"Object is not iterable.":"Symbol.iterator is not defined.")},Cf={maxConcurrency:3,maxMobileConcurrency:1,onDebug:function(){},reuseWorkers:!0},wp=function(){function e(i){this.workerPools=new Map,this.props=mu({},Cf),this.setProps(i),this.workerPools=new Map}return e.isSupported=function(){return tc.isSupported()},e.getWorkerFarm=function(i){return i===void 0&&(i={}),e.workerFarm=e.workerFarm||new e({}),e.workerFarm.setProps(i),e.workerFarm},e.prototype.destroy=function(){var i,t;try{for(var n=nf(this.workerPools.values()),r=n.next();!r.done;r=n.next()){var o=r.value;o.destroy()}}catch(u){i={error:u}}finally{try{r&&!r.done&&(t=n.return)&&t.call(n)}finally{if(i)throw i.error}}},e.prototype.setProps=function(i){var t,n;this.props=mu(mu({},this.props),i);try{for(var r=nf(this.workerPools.values()),o=r.next();!o.done;o=r.next()){var u=o.value;u.setProps(this.getWorkerPoolProps())}}catch(f){t={error:f}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(t)throw t.error}}},e.prototype.getWorkerPool=function(i){var t=i.name,n=i.source,r=i.url,o=this.workerPools.get(t);return o||(o=new Yu({name:t,source:n,url:r}),o.setProps(this.getWorkerPoolProps()),this.workerPools.set(t,o)),o},e.prototype.getWorkerPoolProps=function(){return{maxConcurrency:this.props.maxConcurrency,maxMobileConcurrency:this.props.maxMobileConcurrency,reuseWorkers:this.props.reuseWorkers,onDebug:this.props.onDebug}},e}(),Gf=wp,zp=new Map,Tf=function(){function e(){}return Object.defineProperty(e,"onmessage",{set:function(i){self.onmessage=function(t){if(!!Mf(t)){var n=t.data,r=n.type,o=n.payload;i(r,o)}}},enumerable:!1,configurable:!0}),e.addEventListener=function(i){var t=zp.get(i);t||(t=function(n){if(!!Mf(n)){var r=n.data,o=r.type,u=r.payload;i(o,u)}}),self.addEventListener("message",t)},e.removeEventListener=function(i){var t=zp.get(i);zp.delete(i),self.removeEventListener("message",t)},e.postMessage=function(i,t){if(self){var n={source:"Worker thread",type:i,payload:t},r=qc(t);self.postMessage(n,r)}},e}(),ks=Tf;function Mf(e){var i=e.type,t=e.data;return i==="message"&&t&&typeof t.source=="string"&&t.source==="Main thread"}function Yp(e){return JSON.parse(Up(e))}function Up(e){var i=new Set;return JSON.stringify(e,function(t,n){if(typeof n=="object"&&n!==null){if(i.has(n))try{return JSON.parse(JSON.stringify(n))}catch(r){return}i.add(n)}return n})}function Jo(e){return""+e.name}function Ap(e,i){i===void 0&&(i={});var t=i[e.id]||{},n=e.name+".worker.js",r=t.workerUrl;return i._workerType==="test"&&(r=e.module+"/dist/"+n),r||(r="https://unpkg.com/"+e.module+"/dist/"+n),assert(r),r}var op=function(e,i,t,n){function r(o){return o instanceof t?o:new t(function(u){u(o)})}return new(t||(t=Promise))(function(o,u){function f(I){try{x(n.next(I))}catch(P){u(P)}}function g(I){try{x(n.throw(I))}catch(P){u(P)}}function x(I){I.done?o(I.value):r(I.value).then(f,g)}x((n=n.apply(e,i||[])).next())})},gu=function(e,i){var t={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,r,o,u;return u={next:f(0),throw:f(1),return:f(2)},typeof Symbol=="function"&&(u[Symbol.iterator]=function(){return this}),u;function f(x){return function(I){return g([x,I])}}function g(x){if(n)throw new TypeError("Generator is already executing.");for(;t;)try{if(n=1,r&&(o=x[0]&2?r.return:x[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,x[1])).done)return o;switch(r=0,o&&(x=[x[0]&2,o.value]),x[0]){case 0:case 1:o=x;break;case 4:return t.label++,{value:x[1],done:!1};case 5:t.label++,r=x[1],x=[0];continue;case 7:x=t.ops.pop(),t.trys.pop();continue;default:if(o=t.trys,!(o=o.length>0&&o[o.length-1])&&(x[0]===6||x[0]===2)){t=0;continue}if(x[0]===3&&(!o||x[1]>o[0]&&x[1]<o[3])){t.label=x[1];break}if(x[0]===6&&t.label<o[1]){t.label=o[1],o=x;break}if(o&&t.label<o[2]){t.label=o[2],t.ops.push(x);break}o[2]&&t.ops.pop(),t.trys.pop();continue}x=i.call(e,t)}catch(I){x=[6,I],r=0}finally{n=o=0}if(x[0]&5)throw x[1];return{value:x[0]?x[1]:void 0,done:!0}}};function nl(e,i){return WorkerFarm.isSupported()?e.worker&&(i==null?void 0:i.worker):!1}function il(e,i,t,n){return t===void 0&&(t={}),n===void 0&&(n={}),op(this,void 0,void 0,function(){var r,o,u,f,g,x,I,P;return gu(this,function(G){switch(G.label){case 0:return r=getWorkerName(e),o=getWorkerURL(e,t),u=WorkerFarm.getWorkerFarm(t),f=u.getWorkerPool({name:r,url:o}),g=t.jobName||e.name,[4,f.startJob(g,hp.bind(null,n))];case 1:return x=G.sent(),I=removeNontransferableOptions(t),x.postMessage("process",{input:i,options:I}),[4,x.result];case 2:return P=G.sent(),[2,P.result]}})})}function hp(e,i,t,n){return op(this,void 0,void 0,function(){var r,o,u,f,g,x,I;return gu(this,function(P){switch(P.label){case 0:switch(r=t,r){case"done":return[3,1];case"error":return[3,2];case"process":return[3,3]}return[3,8];case 1:return i.done(n),[3,9];case 2:return i.error(new Error(n.error)),[3,9];case 3:o=n.id,u=n.input,f=n.options,P.label=4;case 4:return P.trys.push([4,6,,7]),e.process?[4,e.process(u,f)]:(i.postMessage("error",{id:o,error:"Worker not set up to process on main thread"}),[2]);case 5:return g=P.sent(),i.postMessage("done",{id:o,result:g}),[3,7];case 6:return x=P.sent(),I=x instanceof Error?x.message:"unknown error",i.postMessage("error",{id:o,error:I}),[3,7];case 7:return[3,9];case 8:console.warn("process-on-worker: unknown message "+t),P.label=9;case 9:return[2]}})})}var wc=function(){function e(){this._values=[],this._settlers=[],this._closed=!1}return e.prototype[Symbol.asyncIterator]=function(){return this},e.prototype.push=function(i){return this.enqueue(i)},e.prototype.enqueue=function(i){if(this._closed)throw new Error("Closed");if(this._settlers.length>0){if(this._values.length>0)throw new Error("Illegal internal state");var t=this._settlers.shift();i instanceof Error?t.reject(i):t.resolve({value:i})}else this._values.push(i)},e.prototype.close=function(){for(;this._settlers.length>0;){var i=this._settlers.shift();i.resolve({done:!0})}this._closed=!0},e.prototype.next=function(){var i=this;if(this._values.length>0){var t=this._values.shift();return t instanceof Error?Promise.reject(t):Promise.resolve({done:!1,value:t})}if(this._closed){if(this._settlers.length>0)throw new Error("Illegal internal state");return Promise.resolve({done:!0,value:void 0})}return new Promise(function(n,r){i._settlers.push({resolve:n,reject:r})})},e}(),Zp=wc,jp=function(e,i,t,n){function r(o){return o instanceof t?o:new t(function(u){u(o)})}return new(t||(t=Promise))(function(o,u){function f(I){try{x(n.next(I))}catch(P){u(P)}}function g(I){try{x(n.throw(I))}catch(P){u(P)}}function x(I){I.done?o(I.value):r(I.value).then(f,g)}x((n=n.apply(e,i||[])).next())})},rc=function(e,i){var t={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,r,o,u;return u={next:f(0),throw:f(1),return:f(2)},typeof Symbol=="function"&&(u[Symbol.iterator]=function(){return this}),u;function f(x){return function(I){return g([x,I])}}function g(x){if(n)throw new TypeError("Generator is already executing.");for(;t;)try{if(n=1,r&&(o=x[0]&2?r.return:x[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,x[1])).done)return o;switch(r=0,o&&(x=[x[0]&2,o.value]),x[0]){case 0:case 1:o=x;break;case 4:return t.label++,{value:x[1],done:!1};case 5:t.label++,r=x[1],x=[0];continue;case 7:x=t.ops.pop(),t.trys.pop();continue;default:if(o=t.trys,!(o=o.length>0&&o[o.length-1])&&(x[0]===6||x[0]===2)){t=0;continue}if(x[0]===3&&(!o||x[1]>o[0]&&x[1]<o[3])){t.label=x[1];break}if(x[0]===6&&t.label<o[1]){t.label=o[1],o=x;break}if(o&&t.label<o[2]){t.label=o[2],t.ops.push(x);break}o[2]&&t.ops.pop(),t.trys.pop();continue}x=i.call(e,t)}catch(I){x=[6,I],r=0}finally{n=o=0}if(x[0]&5)throw x[1];return{value:x[0]?x[1]:void 0,done:!0}}},dp=function(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=e[Symbol.asyncIterator],t;return i?i.call(e):(e=typeof __values=="function"?__values(e):e[Symbol.iterator](),t={},n("next"),n("throw"),n("return"),t[Symbol.asyncIterator]=function(){return this},t);function n(o){t[o]=e[o]&&function(u){return new Promise(function(f,g){u=e[o](u),r(f,g,u.done,u.value)})}}function r(o,u,f,g){Promise.resolve(g).then(function(x){o({value:x,done:f})},u)}},oh=0,Ms,kl;function Bc(e,i){var t=this;if(typeof self!="undefined"){var n={process:vp};ks.onmessage=function(r,o){return jp(t,void 0,void 0,function(){var u,f,g,x,I,P,G,$,Ee,Se,Re;return rc(this,function(Ye){switch(Ye.label){case 0:switch(Ye.trys.push([0,19,,20]),u=r,u){case"process":return[3,1];case"process-in-batches":return[3,3];case"input-batch":return[3,16];case"input-done":return[3,17]}return[3,18];case 1:if(!e)throw new Error("Worker does not support atomic processing");return[4,e(o.input,o.options||{},n)];case 2:return f=Ye.sent(),ks.postMessage("done",{result:f}),[3,18];case 3:if(!i)throw new Error("Worker does not support batched processing");Ms=new Zp,kl=o.options||{},g=i(Ms,kl,n),Ye.label=4;case 4:Ye.trys.push([4,9,10,15]),x=dp(g),Ye.label=5;case 5:return[4,x.next()];case 6:if(I=Ye.sent(),!!I.done)return[3,8];P=I.value,ks.postMessage("output-batch",{result:P}),Ye.label=7;case 7:return[3,5];case 8:return[3,15];case 9:return G=Ye.sent(),Se={error:G},[3,15];case 10:return Ye.trys.push([10,,13,14]),I&&!I.done&&(Re=x.return)?[4,Re.call(x)]:[3,12];case 11:Ye.sent(),Ye.label=12;case 12:return[3,14];case 13:if(Se)throw Se.error;return[7];case 14:return[7];case 15:return ks.postMessage("done",{}),[3,18];case 16:return Ms.push(o.input),[3,18];case 17:return Ms.close(),[3,18];case 18:return[3,20];case 19:return $=Ye.sent(),Ee=$ instanceof Error?$.message:"",ks.postMessage("error",{error:Ee}),[3,20];case 20:return[2]}})})}}}function vp(e,i){return i===void 0&&(i={}),new Promise(function(t,n){var r=oh++,o=function(f,g){if(g.id===r)switch(f){case"done":ks.removeEventListener(o),t(g.result);break;case"error":ks.removeEventListener(o),n(g.error);break;default:}};ks.addEventListener(o);var u={id:r,input:e,options:i};ks.postMessage("process",u)})}var Hf=function(e,i,t,n){function r(o){return o instanceof t?o:new t(function(u){u(o)})}return new(t||(t=Promise))(function(o,u){function f(I){try{x(n.next(I))}catch(P){u(P)}}function g(I){try{x(n.throw(I))}catch(P){u(P)}}function x(I){I.done?o(I.value):r(I.value).then(f,g)}x((n=n.apply(e,i||[])).next())})},mp=function(e,i){var t={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,r,o,u;return u={next:f(0),throw:f(1),return:f(2)},typeof Symbol=="function"&&(u[Symbol.iterator]=function(){return this}),u;function f(x){return function(I){return g([x,I])}}function g(x){if(n)throw new TypeError("Generator is already executing.");for(;t;)try{if(n=1,r&&(o=x[0]&2?r.return:x[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,x[1])).done)return o;switch(r=0,o&&(x=[x[0]&2,o.value]),x[0]){case 0:case 1:o=x;break;case 4:return t.label++,{value:x[1],done:!1};case 5:t.label++,r=x[1],x=[0];continue;case 7:x=t.ops.pop(),t.trys.pop();continue;default:if(o=t.trys,!(o=o.length>0&&o[o.length-1])&&(x[0]===6||x[0]===2)){t=0;continue}if(x[0]===3&&(!o||x[1]>o[0]&&x[1]<o[3])){t.label=x[1];break}if(x[0]===6&&t.label<o[1]){t.label=o[1],o=x;break}if(o&&t.label<o[2]){t.label=o[2],t.ops.push(x);break}o[2]&&t.ops.pop(),t.trys.pop();continue}x=i.call(e,t)}catch(I){x=[6,I],r=0}finally{n=o=0}if(x[0]&5)throw x[1];return{value:x[0]?x[1]:void 0,done:!0}}},gp={};function Vp(e,i,t){return i===void 0&&(i=null),t===void 0&&(t={}),Hf(this,void 0,void 0,function(){return mp(this,function(n){switch(n.label){case 0:return i&&(e=If(e,i,t)),gp[e]=gp[e]||Of(e),[4,gp[e]];case 1:return[2,n.sent()]}})})}function If(e,i,t){if(e.startsWith("http"))return e;var n=t.modules||{};return n[e]?n[e]:t.CDN?(assert(t.CDN.startsWith("http")),t.CDN+"/"+i+"/dist/libs/"+e):isWorker?"../src/libs/"+e:"modules/"+i+"/src/libs/"+e}function Of(e){return Hf(this,void 0,void 0,function(){var i,t,n;return mp(this,function(r){switch(r.label){case 0:return e.endsWith("wasm")?[4,fetch(e)]:[3,3];case 1:return i=r.sent(),[4,i.arrayBuffer()];case 2:return[2,r.sent()];case 3:return isWorker?[2,importScripts(e)]:[4,fetch(e)];case 4:return t=r.sent(),[4,t.text()];case 5:return n=r.sent(),[2,af(n,e)]}})})}function af(e,i){if(isWorker)return eval.call(global,e),null;var t=document.createElement("script");t.id=i;try{t.appendChild(document.createTextNode(e))}catch(n){t.text=e}return document.body.appendChild(t),null}var sh="0.0.3",zc={id:"null",name:"null",module:"web-worker-helper",options:{}};function yp(e){var i=e.color;return!i||!i.length?[1,1,1,1]:i}function df(e,i,t){return t.length===2?[t[0],t[1],0]:[t[0],t[1],t[2]]}function _p(e){var i=e.filter;return i?[1]:[0]}function Rf(e,i){return[i]}var xp=c(75734),hl=c.n(xp),He=c(67519),Au=1e-6,yl=typeof Float32Array!="undefined"?Float32Array:Array,bp=Math.random;function Kp(e){yl=e}var Ku=Math.PI/180;function Ac(e){return e*Ku}function kh(e,i){return Math.abs(e-i)<=Au*Math.max(1,Math.abs(e),Math.abs(i))}Math.hypot||(Math.hypot=function(){for(var e=0,i=arguments.length;i--;)e+=arguments[i]*arguments[i];return Math.sqrt(e)});function ls(){var e=new yl(2);return yl!=Float32Array&&(e[0]=0,e[1]=0),e}function uh(e){var i=new glMatrix.ARRAY_TYPE(2);return i[0]=e[0],i[1]=e[1],i}function Pf(e,i){var t=new yl(2);return t[0]=e,t[1]=i,t}function kf(e,i){return e[0]=i[0],e[1]=i[1],e}function Uc(e,i,t){return e[0]=i,e[1]=t,e}function al(e,i,t){return e[0]=i[0]+t[0],e[1]=i[1]+t[1],e}function Lf(e,i,t){return e[0]=i[0]-t[0],e[1]=i[1]-t[1],e}function Wf(e,i,t){return e[0]=i[0]*t[0],e[1]=i[1]*t[1],e}function pc(e,i,t){return e[0]=i[0]/t[0],e[1]=i[1]/t[1],e}function Uh(e,i){return e[0]=Math.ceil(i[0]),e[1]=Math.ceil(i[1]),e}function Zh(e,i){return e[0]=Math.floor(i[0]),e[1]=Math.floor(i[1]),e}function Df(e,i,t){return e[0]=Math.min(i[0],t[0]),e[1]=Math.min(i[1],t[1]),e}function vf(e,i,t){return e[0]=Math.max(i[0],t[0]),e[1]=Math.max(i[1],t[1]),e}function Ep(e,i){return e[0]=Math.round(i[0]),e[1]=Math.round(i[1]),e}function H(e,i,t){return e[0]=i[0]*t,e[1]=i[1]*t,e}function ue(e,i,t,n){return e[0]=i[0]+t[0]*n,e[1]=i[1]+t[1]*n,e}function _e(e,i){var t=i[0]-e[0],n=i[1]-e[1];return Math.hypot(t,n)}function Be(e,i){var t=i[0]-e[0],n=i[1]-e[1];return t*t+n*n}function rt(e){var i=e[0],t=e[1];return Math.hypot(i,t)}function at(e){var i=e[0],t=e[1];return i*i+t*t}function Ue(e,i){return e[0]=-i[0],e[1]=-i[1],e}function Xt(e,i){return e[0]=1/i[0],e[1]=1/i[1],e}function Ot(e,i){var t=i[0],n=i[1],r=t*t+n*n;return r>0&&(r=1/Math.sqrt(r)),e[0]=i[0]*r,e[1]=i[1]*r,e}function vr(e,i){return e[0]*i[0]+e[1]*i[1]}function xn(e,i,t){var n=i[0]*t[1]-i[1]*t[0];return e[0]=e[1]=0,e[2]=n,e}function Pn(e,i,t,n){var r=i[0],o=i[1];return e[0]=r+n*(t[0]-r),e[1]=o+n*(t[1]-o),e}function ti(e,i){i=i||1;var t=glMatrix.RANDOM()*2*Math.PI;return e[0]=Math.cos(t)*i,e[1]=Math.sin(t)*i,e}function Yn(e,i,t){var n=i[0],r=i[1];return e[0]=t[0]*n+t[2]*r,e[1]=t[1]*n+t[3]*r,e}function On(e,i,t){var n=i[0],r=i[1];return e[0]=t[0]*n+t[2]*r+t[4],e[1]=t[1]*n+t[3]*r+t[5],e}function Ni(e,i,t){var n=i[0],r=i[1];return e[0]=t[0]*n+t[3]*r+t[6],e[1]=t[1]*n+t[4]*r+t[7],e}function Bi(e,i,t){var n=i[0],r=i[1];return e[0]=t[0]*n+t[4]*r+t[12],e[1]=t[1]*n+t[5]*r+t[13],e}function ki(e,i,t,n){var r=i[0]-t[0],o=i[1]-t[1],u=Math.sin(n),f=Math.cos(n);return e[0]=r*f-o*u+t[0],e[1]=r*u+o*f+t[1],e}function Gi(e,i){var t=e[0],n=e[1],r=i[0],o=i[1],u=Math.sqrt(t*t+n*n)*Math.sqrt(r*r+o*o),f=u&&(t*r+n*o)/u;return Math.acos(Math.min(Math.max(f,-1),1))}function Di(e){return e[0]=0,e[1]=0,e}function Fi(e){return"vec2("+e[0]+", "+e[1]+")"}function bi(e,i){return e[0]===i[0]&&e[1]===i[1]}function qi(e,i){var t=e[0],n=e[1],r=i[0],o=i[1];return Math.abs(t-r)<=glMatrix.EPSILON*Math.max(1,Math.abs(t),Math.abs(r))&&Math.abs(n-o)<=glMatrix.EPSILON*Math.max(1,Math.abs(n),Math.abs(o))}var di=null,ba=Lf,_a=null,Ya=null,Te=null,Qe=null,pt=null,Vt=function(){var e=ls();return function(i,t,n,r,o,u){var f,g;for(t||(t=2),n||(n=0),r?g=Math.min(r*t+n,i.length):g=i.length,f=n;f<g;f+=t)e[0]=i[f],e[1]=i[f+1],o(e,e,u),i[f]=e[0],i[f+1]=e[1];return i}}(),Sr=ls(),dr=ls(),Ar=ls(),hn=ls(),Tn=ls();function Hn(e,i,t,n,r){al(e,t,n),Ot(e,e),i=Pf(-e[1],e[0]);var o=Pf(-t[1],t[0]);return[r/vr(i,o),i]}function Bn(e,i){return Uc(e,-i[1],i[0])}function bn(e,i,t){return ba(e,i,t),Ot(e,e),e}function En(e,i){return e[0]===i[0]&&e[1]===i[1]}function Mn(e){for(var i=new Map,t=0;t<e.length;t++){var n=e[0].toString()+"-"+e[1].toString();i.get(n)?(e.splice(t,1),t++):i.set(n,n)}return e}var Un=function(){function e(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};(0,Ur.Z)(this,e),(0,He.Z)(this,"lastFlip",-1),(0,He.Z)(this,"miter",Pf(0,0)),(0,He.Z)(this,"started",!1),(0,He.Z)(this,"dash",!1),(0,He.Z)(this,"totalDistance",0),(0,He.Z)(this,"currentIndex",0),this.join=i.join||"miter",this.cap=i.cap||"butt",this.miterLimit=i.miterLimit||10,this.thickness=i.thickness||1,this.dash=i.dash||!1,this.complex={positions:[],indices:[],normals:[],startIndex:0,indexes:[]}}return(0,Jr.Z)(e,[{key:"extrude_gaode2",value:function(t,n){var r=this.complex;if(t.length<=1)return r;this.lastFlip=-1,this.started=!1,this.normal=null,this.totalDistance=0;for(var o=t.length,u=r.startIndex,f=1;f<o;f++){var g,x,I,P=t[f-1];P.push((g=n[f-1][2])!==null&&g!==void 0?g:0);var G=n[f-1],$=t[f];$.push((x=n[f][2])!==null&&x!==void 0?x:0);var Ee=n[f],Se=f<t.length-1?[].concat((0,ie.Z)(t[f+1]),[(I=n[f+1][2])!==null&&I!==void 0?I:0]):null,Re=f<n.length-1?n[f+1]:null,Ye=this.segment_gaode2(r,u,P,$,Se,G,Ee,Re);u+=Ye}if(this.dash)for(var St=0;St<r.positions.length/6;St++)r.positions[St*6+5]=this.totalDistance;return r.startIndex=r.positions.length/6,r}},{key:"simpleExtrude_gaode2",value:function(t,n){var r=this.complex;if(t.length<=1)return r;this.lastFlip=-1,this.started=!1,this.normal=null,this.totalDistance=0;for(var o=t.length,u=r.startIndex,f=1;f<o;f++){var g,x,I,P=t[f-1];P.push((g=n[f-1][2])!==null&&g!==void 0?g:0);var G=n[f-1],$=t[f];$.push((x=n[f][2])!==null&&x!==void 0?x:0);var Ee=n[f],Se=f<t.length-1?[].concat((0,ie.Z)(t[f+1]),[(I=n[f+1][2])!==null&&I!==void 0?I:0]):null,Re=f<n.length-1?n[f+1]:null,Ye=this.simpleSegment(r,u,P,$,Se,G,Ee,Re);u+=Ye}if(this.dash)for(var St=0;St<r.positions.length/6;St++)r.positions[St*6+5]=this.totalDistance;return r.startIndex=r.positions.length/6,r}},{key:"extrude",value:function(t){var n=this.complex;if(t.length<=1)return n;this.lastFlip=-1,this.started=!1,this.normal=null,this.totalDistance=0;for(var r=t.length,o=n.startIndex,u=1;u<r;u++){var f=t[u-1],g=t[u],x=u<t.length-1?t[u+1]:null,I=this.segment(n,o,f,g,x);o+=I}if(this.dash)for(var P=0;P<n.positions.length/6;P++)n.positions[P*6+5]=this.totalDistance;return n.startIndex=n.positions.length/6,n}},{key:"simpleExtrude",value:function(t){var n=this.complex;if(t.length<=1)return n;this.lastFlip=-1,this.started=!1,this.normal=null,this.totalDistance=0;for(var r=t.length,o=n.startIndex,u=1;u<r;u++){var f=t[u-1],g=t[u],x=u<t.length-1?t[u+1]:null,I=this.simpleSegment(n,o,f,g,x);o+=I}if(this.dash)for(var P=0;P<n.positions.length/6;P++)n.positions[P*6+5]=this.totalDistance;return n.startIndex=n.positions.length/6,n}},{key:"segment_gaode2",value:function(t,n,r,o,u,f,g,x){var I=0,P=t.indices,G=t.positions,$=t.normals,Ee=this.cap==="square",Se=this.join==="bevel",Re=xs([g[0],g[1]]),Ye=xs([f[0],f[1]]);bn(Ar,o,r);var St=0;if(this.dash&&(St=this.lineSegmentDistance(Re,Ye),this.totalDistance+=St),this.normal||(this.normal=ls(),Bn(this.normal,Ar)),!this.started)if(this.started=!0,Ee){var vt=ls(),Ut=ls();al(vt,this.normal,Ar),al(Ut,this.normal,Ar),$.push(Ut[0],Ut[1],0),$.push(vt[0],vt[1],0),G.push(r[0],r[1],r[2]|0,this.totalDistance-St,-this.thickness,r[2]|0),this.complex.indexes.push(this.currentIndex),G.push(r[0],r[1],r[2]|0,this.totalDistance-St,this.thickness,r[2]|0),this.complex.indexes.push(this.currentIndex),this.currentIndex++}else this.extrusions(G,$,r,this.normal,this.thickness,this.totalDistance-St);if(P.push(n+0,n+1,n+2),u){En(o,u)&&al(u,o,Ot(u,Lf(u,o,r))),bn(hn,u,o);var on=Hn(Tn,ls(),Ar,hn,this.thickness),dn=(0,Mr.Z)(on,2),vn=dn[0],si=dn[1],ai=vr(Tn,this.normal)<0?-1:1,Hi=Se;if(!Hi&&this.join==="miter"){var wa=vn;wa>this.miterLimit&&(Hi=!0)}Hi?($.push(this.normal[0],this.normal[1],0),$.push(si[0],si[1],0),G.push(o[0],o[1],o[2]|0,this.totalDistance,-this.thickness*ai,o[2]|0),this.complex.indexes.push(this.currentIndex),G.push(o[0],o[1],o[2]|0,this.totalDistance,this.thickness*ai,o[2]|0),this.complex.indexes.push(this.currentIndex),this.currentIndex++,P.push.apply(P,(0,ie.Z)(this.lastFlip!==-ai?[n,n+2,n+3]:[n+2,n+1,n+3])),P.push(n+2,n+3,n+4),Bn(Sr,hn),kf(this.normal,Sr),$.push(this.normal[0],this.normal[1],0),G.push(o[0],o[1],o[2]|0,this.totalDistance,-this.thickness*ai,o[2]|0),this.complex.indexes.push(this.currentIndex),this.currentIndex++,I+=3):(this.extrusions(G,$,o,si,vn,this.totalDistance),P.push.apply(P,(0,ie.Z)(this.lastFlip===1?[n,n+2,n+3]:[n+2,n+1,n+3])),ai=-1,kf(this.normal,si),I+=2),this.lastFlip=ai}else{if(Bn(this.normal,Ar),Ee){var Kt=ls(),Tr=ls();ba(Tr,Ar,this.normal),al(Kt,Ar,this.normal),$.push(Tr[0],Tr[1],0),$.push(Kt[0],Kt[1],0),G.push(o[0],o[1],o[2]|0,this.totalDistance,this.thickness,o[2]|0),this.complex.indexes.push(this.currentIndex),G.push(o[0],o[1],o[2]|0,this.totalDistance,this.thickness,o[2]|0),this.complex.indexes.push(this.currentIndex),this.currentIndex++}else this.extrusions(G,$,o,this.normal,this.thickness,this.totalDistance);P.push.apply(P,(0,ie.Z)(this.lastFlip===1?[n,n+2,n+3]:[n+2,n+1,n+3])),I+=2}return I}},{key:"simpleSegment",value:function(t,n,r,o,u){var f=0,g=t.indices,x=t.positions,I=t.normals,P=xs([o[0],o[1]]),G=xs([r[0],r[1]]);bn(Ar,P,G);var $=0;if(this.dash&&($=this.lineSegmentDistance(P,G),this.totalDistance+=$),this.normal||(this.normal=ls(),Bn(this.normal,Ar)),this.started||(this.started=!0,this.extrusions(x,I,r,this.normal,this.thickness,this.totalDistance-$)),g.push(n+0,n+1,n+2),!u)Bn(this.normal,Ar),this.extrusions(x,I,o,this.normal,this.thickness,this.totalDistance),g.push.apply(g,(0,ie.Z)(this.lastFlip===1?[n,n+2,n+3]:[n+2,n+1,n+3])),f+=2;else{var Ee=xs([u[0],u[1]]);En(P,Ee)&&al(Ee,P,Ot(Ee,Lf(Ee,P,G))),bn(hn,Ee,P);var Se=Hn(Tn,ls(),Ar,hn,this.thickness),Re=(0,Mr.Z)(Se,2),Ye=Re[0],St=Re[1],vt=vr(Tn,this.normal)<0?-1:1;this.extrusions(x,I,o,St,Ye,this.totalDistance),g.push.apply(g,(0,ie.Z)(this.lastFlip===1?[n,n+2,n+3]:[n+2,n+1,n+3])),vt=-1,kf(this.normal,St),f+=2,this.lastFlip=vt}return f}},{key:"segment",value:function(t,n,r,o,u){var f=0,g=t.indices,x=t.positions,I=t.normals,P=this.cap==="square",G=this.join==="bevel",$=xs([o[0],o[1]]),Ee=xs([r[0],r[1]]);bn(Ar,$,Ee);var Se=0;if(this.dash&&(Se=this.lineSegmentDistance($,Ee),this.totalDistance+=Se),this.normal||(this.normal=ls(),Bn(this.normal,Ar)),!this.started)if(this.started=!0,P){var Re=ls(),Ye=ls();al(Re,this.normal,Ar),al(Ye,this.normal,Ar),I.push(Ye[0],Ye[1],0),I.push(Re[0],Re[1],0),x.push(r[0],r[1],r[2]|0,this.totalDistance-Se,-this.thickness,r[2]|0),this.complex.indexes.push(this.currentIndex),x.push(r[0],r[1],r[2]|0,this.totalDistance-Se,this.thickness,r[2]|0),this.complex.indexes.push(this.currentIndex),this.currentIndex++}else this.extrusions(x,I,r,this.normal,this.thickness,this.totalDistance-Se);if(g.push(n+0,n+1,n+2),u){var Ut=xs([u[0],u[1]]);En($,Ut)&&al(Ut,$,Ot(Ut,Lf(Ut,$,Ee))),bn(hn,Ut,$);var Kt=Hn(Tn,ls(),Ar,hn,this.thickness),Tr=(0,Mr.Z)(Kt,2),on=Tr[0],dn=Tr[1],vn=vr(Tn,this.normal)<0?-1:1,si=G;if(!si&&this.join==="miter"){var ai=on;ai>this.miterLimit&&(si=!0)}si?(I.push(this.normal[0],this.normal[1],0),I.push(dn[0],dn[1],0),x.push(o[0],o[1],o[2]|0,this.totalDistance,-this.thickness*vn,o[2]|0),this.complex.indexes.push(this.currentIndex),x.push(o[0],o[1],o[2]|0,this.totalDistance,this.thickness*vn,o[2]|0),this.complex.indexes.push(this.currentIndex),this.currentIndex++,g.push.apply(g,(0,ie.Z)(this.lastFlip!==-vn?[n,n+2,n+3]:[n+2,n+1,n+3])),g.push(n+2,n+3,n+4),Bn(Sr,hn),kf(this.normal,Sr),I.push(this.normal[0],this.normal[1],0),x.push(o[0],o[1],o[2]|0,this.totalDistance,-this.thickness*vn,o[2]|0),this.complex.indexes.push(this.currentIndex),this.currentIndex++,f+=3):(this.extrusions(x,I,o,dn,on,this.totalDistance),g.push.apply(g,(0,ie.Z)(this.lastFlip===1?[n,n+2,n+3]:[n+2,n+1,n+3])),vn=-1,kf(this.normal,dn),f+=2),this.lastFlip=vn}else{if(Bn(this.normal,Ar),P){var St=ls(),vt=ls();ba(vt,Ar,this.normal),al(St,Ar,this.normal),I.push(vt[0],vt[1],0),I.push(St[0],St[1],0),x.push(o[0],o[1],o[2]|0,this.totalDistance,this.thickness,o[2]|0),this.complex.indexes.push(this.currentIndex),x.push(o[0],o[1],o[2]|0,this.totalDistance,this.thickness,o[2]|0),this.complex.indexes.push(this.currentIndex),this.currentIndex++}else this.extrusions(x,I,o,this.normal,this.thickness,this.totalDistance);g.push.apply(g,(0,ie.Z)(this.lastFlip===1?[n,n+2,n+3]:[n+2,n+1,n+3])),f+=2}return f}},{key:"extrusions",value:function(t,n,r,o,u,f){n.push(o[0],o[1],0),n.push(o[0],o[1],0),t.push(r[0],r[1],r[2]|0,f,-u,r[2]|0),this.complex.indexes.push(this.currentIndex),t.push(r[0],r[1],r[2]|0,f,u,r[2]|0),this.complex.indexes.push(this.currentIndex),this.currentIndex++}},{key:"lineSegmentDistance",value:function(t,n){var r=n[0]-t[0],o=n[1]-t[1];return Math.sqrt(r*r+o*o)}}]),e}();function Nr(e){var i=e.coordinates,t=e.originCoordinates,n=e.version,r=new Un({dash:!0,join:"bevel"});if(n==="GAODE2.x"){var o=i;Array.isArray(o[0][0])||(o=[i]);var u=t;Array.isArray(u[0][0])||(u=[t]);for(var f=0;f<o.length;f++){var g=o[f],x=u[f];r.extrude_gaode2(g,x)}}else{var I=i;I[0]&&!Array.isArray(I[0][0])&&(I=[i]),I.forEach(function(G){r.extrude(G)})}var P=r.complex;return{vertices:P.positions,indices:P.indices,normals:P.normals,indexes:P.indexes,size:6}}function Er(e){var i=d(e.coordinates);return{vertices:[].concat((0,ie.Z)(i),(0,ie.Z)(i),(0,ie.Z)(i),(0,ie.Z)(i)),indices:[0,1,2,2,3,0],size:i.length}}function oi(e){var i=e.coordinates,t=hl().flatten(i),n=t.vertices,r=t.dimensions,o=t.holes;return{indices:hl()(n,o,r),vertices:n,size:r}}var wi=function(){var e=(0,An.Z)(Nt().mark(function i(t){var n,r,o,u,f,g,x,I,P;return Nt().wrap(function($){for(;;)switch($.prev=$.next){case 0:return n=t.descriptors,r=t.features,o=t.enablePicking,u=t.iconMap,f={a_Color:yp,a_Position:df,filter:_p,a_vertexId:Rf,a_PickingColor:function(Se){var Re=Se.id;return o?ru(Re):[0,0,0]},a_DistanceAndIndex:function(Se,Re,Ye,St,vt,Ut){return Ut===void 0?[Ye[3],10]:[Ye[3],Ut]},a_Total_Distance:function(Se,Re,Ye){return[Ye[5]]},a_Size:function(Se){var Re=Se.size,Ye=Re===void 0?1:Re;return Array.isArray(Ye)?[Ye[0],Ye[1]]:[Ye,0]},a_Normal:function(Se,Re,Ye,St,vt){return vt},a_Miter:function(Se,Re,Ye){return[Ye[4]]},a_iconMapUV:function(Se){var Re=Se.texture,Ye=u[Re]||{x:0,y:0},St=Ye.x,vt=Ye.y;return[St,vt]}},g={sizePerElement:0,elements:[]},x=0,I=[],P=3,r.forEach(function(Ee,Se){var Re=Nr(Ee),Ye=Re.indices,St=Re.vertices,vt=Re.normals,Ut=Re.size,Kt=Re.indexes;Ye.forEach(function(vn){I.push(vn+x)}),P=Ut;var Tr=St.length/Ut;g.sizePerElement=P,g.elements.push({featureIdx:Se,vertices:St,normals:vt,offset:x}),x+=Tr;for(var on=function(si){var ai=(vt==null?void 0:vt.slice(si*3,si*3+3))||[],Hi=St.slice(si*Ut,si*Ut+Ut),wa=0;Kt&&Kt[si]!==void 0&&(wa=Kt[si]),n.forEach(function(qa){if(qa&&f[qa.name]){var zs;(zs=qa.buffer.data).push.apply(zs,(0,ie.Z)(f[qa.name](Ee,Se,Hi,si,ai,wa)))}})},dn=0;dn<Tr;dn++)on(dn)}),$.abrupt("return",{descriptors:n,featureLayout:g,indices:I});case 8:case"end":return $.stop()}},i)}));return function(t){return e.apply(this,arguments)}}(),Wn=function(){var e=(0,An.Z)(Nt().mark(function i(t){var n,r,o,u,f,g,x,I,P;return Nt().wrap(function($){for(;;)switch($.prev=$.next){case 0:return n=t.descriptors,r=t.features,o=t.enablePicking,u=t.shape2d,f={a_Color:yp,a_Position:df,filter:_p,a_vertexId:Rf,a_PickingColor:function(Se){var Re=Se.id;return o?ru(Re):[0,0,0]},a_Shape:function(Se){var Re=Se.shape,Ye=Re===void 0?2:Re,St=u.indexOf(Ye);return[St]},a_Extrude:function(Se,Re,Ye,St){var vt=[1,1,0,-1,1,0,-1,-1,0,1,-1,0],Ut=St%4*3;return[vt[Ut],vt[Ut+1],vt[Ut+2]]},a_Size:function(Se){var Re=Se.size,Ye=Re===void 0?5:Re;return Array.isArray(Ye)?[Ye[0]]:[Ye]}},g={sizePerElement:0,elements:[]},x=0,I=[],P=3,r.forEach(function(Ee,Se){var Re=Er(Ee),Ye=Re.indices,St=Re.vertices,vt=Re.normals,Ut=Re.size,Kt=Re.indexes;Ye.forEach(function(vn){I.push(vn+x)}),P=Ut;var Tr=St.length/Ut;g.sizePerElement=P,g.elements.push({featureIdx:Se,vertices:St,normals:vt,offset:x}),x+=Tr;for(var on=function(si){var ai=(vt==null?void 0:vt.slice(si*3,si*3+3))||[],Hi=St.slice(si*Ut,si*Ut+Ut),wa=0;Kt&&Kt[si]!==void 0&&(wa=Kt[si]),n.forEach(function(qa){if(qa&&f[qa.name]){var zs;(zs=qa.buffer.data).push.apply(zs,(0,ie.Z)(f[qa.name](Ee,Se,Hi,si,ai,wa)))}})},dn=0;dn<Tr;dn++)on(dn)}),$.abrupt("return",{descriptors:n,featureLayout:g,indices:I});case 8:case"end":return $.stop()}},i)}));return function(t){return e.apply(this,arguments)}}(),ci=function(){var e=(0,An.Z)(Nt().mark(function i(t){var n,r,o,u,f,g,x,I;return Nt().wrap(function(G){for(;;)switch(G.prev=G.next){case 0:return n=t.descriptors,r=t.features,o=t.enablePicking,u={a_Color:yp,a_Position:df,filter:_p,a_vertexId:Rf,a_PickingColor:function(Ee){var Se=Ee.id;return o?ru(Se):[0,0,0]}},f={sizePerElement:0,elements:[]},g=0,x=[],I=3,r.forEach(function($,Ee){var Se=oi($),Re=Se.indices,Ye=Se.vertices,St=Se.normals,vt=Se.size,Ut=Se.indexes;Re.forEach(function(dn){x.push(dn+g)}),I=vt;var Kt=Ye.length/vt;f.sizePerElement=I,f.elements.push({featureIdx:Ee,vertices:Ye,normals:St,offset:g}),g+=Kt;for(var Tr=function(vn){var si=(St==null?void 0:St.slice(vn*3,vn*3+3))||[],ai=Ye.slice(vn*vt,vn*vt+vt),Hi=0;Ut&&Ut[vn]!==void 0&&(Hi=Ut[vn]),n.forEach(function(wa){if(wa&&u[wa.name]){var qa;(qa=wa.buffer.data).push.apply(qa,(0,ie.Z)(u[wa.name]($,Ee,ai,vn,si,Hi)))}})},on=0;on<Kt;on++)Tr(on)}),G.abrupt("return",{descriptors:n,featureLayout:f,indices:x});case 8:case"end":return G.stop()}},i)}));return function(t){return e.apply(this,arguments)}}(),Mi={pointFill:Wn,line:wi,polygonFill:ci},Xi=(0,oe.Z)({},Mi);function Rn(e){return kn.apply(this,arguments)}function kn(){return kn=(0,An.Z)(Nt().mark(function e(i){var t,n;return Nt().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:if(t=i.workerType,n=i.data,!Xi[t]){o.next=3;break}return o.abrupt("return",Xi[t](n));case 3:return o.abrupt("return",Promise.reject(new Error('Worker with type "'.concat(t,'" non-existent.'))));case 4:case"end":return o.stop()}},e)})),kn.apply(this,arguments)}Bc(Rn);var Si=new Map;function mi(e,i){Si.set(e,i)}function qn(e){var i=Si.get(e);return i}var Ii=`var L7=function(t){"use strict";function e(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function r(){r=function(){return t};var t={},e=Object.prototype,n=e.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",u=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function c(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,r){return t[e]=r}}function f(t,e,r,n){var i=e&&e.prototype instanceof p?e:p,a=Object.create(i.prototype),u=new T(n||[]);return o(a,"_invoke",{value:E(t,r,u)}),a}function l(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=f;var h={};function p(){}function v(){}function d(){}var y={};c(y,a,(function(){return this}));var g=Object.getPrototypeOf,m=g&&g(g(k([])));m&&m!==e&&n.call(m,a)&&(y=m);var x=d.prototype=p.prototype=Object.create(y);function b(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function w(t,e){var r;o(this,"_invoke",{value:function(o,i){function a(){return new e((function(r,a){!function r(o,i,a,u){var s=l(t[o],t,i);if("throw"!==s.type){var c=s.arg,f=c.value;return f&&"object"==typeof f&&n.call(f,"__await")?e.resolve(f.__await).then((function(t){r("next",t,a,u)}),(function(t){r("throw",t,a,u)})):e.resolve(f).then((function(t){c.value=t,a(c)}),(function(t){return r("throw",t,a,u)}))}u(s.arg)}(o,i,r,a)}))}return r=r?r.then(a,a):a()}})}function E(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return I()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var u=A(a,r);if(u){if(u===h)continue;return u}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var s=l(t,e,r);if("normal"===s.type){if(n=r.done?"completed":"suspendedYield",s.arg===h)continue;return{value:s.arg,done:r.done}}"throw"===s.type&&(n="completed",r.method="throw",r.arg=s.arg)}}}function A(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,A(t,e),"throw"===e.method))return h;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return h}var n=l(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,h;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,h):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,h)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function S(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function T(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function k(t){if(t){var e=t[a];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,o=function e(){for(;++r<t.length;)if(n.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:I}}function I(){return{value:void 0,done:!0}}return v.prototype=d,o(x,"constructor",{value:d,configurable:!0}),o(d,"constructor",{value:v,configurable:!0}),v.displayName=c(d,s,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===v||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,d):(t.__proto__=d,c(t,s,"GeneratorFunction")),t.prototype=Object.create(x),t},t.awrap=function(t){return{__await:t}},b(w.prototype),c(w.prototype,u,(function(){return this})),t.AsyncIterator=w,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new w(f(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},b(x),c(x,s,"Generator"),c(x,a,(function(){return this})),c(x,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},t.values=k,T.prototype={constructor:T,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!t)for(var e in this)"t"===e.charAt(0)&&n.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var u=n.call(i,"catchLoc"),s=n.call(i,"finallyLoc");if(u&&s){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(u){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,h):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),h},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),S(r),h}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;S(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:k(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),h}},t}function n(t,e,r,n,o,i,a){try{var u=t[i](a),s=u.value}catch(t){return void r(t)}u.done?e(s):Promise.resolve(s).then(n,o)}function o(t){return function(){var e=this,r=arguments;return new Promise((function(o,i){var a=t.apply(e,r);function u(t){n(a,o,i,u,s,"next",t)}function s(t){n(a,o,i,u,s,"throw",t)}u(void 0)}))}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function u(t,e,r){return e&&a(t.prototype,e),r&&a(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function s(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function c(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&l(t,e)}function f(t){return(f=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function l(t,e){return(l=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function h(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function p(t,e){if(e&&("object"==typeof e||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return h(t)}function v(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=f(t);if(e){var o=f(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return p(this,r)}}function d(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==r)return;var n,o,i=[],a=!0,u=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(t){u=!0,o=t}finally{try{a||null==r.return||r.return()}finally{if(u)throw o}}return i}(t,e)||g(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function y(t){return function(t){if(Array.isArray(t))return m(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||g(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function g(t,e){if(t){if("string"==typeof t)return m(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?m(t,e):void 0}}function m(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var x="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function b(t,e){return t(e={exports:{}},e.exports),e.exports}var w,E,A=function(t){return t&&t.Math==Math&&t},O=A("object"==typeof globalThis&&globalThis)||A("object"==typeof window&&window)||A("object"==typeof self&&self)||A("object"==typeof x&&x)||function(){return this}()||Function("return this")(),S=Object.defineProperty,T=function(t,e){try{S(O,t,{value:e,configurable:!0,writable:!0})}catch(r){O[t]=e}return e},k=O["__core-js_shared__"]||T("__core-js_shared__",{}),I=b((function(t){(t.exports=function(t,e){return k[t]||(k[t]=void 0!==e?e:{})})("versions",[]).push({version:"3.26.1",mode:"global",copyright:"\xA9 2014-2022 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.26.1/LICENSE",source:"https://github.com/zloirock/core-js"})})),j=function(t){try{return!!t()}catch(t){return!0}},P=!j((function(){var t=function(){}.bind();return"function"!=typeof t||t.hasOwnProperty("prototype")})),_=Function.prototype,M=_.call,L=P&&_.bind.bind(M,M),R=P?L:function(t){return function(){return M.apply(t,arguments)}},C=function(t){return null==t},N=TypeError,D=function(t){if(C(t))throw N("Can't call method on "+t);return t},F=Object,W=function(t){return F(D(t))},z=R({}.hasOwnProperty),B=Object.hasOwn||function(t,e){return z(W(t),e)},U=0,G=Math.random(),H=R(1..toString),V=function(t){return"Symbol("+(void 0===t?"":t)+")_"+H(++U+G,36)},q="object"==typeof document&&document.all,Z={all:q,IS_HTMLDDA:void 0===q&&void 0!==q},Y=Z.all,$=Z.IS_HTMLDDA?function(t){return"function"==typeof t||t===Y}:function(t){return"function"==typeof t},K=function(t){return $(t)?t:void 0},Q=function(t,e){return arguments.length<2?K(O[t]):O[t]&&O[t][e]},X=Q("navigator","userAgent")||"",J=O.process,tt=O.Deno,et=J&&J.versions||tt&&tt.version,rt=et&&et.v8;rt&&(E=(w=rt.split("."))[0]>0&&w[0]<4?1:+(w[0]+w[1])),!E&&X&&(!(w=X.match(/Edge\\/(\\d+)/))||w[1]>=74)&&(w=X.match(/Chrome\\/(\\d+)/))&&(E=+w[1]);var nt=E,ot=!!Object.getOwnPropertySymbols&&!j((function(){var t=Symbol();return!String(t)||!(Object(t)instanceof Symbol)||!Symbol.sham&&nt&&nt<41})),it=ot&&!Symbol.sham&&"symbol"==typeof Symbol.iterator,at=I("wks"),ut=O.Symbol,st=ut&&ut.for,ct=it?ut:ut&&ut.withoutSetter||V,ft=function(t){if(!B(at,t)||!ot&&"string"!=typeof at[t]){var e="Symbol."+t;ot&&B(ut,t)?at[t]=ut[t]:at[t]=it&&st?st(e):ct(e)}return at[t]},lt={};lt[ft("toStringTag")]="z";var ht="[object z]"===String(lt),pt=!j((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]})),vt=Z.all,dt=Z.IS_HTMLDDA?function(t){return"object"==typeof t?null!==t:$(t)||t===vt}:function(t){return"object"==typeof t?null!==t:$(t)},yt=O.document,gt=dt(yt)&&dt(yt.createElement),mt=function(t){return gt?yt.createElement(t):{}},xt=!pt&&!j((function(){return 7!=Object.defineProperty(mt("div"),"a",{get:function(){return 7}}).a})),bt=pt&&j((function(){return 42!=Object.defineProperty((function(){}),"prototype",{value:42,writable:!1}).prototype})),wt=String,Et=TypeError,At=function(t){if(dt(t))return t;throw Et(wt(t)+" is not an object")},Ot=Function.prototype.call,St=P?Ot.bind(Ot):function(){return Ot.apply(Ot,arguments)},Tt=R({}.isPrototypeOf),kt=Object,It=it?function(t){return"symbol"==typeof t}:function(t){var e=Q("Symbol");return $(e)&&Tt(e.prototype,kt(t))},jt=String,Pt=function(t){try{return jt(t)}catch(t){return"Object"}},_t=TypeError,Mt=function(t){if($(t))return t;throw _t(Pt(t)+" is not a function")},Lt=function(t,e){var r=t[e];return C(r)?void 0:Mt(r)},Rt=TypeError,Ct=TypeError,Nt=ft("toPrimitive"),Dt=function(t,e){if(!dt(t)||It(t))return t;var r,n=Lt(t,Nt);if(n){if(void 0===e&&(e="default"),r=St(n,t,e),!dt(r)||It(r))return r;throw Ct("Can't convert object to primitive value")}return void 0===e&&(e="number"),function(t,e){var r,n;if("string"===e&&$(r=t.toString)&&!dt(n=St(r,t)))return n;if($(r=t.valueOf)&&!dt(n=St(r,t)))return n;if("string"!==e&&$(r=t.toString)&&!dt(n=St(r,t)))return n;throw Rt("Can't convert object to primitive value")}(t,e)},Ft=function(t){var e=Dt(t,"string");return It(e)?e:e+""},Wt=TypeError,zt=Object.defineProperty,Bt=Object.getOwnPropertyDescriptor,Ut={f:pt?bt?function(t,e,r){if(At(t),e=Ft(e),At(r),"function"==typeof t&&"prototype"===e&&"value"in r&&"writable"in r&&!r.writable){var n=Bt(t,e);n&&n.writable&&(t[e]=r.value,r={configurable:"configurable"in r?r.configurable:n.configurable,enumerable:"enumerable"in r?r.enumerable:n.enumerable,writable:!1})}return zt(t,e,r)}:zt:function(t,e,r){if(At(t),e=Ft(e),At(r),xt)try{return zt(t,e,r)}catch(t){}if("get"in r||"set"in r)throw Wt("Accessors not supported");return"value"in r&&(t[e]=r.value),t}},Gt=Function.prototype,Ht=pt&&Object.getOwnPropertyDescriptor,Vt=B(Gt,"name"),qt={EXISTS:Vt,PROPER:Vt&&"something"===function(){}.name,CONFIGURABLE:Vt&&(!pt||pt&&Ht(Gt,"name").configurable)},Zt=R(Function.toString);$(k.inspectSource)||(k.inspectSource=function(t){return Zt(t)});var Yt,$t,Kt,Qt=k.inspectSource,Xt=O.WeakMap,Jt=$(Xt)&&/native code/.test(String(Xt)),te=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}},ee=pt?function(t,e,r){return Ut.f(t,e,te(1,r))}:function(t,e,r){return t[e]=r,t},re=I("keys"),ne=function(t){return re[t]||(re[t]=V(t))},oe={},ie=O.TypeError,ae=O.WeakMap;if(Jt||k.state){var ue=k.state||(k.state=new ae);ue.get=ue.get,ue.has=ue.has,ue.set=ue.set,Yt=function(t,e){if(ue.has(t))throw ie("Object already initialized");return e.facade=t,ue.set(t,e),e},$t=function(t){return ue.get(t)||{}},Kt=function(t){return ue.has(t)}}else{var se=ne("state");oe[se]=!0,Yt=function(t,e){if(B(t,se))throw ie("Object already initialized");return e.facade=t,ee(t,se,e),e},$t=function(t){return B(t,se)?t[se]:{}},Kt=function(t){return B(t,se)}}var ce={set:Yt,get:$t,has:Kt,enforce:function(t){return Kt(t)?$t(t):Yt(t,{})},getterFor:function(t){return function(e){var r;if(!dt(e)||(r=$t(e)).type!==t)throw ie("Incompatible receiver, "+t+" required");return r}}},fe=b((function(t){var e=qt.CONFIGURABLE,r=ce.enforce,n=ce.get,o=Object.defineProperty,i=pt&&!j((function(){return 8!==o((function(){}),"length",{value:8}).length})),a=String(String).split("String"),u=t.exports=function(t,n,u){"Symbol("===String(n).slice(0,7)&&(n="["+String(n).replace(/^Symbol\\(([^)]*)\\)/,"$1")+"]"),u&&u.getter&&(n="get "+n),u&&u.setter&&(n="set "+n),(!B(t,"name")||e&&t.name!==n)&&(pt?o(t,"name",{value:n,configurable:!0}):t.name=n),i&&u&&B(u,"arity")&&t.length!==u.arity&&o(t,"length",{value:u.arity});try{u&&B(u,"constructor")&&u.constructor?pt&&o(t,"prototype",{writable:!1}):t.prototype&&(t.prototype=void 0)}catch(t){}var s=r(t);return B(s,"source")||(s.source=a.join("string"==typeof n?n:"")),t};Function.prototype.toString=u((function(){return $(this)&&n(this).source||Qt(this)}),"toString")})),le=function(t,e,r,n){n||(n={});var o=n.enumerable,i=void 0!==n.name?n.name:e;if($(r)&&fe(r,i,n),n.global)o?t[e]=r:T(e,r);else{try{n.unsafe?t[e]&&(o=!0):delete t[e]}catch(t){}o?t[e]=r:Ut.f(t,e,{value:r,enumerable:!1,configurable:!n.nonConfigurable,writable:!n.nonWritable})}return t},he=R({}.toString),pe=R("".slice),ve=function(t){return pe(he(t),8,-1)},de=ft("toStringTag"),ye=Object,ge="Arguments"==ve(function(){return arguments}()),me=ht?ve:function(t){var e,r,n;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(r=function(t,e){try{return t[e]}catch(t){}}(e=ye(t),de))?r:ge?ve(e):"Object"==(n=ve(e))&&$(e.callee)?"Arguments":n},xe=ht?{}.toString:function(){return"[object "+me(this)+"]"};ht||le(Object.prototype,"toString",xe,{unsafe:!0});var be={}.propertyIsEnumerable,we=Object.getOwnPropertyDescriptor,Ee={f:we&&!be.call({1:2},1)?function(t){var e=we(this,t);return!!e&&e.enumerable}:be},Ae=Object,Oe=R("".split),Se=j((function(){return!Ae("z").propertyIsEnumerable(0)}))?function(t){return"String"==ve(t)?Oe(t,""):Ae(t)}:Ae,Te=function(t){return Se(D(t))},ke=Object.getOwnPropertyDescriptor,Ie={f:pt?ke:function(t,e){if(t=Te(t),e=Ft(e),xt)try{return ke(t,e)}catch(t){}if(B(t,e))return te(!St(Ee.f,t,e),t[e])}},je=Math.ceil,Pe=Math.floor,_e=Math.trunc||function(t){var e=+t;return(e>0?Pe:je)(e)},Me=function(t){var e=+t;return e!=e||0===e?0:_e(e)},Le=Math.max,Re=Math.min,Ce=function(t,e){var r=Me(t);return r<0?Le(r+e,0):Re(r,e)},Ne=Math.min,De=function(t){return t>0?Ne(Me(t),9007199254740991):0},Fe=function(t){return De(t.length)},We=function(t){return function(e,r,n){var o,i=Te(e),a=Fe(i),u=Ce(n,a);if(t&&r!=r){for(;a>u;)if((o=i[u++])!=o)return!0}else for(;a>u;u++)if((t||u in i)&&i[u]===r)return t||u||0;return!t&&-1}},ze={includes:We(!0),indexOf:We(!1)},Be=ze.indexOf,Ue=R([].push),Ge=function(t,e){var r,n=Te(t),o=0,i=[];for(r in n)!B(oe,r)&&B(n,r)&&Ue(i,r);for(;e.length>o;)B(n,r=e[o++])&&(~Be(i,r)||Ue(i,r));return i},He=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],Ve=He.concat("length","prototype"),qe={f:Object.getOwnPropertyNames||function(t){return Ge(t,Ve)}},Ze={f:Object.getOwnPropertySymbols},Ye=R([].concat),$e=Q("Reflect","ownKeys")||function(t){var e=qe.f(At(t)),r=Ze.f;return r?Ye(e,r(t)):e},Ke=function(t,e,r){for(var n=$e(e),o=Ut.f,i=Ie.f,a=0;a<n.length;a++){var u=n[a];B(t,u)||r&&B(r,u)||o(t,u,i(e,u))}},Qe=/#|\\.prototype\\./,Xe=function(t,e){var r=tr[Je(t)];return r==rr||r!=er&&($(e)?j(e):!!e)},Je=Xe.normalize=function(t){return String(t).replace(Qe,".").toLowerCase()},tr=Xe.data={},er=Xe.NATIVE="N",rr=Xe.POLYFILL="P",nr=Xe,or=Ie.f,ir=function(t,e){var r,n,o,i,a,u=t.target,s=t.global,c=t.stat;if(r=s?O:c?O[u]||T(u,{}):(O[u]||{}).prototype)for(n in e){if(i=e[n],o=t.dontCallGetSet?(a=or(r,n))&&a.value:r[n],!nr(s?n:u+(c?".":"#")+n,t.forced)&&void 0!==o){if(typeof i==typeof o)continue;Ke(i,o)}(t.sham||o&&o.sham)&&ee(i,"sham",!0),le(r,n,i,t)}},ar="process"==ve(O.process),ur=String,sr=TypeError,cr=Object.setPrototypeOf||("__proto__"in{}?function(){var t,e=!1,r={};try{(t=R(Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set))(r,[]),e=r instanceof Array}catch(t){}return function(r,n){return At(r),function(t){if("object"==typeof t||$(t))return t;throw sr("Can't set "+ur(t)+" as a prototype")}(n),e?t(r,n):r.__proto__=n,r}}():void 0),fr=Ut.f,lr=ft("toStringTag"),hr=function(t,e,r){t&&!r&&(t=t.prototype),t&&!B(t,lr)&&fr(t,lr,{configurable:!0,value:e})},pr=ft("species"),vr=function(t){var e=Q(t),r=Ut.f;pt&&e&&!e[pr]&&r(e,pr,{configurable:!0,get:function(){return this}})},dr=TypeError,yr=function(t,e){if(Tt(e,t))return t;throw dr("Incorrect invocation")},gr=function(){},mr=[],xr=Q("Reflect","construct"),br=/^\\s*(?:class|function)\\b/,wr=R(br.exec),Er=!br.exec(gr),Ar=function(t){if(!$(t))return!1;try{return xr(gr,mr,t),!0}catch(t){return!1}},Or=function(t){if(!$(t))return!1;switch(me(t)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return Er||!!wr(br,Qt(t))}catch(t){return!0}};Or.sham=!0;var Sr,Tr,kr,Ir,jr=!xr||j((function(){var t;return Ar(Ar.call)||!Ar(Object)||!Ar((function(){t=!0}))||t}))?Or:Ar,Pr=TypeError,_r=function(t){if(jr(t))return t;throw Pr(Pt(t)+" is not a constructor")},Mr=ft("species"),Lr=function(t,e){var r,n=At(t).constructor;return void 0===n||C(r=At(n)[Mr])?e:_r(r)},Rr=Function.prototype,Cr=Rr.apply,Nr=Rr.call,Dr="object"==typeof Reflect&&Reflect.apply||(P?Nr.bind(Cr):function(){return Nr.apply(Cr,arguments)}),Fr=function(t){if("Function"===ve(t))return R(t)},Wr=Fr(Fr.bind),zr=function(t,e){return Mt(t),void 0===e?t:P?Wr(t,e):function(){return t.apply(e,arguments)}},Br=Q("document","documentElement"),Ur=R([].slice),Gr=TypeError,Hr=function(t,e){if(t<e)throw Gr("Not enough arguments");return t},Vr=/(?:ipad|iphone|ipod).*applewebkit/i.test(X),qr=O.setImmediate,Zr=O.clearImmediate,Yr=O.process,$r=O.Dispatch,Kr=O.Function,Qr=O.MessageChannel,Xr=O.String,Jr=0,tn={};try{Sr=O.location}catch(t){}var en=function(t){if(B(tn,t)){var e=tn[t];delete tn[t],e()}},rn=function(t){return function(){en(t)}},nn=function(t){en(t.data)},on=function(t){O.postMessage(Xr(t),Sr.protocol+"//"+Sr.host)};qr&&Zr||(qr=function(t){Hr(arguments.length,1);var e=$(t)?t:Kr(t),r=Ur(arguments,1);return tn[++Jr]=function(){Dr(e,void 0,r)},Tr(Jr),Jr},Zr=function(t){delete tn[t]},ar?Tr=function(t){Yr.nextTick(rn(t))}:$r&&$r.now?Tr=function(t){$r.now(rn(t))}:Qr&&!Vr?(Ir=(kr=new Qr).port2,kr.port1.onmessage=nn,Tr=zr(Ir.postMessage,Ir)):O.addEventListener&&$(O.postMessage)&&!O.importScripts&&Sr&&"file:"!==Sr.protocol&&!j(on)?(Tr=on,O.addEventListener("message",nn,!1)):Tr="onreadystatechange"in mt("script")?function(t){Br.appendChild(mt("script")).onreadystatechange=function(){Br.removeChild(this),en(t)}}:function(t){setTimeout(rn(t),0)});var an,un,sn,cn,fn,ln,hn,pn,vn={set:qr,clear:Zr},dn=/ipad|iphone|ipod/i.test(X)&&void 0!==O.Pebble,yn=/web0s(?!.*chrome)/i.test(X),gn=Ie.f,mn=vn.set,xn=O.MutationObserver||O.WebKitMutationObserver,bn=O.document,wn=O.process,En=O.Promise,An=gn(O,"queueMicrotask"),On=An&&An.value;On||(an=function(){var t,e;for(ar&&(t=wn.domain)&&t.exit();un;){e=un.fn,un=un.next;try{e()}catch(t){throw un?cn():sn=void 0,t}}sn=void 0,t&&t.enter()},Vr||ar||yn||!xn||!bn?!dn&&En&&En.resolve?((hn=En.resolve(void 0)).constructor=En,pn=zr(hn.then,hn),cn=function(){pn(an)}):ar?cn=function(){wn.nextTick(an)}:(mn=zr(mn,O),cn=function(){mn(an)}):(fn=!0,ln=bn.createTextNode(""),new xn(an).observe(ln,{characterData:!0}),cn=function(){ln.data=fn=!fn}));var Sn=On||function(t){var e={fn:t,next:void 0};sn&&(sn.next=e),un||(un=e,cn()),sn=e},Tn=function(t){try{return{error:!1,value:t()}}catch(t){return{error:!0,value:t}}},kn=function(){this.head=null,this.tail=null};kn.prototype={add:function(t){var e={item:t,next:null};this.head?this.tail.next=e:this.head=e,this.tail=e},get:function(){var t=this.head;if(t)return this.head=t.next,this.tail===t&&(this.tail=null),t.item}};var In,jn,Pn,_n=kn,Mn=O.Promise,Ln="object"==typeof Deno&&Deno&&"object"==typeof Deno.version,Rn=!Ln&&!ar&&"object"==typeof window&&"object"==typeof document,Cn=(Mn&&Mn.prototype,ft("species")),Nn=!1,Dn=$(O.PromiseRejectionEvent),Fn={CONSTRUCTOR:nr("Promise",(function(){var t=Qt(Mn),e=t!==String(Mn);if(!e&&66===nt)return!0;if(!nt||nt<51||!/native code/.test(t)){var r=new Mn((function(t){t(1)})),n=function(t){t((function(){}),(function(){}))};if((r.constructor={})[Cn]=n,!(Nn=r.then((function(){}))instanceof n))return!0}return!e&&(Rn||Ln)&&!Dn})),REJECTION_EVENT:Dn,SUBCLASSING:Nn},Wn=TypeError,zn=function(t){var e,r;this.promise=new t((function(t,n){if(void 0!==e||void 0!==r)throw Wn("Bad Promise constructor");e=t,r=n})),this.resolve=Mt(e),this.reject=Mt(r)},Bn={f:function(t){return new zn(t)}},Un=vn.set,Gn=Fn.CONSTRUCTOR,Hn=Fn.REJECTION_EVENT,Vn=Fn.SUBCLASSING,qn=ce.getterFor("Promise"),Zn=ce.set,Yn=Mn&&Mn.prototype,$n=Mn,Kn=Yn,Qn=O.TypeError,Xn=O.document,Jn=O.process,to=Bn.f,eo=to,ro=!!(Xn&&Xn.createEvent&&O.dispatchEvent),no=function(t){var e;return!(!dt(t)||!$(e=t.then))&&e},oo=function(t,e){var r,n,o,i=e.value,a=1==e.state,u=a?t.ok:t.fail,s=t.resolve,c=t.reject,f=t.domain;try{u?(a||(2===e.rejection&&co(e),e.rejection=1),!0===u?r=i:(f&&f.enter(),r=u(i),f&&(f.exit(),o=!0)),r===t.promise?c(Qn("Promise-chain cycle")):(n=no(r))?St(n,r,s,c):s(r)):c(i)}catch(t){f&&!o&&f.exit(),c(t)}},io=function(t,e){t.notified||(t.notified=!0,Sn((function(){for(var r,n=t.reactions;r=n.get();)oo(r,t);t.notified=!1,e&&!t.rejection&&uo(t)})))},ao=function(t,e,r){var n,o;ro?((n=Xn.createEvent("Event")).promise=e,n.reason=r,n.initEvent(t,!1,!0),O.dispatchEvent(n)):n={promise:e,reason:r},!Hn&&(o=O["on"+t])?o(n):"unhandledrejection"===t&&function(t,e){var r=O.console;r&&r.error&&(1==arguments.length?r.error(t):r.error(t,e))}("Unhandled promise rejection",r)},uo=function(t){St(Un,O,(function(){var e,r=t.facade,n=t.value;if(so(t)&&(e=Tn((function(){ar?Jn.emit("unhandledRejection",n,r):ao("unhandledrejection",r,n)})),t.rejection=ar||so(t)?2:1,e.error))throw e.value}))},so=function(t){return 1!==t.rejection&&!t.parent},co=function(t){St(Un,O,(function(){var e=t.facade;ar?Jn.emit("rejectionHandled",e):ao("rejectionhandled",e,t.value)}))},fo=function(t,e,r){return function(n){t(e,n,r)}},lo=function(t,e,r){t.done||(t.done=!0,r&&(t=r),t.value=e,t.state=2,io(t,!0))},ho=function(t,e,r){if(!t.done){t.done=!0,r&&(t=r);try{if(t.facade===e)throw Qn("Promise can't be resolved itself");var n=no(e);n?Sn((function(){var r={done:!1};try{St(n,e,fo(ho,r,t),fo(lo,r,t))}catch(e){lo(r,e,t)}})):(t.value=e,t.state=1,io(t,!1))}catch(e){lo({done:!1},e,t)}}};if(Gn&&(Kn=($n=function(t){yr(this,Kn),Mt(t),St(In,this);var e=qn(this);try{t(fo(ho,e),fo(lo,e))}catch(t){lo(e,t)}}).prototype,(In=function(t){Zn(this,{type:"Promise",done:!1,notified:!1,parent:!1,reactions:new _n,rejection:!1,state:0,value:void 0})}).prototype=le(Kn,"then",(function(t,e){var r=qn(this),n=to(Lr(this,$n));return r.parent=!0,n.ok=!$(t)||t,n.fail=$(e)&&e,n.domain=ar?Jn.domain:void 0,0==r.state?r.reactions.add(n):Sn((function(){oo(n,r)})),n.promise})),jn=function(){var t=new In,e=qn(t);this.promise=t,this.resolve=fo(ho,e),this.reject=fo(lo,e)},Bn.f=to=function(t){return t===$n||void 0===t?new jn(t):eo(t)},$(Mn)&&Yn!==Object.prototype)){Pn=Yn.then,Vn||le(Yn,"then",(function(t,e){var r=this;return new $n((function(t,e){St(Pn,r,t,e)})).then(t,e)}),{unsafe:!0});try{delete Yn.constructor}catch(t){}cr&&cr(Yn,Kn)}ir({global:!0,constructor:!0,wrap:!0,forced:Gn},{Promise:$n}),hr($n,"Promise",!1),vr("Promise");var po={},vo=ft("iterator"),yo=Array.prototype,go=function(t){return void 0!==t&&(po.Array===t||yo[vo]===t)},mo=ft("iterator"),xo=function(t){if(!C(t))return Lt(t,mo)||Lt(t,"@@iterator")||po[me(t)]},bo=TypeError,wo=function(t,e){var r=arguments.length<2?xo(t):e;if(Mt(r))return At(St(r,t));throw bo(Pt(t)+" is not iterable")},Eo=function(t,e,r){var n,o;At(t);try{if(!(n=Lt(t,"return"))){if("throw"===e)throw r;return r}n=St(n,t)}catch(t){o=!0,n=t}if("throw"===e)throw r;if(o)throw n;return At(n),r},Ao=TypeError,Oo=function(t,e){this.stopped=t,this.result=e},So=Oo.prototype,To=function(t,e,r){var n,o,i,a,u,s,c,f=r&&r.that,l=!(!r||!r.AS_ENTRIES),h=!(!r||!r.IS_RECORD),p=!(!r||!r.IS_ITERATOR),v=!(!r||!r.INTERRUPTED),d=zr(e,f),y=function(t){return n&&Eo(n,"normal",t),new Oo(!0,t)},g=function(t){return l?(At(t),v?d(t[0],t[1],y):d(t[0],t[1])):v?d(t,y):d(t)};if(h)n=t.iterator;else if(p)n=t;else{if(!(o=xo(t)))throw Ao(Pt(t)+" is not iterable");if(go(o)){for(i=0,a=Fe(t);a>i;i++)if((u=g(t[i]))&&Tt(So,u))return u;return new Oo(!1)}n=wo(t,o)}for(s=h?t.next:n.next;!(c=St(s,n)).done;){try{u=g(c.value)}catch(t){Eo(n,"throw",t)}if("object"==typeof u&&u&&Tt(So,u))return u}return new Oo(!1)},ko=ft("iterator"),Io=!1;try{var jo=0,Po={next:function(){return{done:!!jo++}},return:function(){Io=!0}};Po[ko]=function(){return this},Array.from(Po,(function(){throw 2}))}catch(t){}var _o=function(t,e){if(!e&&!Io)return!1;var r=!1;try{var n={};n[ko]=function(){return{next:function(){return{done:r=!0}}}},t(n)}catch(t){}return r},Mo=Fn.CONSTRUCTOR||!_o((function(t){Mn.all(t).then(void 0,(function(){}))}));ir({target:"Promise",stat:!0,forced:Mo},{all:function(t){var e=this,r=Bn.f(e),n=r.resolve,o=r.reject,i=Tn((function(){var r=Mt(e.resolve),i=[],a=0,u=1;To(t,(function(t){var s=a++,c=!1;u++,St(r,e,t).then((function(t){c||(c=!0,i[s]=t,--u||n(i))}),o)})),--u||n(i)}));return i.error&&o(i.value),r.promise}});var Lo=Fn.CONSTRUCTOR,Ro=Mn&&Mn.prototype;if(ir({target:"Promise",proto:!0,forced:Lo,real:!0},{catch:function(t){return this.then(void 0,t)}}),$(Mn)){var Co=Q("Promise").prototype.catch;Ro.catch!==Co&&le(Ro,"catch",Co,{unsafe:!0})}ir({target:"Promise",stat:!0,forced:Mo},{race:function(t){var e=this,r=Bn.f(e),n=r.reject,o=Tn((function(){var o=Mt(e.resolve);To(t,(function(t){St(o,e,t).then(r.resolve,n)}))}));return o.error&&n(o.value),r.promise}}),ir({target:"Promise",stat:!0,forced:Fn.CONSTRUCTOR},{reject:function(t){var e=Bn.f(this);return St(e.reject,void 0,t),e.promise}});var No=Fn.CONSTRUCTOR;Q("Promise");function Do(t,e){if(!t)throw new Error(e||"web worker helper assertion failed.")}ir({target:"Promise",stat:!0,forced:No},{resolve:function(t){return function(t,e){if(At(t),dt(e)&&e.constructor===t)return e;var r=Bn.f(t);return(0,r.resolve)(e),r.promise}(this,t)}});var Fo="undefined"!=typeof window&&void 0!==window.orientation,Wo=function(){function t(t,e){var r=this;this.name=t,this.workerThread=e,this.isRunning=!0,this.resolve=function(){},this.reject=function(){},this.result=new Promise((function(t,e){r.resolve=t,r.reject=e}))}return t.prototype.postMessage=function(t,e){this.workerThread.postMessage({source:"Main thread",type:t,payload:e})},t.prototype.done=function(t){Do(this.isRunning,"WorkerJob isRunning false."),this.isRunning=!1,this.resolve(t)},t.prototype.error=function(t){Do(this.isRunning,"WorkerJob isRunning false."),this.isRunning=!1,this.reject(t)},t}(),zo=new Map;function Bo(t){Do(t.source&&!t.url||!t.source&&t.url);var e=zo.get(t.source||t.url);return e||(t.url&&(e=function(t){if(!t.startsWith("http"))return t;return Uo((e=t,"try {\\n  importScripts('"+e+"');\\n} catch (error) {\\n  console.error(error);\\n  throw error;\\n}"));var e}(t.url),zo.set(t.url,e)),t.source&&(e=Uo(t.source),zo.set(t.source,e))),Do(e),e}function Uo(t){var e=new Blob([t],{type:"application/javascript"});return URL.createObjectURL(e)}function Go(t,e,r){void 0===e&&(e=!0);var n=r||new Set;if(t){if(Ho(t))n.add(t);else if(Ho(t.buffer))n.add(t.buffer);else if(ArrayBuffer.isView(t));else if(e&&"object"==typeof t)for(var o in t)Go(t[o],e,n)}else;return void 0===r?Array.from(n):[]}function Ho(t){return!!t&&(t instanceof ArrayBuffer||("undefined"!=typeof MessagePort&&t instanceof MessagePort||("undefined"!=typeof ImageBitmap&&t instanceof ImageBitmap||"undefined"!=typeof OffscreenCanvas&&t instanceof OffscreenCanvas)))}var Vo=function(){},qo=function(){function t(t){this.terminated=!1,this.loadableURL="";var e=t.name,r=t.source,n=t.url;Do(r||n),this.name=e,this.source=r,this.url=n,this.onMessage=Vo,this.onError=function(t){return console.log(t)},this.worker=this.createBrowserWorker()}return t.isSupported=function(){return"undefined"!=typeof Worker},t.prototype.destroy=function(){this.onMessage=Vo,this.onError=Vo,this.worker.terminate(),this.terminated=!0},Object.defineProperty(t.prototype,"isRunning",{get:function(){return Boolean(this.onMessage)},enumerable:!1,configurable:!0}),t.prototype.postMessage=function(t,e){e=e||Go(t),this.worker.postMessage(t,e)},t.prototype.getErrorFromErrorEvent=function(t){var e="Failed to load ";return e+="worker "+this.name+" from "+this.url+". ",t.message&&(e+=t.message+" in "),t.lineno&&(e+=":"+t.lineno+":"+t.colno),new Error(e)},t.prototype.createBrowserWorker=function(){var t=this;this.loadableURL=Bo({source:this.source,url:this.url});var e=new Worker(this.loadableURL,{name:this.name});return e.onmessage=function(e){e.data?t.onMessage(e.data):t.onError(new Error("No data received"))},e.onerror=function(e){t.onError(t.getErrorFromErrorEvent(e)),t.terminated=!0},e.onmessageerror=function(e){return console.error("worker "+t.name+", message error: "+e)},e},t}(),Zo=self&&self.__assign||function(){return(Zo=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var o in e=arguments[r])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},Yo=self&&self.__awaiter||function(t,e,r,n){return new(r||(r=Promise))((function(o,i){function a(t){try{s(n.next(t))}catch(t){i(t)}}function u(t){try{s(n.throw(t))}catch(t){i(t)}}function s(t){var e;t.done?o(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(a,u)}s((n=n.apply(t,e||[])).next())}))},$o=self&&self.__generator||function(t,e){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function u(i){return function(u){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,u])}}},Ko=function(){function t(t){this.name="unnamed",this.maxConcurrency=1,this.maxMobileConcurrency=1,this.onDebug=function(){},this.reuseWorkers=!0,this.props={},this.jobQueue=[],this.idleQueue=[],this.count=0,this.isDestroyed=!1,this.source=t.source,this.url=t.url,this.setProps(t)}return t.prototype.destroy=function(){this.idleQueue.forEach((function(t){return t.destroy()})),this.isDestroyed=!0},t.prototype.setProps=function(t){this.props=Zo(Zo({},this.props),t),void 0!==t.name&&(this.name=t.name),void 0!==t.maxConcurrency&&(this.maxConcurrency=t.maxConcurrency),void 0!==t.maxMobileConcurrency&&(this.maxMobileConcurrency=t.maxMobileConcurrency),void 0!==t.reuseWorkers&&(this.reuseWorkers=t.reuseWorkers),void 0!==t.onDebug&&(this.onDebug=t.onDebug)},t.prototype.startJob=function(t,e,r){return void 0===e&&(e=function(t,e,r){return t.done(r)}),void 0===r&&(r=function(t,e){return t.error(e)}),Yo(this,void 0,void 0,(function(){var n,o=this;return $o(this,(function(i){switch(i.label){case 0:return n=new Promise((function(n){return o.jobQueue.push({name:t,onMessage:e,onError:r,onStart:n}),o})),this.startQueuedJob(),[4,n];case 1:return[2,i.sent()]}}))}))},t.prototype.startQueuedJob=function(){return Yo(this,void 0,void 0,(function(){var t,e,r;return $o(this,(function(n){switch(n.label){case 0:if(!this.jobQueue.length)return[2];if(!(t=this.getAvailableWorker()))return[2];if(!(e=this.jobQueue.shift()))return[3,4];this.onDebug({message:"Starting job",name:e.name,backlog:this.jobQueue.length,workerThread:t}),r=new Wo(e.name,t),t.onMessage=function(t){return e.onMessage(r,t.type,t.payload)},t.onError=function(t){return e.onError(r,t)},e.onStart(r),n.label=1;case 1:return n.trys.push([1,,3,4]),[4,r.result];case 2:return n.sent(),[3,4];case 3:return this.returnWorkerToQueue(t),[7];case 4:return[2]}}))}))},t.prototype.returnWorkerToQueue=function(t){this.isDestroyed||!this.reuseWorkers||this.count>this.getMaxConcurrency()?(t.destroy(),this.count--):this.idleQueue.push(t),this.isDestroyed||this.startQueuedJob()},t.prototype.getAvailableWorker=function(){if(this.idleQueue.length>0)return this.idleQueue.shift()||null;if(this.count<this.getMaxConcurrency()){this.count++;var t=this.name.toLowerCase()+" (#"+this.count+" of "+this.maxConcurrency+")";return new qo({name:t,source:this.source,url:this.url})}return null},t.prototype.getMaxConcurrency=function(){return Fo?this.maxMobileConcurrency:this.maxConcurrency},t}(),Qo=self&&self.__assign||function(){return(Qo=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var o in e=arguments[r])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},Xo=self&&self.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Jo={maxConcurrency:3,maxMobileConcurrency:1,onDebug:function(){},reuseWorkers:!0},ti=(function(){function t(t){this.workerPools=new Map,this.props=Qo({},Jo),this.setProps(t),this.workerPools=new Map}t.isSupported=function(){return qo.isSupported()},t.getWorkerFarm=function(e){return void 0===e&&(e={}),t.workerFarm=t.workerFarm||new t({}),t.workerFarm.setProps(e),t.workerFarm},t.prototype.destroy=function(){var t,e;try{for(var r=Xo(this.workerPools.values()),n=r.next();!n.done;n=r.next()){n.value.destroy()}}catch(e){t={error:e}}finally{try{n&&!n.done&&(e=r.return)&&e.call(r)}finally{if(t)throw t.error}}},t.prototype.setProps=function(t){var e,r;this.props=Qo(Qo({},this.props),t);try{for(var n=Xo(this.workerPools.values()),o=n.next();!o.done;o=n.next()){o.value.setProps(this.getWorkerPoolProps())}}catch(t){e={error:t}}finally{try{o&&!o.done&&(r=n.return)&&r.call(n)}finally{if(e)throw e.error}}},t.prototype.getWorkerPool=function(t){var e=t.name,r=t.source,n=t.url,o=this.workerPools.get(e);return o||((o=new Ko({name:e,source:r,url:n})).setProps(this.getWorkerPoolProps()),this.workerPools.set(e,o)),o},t.prototype.getWorkerPoolProps=function(){return{maxConcurrency:this.props.maxConcurrency,maxMobileConcurrency:this.props.maxMobileConcurrency,reuseWorkers:this.props.reuseWorkers,onDebug:this.props.onDebug}}}(),new Map),ei=function(){function t(){}return Object.defineProperty(t,"onmessage",{set:function(t){self.onmessage=function(e){if(ri(e)){var r=e.data,n=r.type,o=r.payload;t(n,o)}}},enumerable:!1,configurable:!0}),t.addEventListener=function(t){var e=ti.get(t);e||(e=function(e){if(ri(e)){var r=e.data,n=r.type,o=r.payload;t(n,o)}}),self.addEventListener("message",e)},t.removeEventListener=function(t){var e=ti.get(t);ti.delete(t),self.removeEventListener("message",e)},t.postMessage=function(t,e){if(self){var r={source:"Worker thread",type:t,payload:e},n=Go(e);self.postMessage(r,n)}},t}();function ri(t){var e=t.type,r=t.data;return"message"===e&&r&&"string"==typeof r.source&&"Main thread"===r.source}self&&self.__awaiter,self&&self.__generator;var ni,oi,ii=function(){function t(){this._values=[],this._settlers=[],this._closed=!1}return t.prototype[Symbol.asyncIterator]=function(){return this},t.prototype.push=function(t){return this.enqueue(t)},t.prototype.enqueue=function(t){if(this._closed)throw new Error("Closed");if(this._settlers.length>0){if(this._values.length>0)throw new Error("Illegal internal state");var e=this._settlers.shift();t instanceof Error?e.reject(t):e.resolve({value:t})}else this._values.push(t)},t.prototype.close=function(){for(;this._settlers.length>0;){this._settlers.shift().resolve({done:!0})}this._closed=!0},t.prototype.next=function(){var t=this;if(this._values.length>0){var e=this._values.shift();return e instanceof Error?Promise.reject(e):Promise.resolve({done:!1,value:e})}if(this._closed){if(this._settlers.length>0)throw new Error("Illegal internal state");return Promise.resolve({done:!0,value:void 0})}return new Promise((function(e,r){t._settlers.push({resolve:e,reject:r})}))},t}(),ai=self&&self.__awaiter||function(t,e,r,n){return new(r||(r=Promise))((function(o,i){function a(t){try{s(n.next(t))}catch(t){i(t)}}function u(t){try{s(n.throw(t))}catch(t){i(t)}}function s(t){var e;t.done?o(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(a,u)}s((n=n.apply(t,e||[])).next())}))},ui=self&&self.__generator||function(t,e){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function u(i){return function(u){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,u])}}},si=self&&self.__asyncValues||function(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e,r=t[Symbol.asyncIterator];return r?r.call(t):(t="function"==typeof __values?__values(t):t[Symbol.iterator](),e={},n("next"),n("throw"),n("return"),e[Symbol.asyncIterator]=function(){return this},e);function n(r){e[r]=t[r]&&function(e){return new Promise((function(n,o){(function(t,e,r,n){Promise.resolve(n).then((function(e){t({value:e,done:r})}),e)})(n,o,(e=t[r](e)).done,e.value)}))}}},ci=0;function fi(t,e){var r=this;if("undefined"!=typeof self){var n={process:li};ei.onmessage=function(o,i){return ai(r,void 0,void 0,(function(){var r,a,u,s,c,f,l,h,p,v;return ui(this,(function(d){switch(d.label){case 0:switch(d.trys.push([0,19,,20]),o){case"process":return[3,1];case"process-in-batches":return[3,3];case"input-batch":return[3,16];case"input-done":return[3,17]}return[3,18];case 1:if(!t)throw new Error("Worker does not support atomic processing");return[4,t(i.input,i.options||{},n)];case 2:return r=d.sent(),ei.postMessage("done",{result:r}),[3,18];case 3:if(!e)throw new Error("Worker does not support batched processing");ni=new ii,oi=i.options||{},a=e(ni,oi,n),d.label=4;case 4:d.trys.push([4,9,10,15]),u=si(a),d.label=5;case 5:return[4,u.next()];case 6:if((s=d.sent()).done)return[3,8];c=s.value,ei.postMessage("output-batch",{result:c}),d.label=7;case 7:return[3,5];case 8:return[3,15];case 9:return f=d.sent(),p={error:f},[3,15];case 10:return d.trys.push([10,,13,14]),s&&!s.done&&(v=u.return)?[4,v.call(u)]:[3,12];case 11:d.sent(),d.label=12;case 12:return[3,14];case 13:if(p)throw p.error;return[7];case 14:return[7];case 15:return ei.postMessage("done",{}),[3,18];case 16:return ni.push(i.input),[3,18];case 17:return ni.close(),[3,18];case 18:return[3,20];case 19:return l=d.sent(),h=l instanceof Error?l.message:"",ei.postMessage("error",{error:h}),[3,20];case 20:return[2]}}))}))}}}function li(t,e){return void 0===e&&(e={}),new Promise((function(r,n){var o=ci++,i=function(t,e){if(e.id===o)switch(t){case"done":ei.removeEventListener(i),r(e.result);break;case"error":ei.removeEventListener(i),n(e.error)}};ei.addEventListener(i);var a={id:o,input:t,options:e};ei.postMessage("process",a)}))}self&&self.__awaiter,self&&self.__generator;var hi={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0},pi=mt("span").classList,vi=pi&&pi.constructor&&pi.constructor.prototype,di=vi===Object.prototype?void 0:vi,yi=Array.isArray||function(t){return"Array"==ve(t)},gi=ft("species"),mi=Array,xi=function(t,e){return new(function(t){var e;return yi(t)&&(e=t.constructor,(jr(e)&&(e===mi||yi(e.prototype))||dt(e)&&null===(e=e[gi]))&&(e=void 0)),void 0===e?mi:e}(t))(0===e?0:e)},bi=R([].push),wi=function(t){var e=1==t,r=2==t,n=3==t,o=4==t,i=6==t,a=7==t,u=5==t||i;return function(s,c,f,l){for(var h,p,v=W(s),d=Se(v),y=zr(c,f),g=Fe(d),m=0,x=l||xi,b=e?x(s,g):r||a?x(s,0):void 0;g>m;m++)if((u||m in d)&&(p=y(h=d[m],m,v),t))if(e)b[m]=p;else if(p)switch(t){case 3:return!0;case 5:return h;case 6:return m;case 2:bi(b,h)}else switch(t){case 4:return!1;case 7:bi(b,h)}return i?-1:n||o?o:b}},Ei={forEach:wi(0),map:wi(1),filter:wi(2),some:wi(3),every:wi(4),find:wi(5),findIndex:wi(6),filterReject:wi(7)},Ai=function(t,e){var r=[][t];return!!r&&j((function(){r.call(null,e||function(){return 1},1)}))},Oi=Ei.forEach,Si=Ai("forEach")?[].forEach:function(t){return Oi(this,t,arguments.length>1?arguments[1]:void 0)},Ti=function(t){if(t&&t.forEach!==Si)try{ee(t,"forEach",Si)}catch(e){t.forEach=Si}};for(var ki in hi)hi[ki]&&Ti(O[ki]&&O[ki].prototype);Ti(di);var Ii=function(t,e,r){var n=Ft(e);n in t?Ut.f(t,n,te(0,r)):t[n]=r},ji=ft("species"),Pi=function(t){return nt>=51||!j((function(){var e=[];return(e.constructor={})[ji]=function(){return{foo:1}},1!==e[t](Boolean).foo}))},_i=Pi("slice"),Mi=ft("species"),Li=Array,Ri=Math.max;ir({target:"Array",proto:!0,forced:!_i},{slice:function(t,e){var r,n,o,i=Te(this),a=Fe(i),u=Ce(t,a),s=Ce(void 0===e?a:e,a);if(yi(i)&&(r=i.constructor,(jr(r)&&(r===Li||yi(r.prototype))||dt(r)&&null===(r=r[Mi]))&&(r=void 0),r===Li||void 0===r))return Ur(i,u,s);for(n=new(void 0===r?Li:r)(Ri(s-u,0)),o=0;u<s;u++,o++)u in i&&Ii(n,o,i[u]);return n.length=o,n}});var Ci=qt.EXISTS,Ni=Ut.f,Di=Function.prototype,Fi=R(Di.toString),Wi=/function\\b(?:\\s|\\/\\*[\\S\\s]*?\\*\\/|\\/\\/[^\\n\\r]*[\\n\\r]+)*([^\\s(/]*)/,zi=R(Wi.exec);pt&&!Ci&&Ni(Di,"name",{configurable:!0,get:function(){try{return zi(Wi,Fi(this))[1]}catch(t){return""}}});var Bi=Ei.map,Ui=Pi("map");ir({target:"Array",proto:!0,forced:!Ui},{map:function(t){return Bi(this,t,arguments.length>1?arguments[1]:void 0)}});var Gi,Hi=Object.keys||function(t){return Ge(t,He)},Vi={f:pt&&!bt?Object.defineProperties:function(t,e){At(t);for(var r,n=Te(e),o=Hi(e),i=o.length,a=0;i>a;)Ut.f(t,r=o[a++],n[r]);return t}},qi=ne("IE_PROTO"),Zi=function(){},Yi=function(t){return"<script>"+t+"<\\/script>"},$i=function(t){t.write(Yi("")),t.close();var e=t.parentWindow.Object;return t=null,e},Ki=function(){try{Gi=new ActiveXObject("htmlfile")}catch(t){}var t,e;Ki="undefined"!=typeof document?document.domain&&Gi?$i(Gi):((e=mt("iframe")).style.display="none",Br.appendChild(e),e.src=String("javascript:"),(t=e.contentWindow.document).open(),t.write(Yi("document.F=Object")),t.close(),t.F):$i(Gi);for(var r=He.length;r--;)delete Ki.prototype[He[r]];return Ki()};oe[qi]=!0;var Qi=Object.create||function(t,e){var r;return null!==t?(Zi.prototype=At(t),r=new Zi,Zi.prototype=null,r[qi]=t):r=Ki(),void 0===e?r:Vi.f(r,e)},Xi=Ut.f,Ji=ft("unscopables"),ta=Array.prototype;null==ta[Ji]&&Xi(ta,Ji,{configurable:!0,value:Qi(null)});var ea,ra,na,oa=function(t){ta[Ji][t]=!0},ia=!j((function(){function t(){}return t.prototype.constructor=null,Object.getPrototypeOf(new t)!==t.prototype})),aa=ne("IE_PROTO"),ua=Object,sa=ua.prototype,ca=ia?ua.getPrototypeOf:function(t){var e=W(t);if(B(e,aa))return e[aa];var r=e.constructor;return $(r)&&e instanceof r?r.prototype:e instanceof ua?sa:null},fa=ft("iterator"),la=!1;[].keys&&("next"in(na=[].keys())?(ra=ca(ca(na)))!==Object.prototype&&(ea=ra):la=!0),(!dt(ea)||j((function(){var t={};return ea[fa].call(t)!==t})))&&(ea={}),$(ea[fa])||le(ea,fa,(function(){return this}));var ha={IteratorPrototype:ea,BUGGY_SAFARI_ITERATORS:la},pa=ha.IteratorPrototype,va=function(){return this},da=qt.PROPER,ya=qt.CONFIGURABLE,ga=ha.IteratorPrototype,ma=ha.BUGGY_SAFARI_ITERATORS,xa=ft("iterator"),ba=function(){return this},wa=function(t,e,r,n,o,i,a){!function(t,e,r,n){var o=e+" Iterator";t.prototype=Qi(pa,{next:te(+!n,r)}),hr(t,o,!1),po[o]=va}(r,e,n);var u,s,c,f=function(t){if(t===o&&d)return d;if(!ma&&t in p)return p[t];switch(t){case"keys":case"values":case"entries":return function(){return new r(this,t)}}return function(){return new r(this)}},l=e+" Iterator",h=!1,p=t.prototype,v=p[xa]||p["@@iterator"]||o&&p[o],d=!ma&&v||f(o),y="Array"==e&&p.entries||v;if(y&&(u=ca(y.call(new t)))!==Object.prototype&&u.next&&(ca(u)!==ga&&(cr?cr(u,ga):$(u[xa])||le(u,xa,ba)),hr(u,l,!0)),da&&"values"==o&&v&&"values"!==v.name&&(ya?ee(p,"name","values"):(h=!0,d=function(){return St(v,this)})),o)if(s={values:f("values"),keys:i?d:f("keys"),entries:f("entries")},a)for(c in s)(ma||h||!(c in p))&&le(p,c,s[c]);else ir({target:e,proto:!0,forced:ma||h},s);return p[xa]!==d&&le(p,xa,d,{name:o}),po[e]=d,s},Ea=function(t,e){return{value:t,done:e}},Aa=Ut.f,Oa=ce.set,Sa=ce.getterFor("Array Iterator"),Ta=wa(Array,"Array",(function(t,e){Oa(this,{type:"Array Iterator",target:Te(t),index:0,kind:e})}),(function(){var t=Sa(this),e=t.target,r=t.kind,n=t.index++;return!e||n>=e.length?(t.target=void 0,Ea(void 0,!0)):Ea("keys"==r?n:"values"==r?e[n]:[n,e[n]],!1)}),"values"),ka=po.Arguments=po.Array;if(oa("keys"),oa("values"),oa("entries"),pt&&"values"!==ka.name)try{Aa(ka,"name",{value:"values"})}catch(t){}var Ia,ja,Pa,_a="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof DataView,Ma=Ut.f,La=ce.enforce,Ra=ce.get,Ca=O.Int8Array,Na=Ca&&Ca.prototype,Da=O.Uint8ClampedArray,Fa=Da&&Da.prototype,Wa=Ca&&ca(Ca),za=Na&&ca(Na),Ba=Object.prototype,Ua=O.TypeError,Ga=ft("toStringTag"),Ha=V("TYPED_ARRAY_TAG"),Va=_a&&!!cr&&"Opera"!==me(O.opera),qa=!1,Za={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8},Ya={BigInt64Array:8,BigUint64Array:8},$a=function(t){var e=ca(t);if(dt(e)){var r=Ra(e);return r&&B(r,"TypedArrayConstructor")?r.TypedArrayConstructor:$a(e)}},Ka=function(t){if(!dt(t))return!1;var e=me(t);return B(Za,e)||B(Ya,e)};for(Ia in Za)(Pa=(ja=O[Ia])&&ja.prototype)?La(Pa).TypedArrayConstructor=ja:Va=!1;for(Ia in Ya)(Pa=(ja=O[Ia])&&ja.prototype)&&(La(Pa).TypedArrayConstructor=ja);if((!Va||!$(Wa)||Wa===Function.prototype)&&(Wa=function(){throw Ua("Incorrect invocation")},Va))for(Ia in Za)O[Ia]&&cr(O[Ia],Wa);if((!Va||!za||za===Ba)&&(za=Wa.prototype,Va))for(Ia in Za)O[Ia]&&cr(O[Ia].prototype,za);if(Va&&ca(Fa)!==za&&cr(Fa,za),pt&&!B(za,Ga))for(Ia in qa=!0,Ma(za,Ga,{get:function(){return dt(this)?this[Ha]:void 0}}),Za)O[Ia]&&ee(O[Ia],Ha,Ia);var Qa={NATIVE_ARRAY_BUFFER_VIEWS:Va,TYPED_ARRAY_TAG:qa&&Ha,aTypedArray:function(t){if(Ka(t))return t;throw Ua("Target is not a typed array")},aTypedArrayConstructor:function(t){if($(t)&&(!cr||Tt(Wa,t)))return t;throw Ua(Pt(t)+" is not a typed array constructor")},exportTypedArrayMethod:function(t,e,r,n){if(pt){if(r)for(var o in Za){var i=O[o];if(i&&B(i.prototype,t))try{delete i.prototype[t]}catch(r){try{i.prototype[t]=e}catch(t){}}}za[t]&&!r||le(za,t,r?e:Va&&Na[t]||e,n)}},exportTypedArrayStaticMethod:function(t,e,r){var n,o;if(pt){if(cr){if(r)for(n in Za)if((o=O[n])&&B(o,t))try{delete o[t]}catch(t){}if(Wa[t]&&!r)return;try{return le(Wa,t,r?e:Va&&Wa[t]||e)}catch(t){}}for(n in Za)!(o=O[n])||o[t]&&!r||le(o,t,e)}},getTypedArrayConstructor:$a,isView:function(t){if(!dt(t))return!1;var e=me(t);return"DataView"===e||B(Za,e)||B(Ya,e)},isTypedArray:Ka,TypedArray:Wa,TypedArrayPrototype:za},Xa=Qa.NATIVE_ARRAY_BUFFER_VIEWS,Ja=O.ArrayBuffer,tu=O.Int8Array,eu=!Xa||!j((function(){tu(1)}))||!j((function(){new tu(-1)}))||!_o((function(t){new tu,new tu(null),new tu(1.5),new tu(t)}),!0)||j((function(){return 1!==new tu(new Ja(2),1,void 0).length})),ru=function(t,e,r){for(var n in e)le(t,n,e[n],r);return t},nu=RangeError,ou=function(t){if(void 0===t)return 0;var e=Me(t),r=De(e);if(e!==r)throw nu("Wrong length or index");return r},iu=Array,au=Math.abs,uu=Math.pow,su=Math.floor,cu=Math.log,fu=Math.LN2,lu=function(t,e,r){var n,o,i,a=iu(r),u=8*r-e-1,s=(1<<u)-1,c=s>>1,f=23===e?uu(2,-24)-uu(2,-77):0,l=t<0||0===t&&1/t<0?1:0,h=0;for((t=au(t))!=t||t===1/0?(o=t!=t?1:0,n=s):(n=su(cu(t)/fu),t*(i=uu(2,-n))<1&&(n--,i*=2),(t+=n+c>=1?f/i:f*uu(2,1-c))*i>=2&&(n++,i/=2),n+c>=s?(o=0,n=s):n+c>=1?(o=(t*i-1)*uu(2,e),n+=c):(o=t*uu(2,c-1)*uu(2,e),n=0));e>=8;)a[h++]=255&o,o/=256,e-=8;for(n=n<<e|o,u+=e;u>0;)a[h++]=255&n,n/=256,u-=8;return a[--h]|=128*l,a},hu=function(t,e){var r,n=t.length,o=8*n-e-1,i=(1<<o)-1,a=i>>1,u=o-7,s=n-1,c=t[s--],f=127&c;for(c>>=7;u>0;)f=256*f+t[s--],u-=8;for(r=f&(1<<-u)-1,f>>=-u,u+=e;u>0;)r=256*r+t[s--],u-=8;if(0===f)f=1-a;else{if(f===i)return r?NaN:c?-1/0:1/0;r+=uu(2,e),f-=a}return(c?-1:1)*r*uu(2,f-e)},pu=function(t){for(var e=W(this),r=Fe(e),n=arguments.length,o=Ce(n>1?arguments[1]:void 0,r),i=n>2?arguments[2]:void 0,a=void 0===i?r:Ce(i,r);a>o;)e[o++]=t;return e},vu=Array,du=Math.max,yu=function(t,e,r){for(var n=Fe(t),o=Ce(e,n),i=Ce(void 0===r?n:r,n),a=vu(du(i-o,0)),u=0;o<i;o++,u++)Ii(a,u,t[o]);return a.length=u,a},gu=qe.f,mu=Ut.f,xu=qt.PROPER,bu=qt.CONFIGURABLE,wu=ce.get,Eu=ce.set,Au=O.ArrayBuffer,Ou=Au,Su=Ou&&Ou.prototype,Tu=O.DataView,ku=Tu&&Tu.prototype,Iu=Object.prototype,ju=O.Array,Pu=O.RangeError,_u=R(pu),Mu=R([].reverse),Lu=lu,Ru=hu,Cu=function(t){return[255&t]},Nu=function(t){return[255&t,t>>8&255]},Du=function(t){return[255&t,t>>8&255,t>>16&255,t>>24&255]},Fu=function(t){return t[3]<<24|t[2]<<16|t[1]<<8|t[0]},Wu=function(t){return Lu(t,23,4)},zu=function(t){return Lu(t,52,8)},Bu=function(t,e){mu(t.prototype,e,{get:function(){return wu(this)[e]}})},Uu=function(t,e,r,n){var o=ou(r),i=wu(t);if(o+e>i.byteLength)throw Pu("Wrong index");var a=wu(i.buffer).bytes,u=o+i.byteOffset,s=yu(a,u,u+e);return n?s:Mu(s)},Gu=function(t,e,r,n,o,i){var a=ou(r),u=wu(t);if(a+e>u.byteLength)throw Pu("Wrong index");for(var s=wu(u.buffer).bytes,c=a+u.byteOffset,f=n(+o),l=0;l<e;l++)s[c+l]=f[i?l:e-l-1]};if(_a){var Hu=xu&&"ArrayBuffer"!==Au.name;if(j((function(){Au(1)}))&&j((function(){new Au(-1)}))&&!j((function(){return new Au,new Au(1.5),new Au(NaN),1!=Au.length||Hu&&!bu})))Hu&&bu&&ee(Au,"name","ArrayBuffer");else{(Ou=function(t){return yr(this,Su),new Au(ou(t))}).prototype=Su;for(var Vu,qu=gu(Au),Zu=0;qu.length>Zu;)(Vu=qu[Zu++])in Ou||ee(Ou,Vu,Au[Vu]);Su.constructor=Ou}cr&&ca(ku)!==Iu&&cr(ku,Iu);var Yu=new Tu(new Ou(2)),$u=R(ku.setInt8);Yu.setInt8(0,2147483648),Yu.setInt8(1,2147483649),!Yu.getInt8(0)&&Yu.getInt8(1)||ru(ku,{setInt8:function(t,e){$u(this,t,e<<24>>24)},setUint8:function(t,e){$u(this,t,e<<24>>24)}},{unsafe:!0})}else Su=(Ou=function(t){yr(this,Su);var e=ou(t);Eu(this,{bytes:_u(ju(e),0),byteLength:e}),pt||(this.byteLength=e)}).prototype,ku=(Tu=function(t,e,r){yr(this,ku),yr(t,Su);var n=wu(t).byteLength,o=Me(e);if(o<0||o>n)throw Pu("Wrong offset");if(o+(r=void 0===r?n-o:De(r))>n)throw Pu("Wrong length");Eu(this,{buffer:t,byteLength:r,byteOffset:o}),pt||(this.buffer=t,this.byteLength=r,this.byteOffset=o)}).prototype,pt&&(Bu(Ou,"byteLength"),Bu(Tu,"buffer"),Bu(Tu,"byteLength"),Bu(Tu,"byteOffset")),ru(ku,{getInt8:function(t){return Uu(this,1,t)[0]<<24>>24},getUint8:function(t){return Uu(this,1,t)[0]},getInt16:function(t){var e=Uu(this,2,t,arguments.length>1?arguments[1]:void 0);return(e[1]<<8|e[0])<<16>>16},getUint16:function(t){var e=Uu(this,2,t,arguments.length>1?arguments[1]:void 0);return e[1]<<8|e[0]},getInt32:function(t){return Fu(Uu(this,4,t,arguments.length>1?arguments[1]:void 0))},getUint32:function(t){return Fu(Uu(this,4,t,arguments.length>1?arguments[1]:void 0))>>>0},getFloat32:function(t){return Ru(Uu(this,4,t,arguments.length>1?arguments[1]:void 0),23)},getFloat64:function(t){return Ru(Uu(this,8,t,arguments.length>1?arguments[1]:void 0),52)},setInt8:function(t,e){Gu(this,1,t,Cu,e)},setUint8:function(t,e){Gu(this,1,t,Cu,e)},setInt16:function(t,e){Gu(this,2,t,Nu,e,arguments.length>2?arguments[2]:void 0)},setUint16:function(t,e){Gu(this,2,t,Nu,e,arguments.length>2?arguments[2]:void 0)},setInt32:function(t,e){Gu(this,4,t,Du,e,arguments.length>2?arguments[2]:void 0)},setUint32:function(t,e){Gu(this,4,t,Du,e,arguments.length>2?arguments[2]:void 0)},setFloat32:function(t,e){Gu(this,4,t,Wu,e,arguments.length>2?arguments[2]:void 0)},setFloat64:function(t,e){Gu(this,8,t,zu,e,arguments.length>2?arguments[2]:void 0)}});hr(Ou,"ArrayBuffer"),hr(Tu,"DataView");var Ku={ArrayBuffer:Ou,DataView:Tu},Qu=Math.floor,Xu=Number.isInteger||function(t){return!dt(t)&&isFinite(t)&&Qu(t)===t},Ju=RangeError,ts=RangeError,es=function(t,e){var r=function(t){var e=Me(t);if(e<0)throw Ju("The argument can't be less than 0");return e}(t);if(r%e)throw ts("Wrong offset");return r},rs=R("".slice),ns=function(t){return"Big"===rs(me(t),0,3)},os=TypeError,is=function(t){var e=Dt(t,"number");if("number"==typeof e)throw os("Can't convert number to bigint");return BigInt(e)},as=Qa.aTypedArrayConstructor,us=function(t){var e,r,n,o,i,a,u,s,c=_r(this),f=W(t),l=arguments.length,h=l>1?arguments[1]:void 0,p=void 0!==h,v=xo(f);if(v&&!go(v))for(s=(u=wo(f,v)).next,f=[];!(a=St(s,u)).done;)f.push(a.value);for(p&&l>2&&(h=zr(h,arguments[2])),r=Fe(f),n=new(as(c))(r),o=ns(n),e=0;r>e;e++)i=p?h(f[e],e):f[e],n[e]=o?is(i):+i;return n},ss=function(t,e,r){var n,o;return cr&&$(n=e.constructor)&&n!==r&&dt(o=n.prototype)&&o!==r.prototype&&cr(t,o),t},cs=b((function(t){var e=qe.f,r=Ei.forEach,n=ce.get,o=ce.set,i=ce.enforce,a=Ut.f,u=Ie.f,s=Math.round,c=O.RangeError,f=Ku.ArrayBuffer,l=f.prototype,h=Ku.DataView,p=Qa.NATIVE_ARRAY_BUFFER_VIEWS,v=Qa.TYPED_ARRAY_TAG,d=Qa.TypedArray,y=Qa.TypedArrayPrototype,g=Qa.aTypedArrayConstructor,m=Qa.isTypedArray,x=function(t,e){g(t);for(var r=0,n=e.length,o=new t(n);n>r;)o[r]=e[r++];return o},b=function(t,e){a(t,e,{get:function(){return n(this)[e]}})},w=function(t){var e;return Tt(l,t)||"ArrayBuffer"==(e=me(t))||"SharedArrayBuffer"==e},E=function(t,e){return m(t)&&!It(e)&&e in t&&Xu(+e)&&e>=0},A=function(t,e){return e=Ft(e),E(t,e)?te(2,t[e]):u(t,e)},S=function(t,e,r){return e=Ft(e),!(E(t,e)&&dt(r)&&B(r,"value"))||B(r,"get")||B(r,"set")||r.configurable||B(r,"writable")&&!r.writable||B(r,"enumerable")&&!r.enumerable?a(t,e,r):(t[e]=r.value,t)};pt?(p||(Ie.f=A,Ut.f=S,b(y,"buffer"),b(y,"byteOffset"),b(y,"byteLength"),b(y,"length")),ir({target:"Object",stat:!0,forced:!p},{getOwnPropertyDescriptor:A,defineProperty:S}),t.exports=function(t,u,l){var g=t.match(/\\d+$/)[0]/8,b=t+(l?"Clamped":"")+"Array",E="get"+t,A="set"+t,S=O[b],T=S,k=T&&T.prototype,I={},j=function(t,e){a(t,e,{get:function(){return function(t,e){var r=n(t);return r.view[E](e*g+r.byteOffset,!0)}(this,e)},set:function(t){return function(t,e,r){var o=n(t);l&&(r=(r=s(r))<0?0:r>255?255:255&r),o.view[A](e*g+o.byteOffset,r,!0)}(this,e,t)},enumerable:!0})};p?eu&&(T=u((function(t,e,r,n){return yr(t,k),ss(dt(e)?w(e)?void 0!==n?new S(e,es(r,g),n):void 0!==r?new S(e,es(r,g)):new S(e):m(e)?x(T,e):St(us,T,e):new S(ou(e)),t,T)})),cr&&cr(T,d),r(e(S),(function(t){t in T||ee(T,t,S[t])})),T.prototype=k):(T=u((function(t,e,r,n){yr(t,k);var i,a,u,s=0,l=0;if(dt(e)){if(!w(e))return m(e)?x(T,e):St(us,T,e);i=e,l=es(r,g);var p=e.byteLength;if(void 0===n){if(p%g)throw c("Wrong length");if((a=p-l)<0)throw c("Wrong length")}else if((a=De(n)*g)+l>p)throw c("Wrong length");u=a/g}else u=ou(e),i=new f(a=u*g);for(o(t,{buffer:i,byteOffset:l,byteLength:a,length:u,view:new h(i)});s<u;)j(t,s++)})),cr&&cr(T,d),k=T.prototype=Qi(y)),k.constructor!==T&&ee(k,"constructor",T),i(k).TypedArrayConstructor=T,v&&ee(k,v,b);var P=T!=S;I[b]=T,ir({global:!0,constructor:!0,forced:P,sham:!p},I),"BYTES_PER_ELEMENT"in T||ee(T,"BYTES_PER_ELEMENT",g),"BYTES_PER_ELEMENT"in k||ee(k,"BYTES_PER_ELEMENT",g),vr(b)}):t.exports=function(){}}));cs("Uint8",(function(t){return function(e,r,n){return t(this,e,r,n)}}),!0);var fs=TypeError,ls=function(t,e){if(!delete t[e])throw fs("Cannot delete property "+Pt(e)+" of "+Pt(t))},hs=Math.min,ps=R([].copyWithin||function(t,e){var r=W(this),n=Fe(r),o=Ce(t,n),i=Ce(e,n),a=arguments.length>2?arguments[2]:void 0,u=hs((void 0===a?n:Ce(a,n))-i,n-o),s=1;for(i<o&&o<i+u&&(s=-1,i+=u-1,o+=u-1);u-- >0;)i in r?r[o]=r[i]:ls(r,o),o+=s,i+=s;return r}),vs=Qa.aTypedArray;(0,Qa.exportTypedArrayMethod)("copyWithin",(function(t,e){return ps(vs(this),t,e,arguments.length>2?arguments[2]:void 0)}));var ds=Ei.every,ys=Qa.aTypedArray;(0,Qa.exportTypedArrayMethod)("every",(function(t){return ds(ys(this),t,arguments.length>1?arguments[1]:void 0)}));var gs=Qa.aTypedArray,ms=Qa.exportTypedArrayMethod,xs=R("".slice);ms("fill",(function(t){var e=arguments.length;gs(this);var r="Big"===xs(me(this),0,3)?is(t):+t;return St(pu,this,r,e>1?arguments[1]:void 0,e>2?arguments[2]:void 0)}),j((function(){var t=0;return new Int8Array(2).fill({valueOf:function(){return t++}}),1!==t})));var bs=Qa.aTypedArrayConstructor,ws=Qa.getTypedArrayConstructor,Es=function(t){return bs(Lr(t,ws(t)))},As=function(t,e){return function(t,e){for(var r=0,n=Fe(e),o=new t(n);n>r;)o[r]=e[r++];return o}(Es(t),e)},Os=Ei.filter,Ss=Qa.aTypedArray;(0,Qa.exportTypedArrayMethod)("filter",(function(t){var e=Os(Ss(this),t,arguments.length>1?arguments[1]:void 0);return As(this,e)}));var Ts=Ei.find,ks=Qa.aTypedArray;(0,Qa.exportTypedArrayMethod)("find",(function(t){return Ts(ks(this),t,arguments.length>1?arguments[1]:void 0)}));var Is=Ei.findIndex,js=Qa.aTypedArray;(0,Qa.exportTypedArrayMethod)("findIndex",(function(t){return Is(js(this),t,arguments.length>1?arguments[1]:void 0)}));var Ps=Ei.forEach,_s=Qa.aTypedArray;(0,Qa.exportTypedArrayMethod)("forEach",(function(t){Ps(_s(this),t,arguments.length>1?arguments[1]:void 0)}));var Ms=ze.includes,Ls=Qa.aTypedArray;(0,Qa.exportTypedArrayMethod)("includes",(function(t){return Ms(Ls(this),t,arguments.length>1?arguments[1]:void 0)}));var Rs=ze.indexOf,Cs=Qa.aTypedArray;(0,Qa.exportTypedArrayMethod)("indexOf",(function(t){return Rs(Cs(this),t,arguments.length>1?arguments[1]:void 0)}));var Ns=ft("iterator"),Ds=O.Uint8Array,Fs=R(Ta.values),Ws=R(Ta.keys),zs=R(Ta.entries),Bs=Qa.aTypedArray,Us=Qa.exportTypedArrayMethod,Gs=Ds&&Ds.prototype,Hs=!j((function(){Gs[Ns].call([1])})),Vs=!!Gs&&Gs.values&&Gs[Ns]===Gs.values&&"values"===Gs.values.name,qs=function(){return Fs(Bs(this))};Us("entries",(function(){return zs(Bs(this))}),Hs),Us("keys",(function(){return Ws(Bs(this))}),Hs),Us("values",qs,Hs||!Vs,{name:"values"}),Us(Ns,qs,Hs||!Vs,{name:"values"});var Zs=Qa.aTypedArray,Ys=Qa.exportTypedArrayMethod,$s=R([].join);Ys("join",(function(t){return $s(Zs(this),t)}));var Ks=Math.min,Qs=[].lastIndexOf,Xs=!!Qs&&1/[1].lastIndexOf(1,-0)<0,Js=Ai("lastIndexOf"),tc=Xs||!Js?function(t){if(Xs)return Dr(Qs,this,arguments)||0;var e=Te(this),r=Fe(e),n=r-1;for(arguments.length>1&&(n=Ks(n,Me(arguments[1]))),n<0&&(n=r+n);n>=0;n--)if(n in e&&e[n]===t)return n||0;return-1}:Qs,ec=Qa.aTypedArray;(0,Qa.exportTypedArrayMethod)("lastIndexOf",(function(t){var e=arguments.length;return Dr(tc,ec(this),e>1?[t,arguments[1]]:[t])}));var rc=Ei.map,nc=Qa.aTypedArray;(0,Qa.exportTypedArrayMethod)("map",(function(t){return rc(nc(this),t,arguments.length>1?arguments[1]:void 0,(function(t,e){return new(Es(t))(e)}))}));var oc=TypeError,ic=function(t){return function(e,r,n,o){Mt(r);var i=W(e),a=Se(i),u=Fe(i),s=t?u-1:0,c=t?-1:1;if(n<2)for(;;){if(s in a){o=a[s],s+=c;break}if(s+=c,t?s<0:u<=s)throw oc("Reduce of empty array with no initial value")}for(;t?s>=0:u>s;s+=c)s in a&&(o=r(o,a[s],s,i));return o}},ac={left:ic(!1),right:ic(!0)},uc=ac.left,sc=Qa.aTypedArray;(0,Qa.exportTypedArrayMethod)("reduce",(function(t){var e=arguments.length;return uc(sc(this),t,e,e>1?arguments[1]:void 0)}));var cc=ac.right,fc=Qa.aTypedArray;(0,Qa.exportTypedArrayMethod)("reduceRight",(function(t){var e=arguments.length;return cc(fc(this),t,e,e>1?arguments[1]:void 0)}));var lc=Qa.aTypedArray,hc=Qa.exportTypedArrayMethod,pc=Math.floor;hc("reverse",(function(){for(var t,e=lc(this).length,r=pc(e/2),n=0;n<r;)t=this[n],this[n++]=this[--e],this[e]=t;return this}));var vc=O.RangeError,dc=O.Int8Array,yc=dc&&dc.prototype,gc=yc&&yc.set,mc=Qa.aTypedArray,xc=Qa.exportTypedArrayMethod,bc=!j((function(){var t=new Uint8ClampedArray(2);return St(gc,t,{length:1,0:3},1),3!==t[1]})),wc=bc&&Qa.NATIVE_ARRAY_BUFFER_VIEWS&&j((function(){var t=new dc(2);return t.set(1),t.set("2",1),0!==t[0]||2!==t[1]}));xc("set",(function(t){mc(this);var e=es(arguments.length>1?arguments[1]:void 0,1),r=W(t);if(bc)return St(gc,this,r,e);var n=this.length,o=Fe(r),i=0;if(o+e>n)throw vc("Wrong length");for(;i<o;)this[e+i]=r[i++]}),!bc||wc);var Ec=Qa.aTypedArray;(0,Qa.exportTypedArrayMethod)("slice",(function(t,e){for(var r=Ur(Ec(this),t,e),n=Es(this),o=0,i=r.length,a=new n(i);i>o;)a[o]=r[o++];return a}),j((function(){new Int8Array(1).slice()})));var Ac=Ei.some,Oc=Qa.aTypedArray;(0,Qa.exportTypedArrayMethod)("some",(function(t){return Ac(Oc(this),t,arguments.length>1?arguments[1]:void 0)}));var Sc=Math.floor,Tc=function(t,e){var r=t.length,n=Sc(r/2);return r<8?kc(t,e):Ic(t,Tc(yu(t,0,n),e),Tc(yu(t,n),e),e)},kc=function(t,e){for(var r,n,o=t.length,i=1;i<o;){for(n=i,r=t[i];n&&e(t[n-1],r)>0;)t[n]=t[--n];n!==i++&&(t[n]=r)}return t},Ic=function(t,e,r,n){for(var o=e.length,i=r.length,a=0,u=0;a<o||u<i;)t[a+u]=a<o&&u<i?n(e[a],r[u])<=0?e[a++]:r[u++]:a<o?e[a++]:r[u++];return t},jc=Tc,Pc=X.match(/firefox\\/(\\d+)/i),_c=!!Pc&&+Pc[1],Mc=/MSIE|Trident/.test(X),Lc=X.match(/AppleWebKit\\/(\\d+)\\./),Rc=!!Lc&&+Lc[1],Cc=Qa.aTypedArray,Nc=Qa.exportTypedArrayMethod,Dc=O.Uint16Array,Fc=Dc&&Fr(Dc.prototype.sort),Wc=!(!Fc||j((function(){Fc(new Dc(2),null)}))&&j((function(){Fc(new Dc(2),{})}))),zc=!!Fc&&!j((function(){if(nt)return nt<74;if(_c)return _c<67;if(Mc)return!0;if(Rc)return Rc<602;var t,e,r=new Dc(516),n=Array(516);for(t=0;t<516;t++)e=t%4,r[t]=515-t,n[t]=t-2*e+3;for(Fc(r,(function(t,e){return(t/4|0)-(e/4|0)})),t=0;t<516;t++)if(r[t]!==n[t])return!0}));Nc("sort",(function(t){return void 0!==t&&Mt(t),zc?Fc(this,t):jc(Cc(this),function(t){return function(e,r){return void 0!==t?+t(e,r)||0:r!=r?-1:e!=e?1:0===e&&0===r?1/e>0&&1/r<0?1:-1:e>r}}(t))}),!zc||Wc);var Bc=Qa.aTypedArray;(0,Qa.exportTypedArrayMethod)("subarray",(function(t,e){var r=Bc(this),n=r.length,o=Ce(t,n);return new(Es(r))(r.buffer,r.byteOffset+o*r.BYTES_PER_ELEMENT,De((void 0===e?n:Ce(e,n))-o))}));var Uc=O.Int8Array,Gc=Qa.aTypedArray,Hc=Qa.exportTypedArrayMethod,Vc=[].toLocaleString,qc=!!Uc&&j((function(){Vc.call(new Uc(1))}));Hc("toLocaleString",(function(){return Dr(Vc,qc?Ur(Gc(this)):Gc(this),Ur(arguments))}),j((function(){return[1,2].toLocaleString()!=new Uc([1,2]).toLocaleString()}))||!j((function(){Uc.prototype.toLocaleString.call([1,2])})));var Zc=Qa.exportTypedArrayMethod,Yc=O.Uint8Array,$c=Yc&&Yc.prototype||{},Kc=[].toString,Qc=R([].join);j((function(){Kc.call({})}))&&(Kc=function(){return Qc(this)});var Xc=$c.toString!=Kc;Zc("toString",Kc,Xc);var Jc,tf,ef=String,rf=function(t){if("Symbol"===me(t))throw TypeError("Cannot convert a Symbol value to a string");return ef(t)},nf=function(){var t=At(this),e="";return t.hasIndices&&(e+="d"),t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.dotAll&&(e+="s"),t.unicode&&(e+="u"),t.unicodeSets&&(e+="v"),t.sticky&&(e+="y"),e},of=O.RegExp,af=j((function(){var t=of("a","y");return t.lastIndex=2,null!=t.exec("abcd")})),uf=af||j((function(){return!of("a","y").sticky})),sf={BROKEN_CARET:af||j((function(){var t=of("^r","gy");return t.lastIndex=2,null!=t.exec("str")})),MISSED_STICKY:uf,UNSUPPORTED_Y:af},cf=O.RegExp,ff=j((function(){var t=cf(".","s");return!(t.dotAll&&t.exec("\\n")&&"s"===t.flags)})),lf=O.RegExp,hf=j((function(){var t=lf("(?<a>b)","g");return"b"!==t.exec("b").groups.a||"bc"!=="b".replace(t,"$<a>c")})),pf=ce.get,vf=I("native-string-replace",String.prototype.replace),df=RegExp.prototype.exec,yf=df,gf=R("".charAt),mf=R("".indexOf),xf=R("".replace),bf=R("".slice),wf=(tf=/b*/g,St(df,Jc=/a/,"a"),St(df,tf,"a"),0!==Jc.lastIndex||0!==tf.lastIndex),Ef=sf.BROKEN_CARET,Af=void 0!==/()??/.exec("")[1];(wf||Af||Ef||ff||hf)&&(yf=function(t){var e,r,n,o,i,a,u,s=this,c=pf(s),f=rf(t),l=c.raw;if(l)return l.lastIndex=s.lastIndex,e=St(yf,l,f),s.lastIndex=l.lastIndex,e;var h=c.groups,p=Ef&&s.sticky,v=St(nf,s),d=s.source,y=0,g=f;if(p&&(v=xf(v,"y",""),-1===mf(v,"g")&&(v+="g"),g=bf(f,s.lastIndex),s.lastIndex>0&&(!s.multiline||s.multiline&&"\\n"!==gf(f,s.lastIndex-1))&&(d="(?: "+d+")",g=" "+g,y++),r=new RegExp("^(?:"+d+")",v)),Af&&(r=new RegExp("^"+d+"$(?!\\\\s)",v)),wf&&(n=s.lastIndex),o=St(df,p?r:s,g),p?o?(o.input=bf(o.input,y),o[0]=bf(o[0],y),o.index=s.lastIndex,s.lastIndex+=o[0].length):s.lastIndex=0:wf&&o&&(s.lastIndex=s.global?o.index+o[0].length:n),Af&&o&&o.length>1&&St(vf,o[0],r,(function(){for(i=1;i<arguments.length-2;i++)void 0===arguments[i]&&(o[i]=void 0)})),o&&h)for(o.groups=a=Qi(null),i=0;i<h.length;i++)a[(u=h[i])[0]]=o[u[1]];return o});var Of=yf;ir({target:"RegExp",proto:!0,forced:/./.exec!==Of},{exec:Of});var Sf,Tf=ft("species"),kf=RegExp.prototype,If=function(t,e,r,n){var o=ft(t),i=!j((function(){var e={};return e[o]=function(){return 7},7!=""[t](e)})),a=i&&!j((function(){var e=!1,r=/a/;return"split"===t&&((r={}).constructor={},r.constructor[Tf]=function(){return r},r.flags="",r[o]=/./[o]),r.exec=function(){return e=!0,null},r[o](""),!e}));if(!i||!a||r){var u=Fr(/./[o]),s=e(o,""[t],(function(t,e,r,n,o){var a=Fr(t),s=e.exec;return s===Of||s===kf.exec?i&&!o?{done:!0,value:u(e,r,n)}:{done:!0,value:a(r,e,n)}:{done:!1}}));le(String.prototype,t,s[0]),le(kf,o,s[1])}n&&ee(kf[o],"sham",!0)},jf=R("".charAt),Pf=R("".charCodeAt),_f=R("".slice),Mf=function(t){return function(e,r){var n,o,i=rf(D(e)),a=Me(r),u=i.length;return a<0||a>=u?t?"":void 0:(n=Pf(i,a))<55296||n>56319||a+1===u||(o=Pf(i,a+1))<56320||o>57343?t?jf(i,a):n:t?_f(i,a,a+2):o-56320+(n-55296<<10)+65536}},Lf={codeAt:Mf(!1),charAt:Mf(!0)},Rf=Lf.charAt,Cf=function(t,e,r){return e+(r?Rf(t,e).length:1)},Nf=Math.floor,Df=R("".charAt),Ff=R("".replace),Wf=R("".slice),zf=/\\$([$&'\`]|\\d{1,2}|<[^>]*>)/g,Bf=/\\$([$&'\`]|\\d{1,2})/g,Uf=function(t,e,r,n,o,i){var a=r+t.length,u=n.length,s=Bf;return void 0!==o&&(o=W(o),s=zf),Ff(i,s,(function(i,s){var c;switch(Df(s,0)){case"$":return"$";case"&":return t;case"\`":return Wf(e,0,r);case"'":return Wf(e,a);case"<":c=o[Wf(s,1,-1)];break;default:var f=+s;if(0===f)return i;if(f>u){var l=Nf(f/10);return 0===l?i:l<=u?void 0===n[l-1]?Df(s,1):n[l-1]+Df(s,1):i}c=n[f-1]}return void 0===c?"":c}))},Gf=TypeError,Hf=function(t,e){var r=t.exec;if($(r)){var n=St(r,t,e);return null!==n&&At(n),n}if("RegExp"===ve(t))return St(Of,t,e);throw Gf("RegExp#exec called on incompatible receiver")},Vf=ft("replace"),qf=Math.max,Zf=Math.min,Yf=R([].concat),$f=R([].push),Kf=R("".indexOf),Qf=R("".slice),Xf="$0"==="a".replace(/./,"$0"),Jf=!!/./[Vf]&&""===/./[Vf]("a","$0");function tl(t){this.message=t}If("replace",(function(t,e,r){var n=Jf?"$":"$0";return[function(t,r){var n=D(this),o=C(t)?void 0:Lt(t,Vf);return o?St(o,t,n,r):St(e,rf(n),t,r)},function(t,o){var i=At(this),a=rf(t);if("string"==typeof o&&-1===Kf(o,n)&&-1===Kf(o,"$<")){var u=r(e,i,a,o);if(u.done)return u.value}var s=$(o);s||(o=rf(o));var c=i.global;if(c){var f=i.unicode;i.lastIndex=0}for(var l=[];;){var h=Hf(i,a);if(null===h)break;if($f(l,h),!c)break;""===rf(h[0])&&(i.lastIndex=Cf(a,De(i.lastIndex),f))}for(var p,v="",d=0,y=0;y<l.length;y++){for(var g=rf((h=l[y])[0]),m=qf(Zf(Me(h.index),a.length),0),x=[],b=1;b<h.length;b++)$f(x,void 0===(p=h[b])?p:String(p));var w=h.groups;if(s){var E=Yf([g],x,m,a);void 0!==w&&$f(E,w);var A=rf(Dr(o,void 0,E))}else A=Uf(g,a,m,x,w,o);m>=d&&(v+=Qf(a,d,m)+A,d=m+g.length)}return v+Qf(a,d)}]}),!!j((function(){var t=/./;return t.exec=function(){var t=[];return t.groups={a:"7"},t},"7"!=="".replace(t,"$<a>")}))||!Xf||Jf),tl.prototype=new Error,tl.prototype.name="InvalidCharacterError",ir({global:!0,forced:O.globalThis!==O},{globalThis:O}),Sf="undefined"==typeof window?{devicePixelRatio:1,navigator:{userAgent:"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/95.0.4638.69 Safari/537.36",browserLanguage:"zh-CN",language:"zh-CN",platform:""},location:"",document:{documentElement:{style:{}},createEvent:function(){return!0},getElementById:function(t){return!0},createElement:function(){return{className:"",classList:{add:function(){return""}}}},createElementNS:function(){return!0},addEventListener:function(){return!0},removeEventListener:function(){return!0},querySelector:function(){return!1}},performance:{mark:function(t){return null},clearMeasures:function(t){return null},clearMarks:function(t){return null},measure:function(t,e,r){return{duration:0}},now:function(){return(new Date).getTime()}},Blob:"",dispatchEvent:function(t){return!0},Event:function(t,e){return!0},createElement:function(){return!0},createElementNS:function(){return!0},XMLHttpRequest:function(){return!0},addEventListener:function(){return!0},removeEventListener:function(){return!0},requestAnimationFrame:function(){return!0},cancelAnimationFrame:function(){return!0},clearTimeout:function(){return!0}}:window,"undefined"!=typeof my&&!!my&&"function"==typeof my.showToast&&!0!==my.isFRM?my.getSystemInfoSync().pixelRatio:Sf.devicePixelRatio;var el=TypeError,rl=Object.getOwnPropertyDescriptor,nl=pt&&!function(){if(void 0!==this)return!0;try{Object.defineProperty([],"length",{writable:!1}).length=1}catch(t){return t instanceof TypeError}}()?function(t,e){if(yi(t)&&!rl(t,"length").writable)throw el("Cannot set read only .length");return t.length=e}:function(t,e){return t.length=e},ol=TypeError,il=function(t){if(t>9007199254740991)throw ol("Maximum allowed index exceeded");return t},al=Pi("splice"),ul=Math.max,sl=Math.min;ir({target:"Array",proto:!0,forced:!al},{splice:function(t,e){var r,n,o,i,a,u,s=W(this),c=Fe(s),f=Ce(t,c),l=arguments.length;for(0===l?r=n=0:1===l?(r=0,n=c-f):(r=l-2,n=sl(ul(Me(e),0),c-f)),il(c+r-n),o=xi(s,n),i=0;i<n;i++)(a=f+i)in s&&Ii(o,i,s[a]);if(o.length=n,r<n){for(i=f;i<c-n;i++)u=i+r,(a=i+n)in s?s[u]=s[a]:ls(s,u);for(i=c;i>c-n+r;i--)ls(s,i-1)}else if(r>n)for(i=c-n;i>f;i--)u=i+r-1,(a=i+n-1)in s?s[u]=s[a]:ls(s,u);for(i=0;i<r;i++)s[i+f]=arguments[i+2];return nl(s,c-n+r),o}});var cl=u((function t(e,r){i(this,t),s(this,"cancelBubble",void 0),s(this,"cancelable",void 0),s(this,"target",void 0),s(this,"currentTarget",void 0),s(this,"preventDefault",void 0),s(this,"stopPropagation",void 0),s(this,"type",void 0),s(this,"timeStamp",void 0),this.cancelBubble=!1,this.cancelable=!1,this.target=null,this.currentTarget=null,this.preventDefault=function(){},this.stopPropagation=function(){},this.type=e,this.timeStamp=Date.now()})),fl=Object.assign,ll=Object.defineProperty,hl=R([].concat),pl=!fl||j((function(){if(pt&&1!==fl({b:1},fl(ll({},"a",{enumerable:!0,get:function(){ll(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var t={},e={},r=Symbol();return t[r]=7,"abcdefghijklmnopqrst".split("").forEach((function(t){e[t]=t})),7!=fl({},t)[r]||"abcdefghijklmnopqrst"!=Hi(fl({},e)).join("")}))?function(t,e){for(var r=W(t),n=arguments.length,o=1,i=Ze.f,a=Ee.f;n>o;)for(var u,s=Se(arguments[o++]),c=i?hl(Hi(s),i(s)):Hi(s),f=c.length,l=0;f>l;)u=c[l++],pt&&!St(a,s,u)||(r[u]=s[u]);return r}:fl;ir({target:"Object",stat:!0,arity:2,forced:Object.assign!==pl},{assign:pl});var vl=Ei.findIndex,dl=!0;"findIndex"in[]&&Array(1).findIndex((function(){dl=!1})),ir({target:"Array",proto:!0,forced:dl},{findIndex:function(t){return vl(this,t,arguments.length>1?arguments[1]:void 0)}}),oa("findIndex");var yl=Lf.charAt,gl=ce.set,ml=ce.getterFor("String Iterator");wa(String,"String",(function(t){gl(this,{type:"String Iterator",string:rf(t),index:0})}),(function(){var t,e=ml(this),r=e.string,n=e.index;return n>=r.length?Ea(void 0,!0):(t=yl(r,n),e.index+=t.length,Ea(t,!1))}));var xl=qe.f,bl="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],wl={f:function(t){return bl&&"Window"==ve(t)?function(t){try{return xl(t)}catch(t){return yu(bl)}}(t):xl(Te(t))}},El=j((function(){if("function"==typeof ArrayBuffer){var t=new ArrayBuffer(8);Object.isExtensible(t)&&Object.defineProperty(t,"a",{value:8})}})),Al=Object.isExtensible,Ol=j((function(){Al(1)}))||El?function(t){return!!dt(t)&&((!El||"ArrayBuffer"!=ve(t))&&(!Al||Al(t)))}:Al,Sl=!j((function(){return Object.isExtensible(Object.preventExtensions({}))})),Tl=b((function(t){var e=Ut.f,r=!1,n=V("meta"),o=0,i=function(t){e(t,n,{value:{objectID:"O"+o++,weakData:{}}})},a=t.exports={enable:function(){a.enable=function(){},r=!0;var t=qe.f,e=R([].splice),o={};o[n]=1,t(o).length&&(qe.f=function(r){for(var o=t(r),i=0,a=o.length;i<a;i++)if(o[i]===n){e(o,i,1);break}return o},ir({target:"Object",stat:!0,forced:!0},{getOwnPropertyNames:wl.f}))},fastKey:function(t,e){if(!dt(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!B(t,n)){if(!Ol(t))return"F";if(!e)return"E";i(t)}return t[n].objectID},getWeakData:function(t,e){if(!B(t,n)){if(!Ol(t))return!0;if(!e)return!1;i(t)}return t[n].weakData},onFreeze:function(t){return Sl&&r&&Ol(t)&&!B(t,n)&&i(t),t}};oe[n]=!0})),kl=(Tl.enable,Tl.fastKey,Tl.getWeakData,Tl.onFreeze,function(t,e,r){var n=-1!==t.indexOf("Map"),o=-1!==t.indexOf("Weak"),i=n?"set":"add",a=O[t],u=a&&a.prototype,s=a,c={},f=function(t){var e=R(u[t]);le(u,t,"add"==t?function(t){return e(this,0===t?0:t),this}:"delete"==t?function(t){return!(o&&!dt(t))&&e(this,0===t?0:t)}:"get"==t?function(t){return o&&!dt(t)?void 0:e(this,0===t?0:t)}:"has"==t?function(t){return!(o&&!dt(t))&&e(this,0===t?0:t)}:function(t,r){return e(this,0===t?0:t,r),this})};if(nr(t,!$(a)||!(o||u.forEach&&!j((function(){(new a).entries().next()})))))s=r.getConstructor(e,t,n,i),Tl.enable();else if(nr(t,!0)){var l=new s,h=l[i](o?{}:-0,1)!=l,p=j((function(){l.has(1)})),v=_o((function(t){new a(t)})),d=!o&&j((function(){for(var t=new a,e=5;e--;)t[i](e,e);return!t.has(-0)}));v||((s=e((function(t,e){yr(t,u);var r=ss(new a,t,s);return C(e)||To(e,r[i],{that:r,AS_ENTRIES:n}),r}))).prototype=u,u.constructor=s),(p||d)&&(f("delete"),f("has"),n&&f("get")),(d||h)&&f(i),o&&u.clear&&delete u.clear}return c[t]=s,ir({global:!0,constructor:!0,forced:s!=a},c),hr(s,t),o||r.setStrong(s,t,n),s}),Il=Tl.getWeakData,jl=ce.set,Pl=ce.getterFor,_l=Ei.find,Ml=Ei.findIndex,Ll=R([].splice),Rl=0,Cl=function(t){return t.frozen||(t.frozen=new Nl)},Nl=function(){this.entries=[]},Dl=function(t,e){return _l(t.entries,(function(t){return t[0]===e}))};Nl.prototype={get:function(t){var e=Dl(this,t);if(e)return e[1]},has:function(t){return!!Dl(this,t)},set:function(t,e){var r=Dl(this,t);r?r[1]=e:this.entries.push([t,e])},delete:function(t){var e=Ml(this.entries,(function(e){return e[0]===t}));return~e&&Ll(this.entries,e,1),!!~e}};var Fl,Wl={getConstructor:function(t,e,r,n){var o=t((function(t,o){yr(t,i),jl(t,{type:e,id:Rl++,frozen:void 0}),C(o)||To(o,t[n],{that:t,AS_ENTRIES:r})})),i=o.prototype,a=Pl(e),u=function(t,e,r){var n=a(t),o=Il(At(e),!0);return!0===o?Cl(n).set(e,r):o[n.id]=r,t};return ru(i,{delete:function(t){var e=a(this);if(!dt(t))return!1;var r=Il(t);return!0===r?Cl(e).delete(t):r&&B(r,e.id)&&delete r[e.id]},has:function(t){var e=a(this);if(!dt(t))return!1;var r=Il(t);return!0===r?Cl(e).has(t):r&&B(r,e.id)}}),ru(i,r?{get:function(t){var e=a(this);if(dt(t)){var r=Il(t);return!0===r?Cl(e).get(t):r?r[e.id]:void 0}},set:function(t,e){return u(this,t,e)}}:{add:function(t){return u(this,t,!0)}}),o}},zl=ce.enforce,Bl=!O.ActiveXObject&&"ActiveXObject"in O,Ul=function(t){return function(){return t(this,arguments.length?arguments[0]:void 0)}},Gl=kl("WeakMap",Ul,Wl);if(Jt&&Bl){Fl=Wl.getConstructor(Ul,"WeakMap",!0),Tl.enable();var Hl=Gl.prototype,Vl=R(Hl.delete),ql=R(Hl.has),Zl=R(Hl.get),Yl=R(Hl.set);ru(Hl,{delete:function(t){if(dt(t)&&!Ol(t)){var e=zl(this);return e.frozen||(e.frozen=new Fl),Vl(this,t)||e.frozen.delete(t)}return Vl(this,t)},has:function(t){if(dt(t)&&!Ol(t)){var e=zl(this);return e.frozen||(e.frozen=new Fl),ql(this,t)||e.frozen.has(t)}return ql(this,t)},get:function(t){if(dt(t)&&!Ol(t)){var e=zl(this);return e.frozen||(e.frozen=new Fl),ql(this,t)?Zl(this,t):e.frozen.get(t)}return Zl(this,t)},set:function(t,e){if(dt(t)&&!Ol(t)){var r=zl(this);r.frozen||(r.frozen=new Fl),ql(this,t)?Yl(this,t,e):r.frozen.set(t,e)}else Yl(this,t,e);return this}})}var $l=ft("iterator"),Kl=ft("toStringTag"),Ql=Ta.values,Xl=function(t,e){if(t){if(t[$l]!==Ql)try{ee(t,$l,Ql)}catch(e){t[$l]=Ql}if(t[Kl]||ee(t,Kl,e),hi[e])for(var r in Ta)if(t[r]!==Ta[r])try{ee(t,r,Ta[r])}catch(e){t[r]=Ta[r]}}};for(var Jl in hi)Xl(O[Jl]&&O[Jl].prototype,Jl);Xl(di,"DOMTokenList");var th,eh,rh,nh,oh=new WeakMap,ih=function(){function t(){i(this,t),oh.set(this,{})}return u(t,[{key:"addEventListener",value:function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=oh.get(this);n||(n={}),n[t]||(n[t]=[]),n[t].push(e),oh.set(this,n),r.capture,r.once,r.passive}},{key:"removeEventListener",value:function(t,e){var r=oh.get(this);if(r){var n=r[t];if(n&&n.length>0)for(var o=n.length;o--;o>0)if(n[o]===e){n.splice(o,1);break}}}},{key:"dispatchEvent",value:function(t){var e=oh.get(this)[t.type];if(e){var r,n=function(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=g(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,u=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return a=t.done,t},e:function(t){u=!0,i=t},f:function(){try{a||null==r.return||r.return()}finally{if(u)throw i}}}}(e);try{for(n.s();!(r=n.n()).done;){(0,r.value)(t)}}catch(t){n.e(t)}finally{n.f()}}}}]),t}(),ah=function(t){c(r,t);var e=v(r);function r(){var t;return i(this,r),s(h(t=e.call(this)),"className",void 0),s(h(t),"children",void 0),t.className="",t.children=[],t}return u(r,[{key:"setAttribute",value:function(t,e){this[t]=e}},{key:"getAttribute",value:function(t){return this[t]}},{key:"setAttributeNS",value:function(t,e){this[t]=e}},{key:"getAttributeNS",value:function(t){return this[t]}}]),r}(function(t){c(r,t);var e=v(r);function r(){var t;return i(this,r),s(h(t=e.call(this)),"childNodes",void 0),t.childNodes=[],t}return u(r,[{key:"appendChild",value:function(t){this.childNodes.push(t)}},{key:"cloneNode",value:function(){var t=Object.create(this);return Object.assign(t,this),t}},{key:"removeChild",value:function(t){var e=this.childNodes.findIndex((function(e){return e===t}));return e>-1?this.childNodes.splice(e,1):null}}]),r}(ih));if("undefined"!=typeof my&&!!my&&"function"==typeof my.showToast&&!0!==my.isFRM){var uh=my.getSystemInfoSync();th=uh.screenWidth,eh=uh.screenHeight,rh=uh.windowWidth,nh=uh.windowHeight}else{var sh=Sf.innerWidth,ch=Sf.innerHeight;th=sh,eh=ch,rh=sh,nh=ch}var fh={width:th,height:eh,availWidth:rh,availHeight:nh,availLeft:0,availTop:0},lh=fh.availWidth,hh=fh.availHeight,ph={style:[]};function vh(t,e){var r,n;"parentNode"in t||(r=0===e?function(){return null}:1===e?function(){return ph}:function(){return null},Object.defineProperty(t,"parentNode",{enumerable:!0,get:r}));"parentElement"in t||(n=0===e?function(){return null}:1===e?function(){return ph}:function(){return null},Object.defineProperty(t,"parentElement",{enumerable:!0,get:n}))}function dh(t){t.style=t.style||{},Object.assign(t.style,{top:"0px",left:"0px",width:lh+"px",height:hh+"px",margin:"0px",padding:"0px"})}function yh(t){"clientLeft"in t||(t.clientLeft=0,t.clientTop=0),"clientWidth"in t||(t.clientWidth=lh,t.clientHeight=hh),"getBoundingClientRect"in t||(t.getBoundingClientRect=function(){return{x:0,y:0,top:0,left:0,width:this.clientWidth,height:this.clientHeight,right:this.clientWidth,bottom:this.clientHeight}})}function gh(t){"offsetLeft"in t||(t.offsetLeft=0,t.offsetTop=0),"offsetWidth"in t||(t.offsetWidth=lh,t.offsetHeight=hh)}function mh(t){"scrollLeft"in t||(t.scrollLeft=0,t.scrollTop=0),"scrollWidth"in t||(t.scrollWidth=lh,t.scrollHeight=hh)}function xh(t){var e=function(){return!0};t.classList=[],t.classList.add=e,t.classList.remove=e,t.classList.contains=e,t.classList.toggle=e}function bh(){}var wh=function(t){c(r,t);var e=v(r);function r(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",o=arguments.length>1?arguments[1]:void 0;return i(this,r),s(h(t=e.call(this)),"className",void 0),s(h(t),"children",void 0),s(h(t),"focus",void 0),s(h(t),"blur",void 0),s(h(t),"insertBefore",void 0),s(h(t),"appendChild",void 0),s(h(t),"removeChild",void 0),s(h(t),"remove",void 0),s(h(t),"innerHTML",void 0),s(h(t),"tagName",void 0),t.className="",t.children=[],t.focus=bh,t.blur=bh,t.insertBefore=bh,t.appendChild=bh,t.removeChild=bh,t.remove=bh,t.innerHTML="",t.tagName=n.toUpperCase(),vh(h(t),o),dh(h(t)),xh(h(t)),yh(h(t)),gh(h(t)),mh(h(t)),t}return u(r)}(ah),Eh=function(t){c(r,t);var e=v(r);function r(){return i(this,r),e.call(this,"video")}return u(r)}(function(t){c(r,t);var e=v(r);function r(t){return i(this,r),e.call(this,t)}return u(r,[{key:"addTextTrack",value:function(){}},{key:"captureStream",value:function(){}},{key:"fastSeek",value:function(){}},{key:"load",value:function(){}},{key:"pause",value:function(){}},{key:"play",value:function(){}}]),r}(wh)),Ah={};function Oh(){return Ah}var Sh=u((function t(){i(this,t);var e=Oh(),r=e.createImage&&e.createImage()||{};return"tagName"in r||(r.tagName="IMG",r.__proto__=t.prototype),vh(r),xh(r),Object.assign(r,{addEventListener:function(t,e){r["on".concat(t)]=e.bind(r)},removeEventListener:function(t){r["on".concat(t)]=null}}),r})),Th={href:"",protocol:"",host:""},kh=function(t){c(r,t);var e=v(r);function r(){return i(this,r),e.call(this,"body",0)}return u(r,[{key:"addEventListener",value:function(t,e){}},{key:"removeEventListener",value:function(t,e,r){}},{key:"dispatchEvent",value:function(t){}}]),r}(wh),Ih=function(t){c(r,t);var e=v(r);function r(){return i(this,r),e.call(this,"html",0)}return u(r,[{key:"addEventListener",value:function(t,e){}},{key:"removeEventListener",value:function(t,e){}},{key:"dispatchEvent",value:function(t){}}]),r}(wh),jh={},Ph={readyState:"complete",visibilityState:"visible",hidden:!1,fullscreen:!0,scripts:[],style:{},location:Th,ontouchstart:null,ontouchmove:null,ontouchend:null,onvisibilitychange:null,parentNode:null,parentElement:null,head:null,body:null,documentElement:{style:[]},createElement:function(t){return"canvas"===(t=t.toLowerCase())?my.createOffscreenCanvas(1024,128,"2d"):"img"===t?new Sh:"video"===t?new Eh:new wh(t)},createElementNS:function(t,e){return this.createElement(e)},createTextNode:function(t){return t},getElementById:function(t){return null},getElementsByTagName:function(t){return t=t.toLowerCase(),[]},getElementsByTagNameNS:function(t,e){return this.getElementsByTagName(e)},getElementsByName:function(t){return[]},querySelector:function(t){return null},querySelectorAll:function(t){return[]},addEventListener:function(t,e,r){jh[t]||(jh[t]=[]),jh[t].push(e)},removeEventListener:function(t,e){var r=jh[t];if(r&&r.length>0)for(var n=r.length;n--;n>0)if(r[n]===e){r.splice(n,1);break}},dispatchEvent:function(t){var e=t.type,r=jh[e];if(r)for(var n=0;n<r.length;n++)r[n](t);t.target&&"function"==typeof t.target["on"+e]&&t.target["on"+e](t)},createEvent:function(t){return new cl(t)}};Ph.documentElement=new Ih,Ph.head=new wh("head"),Ph.body=new kh,If("match",(function(t,e,r){return[function(e){var r=D(this),n=C(e)?void 0:Lt(e,t);return n?St(n,e,r):new RegExp(e)[t](rf(r))},function(t){var n=At(this),o=rf(t),i=r(e,n,o);if(i.done)return i.value;if(!n.global)return Hf(n,o);var a=n.unicode;n.lastIndex=0;for(var u,s=[],c=0;null!==(u=Hf(n,o));){var f=rf(u[0]);s[c]=f,""===f&&(n.lastIndex=Cf(o,De(n.lastIndex),a)),c++}return 0===c?null:s}]}));var _h,Mh,Lh=ft("isConcatSpreadable"),Rh=nt>=51||!j((function(){var t=[];return t[Lh]=!1,t.concat()[0]!==t})),Ch=Pi("concat"),Nh=function(t){if(!dt(t))return!1;var e=t[Lh];return void 0!==e?!!e:yi(t)};if(ir({target:"Array",proto:!0,arity:1,forced:!Rh||!Ch},{concat:function(t){var e,r,n,o,i,a=W(this),u=xi(a,0),s=0;for(e=-1,n=arguments.length;e<n;e++)if(Nh(i=-1===e?a:arguments[e]))for(o=Fe(i),il(s+o),r=0;r<o;r++,s++)r in i&&Ii(u,s,i[r]);else il(s+1),Ii(u,s++,i);return u.length=s,u}}),"undefined"!=typeof my&&!!my&&"function"==typeof my.showToast&&!0!==my.isFRM){var Dh=my.getSystemInfoSync();_h=Dh.system,Dh.platform,Dh.language}else{var Fh={versions:(Mh=Sf.navigator.userAgent,{trident:Mh.indexOf("Trident")>-1,presto:Mh.indexOf("Presto")>-1,webKit:Mh.indexOf("AppleWebKit")>-1,gecko:Mh.indexOf("Gecko")>-1&&-1===Mh.indexOf("KHTML"),mobile:!!Mh.match(/AppleWebKit.*Mobile.*/),ios:!!Mh.match(/\\(i[^;]+;( U;)? CPU.+Mac OS X/),android:Mh.indexOf("Android")>-1||Mh.indexOf("Linux")>-1,iPhone:Mh.indexOf("iPhone")>-1,iPad:Mh.indexOf("iPad")>-1,webApp:-1===Mh.indexOf("Safari"),weixin:Mh.indexOf("MicroMessenger")>-1,qq:" qq"===Mh.match(/\\sQQ/i)}),language:(Sf.navigator.browserLanguage||Sf.navigator.language).toLowerCase()};Fh.versions.android?"android":Fh.versions.trident?"IE":Fh.versions.presto?"Opera":Fh.versions.webKit?"webKit":Fh.versions.gecko?"Firefox":Fh.versions.mobile?"mobile":Fh.versions.ios?"ios":Fh.versions.iPhone?"iPhone":Fh.versions.iPad?"ipad":Fh.versions.webApp?"webApp":Fh.versions.weixin?"weixin":Fh.versions.qq&&"qq",_h=Sf.navigator.userAgent,Fh.language}_h.toLowerCase().indexOf("android");cs("Uint8",(function(t){return function(e,r,n){return t(this,e,r,n)}}));var Wh=Ut.f,zh=Tl.fastKey,Bh=ce.set,Uh=ce.getterFor;kl("Map",(function(t){return function(){return t(this,arguments.length?arguments[0]:void 0)}}),{getConstructor:function(t,e,r,n){var o=t((function(t,o){yr(t,i),Bh(t,{type:e,index:Qi(null),first:void 0,last:void 0,size:0}),pt||(t.size=0),C(o)||To(o,t[n],{that:t,AS_ENTRIES:r})})),i=o.prototype,a=Uh(e),u=function(t,e,r){var n,o,i=a(t),u=s(t,e);return u?u.value=r:(i.last=u={index:o=zh(e,!0),key:e,value:r,previous:n=i.last,next:void 0,removed:!1},i.first||(i.first=u),n&&(n.next=u),pt?i.size++:t.size++,"F"!==o&&(i.index[o]=u)),t},s=function(t,e){var r,n=a(t),o=zh(e);if("F"!==o)return n.index[o];for(r=n.first;r;r=r.next)if(r.key==e)return r};return ru(i,{clear:function(){for(var t=a(this),e=t.index,r=t.first;r;)r.removed=!0,r.previous&&(r.previous=r.previous.next=void 0),delete e[r.index],r=r.next;t.first=t.last=void 0,pt?t.size=0:this.size=0},delete:function(t){var e=a(this),r=s(this,t);if(r){var n=r.next,o=r.previous;delete e.index[r.index],r.removed=!0,o&&(o.next=n),n&&(n.previous=o),e.first==r&&(e.first=n),e.last==r&&(e.last=o),pt?e.size--:this.size--}return!!r},forEach:function(t){for(var e,r=a(this),n=zr(t,arguments.length>1?arguments[1]:void 0);e=e?e.next:r.first;)for(n(e.value,e.key,this);e&&e.removed;)e=e.previous},has:function(t){return!!s(this,t)}}),ru(i,r?{get:function(t){var e=s(this,t);return e&&e.value},set:function(t,e){return u(this,0===t?0:t,e)}}:{add:function(t){return u(this,t=0===t?0:t,t)}}),pt&&Wh(i,"size",{get:function(){return a(this).size}}),o},setStrong:function(t,e,r){var n=e+" Iterator",o=Uh(e),i=Uh(n);wa(t,e,(function(t,e){Bh(this,{type:n,target:t,state:o(t),kind:e,last:void 0})}),(function(){for(var t=i(this),e=t.kind,r=t.last;r&&r.removed;)r=r.previous;return t.target&&(t.last=r=r?r.next:t.state.first)?Ea("keys"==e?r.key:"values"==e?r.value:[r.key,r.value],!1):(t.target=void 0,Ea(void 0,!0))}),r?"entries":"values",!r,!0),vr(e)}});var Gh=R([].join),Hh=Se!=Object,Vh=Ai("join",",");ir({target:"Array",proto:!0,forced:Hh||!Vh},{join:function(t){return Gh(Te(this),void 0===t?",":t)}});var qh=j((function(){Hi(1)}));ir({target:"Object",stat:!0,forced:qh},{keys:function(t){return Hi(W(t))}});var Zh=new Map,Yh=new Map,$h=new Map,Kh=function(t){c(r,t);var e=v(r);function r(){var t;return i(this,r),s(h(t=e.call(this)),"onabort",void 0),s(h(t),"onerror",void 0),s(h(t),"onload",void 0),s(h(t),"onloadstart",void 0),s(h(t),"onprogress",void 0),s(h(t),"ontimeout",void 0),s(h(t),"onloadend",void 0),s(h(t),"onreadystatechange",void 0),s(h(t),"readyState",void 0),s(h(t),"response",void 0),s(h(t),"responseText",void 0),s(h(t),"_responseType",void 0),s(h(t),"responseXML",void 0),s(h(t),"status",void 0),s(h(t),"statusText",void 0),s(h(t),"upload",void 0),s(h(t),"withCredentials",void 0),s(h(t),"timeout",void 0),s(h(t),"_url",void 0),s(h(t),"_method",void 0),t.onabort=null,t.onerror=null,t.onload=null,t.onloadstart=null,t.onprogress=null,t.ontimeout=null,t.onloadend=null,t.onreadystatechange=null,t.readyState=0,t.response=null,t.responseText=null,t._responseType="text",t.responseXML=null,t.status=0,t.statusText="",t.upload={},t.withCredentials=!1,Zh.set("requestHeader",{"content-type":"application/x-www-form-urlencoded"}),t}return u(r,[{key:"responseType",set:function(t){this._responseType=t}},{key:"abort",value:function(){var t=$h.get("requestTask");t&&t.abort()}},{key:"getAllResponseHeaders",value:function(){var t=Yh.get("responseHeader");return Object.keys(t).map((function(e){return"".concat(e,": ").concat(t[e])})).join("\\n")}},{key:"getResponseHeader",value:function(t){return Yh.get("responseHeader")[t]}},{key:"open",value:function(t,e,r){this._method=t,this._url=e}},{key:"overrideMimeType",value:function(){}},{key:"send",value:function(){}},{key:"setRequestHeader",value:function(t,e){var r=Zh.get("requestHeader");r[t]=e,Zh.set("requestHeader",r)}},{key:"addEventListener",value:function(t,e){var r=this;"function"==typeof e&&(this["on"+t]=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};t.target=t.target||r,e.call(r,t)})}},{key:"removeEventListener",value:function(t,e){this["on"+t]===e&&(this["on"+t]=null)}}]),r}(ih);s(Kh,"UNSEND",void 0),s(Kh,"OPENED",void 0),s(Kh,"HEADERS_RECEIVED",void 0),s(Kh,"LOADING",void 0),s(Kh,"DONE",void 0),Kh.UNSEND=0,Kh.OPENED=1,Kh.HEADERS_RECEIVED=2,Kh.LOADING=3,Kh.DONE=4;var Qh="undefined"!=typeof my&&!!my&&"function"==typeof my.showToast&&!0!==my.isFRM,Xh="undefined"!=typeof wx&&null!==wx&&(void 0!==wx.request||void 0!==wx.miniProgram),Jh=Qh||Xh;Jh||Sf.XMLHttpRequest,Jh||Sf.location;function tp(t){return[t+1&255,t+1>>8&255,t+1>>8>>8&255]}var ep=Ei.filter,rp=Pi("filter");function np(t){var e=t.color;return e&&e.length?e:[1,1,1,1]}function op(t,e,r){return 2===r.length?[r[0],r[1],0]:[r[0],r[1],r[2]]}function ip(t){return t.filter?[1]:[0]}function ap(t,e){return[e]}ir({target:"Array",proto:!0,forced:!rp},{filter:function(t){return ep(this,t,arguments.length>1?arguments[1]:void 0)}});var up=cp,sp=cp;function cp(t,e,r){r=r||2;var n,o,i,a,u,s,c,f=e&&e.length,l=f?e[0]*r:t.length,h=fp(t,0,l,r,!0),p=[];if(!h||h.next===h.prev)return p;if(f&&(h=function(t,e,r,n){var o,i,a,u,s,c=[];for(o=0,i=e.length;o<i;o++)a=e[o]*n,u=o<i-1?e[o+1]*n:t.length,(s=fp(t,a,u,n,!1))===s.next&&(s.steiner=!0),c.push(wp(s));for(c.sort(gp),o=0;o<c.length;o++)r=mp(c[o],r);return r}(t,e,h,r)),t.length>80*r){n=i=t[0],o=a=t[1];for(var v=r;v<l;v+=r)(u=t[v])<n&&(n=u),(s=t[v+1])<o&&(o=s),u>i&&(i=u),s>a&&(a=s);c=0!==(c=Math.max(i-n,a-o))?32767/c:0}return hp(h,p,r,n,o,c,0),p}function fp(t,e,r,n,o){var i,a;if(o===Rp(t,e,r,n)>0)for(i=e;i<r;i+=n)a=_p(i,t[i],t[i+1],a);else for(i=r-n;i>=e;i-=n)a=_p(i,t[i],t[i+1],a);return a&&Sp(a,a.next)&&(Mp(a),a=a.next),a}function lp(t,e){if(!t)return t;e||(e=t);var r,n=t;do{if(r=!1,n.steiner||!Sp(n,n.next)&&0!==Op(n.prev,n,n.next))n=n.next;else{if(Mp(n),(n=e=n.prev)===n.next)break;r=!0}}while(r||n!==e);return e}function hp(t,e,r,n,o,i,a){if(t){!a&&i&&function(t,e,r,n){var o=t;do{0===o.z&&(o.z=bp(o.x,o.y,e,r,n)),o.prevZ=o.prev,o.nextZ=o.next,o=o.next}while(o!==t);o.prevZ.nextZ=null,o.prevZ=null,function(t){var e,r,n,o,i,a,u,s,c=1;do{for(r=t,t=null,i=null,a=0;r;){for(a++,n=r,u=0,e=0;e<c&&(u++,n=n.nextZ);e++);for(s=c;u>0||s>0&&n;)0!==u&&(0===s||!n||r.z<=n.z)?(o=r,r=r.nextZ,u--):(o=n,n=n.nextZ,s--),i?i.nextZ=o:t=o,o.prevZ=i,i=o;r=n}i.nextZ=null,c*=2}while(a>1)}(o)}(t,n,o,i);for(var u,s,c=t;t.prev!==t.next;)if(u=t.prev,s=t.next,i?vp(t,n,o,i):pp(t))e.push(u.i/r|0),e.push(t.i/r|0),e.push(s.i/r|0),Mp(t),t=s.next,c=s.next;else if((t=s)===c){a?1===a?hp(t=dp(lp(t),e,r),e,r,n,o,i,2):2===a&&yp(t,e,r,n,o,i):hp(lp(t),e,r,n,o,i,1);break}}}function pp(t){var e=t.prev,r=t,n=t.next;if(Op(e,r,n)>=0)return!1;for(var o=e.x,i=r.x,a=n.x,u=e.y,s=r.y,c=n.y,f=o<i?o<a?o:a:i<a?i:a,l=u<s?u<c?u:c:s<c?s:c,h=o>i?o>a?o:a:i>a?i:a,p=u>s?u>c?u:c:s>c?s:c,v=n.next;v!==e;){if(v.x>=f&&v.x<=h&&v.y>=l&&v.y<=p&&Ep(o,u,i,s,a,c,v.x,v.y)&&Op(v.prev,v,v.next)>=0)return!1;v=v.next}return!0}function vp(t,e,r,n){var o=t.prev,i=t,a=t.next;if(Op(o,i,a)>=0)return!1;for(var u=o.x,s=i.x,c=a.x,f=o.y,l=i.y,h=a.y,p=u<s?u<c?u:c:s<c?s:c,v=f<l?f<h?f:h:l<h?l:h,d=u>s?u>c?u:c:s>c?s:c,y=f>l?f>h?f:h:l>h?l:h,g=bp(p,v,e,r,n),m=bp(d,y,e,r,n),x=t.prevZ,b=t.nextZ;x&&x.z>=g&&b&&b.z<=m;){if(x.x>=p&&x.x<=d&&x.y>=v&&x.y<=y&&x!==o&&x!==a&&Ep(u,f,s,l,c,h,x.x,x.y)&&Op(x.prev,x,x.next)>=0)return!1;if(x=x.prevZ,b.x>=p&&b.x<=d&&b.y>=v&&b.y<=y&&b!==o&&b!==a&&Ep(u,f,s,l,c,h,b.x,b.y)&&Op(b.prev,b,b.next)>=0)return!1;b=b.nextZ}for(;x&&x.z>=g;){if(x.x>=p&&x.x<=d&&x.y>=v&&x.y<=y&&x!==o&&x!==a&&Ep(u,f,s,l,c,h,x.x,x.y)&&Op(x.prev,x,x.next)>=0)return!1;x=x.prevZ}for(;b&&b.z<=m;){if(b.x>=p&&b.x<=d&&b.y>=v&&b.y<=y&&b!==o&&b!==a&&Ep(u,f,s,l,c,h,b.x,b.y)&&Op(b.prev,b,b.next)>=0)return!1;b=b.nextZ}return!0}function dp(t,e,r){var n=t;do{var o=n.prev,i=n.next.next;!Sp(o,i)&&Tp(o,n,n.next,i)&&jp(o,i)&&jp(i,o)&&(e.push(o.i/r|0),e.push(n.i/r|0),e.push(i.i/r|0),Mp(n),Mp(n.next),n=t=i),n=n.next}while(n!==t);return lp(n)}function yp(t,e,r,n,o,i){var a=t;do{for(var u=a.next.next;u!==a.prev;){if(a.i!==u.i&&Ap(a,u)){var s=Pp(a,u);return a=lp(a,a.next),s=lp(s,s.next),hp(a,e,r,n,o,i,0),void hp(s,e,r,n,o,i,0)}u=u.next}a=a.next}while(a!==t)}function gp(t,e){return t.x-e.x}function mp(t,e){var r=function(t,e){var r,n=e,o=t.x,i=t.y,a=-1/0;do{if(i<=n.y&&i>=n.next.y&&n.next.y!==n.y){var u=n.x+(i-n.y)*(n.next.x-n.x)/(n.next.y-n.y);if(u<=o&&u>a&&(a=u,r=n.x<n.next.x?n:n.next,u===o))return r}n=n.next}while(n!==e);if(!r)return null;var s,c=r,f=r.x,l=r.y,h=1/0;n=r;do{o>=n.x&&n.x>=f&&o!==n.x&&Ep(i<l?o:a,i,f,l,i<l?a:o,i,n.x,n.y)&&(s=Math.abs(i-n.y)/(o-n.x),jp(n,t)&&(s<h||s===h&&(n.x>r.x||n.x===r.x&&xp(r,n)))&&(r=n,h=s)),n=n.next}while(n!==c);return r}(t,e);if(!r)return e;var n=Pp(r,t);return lp(n,n.next),lp(r,r.next)}function xp(t,e){return Op(t.prev,t,e.prev)<0&&Op(e.next,t,t.next)<0}function bp(t,e,r,n,o){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=(t-r)*o|0)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=(e-n)*o|0)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function wp(t){var e=t,r=t;do{(e.x<r.x||e.x===r.x&&e.y<r.y)&&(r=e),e=e.next}while(e!==t);return r}function Ep(t,e,r,n,o,i,a,u){return(o-a)*(e-u)>=(t-a)*(i-u)&&(t-a)*(n-u)>=(r-a)*(e-u)&&(r-a)*(i-u)>=(o-a)*(n-u)}function Ap(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!function(t,e){var r=t;do{if(r.i!==t.i&&r.next.i!==t.i&&r.i!==e.i&&r.next.i!==e.i&&Tp(r,r.next,t,e))return!0;r=r.next}while(r!==t);return!1}(t,e)&&(jp(t,e)&&jp(e,t)&&function(t,e){var r=t,n=!1,o=(t.x+e.x)/2,i=(t.y+e.y)/2;do{r.y>i!=r.next.y>i&&r.next.y!==r.y&&o<(r.next.x-r.x)*(i-r.y)/(r.next.y-r.y)+r.x&&(n=!n),r=r.next}while(r!==t);return n}(t,e)&&(Op(t.prev,t,e.prev)||Op(t,e.prev,e))||Sp(t,e)&&Op(t.prev,t,t.next)>0&&Op(e.prev,e,e.next)>0)}function Op(t,e,r){return(e.y-t.y)*(r.x-e.x)-(e.x-t.x)*(r.y-e.y)}function Sp(t,e){return t.x===e.x&&t.y===e.y}function Tp(t,e,r,n){var o=Ip(Op(t,e,r)),i=Ip(Op(t,e,n)),a=Ip(Op(r,n,t)),u=Ip(Op(r,n,e));return o!==i&&a!==u||(!(0!==o||!kp(t,r,e))||(!(0!==i||!kp(t,n,e))||(!(0!==a||!kp(r,t,n))||!(0!==u||!kp(r,e,n)))))}function kp(t,e,r){return e.x<=Math.max(t.x,r.x)&&e.x>=Math.min(t.x,r.x)&&e.y<=Math.max(t.y,r.y)&&e.y>=Math.min(t.y,r.y)}function Ip(t){return t>0?1:t<0?-1:0}function jp(t,e){return Op(t.prev,t,t.next)<0?Op(t,e,t.next)>=0&&Op(t,t.prev,e)>=0:Op(t,e,t.prev)<0||Op(t,t.next,e)<0}function Pp(t,e){var r=new Lp(t.i,t.x,t.y),n=new Lp(e.i,e.x,e.y),o=t.next,i=e.prev;return t.next=e,e.prev=t,r.next=o,o.prev=r,n.next=r,r.prev=n,i.next=n,n.prev=i,n}function _p(t,e,r,n){var o=new Lp(t,e,r);return n?(o.next=n.next,o.prev=n,n.next.prev=o,n.next=o):(o.prev=o,o.next=o),o}function Mp(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function Lp(t,e,r){this.i=t,this.x=e,this.y=r,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function Rp(t,e,r,n){for(var o=0,i=e,a=r-n;i<r;i+=n)o+=(t[a]-t[i])*(t[i+1]+t[a+1]),a=i;return o}cp.deviation=function(t,e,r,n){var o=e&&e.length,i=o?e[0]*r:t.length,a=Math.abs(Rp(t,0,i,r));if(o)for(var u=0,s=e.length;u<s;u++){var c=e[u]*r,f=u<s-1?e[u+1]*r:t.length;a-=Math.abs(Rp(t,c,f,r))}var l=0;for(u=0;u<n.length;u+=3){var h=n[u]*r,p=n[u+1]*r,v=n[u+2]*r;l+=Math.abs((t[h]-t[v])*(t[p+1]-t[h+1])-(t[h]-t[p])*(t[v+1]-t[h+1]))}return 0===a&&0===l?0:Math.abs((l-a)/a)},cp.flatten=function(t){for(var e=t[0][0].length,r={vertices:[],holes:[],dimensions:e},n=0,o=0;o<t.length;o++){for(var i=0;i<t[o].length;i++)for(var a=0;a<e;a++)r.vertices.push(t[o][i][a]);o>0&&(n+=t[o-1].length,r.holes.push(n))}return r},up.default=sp;var Cp=R(1..valueOf),Np=R("".replace),Dp="[\\t\\n\\v\\f\\r \xA0\u1680\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\\u2028\\u2029\\ufeff]",Fp=RegExp("^"+Dp+Dp+"*"),Wp=RegExp(Dp+Dp+"*$"),zp=function(t){return function(e){var r=rf(D(e));return 1&t&&(r=Np(r,Fp,"")),2&t&&(r=Np(r,Wp,"")),r}},Bp={start:zp(1),end:zp(2),trim:zp(3)},Up=qe.f,Gp=Ie.f,Hp=Ut.f,Vp=Bp.trim,qp=O.Number,Zp=qp.prototype,Yp=O.TypeError,$p=R("".slice),Kp=R("".charCodeAt),Qp=function(t){var e=Dt(t,"number");return"bigint"==typeof e?e:Xp(e)},Xp=function(t){var e,r,n,o,i,a,u,s,c=Dt(t,"number");if(It(c))throw Yp("Cannot convert a Symbol value to a number");if("string"==typeof c&&c.length>2)if(c=Vp(c),43===(e=Kp(c,0))||45===e){if(88===(r=Kp(c,2))||120===r)return NaN}else if(48===e){switch(Kp(c,1)){case 66:case 98:n=2,o=49;break;case 79:case 111:n=8,o=55;break;default:return+c}for(a=(i=$p(c,2)).length,u=0;u<a;u++)if((s=Kp(i,u))<48||s>o)return NaN;return parseInt(i,n)}return+c};if(nr("Number",!qp(" 0o1")||!qp("0b1")||qp("+0x1"))){for(var Jp,tv=function(t){var e=arguments.length<1?0:qp(Qp(t)),r=this;return Tt(Zp,r)&&j((function(){Cp(r)}))?ss(Object(e),r,tv):e},ev=pt?Up(qp):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,isFinite,isInteger,isNaN,isSafeInteger,parseFloat,parseInt,fromString,range".split(","),rv=0;ev.length>rv;rv++)B(qp,Jp=ev[rv])&&!B(tv,Jp)&&Hp(tv,Jp,Gp(qp,Jp));tv.prototype=Zp,Zp.constructor=tv,le(O,"Number",tv,{constructor:!0})}var nv=RangeError,ov=RangeError,iv=String,av=Math.floor,uv=R((function(t){var e=rf(D(this)),r="",n=Me(t);if(n<0||n==1/0)throw nv("Wrong number of repetitions");for(;n>0;(n>>>=1)&&(e+=e))1&n&&(r+=e);return r})),sv=R("".slice),cv=R(1..toFixed),fv=function(t,e,r){return 0===e?r:e%2==1?fv(t,e-1,r*t):fv(t*t,e/2,r)},lv=function(t,e,r){for(var n=-1,o=r;++n<6;)o+=e*t[n],t[n]=o%1e7,o=av(o/1e7)},hv=function(t,e){for(var r=6,n=0;--r>=0;)n+=t[r],t[r]=av(n/e),n=n%e*1e7},pv=function(t){for(var e=6,r="";--e>=0;)if(""!==r||0===e||0!==t[e]){var n=iv(t[e]);r=""===r?n:r+uv("0",7-n.length)+n}return r},vv=j((function(){return"0.000"!==cv(8e-5,3)||"1"!==cv(.9,0)||"1.25"!==cv(1.255,2)||"1000000000000000128"!==cv(0xde0b6b3a7640080,0)}))||!j((function(){cv({})}));function dv(t){return"number"==typeof t}function yv(t){var e=Math.max(Math.min(85.0511287798,t[1]),-85.0511287798),r=Math.PI/180,n=t[0]*r,o=e*r;o=Math.log(Math.tan(Math.PI/4+o/2));return n=(256<<20)*(.5/Math.PI*n+.5),o=(256<<20)*(-.5/Math.PI*o+(r=.5)),[Math.floor(n),Math.floor(o)]}ir({target:"Number",proto:!0,forced:vv},{toFixed:function(t){var e,r,n,o,i=Cp(this),a=Me(t),u=[0,0,0,0,0,0],s="",c="0";if(a<0||a>20)throw ov("Incorrect fraction digits");if(i!=i)return"NaN";if(i<=-1e21||i>=1e21)return iv(i);if(i<0&&(s="-",i=-i),i>1e-21)if(r=(e=function(t){for(var e=0,r=t;r>=4096;)e+=12,r/=4096;for(;r>=2;)e+=1,r/=2;return e}(i*fv(2,69,1))-69)<0?i*fv(2,-e,1):i/fv(2,e,1),r*=4503599627370496,(e=52-e)>0){for(lv(u,0,r),n=a;n>=7;)lv(u,1e7,0),n-=7;for(lv(u,fv(10,n,1),0),n=e-1;n>=23;)hv(u,1<<23),n-=23;hv(u,1<<n),lv(u,1,1),hv(u,2),c=pv(u)}else lv(u,0,r),lv(u,1<<-e,0),c=pv(u)+uv("0",a);return c=a>0?s+((o=c.length)<=a?"0."+uv("0",a-o)+c:sv(c,0,o-a)+"."+sv(c,o-a)):s+c}});var gv,mv=/"/g,xv=R("".replace);ir({target:"String",proto:!0,forced:(gv="sub",j((function(){var t=""[gv]('"');return t!==t.toLowerCase()||t.split('"').length>3})))},{sub:function(){return t="sub",e="",r="",n=rf(D(this)),o="<"+t,""!==e&&(o+=" "+e+'="'+xv(rf(r),mv,"&quot;")+'"'),o+">"+n+"</"+t+">";var t,e,r,n,o}});var bv=RegExp.prototype,wv=qt.PROPER,Ev=RegExp.prototype.toString,Av=j((function(){return"/a/b"!=Ev.call({source:"a",flags:"b"})})),Ov=wv&&"toString"!=Ev.name;(Av||Ov)&&le(RegExp.prototype,"toString",(function(){var t=At(this);return"/"+rf(t.source)+"/"+rf(function(t){var e=t.flags;return void 0!==e||"flags"in bv||B(t,"flags")||!Tt(bv,t)?e:St(nf,t)}(t))}),{unsafe:!0});var Sv="undefined"!=typeof Float32Array?Float32Array:Array;function Tv(){var t=new Sv(2);return Sv!=Float32Array&&(t[0]=0,t[1]=0),t}function kv(t,e){var r=new Sv(2);return r[0]=t,r[1]=e,r}function Iv(t,e){return t[0]=e[0],t[1]=e[1],t}function jv(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t}function Pv(t,e,r){return t[0]=e[0]-r[0],t[1]=e[1]-r[1],t}function _v(t,e){var r=e[0],n=e[1],o=r*r+n*n;return o>0&&(o=1/Math.sqrt(o)),t[0]=e[0]*o,t[1]=e[1]*o,t}function Mv(t,e){return t[0]*e[0]+t[1]*e[1]}Math.hypot||(Math.hypot=function(){for(var t=0,e=arguments.length;e--;)t+=arguments[e]*arguments[e];return Math.sqrt(t)});var Lv,Rv=Pv,Cv=(Lv=Tv(),Tv()),Nv=(Tv(),Tv()),Dv=Tv(),Fv=Tv();function Wv(t,e,r,n,o){return jv(t,r,n),_v(t,t),[o/Mv(e=kv(-t[1],t[0]),kv(-r[1],r[0])),e]}function zv(t,e){return function(t,e,r){return t[0]=e,t[1]=r,t}(t,-e[1],e[0])}function Bv(t,e,r){return Rv(t,e,r),_v(t,t),t}function Uv(t,e){return t[0]===e[0]&&t[1]===e[1]}var Gv=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,t),s(this,"complex",void 0),s(this,"join",void 0),s(this,"cap",void 0),s(this,"miterLimit",void 0),s(this,"thickness",void 0),s(this,"normal",void 0),s(this,"lastFlip",-1),s(this,"miter",kv(0,0)),s(this,"started",!1),s(this,"dash",!1),s(this,"totalDistance",0),s(this,"currentIndex",0),this.join=e.join||"miter",this.cap=e.cap||"butt",this.miterLimit=e.miterLimit||10,this.thickness=e.thickness||1,this.dash=e.dash||!1,this.complex={positions:[],indices:[],normals:[],startIndex:0,indexes:[]}}return u(t,[{key:"extrude_gaode2",value:function(t,e){var r=this.complex;if(t.length<=1)return r;this.lastFlip=-1,this.started=!1,this.normal=null,this.totalDistance=0;for(var n=t.length,o=r.startIndex,i=1;i<n;i++){var a,u,s,c=t[i-1];c.push(null!==(a=e[i-1][2])&&void 0!==a?a:0);var f=e[i-1],l=t[i];l.push(null!==(u=e[i][2])&&void 0!==u?u:0);var h=e[i],p=i<t.length-1?[].concat(y(t[i+1]),[null!==(s=e[i+1][2])&&void 0!==s?s:0]):null,v=i<e.length-1?e[i+1]:null;o+=this.segment_gaode2(r,o,c,l,p,f,h,v)}if(this.dash)for(var d=0;d<r.positions.length/6;d++)r.positions[6*d+5]=this.totalDistance;return r.startIndex=r.positions.length/6,r}},{key:"simpleExtrude_gaode2",value:function(t,e){var r=this.complex;if(t.length<=1)return r;this.lastFlip=-1,this.started=!1,this.normal=null,this.totalDistance=0;for(var n=t.length,o=r.startIndex,i=1;i<n;i++){var a,u,s,c=t[i-1];c.push(null!==(a=e[i-1][2])&&void 0!==a?a:0);var f=e[i-1],l=t[i];l.push(null!==(u=e[i][2])&&void 0!==u?u:0);var h=e[i],p=i<t.length-1?[].concat(y(t[i+1]),[null!==(s=e[i+1][2])&&void 0!==s?s:0]):null,v=i<e.length-1?e[i+1]:null;o+=this.simpleSegment(r,o,c,l,p,f,h,v)}if(this.dash)for(var d=0;d<r.positions.length/6;d++)r.positions[6*d+5]=this.totalDistance;return r.startIndex=r.positions.length/6,r}},{key:"extrude",value:function(t){var e=this.complex;if(t.length<=1)return e;this.lastFlip=-1,this.started=!1,this.normal=null,this.totalDistance=0;for(var r=t.length,n=e.startIndex,o=1;o<r;o++){var i=t[o-1],a=t[o],u=o<t.length-1?t[o+1]:null;n+=this.segment(e,n,i,a,u)}if(this.dash)for(var s=0;s<e.positions.length/6;s++)e.positions[6*s+5]=this.totalDistance;return e.startIndex=e.positions.length/6,e}},{key:"simpleExtrude",value:function(t){var e=this.complex;if(t.length<=1)return e;this.lastFlip=-1,this.started=!1,this.normal=null,this.totalDistance=0;for(var r=t.length,n=e.startIndex,o=1;o<r;o++){var i=t[o-1],a=t[o],u=o<t.length-1?t[o+1]:null;n+=this.simpleSegment(e,n,i,a,u)}if(this.dash)for(var s=0;s<e.positions.length/6;s++)e.positions[6*s+5]=this.totalDistance;return e.startIndex=e.positions.length/6,e}},{key:"segment_gaode2",value:function(t,e,r,n,o,i,a,u){var s=0,c=t.indices,f=t.positions,l=t.normals,h="square"===this.cap,p="bevel"===this.join,v=yv([a[0],a[1]]),g=yv([i[0],i[1]]);Bv(Nv,n,r);var m=0;if(this.dash&&(m=this.lineSegmentDistance(v,g),this.totalDistance+=m),this.normal||(this.normal=Tv(),zv(this.normal,Nv)),!this.started)if(this.started=!0,h){var x=Tv(),b=Tv();jv(x,this.normal,Nv),jv(b,this.normal,Nv),l.push(b[0],b[1],0),l.push(x[0],x[1],0),f.push(r[0],r[1],0|r[2],this.totalDistance-m,-this.thickness,0|r[2]),this.complex.indexes.push(this.currentIndex),f.push(r[0],r[1],0|r[2],this.totalDistance-m,this.thickness,0|r[2]),this.complex.indexes.push(this.currentIndex),this.currentIndex++}else this.extrusions(f,l,r,this.normal,this.thickness,this.totalDistance-m);if(c.push(e+0,e+1,e+2),o){Uv(n,o)&&jv(o,n,_v(o,Pv(o,n,r))),Bv(Dv,o,n);var w=d(Wv(Fv,Tv(),Nv,Dv,this.thickness),2),E=w[0],A=w[1],O=Mv(Fv,this.normal)<0?-1:1,S=p;if(!S&&"miter"===this.join)E>this.miterLimit&&(S=!0);S?(l.push(this.normal[0],this.normal[1],0),l.push(A[0],A[1],0),f.push(n[0],n[1],0|n[2],this.totalDistance,-this.thickness*O,0|n[2]),this.complex.indexes.push(this.currentIndex),f.push(n[0],n[1],0|n[2],this.totalDistance,this.thickness*O,0|n[2]),this.complex.indexes.push(this.currentIndex),this.currentIndex++,c.push.apply(c,y(this.lastFlip!==-O?[e,e+2,e+3]:[e+2,e+1,e+3])),c.push(e+2,e+3,e+4),zv(Cv,Dv),Iv(this.normal,Cv),l.push(this.normal[0],this.normal[1],0),f.push(n[0],n[1],0|n[2],this.totalDistance,-this.thickness*O,0|n[2]),this.complex.indexes.push(this.currentIndex),this.currentIndex++,s+=3):(this.extrusions(f,l,n,A,E,this.totalDistance),c.push.apply(c,y(1===this.lastFlip?[e,e+2,e+3]:[e+2,e+1,e+3])),O=-1,Iv(this.normal,A),s+=2),this.lastFlip=O}else{if(zv(this.normal,Nv),h){var T=Tv(),k=Tv();Rv(k,Nv,this.normal),jv(T,Nv,this.normal),l.push(k[0],k[1],0),l.push(T[0],T[1],0),f.push(n[0],n[1],0|n[2],this.totalDistance,this.thickness,0|n[2]),this.complex.indexes.push(this.currentIndex),f.push(n[0],n[1],0|n[2],this.totalDistance,this.thickness,0|n[2]),this.complex.indexes.push(this.currentIndex),this.currentIndex++}else this.extrusions(f,l,n,this.normal,this.thickness,this.totalDistance);c.push.apply(c,y(1===this.lastFlip?[e,e+2,e+3]:[e+2,e+1,e+3])),s+=2}return s}},{key:"simpleSegment",value:function(t,e,r,n,o){var i=0,a=t.indices,u=t.positions,s=t.normals,c=yv([n[0],n[1]]),f=yv([r[0],r[1]]);Bv(Nv,c,f);var l=0;if(this.dash&&(l=this.lineSegmentDistance(c,f),this.totalDistance+=l),this.normal||(this.normal=Tv(),zv(this.normal,Nv)),this.started||(this.started=!0,this.extrusions(u,s,r,this.normal,this.thickness,this.totalDistance-l)),a.push(e+0,e+1,e+2),o){var h=yv([o[0],o[1]]);Uv(c,h)&&jv(h,c,_v(h,Pv(h,c,f))),Bv(Dv,h,c);var p=d(Wv(Fv,Tv(),Nv,Dv,this.thickness),2),v=p[0],g=p[1];Mv(Fv,this.normal);this.extrusions(u,s,n,g,v,this.totalDistance),a.push.apply(a,y(1===this.lastFlip?[e,e+2,e+3]:[e+2,e+1,e+3])),-1,Iv(this.normal,g),i+=2,this.lastFlip=-1}else zv(this.normal,Nv),this.extrusions(u,s,n,this.normal,this.thickness,this.totalDistance),a.push.apply(a,y(1===this.lastFlip?[e,e+2,e+3]:[e+2,e+1,e+3])),i+=2;return i}},{key:"segment",value:function(t,e,r,n,o){var i=0,a=t.indices,u=t.positions,s=t.normals,c="square"===this.cap,f="bevel"===this.join,l=yv([n[0],n[1]]),h=yv([r[0],r[1]]);Bv(Nv,l,h);var p=0;if(this.dash&&(p=this.lineSegmentDistance(l,h),this.totalDistance+=p),this.normal||(this.normal=Tv(),zv(this.normal,Nv)),!this.started)if(this.started=!0,c){var v=Tv(),g=Tv();jv(v,this.normal,Nv),jv(g,this.normal,Nv),s.push(g[0],g[1],0),s.push(v[0],v[1],0),u.push(r[0],r[1],0|r[2],this.totalDistance-p,-this.thickness,0|r[2]),this.complex.indexes.push(this.currentIndex),u.push(r[0],r[1],0|r[2],this.totalDistance-p,this.thickness,0|r[2]),this.complex.indexes.push(this.currentIndex),this.currentIndex++}else this.extrusions(u,s,r,this.normal,this.thickness,this.totalDistance-p);if(a.push(e+0,e+1,e+2),o){var m=yv([o[0],o[1]]);Uv(l,m)&&jv(m,l,_v(m,Pv(m,l,h))),Bv(Dv,m,l);var x=d(Wv(Fv,Tv(),Nv,Dv,this.thickness),2),b=x[0],w=x[1],E=Mv(Fv,this.normal)<0?-1:1,A=f;if(!A&&"miter"===this.join)b>this.miterLimit&&(A=!0);A?(s.push(this.normal[0],this.normal[1],0),s.push(w[0],w[1],0),u.push(n[0],n[1],0|n[2],this.totalDistance,-this.thickness*E,0|n[2]),this.complex.indexes.push(this.currentIndex),u.push(n[0],n[1],0|n[2],this.totalDistance,this.thickness*E,0|n[2]),this.complex.indexes.push(this.currentIndex),this.currentIndex++,a.push.apply(a,y(this.lastFlip!==-E?[e,e+2,e+3]:[e+2,e+1,e+3])),a.push(e+2,e+3,e+4),zv(Cv,Dv),Iv(this.normal,Cv),s.push(this.normal[0],this.normal[1],0),u.push(n[0],n[1],0|n[2],this.totalDistance,-this.thickness*E,0|n[2]),this.complex.indexes.push(this.currentIndex),this.currentIndex++,i+=3):(this.extrusions(u,s,n,w,b,this.totalDistance),a.push.apply(a,y(1===this.lastFlip?[e,e+2,e+3]:[e+2,e+1,e+3])),E=-1,Iv(this.normal,w),i+=2),this.lastFlip=E}else{if(zv(this.normal,Nv),c){var O=Tv(),S=Tv();Rv(S,Nv,this.normal),jv(O,Nv,this.normal),s.push(S[0],S[1],0),s.push(O[0],O[1],0),u.push(n[0],n[1],0|n[2],this.totalDistance,this.thickness,0|n[2]),this.complex.indexes.push(this.currentIndex),u.push(n[0],n[1],0|n[2],this.totalDistance,this.thickness,0|n[2]),this.complex.indexes.push(this.currentIndex),this.currentIndex++}else this.extrusions(u,s,n,this.normal,this.thickness,this.totalDistance);a.push.apply(a,y(1===this.lastFlip?[e,e+2,e+3]:[e+2,e+1,e+3])),i+=2}return i}},{key:"extrusions",value:function(t,e,r,n,o,i){e.push(n[0],n[1],0),e.push(n[0],n[1],0),t.push(r[0],r[1],0|r[2],i,-o,0|r[2]),this.complex.indexes.push(this.currentIndex),t.push(r[0],r[1],0|r[2],i,o,0|r[2]),this.complex.indexes.push(this.currentIndex),this.currentIndex++}},{key:"lineSegmentDistance",value:function(t,e){var r=e[0]-t[0],n=e[1]-t[1];return Math.sqrt(r*r+n*n)}}]),t}();function Hv(t){var e=t.coordinates,r=t.originCoordinates,n=t.version,o=new Gv({dash:!0,join:"bevel"});if("GAODE2.x"===n){var i=e;Array.isArray(i[0][0])||(i=[e]);var a=r;Array.isArray(a[0][0])||(a=[r]);for(var u=0;u<i.length;u++){var s=i[u],c=a[u];o.extrude_gaode2(s,c)}}else{var f=e;f[0]&&!Array.isArray(f[0][0])&&(f=[e]),f.forEach((function(t){o.extrude(t)}))}var l=o.complex;return{vertices:l.positions,indices:l.indices,normals:l.normals,indexes:l.indexes,size:6}}function Vv(t){var e=function(t){if(dv(t[0]))return t;if(dv(t[0][0]))throw new Error("\u5F53\u524D\u6570\u636E\u4E0D\u652F\u6301\u6807\u6CE8");if(dv(t[0][0][0])){var e=0,r=0,n=0;return t.forEach((function(t){t.forEach((function(t){e+=t[0],r+=t[1],n++}))})),[e/n,r/n,0]}throw new Error("\u5F53\u524D\u6570\u636E\u4E0D\u652F\u6301\u6807\u6CE8")}(t.coordinates);return{vertices:[].concat(y(e),y(e),y(e),y(e)),indices:[0,1,2,2,3,0],size:e.length}}function qv(t){var e=t.coordinates,r=up.flatten(e),n=r.vertices,o=r.dimensions,i=r.holes;return{indices:up(n,i,o),vertices:n,size:o}}var Zv=function(){var t=o(r().mark((function t(e){var n,o,i,a,u,s,c,f,l;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.descriptors,o=e.features,i=e.enablePicking,a=e.iconMap,u={a_Color:np,a_Position:op,filter:ip,a_vertexId:ap,a_PickingColor:function(t){var e=t.id;return i?tp(e):[0,0,0]},a_DistanceAndIndex:function(t,e,r,n,o,i){return void 0===i?[r[3],10]:[r[3],i]},a_Total_Distance:function(t,e,r){return[r[5]]},a_Size:function(t){var e=t.size,r=void 0===e?1:e;return Array.isArray(r)?[r[0],r[1]]:[r,0]},a_Normal:function(t,e,r,n,o){return o},a_Miter:function(t,e,r){return[r[4]]},a_iconMapUV:function(t){var e=t.texture,r=a[e]||{x:0,y:0};return[r.x,r.y]}},s={sizePerElement:0,elements:[]},c=0,f=[],l=3,o.forEach((function(t,e){var r=Hv(t),o=r.indices,i=r.vertices,a=r.normals,h=r.size,p=r.indexes;o.forEach((function(t){f.push(t+c)})),l=h;var v=i.length/h;s.sizePerElement=l,s.elements.push({featureIdx:e,vertices:i,normals:a,offset:c}),c+=v;for(var d=function(r){var o=(null==a?void 0:a.slice(3*r,3*r+3))||[],s=i.slice(r*h,r*h+h),c=0;p&&void 0!==p[r]&&(c=p[r]),n.forEach((function(n){var i;n&&u[n.name]&&(i=n.buffer.data).push.apply(i,y(u[n.name](t,e,s,r,o,c)))}))},g=0;g<v;g++)d(g)})),t.abrupt("return",{descriptors:n,featureLayout:s,indices:f});case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),Yv={pointFill:function(){var t=o(r().mark((function t(e){var n,o,i,a,u,s,c,f,l;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.descriptors,o=e.features,i=e.enablePicking,a=e.shape2d,u={a_Color:np,a_Position:op,filter:ip,a_vertexId:ap,a_PickingColor:function(t){var e=t.id;return i?tp(e):[0,0,0]},a_Shape:function(t){var e=t.shape,r=void 0===e?2:e;return[a.indexOf(r)]},a_Extrude:function(t,e,r,n){var o=[1,1,0,-1,1,0,-1,-1,0,1,-1,0],i=n%4*3;return[o[i],o[i+1],o[i+2]]},a_Size:function(t){var e=t.size,r=void 0===e?5:e;return Array.isArray(r)?[r[0]]:[r]}},s={sizePerElement:0,elements:[]},c=0,f=[],l=3,o.forEach((function(t,e){var r=Vv(t),o=r.indices,i=r.vertices,a=r.normals,h=r.size;o.forEach((function(t){f.push(t+c)})),l=h;var p=i.length/h;s.sizePerElement=l,s.elements.push({featureIdx:e,vertices:i,normals:a,offset:c}),c+=p;for(var v=function(r){var o=[],a=i.slice(r*h,r*h+h);n.forEach((function(n){var i;n&&u[n.name]&&(i=n.buffer.data).push.apply(i,y(u[n.name](t,e,a,r,o,0)))}))},d=0;d<p;d++)v(d)})),t.abrupt("return",{descriptors:n,featureLayout:s,indices:f});case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),line:Zv,polygonFill:function(){var t=o(r().mark((function t(e){var n,o,i,a,u,s,c,f;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.descriptors,o=e.features,i=e.enablePicking,a={a_Color:np,a_Position:op,filter:ip,a_vertexId:ap,a_PickingColor:function(t){var e=t.id;return i?tp(e):[0,0,0]}},u={sizePerElement:0,elements:[]},s=0,c=[],f=3,o.forEach((function(t,e){var r=qv(t),o=r.indices,i=r.vertices,l=r.normals,h=r.size;o.forEach((function(t){c.push(t+s)})),f=h;var p=i.length/h;u.sizePerElement=f,u.elements.push({featureIdx:e,vertices:i,normals:l,offset:s}),s+=p;for(var v=function(r){var o=[],u=i.slice(r*h,r*h+h);n.forEach((function(n){var i;n&&a[n.name]&&(i=n.buffer.data).push.apply(i,y(a[n.name](t,e,u,r,o,0)))}))},d=0;d<p;d++)v(d)})),t.abrupt("return",{descriptors:n,featureLayout:u,indices:c});case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},$v=function(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?e(Object(n),!0).forEach((function(e){s(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):e(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},Yv);function Kv(t){return Qv.apply(this,arguments)}function Qv(){return(Qv=o(r().mark((function t(e){var n,o;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.workerType,o=e.data,!$v[n]){t.next=3;break}return t.abrupt("return",$v[n](o));case 3:return t.abrupt("return",Promise.reject(new Error('Worker with type "'.concat(n,'" non-existent.'))));case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return fi(Kv),t.WorkerSourceMap=Yv,t.createWorker=fi,t.worker=Kv,t}({});
`,_i="l7-worker",ao=3,La=!0;function Qi(e){mi(_i,e)}function aa(){var e=qn(_i);if(!e)throw new Error("get worker failed by workerName: ".concat(_i,"."));return e}function Fa(e,i){return $a.apply(this,arguments)}function $a(){return $a=(0,An.Z)(Nt().mark(function e(i,t){var n,r,o,u,f;return Nt().wrap(function(x){for(;;)switch(x.prev=x.next){case 0:return n=aa(),r=Gf.getWorkerFarm({maxConcurrency:ao,reuseWorkers:La}),o=r.getWorkerPool({name:_i,source:n}),x.next=5,o.startJob(_i,function(I,P,G){return I.done(G)});case 5:return u=x.sent,u.postMessage("process",{input:{workerType:i,data:t}}),x.next=9,u.result;case 9:return f=x.sent,x.abrupt("return",f.result);case 11:case"end":return x.stop()}},e)})),$a.apply(this,arguments)}Qi(Ii);var oo={BACK:1029,FRONT:1028};function is(e){switch(e){case"GAODE1.x":return oo.BACK;case"GAODE2.x":return oo.BACK;case"MAPBOX":return oo.FRONT;case"SIMPLE":return oo.FRONT;case"GLOBEL":return oo.BACK;case"DEBAULT":return oo.FRONT;default:return oo.FRONT}}function Yo(e){return typeof ImageBitmap!="undefined"&&e instanceof ImageBitmap}function Po(){return typeof importScripts=="function"}var js=Po()?function(){return self.worker&&self.worker.referrer}:function(){return(window.location.protocol==="blob:"?window.parent:window).location.href},Uo;(function(e){e.Realtime="realtime",e.Overlap="overlap",e.Replace="replace"})(Uo||(Uo={}));var cs;(function(e){e.Loading="Loading",e.Loaded="Loaded",e.Failure="Failure",e.Cancelled="Cancelled"})(cs||(cs={}));var Vs=0,Ls=1,Zo=2;function Io(e){e.forEach(function(i){i.isCurrent&&(i.isVisible=i.isLoaded)})}function Go(e){e.forEach(function(i){i.properties.state=Vs}),e.forEach(function(i){i.isCurrent&&!as(i)&&so(i)}),e.forEach(function(i){i.isVisible=Boolean(i.properties.state&Zo)})}function Za(e){e.forEach(function(t){t.properties.state=Vs}),e.forEach(function(t){t.isCurrent&&as(t)});var i=e.slice().sort(function(t,n){return t.z-n.z});i.forEach(function(t){t.isVisible=Boolean(t.properties.state&Zo),t.children.length&&(t.isVisible||t.properties.state&Ls)?t.children.forEach(function(n){n.properties.state=Ls}):t.isCurrent&&so(t)})}function as(e){for(;e;){if(e.isLoaded)return e.properties.state|=Zo,!0;e=e.parent}return!1}function so(e){e.children.forEach(function(i){i.isLoaded?i.properties.state|=Zo:so(i)})}var iu,Oa=256,ko=[-1/0,-1/0,1/0,1/0],Xo=.2,Hs=5,jo=(iu={},(0,He.Z)(iu,Uo.Realtime,Io),(0,He.Z)(iu,Uo.Overlap,Go),(0,He.Z)(iu,Uo.Replace,Za),iu),Dt=function(){};function an(e,i,t){var n=Math.floor((e+180)/360*Math.pow(2,t)),r=Math.floor((1-Math.log(Math.tan(i*Math.PI/180)+1/Math.cos(i*Math.PI/180))/Math.PI)/2*Math.pow(2,t));return[n,r]}function un(e,i,t){var n=e/Math.pow(2,t)*360-180,r=Math.PI-2*Math.PI*i/Math.pow(2,t),o=180/Math.PI*Math.atan(.5*(Math.exp(r)-Math.exp(-r)));return[n,o]}var oa=function(i,t,n){var r=un(i,t,n),o=(0,Mr.Z)(r,2),u=o[0],f=o[1],g=un(i+1,t+1,n),x=(0,Mr.Z)(g,2),I=x[0],P=x[1];return[u,P,I,f]};function Do(e){var i=e.zoom,t=e.latLonBounds,n=e.maxZoom,r=n===void 0?1/0:n,o=e.minZoom,u=o===void 0?0:o,f=e.zoomOffset,g=f===void 0?0:f,x=e.extent,I=x===void 0?ko:x,P=Math.ceil(i)+g;if(Number.isFinite(u)&&P<u)return[];Number.isFinite(r)&&P>r&&(P=r);for(var G=(0,Mr.Z)(t,4),$=G[0],Ee=G[1],Se=G[2],Re=G[3],Ye=[Math.max($,I[0]),Math.max(Ee,I[1]),Math.min(Se,I[2]),Math.min(Re,I[3])],St=[],vt=an(Ye[0],Ye[1],P),Ut=(0,Mr.Z)(vt,2),Kt=Ut[0],Tr=Ut[1],on=an(Ye[2],Ye[3],P),dn=(0,Mr.Z)(on,2),vn=dn[0],si=dn[1],ai=Kt;ai<=vn;ai++)for(var Hi=si;Hi<=Tr;Hi++)St.push({x:ai,y:Hi,z:P});var wa=(vn+Kt)/2,qa=(Tr+si)/2,zs=function(Ul,Gl){return Math.abs(Ul-wa)+Math.abs(Gl-qa)};return St.sort(function(Ou,Ul){return zs(Ou.x,Ou.y)-zs(Ul.x,Ul.y)}),St}var Ht=function(i,t,n){var r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0,o=Math.pow(2,n),u=o-1,f=o,g=i,x=t;return r&&(g<0?g=g+f:g>u&&(g=g%f)),{warpX:g,warpY:x}};function Mt(e){return/(?=.*{z})(?=.*{x})(?=.*({y}|{-y}))/.test(e)}function yr(e){var i=[],t=/\{([a-z])-([a-z])\}/.exec(e);if(t){var n=t[1].charCodeAt(0),r=t[2].charCodeAt(0),o;for(o=n;o<=r;++o)i.push(e.replace(t[0],String.fromCharCode(o)));return i}if(t=/\{(\d+)-(\d+)\}/.exec(e),t){for(var u=parseInt(t[2],10),f=parseInt(t[1],10);f<=u;f++)i.push(e.replace(t[0],f.toString()));return i}return i.push(e),i}function Zr(e,i){if(!e||!e.length)throw new Error("url is not allowed to be empty");var t=i.x,n=i.y,r=i.z,o=yr(e),u=Math.abs(t+n)%o.length,f=o[u];return f.replace(/\{x\}/g,t.toString()).replace(/\{y\}/g,n.toString()).replace(/\{z\}/g,r.toString()).replace(/\{bbox\}/g,oa(t,n,r).join(",")).replace(/\{-y\}/g,(Math.pow(2,r)-n-1).toString())}function Sn(e,i){var t=i.x,n=i.y,r=i.z,o=i.layer,u=i.version,f=u===void 0?"1.0.0":u,g=i.style,x=g===void 0?"default":g,I=i.format,P=i.service,G=P===void 0?"WMTS":P,$=i.tileMatrixset,Ee="".concat(e,"&SERVICE=").concat(G,"&REQUEST=GetTile&VERSION=").concat(f,"&LAYER=").concat(o,"&STYLE=").concat(x,"&TILEMATRIXSET=").concat($,"&FORMAT=").concat(I,"&TILECOL=").concat(t,"&TILEROW=").concat(n,"&TILEMATRIX=").concat(r);return Ee}function Or(e,i){i===void 0&&(i={});var t=Number(e[0]),n=Number(e[1]),r=Number(e[2]),o=Number(e[3]);if(e.length===6)throw new Error("@turf/bbox-polygon does not support BBox with 6 positions");var u=[t,n],f=[t,o],g=[r,o],x=[r,n];return xr([[u,x,g,f,u]],i.properties,{bbox:e,id:i.id})}var ir=c(11312),Br=c.n(ir);function kt(e){var i=fr();return function(){var n=(0,rr.Z)(e),r;if(i){var o=(0,rr.Z)(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return(0,jn.Z)(this,r)}}function fr(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var jt=function(e){(0,ui.Z)(t,e);var i=kt(t);function t(n){var r;(0,Ur.Z)(this,t),r=i.call(this),(0,He.Z)((0,er.Z)(r),"tileSize",256),(0,He.Z)((0,er.Z)(r),"isVisible",!1),(0,He.Z)((0,er.Z)(r),"isCurrent",!1),(0,He.Z)((0,er.Z)(r),"isVisibleChange",!1),(0,He.Z)((0,er.Z)(r),"loadedLayers",0),(0,He.Z)((0,er.Z)(r),"isLayerLoaded",!1),(0,He.Z)((0,er.Z)(r),"isLoad",!1),(0,He.Z)((0,er.Z)(r),"isChildLoad",!1),(0,He.Z)((0,er.Z)(r),"parent",null),(0,He.Z)((0,er.Z)(r),"children",[]),(0,He.Z)((0,er.Z)(r),"data",null),(0,He.Z)((0,er.Z)(r),"properties",{}),(0,He.Z)((0,er.Z)(r),"loadDataId",0);var o=n.x,u=n.y,f=n.z,g=n.tileSize,x=n.warp,I=x===void 0?!0:x;return r.x=o,r.y=u,r.z=f,r.warp=I||!0,r.tileSize=g,r}return(0,Jr.Z)(t,[{key:"isLoading",get:function(){return this.loadStatus===cs.Loading}},{key:"isLoaded",get:function(){return this.loadStatus===cs.Loaded}},{key:"isFailure",get:function(){return this.loadStatus===cs.Failure}},{key:"setTileLayerLoaded",value:function(){this.isLayerLoaded=!0}},{key:"isCancelled",get:function(){return this.loadStatus===cs.Cancelled}},{key:"isDone",get:function(){return[cs.Loaded,cs.Cancelled,cs.Failure].includes(this.loadStatus)}},{key:"bounds",get:function(){return oa(this.x,this.y,this.z)}},{key:"bboxPolygon",get:function(){var r=(0,Mr.Z)(this.bounds,4),o=r[0],u=r[1],f=r[2],g=r[3],x=[(f-o)/2,(g-u)/2],I=Or(this.bounds,{properties:{key:this.key,id:this.key,bbox:this.bounds,center:x,meta:`
      `.concat(this.key,`
      `)}});return I}},{key:"key",get:function(){var r="".concat(this.x,"_").concat(this.y,"_").concat(this.z);return r}},{key:"layerLoad",value:function(){this.loadedLayers++,this.emit("layerLoaded")}},{key:"loadData",value:function(){var n=(0,An.Z)(Nt().mark(function o(u){var f,g,x,I,P,G,$,Ee,Se,Re,Ye,St,vt,Ut,Kt,Tr,on;return Nt().wrap(function(vn){for(;;)switch(vn.prev=vn.next){case 0:return f=u.getData,g=u.onLoad,x=u.onError,this.loadDataId++,I=this.loadDataId,this.isLoading&&this.abortLoad(),this.abortController=new AbortController,this.loadStatus=cs.Loading,P=null,vn.prev=7,$=this.x,Ee=this.y,Se=this.z,Re=this.bounds,Ye=this.tileSize,St=this.warp,vt=Ht($,Ee,Se,St),Ut=vt.warpX,Kt=vt.warpY,Tr=this.abortController.signal,on={x:Ut,y:Kt,z:Se,bounds:Re,tileSize:Ye,signal:Tr,warp:St},vn.next=14,f(on,this);case 14:P=vn.sent,vn.next=20;break;case 17:vn.prev=17,vn.t0=vn.catch(7),G=vn.t0;case 20:if(I===this.loadDataId){vn.next=22;break}return vn.abrupt("return");case 22:if(!(this.isCancelled&&!P)){vn.next=24;break}return vn.abrupt("return");case 24:if(!(G||!P)){vn.next=28;break}return this.loadStatus=cs.Failure,x(G,this),vn.abrupt("return");case 28:this.loadStatus=cs.Loaded,this.data=P,g(this);case 31:case"end":return vn.stop()}},o,this,[[7,17]])}));function r(o){return n.apply(this,arguments)}return r}()},{key:"reloadData",value:function(r){this.isLoading&&this.abortLoad(),this.loadData(r)}},{key:"abortLoad",value:function(){this.isLoaded||this.isCancelled||(this.loadStatus=cs.Cancelled,this.abortController.abort(),this.xhrCancel&&this.xhrCancel())}}]),t}(ir.EventEmitter),rn=function(i,t){var n=Cs(i),r=cl(n,t),o=360*3-180,u=85.0511287798065,f=[Math.max(r[0][0],-o),Math.max(r[0][1],-u),Math.min(r[1][0],o),Math.min(r[1][1],u)];return f},jr=function(i,t){var n=Cs(i),r=Cs(t),o=Dl(n,r);return o};function Cn(e,i){var t=typeof Symbol!="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(!t){if(Array.isArray(e)||(t=Ci(e))||i&&e&&typeof e.length=="number"){t&&(e=t);var n=0,r=function(){};return{s:r,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(x){throw x},f:r}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var o=!0,u=!1,f;return{s:function(){t=t.call(e)},n:function(){var x=t.next();return o=x.done,x},e:function(x){u=!0,f=x},f:function(){try{!o&&t.return!=null&&t.return()}finally{if(u)throw f}}}}function Ci(e,i){if(!!e){if(typeof e=="string")return Oi(e,i);var t=Object.prototype.toString.call(e).slice(8,-1);if(t==="Object"&&e.constructor&&(t=e.constructor.name),t==="Map"||t==="Set")return Array.from(e);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return Oi(e,i)}}function Oi(e,i){(i==null||i>e.length)&&(i=e.length);for(var t=0,n=new Array(i);t<i;t++)n[t]=e[t];return n}function sa(e){var i=$i();return function(){var n=(0,rr.Z)(e),r;if(i){var o=(0,rr.Z)(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return(0,jn.Z)(this,r)}}function $i(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var xa=function(e){(0,ui.Z)(t,e);var i=sa(t);function t(n){var r;return(0,Ur.Z)(this,t),r=i.call(this),(0,He.Z)((0,er.Z)(r),"currentTiles",[]),(0,He.Z)((0,er.Z)(r),"cacheTiles",new Map),(0,He.Z)((0,er.Z)(r),"throttleUpdate",(0,Wr.throttle)(function(o,u){r.update(o,u)},16)),(0,He.Z)((0,er.Z)(r),"onTileLoad",function(o){r.emit("tile-loaded",o),r.updateTileVisible()}),(0,He.Z)((0,er.Z)(r),"onTileError",function(o,u){r.emit("tile-error",{error:o,tile:u}),r.updateTileVisible()}),(0,He.Z)((0,er.Z)(r),"onTileUnload",function(o){r.emit("tile-unload",o)}),r.options={tileSize:256,minZoom:0,maxZoom:1/0,zoomOffset:0,extent:ko,getTileData:Dt,warp:!0,updateStrategy:Uo.Overlap},r.updateOptions(n),r}return(0,Jr.Z)(t,[{key:"isLoaded",get:function(){return this.currentTiles.every(function(r){return r.isDone})}},{key:"tiles",get:function(){var r=Array.from(this.cacheTiles.values()).sort(function(o,u){return o.z-u.z});return r}},{key:"updateOptions",value:function(r){var o=r.minZoom===void 0?this.options.minZoom:Math.ceil(r.minZoom),u=r.maxZoom===void 0?this.options.maxZoom:Math.floor(r.maxZoom);this.options=(0,oe.Z)((0,oe.Z)((0,oe.Z)({},this.options),r),{},{minZoom:o,maxZoom:u})}},{key:"update",value:function(r,o){var u=this,f=Math.max(0,Math.ceil(r));if(!(this.lastViewStates&&this.lastViewStates.zoom===f&&jr(this.lastViewStates.latLonBoundsBuffer,o))){var g=rn(o,Xo);this.lastViewStates={zoom:f,latLonBounds:o,latLonBoundsBuffer:g};var x=!1,I=this.getTileIndices(f,g).filter(function(P){return u.options.warp||P.x>=0&&P.x<Math.pow(2,f)});this.currentTiles=I.map(function(P){var G=P.x,$=P.y,Ee=P.z,Se=u.getTile(G,$,Ee);if(Se){var Re,Ye,St=((Re=Se)===null||Re===void 0?void 0:Re.isFailure)||((Ye=Se)===null||Ye===void 0?void 0:Ye.isCancelled);return St&&Se.loadData({getData:u.options.getTileData,onLoad:u.onTileLoad,onError:u.onTileError}),Se}return Se=u.createTile(G,$,Ee),x=!0,Se}),x&&this.resizeCacheTiles(),this.updateTileVisible(),this.pruneRequests()}}},{key:"reloadAll",value:function(){var r=Cn(this.cacheTiles),o;try{for(r.s();!(o=r.n()).done;){var u=(0,Mr.Z)(o.value,2),f=u[0],g=u[1];this.currentTiles.includes(g)||(this.cacheTiles.delete(f),this.onTileUnload(g)),this.onTileUnload(g),g.loadData({getData:this.options.getTileData,onLoad:this.onTileLoad,onError:this.onTileError})}}catch(x){r.e(x)}finally{r.f()}}},{key:"pruneRequests",value:function(){var r=[],o=Cn(this.cacheTiles.values()),u;try{for(o.s();!(u=o.n()).done;){var f=u.value;f.isLoading&&!f.isCurrent&&!f.isVisible&&r.push(f)}}catch(x){o.e(x)}finally{o.f()}for(;r.length>0;){var g=r.shift();g.abortLoad()}}},{key:"getTileByLngLat",value:function(r,o,u){var f=this.options.zoomOffset,g=Math.ceil(u)+f,x=an(r,o,g),I=this.tiles.filter(function(P){return P.key==="".concat(x[0],"_").concat(x[1],"_").concat(g)});return I[0]}},{key:"destroy",value:function(){var r=Cn(this.cacheTiles.values()),o;try{for(r.s();!(o=r.n()).done;){var u=o.value;u.isLoading&&u.abortLoad()}}catch(f){r.e(f)}finally{r.f()}this.cacheTiles.clear(),this.currentTiles=[],this.removeAllListeners()}},{key:"updateTileVisible",value:function(){var r=this.options.updateStrategy,o=new Map,u=Cn(this.cacheTiles.values()),f;try{for(u.s();!(f=u.n()).done;){var g=f.value;o.set(g.key,g.isVisible),g.isCurrent=!1,g.isVisible=!1}}catch(Ee){u.e(Ee)}finally{u.f()}var x=Cn(this.currentTiles),I;try{for(x.s();!(I=x.n()).done;){var P=I.value;P.isCurrent=!0,P.isVisible=!0}}catch(Ee){x.e(Ee)}finally{x.f()}var G=Array.from(this.cacheTiles.values());typeof r=="function"?r(G):jo[r](G);var $=!1;Array.from(this.cacheTiles.values()).forEach(function(Ee){Ee.isVisible!==o.get(Ee.key)?(Ee.isVisibleChange=!0,$=!0):Ee.isVisibleChange=!1}),$&&this.emit("tile-update")}},{key:"getTileIndices",value:function(r,o){var u=this.options,f=u.tileSize,g=u.extent,x=u.zoomOffset,I=Math.floor(this.options.maxZoom),P=Math.ceil(this.options.minZoom),G=Do({maxZoom:I,minZoom:P,zoomOffset:x,tileSize:f,zoom:r,latLonBounds:o,extent:g});return G}},{key:"getTileId",value:function(r,o,u){var f="".concat(r,",").concat(o,",").concat(u);return f}},{key:"getTile",value:function(r,o,u){var f=this.getTileId(r,o,u),g=this.cacheTiles.get(f);return g}},{key:"createTile",value:function(r,o,u){var f=this.getTileId(r,o,u),g=new jt({x:r,y:o,z:u,tileSize:this.options.tileSize,warp:this.options.warp});return this.cacheTiles.set(f,g),g.loadData({getData:this.options.getTileData,onLoad:this.onTileLoad,onError:this.onTileError}),g}},{key:"resizeCacheTiles",value:function(){var r=Hs*this.currentTiles.length,o=this.cacheTiles.size>r;if(o){var u=Cn(this.cacheTiles),f;try{for(u.s();!(f=u.n()).done;){var g=(0,Mr.Z)(f.value,2),x=g[0],I=g[1];if(!I.isVisible&&!this.currentTiles.includes(I)&&(this.cacheTiles.delete(x),this.onTileUnload(I)),this.cacheTiles.size<=r)break}}catch(P){u.e(P)}finally{u.f()}}this.rebuildTileTree()}},{key:"rebuildTileTree",value:function(){var r=Cn(this.cacheTiles.values()),o;try{for(r.s();!(o=r.n()).done;){var u=o.value;u.parent=null,u.children.length=0}}catch(P){r.e(P)}finally{r.f()}var f=Cn(this.cacheTiles.values()),g;try{for(f.s();!(g=f.n()).done;){var x=g.value,I=this.getNearestAncestor(x.x,x.y,x.z);x.parent=I,I!=null&&I.children&&I.children.push(x)}}catch(P){f.e(P)}finally{f.f()}}},{key:"getNearestAncestor",value:function(r,o,u){for(;u>this.options.minZoom;){r=Math.floor(r/2),o=Math.floor(o/2),u=u-1;var f=this.getTile(r,o,u);if(f)return f}return null}}]),t}(Br()),va;(function(e){e["GAODE1.x"]="GAODE1.x",e["GAODE2.x"]="GAODE2.x",e.MAPBOX="MAPBOX",e.DEFAULT="DEFAUlTMAP",e.SIMPLE="SIMPLE",e.GLOBEL="GLOBEL"})(va||(va={}));function Ca(e,i,t,n,r){var o=arguments.length>5&&arguments[5]!==void 0?arguments[5]:30,u=arguments.length>6?arguments[6]:void 0,f=t;return u&&(f=Math.round(t*(o-1))/(o-1)),n?Is(e,i,f,n,r):Is(e,i,f,.314,r)}function pa(e,i){var t=1-i;return(e[0]*t+e[1]*i)*t+(e[1]*t+e[2]*i)*i}function Sa(e,i){return Math.sqrt(Math.pow(e[0]-i[0],2)+Math.pow(e[1]-i[1],2))}function to(e,i,t){var n=[i[0]-e[0],i[1]-e[1]],r=Sa(n,[0,0]),o=Math.atan2(n[1],n[0]),u=r/2/Math.cos(t),f=o+t,g=[u*Math.cos(f)+e[0],u*Math.sin(f)+e[1]];return g}function Is(e,i,t,n,r){if(r===Version["GAODE2.x"]){var o=amap2Project(e[0],e[1]),u=amap2Project(i[0],i[1]),f=to(o,u,n),g=[o[0],f[0],u[0]],x=[o[1],f[1],u[1]];return[].concat(_toConsumableArray(amap2UnProject(pa(g,t),pa(x,t))),[0])}else{var I=to(e,i,n),P=[e[0],I[0],i[0]],G=[e[1],I[1],i[1]];return[pa(P,t),pa(G,t),0]}}function _l(e,i,t,n,r){var o=arguments.length>5&&arguments[5]!==void 0?arguments[5]:30,u=arguments.length>6?arguments[6]:void 0,f=t;return u&&(f=Math.round(t*29)/29),Uu(e,i,f,r)}function Lo(e,i){var t=[i[0]-e[0],i[1]-e[1]],n=calDistance(t,[0,0]),r=Math.atan2(t[1],t[0]),o=.314,u=n/2/Math.cos(o),f=r+o,g=[u*Math.cos(f)+e[0],u*Math.sin(f)+e[1]];return g}function Ja(e,i){var t=1-i;return(e[0]*t+e[1]*i)*t+(e[1]*t+e[2]*i)*i}function Cu(e,i){var t=[e[0]-i[0],e[1]-i[1]],n=[Math.sin(t[0]/2),Math.sin(t[1]/2)],r=n[1]*n[1]+Math.cos(e[1])*Math.cos(i[1])*n[0]*n[0];return 2*Math.atan2(Math.sqrt(r),Math.sqrt(1-r))}function Uu(e,i,t,n){var r=[degreesToRadians(e[0]),degreesToRadians(e[1])],o=[degreesToRadians(i[0]),degreesToRadians(i[1])];if(n==="GAODE2.x"){var u=Lo(r,o),f=[r[0],u[0],o[0]],g=[r[1],u[1],o[1]];return[Ja(f,t),Ja(g,t),0]}else{var x=Cu(r,o);if(Math.abs(x-Math.PI)<.001)return[(1-t)*r[0]+t*o[0],(1-t)*r[1]+t*o[1]];var I=Math.sin((1-t)*x)/Math.sin(x),P=Math.sin(t*x)/Math.sin(x),G=[Math.sin(r[0]),Math.sin(r[1])],$=[Math.cos(r[0]),Math.cos(r[1])],Ee=[Math.sin(o[0]),Math.sin(o[1])],Se=[Math.cos(o[0]),Math.cos(o[1])],Re=I*$[1]*$[0]+P*Se[1]*Se[0],Ye=I*$[1]*G[0]+P*Se[1]*Ee[0],St=I*G[1]+P*Ee[1];return[radiansToDegrees(Math.atan2(Ye,Re)),radiansToDegrees(Math.atan2(St,Math.sqrt(Re*Re+Ye*Ye)))]}}function dl(e,i){for(var t=0,n=[],r=0;r<e.length-1;r++){var o=e[r],u=e[r+1],f=mf(o,u),g=t;t+=f,n.push({p1:o,p2:u,totalDistance:t,distance:f,lastTotalDistance:g})}for(var x=t*i,I,P,G=0,$=n;G<$.length;G++){var Ee=$[G],Se=Ee.totalDistance;if(Se>x){var Re=Ee.p1,Ye=Ee.p2,St=(x-Ee.lastTotalDistance)/Ee.distance,vt=Nl(Ye,Re,St);I=vt[0],P=vt[1];break}}return{lng:I,lat:P,height:0}}function Nl(e,i,t){return[e[0]*t+i[0]*(1-t),e[1]*t+i[1]*(1-t)]}function mf(e,i){return Math.sqrt(Math.pow(e[0]-i[0],2)+Math.pow(e[1]-i[1],2))}function Cc(e,i){var t=i.featureId,n=e.data.dataArray;return typeof t=="number"&&(n=n.filter(function(r){var o=r.id;return o===t})),n.map(function(r){var o=lh(r,i);return _objectSpread(_objectSpread({},r),o)})}function $f(e,i){return new Promise(function(t){e.inited?t(Cc(e,i)):e.once("update",function(){t(Cc(e,i))})})}function lh(e,i){var t=i.offset,n=i.shape,r=i.thetaOffset,o=i.mapVersion,u=i.segmentNumber,f=u===void 0?30:u,g=i.autoFit,x=g===void 0?!0:g,I=e.coordinates;if(n==="line")return pathLineAtOffset(I,t);var P=I[0],G=I[1],$=typeof r=="string"?e[r]||0:r,Ee;switch(n){case"arc":Ee=arcLineAtOffset;break;case"greatcircle":Ee=greatCircleLineAtOffset;break;default:Ee=arcLineAtOffset}var Se=Ee(P,G,t,$,o,f,x),Re=_slicedToArray(Se,3),Ye=Re[0],St=Re[1],vt=Re[2];return{lng:Ye,lat:St,height:vt}}function Bl(e,i){var t=i.extent,n=t===void 0?[121.168,30.2828,121.384,30.4219]:t,r=new Promise(function(u){e instanceof HTMLImageElement||Yo(e)?u([e]):jl(e,function(f){u(f)})}),o={originData:e,images:r,_id:1,dataArray:[{_id:0,coordinates:[[n[0],n[1]],[n[2],n[3]]]}]};return o}function jl(e,i){var t=e,n=[];if(typeof t=="string")us({url:t},function(u,f){f&&(n.push(f),i(n))});else{var r=t.length,o=0;t.forEach(function(u){us({url:u},function(f,g){o++,g&&n.push(g),o===r&&i(n)})})}return Bl}var Lh=c(99996),Qp=c(63713),Qh=c.n(Qp),jh=function(){function e(i,t,n,r){(0,Ur.Z)(this,e),(0,He.Z)(this,"vectorLayerCache",{}),this.x=t,this.y=n,this.z=r,this.vectorTile=new Lh.VectorTile(new(Qh())(i))}return(0,Jr.Z)(e,[{key:"getTileData",value:function(t){if(!t||!this.vectorTile.layers[t])return[];if(this.vectorLayerCache[t])return this.vectorLayerCache[t];var n=this.vectorTile.layers[t];if(Array.isArray(n.features))return this.vectorLayerCache[t]=n.features,n.features;for(var r=[],o=0;o<n.length;o++){var u=n.feature(o),f=u.toGeoJSON(this.x,this.y,this.z);r.push((0,oe.Z)((0,oe.Z)({},f),{},{properties:(0,oe.Z)({id:f.id},f.properties)}))}return this.vectorLayerCache[t]=r,r}},{key:"getFeatureById",value:function(){throw new Error("Method not implemented.")}}]),e}(),Jh={tileSize:256,minZoom:0,maxZoom:1/0,zoomOffset:0,warp:!0},wh=function(){var e=(0,An.Z)(Nt().mark(function i(t,n,r,o){var u;return Nt().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return u=Zr(t,n),g.abrupt("return",new Promise(function(x){var I=Su((0,oe.Z)((0,oe.Z)({},o),{},{url:u}),function(P,G){if(P||!G)x(void 0);else{var $=new jh(G,r.x,r.y,r.z);x($)}});r.xhrCancel=function(){return I.abort()}}));case 2:case"end":return g.stop()}},i)}));return function(t,n,r,o){return e.apply(this,arguments)}}();function Tc(e,i){var t=Array.isArray(e)?e[0]:e,n=function(u,f){return wh(t,u,f,i==null?void 0:i.requestParameters)},r=(0,oe.Z)((0,oe.Z)((0,oe.Z)({},Jh),i),{},{getTileData:n});return{data:t,dataArray:[],tilesetOptions:r,isTile:!0}}function Jp(e,i,t,n){for(var r=n,o=t-i>>1,u=t-i,f,g=e[i],x=e[i+1],I=e[t],P=e[t+1],G=i+3;G<t;G+=3){var $=Ld(e[G],e[G+1],g,x,I,P);if($>r)f=G,r=$;else if($===r){var Ee=Math.abs(G-o);Ee<u&&(f=G,u=Ee)}}r>n&&(f-i>3&&Jp(e,i,f,n),e[f+2]=r,t-f>3&&Jp(e,f,t,n))}function Ld(e,i,t,n,r,o){var u=r-t,f=o-n;if(u!==0||f!==0){var g=((e-t)*u+(i-n)*f)/(u*u+f*f);g>1?(t=r,n=o):g>0&&(t+=u*g,n+=f*g)}return u=e-t,f=i-n,u*u+f*f}function Cp(e,i,t,n){var r={id:typeof e=="undefined"?null:e,type:i,geometry:t,tags:n,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return zl(r),r}function zl(e){var i=e.geometry,t=e.type;if(t==="Point"||t==="MultiPoint"||t==="LineString")Ff(e,i);else if(t==="Polygon"||t==="MultiLineString")for(var n=0;n<i.length;n++)Ff(e,i[n]);else if(t==="MultiPolygon")for(n=0;n<i.length;n++)for(var r=0;r<i[n].length;r++)Ff(e,i[n][r])}function Ff(e,i){for(var t=0;t<i.length;t+=3)e.minX=Math.min(e.minX,i[t]),e.minY=Math.min(e.minY,i[t+1]),e.maxX=Math.max(e.maxX,i[t]),e.maxY=Math.max(e.maxY,i[t+1])}function Vh(e,i){var t=[];if(e.type==="FeatureCollection")for(var n=0;n<e.features.length;n++)a(t,e.features[n],i,n);else e.type==="Feature"?a(t,e,i):a(t,{geometry:e},i);return t}function a(e,i,t,n){if(!!i.geometry){var r=i.geometry.coordinates,o=i.geometry.type,u=Math.pow(t.tolerance/((1<<t.maxZoom)*t.extent),2),f=[],g=i.id;if(t.promoteId?g=i.properties[t.promoteId]:t.generateId&&(g=n||0),o==="Point")s(r,f);else if(o==="MultiPoint")for(var x=0;x<r.length;x++)s(r[x],f);else if(o==="LineString")h(r,f,u,!1);else if(o==="MultiLineString")if(t.lineMetrics){for(x=0;x<r.length;x++)f=[],h(r[x],f,u,!1),e.push(Cp(g,"LineString",f,i.properties));return}else E(r,f,u,!1);else if(o==="Polygon")E(r,f,u,!0);else if(o==="MultiPolygon")for(x=0;x<r.length;x++){var I=[];E(r[x],I,u,!0),f.push(I)}else if(o==="GeometryCollection"){for(x=0;x<i.geometry.geometries.length;x++)a(e,{id:g,geometry:i.geometry.geometries[x],properties:i.properties},t,n);return}else throw new Error("Input data is not a valid GeoJSON object.");e.push(Cp(g,o,f,i.properties))}}function s(e,i){i.push(M(e[0])),i.push(L(e[1])),i.push(0)}function h(e,i,t,n){for(var r,o,u=0,f=0;f<e.length;f++){var g=M(e[f][0]),x=L(e[f][1]);i.push(g),i.push(x),i.push(0),f>0&&(n?u+=(r*x-g*o)/2:u+=Math.sqrt(Math.pow(g-r,2)+Math.pow(x-o,2))),r=g,o=x}var I=i.length-3;i[2]=1,Jp(i,0,I,t),i[I+2]=1,i.size=Math.abs(u),i.start=0,i.end=i.size}function E(e,i,t,n){for(var r=0;r<e.length;r++){var o=[];h(e[r],o,t,n),i.push(o)}}function M(e){return e/360+.5}function L(e){var i=Math.sin(e*Math.PI/180),t=.5-.25*Math.log((1+i)/(1-i))/Math.PI;return t<0?0:t>1?1:t}function j(e,i,t,n,r,o,u,f){if(t/=i,n/=i,o>=t&&u<n)return e;if(u<t||o>=n)return null;for(var g=[],x=0;x<e.length;x++){var I=e[x],P=I.geometry,G=I.type,$=r===0?I.minX:I.minY,Ee=r===0?I.maxX:I.maxY;if($>=t&&Ee<n){g.push(I);continue}else if(Ee<t||$>=n)continue;var Se=[];if(G==="Point"||G==="MultiPoint")re(P,Se,t,n,r);else if(G==="LineString")Ce(P,Se,t,n,r,!1,f.lineMetrics);else if(G==="MultiLineString")We(P,Se,t,n,r,!1);else if(G==="Polygon")We(P,Se,t,n,r,!0);else if(G==="MultiPolygon")for(var Re=0;Re<P.length;Re++){var Ye=[];We(P[Re],Ye,t,n,r,!0),Ye.length&&Se.push(Ye)}if(Se.length){if(f.lineMetrics&&G==="LineString"){for(Re=0;Re<Se.length;Re++)g.push(Cp(I.id,G,Se[Re],I.tags));continue}(G==="LineString"||G==="MultiLineString")&&(Se.length===1?(G="LineString",Se=Se[0]):G="MultiLineString"),(G==="Point"||G==="MultiPoint")&&(G=Se.length===3?"Point":"MultiPoint"),g.push(Cp(I.id,G,Se,I.tags))}}return g.length?g:null}function re(e,i,t,n,r){for(var o=0;o<e.length;o+=3){var u=e[o+r];u>=t&&u<=n&&(i.push(e[o]),i.push(e[o+1]),i.push(e[o+2]))}}function Ce(e,i,t,n,r,o,u){for(var f=ze(e),g=r===0?_t:It,x=e.start,I,P,G=0;G<e.length-3;G+=3){var $=e[G],Ee=e[G+1],Se=e[G+2],Re=e[G+3],Ye=e[G+4],St=r===0?$:Ee,vt=r===0?Re:Ye,Ut=!1;u&&(I=Math.sqrt(Math.pow($-Re,2)+Math.pow(Ee-Ye,2))),St<t?vt>t&&(P=g(f,$,Ee,Re,Ye,t),u&&(f.start=x+I*P)):St>n?vt<n&&(P=g(f,$,Ee,Re,Ye,n),u&&(f.start=x+I*P)):Je(f,$,Ee,Se),vt<t&&St>=t&&(P=g(f,$,Ee,Re,Ye,t),Ut=!0),vt>n&&St<=n&&(P=g(f,$,Ee,Re,Ye,n),Ut=!0),!o&&Ut&&(u&&(f.end=x+I*P),i.push(f),f=ze(e)),u&&(x+=I)}var Kt=e.length-3;$=e[Kt],Ee=e[Kt+1],Se=e[Kt+2],St=r===0?$:Ee,St>=t&&St<=n&&Je(f,$,Ee,Se),Kt=f.length-3,o&&Kt>=3&&(f[Kt]!==f[0]||f[Kt+1]!==f[1])&&Je(f,f[0],f[1],f[2]),f.length&&i.push(f)}function ze(e){var i=[];return i.size=e.size,i.start=e.start,i.end=e.end,i}function We(e,i,t,n,r,o){for(var u=0;u<e.length;u++)Ce(e[u],i,t,n,r,o,!1)}function Je(e,i,t,n){e.push(i),e.push(t),e.push(n)}function _t(e,i,t,n,r,o){var u=(o-i)/(n-i);return e.push(o),e.push(t+(r-t)*u),e.push(1),u}function It(e,i,t,n,r,o){var u=(o-t)/(r-t);return e.push(i+(n-i)*u),e.push(o),e.push(1),u}function ar(e,i){var t=i.buffer/i.extent,n=e,r=j(e,1,-1-t,t,0,-1,2,i),o=j(e,1,1-t,2+t,0,-1,2,i);return(r||o)&&(n=j(e,1,-t,1+t,0,-1,2,i)||[],r&&(n=ur(r,1).concat(n)),o&&(n=n.concat(ur(o,-1)))),n}function ur(e,i){for(var t=[],n=0;n<e.length;n++){var r=e[n],o=r.type,u;if(o==="Point"||o==="MultiPoint"||o==="LineString")u=Rr(r.geometry,i);else if(o==="MultiLineString"||o==="Polygon"){u=[];for(var f=0;f<r.geometry.length;f++)u.push(Rr(r.geometry[f],i))}else if(o==="MultiPolygon")for(u=[],f=0;f<r.geometry.length;f++){for(var g=[],x=0;x<r.geometry[f].length;x++)g.push(Rr(r.geometry[f][x],i));u.push(g)}t.push(Cp(r.id,o,u,r.tags))}return t}function Rr(e,i){var t=[];t.size=e.size,e.start!==void 0&&(t.start=e.start,t.end=e.end);for(var n=0;n<e.length;n+=3)t.push(e[n]+i,e[n+1],e[n+2]);return t}function mr(e,i){if(e.transformed)return e;var t=1<<e.z,n=e.x,r=e.y,o,u,f;for(o=0;o<e.features.length;o++){var g=e.features[o],x=g.geometry,I=g.type;if(g.geometry=[],I===1)for(u=0;u<x.length;u+=2)g.geometry.push(cn(x[u],x[u+1],i,t,n,r));else for(u=0;u<x.length;u++){var P=[];for(f=0;f<x[u].length;f+=2)P.push(cn(x[u][f],x[u][f+1],i,t,n,r));g.geometry.push(P)}}return e.transformed=!0,e}function cn(e,i,t,n,r,o){return[Math.round(t*(e*n-r)),Math.round(t*(i*n-o))]}function wn(e,i,t,n,r){for(var o=i===r.maxZoom?0:r.tolerance/((1<<i)*r.extent),u={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:t,y:n,z:i,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},f=0;f<e.length;f++){u.numFeatures++,Gn(u,e[f],o,r);var g=e[f].minX,x=e[f].minY,I=e[f].maxX,P=e[f].maxY;g<u.minX&&(u.minX=g),x<u.minY&&(u.minY=x),I>u.maxX&&(u.maxX=I),P>u.maxY&&(u.maxY=P)}return u}function Gn(e,i,t,n){var r=i.geometry,o=i.type,u=[];if(o==="Point"||o==="MultiPoint")for(var f=0;f<r.length;f+=3)u.push(r[f]),u.push(r[f+1]),e.numPoints++,e.numSimplified++;else if(o==="LineString")Zn(u,r,e,t,!1,!1);else if(o==="MultiLineString"||o==="Polygon")for(f=0;f<r.length;f++)Zn(u,r[f],e,t,o==="Polygon",f===0);else if(o==="MultiPolygon")for(var g=0;g<r.length;g++){var x=r[g];for(f=0;f<x.length;f++)Zn(u,x[f],e,t,!0,f===0)}if(u.length){var I=i.tags||null;if(o==="LineString"&&n.lineMetrics){I={};for(var P in i.tags)I[P]=i.tags[P];I.mapbox_clip_start=r.start/r.size,I.mapbox_clip_end=r.end/r.size}var G={geometry:u,type:o==="Polygon"||o==="MultiPolygon"?3:o==="LineString"||o==="MultiLineString"?2:1,tags:I};i.id!==null&&(G.id=i.id),e.features.push(G)}}function Zn(e,i,t,n,r,o){var u=n*n;if(n>0&&i.size<(r?u:n)){t.numPoints+=i.length/3;return}for(var f=[],g=0;g<i.length;g+=3)(n===0||i[g+2]>u)&&(t.numSimplified++,f.push(i[g]),f.push(i[g+1])),t.numPoints++;r&&gi(f,o),e.push(f)}function gi(e,i){for(var t=0,n=0,r=e.length,o=r-2;n<r;o=n,n+=2)t+=(e[n]-e[o])*(e[n+1]+e[o+1]);if(t>0===i)for(n=0,r=e.length;n<r/2;n+=2){var u=e[n],f=e[n+1];e[n]=e[r-2-n],e[n+1]=e[r-1-n],e[r-2-n]=u,e[r-1-n]=f}}function Yi(e,i){return new p(e,i)}function p(e,i){i=this.options=C(Object.create(this.options),i);var t=i.debug;if(t&&console.time("preprocess data"),i.maxZoom<0||i.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(i.promoteId&&i.generateId)throw new Error("promoteId and generateId cannot be used together.");var n=Vh(e,i);this.tiles={},this.tileCoords=[],t&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",i.indexMaxZoom,i.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),n=ar(n,i),n.length&&this.splitTile(n,0,0,0),t&&(n.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}p.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},p.prototype.splitTile=function(e,i,t,n,r,o,u){for(var f=[e,i,t,n],g=this.options,x=g.debug;f.length;){n=f.pop(),t=f.pop(),i=f.pop(),e=f.pop();var I=1<<i,P=y(i,t,n),G=this.tiles[P];if(!G&&(x>1&&console.time("creation"),G=this.tiles[P]=wn(e,i,t,n,g),this.tileCoords.push({z:i,x:t,y:n}),x)){x>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",i,t,n,G.numFeatures,G.numPoints,G.numSimplified),console.timeEnd("creation"));var $="z"+i;this.stats[$]=(this.stats[$]||0)+1,this.total++}if(G.source=e,r){if(i===g.maxZoom||i===r)continue;var Ee=1<<r-i;if(t!==Math.floor(o/Ee)||n!==Math.floor(u/Ee))continue}else if(i===g.indexMaxZoom||G.numPoints<=g.indexMaxPoints)continue;if(G.source=null,e.length!==0){x>1&&console.time("clipping");var Se=.5*g.buffer/g.extent,Re=.5-Se,Ye=.5+Se,St=1+Se,vt,Ut,Kt,Tr,on,dn;vt=Ut=Kt=Tr=null,on=j(e,I,t-Se,t+Ye,0,G.minX,G.maxX,g),dn=j(e,I,t+Re,t+St,0,G.minX,G.maxX,g),e=null,on&&(vt=j(on,I,n-Se,n+Ye,1,G.minY,G.maxY,g),Ut=j(on,I,n+Re,n+St,1,G.minY,G.maxY,g),on=null),dn&&(Kt=j(dn,I,n-Se,n+Ye,1,G.minY,G.maxY,g),Tr=j(dn,I,n+Re,n+St,1,G.minY,G.maxY,g),dn=null),x>1&&console.timeEnd("clipping"),f.push(vt||[],i+1,t*2,n*2),f.push(Ut||[],i+1,t*2,n*2+1),f.push(Kt||[],i+1,t*2+1,n*2),f.push(Tr||[],i+1,t*2+1,n*2+1)}}},p.prototype.getTile=function(e,i,t){var n=this.options,r=n.extent,o=n.debug;if(e<0||e>24)return null;var u=1<<e;i=(i%u+u)%u;var f=y(e,i,t);if(this.tiles[f])return mr(this.tiles[f],r);o>1&&console.log("drilling down to z%d-%d-%d",e,i,t);for(var g=e,x=i,I=t,P;!P&&g>0;)g--,x=Math.floor(x/2),I=Math.floor(I/2),P=this.tiles[y(g,x,I)];return!P||!P.source?null:(o>1&&console.log("found parent tile z%d-%d-%d",g,x,I),o>1&&console.time("drilling down"),this.splitTile(P.source,g,x,I,e,i,t),o>1&&console.timeEnd("drilling down"),this.tiles[f]?mr(this.tiles[f],r):null)};function y(e,i,t){return((1<<e)*t+i)*32+e}function C(e,i){for(var t in i)e[t]=i[t];return e}var V=function(){function e(i,t,n,r){(0,Ur.Z)(this,e),(0,He.Z)(this,"vectorLayerCache",{}),this.x=t,this.y=n,this.z=r,this.vectorTile=i}return(0,Jr.Z)(e,[{key:"getTileData",value:function(t){if(!t||!this.vectorTile.layers[t])return[];if(this.vectorLayerCache[t])return this.vectorLayerCache[t];var n=this.vectorTile.layers[t];return n.features}},{key:"getFeatureById",value:function(){throw new Error("Method not implemented.")}}]),e}(),ae={tileSize:256,minZoom:0,maxZoom:1/0,zoomOffset:0};function Ie(e){for(var i=0,t=0,n=e.length,r=n-1,o,u;t<n;r=t++)o=e[t],u=e[r],i+=(u.x-o.x)*(o.y+u.y);return i}function ut(e){var i=e.length;if(i<=1)return[e];for(var t=[],n,r,o=0;o<i;o++){var u=Ie(e[o]);u!==0&&(r===void 0&&(r=u<0),r===u<0?(n&&t.push(n),n=[e[o]]):n.push(e[o]))}return n&&t.push(n),t}var zt=["Unknown","Point","LineString","Polygon"];function wr(e,i,t,n,r){var o=r.geometry,u=r.type,f=r.tags,g=r.id,x=e*Math.pow(2,n),I=e*i,P=e*t,G=zt[u],$,Ee;function Se(St){for(var vt=0;vt<St.length;vt++){var Ut=St[vt];if(Ut[3])break;var Kt=180-(Ut[1]+P)*360/x,Tr=(Ut[0]+I)*360/x-180,on=360/Math.PI*Math.atan(Math.exp(Kt*Math.PI/180))-90;St[vt]=[Tr,on,0,1]}}switch(u){case 1:var Re=[];for($=0;$<o.length;$++)Re[$]=o[$][0];o=Re,Se(o);break;case 2:for($=0;$<o.length;$++)Se(o[$]);break;case 3:for(o=ut(o),$=0;$<o.length;$++)for(Ee=0;Ee<o[$].length;Ee++)Se(o[$][Ee]);break}o.length===1?o=o[0]:G="Multi"+G;var Ye={type:"Feature",geometry:{type:G,coordinates:o},properties:f,id:g,tileOrigin:[0,0],coord:""};return Ye}var fn=function(){var e=(0,An.Z)(Nt().mark(function i(t,n,r,o){return Nt().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return f.abrupt("return",new Promise(function(g){var x=n.getTile(t.z,t.x,t.y),I=x?x.features.map(function($){return wr(o,r.x,r.y,r.z,$)}):[],P={layers:{defaultLayer:{features:I}}},G=new V(P,t.x,t.y,t.z);g(G)}));case 1:case"end":return f.stop()}},i)}));return function(t,n,r,o){return e.apply(this,arguments)}}();function pi(e){var i={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!0,debug:0};return e===void 0||typeof e.geojsonvtOptions=="undefined"?i:(0,oe.Z)((0,oe.Z)({},i),e.geojsonvtOptions)}function $n(e,i){var t=pi(i),n=t.extent||4096,r=Yi(e,t),o=function(g,x){return fn(x,r,g,n)},u=(0,oe.Z)((0,oe.Z)((0,oe.Z)({},ae),i),{},{getTileData:o});return{data:e,dataArray:[],tilesetOptions:u,isTile:!0}}function hi(e,i,t){switch(e){case"+":return i+t;case"-":return i-t;case"*":return i*t;case"/":return i/t;case"%":return i%t;case"^":return Math.pow(i,t);case"abs":return Math.abs(i);case"floor":return Math.floor(i);case"round":return Math.round(i);case"ceil":return Math.ceil(i);case"sin":return Math.sin(i);case"cos":return Math.cos(i);case"atan":return t===-1?Math.atan(i):Math.atan2(i,t);default:return console.warn("Calculate symbol err! Return default 0"),0}}function ca(e,i){for(var t=i[0],n=t.width,r=t.height,o=i.map(function($){return $.rasterData}),u=n*r,f=[],g=JSON.stringify(e),x=0;x<u;x++){var I=JSON.parse(g),P=Ra(I,o,x);if(typeof P=="number")f.push(P);else{var G=os(I);f.push(G)}}return f}function Ra(e,i,t){if(e.length===2&&e[0]==="band"&&typeof e[1]=="number")try{return i[e[1]][t]}catch(n){return console.warn("Raster Data err!"),0}e.map(function(n,r){if(Array.isArray(n)&&n.length>0)switch(n[0]){case"band":try{e[r]=i[n[1]][t]}catch(o){console.warn("Raster Data err!"),e[r]=0}break;default:Ra(n,i,t)}})}function Da(e){var i=(0,Mr.Z)(e,3),t=i[0],n=i[1],r=n===void 0?-1:n,o=i[2],u=o===void 0?-1:o;if(t===void 0)return console.warn("Express err!"),["+",0,0];var f=t.replace(/\s+/g,"");return[f,r,u]}function os(e){var i=Da(e),t=i[0],n=i[1],r=i[2];return Array.isArray(n)&&(n=os(e[1])),Array.isArray(r)&&(r=os(e[2])),hi(t,n,r)}var gn={nd:{type:"operation",expression:["/",["-",["band",1],["band",0]],["+",["band",1],["band",0]]]},rgb:{type:"function",method:Qr}};function Qr(e,i){for(var t=e[0].rasterData,n=e[1].rasterData,r=e[2].rasterData,o=[],u=(i==null?void 0:i.countCut)||[2,98],f=(0,Mr.Z)(u,2),g=f[0],x=f[1],I=(i==null?void 0:i.RMinMax)||In(t,g,x),P=(i==null?void 0:i.GMinMax)||In(n,g,x),G=(i==null?void 0:i.BMinMax)||In(r,g,x),$=0;$<t.length;$++)o.push(Math.max(0,t[$]-I[0])),o.push(Math.max(0,n[$]-P[0])),o.push(Math.max(0,r[$]-G[0]));return{rasterData:o,rMinMax:I,gMinMax:P,bMinMax:G}}function In(e,i,t){var n=e.slice().sort(function(f,g){return f-g}),r=n.length,o=n[Math.ceil(r*i/100)],u=n[Math.ceil(r*t/100)];return[o,u]}function ra(e,i,t){return Ba.apply(this,arguments)}function Ba(){return Ba=(0,An.Z)(Nt().mark(function e(i,t,n){var r,o,u,f,g,x;return Nt().wrap(function(P){for(;;)switch(P.prev=P.next){case 0:if(i.length!==0){P.next=2;break}return P.abrupt("return",{rasterData:[0],width:1,heigh:1});case 2:return P.next=4,Promise.all(i.map(function(G){var $=G.data,Ee=G.bands,Se=Ee===void 0?[0]:Ee;return t($,Se)}));case 4:r=P.sent,o=[],r.forEach(function(G){Array.isArray(G)?o.push.apply(o,(0,ie.Z)(G)):o.push(G)}),u=o[0],f=u.width,g=u.height,P.t0=(0,ve.Z)(n),P.next=P.t0==="function"?11:P.t0==="object"?13:15;break;case 11:return x=n(o),P.abrupt("break",16);case 13:return Array.isArray(n)?x={rasterData:ca(n,o)}:x=ho(n,o),P.abrupt("break",16);case 15:x={rasterData:o[0].rasterData};case 16:return P.abrupt("return",(0,oe.Z)((0,oe.Z)({},x),{},{width:f,height:g}));case 17:case"end":return P.stop()}},e)})),Ba.apply(this,arguments)}function ho(e,i){var t=gn[e.type];if(t.type==="function")return t.method(i,e==null?void 0:e.options);if(t.type==="operation")return e.type==="rgb"?ro(t.expression,i):{rasterData:ca(t.expression,i)}}function ro(e,i){e.r===void 0&&console.warn("Channel R lost in Operation! Use band[0] to fill!"),e.g===void 0&&console.warn("Channel G lost in Operation! Use band[0] to fill!"),e.b===void 0&&console.warn("Channel B lost in Operation! Use band[0] to fill!");var t=ca(e.r||["band",0],i),n=ca(e.g||["band",0],i),r=ca(e.b||["band",0],i);return[t,n,r]}function go(e,i,t,n){return wo.apply(this,arguments)}function wo(){return wo=(0,An.Z)(Nt().mark(function e(i,t,n,r){var o;return Nt().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return f.next=2,ra(i,t,n);case 2:o=f.sent,r(null,{data:o});case 4:case"end":return f.stop()}},e)})),wo.apply(this,arguments)}function Ao(e,i){return e.map(function(t){return t[i]*1})}function Fs(e){return e===void 0?!1:!Array.isArray(e)&&e.data!==void 0}function Ws(e){return Array.isArray(e)?e.length===0?!1:!!Fs(e[0]):!1}function Nf(e){return Array.isArray(e)?e.length===0||typeof e[0]=="number":!1}function gf(e,i){var t=i.extent,n=i.width,r=i.height,o=i.min,u=i.max,f=i.format,g=i.operation,x,I,P;if(f===void 0||Nf(e))x=Array.from(e),I=n,P=r;else{var G=Array.isArray(e)?e:[e];x=ra(G,f,g)}var $={_id:1,dataArray:[{_id:1,data:x,width:I,height:P,min:o,max:u,coordinates:[[t[0],t[1]],[t[2],t[3]]]}]};return $}var Ns=c(91458),nc=["extent","min","max","width","height","format","operation"];function yf(e,i){var t=i.extent,n=i.min,r=i.max,o=i.width,u=i.height,f=i.format,g=i.operation,x=(0,Ns.Z)(i,nc),I;if(f===void 0||Nf(e))I=Array.from(e);else{var P=Array.isArray(e)?e:[e];I=ra(P,f,g)}var G={_id:1,dataArray:[(0,oe.Z)((0,oe.Z)({_id:1,data:I,width:o,height:u},x),{},{min:n,max:r,coordinates:[[t[0],t[1]],[t[2],t[3]]]})]};return G}var yu=c(96485),Ki=c(14156),Tp=c(67754),Ln={IEventEmitter:Symbol.for("IEventEmitter"),ISceneService:Symbol.for("ISceneService"),IGlobalConfigService:Symbol.for("IGlobalConfigService"),ICameraService:Symbol.for("ICameraService"),ICoordinateSystemService:Symbol.for("ICoordinateSystemService"),ILayerService:Symbol.for("ILayerService"),ILayerMappingService:Symbol.for("ILayerMappingService"),ILayerStyleService:Symbol.for("ILayerStyleService"),IMapService:Symbol.for("IMapService"),IMarkerService:Symbol.for("IMarkerService"),IPopupService:Symbol.for("PopupService"),IFactoryMapService:Symbol.for("Factory<IMapService>"),IRendererService:Symbol.for("IRendererService"),IShaderModuleService:Symbol.for("IShaderModuleService"),IIconService:Symbol.for("IIconService"),IFontService:Symbol.for("IFontService"),IInteractionService:Symbol.for("IInteractionService"),IPickingService:Symbol.for("IPickingService"),IControlService:Symbol.for("IControlService"),IStyleAttributeService:Symbol.for("IStyleAttributeService"),ILayer:Symbol.for("ILayer"),ILayerPlugin:Symbol.for("ILayerPlugin"),INormalPass:Symbol.for("INormalPass"),IPostProcessor:Symbol.for("IPostProcessor"),IPostProcessingPass:Symbol.for("IPostProcessingPass"),IFactoryPostProcessingPass:Symbol.for("Factory<IPostProcessingPass>"),IFactoryNormalPass:Symbol.for("Factory<IFactoryNormalPass>"),IMultiPassRenderer:Symbol.for("IMultiPassRenderer"),SceneID:Symbol.for("SceneID"),MapConfig:Symbol.for("MapConfig")},Qu=c(24195),fs=c.n(Qu);function Pp(e,i){var t=typeof Symbol!="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(!t){if(Array.isArray(e)||(t=_f(e))||i&&e&&typeof e.length=="number"){t&&(e=t);var n=0,r=function(){};return{s:r,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(x){throw x},f:r}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var o=!0,u=!1,f;return{s:function(){t=t.call(e)},n:function(){var x=t.next();return o=x.done,x},e:function(x){u=!0,f=x},f:function(){try{!o&&t.return!=null&&t.return()}finally{if(u)throw f}}}}function _f(e,i){if(!!e){if(typeof e=="string")return xl(e,i);var t=Object.prototype.toString.call(e).slice(8,-1);if(t==="Object"&&e.constructor&&(t=e.constructor.name),t==="Map"||t==="Set")return Array.from(e);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return xl(e,i)}}function xl(e,i){(i==null||i>e.length)&&(i=e.length);for(var t=0,n=new Array(i);t<i;t++)n[t]=e[t];return n}var ch=30;function sp(e){var i=e.characterSet,t=e.getFontWidth,n=e.fontHeight,r=e.buffer,o=e.maxCanvasWidth,u=e.mapping,f=u===void 0?{}:u,g=e.xOffset,x=g===void 0?0:g,I=e.yOffset,P=I===void 0?0:I,G=0,$=x;Array.from(i).forEach(function(Se,Re){if(!f[Se]){var Ye=t(Se,Re);$+ch>o&&($=0,G++),f[Se]={x:$,y:P+G*ch,width:ch,height:ch,advance:Ye},$+=ch}});var Ee=n+r*2;return{mapping:f,xOffset:$,yOffset:P+G*Ee,canvasHeight:Gh(P+(G+1)*Ee)}}function qh(e,i,t){var n=0,r=0,o=0,u=[],f={},g=Pp(e),x;try{for(g.s();!(x=g.n()).done;){var I=x.value;if(!f[I.id]){var P=I.size;n+P+i>t&&(dd(f,u,r),n=0,r=o+r+i,o=0,u=[]),u.push({icon:I,xOffset:n}),n=n+P+i,o=Math.max(o,P)}}}catch($){g.e($)}finally{g.f()}u.length>0&&dd(f,u,r);var G=Gh(o+r+i);return{mapping:f,canvasHeight:G}}function dd(e,i,t){var n=Pp(i),r;try{for(n.s();!(r=n.n()).done;){var o=r.value,u=o.icon,f=o.xOffset;e[u.id]=(0,oe.Z)((0,oe.Z)({},u),{},{x:f,y:t,image:u.image,width:u.width,height:u.height})}}catch(g){n.e(g)}finally{n.f()}}function Gh(e){return Math.pow(2,Math.ceil(Math.log2(e)))}var ed,vd;function Hh(e,i){var t=typeof Symbol!="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(!t){if(Array.isArray(e)||(t=Ah(e))||i&&e&&typeof e.length=="number"){t&&(e=t);var n=0,r=function(){};return{s:r,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(x){throw x},f:r}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var o=!0,u=!1,f;return{s:function(){t=t.call(e)},n:function(){var x=t.next();return o=x.done,x},e:function(x){u=!0,f=x},f:function(){try{!o&&t.return!=null&&t.return()}finally{if(u)throw f}}}}function Ah(e,i){if(!!e){if(typeof e=="string")return Mp(e,i);var t=Object.prototype.toString.call(e).slice(8,-1);if(t==="Object"&&e.constructor&&(t=e.constructor.name),t==="Map"||t==="Set")return Array.from(e);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return Mp(e,i)}}function Mp(e,i){(i==null||i>e.length)&&(i=e.length);for(var t=0,n=new Array(i);t<i;t++)n[t]=e[t];return n}function Wh(e){var i=qp();return function(){var n=(0,rr.Z)(e),r;if(i){var o=(0,rr.Z)(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return(0,jn.Z)(this,r)}}function qp(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var bl=nd(),Vl="sans-serif",md="normal",gd=24,yd=3,Dd=.25,_d=8,td=1024,xd=1,rd=1,fh=3,bd=null;function nd(){for(var e=[],i=32;i<128;i++)e.push(String.fromCharCode(i));return e}function $h(e,i,t,n){e.font="".concat(n," ").concat(t,"px ").concat(i),e.fillStyle="black",e.textBaseline="middle"}function eh(e,i){for(var t=0;t<e.length;t++)i.data[4*t+3]=e[t]}var Xf=(ed=(0,Ki.b2)(),ed(vd=function(e){(0,ui.Z)(t,e);var i=Wh(t);function t(){var n;(0,Ur.Z)(this,t);for(var r=arguments.length,o=new Array(r),u=0;u<r;u++)o[u]=arguments[u];return n=i.call.apply(i,[this].concat(o)),(0,He.Z)((0,er.Z)(n),"fontAtlas",void 0),(0,He.Z)((0,er.Z)(n),"iconFontMap",void 0),(0,He.Z)((0,er.Z)(n),"iconFontGlyphs",{}),(0,He.Z)((0,er.Z)(n),"fontOptions",void 0),(0,He.Z)((0,er.Z)(n),"key",void 0),(0,He.Z)((0,er.Z)(n),"cache",new S(fh)),n}return(0,Jr.Z)(t,[{key:"scale",get:function(){return rd}},{key:"canvas",get:function(){var r=this.cache.get(this.key);return r&&r.data}},{key:"mapping",get:function(){var r=this.cache.get(this.key);return r&&r.mapping||{}}},{key:"init",value:function(){this.cache.clear(),this.fontOptions={fontFamily:Vl,fontWeight:md,characterSet:bl,fontSize:gd,buffer:yd,sdf:!0,cutoff:Dd,radius:_d,iconfont:!1},this.key="",this.iconFontMap=new Map}},{key:"addIconGlyphs",value:function(r){var o=this;r.forEach(function(u){o.iconFontGlyphs[u.name]=u.unicode})}},{key:"addIconFont",value:function(r,o){this.iconFontMap.set(r,o)}},{key:"getIconFontKey",value:function(r){return this.iconFontMap.get(r)||r}},{key:"getGlyph",value:function(r){return this.iconFontGlyphs[r]?String.fromCharCode(parseInt(this.iconFontGlyphs[r],16)):""}},{key:"setFontOptions",value:function(r){this.fontOptions=(0,oe.Z)((0,oe.Z)({},this.fontOptions),r),this.key=this.getKey();var o=this.getNewChars(this.key,this.fontOptions.characterSet),u=this.cache.get(this.key);if(!(u&&o.length===0)){var f=this.generateFontAtlas(this.key,o,u);this.fontAtlas=f,this.cache.set(this.key,f)}}},{key:"addFontFace",value:function(r,o){var u=this,f=document.createElement("style");f.type="text/css",f.innerText=`
        @font-face{
            font-family: '`.concat(r,`';
            src: url('`).concat(o,`') format('woff2'),
            url('`).concat(o,`') format('woff'),
            url('`).concat(o,`') format('truetype');
        }`),f.onload=function(){if(document.fonts)try{document.fonts.load("24px ".concat(r),"L7text"),document.fonts.ready.then(function(){u.emit("fontloaded",{fontFamily:r})})}catch(g){console.warn("\u5F53\u524D\u73AF\u5883\u4E0D\u652F\u6301 document.fonts !"),console.warn("\u5F53\u524D\u73AF\u5883\u4E0D\u652F\u6301 iconfont !"),console.warn(g)}},document.getElementsByTagName("head")[0].appendChild(f)}},{key:"destroy",value:function(){this.cache.clear(),this.iconFontMap.clear()}},{key:"generateFontAtlas",value:function(r,o,u){var f=this.fontOptions,g=f.fontFamily,x=f.fontWeight,I=f.fontSize,P=f.buffer,G=f.sdf,$=f.radius,Ee=f.cutoff,Se=f.iconfont,Re=u&&u.data;Re||(Re=vs.document.createElement("canvas"),Re.width=td);var Ye=Re.getContext("2d",{willReadFrequently:!0});$h(Ye,g,I,x);var St=sp((0,oe.Z)({getFontWidth:function(Ic){return Ye.measureText(Ic).width},fontHeight:I*rd,buffer:P,characterSet:o,maxCanvasWidth:td},u&&{mapping:u.mapping,xOffset:u.xOffset,yOffset:u.yOffset})),vt=St.mapping,Ut=St.canvasHeight,Kt=St.xOffset,Tr=St.yOffset,on=Ye.getImageData(0,0,Re.width,Re.height);if(Re.height=Ut,Ye.putImageData(on,0,0),$h(Ye,g,I,x),G){var dn=new(fs())(I,P,$,Ee,g,x),vn=Ye.getImageData(0,0,dn.size,dn.size),si=Hh(o),ai;try{for(si.s();!(ai=si.n()).done;){var Hi=ai.value;if(Se){var wa=String.fromCharCode(parseInt(Hi.replace("&#x","").replace(";",""),16)),qa=dn.draw(wa);eh(qa,vn)}else eh(dn.draw(Hi),vn);Ye.putImageData(vn,vt[Hi].x,vt[Hi].y)}}catch(Gl){si.e(Gl)}finally{si.f()}}else{var zs=Hh(o),Ou;try{for(zs.s();!(Ou=zs.n()).done;){var Ul=Ou.value;Ye.fillText(Ul,vt[Ul].x,vt[Ul].y+I*xd)}}catch(Gl){zs.e(Gl)}finally{zs.f()}}return{xOffset:Kt,yOffset:Tr,mapping:vt,data:Re,width:Re.width,height:Re.height}}},{key:"getKey",value:function(){return"key";var r,o,u,f,g,x,I,P}},{key:"getNewChars",value:function(r,o){var u=this.cache.get(r);if(!u)return o;var f=[],g=u.mapping,x=new Set(Object.keys(g)),I=new Set(o);return I.forEach(function(P){x.has(P)||f.push(P)}),f}}]),t}(ir.EventEmitter))||vd),Gp,Fd;function Tv(e){var i=tv();return function(){var n=(0,rr.Z)(e),r;if(i){var o=(0,rr.Z)(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return(0,jn.Z)(this,r)}}function tv(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var Mv=3,Nd=1024,id=64,kp=(Gp=(0,Ki.b2)(),Gp(Fd=function(e){(0,ui.Z)(t,e);var i=Tv(t);function t(){var n;(0,Ur.Z)(this,t);for(var r=arguments.length,o=new Array(r),u=0;u<r;u++)o[u]=arguments[u];return n=i.call.apply(i,[this].concat(o)),(0,He.Z)((0,er.Z)(n),"canvasHeight",128),(0,He.Z)((0,er.Z)(n),"texture",void 0),(0,He.Z)((0,er.Z)(n),"canvas",void 0),(0,He.Z)((0,er.Z)(n),"iconData",void 0),(0,He.Z)((0,er.Z)(n),"iconMap",void 0),(0,He.Z)((0,er.Z)(n),"ctx",void 0),(0,He.Z)((0,er.Z)(n),"loadingImageCount",0),n}return(0,Jr.Z)(t,[{key:"isLoading",value:function(){return this.loadingImageCount===0}},{key:"init",value:function(){this.iconData=[],this.iconMap={},this.canvas=vs.document.createElement("canvas"),this.canvas.width=128,this.canvas.height=128,this.ctx=this.canvas.getContext("2d")}},{key:"addImage",value:function(){var n=(0,An.Z)(Nt().mark(function o(u,f){var g,x;return Nt().wrap(function(P){for(;;)switch(P.prev=P.next){case 0:return g=new Image,this.loadingImageCount++,this.hasImage(u)?console.warn("Image Id already exists"):this.iconData.push({id:u,size:id}),this.updateIconMap(),P.next=6,this.loadImage(f);case 6:g=P.sent,x=this.iconData.find(function(G){return G.id===u}),x&&(x.image=g,x.width=g.width,x.height=g.height),this.update();case 10:case"end":return P.stop()}},o,this)}));function r(o,u){return n.apply(this,arguments)}return r}()},{key:"addImageMini",value:function(r,o,u){var f=this,g=u.getSceneConfig().canvas,x=g.createImage();if(this.loadingImageCount++,this.hasImage(r))throw new Error("Image Id already exists");this.iconData.push({id:r,size:id}),this.updateIconMap(),this.loadImageMini(o,g).then(function(I){x=I;var P=f.iconData.find(function(G){return G.id===r});P&&(P.image=x,P.width=x.width,P.height=x.height),f.update()})}},{key:"getTexture",value:function(){return this.texture}},{key:"getIconMap",value:function(){return this.iconMap}},{key:"getCanvas",value:function(){return this.canvas}},{key:"hasImage",value:function(r){return this.iconMap.hasOwnProperty(r)}},{key:"removeImage",value:function(r){this.hasImage(r)&&(this.iconData=this.iconData.filter(function(o){return o.id!==r}),delete this.iconMap[r],this.update())}},{key:"destroy",value:function(){this.removeAllListeners("imageUpdate"),this.iconData=[],this.iconMap={}}},{key:"loadImage",value:function(r){return new Promise(function(o,u){if(r instanceof HTMLImageElement){o(r);return}var f=new Image;f.crossOrigin="anonymous",f.onload=function(){o(f)},f.onerror=function(){u(new Error("Could not load image at "+r))},f.src=r instanceof File?URL.createObjectURL(r):r})}},{key:"update",value:function(){this.updateIconMap(),this.updateIconAtlas(),this.loadingImageCount--,this.loadingImageCount===0&&this.emit("imageUpdate")}},{key:"updateIconAtlas",value:function(){var r=this;this.canvas.width=Nd,this.canvas.height=this.canvasHeight,Object.keys(this.iconMap).forEach(function(o){var u=r.iconMap[o],f=u.x,g=u.y,x=u.image,I=u.width,P=I===void 0?64:I,G=u.height,$=G===void 0?64:G,Ee=Math.max(P,$),Se=Ee/id,Re=$/Se,Ye=P/Se;x&&r.ctx.drawImage(x,f+(id-Ye)/2,g+(id-Re)/2,Ye,Re)})}},{key:"updateIconMap",value:function(){var r=qh(this.iconData,Mv,Nd),o=r.mapping,u=r.canvasHeight;this.iconMap=o,this.canvasHeight=u}},{key:"loadImageMini",value:function(r,o){return new Promise(function(u,f){var g=o.createImage();g.crossOrigin="anonymous",g.onload=function(){u(g)},g.onerror=function(){f(new Error("Could not load image at "+r))},g.src=r})}}]),t}(ir.EventEmitter))||Fd);function no(){var e=new yl(16);return yl!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0),e[0]=1,e[5]=1,e[10]=1,e[15]=1,e}function Lp(e){var i=new yl(16);return i[0]=e[0],i[1]=e[1],i[2]=e[2],i[3]=e[3],i[4]=e[4],i[5]=e[5],i[6]=e[6],i[7]=e[7],i[8]=e[8],i[9]=e[9],i[10]=e[10],i[11]=e[11],i[12]=e[12],i[13]=e[13],i[14]=e[14],i[15]=e[15],i}function Hp(e,i){return e[0]=i[0],e[1]=i[1],e[2]=i[2],e[3]=i[3],e[4]=i[4],e[5]=i[5],e[6]=i[6],e[7]=i[7],e[8]=i[8],e[9]=i[9],e[10]=i[10],e[11]=i[11],e[12]=i[12],e[13]=i[13],e[14]=i[14],e[15]=i[15],e}function ph(e,i,t,n,r,o,u,f,g,x,I,P,G,$,Ee,Se){var Re=new yl(16);return Re[0]=e,Re[1]=i,Re[2]=t,Re[3]=n,Re[4]=r,Re[5]=o,Re[6]=u,Re[7]=f,Re[8]=g,Re[9]=x,Re[10]=I,Re[11]=P,Re[12]=G,Re[13]=$,Re[14]=Ee,Re[15]=Se,Re}function rv(e,i,t,n,r,o,u,f,g,x,I,P,G,$,Ee,Se,Re){return e[0]=i,e[1]=t,e[2]=n,e[3]=r,e[4]=o,e[5]=u,e[6]=f,e[7]=g,e[8]=x,e[9]=I,e[10]=P,e[11]=G,e[12]=$,e[13]=Ee,e[14]=Se,e[15]=Re,e}function Hu(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function Bd(e,i){if(e===i){var t=i[1],n=i[2],r=i[3],o=i[6],u=i[7],f=i[11];e[1]=i[4],e[2]=i[8],e[3]=i[12],e[4]=t,e[6]=i[9],e[7]=i[13],e[8]=n,e[9]=o,e[11]=i[14],e[12]=r,e[13]=u,e[14]=f}else e[0]=i[0],e[1]=i[4],e[2]=i[8],e[3]=i[12],e[4]=i[1],e[5]=i[5],e[6]=i[9],e[7]=i[13],e[8]=i[2],e[9]=i[6],e[10]=i[10],e[11]=i[14],e[12]=i[3],e[13]=i[7],e[14]=i[11],e[15]=i[15];return e}function Dp(e,i){var t=i[0],n=i[1],r=i[2],o=i[3],u=i[4],f=i[5],g=i[6],x=i[7],I=i[8],P=i[9],G=i[10],$=i[11],Ee=i[12],Se=i[13],Re=i[14],Ye=i[15],St=t*f-n*u,vt=t*g-r*u,Ut=t*x-o*u,Kt=n*g-r*f,Tr=n*x-o*f,on=r*x-o*g,dn=I*Se-P*Ee,vn=I*Re-G*Ee,si=I*Ye-$*Ee,ai=P*Re-G*Se,Hi=P*Ye-$*Se,wa=G*Ye-$*Re,qa=St*wa-vt*Hi+Ut*ai+Kt*si-Tr*vn+on*dn;return qa?(qa=1/qa,e[0]=(f*wa-g*Hi+x*ai)*qa,e[1]=(r*Hi-n*wa-o*ai)*qa,e[2]=(Se*on-Re*Tr+Ye*Kt)*qa,e[3]=(G*Tr-P*on-$*Kt)*qa,e[4]=(g*si-u*wa-x*vn)*qa,e[5]=(t*wa-r*si+o*vn)*qa,e[6]=(Re*Ut-Ee*on-Ye*vt)*qa,e[7]=(I*on-G*Ut+$*vt)*qa,e[8]=(u*Hi-f*si+x*dn)*qa,e[9]=(n*si-t*Hi-o*dn)*qa,e[10]=(Ee*Tr-Se*Ut+Ye*St)*qa,e[11]=(P*Ut-I*Tr-$*St)*qa,e[12]=(f*vn-u*ai-g*dn)*qa,e[13]=(t*ai-n*vn+r*dn)*qa,e[14]=(Se*vt-Ee*Kt-Re*St)*qa,e[15]=(I*Kt-P*vt+G*St)*qa,e):null}function Xh(e,i){var t=i[0],n=i[1],r=i[2],o=i[3],u=i[4],f=i[5],g=i[6],x=i[7],I=i[8],P=i[9],G=i[10],$=i[11],Ee=i[12],Se=i[13],Re=i[14],Ye=i[15];return e[0]=f*(G*Ye-$*Re)-P*(g*Ye-x*Re)+Se*(g*$-x*G),e[1]=-(n*(G*Ye-$*Re)-P*(r*Ye-o*Re)+Se*(r*$-o*G)),e[2]=n*(g*Ye-x*Re)-f*(r*Ye-o*Re)+Se*(r*x-o*g),e[3]=-(n*(g*$-x*G)-f*(r*$-o*G)+P*(r*x-o*g)),e[4]=-(u*(G*Ye-$*Re)-I*(g*Ye-x*Re)+Ee*(g*$-x*G)),e[5]=t*(G*Ye-$*Re)-I*(r*Ye-o*Re)+Ee*(r*$-o*G),e[6]=-(t*(g*Ye-x*Re)-u*(r*Ye-o*Re)+Ee*(r*x-o*g)),e[7]=t*(g*$-x*G)-u*(r*$-o*G)+I*(r*x-o*g),e[8]=u*(P*Ye-$*Se)-I*(f*Ye-x*Se)+Ee*(f*$-x*P),e[9]=-(t*(P*Ye-$*Se)-I*(n*Ye-o*Se)+Ee*(n*$-o*P)),e[10]=t*(f*Ye-x*Se)-u*(n*Ye-o*Se)+Ee*(n*x-o*f),e[11]=-(t*(f*$-x*P)-u*(n*$-o*P)+I*(n*x-o*f)),e[12]=-(u*(P*Re-G*Se)-I*(f*Re-g*Se)+Ee*(f*G-g*P)),e[13]=t*(P*Re-G*Se)-I*(n*Re-r*Se)+Ee*(n*G-r*P),e[14]=-(t*(f*Re-g*Se)-u*(n*Re-r*Se)+Ee*(n*g-r*f)),e[15]=t*(f*G-g*P)-u*(n*G-r*P)+I*(n*g-r*f),e}function Ed(e){var i=e[0],t=e[1],n=e[2],r=e[3],o=e[4],u=e[5],f=e[6],g=e[7],x=e[8],I=e[9],P=e[10],G=e[11],$=e[12],Ee=e[13],Se=e[14],Re=e[15],Ye=i*u-t*o,St=i*f-n*o,vt=i*g-r*o,Ut=t*f-n*u,Kt=t*g-r*u,Tr=n*g-r*f,on=x*Ee-I*$,dn=x*Se-P*$,vn=x*Re-G*$,si=I*Se-P*Ee,ai=I*Re-G*Ee,Hi=P*Re-G*Se;return Ye*Hi-St*ai+vt*si+Ut*vn-Kt*dn+Tr*on}function Sp(e,i,t){var n=i[0],r=i[1],o=i[2],u=i[3],f=i[4],g=i[5],x=i[6],I=i[7],P=i[8],G=i[9],$=i[10],Ee=i[11],Se=i[12],Re=i[13],Ye=i[14],St=i[15],vt=t[0],Ut=t[1],Kt=t[2],Tr=t[3];return e[0]=vt*n+Ut*f+Kt*P+Tr*Se,e[1]=vt*r+Ut*g+Kt*G+Tr*Re,e[2]=vt*o+Ut*x+Kt*$+Tr*Ye,e[3]=vt*u+Ut*I+Kt*Ee+Tr*St,vt=t[4],Ut=t[5],Kt=t[6],Tr=t[7],e[4]=vt*n+Ut*f+Kt*P+Tr*Se,e[5]=vt*r+Ut*g+Kt*G+Tr*Re,e[6]=vt*o+Ut*x+Kt*$+Tr*Ye,e[7]=vt*u+Ut*I+Kt*Ee+Tr*St,vt=t[8],Ut=t[9],Kt=t[10],Tr=t[11],e[8]=vt*n+Ut*f+Kt*P+Tr*Se,e[9]=vt*r+Ut*g+Kt*G+Tr*Re,e[10]=vt*o+Ut*x+Kt*$+Tr*Ye,e[11]=vt*u+Ut*I+Kt*Ee+Tr*St,vt=t[12],Ut=t[13],Kt=t[14],Tr=t[15],e[12]=vt*n+Ut*f+Kt*P+Tr*Se,e[13]=vt*r+Ut*g+Kt*G+Tr*Re,e[14]=vt*o+Ut*x+Kt*$+Tr*Ye,e[15]=vt*u+Ut*I+Kt*Ee+Tr*St,e}function th(e,i,t){var n=t[0],r=t[1],o=t[2],u,f,g,x,I,P,G,$,Ee,Se,Re,Ye;return i===e?(e[12]=i[0]*n+i[4]*r+i[8]*o+i[12],e[13]=i[1]*n+i[5]*r+i[9]*o+i[13],e[14]=i[2]*n+i[6]*r+i[10]*o+i[14],e[15]=i[3]*n+i[7]*r+i[11]*o+i[15]):(u=i[0],f=i[1],g=i[2],x=i[3],I=i[4],P=i[5],G=i[6],$=i[7],Ee=i[8],Se=i[9],Re=i[10],Ye=i[11],e[0]=u,e[1]=f,e[2]=g,e[3]=x,e[4]=I,e[5]=P,e[6]=G,e[7]=$,e[8]=Ee,e[9]=Se,e[10]=Re,e[11]=Ye,e[12]=u*n+I*r+Ee*o+i[12],e[13]=f*n+P*r+Se*o+i[13],e[14]=g*n+G*r+Re*o+i[14],e[15]=x*n+$*r+Ye*o+i[15]),e}function Ch(e,i,t){var n=t[0],r=t[1],o=t[2];return e[0]=i[0]*n,e[1]=i[1]*n,e[2]=i[2]*n,e[3]=i[3]*n,e[4]=i[4]*r,e[5]=i[5]*r,e[6]=i[6]*r,e[7]=i[7]*r,e[8]=i[8]*o,e[9]=i[9]*o,e[10]=i[10]*o,e[11]=i[11]*o,e[12]=i[12],e[13]=i[13],e[14]=i[14],e[15]=i[15],e}function Iv(e,i,t,n){var r=n[0],o=n[1],u=n[2],f=Math.hypot(r,o,u),g,x,I,P,G,$,Ee,Se,Re,Ye,St,vt,Ut,Kt,Tr,on,dn,vn,si,ai,Hi,wa,qa,zs;return f<Au?null:(f=1/f,r*=f,o*=f,u*=f,g=Math.sin(t),x=Math.cos(t),I=1-x,P=i[0],G=i[1],$=i[2],Ee=i[3],Se=i[4],Re=i[5],Ye=i[6],St=i[7],vt=i[8],Ut=i[9],Kt=i[10],Tr=i[11],on=r*r*I+x,dn=o*r*I+u*g,vn=u*r*I-o*g,si=r*o*I-u*g,ai=o*o*I+x,Hi=u*o*I+r*g,wa=r*u*I+o*g,qa=o*u*I-r*g,zs=u*u*I+x,e[0]=P*on+Se*dn+vt*vn,e[1]=G*on+Re*dn+Ut*vn,e[2]=$*on+Ye*dn+Kt*vn,e[3]=Ee*on+St*dn+Tr*vn,e[4]=P*si+Se*ai+vt*Hi,e[5]=G*si+Re*ai+Ut*Hi,e[6]=$*si+Ye*ai+Kt*Hi,e[7]=Ee*si+St*ai+Tr*Hi,e[8]=P*wa+Se*qa+vt*zs,e[9]=G*wa+Re*qa+Ut*zs,e[10]=$*wa+Ye*qa+Kt*zs,e[11]=Ee*wa+St*qa+Tr*zs,i!==e&&(e[12]=i[12],e[13]=i[13],e[14]=i[14],e[15]=i[15]),e)}function hh(e,i,t){var n=Math.sin(t),r=Math.cos(t),o=i[4],u=i[5],f=i[6],g=i[7],x=i[8],I=i[9],P=i[10],G=i[11];return i!==e&&(e[0]=i[0],e[1]=i[1],e[2]=i[2],e[3]=i[3],e[12]=i[12],e[13]=i[13],e[14]=i[14],e[15]=i[15]),e[4]=o*r+x*n,e[5]=u*r+I*n,e[6]=f*r+P*n,e[7]=g*r+G*n,e[8]=x*r-o*n,e[9]=I*r-u*n,e[10]=P*r-f*n,e[11]=G*r-g*n,e}function ad(e,i,t){var n=Math.sin(t),r=Math.cos(t),o=i[0],u=i[1],f=i[2],g=i[3],x=i[8],I=i[9],P=i[10],G=i[11];return i!==e&&(e[4]=i[4],e[5]=i[5],e[6]=i[6],e[7]=i[7],e[12]=i[12],e[13]=i[13],e[14]=i[14],e[15]=i[15]),e[0]=o*r-x*n,e[1]=u*r-I*n,e[2]=f*r-P*n,e[3]=g*r-G*n,e[8]=o*n+x*r,e[9]=u*n+I*r,e[10]=f*n+P*r,e[11]=g*n+G*r,e}function od(e,i,t){var n=Math.sin(t),r=Math.cos(t),o=i[0],u=i[1],f=i[2],g=i[3],x=i[4],I=i[5],P=i[6],G=i[7];return i!==e&&(e[8]=i[8],e[9]=i[9],e[10]=i[10],e[11]=i[11],e[12]=i[12],e[13]=i[13],e[14]=i[14],e[15]=i[15]),e[0]=o*r+x*n,e[1]=u*r+I*n,e[2]=f*r+P*n,e[3]=g*r+G*n,e[4]=x*r-o*n,e[5]=I*r-u*n,e[6]=P*r-f*n,e[7]=G*r-g*n,e}function nv(e,i){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=i[0],e[13]=i[1],e[14]=i[2],e[15]=1,e}function Ov(e,i){return e[0]=i[0],e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=i[1],e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=i[2],e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function Rv(e,i,t){var n=t[0],r=t[1],o=t[2],u=Math.hypot(n,r,o),f,g,x;return u<Au?null:(u=1/u,n*=u,r*=u,o*=u,f=Math.sin(i),g=Math.cos(i),x=1-g,e[0]=n*n*x+g,e[1]=r*n*x+o*f,e[2]=o*n*x-r*f,e[3]=0,e[4]=n*r*x-o*f,e[5]=r*r*x+g,e[6]=o*r*x+n*f,e[7]=0,e[8]=n*o*x+r*f,e[9]=r*o*x-n*f,e[10]=o*o*x+g,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e)}function Ip(e,i){var t=Math.sin(i),n=Math.cos(i);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=n,e[6]=t,e[7]=0,e[8]=0,e[9]=-t,e[10]=n,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function zd(e,i){var t=Math.sin(i),n=Math.cos(i);return e[0]=n,e[1]=0,e[2]=-t,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=t,e[9]=0,e[10]=n,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function Ud(e,i){var t=Math.sin(i),n=Math.cos(i);return e[0]=n,e[1]=t,e[2]=0,e[3]=0,e[4]=-t,e[5]=n,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function rh(e,i,t){var n=i[0],r=i[1],o=i[2],u=i[3],f=n+n,g=r+r,x=o+o,I=n*f,P=n*g,G=n*x,$=r*g,Ee=r*x,Se=o*x,Re=u*f,Ye=u*g,St=u*x;return e[0]=1-($+Se),e[1]=P+St,e[2]=G-Ye,e[3]=0,e[4]=P-St,e[5]=1-(I+Se),e[6]=Ee+Re,e[7]=0,e[8]=G+Ye,e[9]=Ee-Re,e[10]=1-(I+$),e[11]=0,e[12]=t[0],e[13]=t[1],e[14]=t[2],e[15]=1,e}function iv(e,i){var t=new yl(3),n=-i[0],r=-i[1],o=-i[2],u=i[3],f=i[4],g=i[5],x=i[6],I=i[7],P=n*n+r*r+o*o+u*u;return P>0?(t[0]=(f*u+I*n+g*o-x*r)*2/P,t[1]=(g*u+I*r+x*n-f*o)*2/P,t[2]=(x*u+I*o+f*r-g*n)*2/P):(t[0]=(f*u+I*n+g*o-x*r)*2,t[1]=(g*u+I*r+x*n-f*o)*2,t[2]=(x*u+I*o+f*r-g*n)*2),rh(e,i,t),e}function Pv(e,i){return e[0]=i[12],e[1]=i[13],e[2]=i[14],e}function Dh(e,i){var t=i[0],n=i[1],r=i[2],o=i[4],u=i[5],f=i[6],g=i[8],x=i[9],I=i[10];return e[0]=Math.hypot(t,n,r),e[1]=Math.hypot(o,u,f),e[2]=Math.hypot(g,x,I),e}function sd(e,i){var t=new yl(3);Dh(t,i);var n=1/t[0],r=1/t[1],o=1/t[2],u=i[0]*n,f=i[1]*r,g=i[2]*o,x=i[4]*n,I=i[5]*r,P=i[6]*o,G=i[8]*n,$=i[9]*r,Ee=i[10]*o,Se=u+I+Ee,Re=0;return Se>0?(Re=Math.sqrt(Se+1)*2,e[3]=.25*Re,e[0]=(P-$)/Re,e[1]=(G-g)/Re,e[2]=(f-x)/Re):u>I&&u>Ee?(Re=Math.sqrt(1+u-I-Ee)*2,e[3]=(P-$)/Re,e[0]=.25*Re,e[1]=(f+x)/Re,e[2]=(G+g)/Re):I>Ee?(Re=Math.sqrt(1+I-u-Ee)*2,e[3]=(G-g)/Re,e[0]=(f+x)/Re,e[1]=.25*Re,e[2]=(P+$)/Re):(Re=Math.sqrt(1+Ee-u-I)*2,e[3]=(f-x)/Re,e[0]=(G+g)/Re,e[1]=(P+$)/Re,e[2]=.25*Re),e}function hc(e,i,t,n){var r=i[0],o=i[1],u=i[2],f=i[3],g=r+r,x=o+o,I=u+u,P=r*g,G=r*x,$=r*I,Ee=o*x,Se=o*I,Re=u*I,Ye=f*g,St=f*x,vt=f*I,Ut=n[0],Kt=n[1],Tr=n[2];return e[0]=(1-(Ee+Re))*Ut,e[1]=(G+vt)*Ut,e[2]=($-St)*Ut,e[3]=0,e[4]=(G-vt)*Kt,e[5]=(1-(P+Re))*Kt,e[6]=(Se+Ye)*Kt,e[7]=0,e[8]=($+St)*Tr,e[9]=(Se-Ye)*Tr,e[10]=(1-(P+Ee))*Tr,e[11]=0,e[12]=t[0],e[13]=t[1],e[14]=t[2],e[15]=1,e}function xf(e,i,t,n,r){var o=i[0],u=i[1],f=i[2],g=i[3],x=o+o,I=u+u,P=f+f,G=o*x,$=o*I,Ee=o*P,Se=u*I,Re=u*P,Ye=f*P,St=g*x,vt=g*I,Ut=g*P,Kt=n[0],Tr=n[1],on=n[2],dn=r[0],vn=r[1],si=r[2],ai=(1-(Se+Ye))*Kt,Hi=($+Ut)*Kt,wa=(Ee-vt)*Kt,qa=($-Ut)*Tr,zs=(1-(G+Ye))*Tr,Ou=(Re+St)*Tr,Ul=(Ee+vt)*on,Gl=(Re-St)*on,Ic=(1-(G+Se))*on;return e[0]=ai,e[1]=Hi,e[2]=wa,e[3]=0,e[4]=qa,e[5]=zs,e[6]=Ou,e[7]=0,e[8]=Ul,e[9]=Gl,e[10]=Ic,e[11]=0,e[12]=t[0]+dn-(ai*dn+qa*vn+Ul*si),e[13]=t[1]+vn-(Hi*dn+zs*vn+Gl*si),e[14]=t[2]+si-(wa*dn+Ou*vn+Ic*si),e[15]=1,e}function ud(e,i){var t=i[0],n=i[1],r=i[2],o=i[3],u=t+t,f=n+n,g=r+r,x=t*u,I=n*u,P=n*f,G=r*u,$=r*f,Ee=r*g,Se=o*u,Re=o*f,Ye=o*g;return e[0]=1-P-Ee,e[1]=I+Ye,e[2]=G-Re,e[3]=0,e[4]=I-Ye,e[5]=1-x-Ee,e[6]=$+Se,e[7]=0,e[8]=G+Re,e[9]=$-Se,e[10]=1-x-P,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function kv(e,i,t,n,r,o,u){var f=1/(t-i),g=1/(r-n),x=1/(o-u);return e[0]=o*2*f,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=o*2*g,e[6]=0,e[7]=0,e[8]=(t+i)*f,e[9]=(r+n)*g,e[10]=(u+o)*x,e[11]=-1,e[12]=0,e[13]=0,e[14]=u*o*2*x,e[15]=0,e}function av(e,i,t,n,r){var o=1/Math.tan(i/2),u;return e[0]=o/t,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=o,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=-1,e[12]=0,e[13]=0,e[15]=0,r!=null&&r!==1/0?(u=1/(n-r),e[10]=(r+n)*u,e[14]=2*r*n*u):(e[10]=-1,e[14]=-2*n),e}var Sd=av;function Lv(e,i,t,n,r){var o=1/Math.tan(i/2),u;return e[0]=o/t,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=o,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=-1,e[12]=0,e[13]=0,e[15]=0,r!=null&&r!==1/0?(u=1/(n-r),e[10]=r*u,e[14]=r*n*u):(e[10]=-1,e[14]=-n),e}function ov(e,i,t,n){var r=Math.tan(i.upDegrees*Math.PI/180),o=Math.tan(i.downDegrees*Math.PI/180),u=Math.tan(i.leftDegrees*Math.PI/180),f=Math.tan(i.rightDegrees*Math.PI/180),g=2/(u+f),x=2/(r+o);return e[0]=g,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=x,e[6]=0,e[7]=0,e[8]=-((u-f)*g*.5),e[9]=(r-o)*x*.5,e[10]=n/(t-n),e[11]=-1,e[12]=0,e[13]=0,e[14]=n*t/(t-n),e[15]=0,e}function Zd(e,i,t,n,r,o,u){var f=1/(i-t),g=1/(n-r),x=1/(o-u);return e[0]=-2*f,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*g,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*x,e[11]=0,e[12]=(i+t)*f,e[13]=(r+n)*g,e[14]=(u+o)*x,e[15]=1,e}var dh=Zd;function Dv(e,i,t,n,r,o,u){var f=1/(i-t),g=1/(n-r),x=1/(o-u);return e[0]=-2*f,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*g,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=x,e[11]=0,e[12]=(i+t)*f,e[13]=(r+n)*g,e[14]=o*x,e[15]=1,e}function jd(e,i,t,n){var r,o,u,f,g,x,I,P,G,$,Ee=i[0],Se=i[1],Re=i[2],Ye=n[0],St=n[1],vt=n[2],Ut=t[0],Kt=t[1],Tr=t[2];return Math.abs(Ee-Ut)<Au&&Math.abs(Se-Kt)<Au&&Math.abs(Re-Tr)<Au?Hu(e):(I=Ee-Ut,P=Se-Kt,G=Re-Tr,$=1/Math.hypot(I,P,G),I*=$,P*=$,G*=$,r=St*G-vt*P,o=vt*I-Ye*G,u=Ye*P-St*I,$=Math.hypot(r,o,u),$?($=1/$,r*=$,o*=$,u*=$):(r=0,o=0,u=0),f=P*u-G*o,g=G*r-I*u,x=I*o-P*r,$=Math.hypot(f,g,x),$?($=1/$,f*=$,g*=$,x*=$):(f=0,g=0,x=0),e[0]=r,e[1]=f,e[2]=I,e[3]=0,e[4]=o,e[5]=g,e[6]=P,e[7]=0,e[8]=u,e[9]=x,e[10]=G,e[11]=0,e[12]=-(r*Ee+o*Se+u*Re),e[13]=-(f*Ee+g*Se+x*Re),e[14]=-(I*Ee+P*Se+G*Re),e[15]=1,e)}function sv(e,i,t,n){var r=i[0],o=i[1],u=i[2],f=n[0],g=n[1],x=n[2],I=r-t[0],P=o-t[1],G=u-t[2],$=I*I+P*P+G*G;$>0&&($=1/Math.sqrt($),I*=$,P*=$,G*=$);var Ee=g*G-x*P,Se=x*I-f*G,Re=f*P-g*I;return $=Ee*Ee+Se*Se+Re*Re,$>0&&($=1/Math.sqrt($),Ee*=$,Se*=$,Re*=$),e[0]=Ee,e[1]=Se,e[2]=Re,e[3]=0,e[4]=P*Re-G*Se,e[5]=G*Ee-I*Re,e[6]=I*Se-P*Ee,e[7]=0,e[8]=I,e[9]=P,e[10]=G,e[11]=0,e[12]=r,e[13]=o,e[14]=u,e[15]=1,e}function uv(e){return"mat4("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+", "+e[8]+", "+e[9]+", "+e[10]+", "+e[11]+", "+e[12]+", "+e[13]+", "+e[14]+", "+e[15]+")"}function Vd(e){return Math.hypot(e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8],e[9],e[10],e[11],e[12],e[13],e[14],e[15])}function Fv(e,i,t){return e[0]=i[0]+t[0],e[1]=i[1]+t[1],e[2]=i[2]+t[2],e[3]=i[3]+t[3],e[4]=i[4]+t[4],e[5]=i[5]+t[5],e[6]=i[6]+t[6],e[7]=i[7]+t[7],e[8]=i[8]+t[8],e[9]=i[9]+t[9],e[10]=i[10]+t[10],e[11]=i[11]+t[11],e[12]=i[12]+t[12],e[13]=i[13]+t[13],e[14]=i[14]+t[14],e[15]=i[15]+t[15],e}function lv(e,i,t){return e[0]=i[0]-t[0],e[1]=i[1]-t[1],e[2]=i[2]-t[2],e[3]=i[3]-t[3],e[4]=i[4]-t[4],e[5]=i[5]-t[5],e[6]=i[6]-t[6],e[7]=i[7]-t[7],e[8]=i[8]-t[8],e[9]=i[9]-t[9],e[10]=i[10]-t[10],e[11]=i[11]-t[11],e[12]=i[12]-t[12],e[13]=i[13]-t[13],e[14]=i[14]-t[14],e[15]=i[15]-t[15],e}function cv(e,i,t){return e[0]=i[0]*t,e[1]=i[1]*t,e[2]=i[2]*t,e[3]=i[3]*t,e[4]=i[4]*t,e[5]=i[5]*t,e[6]=i[6]*t,e[7]=i[7]*t,e[8]=i[8]*t,e[9]=i[9]*t,e[10]=i[10]*t,e[11]=i[11]*t,e[12]=i[12]*t,e[13]=i[13]*t,e[14]=i[14]*t,e[15]=i[15]*t,e}function Nv(e,i,t,n){return e[0]=i[0]+t[0]*n,e[1]=i[1]+t[1]*n,e[2]=i[2]+t[2]*n,e[3]=i[3]+t[3]*n,e[4]=i[4]+t[4]*n,e[5]=i[5]+t[5]*n,e[6]=i[6]+t[6]*n,e[7]=i[7]+t[7]*n,e[8]=i[8]+t[8]*n,e[9]=i[9]+t[9]*n,e[10]=i[10]+t[10]*n,e[11]=i[11]+t[11]*n,e[12]=i[12]+t[12]*n,e[13]=i[13]+t[13]*n,e[14]=i[14]+t[14]*n,e[15]=i[15]+t[15]*n,e}function vh(e,i){return e[0]===i[0]&&e[1]===i[1]&&e[2]===i[2]&&e[3]===i[3]&&e[4]===i[4]&&e[5]===i[5]&&e[6]===i[6]&&e[7]===i[7]&&e[8]===i[8]&&e[9]===i[9]&&e[10]===i[10]&&e[11]===i[11]&&e[12]===i[12]&&e[13]===i[13]&&e[14]===i[14]&&e[15]===i[15]}function Gd(e,i){var t=e[0],n=e[1],r=e[2],o=e[3],u=e[4],f=e[5],g=e[6],x=e[7],I=e[8],P=e[9],G=e[10],$=e[11],Ee=e[12],Se=e[13],Re=e[14],Ye=e[15],St=i[0],vt=i[1],Ut=i[2],Kt=i[3],Tr=i[4],on=i[5],dn=i[6],vn=i[7],si=i[8],ai=i[9],Hi=i[10],wa=i[11],qa=i[12],zs=i[13],Ou=i[14],Ul=i[15];return Math.abs(t-St)<=Au*Math.max(1,Math.abs(t),Math.abs(St))&&Math.abs(n-vt)<=Au*Math.max(1,Math.abs(n),Math.abs(vt))&&Math.abs(r-Ut)<=Au*Math.max(1,Math.abs(r),Math.abs(Ut))&&Math.abs(o-Kt)<=Au*Math.max(1,Math.abs(o),Math.abs(Kt))&&Math.abs(u-Tr)<=Au*Math.max(1,Math.abs(u),Math.abs(Tr))&&Math.abs(f-on)<=Au*Math.max(1,Math.abs(f),Math.abs(on))&&Math.abs(g-dn)<=Au*Math.max(1,Math.abs(g),Math.abs(dn))&&Math.abs(x-vn)<=Au*Math.max(1,Math.abs(x),Math.abs(vn))&&Math.abs(I-si)<=Au*Math.max(1,Math.abs(I),Math.abs(si))&&Math.abs(P-ai)<=Au*Math.max(1,Math.abs(P),Math.abs(ai))&&Math.abs(G-Hi)<=Au*Math.max(1,Math.abs(G),Math.abs(Hi))&&Math.abs($-wa)<=Au*Math.max(1,Math.abs($),Math.abs(wa))&&Math.abs(Ee-qa)<=Au*Math.max(1,Math.abs(Ee),Math.abs(qa))&&Math.abs(Se-zs)<=Au*Math.max(1,Math.abs(Se),Math.abs(zs))&&Math.abs(Re-Ou)<=Au*Math.max(1,Math.abs(Re),Math.abs(Ou))&&Math.abs(Ye-Ul)<=Au*Math.max(1,Math.abs(Ye),Math.abs(Ul))}var Hd=Sp,f0=lv,fv,Bv,zv=(fv=(0,Ki.b2)(),fv(Bv=function(){function e(){(0,Ur.Z)(this,e),(0,He.Z)(this,"viewport",void 0),(0,He.Z)(this,"overridedViewProjectionMatrix",void 0),(0,He.Z)(this,"jitteredViewProjectionMatrix",void 0),(0,He.Z)(this,"jitteredProjectionMatrix",void 0),(0,He.Z)(this,"viewMatrixInverse",void 0),(0,He.Z)(this,"cameraPosition",void 0)}return(0,Jr.Z)(e,[{key:"init",value:function(){}},{key:"update",value:function(t){this.viewport=t,this.viewMatrixInverse=no(),Dp(this.viewMatrixInverse,t.getViewMatrix()),this.cameraPosition=[this.viewMatrixInverse[12],this.viewMatrixInverse[13],this.viewMatrixInverse[14]]}},{key:"getProjectionMatrix",value:function(){return this.jitteredProjectionMatrix||this.viewport.getProjectionMatrix()}},{key:"getModelMatrix",value:function(){return this.viewport.getModelMatrix()}},{key:"getViewMatrix",value:function(){return this.viewport.getViewMatrix()}},{key:"getViewMatrixUncentered",value:function(){return this.viewport.getViewMatrixUncentered()}},{key:"getViewProjectionMatrixUncentered",value:function(){return this.viewport.getViewProjectionMatrixUncentered()}},{key:"getViewProjectionMatrix",value:function(){return this.overridedViewProjectionMatrix||this.jitteredViewProjectionMatrix||this.viewport.getViewProjectionMatrix()}},{key:"getZoom",value:function(){return this.viewport.getZoom()}},{key:"getZoomScale",value:function(){return this.viewport.getZoomScale()}},{key:"getCenter",value:function(){var t=this.viewport.getCenter(),n=(0,Mr.Z)(t,2),r=n[0],o=n[1];return[r,o]}},{key:"getFocalDistance",value:function(){return this.viewport.getFocalDistance()}},{key:"getCameraPosition",value:function(){return this.cameraPosition}},{key:"projectFlat",value:function(t,n){return this.viewport.projectFlat(t,n)}},{key:"setViewProjectionMatrix",value:function(t){this.overridedViewProjectionMatrix=t}},{key:"jitterProjectionMatrix",value:function(t,n){var r=nv(no(),[t,n,0]);this.jitteredProjectionMatrix=Sp(no(),r,this.viewport.getProjectionMatrix()),this.jitteredViewProjectionMatrix=Sp(no(),this.jitteredProjectionMatrix,this.viewport.getViewMatrix())}},{key:"clearJitterProjectionMatrix",value:function(){this.jitteredProjectionMatrix=void 0,this.jitteredViewProjectionMatrix=void 0}}]),e}())||Bv),mh;(function(e){e.TOPRIGHT="topright",e.TOPLEFT="topleft",e.BOTTOMRIGHT="bottomright",e.BOTTOMLEFT="bottomleft",e.TOPCENTER="topcenter",e.BOTTOMCENTER="bottomcenter",e.LEFTCENTER="leftcenter",e.RIGHTCENTER="rightcenter",e.LEFTTOP="lefttop",e.RIGHTTOP="righttop",e.LEFTBOTTOM="leftbottom",e.RIGHTBOTTOM="rightbottom"})(mh||(mh={}));var Uv,Zv;function p0(e,i){var t=typeof Symbol!="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(!t){if(Array.isArray(e)||(t=h0(e))||i&&e&&typeof e.length=="number"){t&&(e=t);var n=0,r=function(){};return{s:r,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(x){throw x},f:r}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var o=!0,u=!1,f;return{s:function(){t=t.call(e)},n:function(){var x=t.next();return o=x.done,x},e:function(x){u=!0,f=x},f:function(){try{!o&&t.return!=null&&t.return()}finally{if(u)throw f}}}}function h0(e,i){if(!!e){if(typeof e=="string")return jv(e,i);var t=Object.prototype.toString.call(e).slice(8,-1);if(t==="Object"&&e.constructor&&(t=e.constructor.name),t==="Map"||t==="Set")return Array.from(e);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return jv(e,i)}}function jv(e,i){(i==null||i>e.length)&&(i=e.length);for(var t=0,n=new Array(i);t<i;t++)n[t]=e[t];return n}var gh={topleft:"column",topright:"column",bottomright:"column",bottomleft:"column",leftcenter:"column",rightcenter:"column",topcenter:"row",bottomcenter:"row",lefttop:"row",righttop:"row",leftbottom:"row",rightbottom:"row"},Wd=(Uv=(0,Ki.b2)(),Uv(Zv=function(){function e(){(0,Ur.Z)(this,e),(0,He.Z)(this,"container",void 0),(0,He.Z)(this,"controlCorners",void 0),(0,He.Z)(this,"controlContainer",void 0),(0,He.Z)(this,"scene",void 0),(0,He.Z)(this,"mapsService",void 0),(0,He.Z)(this,"controls",[]),(0,He.Z)(this,"unAddControls",[])}return(0,Jr.Z)(e,[{key:"init",value:function(t,n){this.container=t.container,this.scene=n,this.mapsService=n.get(Ln.IMapService),this.initControlPos()}},{key:"addControl",value:function(t,n){var r=n.get(Ln.IMapService);r.map?(t.addTo(this.scene),this.controls.push(t)):this.unAddControls.push(t)}},{key:"getControlByName",value:function(t){return this.controls.find(function(n){return n.controlOption.name===t})}},{key:"removeControl",value:function(t){var n=this.controls.indexOf(t);return n>-1&&this.controls.splice(n,1),t.remove(),this}},{key:"addControls",value:function(){var t=this;this.unAddControls.forEach(function(n){n.addTo(t.scene),t.controls.push(n)}),this.unAddControls=[]}},{key:"destroy",value:function(){var t=p0(this.controls),n;try{for(t.s();!(n=t.n()).done;){var r=n.value;r.remove()}}catch(o){t.e(o)}finally{t.f()}this.controls=[],this.clearControlPos()}},{key:"initControlPos",value:function(){var t=this.controlCorners={},n="l7-",r=this.controlContainer=Ua("div",n+"control-container",this.container);function o(){var f=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],g=f.map(function(x){return n+x}).join(" ");t[f.filter(function(x){return!["row","column"].includes(x)}).join("")]=Ua("div",g,r)}function u(f){var g=f.replace(/^(top|bottom|left|right|center)/,"$1-").split("-");return[].concat((0,ie.Z)(g),[gh[f]])}Object.values(mh).forEach(function(f){o(u(f))})}},{key:"clearControlPos",value:function(){for(var t in this.controlCorners)this.controlCorners[t]&&ns(this.controlCorners[t]);this.controlContainer&&ns(this.controlContainer)}}]),e}())||Zv),pv,ld,Vv=(pv=(0,Ki.b2)(),pv(ld=function(){function e(){(0,Ur.Z)(this,e),(0,He.Z)(this,"container",void 0),(0,He.Z)(this,"scene",void 0),(0,He.Z)(this,"mapsService",void 0),(0,He.Z)(this,"markers",[]),(0,He.Z)(this,"markerLayers",[]),(0,He.Z)(this,"unAddMarkers",[]),(0,He.Z)(this,"unAddMarkerLayers",[])}return(0,Jr.Z)(e,[{key:"addMarkerLayer",value:function(t){this.mapsService.map&&this.mapsService.getMarkerContainer()?(this.markerLayers.push(t),t.addTo(this.scene)):this.unAddMarkerLayers.push(t)}},{key:"removeMarkerLayer",value:function(t){t.destroy(),this.markerLayers.indexOf(t);var n=this.markerLayers.indexOf(t);n>-1&&this.markerLayers.splice(n,1)}},{key:"addMarker",value:function(t){this.mapsService.map&&this.mapsService.getMarkerContainer()?(this.markers.push(t),t.addTo(this.scene)):this.unAddMarkers.push(t)}},{key:"addMarkers",value:function(){var t=this;this.unAddMarkers.forEach(function(n){n.addTo(t.scene),t.markers.push(n)}),this.unAddMarkers=[]}},{key:"addMarkerLayers",value:function(){var t=this;this.unAddMarkerLayers.forEach(function(n){t.markerLayers.push(n),n.addTo(t.scene)}),this.unAddMarkers=[]}},{key:"removeMarker",value:function(t){t.remove(),this.markers.indexOf(t);var n=this.markers.indexOf(t);n>-1&&this.markers.splice(n,1)}},{key:"removeAllMarkers",value:function(){this.destroy()}},{key:"init",value:function(t){this.scene=t,this.mapsService=t.get(Ln.IMapService)}},{key:"destroy",value:function(){this.markers.forEach(function(t){t.remove()}),this.markers=[],this.markerLayers.forEach(function(t){t.destroy()}),this.markerLayers=[]}},{key:"removeMakerLayerMarker",value:function(t){t.destroy()}}]),e}())||ld),X0,Y0,ng=(X0=(0,Ki.b2)(),X0(Y0=function(){function e(){(0,Ur.Z)(this,e),(0,He.Z)(this,"scene",void 0),(0,He.Z)(this,"mapsService",void 0),(0,He.Z)(this,"popups",[]),(0,He.Z)(this,"unAddPopups",[])}return(0,Jr.Z)(e,[{key:"isMarkerReady",get:function(){return this.mapsService.map&&this.mapsService.getMarkerContainer()}},{key:"removePopup",value:function(t){t.isOpen()&&t.remove();var n=this.popups.indexOf(t);n>-1&&this.popups.splice(n,1);var r=this.unAddPopups.indexOf(t);r>-1&&this.unAddPopups.splice(r,1)}},{key:"destroy",value:function(){this.popups.forEach(function(t){return t.remove()})}},{key:"addPopup",value:function(t){var n=this;t&&t.getOptions().autoClose&&[].concat((0,ie.Z)(this.popups),(0,ie.Z)(this.unAddPopups)).forEach(function(r){r.getOptions().autoClose&&n.removePopup(r)}),this.isMarkerReady?(t.addTo(this.scene),this.popups.push(t)):this.unAddPopups.push(t),t.on("close",function(){n.removePopup(t)})}},{key:"initPopup",value:function(){var t=this;this.unAddPopups.length&&this.unAddPopups.forEach(function(n){t.addPopup(n),t.unAddPopups=[]})}},{key:"init",value:function(t){this.scene=t,this.mapsService=t.get(Ln.IMapService)}}]),e}())||Y0),ig={MapToken:"\u60A8\u6B63\u5728\u4F7F\u7528 Demo\u6D4B\u8BD5\u5730\u56FEtoken\uFF0C\u5982\u679C\u751F\u4EA7\u73AF\u5883\u4E2D\u4F7F\u7528\u53BB\u5BF9\u5E94\u5730\u56FE\u8BF7\u6CE8\u518CToken",SDK:"\u8BF7\u786E\u8BA4\u5F15\u5165\u4E86mapbox-gl api\u4E14\u5728L7\u4E4B\u524D\u5F15\u5165"},ag=ig,K0,Q0,og={id:"map",logoPosition:"bottomleft",logoVisible:!0,antialias:!0,stencil:!0,preserveDrawingBuffer:!1,pickBufferScale:1,fitBoundsOptions:{animate:!1}},sg={colors:["rgb(103,0,31)","rgb(178,24,43)","rgb(214,96,77)","rgb(244,165,130)","rgb(253,219,199)","rgb(247,247,247)","rgb(209,229,240)","rgb(146,197,222)","rgb(67,147,195)","rgb(33,102,172)","rgb(5,48,97)"],size:10,shape:"circle",scales:{},shape2d:["circle","triangle","square","pentagon","hexagon","octogon","hexagram","rhombus","vesica"],shape3d:["cylinder","triangleColumn","hexagonColumn","squareColumn"],minZoom:-1,maxZoom:24,visible:!0,autoFit:!1,pickingBuffer:0,enablePropagation:!1,zIndex:0,blend:"normal",pickedFeatureID:-1,enableMultiPassRenderer:!1,enablePicking:!0,active:!1,activeColor:"#2f54eb",enableHighlight:!1,enableSelect:!1,highlightColor:"#2f54eb",activeMix:0,selectColor:"blue",selectMix:0,enableTAA:!1,jitterScale:1,enableLighting:!1,animateOption:{enable:!1,interval:.2,duration:4,trailLength:.15},forward:!0},ug=(K0=(0,Ki.b2)(),K0(Q0=function(){function e(){(0,Ur.Z)(this,e),(0,He.Z)(this,"sceneConfigCache",{}),(0,He.Z)(this,"layerConfigCache",{}),(0,He.Z)(this,"layerAttributeConfigCache",{})}return(0,Jr.Z)(e,[{key:"getSceneConfig",value:function(t){return this.sceneConfigCache[t]}},{key:"getSceneWarninfo",value:function(t){return ag[t]}},{key:"setSceneConfig",value:function(t,n){this.sceneConfigCache[t]=(0,oe.Z)((0,oe.Z)({},og),n)}},{key:"getLayerConfig",value:function(t){return this.layerConfigCache[t]}},{key:"setLayerConfig",value:function(t,n,r){this.layerConfigCache[n]=(0,oe.Z)({},(0,Wr.merge)({},this.sceneConfigCache[t],sg,r))}},{key:"getAttributeConfig",value:function(t){return this.layerAttributeConfigCache[t]}},{key:"setAttributeConfig",value:function(t,n){this.layerAttributeConfigCache[t]=(0,oe.Z)((0,oe.Z)({},this.layerAttributeConfigCache[t]),n)}},{key:"clean",value:function(){this.sceneConfigCache={},this.layerConfigCache={}}}]),e}())||Q0);function Bs(e,i,t,n){!t||Object.defineProperty(e,i,{enumerable:t.enumerable,configurable:t.configurable,writable:t.writable,value:t.initializer?t.initializer.call(n):void 0})}function Ds(e,i,t,n,r){var o={};return Object.keys(n).forEach(function(u){o[u]=n[u]}),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=t.slice().reverse().reduce(function(u,f){return f(e,i,u)||u},o),r&&o.initializer!==void 0&&(o.value=o.initializer?o.initializer.call(r):void 0,o.initializer=void 0),o.initializer===void 0&&(Object.defineProperty(e,i,o),o=null),o}function J0(){var e=new yl(4);return yl!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0,e[3]=0),e}function Dy(e){var i=new glMatrix.ARRAY_TYPE(4);return i[0]=e[0],i[1]=e[1],i[2]=e[2],i[3]=e[3],i}function lg(e,i,t,n){var r=new yl(4);return r[0]=e,r[1]=i,r[2]=t,r[3]=n,r}function q0(e,i){return e[0]=i[0],e[1]=i[1],e[2]=i[2],e[3]=i[3],e}function cg(e,i,t,n,r){return e[0]=i,e[1]=t,e[2]=n,e[3]=r,e}function fg(e,i,t){return e[0]=i[0]+t[0],e[1]=i[1]+t[1],e[2]=i[2]+t[2],e[3]=i[3]+t[3],e}function Fy(e,i,t){return e[0]=i[0]-t[0],e[1]=i[1]-t[1],e[2]=i[2]-t[2],e[3]=i[3]-t[3],e}function Ny(e,i,t){return e[0]=i[0]*t[0],e[1]=i[1]*t[1],e[2]=i[2]*t[2],e[3]=i[3]*t[3],e}function By(e,i,t){return e[0]=i[0]/t[0],e[1]=i[1]/t[1],e[2]=i[2]/t[2],e[3]=i[3]/t[3],e}function em(e,i){return e[0]=Math.ceil(i[0]),e[1]=Math.ceil(i[1]),e[2]=Math.ceil(i[2]),e[3]=Math.ceil(i[3]),e}function zy(e,i){return e[0]=Math.floor(i[0]),e[1]=Math.floor(i[1]),e[2]=Math.floor(i[2]),e[3]=Math.floor(i[3]),e}function Uy(e,i,t){return e[0]=Math.min(i[0],t[0]),e[1]=Math.min(i[1],t[1]),e[2]=Math.min(i[2],t[2]),e[3]=Math.min(i[3],t[3]),e}function Zy(e,i,t){return e[0]=Math.max(i[0],t[0]),e[1]=Math.max(i[1],t[1]),e[2]=Math.max(i[2],t[2]),e[3]=Math.max(i[3],t[3]),e}function nh(e,i){return e[0]=Math.round(i[0]),e[1]=Math.round(i[1]),e[2]=Math.round(i[2]),e[3]=Math.round(i[3]),e}function d0(e,i,t){return e[0]=i[0]*t,e[1]=i[1]*t,e[2]=i[2]*t,e[3]=i[3]*t,e}function jy(e,i,t,n){return e[0]=i[0]+t[0]*n,e[1]=i[1]+t[1]*n,e[2]=i[2]+t[2]*n,e[3]=i[3]+t[3]*n,e}function Vy(e,i){var t=i[0]-e[0],n=i[1]-e[1],r=i[2]-e[2],o=i[3]-e[3];return Math.hypot(t,n,r,o)}function Gy(e,i){var t=i[0]-e[0],n=i[1]-e[1],r=i[2]-e[2],o=i[3]-e[3];return t*t+n*n+r*r+o*o}function Hy(e){var i=e[0],t=e[1],n=e[2],r=e[3];return Math.hypot(i,t,n,r)}function tm(e){var i=e[0],t=e[1],n=e[2],r=e[3];return i*i+t*t+n*n+r*r}function Wy(e,i){return e[0]=-i[0],e[1]=-i[1],e[2]=-i[2],e[3]=-i[3],e}function rm(e,i){return e[0]=1/i[0],e[1]=1/i[1],e[2]=1/i[2],e[3]=1/i[3],e}function $y(e,i){var t=i[0],n=i[1],r=i[2],o=i[3],u=t*t+n*n+r*r+o*o;return u>0&&(u=1/Math.sqrt(u)),e[0]=t*u,e[1]=n*u,e[2]=r*u,e[3]=o*u,e}function Xy(e,i){return e[0]*i[0]+e[1]*i[1]+e[2]*i[2]+e[3]*i[3]}function Yy(e,i,t,n){var r=t[0]*n[1]-t[1]*n[0],o=t[0]*n[2]-t[2]*n[0],u=t[0]*n[3]-t[3]*n[0],f=t[1]*n[2]-t[2]*n[1],g=t[1]*n[3]-t[3]*n[1],x=t[2]*n[3]-t[3]*n[2],I=i[0],P=i[1],G=i[2],$=i[3];return e[0]=P*x-G*g+$*f,e[1]=-(I*x)+G*u-$*o,e[2]=I*g-P*u+$*r,e[3]=-(I*f)+P*o-G*r,e}function Ky(e,i,t,n){var r=i[0],o=i[1],u=i[2],f=i[3];return e[0]=r+n*(t[0]-r),e[1]=o+n*(t[1]-o),e[2]=u+n*(t[2]-u),e[3]=f+n*(t[3]-f),e}function pg(e,i){i=i||1;var t,n,r,o,u,f;do t=glMatrix.RANDOM()*2-1,n=glMatrix.RANDOM()*2-1,u=t*t+n*n;while(u>=1);do r=glMatrix.RANDOM()*2-1,o=glMatrix.RANDOM()*2-1,f=r*r+o*o;while(f>=1);var g=Math.sqrt((1-u)/f);return e[0]=i*t,e[1]=i*n,e[2]=i*r*g,e[3]=i*o*g,e}function v0(e,i,t){var n=i[0],r=i[1],o=i[2],u=i[3];return e[0]=t[0]*n+t[4]*r+t[8]*o+t[12]*u,e[1]=t[1]*n+t[5]*r+t[9]*o+t[13]*u,e[2]=t[2]*n+t[6]*r+t[10]*o+t[14]*u,e[3]=t[3]*n+t[7]*r+t[11]*o+t[15]*u,e}function Qy(e,i,t){var n=i[0],r=i[1],o=i[2],u=t[0],f=t[1],g=t[2],x=t[3],I=x*n+f*o-g*r,P=x*r+g*n-u*o,G=x*o+u*r-f*n,$=-u*n-f*r-g*o;return e[0]=I*x+$*-u+P*-g-G*-f,e[1]=P*x+$*-f+G*-u-I*-g,e[2]=G*x+$*-g+I*-f-P*-u,e[3]=i[3],e}function Jy(e){return e[0]=0,e[1]=0,e[2]=0,e[3]=0,e}function nm(e){return"vec4("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+")"}function im(e,i){return e[0]===i[0]&&e[1]===i[1]&&e[2]===i[2]&&e[3]===i[3]}function qy(e,i){var t=e[0],n=e[1],r=e[2],o=e[3],u=i[0],f=i[1],g=i[2],x=i[3];return Math.abs(t-u)<=glMatrix.EPSILON*Math.max(1,Math.abs(t),Math.abs(u))&&Math.abs(n-f)<=glMatrix.EPSILON*Math.max(1,Math.abs(n),Math.abs(f))&&Math.abs(r-g)<=glMatrix.EPSILON*Math.max(1,Math.abs(r),Math.abs(g))&&Math.abs(o-x)<=glMatrix.EPSILON*Math.max(1,Math.abs(o),Math.abs(x))}var e_=null,t_=null,r_=null,n_=null,i_=null,a_=null,o_=null,s_=function(){var e=J0();return function(i,t,n,r,o,u){var f,g;for(t||(t=4),n||(n=0),r?g=Math.min(r*t+n,i.length):g=i.length,f=n;f<g;f+=t)e[0]=i[f],e[1]=i[f+1],e[2]=i[f+2],e[3]=i[f+3],o(e,e,u),i[f]=e[0],i[f+1]=e[1],i[f+2]=e[2],i[f+3]=e[3];return i}}(),m0=Math.PI/180,hg=512,am=4003e4;function om(e){var i=e.latitude,t=i===void 0?0:i,n=e.zoom,r=n===void 0?0:n,o=e.scale,u=e.highPrecision,f=u===void 0?!1:u,g=e.flipY,x=g===void 0?!1:g;o=o!==void 0?o:Math.pow(2,r);var I={},P=hg*o,G=Math.cos(t*m0),$=P/360,Ee=$/G,Se=P/am/G;if(I.pixelsPerMeter=[Se,-Se,Se],I.metersPerPixel=[1/Se,-1/Se,1/Se],I.pixelsPerDegree=[$,-Ee,Se],I.degreesPerPixel=[1/$,-1/Ee,1/Se],f){var Re=m0*Math.tan(t*m0)/G,Ye=$*Re/2,St=P/am*Re,vt=St/Ee*Se;I.pixelsPerDegree2=[0,-Ye,St],I.pixelsPerMeter2=[vt,0,vt],x&&(I.pixelsPerDegree2[1]=-I.pixelsPerDegree2[1],I.pixelsPerMeter2[1]=-I.pixelsPerMeter2[1])}return x&&(I.pixelsPerMeter[1]=-I.pixelsPerMeter[1],I.metersPerPixel[1]=-I.metersPerPixel[1],I.pixelsPerDegree[1]=-I.pixelsPerDegree[1],I.degreesPerPixel[1]=-I.degreesPerPixel[1]),I}var yh;(function(e){e[e.LNGLAT=1]="LNGLAT",e[e.LNGLAT_OFFSET=2]="LNGLAT_OFFSET",e[e.VECTOR_TILE=3]="VECTOR_TILE",e[e.IDENTITY=4]="IDENTITY",e[e.P20=5]="P20",e[e.P20_OFFSET=6]="P20_OFFSET",e[e.METER_OFFSET=7]="METER_OFFSET",e[e.P20_2=8]="P20_2"})(yh||(yh={}));var wd={CoordinateSystem:"u_CoordinateSystem",ViewportCenter:"u_ViewportCenter",ViewportCenterProjection:"u_ViewportCenterProjection",PixelsPerDegree:"u_PixelsPerDegree",PixelsPerDegree2:"u_PixelsPerDegree2",PixelsPerMeter:"u_PixelsPerMeter",Mvp:"u_Mvp"},sm,um,lm,g0,cm,dg=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0],b=(sm=(0,Ki.b2)(),um=(0,Ki.f3)(Ln.ICameraService),sm(lm=(g0=function(){function e(){(0,Ur.Z)(this,e),(0,He.Z)(this,"needRefresh",!0),Bs(this,"cameraService",cm,this),(0,He.Z)(this,"coordinateSystem",void 0),(0,He.Z)(this,"viewportCenter",void 0),(0,He.Z)(this,"viewportCenterProjection",void 0),(0,He.Z)(this,"pixelsPerDegree",void 0),(0,He.Z)(this,"pixelsPerDegree2",void 0),(0,He.Z)(this,"pixelsPerMeter",void 0)}return(0,Jr.Z)(e,[{key:"refresh",value:function(t){var n=this.cameraService.getZoom(),r=this.cameraService.getZoomScale(),o=t||this.cameraService.getCenter(),u=om({latitude:o[1],zoom:n}),f=u.pixelsPerMeter,g=u.pixelsPerDegree;this.viewportCenter=o,this.viewportCenterProjection=[0,0,0,0],this.pixelsPerMeter=f,this.pixelsPerDegree=g,this.pixelsPerDegree2=[0,0,0],this.coordinateSystem===yh.LNGLAT||this.coordinateSystem===yh.P20?this.cameraService.setViewProjectionMatrix(void 0):this.coordinateSystem===yh.LNGLAT_OFFSET?this.calculateLnglatOffset(o,n):this.coordinateSystem===yh.P20_OFFSET&&this.calculateLnglatOffset(o,n,r,!0),this.needRefresh=!1}},{key:"getCoordinateSystem",value:function(){return this.coordinateSystem}},{key:"setCoordinateSystem",value:function(t){this.coordinateSystem=t}},{key:"getViewportCenter",value:function(){return this.viewportCenter}},{key:"getViewportCenterProjection",value:function(){return this.viewportCenterProjection}},{key:"getPixelsPerDegree",value:function(){return this.pixelsPerDegree}},{key:"getPixelsPerDegree2",value:function(){return this.pixelsPerDegree2}},{key:"getPixelsPerMeter",value:function(){return this.pixelsPerMeter}},{key:"calculateLnglatOffset",value:function(t,n,r,o){var u=om({latitude:t[1],zoom:n,scale:r,flipY:o,highPrecision:!0}),f=u.pixelsPerMeter,g=u.pixelsPerDegree,x=u.pixelsPerDegree2,I=this.cameraService.getViewMatrix(),P=this.cameraService.getProjectionMatrix(),G=Sp([],P,I),$=this.cameraService.projectFlat([Math.fround(t[0]),Math.fround(t[1])],Math.pow(2,n));this.viewportCenterProjection=v0([],[$[0],$[1],0,1],G),I=this.cameraService.getViewMatrixUncentered()||I,G=Sp([],P,I),G=Sp([],G,dg),this.cameraService.setViewProjectionMatrix(G),this.pixelsPerMeter=f,this.pixelsPerDegree=g,this.pixelsPerDegree2=x}}]),e}(),cm=Ds(g0.prototype,"cameraService",[um],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),g0))||lm),T=c(18794),J=c.n(T),Pe;(function(e){e.Hover="hover",e.Click="click",e.Select="select",e.Active="active",e.Drag="drag"})(Pe||(Pe={}));var yt,$t,Dr,ln,Fn;function Ji(e){var i=ea();return function(){var n=(0,rr.Z)(e),r;if(i){var o=(0,rr.Z)(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return(0,jn.Z)(this,r)}}function ea(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var ma={panstart:"dragstart",panmove:"dragging",panend:"dragend",pancancel:"dragcancel"},fo=(yt=(0,Ki.b2)(),$t=(0,Ki.f3)(Ln.IMapService),yt(Dr=(ln=function(e){(0,ui.Z)(t,e);var i=Ji(t);function t(){var n;(0,Ur.Z)(this,t);for(var r=arguments.length,o=new Array(r),u=0;u<r;u++)o[u]=arguments[u];return n=i.call.apply(i,[this].concat(o)),(0,He.Z)((0,er.Z)(n),"indragging",!1),Bs((0,er.Z)(n),"mapService",Fn,(0,er.Z)(n)),(0,He.Z)((0,er.Z)(n),"hammertime",void 0),(0,He.Z)((0,er.Z)(n),"lastClickTime",0),(0,He.Z)((0,er.Z)(n),"lastClickXY",[-1,-1]),(0,He.Z)((0,er.Z)(n),"clickTimer",void 0),(0,He.Z)((0,er.Z)(n),"$containter",void 0),(0,He.Z)((0,er.Z)(n),"onDrag",function(f){var g=n.interactionEvent(f);g.type=ma[g.type],g.type==="dragging"?n.indragging=!0:n.indragging=!1,n.emit(Pe.Drag,g)}),(0,He.Z)((0,er.Z)(n),"onHammer",function(f){f.srcEvent.stopPropagation();var g=n.interactionEvent(f);n.emit(Pe.Hover,g)}),(0,He.Z)((0,er.Z)(n),"onTouch",function(f){var g=f.touches[0];n.onHover({x:g.pageX,y:g.pageY,type:"touch"})}),(0,He.Z)((0,er.Z)(n),"onHover",function(f){var g=f.clientX,x=f.clientY,I=g,P=x,G=f.type,$=n.mapService.getMapContainer();if($)if(qu)I=I-$.left-0,P=P-$.top-0;else{var Ee=$.getBoundingClientRect(),Se=Ee.top,Re=Ee.left;I=I-Re-$.clientLeft,P=P-Se-$.clientTop}var Ye=n.mapService.containerToLngLat([I,P]);if(G==="click"){if(!qu&&"ontouchstart"in document.documentElement)return;n.isDoubleTap(I,P,Ye);return}if(G==="touch"){n.isDoubleTap(I,P,Ye);return}G!=="click"&&G!=="dblclick"&&n.emit(Pe.Hover,{x:I,y:P,lngLat:Ye,type:G,target:f})}),n}return(0,Jr.Z)(t,[{key:"init",value:function(){this.addEventListenerOnMap(),this.$containter=this.mapService.getMapContainer()}},{key:"destroy",value:function(){this.hammertime&&this.hammertime.destroy(),this.removeEventListenerOnMap(),this.off(Pe.Hover)}},{key:"triggerHover",value:function(r){var o=r.x,u=r.y;this.emit(Pe.Hover,{x:o,y:u})}},{key:"triggerSelect",value:function(r){this.emit(Pe.Select,{featureId:r})}},{key:"triggerActive",value:function(r){this.emit(Pe.Active,{featureId:r})}},{key:"handleMiniEvent",value:function(r){this.onHover({clientX:r.touches[0].pageX,clientY:r.touches[0].pageY,type:"touch"})}},{key:"addEventListenerOnMap",value:function(){var r=this.mapService.getMapContainer();if(r)if(qu)vs.document.addEventListener("touchstart",this.handleMiniEvent.bind(this));else{var o=new(J()).Manager(r);o.add(new(J()).Tap({event:"dblclick",taps:2})),o.add(new(J()).Tap({event:"click"})),o.add(new(J()).Pan({threshold:0,pointers:0})),o.add(new(J()).Press({})),o.on("dblclick click",this.onHammer),o.on("panstart panmove panend pancancel",this.onDrag),r.addEventListener("mousemove",this.onHover),r.addEventListener("mousedown",this.onHover,!0),r.addEventListener("mouseup",this.onHover),r.addEventListener("contextmenu",this.onHover),this.hammertime=o}}},{key:"removeEventListenerOnMap",value:function(){if(qu)vs.document.removeEventListener("touchstart",this.handleMiniEvent.bind(this));else{var r=this.mapService.getMapContainer();r&&(r.removeEventListener("mousemove",this.onHover),this.hammertime.off("dblclick click",this.onHammer),this.hammertime.off("panstart panmove panend pancancel",this.onDrag),r.removeEventListener("mousedown",this.onHover),r.removeEventListener("mouseup",this.onHover),r.removeEventListener("contextmenu",this.onHover))}}},{key:"interactionEvent",value:function(r){var o=r.type,u=r.pointerType,f,g;u==="touch"?(g=Math.floor(r.pointers[0].clientY),f=Math.floor(r.pointers[0].clientX)):(g=Math.floor(r.srcEvent.y),f=Math.floor(r.srcEvent.x));var x=this.mapService.getMapContainer();if(x){var I=x.getBoundingClientRect(),P=I.top,G=I.left;f-=G,g-=P}var $=this.mapService.containerToLngLat([f,g]);return{x:f,y:g,lngLat:$,type:o,target:r.srcEvent}}},{key:"isDoubleTap",value:function(r,o,u){var f=this,g=new Date().getTime(),x="click";g-this.lastClickTime<400&&Math.abs(this.lastClickXY[0]-r)<10&&Math.abs(this.lastClickXY[1]-o)<10?(this.lastClickTime=0,this.lastClickXY=[-1,-1],this.clickTimer&&clearTimeout(this.clickTimer),x="dblclick",this.emit(Pe.Hover,{x:r,y:o,lngLat:u,type:x})):(this.lastClickTime=g,this.lastClickXY=[r,o],this.clickTimer=setTimeout(function(){x="click",f.emit(Pe.Hover,{x:r,y:o,lngLat:u,type:x})},400))}}]),t}(Br()),Fn=Ds(ln.prototype,"mapService",[$t],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ln))||Dr),Ho=0;function bs(e){if(qu)return null;var i=e;if(typeof e=="string"&&(i=document.getElementById(e)),i){var t=document.createElement("div");return t.style.cssText+=`
      position: absolute;
      z-index:2;
      height: 100%;
      width: 100%;
      pointer-events: none;
    `,t.id="l7-scene-".concat(Ho++),t.classList.add("l7-scene"),i.appendChild(t),t}return null}function _u(e){var i,t,n=!0;return e==null||(i=e.target)===null||i===void 0||(t=i.path)===null||t===void 0||t.map(function(r){if(r!=null&&r.classList){var o;r==null||(o=r.classList)===null||o===void 0||o.forEach(function(u){(u==="l7-marker"||u==="l7-popup")&&(n=!1)})}}),n}var $e;(function(e){e[e.DEPTH_BUFFER_BIT=256]="DEPTH_BUFFER_BIT",e[e.STENCIL_BUFFER_BIT=1024]="STENCIL_BUFFER_BIT",e[e.COLOR_BUFFER_BIT=16384]="COLOR_BUFFER_BIT",e[e.POINTS=0]="POINTS",e[e.LINES=1]="LINES",e[e.LINE_LOOP=2]="LINE_LOOP",e[e.LINE_STRIP=3]="LINE_STRIP",e[e.TRIANGLES=4]="TRIANGLES",e[e.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",e[e.TRIANGLE_FAN=6]="TRIANGLE_FAN",e[e.ZERO=0]="ZERO",e[e.ONE=1]="ONE",e[e.SRC_COLOR=768]="SRC_COLOR",e[e.ONE_MINUS_SRC_COLOR=769]="ONE_MINUS_SRC_COLOR",e[e.SRC_ALPHA=770]="SRC_ALPHA",e[e.ONE_MINUS_SRC_ALPHA=771]="ONE_MINUS_SRC_ALPHA",e[e.DST_ALPHA=772]="DST_ALPHA",e[e.ONE_MINUS_DST_ALPHA=773]="ONE_MINUS_DST_ALPHA",e[e.DST_COLOR=774]="DST_COLOR",e[e.ONE_MINUS_DST_COLOR=775]="ONE_MINUS_DST_COLOR",e[e.SRC_ALPHA_SATURATE=776]="SRC_ALPHA_SATURATE",e[e.FUNC_ADD=32774]="FUNC_ADD",e[e.BLEND_EQUATION=32777]="BLEND_EQUATION",e[e.BLEND_EQUATION_RGB=32777]="BLEND_EQUATION_RGB",e[e.BLEND_EQUATION_ALPHA=34877]="BLEND_EQUATION_ALPHA",e[e.FUNC_SUBTRACT=32778]="FUNC_SUBTRACT",e[e.FUNC_REVERSE_SUBTRACT=32779]="FUNC_REVERSE_SUBTRACT",e[e.MAX_EXT=32776]="MAX_EXT",e[e.MIN_EXT=32775]="MIN_EXT",e[e.BLEND_DST_RGB=32968]="BLEND_DST_RGB",e[e.BLEND_SRC_RGB=32969]="BLEND_SRC_RGB",e[e.BLEND_DST_ALPHA=32970]="BLEND_DST_ALPHA",e[e.BLEND_SRC_ALPHA=32971]="BLEND_SRC_ALPHA",e[e.CONSTANT_COLOR=32769]="CONSTANT_COLOR",e[e.ONE_MINUS_CONSTANT_COLOR=32770]="ONE_MINUS_CONSTANT_COLOR",e[e.CONSTANT_ALPHA=32771]="CONSTANT_ALPHA",e[e.ONE_MINUS_CONSTANT_ALPHA=32772]="ONE_MINUS_CONSTANT_ALPHA",e[e.BLEND_COLOR=32773]="BLEND_COLOR",e[e.ARRAY_BUFFER=34962]="ARRAY_BUFFER",e[e.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",e[e.ARRAY_BUFFER_BINDING=34964]="ARRAY_BUFFER_BINDING",e[e.ELEMENT_ARRAY_BUFFER_BINDING=34965]="ELEMENT_ARRAY_BUFFER_BINDING",e[e.STREAM_DRAW=35040]="STREAM_DRAW",e[e.STATIC_DRAW=35044]="STATIC_DRAW",e[e.DYNAMIC_DRAW=35048]="DYNAMIC_DRAW",e[e.BUFFER_SIZE=34660]="BUFFER_SIZE",e[e.BUFFER_USAGE=34661]="BUFFER_USAGE",e[e.CURRENT_VERTEX_ATTRIB=34342]="CURRENT_VERTEX_ATTRIB",e[e.FRONT=1028]="FRONT",e[e.BACK=1029]="BACK",e[e.FRONT_AND_BACK=1032]="FRONT_AND_BACK",e[e.CULL_FACE=2884]="CULL_FACE",e[e.BLEND=3042]="BLEND",e[e.DITHER=3024]="DITHER",e[e.STENCIL_TEST=2960]="STENCIL_TEST",e[e.DEPTH_TEST=2929]="DEPTH_TEST",e[e.SCISSOR_TEST=3089]="SCISSOR_TEST",e[e.POLYGON_OFFSET_FILL=32823]="POLYGON_OFFSET_FILL",e[e.SAMPLE_ALPHA_TO_COVERAGE=32926]="SAMPLE_ALPHA_TO_COVERAGE",e[e.SAMPLE_COVERAGE=32928]="SAMPLE_COVERAGE",e[e.NO_ERROR=0]="NO_ERROR",e[e.INVALID_ENUM=1280]="INVALID_ENUM",e[e.INVALID_VALUE=1281]="INVALID_VALUE",e[e.INVALID_OPERATION=1282]="INVALID_OPERATION",e[e.OUT_OF_MEMORY=1285]="OUT_OF_MEMORY",e[e.CW=2304]="CW",e[e.CCW=2305]="CCW",e[e.LINE_WIDTH=2849]="LINE_WIDTH",e[e.ALIASED_POINT_SIZE_RANGE=33901]="ALIASED_POINT_SIZE_RANGE",e[e.ALIASED_LINE_WIDTH_RANGE=33902]="ALIASED_LINE_WIDTH_RANGE",e[e.CULL_FACE_MODE=2885]="CULL_FACE_MODE",e[e.FRONT_FACE=2886]="FRONT_FACE",e[e.DEPTH_RANGE=2928]="DEPTH_RANGE",e[e.DEPTH_WRITEMASK=2930]="DEPTH_WRITEMASK",e[e.DEPTH_CLEAR_VALUE=2931]="DEPTH_CLEAR_VALUE",e[e.DEPTH_FUNC=2932]="DEPTH_FUNC",e[e.STENCIL_CLEAR_VALUE=2961]="STENCIL_CLEAR_VALUE",e[e.STENCIL_FUNC=2962]="STENCIL_FUNC",e[e.STENCIL_FAIL=2964]="STENCIL_FAIL",e[e.STENCIL_PASS_DEPTH_FAIL=2965]="STENCIL_PASS_DEPTH_FAIL",e[e.STENCIL_PASS_DEPTH_PASS=2966]="STENCIL_PASS_DEPTH_PASS",e[e.STENCIL_REF=2967]="STENCIL_REF",e[e.STENCIL_VALUE_MASK=2963]="STENCIL_VALUE_MASK",e[e.STENCIL_WRITEMASK=2968]="STENCIL_WRITEMASK",e[e.STENCIL_BACK_FUNC=34816]="STENCIL_BACK_FUNC",e[e.STENCIL_BACK_FAIL=34817]="STENCIL_BACK_FAIL",e[e.STENCIL_BACK_PASS_DEPTH_FAIL=34818]="STENCIL_BACK_PASS_DEPTH_FAIL",e[e.STENCIL_BACK_PASS_DEPTH_PASS=34819]="STENCIL_BACK_PASS_DEPTH_PASS",e[e.STENCIL_BACK_REF=36003]="STENCIL_BACK_REF",e[e.STENCIL_BACK_VALUE_MASK=36004]="STENCIL_BACK_VALUE_MASK",e[e.STENCIL_BACK_WRITEMASK=36005]="STENCIL_BACK_WRITEMASK",e[e.VIEWPORT=2978]="VIEWPORT",e[e.SCISSOR_BOX=3088]="SCISSOR_BOX",e[e.COLOR_CLEAR_VALUE=3106]="COLOR_CLEAR_VALUE",e[e.COLOR_WRITEMASK=3107]="COLOR_WRITEMASK",e[e.UNPACK_ALIGNMENT=3317]="UNPACK_ALIGNMENT",e[e.PACK_ALIGNMENT=3333]="PACK_ALIGNMENT",e[e.MAX_TEXTURE_SIZE=3379]="MAX_TEXTURE_SIZE",e[e.MAX_VIEWPORT_DIMS=3386]="MAX_VIEWPORT_DIMS",e[e.SUBPIXEL_BITS=3408]="SUBPIXEL_BITS",e[e.RED_BITS=3410]="RED_BITS",e[e.GREEN_BITS=3411]="GREEN_BITS",e[e.BLUE_BITS=3412]="BLUE_BITS",e[e.ALPHA_BITS=3413]="ALPHA_BITS",e[e.DEPTH_BITS=3414]="DEPTH_BITS",e[e.STENCIL_BITS=3415]="STENCIL_BITS",e[e.POLYGON_OFFSET_UNITS=10752]="POLYGON_OFFSET_UNITS",e[e.POLYGON_OFFSET_FACTOR=32824]="POLYGON_OFFSET_FACTOR",e[e.TEXTURE_BINDING_2D=32873]="TEXTURE_BINDING_2D",e[e.SAMPLE_BUFFERS=32936]="SAMPLE_BUFFERS",e[e.SAMPLES=32937]="SAMPLES",e[e.SAMPLE_COVERAGE_VALUE=32938]="SAMPLE_COVERAGE_VALUE",e[e.SAMPLE_COVERAGE_INVERT=32939]="SAMPLE_COVERAGE_INVERT",e[e.COMPRESSED_TEXTURE_FORMATS=34467]="COMPRESSED_TEXTURE_FORMATS",e[e.DONT_CARE=4352]="DONT_CARE",e[e.FASTEST=4353]="FASTEST",e[e.NICEST=4354]="NICEST",e[e.GENERATE_MIPMAP_HINT=33170]="GENERATE_MIPMAP_HINT",e[e.BYTE=5120]="BYTE",e[e.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",e[e.SHORT=5122]="SHORT",e[e.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",e[e.INT=5124]="INT",e[e.UNSIGNED_INT=5125]="UNSIGNED_INT",e[e.FLOAT=5126]="FLOAT",e[e.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",e[e.ALPHA=6406]="ALPHA",e[e.RGB=6407]="RGB",e[e.RGBA=6408]="RGBA",e[e.LUMINANCE=6409]="LUMINANCE",e[e.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",e[e.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",e[e.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",e[e.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",e[e.FRAGMENT_SHADER=35632]="FRAGMENT_SHADER",e[e.VERTEX_SHADER=35633]="VERTEX_SHADER",e[e.MAX_VERTEX_ATTRIBS=34921]="MAX_VERTEX_ATTRIBS",e[e.MAX_VERTEX_UNIFORM_VECTORS=36347]="MAX_VERTEX_UNIFORM_VECTORS",e[e.MAX_VARYING_VECTORS=36348]="MAX_VARYING_VECTORS",e[e.MAX_COMBINED_TEXTURE_IMAGE_UNITS=35661]="MAX_COMBINED_TEXTURE_IMAGE_UNITS",e[e.MAX_VERTEX_TEXTURE_IMAGE_UNITS=35660]="MAX_VERTEX_TEXTURE_IMAGE_UNITS",e[e.MAX_TEXTURE_IMAGE_UNITS=34930]="MAX_TEXTURE_IMAGE_UNITS",e[e.MAX_FRAGMENT_UNIFORM_VECTORS=36349]="MAX_FRAGMENT_UNIFORM_VECTORS",e[e.SHADER_TYPE=35663]="SHADER_TYPE",e[e.DELETE_STATUS=35712]="DELETE_STATUS",e[e.LINK_STATUS=35714]="LINK_STATUS",e[e.VALIDATE_STATUS=35715]="VALIDATE_STATUS",e[e.ATTACHED_SHADERS=35717]="ATTACHED_SHADERS",e[e.ACTIVE_UNIFORMS=35718]="ACTIVE_UNIFORMS",e[e.ACTIVE_ATTRIBUTES=35721]="ACTIVE_ATTRIBUTES",e[e.SHADING_LANGUAGE_VERSION=35724]="SHADING_LANGUAGE_VERSION",e[e.CURRENT_PROGRAM=35725]="CURRENT_PROGRAM",e[e.NEVER=512]="NEVER",e[e.LESS=513]="LESS",e[e.EQUAL=514]="EQUAL",e[e.LEQUAL=515]="LEQUAL",e[e.GREATER=516]="GREATER",e[e.NOTEQUAL=517]="NOTEQUAL",e[e.GEQUAL=518]="GEQUAL",e[e.ALWAYS=519]="ALWAYS",e[e.KEEP=7680]="KEEP",e[e.REPLACE=7681]="REPLACE",e[e.INCR=7682]="INCR",e[e.DECR=7683]="DECR",e[e.INVERT=5386]="INVERT",e[e.INCR_WRAP=34055]="INCR_WRAP",e[e.DECR_WRAP=34056]="DECR_WRAP",e[e.VENDOR=7936]="VENDOR",e[e.RENDERER=7937]="RENDERER",e[e.VERSION=7938]="VERSION",e[e.NEAREST=9728]="NEAREST",e[e.LINEAR=9729]="LINEAR",e[e.NEAREST_MIPMAP_NEAREST=9984]="NEAREST_MIPMAP_NEAREST",e[e.LINEAR_MIPMAP_NEAREST=9985]="LINEAR_MIPMAP_NEAREST",e[e.NEAREST_MIPMAP_LINEAR=9986]="NEAREST_MIPMAP_LINEAR",e[e.LINEAR_MIPMAP_LINEAR=9987]="LINEAR_MIPMAP_LINEAR",e[e.TEXTURE_MAG_FILTER=10240]="TEXTURE_MAG_FILTER",e[e.TEXTURE_MIN_FILTER=10241]="TEXTURE_MIN_FILTER",e[e.TEXTURE_WRAP_S=10242]="TEXTURE_WRAP_S",e[e.TEXTURE_WRAP_T=10243]="TEXTURE_WRAP_T",e[e.TEXTURE_2D=3553]="TEXTURE_2D",e[e.TEXTURE=5890]="TEXTURE",e[e.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",e[e.TEXTURE_BINDING_CUBE_MAP=34068]="TEXTURE_BINDING_CUBE_MAP",e[e.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",e[e.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",e[e.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",e[e.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",e[e.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",e[e.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z",e[e.MAX_CUBE_MAP_TEXTURE_SIZE=34076]="MAX_CUBE_MAP_TEXTURE_SIZE",e[e.TEXTURE0=33984]="TEXTURE0",e[e.TEXTURE1=33985]="TEXTURE1",e[e.TEXTURE2=33986]="TEXTURE2",e[e.TEXTURE3=33987]="TEXTURE3",e[e.TEXTURE4=33988]="TEXTURE4",e[e.TEXTURE5=33989]="TEXTURE5",e[e.TEXTURE6=33990]="TEXTURE6",e[e.TEXTURE7=33991]="TEXTURE7",e[e.TEXTURE8=33992]="TEXTURE8",e[e.TEXTURE9=33993]="TEXTURE9",e[e.TEXTURE10=33994]="TEXTURE10",e[e.TEXTURE11=33995]="TEXTURE11",e[e.TEXTURE12=33996]="TEXTURE12",e[e.TEXTURE13=33997]="TEXTURE13",e[e.TEXTURE14=33998]="TEXTURE14",e[e.TEXTURE15=33999]="TEXTURE15",e[e.TEXTURE16=34e3]="TEXTURE16",e[e.TEXTURE17=34001]="TEXTURE17",e[e.TEXTURE18=34002]="TEXTURE18",e[e.TEXTURE19=34003]="TEXTURE19",e[e.TEXTURE20=34004]="TEXTURE20",e[e.TEXTURE21=34005]="TEXTURE21",e[e.TEXTURE22=34006]="TEXTURE22",e[e.TEXTURE23=34007]="TEXTURE23",e[e.TEXTURE24=34008]="TEXTURE24",e[e.TEXTURE25=34009]="TEXTURE25",e[e.TEXTURE26=34010]="TEXTURE26",e[e.TEXTURE27=34011]="TEXTURE27",e[e.TEXTURE28=34012]="TEXTURE28",e[e.TEXTURE29=34013]="TEXTURE29",e[e.TEXTURE30=34014]="TEXTURE30",e[e.TEXTURE31=34015]="TEXTURE31",e[e.ACTIVE_TEXTURE=34016]="ACTIVE_TEXTURE",e[e.REPEAT=10497]="REPEAT",e[e.CLAMP_TO_EDGE=33071]="CLAMP_TO_EDGE",e[e.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT",e[e.FLOAT_VEC2=35664]="FLOAT_VEC2",e[e.FLOAT_VEC3=35665]="FLOAT_VEC3",e[e.FLOAT_VEC4=35666]="FLOAT_VEC4",e[e.INT_VEC2=35667]="INT_VEC2",e[e.INT_VEC3=35668]="INT_VEC3",e[e.INT_VEC4=35669]="INT_VEC4",e[e.BOOL=35670]="BOOL",e[e.BOOL_VEC2=35671]="BOOL_VEC2",e[e.BOOL_VEC3=35672]="BOOL_VEC3",e[e.BOOL_VEC4=35673]="BOOL_VEC4",e[e.FLOAT_MAT2=35674]="FLOAT_MAT2",e[e.FLOAT_MAT3=35675]="FLOAT_MAT3",e[e.FLOAT_MAT4=35676]="FLOAT_MAT4",e[e.SAMPLER_2D=35678]="SAMPLER_2D",e[e.SAMPLER_CUBE=35680]="SAMPLER_CUBE",e[e.VERTEX_ATTRIB_ARRAY_ENABLED=34338]="VERTEX_ATTRIB_ARRAY_ENABLED",e[e.VERTEX_ATTRIB_ARRAY_SIZE=34339]="VERTEX_ATTRIB_ARRAY_SIZE",e[e.VERTEX_ATTRIB_ARRAY_STRIDE=34340]="VERTEX_ATTRIB_ARRAY_STRIDE",e[e.VERTEX_ATTRIB_ARRAY_TYPE=34341]="VERTEX_ATTRIB_ARRAY_TYPE",e[e.VERTEX_ATTRIB_ARRAY_NORMALIZED=34922]="VERTEX_ATTRIB_ARRAY_NORMALIZED",e[e.VERTEX_ATTRIB_ARRAY_POINTER=34373]="VERTEX_ATTRIB_ARRAY_POINTER",e[e.VERTEX_ATTRIB_ARRAY_BUFFER_BINDING=34975]="VERTEX_ATTRIB_ARRAY_BUFFER_BINDING",e[e.COMPILE_STATUS=35713]="COMPILE_STATUS",e[e.LOW_FLOAT=36336]="LOW_FLOAT",e[e.MEDIUM_FLOAT=36337]="MEDIUM_FLOAT",e[e.HIGH_FLOAT=36338]="HIGH_FLOAT",e[e.LOW_INT=36339]="LOW_INT",e[e.MEDIUM_INT=36340]="MEDIUM_INT",e[e.HIGH_INT=36341]="HIGH_INT",e[e.FRAMEBUFFER=36160]="FRAMEBUFFER",e[e.RENDERBUFFER=36161]="RENDERBUFFER",e[e.RGBA4=32854]="RGBA4",e[e.RGB5_A1=32855]="RGB5_A1",e[e.RGB565=36194]="RGB565",e[e.DEPTH_COMPONENT16=33189]="DEPTH_COMPONENT16",e[e.STENCIL_INDEX=6401]="STENCIL_INDEX",e[e.STENCIL_INDEX8=36168]="STENCIL_INDEX8",e[e.DEPTH_STENCIL=34041]="DEPTH_STENCIL",e[e.RENDERBUFFER_WIDTH=36162]="RENDERBUFFER_WIDTH",e[e.RENDERBUFFER_HEIGHT=36163]="RENDERBUFFER_HEIGHT",e[e.RENDERBUFFER_INTERNAL_FORMAT=36164]="RENDERBUFFER_INTERNAL_FORMAT",e[e.RENDERBUFFER_RED_SIZE=36176]="RENDERBUFFER_RED_SIZE",e[e.RENDERBUFFER_GREEN_SIZE=36177]="RENDERBUFFER_GREEN_SIZE",e[e.RENDERBUFFER_BLUE_SIZE=36178]="RENDERBUFFER_BLUE_SIZE",e[e.RENDERBUFFER_ALPHA_SIZE=36179]="RENDERBUFFER_ALPHA_SIZE",e[e.RENDERBUFFER_DEPTH_SIZE=36180]="RENDERBUFFER_DEPTH_SIZE",e[e.RENDERBUFFER_STENCIL_SIZE=36181]="RENDERBUFFER_STENCIL_SIZE",e[e.FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE=36048]="FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE",e[e.FRAMEBUFFER_ATTACHMENT_OBJECT_NAME=36049]="FRAMEBUFFER_ATTACHMENT_OBJECT_NAME",e[e.FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL=36050]="FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL",e[e.FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE=36051]="FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE",e[e.COLOR_ATTACHMENT0=36064]="COLOR_ATTACHMENT0",e[e.DEPTH_ATTACHMENT=36096]="DEPTH_ATTACHMENT",e[e.STENCIL_ATTACHMENT=36128]="STENCIL_ATTACHMENT",e[e.DEPTH_STENCIL_ATTACHMENT=33306]="DEPTH_STENCIL_ATTACHMENT",e[e.NONE=0]="NONE",e[e.FRAMEBUFFER_COMPLETE=36053]="FRAMEBUFFER_COMPLETE",e[e.FRAMEBUFFER_INCOMPLETE_ATTACHMENT=36054]="FRAMEBUFFER_INCOMPLETE_ATTACHMENT",e[e.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT=36055]="FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT",e[e.FRAMEBUFFER_INCOMPLETE_DIMENSIONS=36057]="FRAMEBUFFER_INCOMPLETE_DIMENSIONS",e[e.FRAMEBUFFER_UNSUPPORTED=36061]="FRAMEBUFFER_UNSUPPORTED",e[e.FRAMEBUFFER_BINDING=36006]="FRAMEBUFFER_BINDING",e[e.RENDERBUFFER_BINDING=36007]="RENDERBUFFER_BINDING",e[e.MAX_RENDERBUFFER_SIZE=34024]="MAX_RENDERBUFFER_SIZE",e[e.INVALID_FRAMEBUFFER_OPERATION=1286]="INVALID_FRAMEBUFFER_OPERATION",e[e.UNPACK_FLIP_Y_WEBGL=37440]="UNPACK_FLIP_Y_WEBGL",e[e.UNPACK_PREMULTIPLY_ALPHA_WEBGL=37441]="UNPACK_PREMULTIPLY_ALPHA_WEBGL",e[e.CONTEXT_LOST_WEBGL=37442]="CONTEXT_LOST_WEBGL",e[e.UNPACK_COLORSPACE_CONVERSION_WEBGL=37443]="UNPACK_COLORSPACE_CONVERSION_WEBGL",e[e.BROWSER_DEFAULT_WEBGL=37444]="BROWSER_DEFAULT_WEBGL"})($e||($e={}));var Iu,Bu,Wp,Op,$p,of,_h,Fp,y0,u_,l_,c_,f_,RS=(Iu=(0,Ki.b2)(),Bu=(0,Ki.f3)(Ln.IMapService),Wp=(0,Ki.f3)(Ln.IRendererService),Op=(0,Ki.f3)(Ln.IGlobalConfigService),$p=(0,Ki.f3)(Ln.IInteractionService),of=(0,Ki.f3)(Ln.ILayerService),Iu(_h=(Fp=function(){function e(){var i=this;(0,Ur.Z)(this,e),(0,He.Z)(this,"pickedColors",void 0),(0,He.Z)(this,"pickedTileLayers",[]),Bs(this,"mapService",y0,this),Bs(this,"rendererService",u_,this),Bs(this,"configService",l_,this),Bs(this,"interactionService",c_,this),Bs(this,"layerService",f_,this),(0,He.Z)(this,"pickingFBO",void 0),(0,He.Z)(this,"width",0),(0,He.Z)(this,"height",0),(0,He.Z)(this,"alreadyInPicking",!1),(0,He.Z)(this,"pickBufferScale",1),(0,He.Z)(this,"pickFromPickingFBO",function(t,n){var r=n.x,o=n.y,u=n.lngLat,f=n.type,g=n.target,x=!1,I=i.rendererService,P=I.readPixels,G=I.getContainer,$=i.getContainerSize(G()),Ee=$.width,Se=$.height;Ee*=ji,Se*=ji;var Re=t.getLayerConfig(),Ye=Re.enableHighlight,St=Re.enableSelect,vt=r*ji,Ut=o*ji;if(vt>Ee-1*ji||vt<0||Ut>Se-1*ji||Ut<0)return!1;var Kt=P({x:Math.floor(vt/i.pickBufferScale),y:Math.floor((Se-(o+1)*ji)/i.pickBufferScale),width:1,height:1,data:new Uint8Array(1*1*4),framebuffer:i.pickingFBO});if(i.pickedColors=Kt,Kt[0]!==0||Kt[1]!==0||Kt[2]!==0){var Tr=es(Kt),on=t.layerPickService.getFeatureById(Tr);Tr!==t.getCurrentPickId()&&f==="mousemove"&&(f="mouseenter");var dn={x:r,y:o,type:f,lngLat:u,featureId:Tr,feature:on,target:g};on&&(x=!0,t.setCurrentPickId(Tr),i.triggerHoverOnLayer(t,dn))}else{var vn={x:r,y:o,lngLat:u,type:t.getCurrentPickId()!==null&&f==="mousemove"?"mouseout":"un"+f,featureId:null,target:g,feature:null};i.triggerHoverOnLayer(t,(0,oe.Z)((0,oe.Z)({},vn),{},{type:"unpick"})),i.triggerHoverOnLayer(t,vn),t.setCurrentPickId(null)}if(Ye&&t.layerPickService.highlightPickedFeature(Kt),St&&f==="click"&&(Kt==null?void 0:Kt.toString())!==[0,0,0,0].toString()){var si=es(Kt);t.getCurrentSelectedId()===null||si!==t.getCurrentSelectedId()?(t.layerPickService.selectFeature(Kt),t.setCurrentSelectedId(si)):(t.layerPickService.selectFeature(new Uint8Array([0,0,0,0])),t.setCurrentSelectedId(null))}return x})}return(0,Jr.Z)(e,[{key:"init",value:function(t){var n=this.rendererService,r=n.createTexture2D,o=n.createFramebuffer,u=n.getContainer,f=this.getContainerSize(u()),g=f.width,x=f.height;g*=ji,x*=ji,this.pickBufferScale=this.configService.getSceneConfig(t).pickBufferScale||1,this.pickingFBO=o({color:r({width:Math.round(g/this.pickBufferScale),height:Math.round(x/this.pickBufferScale),wrapS:$e.CLAMP_TO_EDGE,wrapT:$e.CLAMP_TO_EDGE})}),this.interactionService.on(Pe.Hover,this.pickingAllLayer.bind(this))}},{key:"boxPickLayer",value:function(){var i=(0,An.Z)(Nt().mark(function n(r,o,u){var f=this,g,x,I;return Nt().wrap(function(G){for(;;)switch(G.prev=G.next){case 0:g=this.rendererService,x=g.useFramebuffer,I=g.clear,this.resizePickingFBO(),x(this.pickingFBO,function(){I({framebuffer:f.pickingFBO,color:[0,0,0,0],stencil:0,depth:1}),r.hooks.beforePickingEncode.call(),r.renderModels(),r.hooks.afterPickingEncode.call();var $=f.pickBox(r,o);u($)});case 3:case"end":return G.stop()}},n,this)}));function t(n,r,o){return i.apply(this,arguments)}return t}()},{key:"pickBox",value:function(t,n){var r=this,o=n.map(function(si){var ai=si<0?0:si;return Math.floor(ai*ji/r.pickBufferScale)}),u=(0,Mr.Z)(o,4),f=u[0],g=u[1],x=u[2],I=u[3],P=this.rendererService,G=P.readPixels,$=P.getContainer,Ee=this.getContainerSize($()),Se=Ee.width,Re=Ee.height;if(Se*=ji,Re*=ji,f>(Se-1)*ji/this.pickBufferScale||x<0||g>(Re-1)*ji/this.pickBufferScale||I<0)return[];for(var Ye=Math.min(Se/this.pickBufferScale,x)-f,St=Math.min(Re/this.pickBufferScale,I)-g,vt=G({x:f,y:Math.floor(Re/this.pickBufferScale-(I+1)),width:Ye,height:St,data:new Uint8Array(Ye*St*4),framebuffer:this.pickingFBO}),Ut=[],Kt={},Tr=0;Tr<vt.length/4;Tr=Tr+1){var on=vt.slice(Tr*4,Tr*4+4),dn=es(on);if(dn!==-1&&!Kt[dn]){var vn=t.layerPickService.getFeatureById(dn);Ut.push((0,oe.Z)((0,oe.Z)({},vn),{},{pickedFeatureIdx:dn})),Kt[dn]=!0}}return Ut}},{key:"handleCursor",value:function(t,n){var r=t.getLayerConfig(),o=r.cursor,u=o===void 0?"":o,f=r.cursorEnabled;if(f){var g=this.mapService.version,x=g==="GAODE2.x"?this.mapService.getMapContainer():this.mapService.getMarkerContainer(),I=x==null?void 0:x.style.getPropertyValue("cursor");n==="unmousemove"&&I!==""?x==null||x.style.setProperty("cursor",""):n==="mousemove"&&(x==null||x.style.setProperty("cursor",u))}}},{key:"destroy",value:function(){this.pickingFBO.destroy(),this.pickingFBO=null}},{key:"getContainerSize",value:function(t){return t.getContext?{width:t.width/ji,height:t.height/ji}:t.getBoundingClientRect()}},{key:"pickingAllLayer",value:function(){var i=(0,An.Z)(Nt().mark(function n(r){return Nt().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:if(!(!this.layerService.needPick(r.type)||!this.isPickingAllLayer())){u.next=2;break}return u.abrupt("return");case 2:return this.alreadyInPicking=!0,u.next=5,this.pickingLayers(r);case 5:this.layerService.renderLayers(),this.alreadyInPicking=!1;case 7:case"end":return u.stop()}},n,this)}));function t(n){return i.apply(this,arguments)}return t}()},{key:"isPickingAllLayer",value:function(){return!(this.alreadyInPicking||this.layerService.alreadyInRendering||this.interactionService.indragging||!this.layerService.getShaderPickStat())}},{key:"resizePickingFBO",value:function(){var t=this.rendererService.getContainer,n=this.getContainerSize(t()),r=n.width,o=n.height;r*=ji,o*=ji,(this.width!==r||this.height!==o)&&(this.pickingFBO.resize({width:Math.round(r/this.pickBufferScale),height:Math.round(o/this.pickBufferScale)}),this.width=r,this.height=o)}},{key:"pickingLayers",value:function(){var i=(0,An.Z)(Nt().mark(function n(r){var o=this,u,f,g;return Nt().wrap(function(I){for(;;)switch(I.prev=I.next){case 0:u=this.rendererService,f=u.useFramebuffer,g=u.clear,this.resizePickingFBO(),f(this.pickingFBO,function(){var P=o.layerService.getRenderList();P.filter(function(G){return G.needPick(r.type)}).reverse().some(function(G){g({framebuffer:o.pickingFBO,color:[0,0,0,0],stencil:0,depth:1}),G.layerPickService.pickRender(r);var $=o.pickFromPickingFBO(G,r);return o.layerService.pickedLayerId=$?+G.id:-1,$&&!G.getLayerConfig().enablePropagation})});case 3:case"end":return I.stop()}},n,this)}));function t(n){return i.apply(this,arguments)}return t}()},{key:"triggerHoverOnLayer",value:function(t,n){_u(n)&&(this.handleCursor(t,n.type),t.emit(n.type,n))}}]),e}(),y0=Ds(Fp.prototype,"mapService",[Bu],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),u_=Ds(Fp.prototype,"rendererService",[Wp],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),l_=Ds(Fp.prototype,"configService",[Op],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),c_=Ds(Fp.prototype,"interactionService",[$p],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),f_=Ds(Fp.prototype,"layerService",[of],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Fp))||_h),PS=function(){function e(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;(0,Ur.Z)(this,e),(0,He.Z)(this,"autoStart",void 0),(0,He.Z)(this,"startTime",0),(0,He.Z)(this,"oldTime",0),(0,He.Z)(this,"running",!1),(0,He.Z)(this,"elapsedTime",0),this.autoStart=i}return(0,Jr.Z)(e,[{key:"start",value:function(){this.startTime=(typeof performance=="undefined"?Date:performance).now(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}},{key:"stop",value:function(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}},{key:"getElapsedTime",value:function(){return this.getDelta(),this.elapsedTime}},{key:"getDelta",value:function(){var t=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){var n=(typeof performance=="undefined"?Date:performance).now();t=(n-this.oldTime)/1e3,this.oldTime=n,this.elapsedTime+=t}return t}}]),e}(),p_,h_,d_,v_,fm,m_,g_;function kS(e,i){var t=typeof Symbol!="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(!t){if(Array.isArray(e)||(t=LS(e))||i&&e&&typeof e.length=="number"){t&&(e=t);var n=0,r=function(){};return{s:r,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(x){throw x},f:r}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var o=!0,u=!1,f;return{s:function(){t=t.call(e)},n:function(){var x=t.next();return o=x.done,x},e:function(x){u=!0,f=x},f:function(){try{!o&&t.return!=null&&t.return()}finally{if(u)throw f}}}}function LS(e,i){if(!!e){if(typeof e=="string")return y_(e,i);var t=Object.prototype.toString.call(e).slice(8,-1);if(t==="Object"&&e.constructor&&(t=e.constructor.name),t==="Map"||t==="Set")return Array.from(e);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return y_(e,i)}}function y_(e,i){(i==null||i>e.length)&&(i=e.length);for(var t=0,n=new Array(i);t<i;t++)n[t]=e[t];return n}function DS(e){var i=FS();return function(){var n=(0,rr.Z)(e),r;if(i){var o=(0,rr.Z)(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return(0,jn.Z)(this,r)}}function FS(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var NS=(p_=(0,Ki.b2)(),h_=(0,Ki.f3)(Ln.IRendererService),d_=(0,Ki.f3)(Ln.IMapService),p_(v_=(fm=function(e){(0,ui.Z)(t,e);var i=DS(t);function t(){var n;(0,Ur.Z)(this,t);for(var r=arguments.length,o=new Array(r),u=0;u<r;u++)o[u]=arguments[u];return n=i.call.apply(i,[this].concat(o)),(0,He.Z)((0,er.Z)(n),"pickedLayerId",-1),(0,He.Z)((0,er.Z)(n),"clock",new PS),(0,He.Z)((0,er.Z)(n),"alreadyInRendering",!1),(0,He.Z)((0,er.Z)(n),"layers",[]),(0,He.Z)((0,er.Z)(n),"layerList",[]),(0,He.Z)((0,er.Z)(n),"layerRenderID",void 0),(0,He.Z)((0,er.Z)(n),"sceneInited",!1),(0,He.Z)((0,er.Z)(n),"animateInstanceCount",0),(0,He.Z)((0,er.Z)(n),"shaderPicking",!0),(0,He.Z)((0,er.Z)(n),"enableRender",!0),Bs((0,er.Z)(n),"renderService",m_,(0,er.Z)(n)),Bs((0,er.Z)(n),"mapService",g_,(0,er.Z)(n)),(0,He.Z)((0,er.Z)(n),"reRender",(0,Wr.throttle)(function(){n.updateLayerRenderList(),n.renderLayers()},32)),(0,He.Z)((0,er.Z)(n),"throttleRenderLayers",(0,Wr.throttle)(function(){n.renderLayers()},16)),n}return(0,Jr.Z)(t,[{key:"needPick",value:function(r){return this.layerList.some(function(o){return o.needPick(r)})}},{key:"add",value:function(r){var o=this;this.layers.push(r),this.sceneInited&&r.init().then(function(){o.updateLayerRenderList(),o.renderLayers()})}},{key:"addMask",value:function(r){var o=this;this.sceneInited&&r.init().then(function(){o.renderLayers()})}},{key:"initLayers",value:function(){var n=(0,An.Z)(Nt().mark(function o(){var u=this;return Nt().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:this.sceneInited=!0,this.layers.forEach(function(){var x=(0,An.Z)(Nt().mark(function I(P){return Nt().wrap(function($){for(;;)switch($.prev=$.next){case 0:if(P.startInit){$.next=4;break}return $.next=3,P.init();case 3:u.updateLayerRenderList();case 4:case"end":return $.stop()}},I)}));return function(I){return x.apply(this,arguments)}}());case 2:case"end":return g.stop()}},o,this)}));function r(){return n.apply(this,arguments)}return r}()},{key:"getSceneInited",value:function(){return this.sceneInited}},{key:"getRenderList",value:function(){return this.layerList}},{key:"getLayers",value:function(){return this.layers}},{key:"getLayer",value:function(r){return this.layers.find(function(o){return o.id===r})}},{key:"getLayerByName",value:function(r){return this.layers.find(function(o){return o.name===r})}},{key:"remove",value:function(r,o){if(o){var u=o.layerChildren.indexOf(r);u>-1&&o.layerChildren.splice(u,1)}else{var f=this.layers.indexOf(r);f>-1&&this.layers.splice(f,1)}this.updateLayerRenderList(),r.destroy(),this.renderLayers(),this.emit("layerChange",this.layers)}},{key:"removeAllLayers",value:function(){this.destroy(),this.renderLayers()}},{key:"setEnableRender",value:function(r){this.enableRender=r}},{key:"renderLayers",value:function(){var n=(0,An.Z)(Nt().mark(function o(){var u,f,g;return Nt().wrap(function(I){for(;;)switch(I.prev=I.next){case 0:if(!(this.alreadyInRendering||!this.enableRender)){I.next=2;break}return I.abrupt("return");case 2:this.alreadyInRendering=!0,this.clear(),u=kS(this.layerList),I.prev=5,u.s();case 7:if((f=u.n()).done){I.next=19;break}if(g=f.value,g.masks.filter(function(P){return P.inited}).length>0&&(this.renderService.clear({stencil:0,depth:1,framebuffer:null}),g.masks.map(function(){var P=(0,An.Z)(Nt().mark(function G($){return Nt().wrap(function(Se){for(;;)switch(Se.prev=Se.next){case 0:$.render();case 1:case"end":return Se.stop()}},G)}));return function(G){return P.apply(this,arguments)}}())),!g.getLayerConfig().enableMultiPassRenderer){I.next=15;break}return I.next=13,g.renderMultiPass();case 13:I.next=17;break;case 15:return I.next=17,g.render();case 17:I.next=7;break;case 19:I.next=24;break;case 21:I.prev=21,I.t0=I.catch(5),u.e(I.t0);case 24:return I.prev=24,u.f(),I.finish(24);case 27:this.alreadyInRendering=!1;case 28:case"end":return I.stop()}},o,this,[[5,21,24,27]])}));function r(){return n.apply(this,arguments)}return r}()},{key:"renderMask",value:function(r){r.filter(function(o){return o.inited}).map(function(o){o.render()})}},{key:"beforeRenderData",value:function(){var n=(0,An.Z)(Nt().mark(function o(u){var f;return Nt().wrap(function(x){for(;;)switch(x.prev=x.next){case 0:return x.next=2,u.hooks.beforeRenderData.promise();case 2:f=x.sent,f&&this.renderLayers();case 4:case"end":return x.stop()}},o,this)}));function r(o){return n.apply(this,arguments)}return r}()},{key:"renderLayer",value:function(){var n=(0,An.Z)(Nt().mark(function o(u){var f=this;return Nt().wrap(function(x){for(;;)switch(x.prev=x.next){case 0:if(u.masks.filter(function(I){return I.inited}).length>0&&u.masks.map(function(I){f.renderService.clear({stencil:0,depth:1,framebuffer:null}),I.render()}),!u.getLayerConfig().enableMultiPassRenderer){x.next=6;break}return x.next=4,u.renderMultiPass();case 4:x.next=8;break;case 6:return x.next=8,u.render();case 8:case"end":return x.stop()}},o)}));function r(o){return n.apply(this,arguments)}return r}()},{key:"updateLayerRenderList",value:function(){var r=this;this.layerList=[],this.layers.filter(function(o){return o.inited}).filter(function(o){return o.isVisible()}).sort(function(o,u){return o.zIndex-u.zIndex}).forEach(function(o){r.layerList.push(o)})}},{key:"destroy",value:function(){this.layers.forEach(function(r){r.destroy()}),this.layers=[],this.layerList=[],this.emit("layerChange",this.layers)}},{key:"startAnimate",value:function(){this.animateInstanceCount++===0&&(this.clock.start(),this.runRender())}},{key:"stopAnimate",value:function(){--this.animateInstanceCount===0&&(this.stopRender(),this.clock.stop())}},{key:"getOESTextureFloat",value:function(){return this.renderService.extensionObject.OES_texture_float}},{key:"enableShaderPick",value:function(){this.shaderPicking=!0}},{key:"disableShaderPick",value:function(){this.shaderPicking=!1}},{key:"getShaderPickStat",value:function(){return this.shaderPicking}},{key:"clear",value:function(){var r=co(this.mapService.bgColor);this.renderService.clear({color:r,depth:1,stencil:0,framebuffer:null})}},{key:"runRender",value:function(){this.renderLayers(),this.layerRenderID=vs.requestAnimationFrame(this.runRender.bind(this))}},{key:"stopRender",value:function(){vs.cancelAnimationFrame(this.layerRenderID)}}]),t}(ir.EventEmitter),m_=Ds(fm.prototype,"renderService",[h_],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),g_=Ds(fm.prototype,"mapService",[d_],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),fm))||v_),BS=function(){function e(i){var t=this;(0,Ur.Z)(this,e),(0,He.Z)(this,"name",void 0),(0,He.Z)(this,"type",void 0),(0,He.Z)(this,"scale",void 0),(0,He.Z)(this,"descriptor",void 0),(0,He.Z)(this,"featureBufferLayout",[]),(0,He.Z)(this,"needRescale",!1),(0,He.Z)(this,"needRemapping",!1),(0,He.Z)(this,"needRegenerateVertices",!1),(0,He.Z)(this,"featureRange",{startIndex:0,endIndex:1/0}),(0,He.Z)(this,"vertexAttribute",void 0),(0,He.Z)(this,"defaultCallback",function(n){if(n.length===0){var r;return((r=t.scale)===null||r===void 0?void 0:r.defaultValues)||[]}return n.map(function(o,u){var f,g=(f=t.scale)===null||f===void 0?void 0:f.scalers[u].func,x=g(o);return x})}),this.setProps(i)}return(0,Jr.Z)(e,[{key:"setProps",value:function(t){Object.assign(this,t)}},{key:"mapping",value:function(t){var n;if((n=this.scale)!==null&&n!==void 0&&n.callback){var r,o=(r=this.scale)===null||r===void 0?void 0:r.callback.apply(r,(0,ie.Z)(t));if(!(0,Wr.isNil)(o))return[o]}return this.defaultCallback(t)}},{key:"resetDescriptor",value:function(){this.descriptor&&(this.descriptor.buffer.data=[])}}]),e}(),zS=["modelType"],US=["buffer","update","name"],ZS=["buffer","update","name"],jS=["buffer","update","name"],_0,__,x_,b_,vg,E_,VS=(_0={},(0,He.Z)(_0,$e.FLOAT,4),(0,He.Z)(_0,$e.UNSIGNED_BYTE,1),(0,He.Z)(_0,$e.UNSIGNED_SHORT,2),_0),GS=(__=(0,Ki.b2)(),x_=(0,Ki.f3)(Ln.IRendererService),__(b_=(vg=function(){function e(){(0,Ur.Z)(this,e),(0,He.Z)(this,"attributesAndIndices",void 0),Bs(this,"rendererService",E_,this),(0,He.Z)(this,"attributes",[]),(0,He.Z)(this,"triangulation",void 0),(0,He.Z)(this,"featureLayout",{sizePerElement:0,elements:[]})}return(0,Jr.Z)(e,[{key:"registerStyleAttribute",value:function(t){var n=this.getLayerStyleAttribute(t.name||"");return n?n.setProps(t):(n=new BS(t),this.attributes.push(n)),n}},{key:"updateStyleAttribute",value:function(t,n,r){var o=this.getLayerStyleAttribute(t);o||(o=this.registerStyleAttribute((0,oe.Z)((0,oe.Z)({},n),{},{name:t})));var u=n.scale;u&&o&&(o.scale=u,o.needRescale=!0,o.needRemapping=!0,o.needRegenerateVertices=!0,r&&r.featureRange&&(o.featureRange=r.featureRange))}},{key:"getLayerStyleAttributes",value:function(){return this.attributes}},{key:"getLayerStyleAttribute",value:function(t){return this.attributes.find(function(n){return n.name===t})}},{key:"getLayerAttributeScale",value:function(t){var n,r=this.getLayerStyleAttribute(t),o=r==null||(n=r.scale)===null||n===void 0?void 0:n.scalers;return o&&o[0]?o[0].func:null}},{key:"updateAttributeByFeatureRange",value:function(t,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,o=arguments.length>3?arguments[3]:void 0,u=arguments.length>4?arguments[4]:void 0,f=this.attributes.find(function(Kt){return Kt.name===t});if(f&&f.descriptor){var g=f.descriptor,x=g.update,I=g.buffer,P=g.size,G=P===void 0?0:P,$=VS[I.type||$e.FLOAT];if(x){var Ee=this.featureLayout,Se=Ee.elements,Re=Ee.sizePerElement,Ye=Se.slice(r,o);if(!Ye.length)return;var St=Ye[0].offset,vt=St*G*$,Ut=Ye.map(function(Kt,Tr){for(var on=Kt.featureIdx,dn=Kt.vertices,vn=Kt.normals,si=dn.length/Re,ai=[],Hi=0;Hi<si;Hi++){var wa=vn?vn.slice(Hi*3,Hi*3+3):[];ai.push.apply(ai,(0,ie.Z)(x(n[on],on,dn.slice(Hi*Re,Hi*Re+Re),Tr,wa)))}return ai}).reduce(function(Kt,Tr){return Kt.push.apply(Kt,(0,ie.Z)(Tr)),Kt},[]);f.vertexAttribute.updateBuffer({data:Ut,offset:vt}),u==null||u.emit("legend:".concat(t),{type:t,attr:f})}}}},{key:"createAttributesAndIndicesAscy",value:function(t,n,r){var o=this;this.featureLayout={sizePerElement:0,elements:[]};var u=this.attributes.map(function(Ee){return Ee.resetDescriptor(),Ee.descriptor}).filter(function(Ee){return Ee}),f=r.modelType,g=(0,Ns.Z)(r,zS),x=this.rendererService,I=x.createAttribute,P=x.createBuffer,G=x.createElements,$={};return new Promise(function(Ee,Se){Fa(f,(0,oe.Z)({descriptors:o.getDescriptorsWithOutFunc(u),features:t,segmentNumber:n},g)).then(function(Re){Re.descriptors.forEach(function(St,vt){if(St){var Ut=St.buffer,Kt=St.update,Tr=St.name,on=(0,Ns.Z)(St,US),dn=I((0,oe.Z)({buffer:P(Ut)},on));$[St.name||""]=dn,o.attributes[vt].vertexAttribute=dn}}),o.featureLayout=Re.featureLayout;var Ye=G({data:Re.indices,type:$e.UNSIGNED_INT,count:Re.indices.length});o.attributesAndIndices={attributes:$,elements:Ye,count:null},Ee(o.attributesAndIndices)}).catch(function(Re){console.warn(Re),Se(Re)})})}},{key:"createAttributesAndIndices",value:function(t,n,r){var o=this;this.featureLayout={sizePerElement:0,elements:[]},n&&(this.triangulation=n);var u=this.attributes.map(function(vt){return vt.resetDescriptor(),vt.descriptor}),f=0,g=0,x=[],I=[],P=[],G=3;t.forEach(function(vt,Ut){var Kt=o.triangulation(vt,r),Tr=Kt.indices,on=Kt.vertices,dn=Kt.normals,vn=Kt.size,si=Kt.indexes,ai=Kt.count;typeof ai=="number"&&(g+=ai),Tr.forEach(function(zs){I.push(zs+f)}),G=vn;var Hi=on.length/vn;o.featureLayout.sizePerElement=G,o.featureLayout.elements.push({featureIdx:Ut,vertices:on,normals:dn,offset:f}),f+=Hi;for(var wa=function(Ou){var Ul=(dn==null?void 0:dn.slice(Ou*3,Ou*3+3))||[],Gl=on.slice(Ou*vn,Ou*vn+vn),Ic=0;si&&si[Ou]!==void 0&&(Ic=si[Ou]),u.forEach(function(Eh,W0){if(Eh&&Eh.update){var c0;(c0=Eh.buffer.data).push.apply(c0,(0,ie.Z)(Eh.update(vt,Ut,Gl,Ou,Ul,Ic)))}})},qa=0;qa<Hi;qa++)wa(qa)});var $=this.rendererService,Ee=$.createAttribute,Se=$.createBuffer,Re=$.createElements,Ye={};u.forEach(function(vt,Ut){if(vt){var Kt=vt.buffer,Tr=vt.update,on=vt.name,dn=(0,Ns.Z)(vt,ZS),vn=Ee((0,oe.Z)({buffer:Se(Kt)},dn));Ye[vt.name||""]=vn,o.attributes[Ut].vertexAttribute=vn}});var St=Re({data:I,type:$e.UNSIGNED_INT,count:I.length});return this.attributesAndIndices={attributes:Ye,elements:St,count:g},this.attributesAndIndices}},{key:"createAttributes",value:function(t,n){var r=this;this.featureLayout={sizePerElement:0,elements:[]},n&&(this.triangulation=n);var o=this.attributes.map(function($){return $.resetDescriptor(),$.descriptor}),u=0,f=[],g=3;t.forEach(function($,Ee){var Se=r.triangulation($),Re=Se.indices,Ye=Se.vertices,St=Se.normals,vt=Se.size,Ut=Se.indexes;Re.forEach(function(dn){f.push(dn+u)}),g=vt;var Kt=Ye.length/vt;r.featureLayout.sizePerElement=g,r.featureLayout.elements.push({featureIdx:Ee,vertices:Ye,normals:St,offset:u}),u+=Kt;for(var Tr=function(vn){var si=(St==null?void 0:St.slice(vn*3,vn*3+3))||[],ai=Ye.slice(vn*vt,vn*vt+vt),Hi=0;Ut&&Ut[vn]!==void 0&&(Hi=Ut[vn]),o.forEach(function(wa,qa){if(wa&&wa.update){var zs;(zs=wa.buffer.data).push.apply(zs,(0,ie.Z)(wa.update($,Ee,ai,vn,si,Hi)))}})},on=0;on<Kt;on++)Tr(on)});var x=this.rendererService,I=x.createAttribute,P=x.createBuffer,G={};return o.forEach(function($,Ee){if($){var Se=$.buffer,Re=$.update,Ye=$.name,St=(0,Ns.Z)($,jS),vt=I((0,oe.Z)({buffer:P(Se)},St));G[$.name||""]=vt,r.attributes[Ee].vertexAttribute=vt}}),{attributes:G}}},{key:"clearAllAttributes",value:function(){var t;this.attributes.forEach(function(n){n.vertexAttribute&&n.vertexAttribute.destroy()}),(t=this.attributesAndIndices)===null||t===void 0||t.elements.destroy(),this.attributes=[]}},{key:"getDescriptorsWithOutFunc",value:function(t){return t.map(function(n){return{buffer:n.buffer,name:n.name,size:n.size}})}}]),e}(),E_=Ds(vg.prototype,"rendererService",[x_],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),vg))||b_),mg=c(14224);function gg(e,i,t,n){function r(o){return o instanceof t?o:new t(function(u){u(o)})}return new(t||(t=Promise))(function(o,u){function f(I){try{x(n.next(I))}catch(P){u(P)}}function g(I){try{x(n.throw(I))}catch(P){u(P)}}function x(I){I.done?o(I.value):r(I.value).then(f,g)}x((n=n.apply(e,i||[])).next())})}function yg(e,i){var t={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,r,o,u;return u={next:f(0),throw:f(1),return:f(2)},typeof Symbol=="function"&&(u[Symbol.iterator]=function(){return this}),u;function f(x){return function(I){return g([x,I])}}function g(x){if(n)throw new TypeError("Generator is already executing.");for(;t;)try{if(n=1,r&&(o=x[0]&2?r.return:x[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,x[1])).done)return o;switch(r=0,o&&(x=[x[0]&2,o.value]),x[0]){case 0:case 1:o=x;break;case 4:return t.label++,{value:x[1],done:!1};case 5:t.label++,r=x[1],x=[0];continue;case 7:x=t.ops.pop(),t.trys.pop();continue;default:if(o=t.trys,!(o=o.length>0&&o[o.length-1])&&(x[0]===6||x[0]===2)){t=0;continue}if(x[0]===3&&(!o||x[1]>o[0]&&x[1]<o[3])){t.label=x[1];break}if(x[0]===6&&t.label<o[1]){t.label=o[1],o=x;break}if(o&&t.label<o[2]){t.label=o[2],t.ops.push(x);break}o[2]&&t.ops.pop(),t.trys.pop();continue}x=i.call(e,t)}catch(I){x=[6,I],r=0}finally{n=o=0}if(x[0]&5)throw x[1];return{value:x[0]?x[1]:void 0,done:!0}}}function pm(e,i){var t=typeof Symbol=="function"&&e[Symbol.iterator];if(!t)return e;var n=t.call(e),r,o=[],u;try{for(;(i===void 0||i-- >0)&&!(r=n.next()).done;)o.push(r.value)}catch(f){u={error:f}}finally{try{r&&!r.done&&(t=n.return)&&t.call(n)}finally{if(u)throw u.error}}return o}function hm(e,i,t){if(t||arguments.length===2)for(var n=0,r=i.length,o;n<r;n++)(o||!(n in i))&&(o||(o=Array.prototype.slice.call(i,0,n)),o[n]=i[n]);return e.concat(o||Array.prototype.slice.call(i))}function _g(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var xg={exports:{}},dm={exports:{}},x0={exports:{}};(function(e,i){Object.defineProperty(i,"__esModule",{value:!0}),i.default=t;function t(n){return n&&typeof n.length=="number"&&n.length>=0&&n.length%1===0}e.exports=i.default})(x0,x0.exports);var xh={},bg={exports:{}},Eg={exports:{}};(function(e,i){Object.defineProperty(i,"__esModule",{value:!0}),i.default=function(t){return function(){for(var n=[],r=arguments.length;r--;)n[r]=arguments[r];var o=n.pop();return t.call(this,n,o)}},e.exports=i.default})(Eg,Eg.exports);var $d={};Object.defineProperty($d,"__esModule",{value:!0}),$d.fallback=S_,$d.wrap=w_;var HS=$d.hasQueueMicrotask=typeof queueMicrotask=="function"&&queueMicrotask,WS=$d.hasSetImmediate=typeof setImmediate=="function"&&setImmediate,$S=$d.hasNextTick=typeof mg=="object"&&typeof mg.nextTick=="function";function S_(e){setTimeout(e,0)}function w_(e){return function(i){for(var t=[],n=arguments.length-1;n-- >0;)t[n]=arguments[n+1];return e(function(){return i.apply(void 0,t)})}}var b0;HS?b0=queueMicrotask:WS?b0=setImmediate:$S?b0=mg.nextTick:b0=S_,$d.default=w_(b0),function(e,i){Object.defineProperty(i,"__esModule",{value:!0}),i.default=g;var t=Eg.exports,n=f(t),r=$d,o=f(r),u=xh;function f(P){return P&&P.__esModule?P:{default:P}}function g(P){return(0,u.isAsync)(P)?function(){for(var G=[],$=arguments.length;$--;)G[$]=arguments[$];var Ee=G.pop(),Se=P.apply(this,G);return x(Se,Ee)}:(0,n.default)(function(G,$){var Ee;try{Ee=P.apply(this,G)}catch(Se){return $(Se)}if(Ee&&typeof Ee.then=="function")return x(Ee,$);$(null,Ee)})}function x(P,G){return P.then(function($){I(G,null,$)},function($){I(G,$&&$.message?$:new Error($))})}function I(P,G,$){try{P(G,$)}catch(Ee){(0,o.default)(function(Se){throw Se},Ee)}}e.exports=i.default}(bg,bg.exports),Object.defineProperty(xh,"__esModule",{value:!0}),xh.isAsyncIterable=xh.isAsyncGenerator=xh.isAsync=void 0;var XS=bg.exports,YS=KS(XS);function KS(e){return e&&e.__esModule?e:{default:e}}function A_(e){return e[Symbol.toStringTag]==="AsyncFunction"}function QS(e){return e[Symbol.toStringTag]==="AsyncGenerator"}function JS(e){return typeof e[Symbol.asyncIterator]=="function"}function qS(e){if(typeof e!="function")throw new Error("expected a function");return A_(e)?(0,YS.default)(e):e}xh.default=qS,xh.isAsync=A_,xh.isAsyncGenerator=QS,xh.isAsyncIterable=JS;var hv={exports:{}};(function(e,i){Object.defineProperty(i,"__esModule",{value:!0}),i.default=t;function t(n,r){if(r===void 0&&(r=n.length),!r)throw new Error("arity is undefined");function o(){for(var u=this,f=[],g=arguments.length;g--;)f[g]=arguments[g];return typeof f[r-1]=="function"?n.apply(this,f):new Promise(function(x,I){f[r-1]=function(P){for(var G=[],$=arguments.length-1;$-- >0;)G[$]=arguments[$+1];if(P)return I(P);x(G.length>1?G:G[0])},n.apply(u,f)})}return o}e.exports=i.default})(hv,hv.exports),function(e,i){Object.defineProperty(i,"__esModule",{value:!0});var t=x0.exports,n=g(t),r=xh,o=g(r),u=hv.exports,f=g(u);function g(x){return x&&x.__esModule?x:{default:x}}i.default=(0,f.default)(function(x,I,P){var G=(0,n.default)(I)?[]:{};x(I,function($,Ee,Se){(0,o.default)($)(function(Re){for(var Ye,St=[],vt=arguments.length-1;vt-- >0;)St[vt]=arguments[vt+1];St.length<2&&(Ye=St,St=Ye[0]),G[Ee]=St,Se(Re)})},function($){return P($,G)})},3),e.exports=i.default}(dm,dm.exports);var Sg={exports:{}},vm={exports:{}},wg={exports:{}},E0={exports:{}};(function(e,i){Object.defineProperty(i,"__esModule",{value:!0}),i.default=t;function t(n){function r(){for(var o=[],u=arguments.length;u--;)o[u]=arguments[u];if(n!==null){var f=n;n=null,f.apply(this,o)}}return Object.assign(r,n),r}e.exports=i.default})(E0,E0.exports);var Ag={exports:{}},Cg={exports:{}};(function(e,i){Object.defineProperty(i,"__esModule",{value:!0}),i.default=function(t){return t[Symbol.iterator]&&t[Symbol.iterator]()},e.exports=i.default})(Cg,Cg.exports),function(e,i){Object.defineProperty(i,"__esModule",{value:!0}),i.default=I;var t=x0.exports,n=u(t),r=Cg.exports,o=u(r);function u(P){return P&&P.__esModule?P:{default:P}}function f(P){var G=-1,$=P.length;return function(){return++G<$?{value:P[G],key:G}:null}}function g(P){var G=-1;return function(){var Ee=P.next();return Ee.done?null:(G++,{value:Ee.value,key:G})}}function x(P){var G=P?Object.keys(P):[],$=-1,Ee=G.length;return function Se(){var Re=G[++$];return Re==="__proto__"?Se():$<Ee?{value:P[Re],key:Re}:null}}function I(P){if((0,n.default)(P))return f(P);var G=(0,o.default)(P);return G?g(G):x(P)}e.exports=i.default}(Ag,Ag.exports);var S0={exports:{}};(function(e,i){Object.defineProperty(i,"__esModule",{value:!0}),i.default=t;function t(n){return function(){for(var r=[],o=arguments.length;o--;)r[o]=arguments[o];if(n===null)throw new Error("Callback was already called.");var u=n;n=null,u.apply(this,r)}}e.exports=i.default})(S0,S0.exports);var Tg={exports:{}},w0={exports:{}};(function(e,i){Object.defineProperty(i,"__esModule",{value:!0});var t={};i.default=t,e.exports=i.default})(w0,w0.exports),function(e,i){Object.defineProperty(i,"__esModule",{value:!0}),i.default=o;var t=w0.exports,n=r(t);function r(u){return u&&u.__esModule?u:{default:u}}function o(u,f,g,x){var I=!1,P=!1,G=!1,$=0,Ee=0;function Se(){$>=f||G||I||(G=!0,u.next().then(function(St){var vt=St.value,Ut=St.done;if(!(P||I)){if(G=!1,Ut){I=!0,$<=0&&x(null);return}$++,g(vt,Ee,Re),Ee++,Se()}}).catch(Ye))}function Re(St,vt){if($-=1,!P){if(St)return Ye(St);if(St===!1){I=!0,P=!0;return}if(vt===n.default||I&&$<=0)return I=!0,x(null);Se()}}function Ye(St){P||(G=!1,I=!0,x(St))}Se()}e.exports=i.default}(Tg,Tg.exports),function(e,i){Object.defineProperty(i,"__esModule",{value:!0});var t=E0.exports,n=$(t),r=Ag.exports,o=$(r),u=S0.exports,f=$(u),g=xh,x=Tg.exports,I=$(x),P=w0.exports,G=$(P);function $(Ee){return Ee&&Ee.__esModule?Ee:{default:Ee}}i.default=function(Ee){return function(Se,Re,Ye){if(Ye=(0,n.default)(Ye),Ee<=0)throw new RangeError("concurrency limit cannot be less than 1");if(!Se)return Ye(null);if((0,g.isAsyncGenerator)(Se))return(0,I.default)(Se,Ee,Re,Ye);if((0,g.isAsyncIterable)(Se))return(0,I.default)(Se[Symbol.asyncIterator](),Ee,Re,Ye);var St=(0,o.default)(Se),vt=!1,Ut=!1,Kt=0,Tr=!1;function on(vn,si){if(!Ut)if(Kt-=1,vn)vt=!0,Ye(vn);else if(vn===!1)vt=!0,Ut=!0;else{if(si===G.default||vt&&Kt<=0)return vt=!0,Ye(null);Tr||dn()}}function dn(){for(Tr=!0;Kt<Ee&&!vt;){var vn=St();if(vn===null){vt=!0,Kt<=0&&Ye(null);return}Kt+=1,Re(vn.value,vn.key,(0,f.default)(on))}Tr=!1}dn()}},e.exports=i.default}(wg,wg.exports),function(e,i){Object.defineProperty(i,"__esModule",{value:!0});var t=wg.exports,n=g(t),r=xh,o=g(r),u=hv.exports,f=g(u);function g(I){return I&&I.__esModule?I:{default:I}}function x(I,P,G,$){return(0,n.default)(P)(I,(0,o.default)(G),$)}i.default=(0,f.default)(x,4),e.exports=i.default}(vm,vm.exports),function(e,i){Object.defineProperty(i,"__esModule",{value:!0});var t=vm.exports,n=u(t),r=hv.exports,o=u(r);function u(g){return g&&g.__esModule?g:{default:g}}function f(g,x,I){return(0,n.default)(g,1,x,I)}i.default=(0,o.default)(f,3),e.exports=i.default}(Sg,Sg.exports),function(e,i){Object.defineProperty(i,"__esModule",{value:!0}),i.default=f;var t=dm.exports,n=u(t),r=Sg.exports,o=u(r);function u(g){return g&&g.__esModule?g:{default:g}}function f(g,x){return(0,n.default)(o.default,g,x)}e.exports=i.default}(xg,xg.exports);var mm=_g(xg.exports),cd=function(){function e(){this.args=[],this.tasks=[]}return e.prototype.call=function(){for(var i=arguments,t=[],n=0;n<arguments.length;n++)t[n]=i[n];return this.args=t,mm(this.tasks)},e.prototype.tap=function(i,t){var n=this;this.tasks.push(function(r){t.apply(void 0,hm([],pm(n.args),!1)),r(null,i)})},e}(),Mg={exports:{}},Ig={exports:{}};(function(e,i){Object.defineProperty(i,"__esModule",{value:!0});var t=x0.exports,n=Re(t),r=w0.exports,o=Re(r),u=vm.exports,f=Re(u),g=E0.exports,x=Re(g),I=S0.exports,P=Re(I),G=xh,$=Re(G),Ee=hv.exports,Se=Re(Ee);function Re(Ut){return Ut&&Ut.__esModule?Ut:{default:Ut}}function Ye(Ut,Kt,Tr){Tr=(0,x.default)(Tr);var on=0,dn=0,vn=Ut.length,si=!1;vn===0&&Tr(null);function ai(Hi,wa){Hi===!1&&(si=!0),si!==!0&&(Hi?Tr(Hi):(++dn===vn||wa===o.default)&&Tr(null))}for(;on<vn;on++)Kt(Ut[on],on,(0,P.default)(ai))}function St(Ut,Kt,Tr){return(0,f.default)(Ut,1/0,Kt,Tr)}function vt(Ut,Kt,Tr){var on=(0,n.default)(Ut)?Ye:St;return on(Ut,(0,$.default)(Kt),Tr)}i.default=(0,Se.default)(vt,3),e.exports=i.default})(Ig,Ig.exports),function(e,i){Object.defineProperty(i,"__esModule",{value:!0}),i.default=f;var t=Ig.exports,n=u(t),r=dm.exports,o=u(r);function u(g){return g&&g.__esModule?g:{default:g}}function f(g,x){return(0,o.default)(n.default,g,x)}e.exports=i.default}(Mg,Mg.exports);var ew=_g(Mg.exports),_7=function(){function e(){this.tasks=[]}return e.prototype.promise=function(){return ew(this.tasks)},e.prototype.tapPromise=function(i,t){var n=this;this.tasks.push(function(r){return gg(n,void 0,void 0,function(){return yg(this,function(o){switch(o.label){case 0:return[4,t()];case 1:return o.sent(),r(null,i),[2]}})})})},e}(),Og={exports:{}};(function(e,i){Object.defineProperty(i,"__esModule",{value:!0});var t=E0.exports,n=I(t),r=S0.exports,o=I(r),u=xh,f=I(u),g=hv.exports,x=I(g);function I(G){return G&&G.__esModule?G:{default:G}}function P(G,$){if($=(0,n.default)($),!Array.isArray(G))return $(new Error("First argument to waterfall must be an array of functions"));if(!G.length)return $();var Ee=0;function Se(Ye){var St=(0,f.default)(G[Ee++]);St.apply(void 0,Ye.concat([(0,o.default)(Re)]))}function Re(Ye){for(var St=[],vt=arguments.length-1;vt-- >0;)St[vt]=arguments[vt+1];if(Ye!==!1){if(Ye||Ee===G.length)return $.apply(void 0,[Ye].concat(St));Se(St)}}Se([])}i.default=(0,x.default)(P),e.exports=i.default})(Og,Og.exports);var C_=_g(Og.exports),x7=function(){function e(){this.tasks=[]}return e.prototype.call=function(){return C_(this.tasks)},e.prototype.tap=function(i,t){this.tasks.length===0?this.tasks.push(function(n){var r=t();n(r?null:!1,r)}):this.tasks.push(function(n,r){var o=t.apply(void 0,hm([],pm(n),!1));r(o?null:!1,i)})},e}(),T_=function(){function e(){this.tasks=[]}return e.prototype.call=function(){return mm(this.tasks)},e.prototype.tap=function(i,t){this.tasks.push(function(n){var r=t();n(r,i)})},e}(),tw=function(){function e(){this.args=[],this.tasks=[]}return e.prototype.promise=function(){for(var i=arguments,t=[],n=0;n<arguments.length;n++)t[n]=i[n];return this.args=t,mm(this.tasks)},e.prototype.tapPromise=function(i,t){var n=this;this.tasks.push(function(r){return gg(n,void 0,void 0,function(){return yg(this,function(o){switch(o.label){case 0:return[4,t.apply(void 0,hm([],pm(this.args),!1))];case 1:return o.sent(),r(null,i),[2]}})})})},e}(),rw=function(){function e(){this.args=[],this.tasks=[]}return e.prototype.promise=function(){for(var i=arguments,t=[],n=0;n<arguments.length;n++)t[n]=i[n];return this.args=t,mm(this.tasks)},e.prototype.tapPromise=function(i,t){var n=this;this.tasks.push(function(r){return gg(n,void 0,void 0,function(){var o;return yg(this,function(u){switch(u.label){case 0:return[4,t.apply(void 0,hm([],pm(this.args),!1))];case 1:return o=u.sent(),r(o,i),[2]}})})})},e}(),nw=function(){function e(){this.tasks=[]}return e.prototype.promise=function(){return C_(this.tasks)},e.prototype.tapPromise=function(i,t){this.tasks.length===0?this.tasks.push(function(n){t().then(function(r){n(null,r)})}):this.tasks.push(function(n,r){t(n).then(function(o){r(null,o)})})},e}(),M_=c(31204),iw=c.n(M_),I_,O_,R_,P_,k_,L_,D_,F_,N_,B_,z_,U_,Z_,j_,V_,G_,H_,Np,W_,$_,X_,Y_,K_,Q_,J_,q_,e1,t1,r1,n1,i1,a1,o1;function aw(e){var i=ow();return function(){var n=(0,rr.Z)(e),r;if(i){var o=(0,rr.Z)(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return(0,jn.Z)(this,r)}}function ow(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var sw=(I_=(0,Ki.b2)(),O_=(0,Ki.f3)(Ln.SceneID),R_=(0,Ki.f3)(Ln.IIconService),P_=(0,Ki.f3)(Ln.IFontService),k_=(0,Ki.f3)(Ln.IControlService),L_=(0,Ki.f3)(Ln.IGlobalConfigService),D_=(0,Ki.f3)(Ln.IMapService),F_=(0,Ki.f3)(Ln.ICoordinateSystemService),N_=(0,Ki.f3)(Ln.IRendererService),B_=(0,Ki.f3)(Ln.ILayerService),z_=(0,Ki.f3)(Ln.ICameraService),U_=(0,Ki.f3)(Ln.IInteractionService),Z_=(0,Ki.f3)(Ln.IPickingService),j_=(0,Ki.f3)(Ln.IShaderModuleService),V_=(0,Ki.f3)(Ln.IMarkerService),G_=(0,Ki.f3)(Ln.IPopupService),I_(H_=(Np=function(e){(0,ui.Z)(t,e);var i=aw(t);function t(){var n;return(0,Ur.Z)(this,t),n=i.call(this),(0,He.Z)((0,er.Z)(n),"destroyed",!1),(0,He.Z)((0,er.Z)(n),"loaded",!1),Bs((0,er.Z)(n),"id",W_,(0,er.Z)(n)),Bs((0,er.Z)(n),"iconService",$_,(0,er.Z)(n)),Bs((0,er.Z)(n),"fontService",X_,(0,er.Z)(n)),Bs((0,er.Z)(n),"controlService",Y_,(0,er.Z)(n)),Bs((0,er.Z)(n),"configService",K_,(0,er.Z)(n)),Bs((0,er.Z)(n),"map",Q_,(0,er.Z)(n)),Bs((0,er.Z)(n),"coordinateSystemService",J_,(0,er.Z)(n)),Bs((0,er.Z)(n),"rendererService",q_,(0,er.Z)(n)),Bs((0,er.Z)(n),"layerService",e1,(0,er.Z)(n)),Bs((0,er.Z)(n),"cameraService",t1,(0,er.Z)(n)),Bs((0,er.Z)(n),"interactionService",r1,(0,er.Z)(n)),Bs((0,er.Z)(n),"pickingService",n1,(0,er.Z)(n)),Bs((0,er.Z)(n),"shaderModuleService",i1,(0,er.Z)(n)),Bs((0,er.Z)(n),"markerService",a1,(0,er.Z)(n)),Bs((0,er.Z)(n),"popupService",o1,(0,er.Z)(n)),(0,He.Z)((0,er.Z)(n),"inited",!1),(0,He.Z)((0,er.Z)(n),"initPromise",void 0),(0,He.Z)((0,er.Z)(n),"rendering",!1),(0,He.Z)((0,er.Z)(n),"$container",void 0),(0,He.Z)((0,er.Z)(n),"canvas",void 0),(0,He.Z)((0,er.Z)(n),"markerContainer",void 0),(0,He.Z)((0,er.Z)(n),"hooks",void 0),(0,He.Z)((0,er.Z)(n),"handleWindowResized",function(){n.emit("resize"),n.$container&&(n.initContainer(),_s(),n.coordinateSystemService.needRefresh=!0,n.render())}),(0,He.Z)((0,er.Z)(n),"handleMapCameraChanged",function(r){n.cameraService.update(r),n.render()}),n.hooks={init:new tw},n}return(0,Jr.Z)(t,[{key:"init",value:function(r){var o=this;this.configService.setSceneConfig(this.id,r),this.shaderModuleService.registerBuiltinModules(),this.iconService.init(),this.iconService.on("imageUpdate",function(){return o.render()}),this.fontService.init(),this.hooks.init.tapPromise("initMap",(0,An.Z)(Nt().mark(function u(){return Nt().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return g.next=2,new Promise(function(x){o.map.onCameraChanged(function(I){o.cameraService.init(),o.cameraService.update(I),x()}),o.map.init()});case 2:o.map.onCameraChanged(o.handleMapCameraChanged),o.map.addMarkerContainer(),o.markerService.addMarkers(),o.markerService.addMarkerLayers(),o.popupService.initPopup(),o.interactionService.init(),o.interactionService.on(Pe.Drag,o.addSceneEvent.bind(o));case 9:case"end":return g.stop()}},u)}))),this.hooks.init.tapPromise("initRenderer",(0,An.Z)(Nt().mark(function u(){var f,g;return Nt().wrap(function(I){for(;;)switch(I.prev=I.next){case 0:if(f=o.map.getOverlayContainer(),f?o.$container=f:o.$container=bs(o.configService.getSceneConfig(o.id).id||""),!o.$container){I.next=12;break}return o.canvas=Ua("canvas","",o.$container),o.setCanvas(),I.next=7,o.rendererService.init(o.canvas,o.configService.getSceneConfig(o.id),r.gl);case 7:o.initContainer(),iw()(o.$container,o.handleWindowResized),vs.matchMedia&&((g=vs.matchMedia("screen and (-webkit-min-device-pixel-ratio: 1.5)"))===null||g===void 0||g.addListener(o.handleWindowResized)),I.next=13;break;case 12:console.error("\u5BB9\u5668 id \u4E0D\u5B58\u5728");case 13:o.pickingService.init(o.id);case 14:case"end":return I.stop()}},u)}))),this.render()}},{key:"initMiniScene",value:function(r){var o=this;this.configService.setSceneConfig(this.id,r),this.shaderModuleService.registerBuiltinModules(),this.iconService.init(),this.iconService.on("imageUpdate",function(){return o.render()}),this.fontService.init(),this.hooks.init.tapPromise("initMap",(0,An.Z)(Nt().mark(function u(){return Nt().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return g.next=2,new Promise(function(x){o.map.onCameraChanged(function(I){o.cameraService.init(),o.cameraService.update(I),o.map.version!=="GAODE2.x"&&x()}),o.map.initMiniMap()});case 2:o.map.onCameraChanged(o.handleMapCameraChanged),o.interactionService.init(),o.interactionService.on(Pe.Drag,o.addSceneEvent.bind(o));case 5:case"end":return g.stop()}},u)}))),this.hooks.init.tapPromise("initRenderer",(0,An.Z)(Nt().mark(function u(){var f;return Nt().wrap(function(x){for(;;)switch(x.prev=x.next){case 0:if(f=r.canvas,o.$container=f||null,!o.$container){x.next=7;break}return x.next=5,o.rendererService.init(r.canvas,o.configService.getSceneConfig(o.id),void 0);case 5:x.next=8;break;case 7:console.error("\u5BB9\u5668 id \u4E0D\u5B58\u5728");case 8:o.pickingService.init(o.id);case 9:case"end":return x.stop()}},u)}))),this.initPromise=this.hooks.init.promise(),this.render()}},{key:"addLayer",value:function(r){this.layerService.sceneService=this,this.layerService.add(r)}},{key:"addMask",value:function(r){this.layerService.sceneService=this,this.layerService.addMask(r)}},{key:"render",value:function(){var n=(0,An.Z)(Nt().mark(function o(){return Nt().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:if(!(this.rendering||this.destroyed)){f.next=2;break}return f.abrupt("return");case 2:if(this.rendering=!0,this.inited){f.next=16;break}return f.next=6,this.hooks.init.promise();case 6:return this.destroyed&&this.destroy(),f.next=9,this.layerService.initLayers();case 9:this.layerService.renderLayers(),this.controlService.addControls(),this.loaded=!0,this.emit("loaded"),this.inited=!0,f.next=18;break;case 16:this.layerService.initLayers(),this.layerService.renderLayers();case 18:this.rendering=!1;case 19:case"end":return f.stop()}},o,this)}));function r(){return n.apply(this,arguments)}return r}()},{key:"addFontFace",value:function(r,o){this.fontService.addFontFace(r,o)}},{key:"getSceneContainer",value:function(){return this.$container}},{key:"exportPng",value:function(r){var o,u=(o=this.$container)===null||o===void 0?void 0:o.getElementsByTagName("canvas")[0];this.render();var f=r==="jpg"?u==null?void 0:u.toDataURL("image/jpeg"):u==null?void 0:u.toDataURL("image/png");return f}},{key:"getSceneConfig",value:function(){return this.configService.getSceneConfig(this.id)}},{key:"getPointSizeRange",value:function(){return this.rendererService.getPointSizeRange()}},{key:"addMarkerContainer",value:function(){var r=this.$container.parentElement;r!==null&&(this.markerContainer=Ua("div","l7-marker-container",r))}},{key:"getMarkerContainer",value:function(){return this.markerContainer}},{key:"destroy",value:function(){var r=this,o,u;if(!this.inited){this.destroyed=!0;return}if((0,M_.unbind)(this.$container,this.handleWindowResized),vs.matchMedia){var f;(f=vs.matchMedia("screen and (min-resolution: 2dppx)"))===null||f===void 0||f.removeListener(this.handleWindowResized)}this.pickingService.destroy(),this.layerService.destroy(),this.interactionService.destroy(),this.controlService.destroy(),this.markerService.destroy(),this.fontService.destroy(),this.iconService.destroy(),this.removeAllListeners(),this.inited=!1,this.map.destroy(),setTimeout(function(){var g;(g=r.$container)===null||g===void 0||g.removeChild(r.canvas),r.canvas=null,r.rendererService.destroy()}),(o=this.$container)===null||o===void 0||(u=o.parentNode)===null||u===void 0||u.removeChild(this.$container),this.emit("destroy")}},{key:"initContainer",value:function(){var r,o,u=ji,f=((r=this.$container)===null||r===void 0?void 0:r.clientWidth)||400,g=((o=this.$container)===null||o===void 0?void 0:o.clientHeight)||300,x=this.canvas;x&&(x.width=f*u,x.height=g*u),this.rendererService.viewport({x:0,y:0,width:u*f,height:u*g})}},{key:"setCanvas",value:function(){var r,o,u=ji,f=((r=this.$container)===null||r===void 0?void 0:r.clientWidth)||400,g=((o=this.$container)===null||o===void 0?void 0:o.clientHeight)||300,x=this.canvas;x.width=f*u,x.height=g*u,x.style.width="100%",x.style.height="100%"}},{key:"addSceneEvent",value:function(r){this.emit(r.type,r)}}]),t}(ir.EventEmitter),W_=Ds(Np.prototype,"id",[O_],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),$_=Ds(Np.prototype,"iconService",[R_],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),X_=Ds(Np.prototype,"fontService",[P_],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Y_=Ds(Np.prototype,"controlService",[k_],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),K_=Ds(Np.prototype,"configService",[L_],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Q_=Ds(Np.prototype,"map",[D_],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),J_=Ds(Np.prototype,"coordinateSystemService",[F_],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),q_=Ds(Np.prototype,"rendererService",[N_],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),e1=Ds(Np.prototype,"layerService",[B_],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),t1=Ds(Np.prototype,"cameraService",[z_],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),r1=Ds(Np.prototype,"interactionService",[U_],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),n1=Ds(Np.prototype,"pickingService",[Z_],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),i1=Ds(Np.prototype,"shaderModuleService",[j_],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),a1=Ds(Np.prototype,"markerService",[V_],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),o1=Ds(Np.prototype,"popupService",[G_],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Np))||H_);function uw(e){var i=0;switch(e){case"vec2":case"ivec2":i=2;break;case"vec3":case"ivec3":i=3;break;case"vec4":case"ivec4":case"mat2":i=4;break;case"mat3":i=9;break;case"mat4":i=16;break;default:}return i}var lw=/uniform\s+(bool|float|int|vec2|vec3|vec4|ivec2|ivec3|ivec4|mat2|mat3|mat4|sampler2D|samplerCube)\s+([\s\S]*?);/g;function s1(e){var i={};return e=e.replace(lw,function(t,n,r){var o=r.split(":"),u=o[0].trim(),f="";switch(o.length>1&&(f=o[1].trim()),n){case"bool":f=f==="true";break;case"float":case"int":f=Number(f);break;case"vec2":case"vec3":case"vec4":case"ivec2":case"ivec3":case"ivec4":case"mat2":case"mat3":case"mat4":f?f=f.replace("[","").replace("]","").split(",").reduce(function(g,x){return g.push(Number(x.trim())),g},[]):f=new Array(uw(n)).fill(0);break;default:}return i[u]=f,"uniform ".concat(n," ").concat(u,`;
`)}),{content:e,uniforms:i}}var u1,l1,c1="#define PI 3.14159265359",cw=`#define SHIFT_RIGHT17 1.0 / 131072.0
#define SHIFT_RIGHT18 1.0 / 262144.0
#define SHIFT_RIGHT19 1.0 / 524288.0
#define SHIFT_RIGHT20 1.0 / 1048576.0
#define SHIFT_RIGHT21 1.0 / 2097152.0
#define SHIFT_RIGHT22 1.0 / 4194304.0
#define SHIFT_RIGHT23 1.0 / 8388608.0
#define SHIFT_RIGHT24 1.0 / 16777216.0

#define SHIFT_LEFT17 131072.0
#define SHIFT_LEFT18 262144.0
#define SHIFT_LEFT19 524288.0
#define SHIFT_LEFT20 1048576.0
#define SHIFT_LEFT21 2097152.0
#define SHIFT_LEFT22 4194304.0
#define SHIFT_LEFT23 8388608.0
#define SHIFT_LEFT24 16777216.0

vec2 unpack_float(float packedValue) {
  int packedIntValue = int(packedValue);
  int v0 = packedIntValue / 256;
  return vec2(v0, packedIntValue - v0 * 256);
}

vec4 decode_color(vec2 encodedColor) {
  return vec4(
    unpack_float(encodedColor[0]) / 255.0,
    unpack_float(encodedColor[1]) / 255.0
  );
}
`,fw=`#define ambientRatio 0.5
#define diffuseRatio 0.3
#define specularRatio 0.2


float calc_lighting(vec4 pos) {

    vec3 worldPos = vec3(pos * u_ModelMatrix);

    vec3 worldNormal = a_Normal;
      // //cal light weight
    vec3 viewDir = normalize(u_CameraPosition - worldPos);

    vec3 lightDir = normalize(vec3(1, -10.5, 12));

    vec3 halfDir = normalize(viewDir+lightDir);
      // //lambert
    float lambert = dot(worldNormal, lightDir);
        //specular
    float specular = pow(max(0.0, dot(worldNormal, halfDir)), 32.0);
        //sum to light weight
    float lightWeight = ambientRatio + diffuseRatio * lambert + specularRatio * specular;

    return lightWeight;
}
`,pw=`// Blinn-Phong model
// apply lighting in vertex shader instead of fragment shader
// @see https://learnopengl.com/Advanced-Lighting/Advanced-Lighting
uniform float u_Ambient : 1.0;
uniform float u_Diffuse : 1.0;
uniform float u_Specular : 1.0;
uniform int u_NumOfDirectionalLights : 1;
uniform int u_NumOfSpotLights : 0;

#define SHININESS 32.0
#define MAX_NUM_OF_DIRECTIONAL_LIGHTS 3
#define MAX_NUM_OF_SPOT_LIGHTS 3

struct DirectionalLight {
  vec3 direction;
  vec3 ambient;
  vec3 diffuse;
  vec3 specular;
};

struct SpotLight {
  vec3 position;
  vec3 direction;
  vec3 ambient;
  vec3 diffuse;
  vec3 specular;
  float constant;
  float linear;
  float quadratic;
  float angle;
  float blur;
  float exponent;
};

uniform DirectionalLight u_DirectionalLights[MAX_NUM_OF_DIRECTIONAL_LIGHTS];
uniform SpotLight u_SpotLights[MAX_NUM_OF_SPOT_LIGHTS];

vec3 calc_directional_light(DirectionalLight light, vec3 normal, vec3 viewDir) {
  vec3 lightDir = normalize(light.direction);
  // diffuse shading
  float diff = max(dot(normal, lightDir), 0.0);
  // Blinn-Phong specular shading
  vec3 halfwayDir = normalize(lightDir + viewDir);
  float spec = pow(max(dot(normal, halfwayDir), 0.0), SHININESS);

  vec3 ambient = light.ambient * u_Ambient;
  vec3 diffuse = light.diffuse * diff * u_Diffuse;
  vec3 specular = light.specular * spec * u_Specular;

  return ambient + diffuse + specular;
}

// vec3 calc_spot_light(SpotLight light, vec3 normal, vec3 fragPos, vec3 viewDir) {
//   vec3 lightDir = normalize(light.position - fragPos);
//   // diffuse shading
//   float diff = max(dot(normal, lightDir), 0.0);
//   // specular shading
//   vec3 reflectDir = reflect(-lightDir, normal);
//   float spec = pow(max(dot(viewDir, reflectDir), 0.0), SHININESS);
//   // attenuation
//   float distance = length(light.position - fragPos);
//   float attenuation = 1.0 / (light.constant + light.linear * distance +
//           light.quadratic * (distance * distance));

//   vec3 ambient = light.ambient * u_Ambient;
//   vec3 diffuse = light.diffuse * diff * u_Diffuse;
//   vec3 specular = light.specular * spec * u_Specular;

//   float spotEffect = dot(normalize(light.direction), -lightDir);
//   float spotCosCutoff = cos(light.angle / 180.0 * PI);
//   float spotCosOuterCutoff = cos((light.angle + light.blur) / 180.0 * PI);
//   float spotCosInnerCutoff = cos((light.angle - light.blur) / 180.0 * PI);
//   if (spotEffect > spotCosCutoff) {
//     spotEffect = pow(smoothstep(spotCosOuterCutoff, spotCosInnerCutoff, spotEffect), light.exponent);
//   } else {
//     spotEffect = 0.0;
//   }

//   return ambient + attenuation * (spotEffect * diffuse + specular);
// }

vec3 calc_lighting(vec3 position, vec3 normal, vec3 viewDir) {
  vec3 weight = vec3(0.0);
  for (int i = 0; i < MAX_NUM_OF_DIRECTIONAL_LIGHTS; i++) {
    if (i >= u_NumOfDirectionalLights) {
      break;
    }
    weight += calc_directional_light(u_DirectionalLights[i], normal, viewDir);
  }
  // for (int i = 0; i < MAX_NUM_OF_SPOT_LIGHTS; i++) {
  //   if (i >= u_NumOfSpotLights) {
  //     break;
  //   }
  //   weight += calc_spot_light(u_SpotLights[i], normal, position, viewDir);
  // }
  return weight;
}
`,hw=`varying vec4 v_PickingResult;
uniform vec4 u_HighlightColor : [0, 0, 0, 0];
uniform vec4 u_SelectColor : [0, 0, 0, 0];
uniform float u_PickingStage : 0.0;
uniform float u_shaderPick;

uniform float u_activeMix: 0;

#define PICKING_NONE 0.0
#define PICKING_ENCODE 1.0
#define PICKING_HIGHLIGHT 2.0
#define COLOR_SCALE 1. / 255.

#define HIGHLIGHT 1.0
#define SELECT 2.0

/*
 * Returns highlight color if this item is selected.
 */
vec4 filterHighlightColor(vec4 color, float weight) {
  // float selected = v_PickingResult.a;
  bool selected = bool(v_PickingResult.a);

  // if (selected == SELECT) {
  if (selected) {
  //   // \u70B9\u51FB\u9009\u4E2D\u72B6\u6001
  //   vec4 selectColor = u_SelectColor * COLOR_SCALE;
  //   return selectColor;
  // } else if (selected == HIGHLIGHT) {
  //   // hover \u9AD8\u4EAE\u72B6\u6001
    vec4 highLightColor = u_HighlightColor * COLOR_SCALE;

    float highLightAlpha = highLightColor.a;
    float highLightRatio = highLightAlpha / (highLightAlpha + color.a * (1.0 - highLightAlpha));

    vec3 resultRGB = mix(color.rgb, highLightColor.rgb, highLightRatio);
    return vec4(mix(resultRGB * weight, color.rgb, u_activeMix), color.a);
  } else {
    return color;
  }
}

/*
 * Returns picking color if picking enabled else unmodified argument.
 */
vec4 filterPickingColor(vec4 color) {
  vec3 pickingColor = v_PickingResult.rgb;
  if (u_PickingStage == PICKING_ENCODE && length(pickingColor) < 0.001) {
    discard;
  }
  return u_PickingStage == PICKING_ENCODE ? vec4(pickingColor, step(0.001,color.a)): color;
}

/*
 * Returns picking color if picking is enabled if not
 * highlight color if this item is selected, otherwise unmodified argument.
 */
vec4 filterColor(vec4 color) {
  // \u8FC7\u6EE4\u591A\u4F59\u7684 shader \u8BA1\u7B97
  // return color;
  if(u_shaderPick < 0.5) {
    return color; // \u6682\u65F6\u53BB\u9664 \u76F4\u63A5\u53D6\u6D88\u8BA1\u7B97\u5728\u9009\u4E2D\u65F6\u62D6\u62FD\u5730\u56FE\u4F1A\u6709\u95EE\u9898
  } else {
    return filterPickingColor(filterHighlightColor(color, 1.0));
  }
  
}

vec4 filterColorAlpha(vec4 color, float alpha) {
  // \u8FC7\u6EE4\u591A\u4F59\u7684 shader \u8BA1\u7B97
  // return color;
  if(u_shaderPick < 0.5) {
    return color; // \u6682\u65F6\u53BB\u9664 \u76F4\u63A5\u53D6\u6D88\u8BA1\u7B97\u5728\u9009\u4E2D\u65F6\u62D6\u62FD\u5730\u56FE\u4F1A\u6709\u95EE\u9898
  } else {
    return filterPickingColor(filterHighlightColor(color, alpha));
  }
}

`,dw=`attribute vec3 a_PickingColor;
varying vec4 v_PickingResult;

uniform vec3 u_PickingColor : [0, 0, 0];
uniform vec3 u_CurrentSelectedId : [0, 0, 0];
uniform vec4 u_HighlightColor : [0, 0, 0, 0];
uniform vec4 u_SelectColor : [0, 0, 0, 0];
uniform float u_PickingStage : 0.0;
uniform float u_PickingThreshold : 1.0;
uniform float u_PickingBuffer: 0.0;
uniform float u_shaderPick;
uniform float u_EnableSelect: 0.0;

#define PICKING_NONE 0.0
#define PICKING_ENCODE 1.0
#define PICKING_HIGHLIGHT 2.0
#define COLOR_SCALE 1. / 255.

#define NORMAL 0.0
#define HIGHLIGHT 1.0
#define SELECT 2.0

bool isVertexPicked(vec3 vertexColor) {
  return
    abs(vertexColor.r - u_PickingColor.r) < u_PickingThreshold &&
    abs(vertexColor.g - u_PickingColor.g) < u_PickingThreshold &&
    abs(vertexColor.b - u_PickingColor.b) < u_PickingThreshold;
}

// \u5224\u65AD\u5F53\u524D\u70B9\u662F\u5426\u5DF2\u7ECF\u88AB select \u9009\u4E2D
bool isVertexSelected(vec3 vertexColor) {
  return
    abs(vertexColor.r - u_CurrentSelectedId.r) < u_PickingThreshold &&
    abs(vertexColor.g - u_CurrentSelectedId.g) < u_PickingThreshold &&
    abs(vertexColor.b - u_CurrentSelectedId.b) < u_PickingThreshold;
}

void setPickingColor(vec3 pickingColor) {
  if(u_shaderPick < 0.5) {
    return;
  }
  // compares only in highlight stage

  v_PickingResult.a = float((u_PickingStage == PICKING_HIGHLIGHT) && isVertexPicked(pickingColor));

  // if (u_EnableSelect == 1.0 && u_PickingStage == PICKING_HIGHLIGHT && isVertexSelected(pickingColor)) {
  //   // \u9009\u4E2D\u6001
  //   v_PickingResult.a = SELECT;
  // } else if (u_PickingStage == PICKING_HIGHLIGHT && isVertexPicked(pickingColor)) {
  //   // \u9AD8\u4EAE\u6001
  //   v_PickingResult.a = HIGHLIGHT;
  // } else {
  //   v_PickingResult.a = NORMAL;
  // }

  // Stores the picking color so that the fragment shader can render it during picking
  v_PickingResult.rgb = pickingColor * COLOR_SCALE;
}

float setPickingSize(float x) {
   return u_PickingStage == PICKING_ENCODE ? x + u_PickingBuffer : x;
}

float setPickingOrder(float z) {
   bool selected = bool(v_PickingResult.a);
   return selected ? z + 1. : 0.;
}
`,vw=`
#define E 2.718281828459045
vec2 ProjectFlat(vec2 lnglat){
  float maxs=85.0511287798;
  float lat=max(min(maxs,lnglat.y),-maxs);
  float scale= 268435456.;
  float d=PI/180.;
  float x=lnglat.x*d;
  float y=lat*d;
  y=log(tan((PI/4.)+(y/2.)));

  float a=.5/PI,
  b=.5,
  c=-.5/PI;
  d=.5;
  x=scale*(a*x+b);
  y=scale*(c*y+d);
  return vec2(x,y);
}

vec2 unProjectFlat(vec2 px){
  float a=.5/PI;
  float b=.5;
  float c=-.5/PI;
  float d=.5;
  float scale = 268435456.;
  float x=(px.x/scale-b)/a;
  float y=(px.y/scale-d)/c;
  y=(atan(pow(E,y))-(PI/4.))*2.;
  d=PI/180.;
  float lat=y/d;
  float lng=x/d;
  return vec2(lng,lat);
}

float pixelDistance(vec2 from, vec2 to) {
 vec2 a1 = ProjectFlat(from);
 vec2 b1 = ProjectFlat(to);
 return distance(a1, b1);
}

// gaode2.0
vec2 customProject(vec2 lnglat) { // \u7ECF\u7EAC\u5EA6 => \u5E73\u9762\u5750\u6807
  float t = lnglat.x;
  float e = lnglat.y;
  float Sm = 180.0 / PI;
  float Tm = 6378137.0;
  float Rm = PI / 180.0;
  float r = 85.0511287798;
  e = max(min(r, e), -r);
  t *= Rm;
  e *= Rm;
  e = log(tan(PI / 4.0 + e / 2.0));
  return vec2(t * Tm, e * Tm);
}

vec2 unProjCustomCoord(vec2 point) { // \u5E73\u9762\u5750\u6807 => \u7ECF\u7EAC\u5EA6
  float Sm = 57.29577951308232; //180 / Math.PI
  float Tm = 6378137.0;
  float t = point.x;
  float e = point.y;
  return vec2(t / Tm * Sm, (2.0 * atan(exp(e / Tm)) - PI / 2.0) * Sm);
}


float customPixelDistance(vec2 from, vec2 to) {
 vec2 a1 = ProjectFlat(from);
 vec2 b1 = ProjectFlat(to);
 return distance(a1, b1);
}`,mw=`#define TILE_SIZE 512.0
#define PI 3.1415926536
#define WORLD_SCALE TILE_SIZE / (PI * 2.0)

#define COORDINATE_SYSTEM_LNGLAT 1.0        // mapbox
#define COORDINATE_SYSTEM_LNGLAT_OFFSET 2.0 // mapbox offset
#define COORDINATE_SYSTEM_VECTOR_TILE 3.0
#define COORDINATE_SYSTEM_IDENTITY 4.0
#define COORDINATE_SYSTEM_P20 5.0           // amap
#define COORDINATE_SYSTEM_P20_OFFSET 6.0    // amap offset
#define COORDINATE_SYSTEM_METER_OFFSET 7.0

#define COORDINATE_SYSTEM_P20_2 8.0         // amap2.0

uniform mat4 u_ViewMatrix;
uniform mat4 u_ProjectionMatrix;
uniform mat4 u_ViewProjectionMatrix;
uniform float u_Zoom : 1;
uniform float u_ZoomScale : 1;

uniform float u_CoordinateSystem;
uniform vec2 u_ViewportCenter;
uniform vec4 u_ViewportCenterProjection;
uniform vec3 u_PixelsPerDegree;
uniform vec3 u_PixelsPerDegree2;
uniform vec3 u_PixelsPerMeter;

uniform vec2 u_ViewportSize;
uniform float u_DevicePixelRatio;
uniform float u_FocalDistance;
uniform vec3 u_CameraPosition;

// uniform mat4 u_Mvp;

// web mercator coords -> world coords
vec2 project_mercator(vec2 lnglat) {
  float x = lnglat.x;
  return vec2(
    radians(x) + PI,
    PI - log(tan(PI * 0.25 + radians(lnglat.y) * 0.5))
  );
}

float project_scale(float meters) {
  return meters * u_PixelsPerMeter.z;
}


// offset coords -> world coords
vec4 project_offset(vec4 offset) {
  float dy = offset.y;
  dy = clamp(dy, -1., 1.);
  vec3 pixels_per_unit = u_PixelsPerDegree + u_PixelsPerDegree2 * dy;
  return vec4(offset.xyz * pixels_per_unit, offset.w);
}

vec3 project_normal(vec3 normal) {
  vec4 normal_modelspace = u_ModelMatrix * vec4(normal, 0.0);
  return normalize(normal_modelspace.xyz * u_PixelsPerMeter);
}

vec3 project_offset_normal(vec3 vector) {
  if (u_CoordinateSystem < COORDINATE_SYSTEM_LNGLAT + 0.01 && u_CoordinateSystem >COORDINATE_SYSTEM_LNGLAT - 0.01
    || u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {
    // normals generated by the polygon tesselator are in lnglat offsets instead of meters
    return normalize(vector * u_PixelsPerDegree);
  }
  return project_normal(vector);
}
// || u_CoordinateSystem < COORDINATE_SYSTEM_P20_OFFSET + 0.01 && u_CoordinateSystem >COORDINATE_SYSTEM_P20_OFFSET - 0.01
// reverse Y
vec3 reverse_offset_normal(vec3 vector) {
  if (u_CoordinateSystem == COORDINATE_SYSTEM_P20 ||u_CoordinateSystem == COORDINATE_SYSTEM_P20_OFFSET ) {
    return vector * vec3(1.0, -1.0, 1.0);
  }

  if (u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.0
    return vector;
  }
  return vector;
}

vec4 project_mvt_offset_position(vec4 position) {
  float a = COORDINATE_SYSTEM_LNGLAT_OFFSET;
  float b = COORDINATE_SYSTEM_P20_OFFSET;
  float c = COORDINATE_SYSTEM_LNGLAT;
  if (u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET || u_CoordinateSystem == COORDINATE_SYSTEM_P20_OFFSET) {
    return project_offset(vec4(0.0, 0.0, position.z, position.w));
  }
  if (u_CoordinateSystem < COORDINATE_SYSTEM_LNGLAT + 0.01 && u_CoordinateSystem >COORDINATE_SYSTEM_LNGLAT - 0.01) {
    return vec4(
      project_mercator(position.xy) * WORLD_SCALE * u_ZoomScale,
      project_scale(position.z),
      position.w
    );
  }
  return position;
}

vec4 project_position(vec4 position) {
  float a = COORDINATE_SYSTEM_LNGLAT_OFFSET;
  float b = COORDINATE_SYSTEM_P20_OFFSET;
  float c = COORDINATE_SYSTEM_LNGLAT;
  if (u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET
    || u_CoordinateSystem == COORDINATE_SYSTEM_P20_OFFSET) {
    float X = position.x - u_ViewportCenter.x;
    float Y = position.y - u_ViewportCenter.y;
    return project_offset(vec4(X, Y, position.z, position.w));
  }
  if (u_CoordinateSystem < COORDINATE_SYSTEM_LNGLAT + 0.01 && u_CoordinateSystem >COORDINATE_SYSTEM_LNGLAT - 0.01) {
    return vec4(
      project_mercator(position.xy) * WORLD_SCALE * u_ZoomScale,
      project_scale(position.z),
      position.w
    );
  }

  if (u_CoordinateSystem == COORDINATE_SYSTEM_P20) {
    return vec4(
      (project_mercator(position.xy) * WORLD_SCALE * u_ZoomScale - vec2(215440491., 106744817.)) * vec2(1., -1.),
      project_scale(position.z),
      position.w
    );
  }

  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) {
    // return vec4(
    //   (position.xy * WORLD_SCALE * u_ZoomScale) * vec2(1., -1.), 
    //   project_scale(position.z), 
    //   position.w);

     return vec4(
      position.xy, 
      project_scale(position.z), 
      position.w);
  }
  return position;

  // TODO: \u74E6\u7247\u5750\u6807\u7CFB & \u5E38\u89C4\u4E16\u754C\u5750\u6807\u7CFB
}
vec2 project_pixel_size_to_clipspace(vec2 pixels) {
  vec2 offset = pixels / u_ViewportSize * u_DevicePixelRatio * 2.0;
  return offset * u_FocalDistance;
}

float project_pixel_allmap(float pixel) {
  if(u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT) {
    return pixel * pow(2.0, u_Zoom);
  }
  return pixel;
}

// \u9002\u914D\u7EB9\u7406\u8D34\u56FE\u7684\u7B49\u50CF\u7D20\u5927\u5C0F
float project_pixel_texture(float pixel) {
  // mapbox zoom > 12
  if(u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {
    return pixel * pow(0.5, u_Zoom);
  }

  // amap2 zoom > 12
  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) {
    return pixel * pow(2.0, (19.0 - 3.0 - u_Zoom));
  }

  // amap zoom > 12
  if (u_CoordinateSystem == COORDINATE_SYSTEM_P20_OFFSET) {
    return pixel * pow(0.5, u_Zoom);
  }
  
  // amap zoom < 12
  if (u_CoordinateSystem == COORDINATE_SYSTEM_P20) {
    return pixel * pow(2.0, (20.0 - u_Zoom));
  }
  return pixel * 2.0;
}

// \u5728\u4E0D\u8BBA\u4EC0\u4E48\u5E95\u56FE\u4E0B\u9700\u8981\u7EDF\u4E00\u5904\u7406\u7684\u65F6\u5019\u4F7F\u7528
float project_float_pixel(float pixel) {
  if (u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT || u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {
    // mapbox P20 \u5750\u6807\u7CFB\u4E0B\uFF0C\u4E3A\u4E86\u548C Web \u58A8\u5361\u6258\u5750\u6807\u7CFB\u7EDF\u4E00\uFF0Czoom \u9ED8\u8BA4\u51CF1
    return pixel * pow(2.0, (19.0 - u_Zoom));
  }
  if (u_CoordinateSystem == COORDINATE_SYSTEM_P20 || u_CoordinateSystem == COORDINATE_SYSTEM_P20_OFFSET) {
    // amap P20 \u5750\u6807\u7CFB\u4E0B\uFF0C\u4E3A\u4E86\u548C Web \u58A8\u5361\u6258\u5750\u6807\u7CFB\u7EDF\u4E00\uFF0Czoom \u9ED8\u8BA4\u51CF1
    return pixel * pow(2.0, (19.0 - u_Zoom));
  }
  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) {
    // amap2 P20_2 \u5750\u6807\u7CFB\u4E0B\uFF0C\u4E3A\u4E86\u548C Web \u58A8\u5361\u6258\u5750\u6807\u7CFB\u7EDF\u4E00\uFF0Czoom \u9ED8\u8BA4\u51CF3
    return pixel * pow(2.0, (19.0 - 3.0 - u_Zoom));
  }
  return pixel;
}

float project_pixel(float pixel) {
  if (u_CoordinateSystem == COORDINATE_SYSTEM_P20 || u_CoordinateSystem == COORDINATE_SYSTEM_P20_OFFSET) {
    // amap P20 \u5750\u6807\u7CFB\u4E0B\uFF0C\u4E3A\u4E86\u548C Web \u58A8\u5361\u6258\u5750\u6807\u7CFB\u7EDF\u4E00\uFF0Czoom \u9ED8\u8BA4\u51CF1
    return pixel * pow(2.0, (19.0 - u_Zoom));
  }
  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) {
    // amap2 P20_2 \u5750\u6807\u7CFB\u4E0B\uFF0C\u4E3A\u4E86\u548C Web \u58A8\u5361\u6258\u5750\u6807\u7CFB\u7EDF\u4E00\uFF0Czoom \u9ED8\u8BA4\u51CF3
    return pixel * pow(2.0, (19.0 - 3.0 - u_Zoom));
  }
  return pixel;
}
vec2 project_pixel(vec2 pixel) {
  if (u_CoordinateSystem == COORDINATE_SYSTEM_P20 || u_CoordinateSystem == COORDINATE_SYSTEM_P20_OFFSET) {
    // P20 \u5750\u6807\u7CFB\u4E0B\uFF0C\u4E3A\u4E86\u548C Web \u58A8\u5361\u6258\u5750\u6807\u7CFB\u7EDF\u4E00\uFF0Czoom \u9ED8\u8BA4\u51CF1
    return pixel * pow(2.0, (19.0 - u_Zoom));
  }
  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) {
    // P20_2 \u5750\u6807\u7CFB\u4E0B\uFF0C\u4E3A\u4E86\u548C Web \u58A8\u5361\u6258\u5750\u6807\u7CFB\u7EDF\u4E00\uFF0Czoom \u9ED8\u8BA4\u51CF3
    return pixel * pow(2.0, (19.0 - 3.0 - u_Zoom));
  }
  return pixel * -1.;
}
vec3 project_pixel(vec3 pixel) {
  if (u_CoordinateSystem == COORDINATE_SYSTEM_P20 || u_CoordinateSystem == COORDINATE_SYSTEM_P20_OFFSET) {
    // P20 \u5750\u6807\u7CFB\u4E0B\uFF0C\u4E3A\u4E86\u548C Web \u58A8\u5361\u6258\u5750\u6807\u7CFB\u7EDF\u4E00\uFF0Czoom \u9ED8\u8BA4\u51CF1
    return pixel * pow(2.0, (19.0 - u_Zoom));
  }
  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) {
    // P20_2 \u5750\u6807\u7CFB\u4E0B\uFF0C\u4E3A\u4E86\u548C Web \u58A8\u5361\u6258\u5750\u6807\u7CFB\u7EDF\u4E00\uFF0Czoom \u9ED8\u8BA4\u51CF3
    return pixel * pow(2.0, (19.0 - 3.0 - u_Zoom));
  }
  return pixel * -1.;
}

vec4 project_common_position_to_clipspace(vec4 position, mat4 viewProjectionMatrix, vec4 center) {
  if (u_CoordinateSystem == COORDINATE_SYSTEM_METER_OFFSET ||
    u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {
    // Needs to be divided with project_uCommonUnitsPerMeter
    position.w *= u_PixelsPerMeter.z;
  }

  return viewProjectionMatrix * position + center;
}

// Projects from common space coordinates to clip space
vec4 project_common_position_to_clipspace(vec4 position) {
  return project_common_position_to_clipspace(
    position,
    u_ViewProjectionMatrix,
    u_ViewportCenterProjection
  );
}

vec4 unproject_clipspace_to_position(vec4 clipspacePos, mat4 u_InverseViewProjectionMatrix) {
  vec4 pos = u_InverseViewProjectionMatrix * (clipspacePos - u_ViewportCenterProjection);

  if (u_CoordinateSystem == COORDINATE_SYSTEM_METER_OFFSET ||
    u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {
    // Needs to be divided with project_uCommonUnitsPerMeter
     pos.w = pos.w / u_PixelsPerMeter.z;
  }
  return pos;
}


bool isEqual( float a,  float b) {
    return  a< b + 0.001 && a > b - 0.001;
}`,gw=`/**
 * 2D signed distance field functions
 * @see http://www.iquilezles.org/www/articles/distfunctions2d/distfunctions2d.htm
 */

float ndot(vec2 a, vec2 b ) { return a.x*b.x - a.y*b.y; }

float sdCircle(vec2 p, float r) {
  return length(p) - r;
}

float sdEquilateralTriangle(vec2 p) {
  float k = sqrt(3.0);
  p.x = abs(p.x) - 1.0;
  p.y = p.y + 1.0/k;
  if( p.x + k*p.y > 0.0 ) p = vec2(p.x-k*p.y,-k*p.x-p.y)/2.0;
  p.x -= clamp( p.x, -2.0, 0.0 );
  return -length(p)*sign(p.y);
}

float sdBox(vec2 p, vec2 b) {
  vec2 d = abs(p)-b;
  return length(max(d,vec2(0))) + min(max(d.x,d.y),0.0);
}

float sdPentagon(vec2 p, float r) {
  vec3 k = vec3(0.809016994,0.587785252,0.726542528);
  p.x = abs(p.x);
  p -= 2.0*min(dot(vec2(-k.x,k.y),p),0.0)*vec2(-k.x,k.y);
  p -= 2.0*min(dot(vec2( k.x,k.y),p),0.0)*vec2( k.x,k.y);
  p -= vec2(clamp(p.x,-r*k.z,r*k.z),r);
  return length(p)*sign(p.y);
}

float sdHexagon(vec2 p, float r) {
  vec3 k = vec3(-0.866025404,0.5,0.577350269);
  p = abs(p);
  p -= 2.0*min(dot(k.xy,p),0.0)*k.xy;
  p -= vec2(clamp(p.x, -k.z*r, k.z*r), r);
  return length(p)*sign(p.y);
}

float sdOctogon(vec2 p, float r) {
  vec3 k = vec3(-0.9238795325, 0.3826834323, 0.4142135623 );
  p = abs(p);
  p -= 2.0*min(dot(vec2( k.x,k.y),p),0.0)*vec2( k.x,k.y);
  p -= 2.0*min(dot(vec2(-k.x,k.y),p),0.0)*vec2(-k.x,k.y);
  p -= vec2(clamp(p.x, -k.z*r, k.z*r), r);
  return length(p)*sign(p.y);
}

float sdHexagram(vec2 p, float r) {
  vec4 k=vec4(-0.5,0.8660254038,0.5773502692,1.7320508076);
  p = abs(p);
  p -= 2.0*min(dot(k.xy,p),0.0)*k.xy;
  p -= 2.0*min(dot(k.yx,p),0.0)*k.yx;
  p -= vec2(clamp(p.x,r*k.z,r*k.w),r);
  return length(p)*sign(p.y);
}

float sdRhombus(vec2 p, vec2 b) {
  vec2 q = abs(p);
  float h = clamp((-2.0*ndot(q,b)+ndot(b,b))/dot(b,b),-1.0,1.0);
  float d = length( q - 0.5*b*vec2(1.0-h,1.0+h) );
  return d * sign( q.x*b.y + q.y*b.x - b.x*b.y );
}

float sdVesica(vec2 p, float r, float d) {
  p = abs(p);
  float b = sqrt(r*r-d*d); // can delay this sqrt
  return ((p.y-b)*d>p.x*b)
          ? length(p-vec2(0.0,b))
          : length(p-vec2(-d,0.0))-r;
}
`,yw=`attribute float a_vertexId;

uniform mat4 u_cellTypeLayout;      // \u63CF\u8FF0\u6570\u636E\u7EB9\u7406 cell \u7ED3\u6784\u7684\u77E9\u9635
uniform sampler2D u_dataTexture;    // \u6570\u636E\u7EB9\u7406

bool hasOpacity() { // \u5224\u65AD cell \u4E2D\u662F\u5426\u5B58\u5728 opacity \u7684\u6570\u636E
  return u_cellTypeLayout[1][0] > 0.0 && u_cellTypeLayout[3][3] > 0.0;
}

bool hasStrokeOpacity() { // \u5224\u65AD cell \u4E2D\u662F\u5426\u5B58\u5728 strokeOpacity \u7684\u6570\u636E
  return u_cellTypeLayout[1][1] > 0.0 && u_cellTypeLayout[3][3] > 0.0;
}

bool hasStrokeWidth() { // \u5224\u65AD cell \u4E2D\u662F\u5426\u5B58\u5728 strokeWidth \u7684\u6570\u636E
  return u_cellTypeLayout[1][2] > 0.0 && u_cellTypeLayout[3][3] > 0.0;
}

bool hasStroke() { // \u5224\u65AD cell \u4E2D\u662F\u5426\u5B58\u5728 stroke \u7684\u6570\u636E
  return u_cellTypeLayout[1][3] > 0.0 && u_cellTypeLayout[3][3] > 0.0;
}

bool hasOffsets() { // \u5224\u65AD cell \u4E2D\u662F\u5426\u5B58\u5728 offsets \u7684\u6570\u636E
  return u_cellTypeLayout[2][0] > 0.0 && u_cellTypeLayout[3][3] > 0.0;
}

bool hasThetaOffset() { // \u5224\u65AD cell \u4E2D\u662F\u5426\u5B58\u5728 thetaOffset \u7684\u6570\u636E
  return u_cellTypeLayout[2][1] > 0.0 && u_cellTypeLayout[3][3] > 0.0;
}

// \u6839\u636E\u5750\u6807\u4F4D\u7F6E\u5148\u662F\u8BA1\u7B97 uv \uFF0C\u7136\u540E\u6839\u636E uv \u4ECE\u6570\u636E\u7EB9\u7406\u4E2D\u53D6\u503C
float pos2value(vec2 pos, float columnWidth, float rowHeight) {
  float u = (pos.r - 1.0) * columnWidth + columnWidth/2.0;
  float v = 1.0 - ((pos.g - 1.0) * rowHeight + rowHeight/2.0);
  return texture2D(u_dataTexture, vec2(u, v)).r;
}

/*
  currentRow \u5F53\u524D\u884C
  currentColumn \u5F53\u524D\u5217
  columnCount \u6709\u591A\u5C11\u5217
  nextStep \u9700\u8981\u8BA1\u7B97\u5F53\u524D cell \u540E\u7684\u7B2C\u51E0\u4E2A cell \uFF08\u5F53\u524D cell \u5219 nextStep = 0\uFF09
*/
vec2 nextPos(float currentRow, float currentColumn, float columnCount, float nextStep) {
  float nextColumn = currentColumn;
  float nextRow = currentRow;
  if(currentColumn + nextStep <= columnCount){
    nextColumn = currentColumn + nextStep;
  } else {
    nextColumn = mod(currentColumn + nextStep, columnCount); // \u4E0D\u4F1A\u51FA\u73B0\u8DE8\u4E24\u884C
    nextRow = currentRow + 1.0;
  }
  return vec2(nextColumn, nextRow);
}

// \u8BA1\u7B97\u5F53\u524D\u5355\u4E2A cell \u7684\u5927\u5C0F
float calCellCount() { 
  //   u_cellTypeLayout
  //   cal_height, WIDTH, 0.0, 0.0, // rowCount columnCount - \u51E0\u884C\u51E0\u5217
  //   1.0, 1.0, 1.0, 0.0, // opacity strokeOpacity strokeWidth stroke - 1.0 \u8868\u793A\u6709\u6570\u636E\u6620\u5C04\u30010.0 \u8868\u793A\u6CA1\u6709
  //   1.0, 1.0, 0.0, 0.0, // offsets thetaOffset
  //   0.0, 0.0, 0.0, 0.0
  
  return  u_cellTypeLayout[1][0] +        // opacity
          u_cellTypeLayout[1][1] +        // strokeOpacity
          u_cellTypeLayout[1][2] +        // strokeWidth
          u_cellTypeLayout[1][3] * 4.0 +  // stroke
          u_cellTypeLayout[2][0] * 2.0 +  // offsets
          u_cellTypeLayout[2][1];         // thetaOffset
}`,_w=`
// \u8BA1\u7B97 opacity \u548C\u6807\u793A\u5728 cell \u4E2D\u53D6\u503C\u4F4D\u7F6E\u7684\u504F\u79FB\u91CF textureOffset
vec2 calOpacityAndOffset(float cellCurrentRow, float cellCurrentColumn, float columnCount, float textureOffset, float columnWidth, float rowHeight) {
  if(!hasOpacity()) { // \u6570\u636E\u7EB9\u7406\u4E2D\u4E0D\u5B58\u5728 opacity \u7684\u65F6\u5019\u53D6\u9ED8\u8BA4\u503C\uFF08\u7528\u6237\u5728 style \u4E2D\u4F20\u5165\u7684\u662F\u5E38\u91CF\uFF09
    return vec2(u_opacity, textureOffset);
  } else {
    vec2 valuePos = nextPos(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset);
    float textureOpacity = pos2value(valuePos, columnWidth, rowHeight);
    return vec2(textureOpacity, textureOffset + 1.0);
  }
}
`,xw=`
// \u8BA1\u7B97 strokeOpaicty \u548C\u6807\u793A\u5728 cell \u4E2D\u53D6\u503C\u4F4D\u7F6E\u7684\u504F\u79FB\u91CF textureOffset
vec2 calStrokeOpacityAndOffset(float cellCurrentRow, float cellCurrentColumn, float columnCount, float textureOffset, float columnWidth, float rowHeight) {
  if(!hasStrokeOpacity()) {
    return vec2(u_stroke_opacity, textureOffset);
  } else {
    vec2 valuePos = nextPos(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset);
    float textureStrokeOpacity = pos2value(valuePos, columnWidth, rowHeight);
    return vec2(textureStrokeOpacity, textureOffset + 1.0);
  }
}
`,bw=`
// \u8BA1\u7B97 strokeWidth \u548C\u6807\u793A\u5728 cell \u4E2D\u53D6\u503C\u4F4D\u7F6E\u7684\u504F\u79FB\u91CF textureOffset
vec2 calStrokeWidthAndOffset(float cellCurrentRow, float cellCurrentColumn, float columnCount, float textureOffset, float columnWidth, float rowHeight) {
  if(!hasStrokeWidth()) {
    return vec2(u_stroke_width, textureOffset);
  } else {
    vec2 valuePos = nextPos(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset);
    float textureStrokeWidth = pos2value(valuePos, columnWidth, rowHeight);
    return vec2(textureStrokeWidth, textureOffset + 1.0);
  }
}
`,Ew=`
// \u8BA1\u7B97 thetaOffset \u548C\u6807\u793A\u5728 cell \u4E2D\u53D6\u503C\u4F4D\u7F6E\u7684\u504F\u79FB\u91CF textureOffset
vec2 calThetaOffsetAndOffset(float cellCurrentRow, float cellCurrentColumn, float columnCount, float textureOffset, float columnWidth, float rowHeight) {
  if(!hasThetaOffset()) { // \u6570\u636E\u7EB9\u7406\u4E2D\u4E0D\u5B58\u5728 thetaOffset \u7684\u65F6\u5019\u53D6\u9ED8\u8BA4\u503C\uFF08\u7528\u6237\u5728 style \u4E2D\u4F20\u5165\u7684\u662F\u5E38\u91CF\uFF09
    return vec2(u_thetaOffset, textureOffset);
  } else {
    vec2 valuePos = nextPos(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset);
    float textureThetaOffset = pos2value(valuePos, columnWidth, rowHeight);
    return vec2(textureThetaOffset, textureOffset + 1.0);
  }
}
`,Sw=/precision\s+(high|low|medium)p\s+float/,ww=`#ifdef GL_FRAGMENT_PRECISION_HIGH
 precision highp float;
 #else
 precision mediump float;
#endif
`,Aw=/#pragma include (["^+"]?["[a-zA-Z_0-9](.*)"]*?)/g,Cw=(u1=(0,Ki.b2)(),u1(l1=function(){function e(){(0,Ur.Z)(this,e),(0,He.Z)(this,"moduleCache",{}),(0,He.Z)(this,"rawContentCache",{})}return(0,Jr.Z)(e,[{key:"registerBuiltinModules",value:function(){this.destroy(),this.registerModule("common",{vs:c1,fs:c1}),this.registerModule("decode",{vs:cw,fs:""}),this.registerModule("projection",{vs:mw,fs:""}),this.registerModule("project",{vs:vw,fs:""}),this.registerModule("sdf_2d",{vs:"",fs:gw}),this.registerModule("lighting",{vs:pw,fs:""}),this.registerModule("light",{vs:fw,fs:""}),this.registerModule("picking",{vs:dw,fs:hw}),this.registerModule("styleMapping",{vs:yw,fs:""}),this.registerModule("styleMappingCalThetaOffset",{vs:Ew,fs:""}),this.registerModule("styleMappingCalOpacity",{vs:_w,fs:""}),this.registerModule("styleMappingCalStrokeOpacity",{vs:xw,fs:""}),this.registerModule("styleMappingCalStrokeWidth",{vs:bw,fs:""})}},{key:"registerModule",value:function(t,n){if(!this.rawContentCache[t]){var r=n.vs,o=n.fs,u=n.uniforms,f=s1(r),g=f.content,x=f.uniforms,I=s1(o),P=I.content,G=I.uniforms;this.rawContentCache[t]={fs:P,uniforms:(0,oe.Z)((0,oe.Z)((0,oe.Z)({},x),G),u),vs:g}}}},{key:"destroy",value:function(){this.moduleCache={},this.rawContentCache={}}},{key:"getModule",value:function(t){var n=this;if(this.moduleCache[t])return this.moduleCache[t];var r=this.rawContentCache[t].vs,o=this.rawContentCache[t].fs,u=this.processModule(r,[],"vs"),f=u.content,g=u.includeList,x=this.processModule(o,[],"fs"),I=x.content,P=x.includeList,G=I,$=(0,Wr.uniq)(g.concat(P).concat(t)).reduce(function(Ee,Se){return(0,oe.Z)((0,oe.Z)({},Ee),n.rawContentCache[Se].uniforms)},{});return Sw.test(I)||(G=ww+I),this.moduleCache[t]={fs:G.trim(),uniforms:$,vs:f.trim()},this.moduleCache[t]}},{key:"processModule",value:function(t,n,r){var o=this,u=t.replace(Aw,function(f,g){var x=g.split(" "),I=x[0].replace(/"/g,"");if(n.indexOf(I)>-1)return"";var P=o.rawContentCache[I][r];n.push(I);var G=o.processModule(P,n,r),$=G.content;return $});return{content:u,includeList:n}}}]),e}())||l1);function Tw(e,i){for(;!Object.prototype.hasOwnProperty.call(e,i)&&(e=(0,rr.Z)(e),e!==null););return e}function zu(){return typeof Reflect!="undefined"&&Reflect.get?zu=Reflect.get.bind():zu=function(i,t,n){var r=Tw(i,t);if(!!r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?i:n):o.value}},zu.apply(this,arguments)}var Xd;(function(e){e.Normal="normal",e.PostProcessing="post-processing"})(Xd||(Xd={}));var f1,p1,gm=(f1=(0,Ki.b2)(),f1(p1=function(){function e(){(0,Ur.Z)(this,e),(0,He.Z)(this,"shaderModuleService",void 0),(0,He.Z)(this,"rendererService",void 0),(0,He.Z)(this,"cameraService",void 0),(0,He.Z)(this,"mapService",void 0),(0,He.Z)(this,"interactionService",void 0),(0,He.Z)(this,"layerService",void 0),(0,He.Z)(this,"config",void 0)}return(0,Jr.Z)(e,[{key:"getName",value:function(){return""}},{key:"getType",value:function(){return Xd.Normal}},{key:"init",value:function(t,n){this.config=n,this.rendererService=t.getContainer().get(Ln.IRendererService),this.cameraService=t.getContainer().get(Ln.ICameraService),this.mapService=t.getContainer().get(Ln.IMapService),this.interactionService=t.getContainer().get(Ln.IInteractionService),this.layerService=t.getContainer().get(Ln.ILayerService),this.shaderModuleService=t.getContainer().get(Ln.IShaderModuleService)}},{key:"render",value:function(t){}}]),e}())||p1),h1,d1;function Mw(e){var i=Iw();return function(){var n=(0,rr.Z)(e),r;if(i){var o=(0,rr.Z)(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return(0,jn.Z)(this,r)}}function Iw(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var Ow=(h1=(0,Ki.b2)(),h1(d1=function(e){(0,ui.Z)(t,e);var i=Mw(t);function t(){return(0,Ur.Z)(this,t),i.apply(this,arguments)}return(0,Jr.Z)(t,[{key:"getName",value:function(){return"clear"}},{key:"init",value:function(r,o){zu((0,rr.Z)(t.prototype),"init",this).call(this,r,o)}},{key:"render",value:function(){this.rendererService.clear({color:[0,0,0,0],depth:1,framebuffer:null})}}]),t}(gm))||d1),v1,m1,g1,Rg,y1;function Rw(e,i){var t=typeof Symbol!="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(!t){if(Array.isArray(e)||(t=Pw(e))||i&&e&&typeof e.length=="number"){t&&(e=t);var n=0,r=function(){};return{s:r,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(x){throw x},f:r}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var o=!0,u=!1,f;return{s:function(){t=t.call(e)},n:function(){var x=t.next();return o=x.done,x},e:function(x){u=!0,f=x},f:function(){try{!o&&t.return!=null&&t.return()}finally{if(u)throw f}}}}function Pw(e,i){if(!!e){if(typeof e=="string")return _1(e,i);var t=Object.prototype.toString.call(e).slice(8,-1);if(t==="Object"&&e.constructor&&(t=e.constructor.name),t==="Map"||t==="Set")return Array.from(e);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return _1(e,i)}}function _1(e,i){(i==null||i>e.length)&&(i=e.length);for(var t=0,n=new Array(i);t<i;t++)n[t]=e[t];return n}var kw=(v1=(0,Ki.b2)(),m1=(0,Ki.f3)(Ln.IPostProcessor),v1(g1=(Rg=function(){function e(){(0,Ur.Z)(this,e),(0,He.Z)(this,"passes",[]),Bs(this,"postProcessor",y1,this),(0,He.Z)(this,"layer",void 0),(0,He.Z)(this,"renderFlag",void 0),(0,He.Z)(this,"width",0),(0,He.Z)(this,"height",0)}return(0,Jr.Z)(e,[{key:"setLayer",value:function(t){this.layer=t}},{key:"setRenderFlag",value:function(t){this.renderFlag=t}},{key:"getRenderFlag",value:function(){return this.renderFlag}},{key:"getPostProcessor",value:function(){return this.postProcessor}},{key:"render",value:function(){var i=(0,An.Z)(Nt().mark(function n(){var r,o,u;return Nt().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:r=Rw(this.passes),g.prev=1,r.s();case 3:if((o=r.n()).done){g.next=9;break}return u=o.value,g.next=7,u.render(this.layer);case 7:g.next=3;break;case 9:g.next=14;break;case 11:g.prev=11,g.t0=g.catch(1),r.e(g.t0);case 14:return g.prev=14,r.f(),g.finish(14);case 17:return g.next=19,this.postProcessor.render(this.layer);case 19:case"end":return g.stop()}},n,this,[[1,11,14,17]])}));function t(){return i.apply(this,arguments)}return t}()},{key:"resize",value:function(t,n){(this.width!==t||this.height!==n)&&(this.postProcessor.resize(t,n),this.width=t,this.height=n)}},{key:"add",value:function(t,n){t.getType()===Xd.PostProcessing?this.postProcessor.add(t,this.layer,n):(t.init(this.layer,n),this.passes.push(t))}},{key:"insert",value:function(t,n,r){t.init(this.layer,n),this.passes.splice(r,0,t)}},{key:"destroy",value:function(){this.passes.length=0}}]),e}(),y1=Ds(Rg.prototype,"postProcessor",[m1],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Rg))||g1),x1,b1;function Lw(e){var i=Dw();return function(){var n=(0,rr.Z)(e),r;if(i){var o=(0,rr.Z)(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return(0,jn.Z)(this,r)}}function Dw(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var Fw=(x1=(0,Ki.b2)(),x1(b1=function(e){(0,ui.Z)(t,e);var i=Lw(t);function t(){var n;(0,Ur.Z)(this,t);for(var r=arguments.length,o=new Array(r),u=0;u<r;u++)o[u]=arguments[u];return n=i.call.apply(i,[this].concat(o)),(0,He.Z)((0,er.Z)(n),"pickingFBO",void 0),(0,He.Z)((0,er.Z)(n),"layer",void 0),(0,He.Z)((0,er.Z)(n),"width",0),(0,He.Z)((0,er.Z)(n),"height",0),(0,He.Z)((0,er.Z)(n),"alreadyInRendering",!1),(0,He.Z)((0,er.Z)(n),"pickFromPickingFBO",function(f){var g=f.x,x=f.y,I=f.lngLat,P=f.type;if(!(!n.layer.isVisible()||!n.layer.needPick(P))){var G=n.rendererService,$=G.getViewportSize,Ee=G.readPixels,Se=G.useFramebuffer,Re=$(),Ye=Re.width,St=Re.height,vt=n.layer.getLayerConfig(),Ut=vt.enableHighlight,Kt=vt.enableSelect,Tr=g*ji,on=x*ji;if(!(Tr>Ye||Tr<0||on>St||on<0)){var dn;Se(n.pickingFBO,function(){var vn;if(dn=Ee({x:Math.round(Tr),y:Math.round(St-(x+1)*ji),width:1,height:1,data:new Uint8Array(1*1*4),framebuffer:n.pickingFBO}),dn[0]!==0||dn[1]!==0||dn[2]!==0){var si=es(dn),ai=n.layer.getSource().getFeatureById(si),Hi={x:g,y:x,type:P,lngLat:I,featureId:si,feature:ai};ai&&(n.layer.setCurrentPickId(si),n.triggerHoverOnLayer(Hi))}else{var wa={x:g,y:x,lngLat:I,type:n.layer.getCurrentPickId()===null?"un"+P:"mouseout",featureId:null,feature:null};n.triggerHoverOnLayer((0,oe.Z)((0,oe.Z)({},wa),{},{type:"unpick"})),n.triggerHoverOnLayer(wa),n.layer.setCurrentPickId(null)}Ut&&n.highlightPickedFeature(dn),Kt&&P==="click"&&((vn=dn)===null||vn===void 0?void 0:vn.toString())!==[0,0,0,0].toString()&&n.selectFeature(dn)})}}}),n}return(0,Jr.Z)(t,[{key:"getType",value:function(){return Xd.Normal}},{key:"getName",value:function(){return"pixelPicking"}},{key:"init",value:function(r,o){zu((0,rr.Z)(t.prototype),"init",this).call(this,r,o),this.layer=r;var u=this.rendererService,f=u.createTexture2D,g=u.createFramebuffer,x=u.getViewportSize,I=x(),P=I.width,G=I.height;this.pickingFBO=g({color:f({width:P,height:G,wrapS:$e.CLAMP_TO_EDGE,wrapT:$e.CLAMP_TO_EDGE})}),this.interactionService.on(Pe.Hover,this.pickFromPickingFBO),this.interactionService.on(Pe.Select,this.selectFeatureHandle.bind(this)),this.interactionService.on(Pe.Active,this.highlightFeatureHandle.bind(this))}},{key:"render",value:function(r){var o=this;if(!this.alreadyInRendering){var u=this.rendererService,f=u.getViewportSize,g=u.useFramebuffer,x=u.clear,I=f(),P=I.width,G=I.height;this.alreadyInRendering=!0,(this.width!==P||this.height!==G)&&(this.pickingFBO.resize({width:P,height:G}),this.width=P,this.height=G),g(this.pickingFBO,function(){x({framebuffer:o.pickingFBO,color:[0,0,0,0],stencil:0,depth:1});var $=o.layer.multiPassRenderer.getRenderFlag();o.layer.multiPassRenderer.setRenderFlag(!1),r.hooks.beforePickingEncode.call(),r.render(),r.hooks.afterPickingEncode.call(),o.layer.multiPassRenderer.setRenderFlag($),o.alreadyInRendering=!1})}}},{key:"triggerHoverOnLayer",value:function(r){this.layer.emit(r.type,r)}},{key:"highlightPickedFeature",value:function(r){var o=(0,Mr.Z)(r,3),u=o[0],f=o[1],g=o[2];this.layer.hooks.beforeHighlight.call([u,f,g]),this.layerService.renderLayers()}},{key:"selectFeature",value:function(r){var o=(0,Mr.Z)(r,3),u=o[0],f=o[1],g=o[2];this.layer.hooks.beforeSelect.call([u,f,g]),this.layerService.renderLayers()}},{key:"selectFeatureHandle",value:function(r){var o=r.featureId,u=ru(o);this.selectFeature(new Uint8Array(u))}},{key:"highlightFeatureHandle",value:function(r){var o=r.featureId,u=ru(o);this.highlightPickedFeature(new Uint8Array(u))}}]),t}(gm))||b1),E1,S1,w1,Pg,A1,Nw=`attribute vec2 a_Position;

varying vec2 v_UV;

void main() {
  v_UV = 0.5 * (a_Position + 1.0);
  gl_Position = vec4(a_Position, 0., 1.);
}`,Ad=(E1=(0,Ki.b2)(),S1=(0,Ki.f3)(Ln.IShaderModuleService),E1(w1=(Pg=function(){function e(){(0,Ur.Z)(this,e),Bs(this,"shaderModuleService",A1,this),(0,He.Z)(this,"rendererService",void 0),(0,He.Z)(this,"config",void 0),(0,He.Z)(this,"quad",Nw),(0,He.Z)(this,"enabled",!0),(0,He.Z)(this,"renderToScreen",!1),(0,He.Z)(this,"model",void 0),(0,He.Z)(this,"name",void 0),(0,He.Z)(this,"optionsToUpdate",{})}return(0,Jr.Z)(e,[{key:"getName",value:function(){return this.name}},{key:"setName",value:function(t){this.name=t}},{key:"getType",value:function(){return Xd.PostProcessing}},{key:"init",value:function(t,n){this.config=n,this.rendererService=t.getContainer().get(Ln.IRendererService),this.shaderModuleService=t.getContainer().get(Ln.IShaderModuleService);var r=this.rendererService,o=r.createAttribute,u=r.createBuffer,f=r.createModel,g=this.setupShaders(),x=g.vs,I=g.fs,P=g.uniforms;this.model=f({vs:x,fs:I,attributes:{a_Position:o({buffer:u({data:[-4,-4,4,-4,0,4],type:$e.FLOAT}),size:2})},uniforms:(0,oe.Z)((0,oe.Z)({u_Texture:null},P),this.config&&this.convertOptionsToUniforms(this.config)),depth:{enable:!1},count:3,blend:{enable:this.getName()==="copy"}})}},{key:"render",value:function(t,n){var r=this,o=t.multiPassRenderer.getPostProcessor(),u=this.rendererService,f=u.useFramebuffer,g=u.getViewportSize,x=u.clear,I=g(),P=I.width,G=I.height;f(this.renderToScreen?null:o.getWriteFBO(),function(){x({framebuffer:o.getWriteFBO(),color:[0,0,0,0],depth:1,stencil:0});var $=(0,oe.Z)({u_BloomFinal:0,u_Texture:o.getReadFBO(),u_ViewportSize:[P,G]},r.convertOptionsToUniforms(r.optionsToUpdate));n&&($.u_BloomFinal=1,$.u_Texture2=n),r.model.draw({uniforms:$})})}},{key:"isEnabled",value:function(){return this.enabled}},{key:"setEnabled",value:function(t){this.enabled=t}},{key:"setRenderToScreen",value:function(t){this.renderToScreen=t}},{key:"updateOptions",value:function(t){this.optionsToUpdate=(0,oe.Z)((0,oe.Z)({},this.optionsToUpdate),t)}},{key:"setupShaders",value:function(){throw new Error("Method not implemented.")}},{key:"convertOptionsToUniforms",value:function(t){var n={};return Object.keys(t).forEach(function(r){(0,Wr.isNil)(t[r])||(n["u_".concat((0,Wr.upperFirst)((0,Wr.camelCase)(r)))]=t[r])}),n}}]),e}(),A1=Ds(Pg.prototype,"shaderModuleService",[S1],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Pg))||w1),C1,T1;function Bw(e){var i=zw();return function(){var n=(0,rr.Z)(e),r;if(i){var o=(0,rr.Z)(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return(0,jn.Z)(this,r)}}function zw(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var Uw=`varying vec2 v_UV;

uniform float u_BloomFinal: 0.0;
uniform sampler2D u_Texture;
uniform sampler2D u_Texture2;

uniform vec2 u_ViewportSize: [1.0, 1.0];
uniform float u_radius: 5.0;
uniform float u_intensity: 0.3;
uniform float u_baseRadio: 0.5;

// https://github.com/Jam3/glsl-fast-gaussian-blur/blob/master/9.glsl
vec4 blur9(sampler2D image, vec2 uv, vec2 resolution, vec2 direction) {
  vec4 color = vec4(0.0);
  vec2 off1 = vec2(1.3846153846) * direction;
  vec2 off2 = vec2(3.2307692308) * direction;
  color += texture2D(image, uv) * 0.2270270270;
  color += texture2D(image, uv + (off1 / resolution)) * 0.3162162162;
  color += texture2D(image, uv - (off1 / resolution)) * 0.3162162162;
  color += texture2D(image, uv + (off2 / resolution)) * 0.0702702703;
  color += texture2D(image, uv - (off2 / resolution)) * 0.0702702703;
  return color;
}

float luminance(vec4 color) {
  return  0.2125 * color.r + 0.7154 * color.g + 0.0721 * color.b;
}

void main() {
  // vec4 baseColor = texture2D(u_Texture, v_UV);

  float r = sqrt(u_radius);

  vec4 c1 = blur9(u_Texture, v_UV, u_ViewportSize, vec2(u_radius, 0.0));
  // c1 *= luminance(c1);
  vec4 c2 = blur9(u_Texture, v_UV, u_ViewportSize, vec2(0.0, u_radius));
  // c2 *= luminance(c2);
  vec4 c3 = blur9(u_Texture, v_UV, u_ViewportSize, vec2(r, r));
  // c3 *= luminance(c3);
  vec4 c4 = blur9(u_Texture, v_UV, u_ViewportSize, vec2(r, -r));
  // c4 *= luminance(c4);
  vec4 inbloomColor = (c1 + c2 + c3 + c4) * 0.25;

  // float lum = luminance(inbloomColor);
  // inbloomColor.rgb *= lum;

  if(u_BloomFinal > 0.0) {
    vec4 baseColor = texture2D(u_Texture2, v_UV);
    float baselum = luminance(baseColor);
    gl_FragColor = mix(inbloomColor, baseColor, u_baseRadio);
    if(baselum <= 0.2) {
      gl_FragColor = inbloomColor * u_intensity;
    }
  } else {
    gl_FragColor = inbloomColor;
  }
}`,Zw=`attribute vec2 a_Position;

varying vec2 v_UV;

void main() {
  v_UV = 0.5 * (a_Position + 1.0);
  gl_Position = vec4(a_Position, 0., 1.);
}`,jw=(C1=(0,Ki.b2)(),C1(T1=function(e){(0,ui.Z)(t,e);var i=Bw(t);function t(){return(0,Ur.Z)(this,t),i.apply(this,arguments)}return(0,Jr.Z)(t,[{key:"setupShaders",value:function(){this.shaderModuleService.registerModule("blur-pass",{vs:Zw,fs:Uw});var r=this.shaderModuleService.getModule("blur-pass"),o=r.vs,u=r.fs,f=r.uniforms,g=this.rendererService.getViewportSize(),x=g.width,I=g.height;return{vs:o,fs:u,uniforms:(0,oe.Z)((0,oe.Z)({},f),{},{u_ViewportSize:[x,I]})}}},{key:"convertOptionsToUniforms",value:function(r){var o={};return(0,Wr.isNil)(r.bloomRadius)||(o.u_radius=r.bloomRadius),(0,Wr.isNil)(r.bloomIntensity)||(o.u_intensity=r.bloomIntensity),(0,Wr.isNil)(r.bloomBaseRadio)||(o.u_baseRadio=r.bloomBaseRadio),o}}]),t}(Ad))||T1),M1,I1;function Vw(e){var i=Gw();return function(){var n=(0,rr.Z)(e),r;if(i){var o=(0,rr.Z)(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return(0,jn.Z)(this,r)}}function Gw(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var Hw=`varying vec2 v_UV;

uniform sampler2D u_Texture;

uniform vec2 u_ViewportSize: [1.0, 1.0];
uniform vec2 u_BlurDir: [1.0, 0.0];

// https://github.com/Jam3/glsl-fast-gaussian-blur/blob/master/9.glsl
vec4 blur9(sampler2D image, vec2 uv, vec2 resolution, vec2 direction) {
  vec4 color = vec4(0.0);
  vec2 off1 = vec2(1.3846153846) * direction;
  vec2 off2 = vec2(3.2307692308) * direction;
  color += texture2D(image, uv) * 0.2270270270;
  color += texture2D(image, uv + (off1 / resolution)) * 0.3162162162;
  color += texture2D(image, uv - (off1 / resolution)) * 0.3162162162;
  color += texture2D(image, uv + (off2 / resolution)) * 0.0702702703;
  color += texture2D(image, uv - (off2 / resolution)) * 0.0702702703;
  return color;
}

void main() {
  gl_FragColor = blur9(u_Texture, v_UV, u_ViewportSize, u_BlurDir);
}`,Ww=`attribute vec2 a_Position;

varying vec2 v_UV;

void main() {
  v_UV = 0.5 * (a_Position + 1.0);
  gl_Position = vec4(a_Position, 0., 1.);
}`,$w=(M1=(0,Ki.b2)(),M1(I1=function(e){(0,ui.Z)(t,e);var i=Vw(t);function t(){return(0,Ur.Z)(this,t),i.apply(this,arguments)}return(0,Jr.Z)(t,[{key:"setupShaders",value:function(){this.shaderModuleService.registerModule("blur-pass",{vs:Ww,fs:Hw});var r=this.shaderModuleService.getModule("blur-pass"),o=r.vs,u=r.fs,f=r.uniforms,g=this.rendererService.getViewportSize(),x=g.width,I=g.height;return{vs:o,fs:u,uniforms:(0,oe.Z)((0,oe.Z)({},f),{},{u_ViewportSize:[x,I]})}}},{key:"convertOptionsToUniforms",value:function(r){var o={};return(0,Wr.isNil)(r.blurRadius)||(o.u_BlurDir=[r.blurRadius,0]),o}}]),t}(Ad))||I1),O1,R1;function Xw(e){var i=Yw();return function(){var n=(0,rr.Z)(e),r;if(i){var o=(0,rr.Z)(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return(0,jn.Z)(this,r)}}function Yw(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var Kw=`varying vec2 v_UV;

uniform sampler2D u_Texture;

uniform vec2 u_ViewportSize: [1.0, 1.0];
uniform vec2 u_BlurDir: [1.0, 0.0];

// https://github.com/Jam3/glsl-fast-gaussian-blur/blob/master/9.glsl
vec4 blur9(sampler2D image, vec2 uv, vec2 resolution, vec2 direction) {
  vec4 color = vec4(0.0);
  vec2 off1 = vec2(1.3846153846) * direction;
  vec2 off2 = vec2(3.2307692308) * direction;
  color += texture2D(image, uv) * 0.2270270270;
  color += texture2D(image, uv + (off1 / resolution)) * 0.3162162162;
  color += texture2D(image, uv - (off1 / resolution)) * 0.3162162162;
  color += texture2D(image, uv + (off2 / resolution)) * 0.0702702703;
  color += texture2D(image, uv - (off2 / resolution)) * 0.0702702703;
  return color;
}

void main() {
  gl_FragColor = blur9(u_Texture, v_UV, u_ViewportSize, u_BlurDir);
}`,Qw=`attribute vec2 a_Position;

varying vec2 v_UV;

void main() {
  v_UV = 0.5 * (a_Position + 1.0);
  gl_Position = vec4(a_Position, 0., 1.);
}`,Jw=(O1=(0,Ki.b2)(),O1(R1=function(e){(0,ui.Z)(t,e);var i=Xw(t);function t(){return(0,Ur.Z)(this,t),i.apply(this,arguments)}return(0,Jr.Z)(t,[{key:"setupShaders",value:function(){this.shaderModuleService.registerModule("blur-pass",{vs:Qw,fs:Kw});var r=this.shaderModuleService.getModule("blur-pass"),o=r.vs,u=r.fs,f=r.uniforms,g=this.rendererService.getViewportSize(),x=g.width,I=g.height;return{vs:o,fs:u,uniforms:(0,oe.Z)((0,oe.Z)({},f),{},{u_ViewportSize:[x,I]})}}},{key:"convertOptionsToUniforms",value:function(r){var o={};return(0,Wr.isNil)(r.blurRadius)||(o.u_BlurDir=[0,r.blurRadius]),o}}]),t}(Ad))||R1),P1,k1;function qw(e){var i=eA();return function(){var n=(0,rr.Z)(e),r;if(i){var o=(0,rr.Z)(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return(0,jn.Z)(this,r)}}function eA(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var tA=`varying vec2 v_UV;

uniform sampler2D u_Texture;
uniform vec2 u_ViewportSize: [1.0, 1.0];
uniform vec2 u_Center : [0.5, 0.5];
uniform float u_Angle : 0;
uniform float u_Size : 8;

#pragma include "common"

float scale = PI / u_Size;

float pattern(float u_Angle, vec2 texSize, vec2 texCoord) {
  float s = sin(u_Angle), c = cos(u_Angle);
  vec2 tex = texCoord * texSize - u_Center * texSize;
  vec2 point = vec2(
    c * tex.x - s * tex.y,
    s * tex.x + c * tex.y
  ) * scale;
  return (sin(point.x) * sin(point.y)) * 4.0;
}

// https://github.com/evanw/glfx.js/blob/master/src/filters/fun/colorhalftone.js
vec4 colorHalftone_filterColor(vec4 color, vec2 texSize, vec2 texCoord) {
  vec3 cmy = 1.0 - color.rgb;
  float k = min(cmy.x, min(cmy.y, cmy.z));
  cmy = (cmy - k) / (1.0 - k);
  cmy = clamp(
    cmy * 10.0 - 3.0 + vec3(
      pattern(u_Angle + 0.26179, texSize, texCoord),
      pattern(u_Angle + 1.30899, texSize, texCoord),
      pattern(u_Angle, texSize, texCoord)
    ),
    0.0,
    1.0
  );
  k = clamp(k * 10.0 - 5.0 + pattern(u_Angle + 0.78539, texSize, texCoord), 0.0, 1.0);
  return vec4(1.0 - cmy - k, color.a);
}

void main() {
  gl_FragColor = vec4(texture2D(u_Texture, v_UV));
  gl_FragColor = colorHalftone_filterColor(gl_FragColor, u_ViewportSize, v_UV);
}`,rA=`attribute vec2 a_Position;

varying vec2 v_UV;

void main() {
  v_UV = 0.5 * (a_Position + 1.0);
  gl_Position = vec4(a_Position, 0., 1.);
}`,nA=(P1=(0,Ki.b2)(),P1(k1=function(e){(0,ui.Z)(t,e);var i=qw(t);function t(){return(0,Ur.Z)(this,t),i.apply(this,arguments)}return(0,Jr.Z)(t,[{key:"setupShaders",value:function(){this.shaderModuleService.registerModule("colorhalftone-pass",{vs:rA,fs:tA});var r=this.shaderModuleService.getModule("colorhalftone-pass"),o=r.vs,u=r.fs,f=r.uniforms,g=this.rendererService.getViewportSize(),x=g.width,I=g.height;return{vs:o,fs:u,uniforms:(0,oe.Z)((0,oe.Z)({},f),{},{u_ViewportSize:[x,I]})}}}]),t}(Ad))||k1),L1,D1;function iA(e){var i=aA();return function(){var n=(0,rr.Z)(e),r;if(i){var o=(0,rr.Z)(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return(0,jn.Z)(this,r)}}function aA(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var oA=`varying vec2 v_UV;

uniform sampler2D u_Texture;

void main() {
  gl_FragColor = vec4(texture2D(u_Texture, v_UV));
}`,sA=`attribute vec2 a_Position;

varying vec2 v_UV;

void main() {
  v_UV = 0.5 * (a_Position + 1.0);
  gl_Position = vec4(a_Position, 0., 1.);
}`,uA=(L1=(0,Ki.b2)(),L1(D1=function(e){(0,ui.Z)(t,e);var i=iA(t);function t(){return(0,Ur.Z)(this,t),i.apply(this,arguments)}return(0,Jr.Z)(t,[{key:"setupShaders",value:function(){return this.shaderModuleService.registerModule("copy-pass",{vs:sA,fs:oA}),this.shaderModuleService.getModule("copy-pass")}}]),t}(Ad))||D1),F1,N1;function lA(e){var i=cA();return function(){var n=(0,rr.Z)(e),r;if(i){var o=(0,rr.Z)(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return(0,jn.Z)(this,r)}}function cA(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var fA=`varying vec2 v_UV;

uniform sampler2D u_Texture;
uniform vec2 u_ViewportSize: [1.0, 1.0];
uniform vec2 u_Center : [0.5, 0.5];
uniform float u_Scale : 10;

// https://github.com/evanw/glfx.js/blob/master/src/filters/fun/hexagonalpixelate.js
vec4 hexagonalPixelate_sampleColor(sampler2D texture, vec2 texSize, vec2 texCoord) {
  vec2 tex = (texCoord * texSize - u_Center * texSize) / u_Scale;
  tex.y /= 0.866025404;
  tex.x -= tex.y * 0.5;
  vec2 a;
  if (tex.x + tex.y - floor(tex.x) - floor(tex.y) < 1.0) {
    a = vec2(floor(tex.x), floor(tex.y));
  }
  else a = vec2(ceil(tex.x), ceil(tex.y));
  vec2 b = vec2(ceil(tex.x), floor(tex.y));
  vec2 c = vec2(floor(tex.x), ceil(tex.y));
  vec3 TEX = vec3(tex.x, tex.y, 1.0 - tex.x - tex.y);
  vec3 A = vec3(a.x, a.y, 1.0 - a.x - a.y);
  vec3 B = vec3(b.x, b.y, 1.0 - b.x - b.y);
  vec3 C = vec3(c.x, c.y, 1.0 - c.x - c.y);
  float alen = length(TEX - A);
  float blen = length(TEX - B);
  float clen = length(TEX - C);
  vec2 choice;
  if (alen < blen) {
    if (alen < clen) choice = a;
    else choice = c;
  } else {
    if (blen < clen) choice = b;
    else choice = c;
  }
  choice.x += choice.y * 0.5;
  choice.y *= 0.866025404;
  choice *= u_Scale / texSize;
  return texture2D(texture, choice + u_Center);
}

void main() {
  gl_FragColor = vec4(texture2D(u_Texture, v_UV));
  gl_FragColor = hexagonalPixelate_sampleColor(u_Texture, u_ViewportSize, v_UV);
}`,pA=`attribute vec2 a_Position;

varying vec2 v_UV;

void main() {
  v_UV = 0.5 * (a_Position + 1.0);
  gl_Position = vec4(a_Position, 0., 1.);
}`,hA=(F1=(0,Ki.b2)(),F1(N1=function(e){(0,ui.Z)(t,e);var i=lA(t);function t(){return(0,Ur.Z)(this,t),i.apply(this,arguments)}return(0,Jr.Z)(t,[{key:"setupShaders",value:function(){this.shaderModuleService.registerModule("hexagonalpixelate-pass",{vs:pA,fs:fA});var r=this.shaderModuleService.getModule("hexagonalpixelate-pass"),o=r.vs,u=r.fs,f=r.uniforms,g=this.rendererService.getViewportSize(),x=g.width,I=g.height;return{vs:o,fs:u,uniforms:(0,oe.Z)((0,oe.Z)({},f),{},{u_ViewportSize:[x,I]})}}}]),t}(Ad))||N1),B1,z1;function dA(e){var i=vA();return function(){var n=(0,rr.Z)(e),r;if(i){var o=(0,rr.Z)(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return(0,jn.Z)(this,r)}}function vA(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var mA=`varying vec2 v_UV;

uniform sampler2D u_Texture;
uniform vec2 u_ViewportSize: [1.0, 1.0];
uniform float u_Strength : 0.6;

vec4 ink_sampleColor(sampler2D texture, vec2 texSize, vec2 texCoord) {
  vec2 dx = vec2(1.0 / texSize.x, 0.0);
  vec2 dy = vec2(0.0, 1.0 / texSize.y);
  vec4 color = texture2D(texture, texCoord);
  float bigTotal = 0.0;
  float smallTotal = 0.0;
  vec3 bigAverage = vec3(0.0);
  vec3 smallAverage = vec3(0.0);
  for (float x = -2.0; x <= 2.0; x += 1.0) {
    for (float y = -2.0; y <= 2.0; y += 1.0) {
      vec3 sample = texture2D(texture, texCoord + dx * x + dy * y).rgb;
      bigAverage += sample;
      bigTotal += 1.0;
      if (abs(x) + abs(y) < 2.0) {
        smallAverage += sample;
        smallTotal += 1.0;
      }
    }
  }
  vec3 edge = max(vec3(0.0), bigAverage / bigTotal - smallAverage / smallTotal);
  float power = u_Strength * u_Strength * u_Strength * u_Strength * u_Strength;
  return vec4(color.rgb - dot(edge, edge) * power * 100000.0, color.a);
}

void main() {
  gl_FragColor = vec4(texture2D(u_Texture, v_UV));
  gl_FragColor = ink_sampleColor(u_Texture, u_ViewportSize, v_UV);
}`,gA=`attribute vec2 a_Position;

varying vec2 v_UV;

void main() {
  v_UV = 0.5 * (a_Position + 1.0);
  gl_Position = vec4(a_Position, 0., 1.);
}`,yA=(B1=(0,Ki.b2)(),B1(z1=function(e){(0,ui.Z)(t,e);var i=dA(t);function t(){return(0,Ur.Z)(this,t),i.apply(this,arguments)}return(0,Jr.Z)(t,[{key:"setupShaders",value:function(){this.shaderModuleService.registerModule("ink-pass",{vs:gA,fs:mA});var r=this.shaderModuleService.getModule("ink-pass"),o=r.vs,u=r.fs,f=r.uniforms,g=this.rendererService.getViewportSize(),x=g.width,I=g.height;return{vs:o,fs:u,uniforms:(0,oe.Z)((0,oe.Z)({},f),{},{u_ViewportSize:[x,I]})}}}]),t}(Ad))||z1),U1,Z1;function _A(e){var i=xA();return function(){var n=(0,rr.Z)(e),r;if(i){var o=(0,rr.Z)(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return(0,jn.Z)(this,r)}}function xA(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var bA=`varying vec2 v_UV;

uniform sampler2D u_Texture;
uniform float u_Amount : 0.5;

float rand(vec2 co) {
  return fract(sin(dot(co.xy ,vec2(12.9898,78.233))) * 43758.5453);
}

// https://github.com/evanw/glfx.js/blob/master/src/filters/adjust/noise.js
vec4 noise_filterColor(vec4 color, vec2 texCoord) {
  float diff = (rand(texCoord) - 0.5) * u_Amount;
  color.r += diff;
  color.g += diff;
  color.b += diff;
  return color;
}

void main() {
  gl_FragColor = vec4(texture2D(u_Texture, v_UV));
  gl_FragColor = noise_filterColor(gl_FragColor, v_UV);
}`,EA=`attribute vec2 a_Position;

varying vec2 v_UV;

void main() {
  v_UV = 0.5 * (a_Position + 1.0);
  gl_Position = vec4(a_Position, 0., 1.);
}`,SA=(U1=(0,Ki.b2)(),U1(Z1=function(e){(0,ui.Z)(t,e);var i=_A(t);function t(){return(0,Ur.Z)(this,t),i.apply(this,arguments)}return(0,Jr.Z)(t,[{key:"setupShaders",value:function(){return this.shaderModuleService.registerModule("noise-pass",{vs:EA,fs:bA}),this.shaderModuleService.getModule("noise-pass")}}]),t}(Ad))||Z1),j1,V1;function wA(e){var i=AA();return function(){var n=(0,rr.Z)(e),r;if(i){var o=(0,rr.Z)(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return(0,jn.Z)(this,r)}}function AA(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var CA=`attribute vec2 a_Position;

varying vec2 v_UV;

void main() {
  v_UV = 0.5 * (a_Position + 1.0);
  gl_Position = vec4(a_Position, 0., 1.);
}`,TA=`varying vec2 v_UV;

uniform sampler2D u_Texture;

uniform float u_Amount : 0.5;

// https://github.com/evanw/glfx.js/blob/master/src/filters/adjust/sepia.js
vec4 sepia_filterColor(vec4 color) {
  float r = color.r;
  float g = color.g;
  float b = color.b;
  color.r =
    min(1.0, (r * (1.0 - (0.607 * u_Amount))) + (g * (0.769 * u_Amount)) + (b * (0.189 * u_Amount)));
  color.g = min(1.0, (r * 0.349 * u_Amount) + (g * (1.0 - (0.314 * u_Amount))) + (b * 0.168 * u_Amount));
  color.b = min(1.0, (r * 0.272 * u_Amount) + (g * 0.534 * u_Amount) + (b * (1.0 - (0.869 * u_Amount))));
  return color;
}

void main() {
  gl_FragColor = vec4(texture2D(u_Texture, v_UV));
  gl_FragColor = sepia_filterColor(gl_FragColor);
}`,MA=(j1=(0,Ki.b2)(),j1(V1=function(e){(0,ui.Z)(t,e);var i=wA(t);function t(){return(0,Ur.Z)(this,t),i.apply(this,arguments)}return(0,Jr.Z)(t,[{key:"setupShaders",value:function(){return this.shaderModuleService.registerModule("sepia-pass",{vs:CA,fs:TA}),this.shaderModuleService.getModule("sepia-pass")}}]),t}(Ad))||V1),G1,H1,W1,$1,Gv,X1,IA=(G1=(0,Ki.b2)(),H1=(0,Ki.f3)(Ln.IRendererService),W1=(0,Ki.zY)(),G1($1=(Gv=function(){function e(){(0,Ur.Z)(this,e),Bs(this,"rendererService",X1,this),(0,He.Z)(this,"passes",[]),(0,He.Z)(this,"readFBO",void 0),(0,He.Z)(this,"writeFBO",void 0)}return(0,Jr.Z)(e,[{key:"getReadFBO",value:function(){return this.readFBO}},{key:"getWriteFBO",value:function(){return this.writeFBO}},{key:"getCurrentFBOTex",value:function(){var t=this.rendererService,n=t.getViewportSize,r=t.createTexture2D,o=n(),u=o.width,f=o.height;return r({x:0,y:0,width:u,height:f,copy:!0})}},{key:"getReadFBOTex",value:function(){var t=this,n=this.rendererService.useFramebuffer;return new Promise(function(r){n(t.readFBO,(0,An.Z)(Nt().mark(function o(){return Nt().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:r(t.getCurrentFBOTex());case 1:case"end":return f.stop()}},o)})))})}},{key:"renderBloomPass",value:function(){var i=(0,An.Z)(Nt().mark(function n(r,o){var u,f;return Nt().wrap(function(x){for(;;)switch(x.prev=x.next){case 0:return x.next=2,this.getReadFBOTex();case 2:u=x.sent,f=0;case 4:if(!(f<4)){x.next=11;break}return x.next=7,o.render(r,u);case 7:this.swap(),f++,x.next=4;break;case 11:case"end":return x.stop()}},n,this)}));function t(n,r){return i.apply(this,arguments)}return t}()},{key:"render",value:function(){var i=(0,An.Z)(Nt().mark(function n(r){var o,u;return Nt().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:o=0;case 1:if(!(o<this.passes.length)){g.next=15;break}if(u=this.passes[o],u.setRenderToScreen(this.isLastEnabledPass(o)),u.getName()!=="bloom"){g.next=9;break}return g.next=7,this.renderBloomPass(r,u);case 7:g.next=12;break;case 9:return g.next=11,u.render(r);case 11:o!==this.passes.length-1&&this.swap();case 12:o++,g.next=1;break;case 15:case"end":return g.stop()}},n,this)}));function t(n){return i.apply(this,arguments)}return t}()},{key:"resize",value:function(t,n){this.readFBO.resize({width:t,height:n}),this.writeFBO.resize({width:t,height:n})}},{key:"add",value:function(t,n,r){t.init(n,r),this.passes.push(t)}},{key:"insert",value:function(t,n,r,o){t.init(r,o),this.passes.splice(n,0,t)}},{key:"getPostProcessingPassByName",value:function(t){return this.passes.find(function(n){return n.getName()===t})}},{key:"init",value:function(){var t=this.rendererService,n=t.createFramebuffer,r=t.createTexture2D;this.readFBO=n({color:r({width:1,height:1,wrapS:$e.CLAMP_TO_EDGE,wrapT:$e.CLAMP_TO_EDGE})}),this.writeFBO=n({color:r({width:1,height:1,wrapS:$e.CLAMP_TO_EDGE,wrapT:$e.CLAMP_TO_EDGE})})}},{key:"isLastEnabledPass",value:function(t){for(var n=t+1;n<this.passes.length;n++)if(this.passes[n].isEnabled())return!1;return!0}},{key:"swap",value:function(){var t=this.readFBO;this.readFBO=this.writeFBO,this.writeFBO=t}}]),e}(),X1=Ds(Gv.prototype,"rendererService",[H1],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ds(Gv.prototype,"init",[W1],Object.getOwnPropertyDescriptor(Gv.prototype,"init"),Gv.prototype),Gv))||$1),Y1,K1;function OA(e){var i=RA();return function(){var n=(0,rr.Z)(e),r;if(i){var o=(0,rr.Z)(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return(0,jn.Z)(this,r)}}function RA(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var PA=(Y1=(0,Ki.b2)(),Y1(K1=function(e){(0,ui.Z)(t,e);var i=OA(t);function t(){return(0,Ur.Z)(this,t),i.apply(this,arguments)}return(0,Jr.Z)(t,[{key:"getType",value:function(){return Xd.Normal}},{key:"getName",value:function(){return"render"}},{key:"init",value:function(r,o){zu((0,rr.Z)(t.prototype),"init",this).call(this,r,o)}},{key:"render",value:function(r){var o=this.rendererService,u=o.useFramebuffer,f=o.clear,g=r.multiPassRenderer.getPostProcessor().getReadFBO();u(g,function(){f({color:[0,0,0,0],depth:1,stencil:0,framebuffer:g}),r.multiPassRenderer.setRenderFlag(!1),r.models.forEach(function(x){x.draw({uniforms:r.layerModel.getUninforms()})}),r.multiPassRenderer.setRenderFlag(!0)})}}]),t}(gm))||K1),Q1,J1,q1,kg,ex;function kA(e){var i=LA();return function(){var n=(0,rr.Z)(e),r;if(i){var o=(0,rr.Z)(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return(0,jn.Z)(this,r)}}function LA(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var DA=`uniform float u_opacity : 1.0;
uniform float u_MixRatio : 0.5;

uniform sampler2D u_Diffuse1;
uniform sampler2D u_Diffuse2;

varying vec2 v_UV;

void main() {
  vec4 texel1 = texture2D(u_Diffuse1, v_UV);
  vec4 texel2 = texture2D(u_Diffuse2, v_UV);
  gl_FragColor = u_opacity * mix(texel1, texel2, u_MixRatio);
}
`,tx=`varying vec2 v_UV;

uniform sampler2D u_Texture;

void main() {
  gl_FragColor = vec4(texture2D(u_Texture, v_UV));
}`,FA=`attribute vec2 a_Position;

varying vec2 v_UV;

void main() {
  v_UV = 0.5 * (a_Position + 1.0);
  gl_Position = vec4(a_Position, 0., 1.);
}`;function rx(e,i){for(var t=0,n=1/i,r=e;r>0;)t=t+n*(r%i),r=Math.floor(r/i),n=n/i;return t}var NA=1,BA=(Q1=(0,Ki.b2)(),J1=(0,Ki.f3)(Ln.IShaderModuleService),Q1(q1=(kg=function(e){(0,ui.Z)(t,e);var i=kA(t);function t(){var n;(0,Ur.Z)(this,t);for(var r=arguments.length,o=new Array(r),u=0;u<r;u++)o[u]=arguments[u];return n=i.call.apply(i,[this].concat(o)),Bs((0,er.Z)(n),"shaderModuleService",ex,(0,er.Z)(n)),(0,He.Z)((0,er.Z)(n),"haltonSequence",[]),(0,He.Z)((0,er.Z)(n),"accumulatingId",0),(0,He.Z)((0,er.Z)(n),"frame",0),(0,He.Z)((0,er.Z)(n),"timer",void 0),(0,He.Z)((0,er.Z)(n),"sampleRenderTarget",void 0),(0,He.Z)((0,er.Z)(n),"prevRenderTarget",void 0),(0,He.Z)((0,er.Z)(n),"outputRenderTarget",void 0),(0,He.Z)((0,er.Z)(n),"copyRenderTarget",void 0),(0,He.Z)((0,er.Z)(n),"blendModel",void 0),(0,He.Z)((0,er.Z)(n),"outputModel",void 0),(0,He.Z)((0,er.Z)(n),"copyModel",void 0),n}return(0,Jr.Z)(t,[{key:"getType",value:function(){return Xd.Normal}},{key:"getName",value:function(){return"taa"}},{key:"init",value:function(r,o){zu((0,rr.Z)(t.prototype),"init",this).call(this,r,o);var u=this.rendererService,f=u.createFramebuffer,g=u.createTexture2D;this.sampleRenderTarget=f({color:g({width:1,height:1,wrapS:$e.CLAMP_TO_EDGE,wrapT:$e.CLAMP_TO_EDGE})}),this.prevRenderTarget=f({color:g({width:1,height:1,wrapS:$e.CLAMP_TO_EDGE,wrapT:$e.CLAMP_TO_EDGE})}),this.outputRenderTarget=f({color:g({width:1,height:1,wrapS:$e.CLAMP_TO_EDGE,wrapT:$e.CLAMP_TO_EDGE})}),this.copyRenderTarget=f({color:g({width:1,height:1,wrapS:$e.CLAMP_TO_EDGE,wrapT:$e.CLAMP_TO_EDGE})});for(var x=0;x<30;x++)this.haltonSequence.push([rx(x,2),rx(x,3)]);this.blendModel=this.createTriangleModel("blend-pass",DA),this.outputModel=this.createTriangleModel("copy-pass",tx,{blend:{enable:!0,func:{srcRGB:$e.ONE,dstRGB:$e.ONE_MINUS_SRC_ALPHA,srcAlpha:$e.ONE,dstAlpha:$e.ONE_MINUS_SRC_ALPHA},equation:{rgb:$e.FUNC_ADD,alpha:$e.FUNC_ADD}}}),this.copyModel=this.createTriangleModel("copy-pass",tx)}},{key:"render",value:function(r){var o=this,u=this.rendererService,f=u.clear,g=u.getViewportSize,x=u.useFramebuffer,I=g(),P=I.width,G=I.height;this.sampleRenderTarget.resize({width:P,height:G}),this.prevRenderTarget.resize({width:P,height:G}),this.outputRenderTarget.resize({width:P,height:G}),this.copyRenderTarget.resize({width:P,height:G}),this.resetFrame(),this.stopAccumulating();var $=r.multiPassRenderer.getPostProcessor().getReadFBO();x($,function(){f({color:[0,0,0,0],depth:1,stencil:0,framebuffer:$}),r.multiPassRenderer.setRenderFlag(!1),r.render(),r.multiPassRenderer.setRenderFlag(!0)});var Ee=function Se(Re){!o.accumulatingId||Re!==o.accumulatingId||o.isFinished()||(o.doRender(r),vs.requestAnimationFrame(function(){Se(Re)}))};this.accumulatingId=NA++,this.timer=vs.setTimeout(function(){Ee(o.accumulatingId)},50)}},{key:"doRender",value:function(r){var o=this,u=this.rendererService,f=u.clear,g=u.getViewportSize,x=u.useFramebuffer,I=g(),P=I.width,G=I.height,$=r.getLayerConfig(),Ee=$.jitterScale,Se=Ee===void 0?1:Ee,Re=this.haltonSequence[this.frame%this.haltonSequence.length];this.cameraService.jitterProjectionMatrix((Re[0]*2-1)/P*Se,(Re[1]*2-1)/G*Se),r.multiPassRenderer.setRenderFlag(!1),r.hooks.beforeRender.call(),x(this.sampleRenderTarget,function(){f({color:[0,0,0,0],depth:1,stencil:0,framebuffer:o.sampleRenderTarget}),r.render()}),r.hooks.afterRender.call(),r.multiPassRenderer.setRenderFlag(!0);var Ye=r.getLayerConfig();x(this.outputRenderTarget,function(){o.blendModel.draw({uniforms:{u_opacity:Ye.opacity||1,u_MixRatio:o.frame===0?1:.9,u_Diffuse1:o.sampleRenderTarget,u_Diffuse2:o.frame===0?r.multiPassRenderer.getPostProcessor().getReadFBO():o.prevRenderTarget}})}),this.frame===0&&f({color:[0,0,0,0],depth:1,stencil:0,framebuffer:this.copyRenderTarget}),this.frame>=1&&(x(this.copyRenderTarget,function(){o.outputModel.draw({uniforms:{u_Texture:o.outputRenderTarget}})}),x(r.multiPassRenderer.getPostProcessor().getReadFBO(),function(){o.copyModel.draw({uniforms:{u_Texture:o.copyRenderTarget}})}),r.multiPassRenderer.getPostProcessor().render(r));var St=this.prevRenderTarget;this.prevRenderTarget=this.outputRenderTarget,this.outputRenderTarget=St,this.frame++,this.cameraService.clearJitterProjectionMatrix()}},{key:"isFinished",value:function(){return this.frame>=this.haltonSequence.length}},{key:"resetFrame",value:function(){this.frame=0}},{key:"stopAccumulating",value:function(){this.accumulatingId=0,vs.clearTimeout(this.timer)}},{key:"createTriangleModel",value:function(r,o,u){this.shaderModuleService.registerModule(r,{vs:FA,fs:o});var f=this.shaderModuleService.getModule(r),g=f.vs,x=f.fs,I=f.uniforms,P=this.rendererService,G=P.createAttribute,$=P.createBuffer,Ee=P.createModel;return Ee((0,oe.Z)({vs:g,fs:x,attributes:{a_Position:G({buffer:$({data:[-4,-4,4,-4,0,4],type:$e.FLOAT}),size:2})},uniforms:(0,oe.Z)({},I),depth:{enable:!1},count:3},u))}}]),t}(gm),ex=Ds(kg.prototype,"shaderModuleService",[J1],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),kg))||q1),A0=new Ki.W2;A0.bind(Ln.IGlobalConfigService).to(ug).inSingletonScope(),(0,Ki.GW)((0,Ki.b2)(),ir.EventEmitter),A0.bind(Ln.IEventEmitter).to(ir.EventEmitter);var nx=(0,Tp.Z)(A0,!1),Lg=function(i){var t=nx.lazyInject(i);return function(n,r,o){t.call(this,n,r),o&&(o.initializer=function(){return n[r]})}},b7=function(i){var t=nx.lazyMultiInject(i);return function(n,r,o){t.call(this,n,r),o&&(o.initializer=function(){return n[r]})}},Th=A0,zA=0;function UA(){var e=new Ki.W2;return e.parent=A0,e.bind(Ln.SceneID).toConstantValue("".concat(zA++)),e.bind(Ln.IShaderModuleService).to(Cw).inSingletonScope(),e.bind(Ln.ILayerService).to(NS).inSingletonScope(),e.bind(Ln.ISceneService).to(sw).inSingletonScope(),e.bind(Ln.ICameraService).to(zv).inSingletonScope(),e.bind(Ln.ICoordinateSystemService).to(b).inSingletonScope(),e.bind(Ln.IInteractionService).to(fo).inSingletonScope(),e.bind(Ln.IPickingService).to(RS).inSingletonScope(),e.bind(Ln.IControlService).to(Wd).inSingletonScope(),e.bind(Ln.IMarkerService).to(Vv).inSingletonScope(),e.bind(Ln.IIconService).to(kp).inSingletonScope(),e.bind(Ln.IFontService).to(Xf).inSingletonScope(),e.bind(Ln.IPopupService).to(ng).inSingletonScope(),e.bind(Ln.INormalPass).to(Ow).whenTargetNamed("clear"),e.bind(Ln.INormalPass).to(Fw).whenTargetNamed("pixelPicking"),e.bind(Ln.INormalPass).to(PA).whenTargetNamed("render"),e.bind(Ln.INormalPass).to(BA).whenTargetNamed("taa"),e.bind(Ln.IFactoryNormalPass).toFactory(function(i){return function(t){return i.container.getNamed(Ln.INormalPass,t)}}),e.bind(Ln.IPostProcessingPass).to(uA).whenTargetNamed("copy"),e.bind(Ln.IPostProcessingPass).to(jw).whenTargetNamed("bloom"),e.bind(Ln.IPostProcessingPass).to($w).whenTargetNamed("blurH"),e.bind(Ln.IPostProcessingPass).to(Jw).whenTargetNamed("blurV"),e.bind(Ln.IPostProcessingPass).to(SA).whenTargetNamed("noise"),e.bind(Ln.IPostProcessingPass).to(MA).whenTargetNamed("sepia"),e.bind(Ln.IPostProcessingPass).to(nA).whenTargetNamed("colorHalftone"),e.bind(Ln.IPostProcessingPass).to(hA).whenTargetNamed("hexagonalPixelate"),e.bind(Ln.IPostProcessingPass).to(yA).whenTargetNamed("ink"),e.bind(Ln.IFactoryPostProcessingPass).toFactory(function(i){return function(t){var n=i.container.getNamed(Ln.IPostProcessingPass,t);return n.setName(t),n}}),e}function ym(e){var i=new Ki.W2;return i.parent=e,i.bind(Ln.IStyleAttributeService).to(GS).inSingletonScope(),i.bind(Ln.IMultiPassRenderer).to(kw).inSingletonScope(),i.bind(Ln.IPostProcessor).to(IA).inSingletonScope(),i}var ZA=null;function E7(e){return ZA.indexOf(e)}var jA=2,S7=4,VA=64,w7=128,GA=256,HA=512,A7=8192,C7=16384,T7=32768,WA=null,ix=131072,M7=262144,$A=524288,I7=1048576,XA=2097152,O7=4194304,YA=8388608,KA=16777216,QA=null;function _m(e,i){return e=clamp(Math.floor(e),0,255),i=clamp(Math.floor(i),0,255),256*e+i}function R7(e){var i=e.color,t=e.radius,n=e.tileX,r=e.tileY,o=e.shape,u=e.opacity,f=e.stroke,g=e.strokeWidth,x=e.strokeOpacity,I=[],P=[],G=[],$=[_m(i[0],i[1]),_m(i[2],i[3])],Ee=[_m(f[0],f[1]),_m(f[2],f[3])];return[[-1,-1],[1,-1],[1,1],[-1,1]].forEach(function(Se){var Re=_slicedToArray(Se,2),Ye=Re[0],St=Re[1];I.push([].concat($,[(Ye+1)*YA+(St+1)*XA+getShapeIndex(o)*ix+t,(n+512)*$A+(r+512)*VA])),P.push([].concat(Ee,[g,x])),G.push([u,0,0,0])}),{packedBuffer:I,packedBuffer2:P,packedBuffer3:G}}function P7(e,i){if(e===0&&!i)return 0;if(e===1&&i)return 4294967295;var t=i?1:0,n=Math.floor(e*127);return n*QA+t*KA+n*ix+t*WA+n*HA+t*GA+n*jA+t}var Yh;(function(e){e.normal="normal",e.additive="additive",e.subtractive="subtractive",e.min="min",e.max="max",e.none="none"})(Yh||(Yh={}));var El;(function(e){e.LINEAR="linear",e.SEQUENTIAL="sequential",e.POWER="power",e.LOG="log",e.IDENTITY="identity",e.TIME="time",e.QUANTILE="quantile",e.QUANTIZE="quantize",e.THRESHOLD="threshold",e.CAT="cat",e.DIVERGING="diverging"})(El||(El={}));var Yd;(function(e){e.CONSTANT="constant",e.VARIABLE="variable"})(Yd||(Yd={}));var ja;(function(e){e[e.Attribute=0]="Attribute",e[e.InstancedAttribute=1]="InstancedAttribute",e[e.Uniform=2]="Uniform"})(ja||(ja={}));var Cd;(function(e){e.IMAGE="image",e.ARRAYBUFFER="arraybuffer",e.RGB="rgb"})(Cd||(Cd={}));var Dg=["mapload","mapchange","mapAfterFrameChange"],dv={ProjectionMatrix:"u_ProjectionMatrix",ViewMatrix:"u_ViewMatrix",ViewProjectionMatrix:"u_ViewProjectionMatrix",Zoom:"u_Zoom",ZoomScale:"u_ZoomScale",FocalDistance:"u_FocalDistance",CameraPosition:"u_CameraPosition"},xm=["loaded","fontloaded","maploaded","resize","destroy","dragstart","dragging","dragend","dragcancel"];function JA(e,i){return Array.isArray(e)?typeof e[0]=="string"?e.map(function(t){return Zr(t,i)}):e.map(function(t){return{url:Zr(t.url,i),bands:t.bands||[0]}}):Zr(e,i)}function qA(e){return typeof e=="string"?[{url:e,bands:[0]}]:typeof e[0]=="string"?e.map(function(i){return{url:i,bands:[0]}}):e}function ax(e,i){e.xhrCancel=function(){i.map(function(t){t.abort()})}}var eC=function(){var e=(0,An.Z)(Nt().mark(function i(t,n,r,o,u){var f,g,x,I,P,G;return Nt().wrap(function(Ee){for(;;)switch(Ee.prev=Ee.next){case 0:if(f=qA(n.url),!(f.length>1)){Ee.next=15;break}return Ee.next=4,tC(f,n);case 4:if(g=Ee.sent,x=g.rasterFiles,I=g.xhrList,P=g.errList,ax(t,I),!(P.length>0)){Ee.next=12;break}return r(P,null),Ee.abrupt("return");case 12:go(x,o,u,r),Ee.next=17;break;case 15:G=Su(n,function(Se,Re){if(Se)r(Se);else if(Re){var Ye=[{data:Re,bands:f[0].bands}];go(Ye,o,u,r)}}),ax(t,[G]);case 17:case"end":return Ee.stop()}},i)}));return function(t,n,r,o,u){return e.apply(this,arguments)}}();function tC(e,i){return Fg.apply(this,arguments)}function Fg(){return Fg=(0,An.Z)(Nt().mark(function e(i,t){var n,r,o,u,f,g,x,I,P,G,$;return Nt().wrap(function(Se){for(;;)switch(Se.prev=Se.next){case 0:n=[],r=[],o=[],u=0;case 4:if(!(u<i.length)){Se.next=20;break}return f=i[u],g=(0,oe.Z)((0,oe.Z)({},t),{},{url:f.url}),x=f.bands,Se.next=10,Ma((0,oe.Z)((0,oe.Z)({},g),{},{type:"arrayBuffer"}));case 10:I=Se.sent,P=I.err,G=I.data,$=I.xhr,P&&o.push(P),r.push($),n.push({data:G,bands:x});case 17:u++,Se.next=4;break;case 20:return Se.abrupt("return",{rasterFiles:n,xhrList:r,errList:o});case 21:case"end":return Se.stop()}},e)})),Fg.apply(this,arguments)}var rC=function(){var e=(0,An.Z)(Nt().mark(function i(t,n,r,o,u){var f;return Nt().wrap(function(x){for(;;)switch(x.prev=x.next){case 0:return f={url:JA(t,n)},x.abrupt("return",new Promise(function(I,P){eC(r,f,function(G,$){G?P(G):$&&I($)},o,u)}));case 2:case"end":return x.stop()}},i)}));return function(t,n,r,o,u){return e.apply(this,arguments)}}(),ox=function(){var e=(0,An.Z)(Nt().mark(function i(t,n,r,o){var u,f,g,x;return Nt().wrap(function(P){for(;;)switch(P.prev=P.next){case 0:return f=Array.isArray(t)?t[0]:t,o.wmtsOptions?(g=(o==null?void 0:o.getURLFromTemplate)||Sn,u=g(f,(0,oe.Z)((0,oe.Z)({},n),o.wmtsOptions))):(x=(o==null?void 0:o.getURLFromTemplate)||Zr,u=x(f,n)),P.abrupt("return",new Promise(function(G,$){var Ee,Se=us({url:u,type:(o==null||(Ee=o.requestParameters)===null||Ee===void 0?void 0:Ee.type)||"arrayBuffer"},function(Re,Ye){Re?$(Re):Ye&&G(Ye)},o.transformResponse);r.xhrCancel=function(){return Se.abort()}}));case 3:case"end":return P.stop()}},i)}));return function(t,n,r,o){return e.apply(this,arguments)}}(),nC=function(){return{rasterData:new Uint8Array([0]),width:1,height:1}},iC={tileSize:256,minZoom:0,maxZoom:1/0,zoomOffset:0,warp:!0},k7=[Cd.ARRAYBUFFER,Cd.RGB];function aC(e){return!!(Array.isArray(e)&&e.length===0||!Array.isArray(e)&&typeof e!="string")}function oC(e){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(aC(e))throw new Error("tile server url is error");var t=(i==null?void 0:i.dataType)||Cd.IMAGE;t===Cd.RGB&&(t=Cd.ARRAYBUFFER);var n=function(u,f){switch(t){case Cd.IMAGE:return ox(e,u,f,i);case Cd.ARRAYBUFFER:return rC(e,u,f,(i==null?void 0:i.format)||nC,i==null?void 0:i.operation);default:return ox(e,u,f,i)}},r=(0,oe.Z)((0,oe.Z)((0,oe.Z)({},iC),i),{},{getTileData:n});return{data:e,dataArray:[],tilesetOptions:r,isTile:!0}}var sC={tileSize:256,minZoom:0,maxZoom:1/0,zoomOffset:0},uC=function(){var e=(0,An.Z)(Nt().mark(function i(t){return Nt().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",new Promise(function(o){var u=(0,Mr.Z)(t.bounds,4),f=u[0],g=u[1],x=u[2],I=u[3],P={layers:{testTile:{features:[{type:"Feature",properties:{key:t.x+"/"+t.y+"/"+t.z,textLng:(f+x)/2,textLat:(g+I)/2},geometry:{type:"LineString",coordinates:[[x,I],[x,g],[f,g],[f,g]]}}]}}};o(P)}));case 1:case"end":return r.stop()}},i)}));return function(t){return e.apply(this,arguments)}}();function lC(e,i){var t=function(o){return uC(o)},n=(0,oe.Z)((0,oe.Z)((0,oe.Z)({},sC),i),{},{getTileData:t});return{data:e,dataArray:[],tilesetOptions:n,isTile:!0}}var cC=c(48096),sx=c.n(cC);function ux(e,i){var t=i.radius,n=t===void 0?40:t,r=i.maxZoom,o=r===void 0?18:r,u=i.minZoom,f=u===void 0?0:u,g=i.zoom,x=g===void 0?2:g;if(e.pointIndex){var I=e.pointIndex.getClusters(e.extent,Math.floor(x));return e.dataArray=fC(I),e}var P=new(sx())({radius:n,minZoom:f,maxZoom:o}),G={type:"FeatureCollection",features:[]};return G.features=e.dataArray.map(function($){return{type:"Feature",geometry:{type:"Point",coordinates:$.coordinates},properties:(0,oe.Z)({},$)}}),P.load(G.features),P}function fC(e){return e.map(function(i,t){return(0,oe.Z)({coordinates:i.geometry.coordinates,_id:t+1},i.properties)})}function pC(e){if(e.length===0)throw new Error("max requires at least one data point");for(var i=e[0],t=1;t<e.length;t++)e[t]>i&&(i=e[t]);return i}function hC(e){if(e.length===0)throw new Error("min requires at least one data point");for(var i=e[0],t=1;t<e.length;t++)e[t]<i&&(i=e[t]);return i}function lx(e){if(e.length===0)return 0;for(var i=e[0],t=0,n,r=1;r<e.length;r++)n=i+e[r]*1,Math.abs(i)>=Math.abs(e[r])?t+=i-n+e[r]:t+=e[r]-n+i,i=n;return i+t*1}function dC(e){if(e.length===0)throw new Error("mean requires at least one data point");return lx(e)/e.length}var vC={min:hC,max:pC,mean:dC,sum:lx};function mC(e){var i=gC();return function(){var n=(0,rr.Z)(e),r;if(i){var o=(0,rr.Z)(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return(0,jn.Z)(this,r)}}function gC(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function yC(e,i){if(Array.isArray(i))return i}var _C=function(e){(0,ui.Z)(t,e);var i=mC(t);function t(n,r){var o;return(0,Ur.Z)(this,t),o=i.call(this),(0,He.Z)((0,er.Z)(o),"type","source"),(0,He.Z)((0,er.Z)(o),"isTile",!1),(0,He.Z)((0,er.Z)(o),"inited",!1),(0,He.Z)((0,er.Z)(o),"hooks",{init:new cd}),(0,He.Z)((0,er.Z)(o),"parser",{type:"geojson"}),(0,He.Z)((0,er.Z)(o),"transforms",[]),(0,He.Z)((0,er.Z)(o),"cluster",!1),(0,He.Z)((0,er.Z)(o),"clusterOptions",{enable:!1,radius:40,maxZoom:20,zoom:-99,method:"count"}),(0,He.Z)((0,er.Z)(o),"invalidExtent",!1),(0,He.Z)((0,er.Z)(o),"dataArrayChanged",!1),(0,He.Z)((0,er.Z)(o),"cfg",{autoRender:!0}),o.originData=n,o.initCfg(r),o.init().then(function(){o.inited=!0,o.emit("update",{type:"inited"})}),o}return(0,Jr.Z)(t,[{key:"getSourceCfg",value:function(){return this.cfg}},{key:"getClusters",value:function(r){return this.clusterIndex.getClusters(this.caculClusterExtent(2),r)}},{key:"getClustersLeaves",value:function(r){return this.clusterIndex.getLeaves(r,1/0)}},{key:"getParserType",value:function(){return this.parser.type}},{key:"updateClusterData",value:function(r){var o=this,u=this.clusterOptions,f=u.method,g=f===void 0?"sum":f,x=u.field,I=this.clusterIndex.getClusters(this.caculClusterExtent(2),Math.floor(r));this.clusterOptions.zoom=r,I.forEach(function(P){P.id||(P.properties.point_count=1)}),(x||(0,Wr.isFunction)(g))&&(I=I.map(function(P){var G=P.id;if(G){var $=o.clusterIndex.getLeaves(G,1/0),Ee=$.map(function(Ye){return Ye.properties}),Se;if((0,Wr.isString)(g)&&x){var Re=Ao(Ee,x);Se=vC[g](Re)}(0,Wr.isFunction)(g)&&(Se=g(Ee)),P.properties.stat=Se}else P.properties.point_count=1;return P})),this.data=A("geojson")({type:"FeatureCollection",features:I}),this.executeTrans()}},{key:"getFeatureById",value:function(r){var o=this.parser,u=o.type,f=u===void 0?"geojson":u,g=o.geometry;if(f==="geojson"&&!this.cluster){var x=r<this.originData.features.length?this.originData.features[r]:"null",I=(0,Wr.cloneDeep)(x);if(I!=null&&I.properties&&(this.transforms.length!==0||this.dataArrayChanged)){var P=this.data.dataArray.find(function(G){return G._id===r});I.properties=P}return I}else return f==="json"&&g?this.data.dataArray.find(function(G){return G._id===r}):r<this.data.dataArray.length?this.data.dataArray[r]:"null"}},{key:"updateFeaturePropertiesById",value:function(r,o){this.data.dataArray=this.data.dataArray.map(function(u){return u._id===r?(0,oe.Z)((0,oe.Z)({},u),o):u}),this.dataArrayChanged=!0,this.emit("update",{type:"update"})}},{key:"getFeatureId",value:function(r,o){var u=this.data.dataArray.find(function(f){return f[r]===o});return u==null?void 0:u._id}},{key:"setData",value:function(r,o){var u=this;this.originData=r,this.dataArrayChanged=!1,this.initCfg(o),this.init().then(function(){u.emit("update",{type:"update"})})}},{key:"destroy",value:function(){var r;this.removeAllListeners(),this.originData=null,this.clusterIndex=null,this.data=null,(r=this.tileset)===null||r===void 0||r.destroy()}},{key:"processData",value:function(){var n=(0,An.Z)(Nt().mark(function o(){var u=this;return Nt().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return g.next=2,new Promise(function(x,I){try{u.excuteParser(),u.initCluster(),u.executeTrans(),x({})}catch(P){I(P)}});case 2:return g.abrupt("return",g.sent);case 3:case"end":return g.stop()}},o)}));function r(){return n.apply(this,arguments)}return r}()},{key:"initCfg",value:function(r){this.cfg=(0,Wr.mergeWith)(this.cfg,r,yC);var o=this.cfg;o&&(o.parser&&(this.parser=o.parser),o.transforms&&(this.transforms=o.transforms),this.cluster=o.cluster||!1,o.clusterOptions&&(this.cluster=!0,this.clusterOptions=(0,oe.Z)((0,oe.Z)({},this.clusterOptions),o.clusterOptions)))}},{key:"init",value:function(){var n=(0,An.Z)(Nt().mark(function o(){return Nt().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return this.inited=!1,f.next=3,this.processData();case 3:this.inited=!0;case 4:case"end":return f.stop()}},o,this)}));function r(){return n.apply(this,arguments)}return r}()},{key:"excuteParser",value:function(){var r=this.parser,o=r.type||"geojson",u=A(o);this.data=u(this.originData,r),this.tileset=this.initTileset(),!r.cancelExtent&&(this.extent=ws(this.data.dataArray),this.setCenter(this.extent),this.invalidExtent=this.extent[0]===this.extent[2]||this.extent[1]===this.extent[3])}},{key:"setCenter",value:function(r){this.center=[(r[0]+r[2])/2,(r[1]+r[3])/2],(isNaN(this.center[0])||isNaN(this.center[1]))&&(this.center=[108.92361111111111,34.54083333333333])}},{key:"initTileset",value:function(){var r=this.data.tilesetOptions;if(!!r){if(this.isTile=!0,this.tileset)return this.tileset.updateOptions(r),this.tileset;var o=new xa((0,oe.Z)({},r));return o}}},{key:"executeTrans",value:function(){var r=this,o=this.transforms;o.forEach(function(u){var f=u.type,g=k(f)(r.data,u);Object.assign(r.data,g)})}},{key:"initCluster",value:function(){if(!!this.cluster){var r=this.clusterOptions||{};this.clusterIndex=ux(this.data,r)}}},{key:"caculClusterExtent",value:function(r){var o=[[-1/0,-1/0],[1/0,1/0]];return this.invalidExtent||(o=cl(Cs(this.extent),r)),o[0].concat(o[1])}}]),t}(ir.EventEmitter);function xC(e,i){var t=i.callback;return t&&(e.dataArray=e.dataArray.filter(t)),e}function cx(e,i){var t=typeof Symbol!="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(!t){if(Array.isArray(e)||(t=bC(e))||i&&e&&typeof e.length=="number"){t&&(e=t);var n=0,r=function(){};return{s:r,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(x){throw x},f:r}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var o=!0,u=!1,f;return{s:function(){t=t.call(e)},n:function(){var x=t.next();return o=x.done,x},e:function(x){u=!0,f=x},f:function(){try{!o&&t.return!=null&&t.return()}finally{if(u)throw f}}}}function bC(e,i){if(!!e){if(typeof e=="string")return fx(e,i);var t=Object.prototype.toString.call(e).slice(8,-1);if(t==="Object"&&e.constructor&&(t=e.constructor.name),t==="Map"||t==="Set")return Array.from(e);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return fx(e,i)}}function fx(e,i){(i==null||i>e.length)&&(i=e.length);for(var t=0,n=new Array(i);t<i;t++)n[t]=e[t];return n}var Ng=6378e3;function EC(e,i){var t=e.dataArray,n=i.size,r=n===void 0?10:n,o=r/(2*Math.PI*Ng)*(256<<20)/2,u=SC(t,r),f=u.gridHash,g=u.gridOffset,x=TC(f,g,i);return{yOffset:o,xOffset:o,radius:o,type:"grid",dataArray:x}}function SC(e,i){var t=1/0,n=-1/0,r,o=cx(e),u;try{for(o.s();!(u=o.n()).done;){var f=u.value;r=f.coordinates[1],Number.isFinite(r)&&(t=r<t?r:t,n=r>n?r:n)}}catch(vt){o.e(vt)}finally{o.f()}var g=(t+n)/2,x=wC(i,g);if(x.xOffset<=0||x.yOffset<=0)return{gridHash:{},gridOffset:x};var I={},P=cx(e),G;try{for(P.s();!(G=P.n()).done;){var $=G.value,Ee=$.coordinates[1],Se=$.coordinates[0];if(Number.isFinite(Ee)&&Number.isFinite(Se)){var Re=Math.floor((Ee+90)/x.yOffset),Ye=Math.floor((Se+180)/x.xOffset),St="".concat(Re,"-").concat(Ye);I[St]=I[St]||{count:0,points:[]},I[St].count+=1,I[St].points.push($)}}}catch(vt){P.e(vt)}finally{P.f()}return{gridHash:I,gridOffset:x}}function wC(e,i){var t=AC(e),n=CC(i,e);return{yOffset:t,xOffset:n}}function AC(e){return e/Ng*(180/Math.PI)}function CC(e,i){return i/Ng*(180/Math.PI)/Math.cos(e*Math.PI/180)}function TC(e,i,t){return Object.keys(e).reduce(function(n,r,o){var u=r.split("-"),f=parseInt(u[0],10),g=parseInt(u[1],10),x={};if(t.field&&t.method){var I=el(e[r].points,t.field);x[t.method]=Eu[t.method](I)}return Object.assign(x,{_id:o,coordinates:xs([-180+i.xOffset*(g+.5),-90+i.yOffset*(f+.5)]),rawData:e[r].points,count:e[r].count}),n.push(x),n},[])}var Hv=Math.PI/3,MC=[0,Hv,2*Hv,3*Hv,4*Hv,5*Hv];function IC(e){return e[0]}function OC(e){return e[1]}function RC(){var e=0,i=0,t=1,n=1,r=IC,o=OC,u,f,g;function x(P){var G={},$=[],Ee,Se=P.length;for(Ee=0;Ee<Se;++Ee)if(!(isNaN(Ye=+r.call(null,Re=P[Ee],Ee,P))||isNaN(St=+o.call(null,Re,Ee,P)))){var Re,Ye,St,vt=Math.round(St=St/g),Ut=Math.round(Ye=Ye/f-(vt&1)/2),Kt=St-vt;if(Math.abs(Kt)*3>1){var Tr=Ye-Ut,on=Ut+(Ye<Ut?-1:1)/2,dn=vt+(St<vt?-1:1),vn=Ye-on,si=St-dn;Tr*Tr+Kt*Kt>vn*vn+si*si&&(Ut=on+(vt&1?1:-1)/2,vt=dn)}var ai=Ut+"-"+vt,Hi=G[ai];Hi?Hi.push(Re):($.push(Hi=G[ai]=[Re]),Hi.x=(Ut+(vt&1)/2)*f,Hi.y=vt*g)}return $}function I(P){var G=0,$=0;return MC.map(function(Ee){var Se=Math.sin(Ee)*P,Re=-Math.cos(Ee)*P,Ye=Se-G,St=Re-$;return G=Se,$=Re,[Ye,St]})}return x.hexagon=function(P){return"m"+I(P==null?u:+P).join("l")+"z"},x.centers=function(){for(var P=[],G=Math.round(i/g),$=Math.round(e/f),Ee=G*g;Ee<n+u;Ee+=g,++G)for(var Se=$*f+(G&1)*f/2;Se<t+f/2;Se+=f)P.push([Se,Ee]);return P},x.mesh=function(){var P=I(u).slice(0,4).join("l");return x.centers().map(function(G){return"M"+G+"m"+P}).join("")},x.x=function(P){return arguments.length?(r=P,x):r},x.y=function(P){return arguments.length?(o=P,x):o},x.radius=function(P){return arguments.length?(u=+P,f=u*2*Math.sin(Hv),g=u*1.5,x):u},x.size=function(P){return arguments.length?(e=i=0,t=+P[0],n=+P[1],x):[t-e,n-i]},x.extent=function(P){return arguments.length?(e=+P[0][0],i=+P[0][1],t=+P[1][0],n=+P[1][1],x):[[e,i],[t,n]]},x.radius(1)}var PC=6378e3;function kC(e,i){var t=e.dataArray,n=i.size,r=n===void 0?10:n,o=i.method,u=o===void 0?"sum":o,f=r/(2*Math.PI*PC)*(256<<20)/2,g=t.map(function(G){var $=xs(G.coordinates),Ee=(0,Mr.Z)($,2),Se=Ee[0],Re=Ee[1];return(0,oe.Z)((0,oe.Z)({},G),{},{coordinates:[Se,Re]})}),x=RC().radius(f).x(function(G){return G.coordinates[0]}).y(function(G){return G.coordinates[1]}),I=x(g),P={dataArray:I.map(function(G,$){var Ee;if(i.field&&u){var Se=el(G,i.field);G[u]=Eu[u](Se)}return Ee={},(0,He.Z)(Ee,i.method,G[u]),(0,He.Z)(Ee,"count",G.length),(0,He.Z)(Ee,"rawData",G),(0,He.Z)(Ee,"coordinates",[G.x,G.y]),(0,He.Z)(Ee,"_id",$),Ee}),radius:f,xOffset:f,yOffset:f,type:"hexagon"};return P}function LC(e,i){var t=i.sourceField,n=i.targetField,r=i.data,o={};return r.forEach(function(u){o[u[t]]=u}),e.dataArray=e.dataArray.map(function(u){var f=u[n];return(0,oe.Z)((0,oe.Z)({},u),o[f])}),e}function DC(e,i){var t=i.callback;return t&&(e.dataArray=e.dataArray.map(t)),e}D("rasterTile",oC),D("mvt",Tc),D("geojsonvt",$n),D("testTile",lC),D("geojson",ni),D("image",Bl),D("csv",Jn),D("json",zr),D("raster",gf),D("rasterRgb",yf),B("cluster",ux),B("filter",xC),B("join",LC),B("map",DC),B("grid",EC),B("hexagon",kC);var Bg=_C;function FC(e){var i=NC();return function(){var n=(0,rr.Z)(e),r;if(i){var o=(0,rr.Z)(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return(0,jn.Z)(this,r)}}function NC(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var BC=function(e){(0,ui.Z)(t,e);var i=FC(t);function t(n){var r;return(0,Ur.Z)(this,t),r=i.call(this),(0,He.Z)((0,er.Z)(r),"added",!1),(0,He.Z)((0,er.Z)(r),"eventHandle",function(o){r.emit(o.type,{target:o,data:r.markerOption.extData,lngLat:r.lngLat})}),r.markerOption=(0,oe.Z)((0,oe.Z)({},r.getDefault()),n),N(["update","onMove","onMapClick"],(0,er.Z)(r)),r.init(),r}return(0,Jr.Z)(t,[{key:"getMarkerLayerContainerSize",value:function(){}},{key:"getDefault",value:function(){return{element:void 0,anchor:Ts.BOTTOM,offsets:[0,0],color:"#5B8FF9",draggable:!1}}},{key:"addTo",value:function(r){this.scene=r,this.mapsService=r.get(Ln.IMapService),this.sceneSerive=r.get(Ln.ISceneService);var o=this.markerOption.element;return this.mapsService.getMarkerContainer().appendChild(o),this.registerMarkerEvent(o),this.mapsService.on("camerachange",this.update),this.mapsService.on("viewchange",this.update),this.update(),this.added=!0,this.emit("added"),this}},{key:"remove",value:function(){this.mapsService&&(this.mapsService.off("click",this.onMapClick),this.mapsService.off("move",this.update),this.mapsService.off("moveend",this.update)),this.unRegisterMarkerEvent(),this.removeAllListeners();var r=this.markerOption.element;return r&&ns(r),this.popup&&this.popup.remove(),this}},{key:"setLnglat",value:function(r){return this.lngLat=r,Array.isArray(r)&&(this.lngLat={lng:r[0],lat:r[1]}),this.popup&&this.popup.setLnglat(this.lngLat),this.update(),this}},{key:"getLnglat",value:function(){return this.lngLat}},{key:"getElement",value:function(){return this.markerOption.element}},{key:"setElement",value:function(r){var o=this;if(!this.added)return this.once("added",function(){o.setElement(r)}),this;var u=this.markerOption.element;return u&&ns(u),this.markerOption.element=r,this.init(),this.mapsService.getMarkerContainer().appendChild(r),this.registerMarkerEvent(r),this.update(),this}},{key:"openPopup",value:function(){var r=this;if(!this.added)return this.once("added",function(){r.openPopup()}),this;var o=this.popup;return o?(o.isOpen()||o.addTo(this.scene),this):this}},{key:"closePopup",value:function(){var r=this;this.added||this.once("added",function(){r.closePopup()});var o=this.popup;return o&&o.remove(),this}},{key:"setPopup",value:function(r){return this.popup=r,this.lngLat&&this.popup.setLnglat(this.lngLat),this}},{key:"togglePopup",value:function(){var r=this.popup;if(r)r.isOpen()?r.remove():r.addTo(this.scene);else return this;return this}},{key:"getPopup",value:function(){return this.popup}},{key:"getOffset",value:function(){return this.markerOption.offsets}},{key:"setDraggable",value:function(r){throw new Error("Method not implemented.")}},{key:"isDraggable",value:function(){return this.markerOption.draggable}},{key:"getExtData",value:function(){return this.markerOption.extData}},{key:"setExtData",value:function(r){this.markerOption.extData=r}},{key:"update",value:function(){if(!!this.mapsService){var r=this.markerOption,o=r.element,u=r.anchor;this.updatePosition(),lu(o,"".concat(rl[u]))}}},{key:"onMapClick",value:function(r){var o=this.markerOption.element;this.popup&&o&&this.togglePopup()}},{key:"getCurrentContainerSize",value:function(){var r=this.mapsService.getContainer();return{containerHeight:(r==null?void 0:r.scrollHeight)||0,containerWidth:(r==null?void 0:r.scrollWidth)||0,bounds:this.mapsService.getBounds()}}},{key:"updatePosition",value:function(){if(!!this.mapsService){var r=this.markerOption,o=r.element,u=r.offsets,f=this.lngLat,g=f.lng,x=f.lat,I=this.mapsService.lngLatToContainer([g,x]);if(o){o.style.display="block",o.style.whiteSpace="nowrap";var P=this.getMarkerLayerContainerSize()||this.getCurrentContainerSize(),G=P.containerHeight,$=P.containerWidth,Ee=P.bounds;if(!Ee)return;if(Math.abs(Ee[0][0])>180||Math.abs(Ee[1][0])>180){if(I.x>$){var Se=this.mapsService.lngLatToContainer([g-360,x]);I.x=Se.x}if(I.x<0){var Re=this.mapsService.lngLatToContainer([g+360,x]);I.x=Re.x}}(I.x>$||I.x<0||I.y>G||I.y<0)&&(o.style.display="none"),o.style.left=I.x+u[0]+"px",o.style.top=I.y-u[1]+"px"}}}},{key:"init",value:function(){var r=this,o=this.markerOption.element,u=this.markerOption,f=u.color,g=u.anchor;if(!o){this.defaultMarker=!0,o=Ua("div"),this.markerOption.element=o;var x=document.createElementNS("http://www.w3.org/2000/svg","svg");x.setAttributeNS(null,"display","block"),x.setAttributeNS(null,"height","48px"),x.setAttributeNS(null,"width","48px"),x.setAttributeNS(null,"viewBox","0 0 1024 1024");var I=document.createElementNS("http://www.w3.org/2000/svg","path");I.setAttributeNS(null,"d","M512 490.666667C453.12 490.666667 405.333333 442.88 405.333333 384 405.333333 325.12 453.12 277.333333 512 277.333333 570.88 277.333333 618.666667 325.12 618.666667 384 618.666667 442.88 570.88 490.666667 512 490.666667M512 85.333333C346.88 85.333333 213.333333 218.88 213.333333 384 213.333333 608 512 938.666667 512 938.666667 512 938.666667 810.666667 608 810.666667 384 810.666667 218.88 677.12 85.333333 512 85.333333Z"),I.setAttributeNS(null,"fill",f),x.appendChild(I),o.appendChild(x)}Vu(o,"l7-marker"),Object.keys(this.markerOption.style||{}).forEach(function(P){var G,$,Ee=((G=r.markerOption)===null||G===void 0?void 0:G.style)&&(($=r.markerOption)===null||$===void 0?void 0:$.style[P]);o&&(o.style[P]=Ee)}),o.addEventListener("click",function(P){r.onMapClick(P)}),o.addEventListener("click",this.eventHandle),Nu(o,g,"marker")}},{key:"registerMarkerEvent",value:function(r){r.addEventListener("mousemove",this.eventHandle),r.addEventListener("click",this.eventHandle),r.addEventListener("mousedown",this.eventHandle),r.addEventListener("mouseup",this.eventHandle),r.addEventListener("dblclick",this.eventHandle),r.addEventListener("contextmenu",this.eventHandle),r.addEventListener("mouseover",this.eventHandle),r.addEventListener("mouseout",this.eventHandle)}},{key:"unRegisterMarkerEvent",value:function(){var r=this.getElement();r.removeEventListener("mousemove",this.eventHandle),r.removeEventListener("click",this.eventHandle),r.removeEventListener("mousedown",this.eventHandle),r.removeEventListener("mouseup",this.eventHandle),r.removeEventListener("dblclick",this.eventHandle),r.removeEventListener("contextmenu",this.eventHandle),r.removeEventListener("mouseover",this.eventHandle),r.removeEventListener("mouseout",this.eventHandle)}},{key:"addDragHandler",value:function(r){return null}},{key:"onUp",value:function(r){throw new Error("Method not implemented.")}}]),t}(ir.EventEmitter);function zC(e){var i=UC();return function(){var n=(0,rr.Z)(e),r;if(i){var o=(0,rr.Z)(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return(0,jn.Z)(this,r)}}function UC(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var L7=function(e){(0,ui.Z)(t,e);var i=zC(t);function t(n){var r,o;return(0,Ur.Z)(this,t),o=i.call(this),(0,He.Z)((0,er.Z)(o),"markers",[]),(0,He.Z)((0,er.Z)(o),"points",[]),(0,He.Z)((0,er.Z)(o),"clusterMarkers",[]),o.markerLayerOption=(0,Wr.merge)(o.getDefault(),n),N(["update"],(0,er.Z)(o)),o.zoom=((r=o.markerLayerOption.clusterOption)===null||r===void 0?void 0:r.zoom)||-99,o}return(0,Jr.Z)(t,[{key:"getDefault",value:function(){return{cluster:!1,clusterOption:{radius:80,maxZoom:20,minZoom:0,zoom:-99,style:{},className:""}}}},{key:"addTo",value:function(r){return this.scene=r,this.mapsService=r.get(Ln.IMapService),this.markerLayerOption.cluster&&(this.initCluster(),this.update(),this.mapsService.on("camerachange",this.update),this.mapsService.on("viewchange",this.update)),this.mapsService.on("camerachange",this.setContainerSize.bind(this)),this.mapsService.on("viewchange",this.setContainerSize.bind(this)),this.addMarkers(),this.inited=!0,this}},{key:"setContainerSize",value:function(){if(!!this.mapsService){var r=this.mapsService.getContainer();this.containerSize={containerWidth:(r==null?void 0:r.scrollWidth)||0,containerHeight:(r==null?void 0:r.scrollHeight)||0,bounds:this.mapsService.getBounds()}}}},{key:"getContainerSize",value:function(){return this.containerSize}},{key:"addMarker",value:function(r){var o=this.markerLayerOption.cluster;if(r.getMarkerLayerContainerSize=this.getContainerSize.bind(this),o&&(this.addPoint(r,this.markers.length),this.mapsService)){var u=this.mapsService.getZoom(),f=this.mapsService.getBounds();this.bbox=cl(f,.5),this.zoom=Math.floor(u),this.getClusterMarker(this.bbox,this.zoom)}this.markers.push(r)}},{key:"removeMarker",value:function(r){this.markers.indexOf(r);var o=this.markers.indexOf(r);o>-1&&this.markers.splice(o,1)}},{key:"hide",value:function(){this.markers.map(function(r){r.getElement().style.opacity="0"}),this.clusterMarkers.map(function(r){r.getElement().style.opacity="0"})}},{key:"show",value:function(){this.markers.map(function(r){r.getElement().style.opacity="1"}),this.clusterMarkers.map(function(r){r.getElement().style.opacity="1"})}},{key:"getMarkers",value:function(){var r=this.markerLayerOption.cluster;return r?this.clusterMarkers:this.markers}},{key:"addMarkers",value:function(){var r=this;this.getMarkers().forEach(function(o){o.addTo(r.scene)})}},{key:"clear",value:function(){this.markers.forEach(function(r){r.remove()}),this.clusterMarkers.forEach(function(r){r.remove()}),this.markers=[],this.points=[],this.clusterMarkers=[]}},{key:"destroy",value:function(){this.clear(),this.removeAllListeners(),this.mapsService.off("camerachange",this.update),this.mapsService.off("viewchange",this.update),this.mapsService.off("camerachange",this.setContainerSize.bind(this)),this.mapsService.off("viewchange",this.setContainerSize.bind(this))}},{key:"addPoint",value:function(r,o){var u=r.getLnglat(),f=u.lng,g=u.lat,x={geometry:{type:"Point",coordinates:[f,g]},properties:(0,oe.Z)((0,oe.Z)({},r.getExtData()),{},{marker_id:o})};this.points.push(x),this.clusterIndex&&this.clusterIndex.load(this.points)}},{key:"initCluster",value:function(){if(!!this.markerLayerOption.cluster){var r=this.markerLayerOption.clusterOption,o=r.radius,u=r.minZoom,f=u===void 0?0:u,g=r.maxZoom;this.clusterIndex=new(sx())({radius:o,minZoom:f,maxZoom:g}),this.clusterIndex.load(this.points)}}},{key:"getClusterMarker",value:function(r,o){var u=this,f=r[0].concat(r[1]),g=this.clusterIndex.getClusters(f,o);this.clusterMarkers.forEach(function(x){x.remove()}),this.clusterMarkers=[],g.forEach(function(x){var I,P=u.markerLayerOption.clusterOption,G=P.field,$=P.method;if((I=x.properties)!==null&&I!==void 0&&I.cluster_id){var Ee,Se=u.getLeaves((Ee=x.properties)===null||Ee===void 0?void 0:Ee.cluster_id);if(x.properties.clusterData=Se,G&&$){var Re=Se==null?void 0:Se.map(function(Kt){var Tr=(0,He.Z)({},G,Kt.properties[G]);return Tr}),Ye=el(Re,G),St=bc($,Ye),vt="point_"+$;x.properties[vt]=St.toFixed(2)}}var Ut=u.clusterMarker(x);u.clusterMarkers.push(Ut),Ut.addTo(u.scene)})}},{key:"getLeaves",value:function(r){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1/0,u=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0;return r?this.clusterIndex.getLeaves(r,o,u):null}},{key:"clusterMarker",value:function(r){var o=this.markerLayerOption.clusterOption,u=o,f=u.element,g=f===void 0?this.generateElement.bind(this):f,x=new BC({element:g(r)}).setLnglat({lng:r.geometry.coordinates[0],lat:r.geometry.coordinates[1]});return x}},{key:"normalMarker",value:function(r){var o=r.properties.marker_id;return this.markers[o]}},{key:"update",value:function(){if(!!this.mapsService&&this.markers.length!==0){var r=this.mapsService.getZoom(),o=this.mapsService.getBounds();(!this.bbox||Math.abs(r-this.zoom)>=1||!Dl(this.bbox,o))&&(this.bbox=cl(o,.5),this.zoom=Math.floor(r),this.getClusterMarker(this.bbox,this.zoom))}}},{key:"generateElement",value:function(r){var o=Ua("div","l7-marker-cluster"),u=Ua("div","",o),f=Ua("span","",u),g=this.markerLayerOption.clusterOption,x=g.field,I=g.method;r.properties.point_count=r.properties.point_count||1;var P=x&&I?r.properties["point_"+I]||r.properties[x]:r.properties.point_count;return f.textContent=P,o}}]),t}(ir.EventEmitter),D7=c(74800);function ZC(e){var i=jC();return function(){var n=(0,rr.Z)(e),r;if(i){var o=(0,rr.Z)(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return(0,jn.Z)(this,r)}}function jC(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var Wv=function(e){(0,ui.Z)(t,e);var i=ZC(t);function t(n){var r;return(0,Ur.Z)(this,t),r=i.call(this),t.controlCount++,r.controlOption=(0,oe.Z)((0,oe.Z)({},r.getDefault(n)),n||{}),r}return(0,Jr.Z)(t,[{key:"getOptions",value:function(){return this.controlOption}},{key:"setOptions",value:function(r){var o=this.getDefault(r);Object.entries(r).forEach(function(u){var f=(0,Mr.Z)(u,2),g=f[0],x=f[1];x===void 0&&(r[g]=o[g])}),"position"in r&&this.setPosition(r.position),"className"in r&&this.setClassName(r.className),"style"in r&&this.setStyle(r.style),this.controlOption=(0,oe.Z)((0,oe.Z)({},this.controlOption),r)}},{key:"addTo",value:function(r){this.mapsService=r.get(Ln.IMapService),this.renderService=r.get(Ln.IRendererService),this.layerService=r.get(Ln.ILayerService),this.controlService=r.get(Ln.IControlService),this.configService=r.get(Ln.IGlobalConfigService),this.scene=r.get(Ln.ISceneService),this.sceneContainer=r,this.isShow=!0,this.container=this.onAdd(),Vu(this.container,"l7-control");var o=this.controlOption,u=o.className,f=o.style;return u&&this.setClassName(u),f&&this.setStyle(f),this.insertContainer(),this.emit("add",this),this}},{key:"remove",value:function(){if(!this.mapsService)return this;ns(this.container),this.onRemove(),this.emit("remove",this)}},{key:"onAdd",value:function(){return Ua("div")}},{key:"onRemove",value:function(){}},{key:"show",value:function(){var r=this.container;lc(r,"l7-control--hide"),this.isShow=!0,this.emit("show",this)}},{key:"hide",value:function(){var r=this.container;Vu(r,"l7-control--hide"),this.isShow=!1,this.emit("hide",this)}},{key:"getDefault",value:function(r){return{position:mh.TOPRIGHT,name:"".concat(t.controlCount)}}},{key:"getContainer",value:function(){return this.container}},{key:"getIsShow",value:function(){return this.isShow}},{key:"_refocusOnMap",value:function(r){if(this.mapsService&&r&&r.screenX>0&&r.screenY>0){var o=this.mapsService.getContainer();o!==null&&o.focus()}}},{key:"setPosition",value:function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:mh.TOPLEFT,o=this.controlService;return o&&o.removeControl(this),this.controlOption.position=r,o&&o.addControl(this,this.sceneContainer),this}},{key:"setClassName",value:function(r){var o=this.container,u=this.controlOption.className;u&&lc(o,u),r&&Vu(o,r)}},{key:"setStyle",value:function(r){var o=this.container;r?o.setAttribute("style",r):o.removeAttribute("style")}},{key:"insertContainer",value:function(){var r=this.controlOption.position,o=this.container;if(r instanceof Element)r.appendChild(o);else{var u=this.controlService.controlCorners[r];r.indexOf("bottom")!==-1?u.insertBefore(o,u.firstChild):u.appendChild(o)}}},{key:"checkUpdateOption",value:function(r,o){return o.some(function(u){return u in r})}}]),t}(Br());(0,He.Z)(Wv,"controlCount",0);function VC(e){var i=GC();return function(){var n=(0,rr.Z)(e),r;if(i){var o=(0,rr.Z)(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return(0,jn.Z)(this,r)}}function GC(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var bm=function(e){(0,ui.Z)(t,e);var i=VC(t);function t(){var n;(0,Ur.Z)(this,t);for(var r=arguments.length,o=new Array(r),u=0;u<r;u++)o[u]=arguments[u];return n=i.call.apply(i,[this].concat(o)),(0,He.Z)((0,er.Z)(n),"isDisable",!1),n}return(0,Jr.Z)(t,[{key:"setIsDisable",value:function(r){if(this.isDisable=r,r){var o;(o=this.button)===null||o===void 0||o.setAttribute("disabled","true")}else{var u;(u=this.button)===null||u===void 0||u.removeAttribute("disabled")}}},{key:"createButton",value:function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";return Ua("button","l7-button-control ".concat(r))}},{key:"onAdd",value:function(){this.button=this.createButton(),this.isDisable=!1;var r=this.controlOption,o=r.title,u=r.btnText,f=r.btnIcon;return this.setBtnTitle(o),this.setBtnText(u),this.setBtnIcon(f),this.button}},{key:"onRemove",value:function(){this.button=this.buttonIcon=this.buttonText=void 0,this.isDisable=!1}},{key:"setOptions",value:function(r){var o=r.title,u=r.btnText,f=r.btnIcon;this.checkUpdateOption(r,["title"])&&this.setBtnTitle(o),this.checkUpdateOption(r,["btnIcon"])&&this.setBtnIcon(f),this.checkUpdateOption(r,["btnText"])&&this.setBtnText(u),zu((0,rr.Z)(t.prototype),"setOptions",this).call(this,r)}},{key:"setBtnTitle",value:function(r){var o;(o=this.button)===null||o===void 0||o.setAttribute("title",r!=null?r:"")}},{key:"setBtnIcon",value:function(r){if(this.buttonIcon&&ns(this.buttonIcon),r){var o,u=(o=this.button)===null||o===void 0?void 0:o.firstChild;if(u){var f;(f=this.button)===null||f===void 0||f.insertBefore(r,u)}else{var g;(g=this.button)===null||g===void 0||g.appendChild(r)}this.buttonIcon=r}}},{key:"setBtnText",value:function(r){if(!!this.button)if(lc(this.button,"l7-button-control--row"),lc(this.button,"l7-button-control--column"),r){var o=this.buttonText;if(!o){var u;o=Ua("div","l7-button-control__text"),(u=this.button)===null||u===void 0||u.appendChild(o),this.buttonText=o}o.innerText=r,Vu(this.button,this.controlOption.vertical?"l7-button-control--column":"l7-button-control--row")}else!r&&this.buttonText&&(ns(this.buttonText),this.buttonText=void 0)}}]),t}(Wv);function HC(e){var i=WC();return function(){var n=(0,rr.Z)(e),r;if(i){var o=(0,rr.Z)(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return(0,jn.Z)(this,r)}}function WC(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var px=function(e){(0,ui.Z)(t,e);var i=HC(t);function t(n,r){var o;return(0,Ur.Z)(this,t),o=i.call(this),(0,He.Z)((0,er.Z)(o),"isShow",!1),(0,He.Z)((0,er.Z)(o),"timeout",null),(0,He.Z)((0,er.Z)(o),"show",function(){return o.isShow||!o.contentDOM.innerHTML||(o.resetPopperPosition(),lc(o.popperDOM,"l7-popper-hide"),o.isShow=!0,o.option.unique&&t.conflictPopperList.forEach(function(u){u!==(0,er.Z)(o)&&u.isShow&&u.hide()}),o.emit("show")),(0,er.Z)(o)}),(0,He.Z)((0,er.Z)(o),"hide",function(){return o.isShow&&(Vu(o.popperDOM,"l7-popper-hide"),o.isShow=!1,o.emit("hide")),(0,er.Z)(o)}),(0,He.Z)((0,er.Z)(o),"setHideTimeout",function(){o.timeout||(o.timeout=window.setTimeout(function(){!o.isShow||(o.hide(),o.timeout=null)},300))}),(0,He.Z)((0,er.Z)(o),"clearHideTimeout",function(){o.timeout&&(window.clearTimeout(o.timeout),o.timeout=null)}),(0,He.Z)((0,er.Z)(o),"onBtnClick",function(){o.isShow?o.hide():o.show()}),(0,He.Z)((0,er.Z)(o),"onBtnMouseLeave",function(){o.setHideTimeout()}),(0,He.Z)((0,er.Z)(o),"onBtnMouseMove",function(){o.clearHideTimeout(),!o.isShow&&o.show()}),o.button=n,o.option=r,o.init(),r.unique&&t.conflictPopperList.push((0,er.Z)(o)),o}return(0,Jr.Z)(t,[{key:"buttonRect",get:function(){return this.button.getBoundingClientRect()}},{key:"getPopperDOM",value:function(){return this.popperDOM}},{key:"getIsShow",value:function(){return this.isShow}},{key:"getContent",value:function(){return this.content}},{key:"setContent",value:function(r){typeof r=="string"?this.contentDOM.innerHTML=r:r instanceof HTMLElement&&(ia(this.contentDOM),this.contentDOM.appendChild(r)),this.content=r}},{key:"init",value:function(){var r=this.option.trigger;this.popperDOM=this.createPopper(),r==="click"?this.button.addEventListener("click",this.onBtnClick):(this.button.addEventListener("mousemove",this.onBtnMouseMove),this.button.addEventListener("mouseleave",this.onBtnMouseLeave),this.popperDOM.addEventListener("mousemove",this.onBtnMouseMove),this.popperDOM.addEventListener("mouseleave",this.onBtnMouseLeave))}},{key:"destroy",value:function(){this.button.removeEventListener("click",this.onBtnClick),this.button.removeEventListener("mousemove",this.onBtnMouseMove),this.button.removeEventListener("mousemove",this.onBtnMouseLeave),this.popperDOM.removeEventListener("mousemove",this.onBtnMouseMove),this.popperDOM.removeEventListener("mouseleave",this.onBtnMouseLeave),ns(this.popperDOM)}},{key:"resetPopperPosition",value:function(){var r={},o=this.option,u=o.container,f=o.offset,g=f===void 0?[0,0]:f,x=o.placement,I=(0,Mr.Z)(g,2),P=I[0],G=I[1],$=this.button.getBoundingClientRect(),Ee=u.getBoundingClientRect(),Se=ku($,Ee),Re=Se.left,Ye=Se.right,St=Se.top,vt=Se.bottom,Ut=!1,Kt=!1;/^(left|right)/.test(x)?(x.includes("left")?r.right="".concat($.width+Ye,"px"):x.includes("right")&&(r.left="".concat($.width+Re,"px")),x.includes("start")?r.top="".concat(St,"px"):x.includes("end")?r.bottom="".concat(vt,"px"):(r.top="".concat(St+$.height/2,"px"),Kt=!0,r.transform="translate(".concat(P,"px, calc(").concat(G,"px - 50%))"))):/^(top|bottom)/.test(x)&&(x.includes("top")?r.bottom="".concat($.height+vt,"px"):x.includes("bottom")&&(r.top="".concat($.height+St,"px")),x.includes("start")?r.left="".concat(Re,"px"):x.includes("end")?r.right="".concat(Ye,"px"):(r.left="".concat(Re+$.width/2,"px"),Ut=!0,r.transform="translate(calc(".concat(P,"px - 50%), ").concat(G,"px)"))),r.transform="translate(calc(".concat(P,"px - ").concat(Ut?"50%":"0%","), calc(").concat(G,"px - ").concat(Kt?"50%":"0%",")");var Tr=x.split("-");Tr.length&&Vu(this.popperDOM,Tr.map(function(on){return"l7-popper-".concat(on)}).join(" ")),Gs(this.popperDOM,Il(r))}},{key:"createPopper",value:function(){var r=this.option,o=r.container,u=r.className,f=u===void 0?"":u,g=r.content,x=Ua("div","l7-popper l7-popper-hide ".concat(f)),I=Ua("div","l7-popper-content"),P=Ua("div","l7-popper-arrow");return x.appendChild(I),x.appendChild(P),o.appendChild(x),this.popperDOM=x,this.contentDOM=I,g&&this.setContent(g),x}}]),t}(ir.EventEmitter);(0,He.Z)(px,"conflictPopperList",[]);function $C(e){var i=XC();return function(){var n=(0,rr.Z)(e),r;if(i){var o=(0,rr.Z)(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return(0,jn.Z)(this,r)}}function XC(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var YC={topleft:"right-start",topcenter:"bottom",topright:"left-start",bottomleft:"right-end",bottomcenter:"top",bottomright:"left-end",lefttop:"bottom-start",leftcenter:"right",leftbottom:"top-start",righttop:"bottom-end",rightcenter:"left",rightbottom:"top-end"},KC=function(e){(0,ui.Z)(t,e);var i=$C(t);function t(){return(0,Ur.Z)(this,t),i.apply(this,arguments)}return(0,Jr.Z)(t,[{key:"getPopper",value:function(){return this.popper}},{key:"hide",value:function(){this.popper.hide(),zu((0,rr.Z)(t.prototype),"hide",this).call(this)}},{key:"getDefault",value:function(r){var o,u=zu((0,rr.Z)(t.prototype),"getDefault",this).call(this,r),f=(o=r==null?void 0:r.position)!==null&&o!==void 0?o:u.position;return(0,oe.Z)((0,oe.Z)({},zu((0,rr.Z)(t.prototype),"getDefault",this).call(this,r)),{},{popperPlacement:f instanceof Element?"bottom":YC[f],popperTrigger:"click"})}},{key:"onAdd",value:function(){var r=zu((0,rr.Z)(t.prototype),"onAdd",this).call(this);return this.initPopper(),r}},{key:"onRemove",value:function(){this.popper.destroy()}},{key:"initPopper",value:function(){var r=this,o=this.controlOption,u=o.popperClassName,f=o.popperPlacement,g=o.popperTrigger,x=this.mapsService.getMapContainer();return this.popper=new px(this.button,{className:u,placement:f,trigger:g,container:x,unique:!0}),this.popper.on("show",function(){r.emit("popperShow",r)}).on("hide",function(){r.emit("popperHide",r)}),this.popper}},{key:"setOptions",value:function(r){if(zu((0,rr.Z)(t.prototype),"setOptions",this).call(this,r),this.checkUpdateOption(r,["popperPlacement","popperTrigger","popperClassName"])){var o=this.popper.getContent();this.popper.destroy(),this.initPopper(),this.popper.setContent(o)}}}]),t}(bm);function QC(e){var i=JC();return function(){var n=(0,rr.Z)(e),r;if(i){var o=(0,rr.Z)(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return(0,jn.Z)(this,r)}}function JC(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var Td;(function(e){e.ActiveOptionClassName="l7-select-control-item-active",e.OptionValueAttrKey="data-option-value",e.OptionIndexAttrKey="data-option-index"})(Td||(Td={}));var hx=function(e){(0,ui.Z)(t,e);var i=QC(t);function t(){var n;(0,Ur.Z)(this,t);for(var r=arguments.length,o=new Array(r),u=0;u<r;u++)o[u]=arguments[u];return n=i.call.apply(i,[this].concat(o)),(0,He.Z)((0,er.Z)(n),"selectValue",[]),(0,He.Z)((0,er.Z)(n),"createNormalOption",function(f){var g=n.selectValue.includes(f.value),x=Ua("div","l7-select-control-item ".concat(g?Td.ActiveOptionClassName:""));n.getIsMultiple()&&x.appendChild(n.createCheckbox(g)),f.icon&&x.appendChild(f.icon);var I=Ua("span");return I.innerText=f.text,x.appendChild(I),x}),(0,He.Z)((0,er.Z)(n),"onItemClick",function(f){if(n.getIsMultiple()){var g=n.selectValue.findIndex(function(x){return x===f.value});g>-1?n.selectValue.splice(g,1):n.selectValue=[].concat((0,ie.Z)(n.selectValue),[f.value])}else n.selectValue=[f.value];n.setSelectValue(n.selectValue)}),n}return(0,Jr.Z)(t,[{key:"setOptions",value:function(r){zu((0,rr.Z)(t.prototype),"setOptions",this).call(this,r);var o=r.options;o&&this.popper.setContent(this.getPopperContent(o))}},{key:"onAdd",value:function(){var r=zu((0,rr.Z)(t.prototype),"onAdd",this).call(this),o=this.controlOption.defaultValue;return o&&(this.selectValue=this.transSelectValue(o)),this.popper.setContent(this.getPopperContent(this.controlOption.options)),r}},{key:"getSelectValue",value:function(){return this.getIsMultiple()?this.selectValue:this.selectValue[0]}},{key:"setSelectValue",value:function(r){var o=this,u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,f=this.transSelectValue(r);this.optionDOMList.forEach(function(g){var x=g.getAttribute(Td.OptionValueAttrKey),I=o.getIsMultiple()?g.querySelector("input[type=checkbox]"):void 0;f.includes(x)?(Vu(g,Td.ActiveOptionClassName),I&&ec(I,!0)):(lc(g,Td.ActiveOptionClassName),I&&ec(I,!1))}),this.selectValue=f,u&&this.emit("selectChange",this.getIsMultiple()?f:f[0])}},{key:"getIsMultiple",value:function(){return!1}},{key:"getPopperContent",value:function(r){var o=this,u=this.isImageOptions(),f=Ua("div",u?"l7-select-control--image":"l7-select-control--normal");this.getIsMultiple()&&Vu(f,"l7-select-control--multiple");var g=r.map(function(x,I){var P=u?o.createImageOption(x):o.createNormalOption(x);return P.setAttribute(Td.OptionValueAttrKey,x.value),P.setAttribute(Td.OptionIndexAttrKey,window.String(I)),P.addEventListener("click",o.onItemClick.bind(o,x)),P});return f.append.apply(f,(0,ie.Z)(g)),this.optionDOMList=g,f}},{key:"createImageOption",value:function(r){var o=this.selectValue.includes(r.value),u=Ua("div","l7-select-control-item ".concat(o?Td.ActiveOptionClassName:"")),f=Ua("img");f.setAttribute("src",r.img),lf(f),u.appendChild(f);var g=Ua("div","l7-select-control-item-row");this.getIsMultiple()&&u.appendChild(this.createCheckbox(o));var x=Ua("span");return x.innerText=r.text,g.appendChild(x),u.appendChild(g),u}},{key:"createCheckbox",value:function(r){var o=Ua("input");return o.setAttribute("type","checkbox"),r&&ec(o,!0),o}},{key:"isImageOptions",value:function(){return!!this.controlOption.options.find(function(r){return r.img})}},{key:"transSelectValue",value:function(r){return Array.isArray(r)?r:[r]}}]),t}(KC);function qC(e){var i=eT();return function(){var n=(0,rr.Z)(e),r;if(i){var o=(0,rr.Z)(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return(0,jn.Z)(this,r)}}function eT(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var tT=function(e){(0,ui.Z)(t,e);var i=qC(t);function t(){return(0,Ur.Z)(this,t),i.apply(this,arguments)}return(0,Jr.Z)(t,[{key:"getDefault",value:function(){return{position:mh.BOTTOMLEFT,name:"logo",href:"https://l7.antv.antgroup.com/",img:"https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*GRb1TKp4HcMAAAAAAAAAAAAAARQnAQ"}}},{key:"onAdd",value:function(){var r=Ua("div","l7-control-logo");return this.setLogoContent(r),r}},{key:"onRemove",value:function(){return null}},{key:"setOptions",value:function(r){zu((0,rr.Z)(t.prototype),"setOptions",this).call(this,r),this.checkUpdateOption(r,["img","href"])&&(ia(this.container),this.setLogoContent(this.container))}},{key:"setLogoContent",value:function(r){var o=this.controlOption,u=o.href,f=o.img,g=Ua("img");if(g.setAttribute("src",f),g.setAttribute("aria-label","AntV logo"),lf(g),u){var x=Ua("a","l7-control-logo-link");x.target="_blank",x.href=u,x.rel="noopener nofollow",x.setAttribute("rel","noopener nofollow"),x.appendChild(g),r.appendChild(x)}else r.appendChild(g)}}]),t}(Wv),Md=function(i){var t=document.createElementNS("http://www.w3.org/2000/svg","svg");t.classList.add("l7-iconfont"),t.setAttribute("aria-hidden","true");var n=document.createElementNS("http://www.w3.org/2000/svg","use");return n.setAttributeNS("http://www.w3.org/1999/xlink","href","#".concat(i)),t.appendChild(n),t};function dx(e,i){var t=typeof Symbol!="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(!t){if(Array.isArray(e)||(t=rT(e))||i&&e&&typeof e.length=="number"){t&&(e=t);var n=0,r=function(){};return{s:r,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(x){throw x},f:r}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var o=!0,u=!1,f;return{s:function(){t=t.call(e)},n:function(){var x=t.next();return o=x.done,x},e:function(x){u=!0,f=x},f:function(){try{!o&&t.return!=null&&t.return()}finally{if(u)throw f}}}}function rT(e,i){if(!!e){if(typeof e=="string")return vx(e,i);var t=Object.prototype.toString.call(e).slice(8,-1);if(t==="Object"&&e.constructor&&(t=e.constructor.name),t==="Map"||t==="Set")return Array.from(e);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return vx(e,i)}}function vx(e,i){(i==null||i>e.length)&&(i=e.length);for(var t=0,n=new Array(i);t<i;t++)n[t]=e[t];return n}var mx=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror"],["webkitRequestFullScreen","webkitCancelFullScreen","webkitCurrentFullScreenElement","webkitCancelFullScreen","webkitfullscreenchange","webkitfullscreenerror"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError"]],Id=function(){if(typeof document=="undefined")return!1;var e=mx[0],i={},t=dx(mx),n;try{for(t.s();!(n=t.n()).done;){var r=n.value,o=r==null?void 0:r[1];if(o in document){var u=dx(r.entries()),f;try{for(u.s();!(f=u.n()).done;){var g=(0,Mr.Z)(f.value,2),x=g[0],I=g[1];i[e[x]]=I}}catch(P){u.e(P)}finally{u.f()}return i}}}catch(P){t.e(P)}finally{t.f()}return!1}(),gx={change:Id.fullscreenchange,error:Id.fullscreenerror},Mh={request:function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:document.documentElement,t=arguments.length>1?arguments[1]:void 0;return new Promise(function(n,r){var o=function f(){Mh.off("change",f),n()};Mh.on("change",o);var u=i[Id.requestFullscreen](t);u instanceof Promise&&u.then(o).catch(r)})},exit:function(){return new Promise(function(i,t){if(!Mh.isFullscreen){i();return}var n=function o(){Mh.off("change",o),i()};Mh.on("change",n);var r=document[Id.exitFullscreen]();r instanceof Promise&&r.then(n).catch(t)})},toggle:function(i,t){return Mh.isFullscreen?Mh.exit():Mh.request(i,t)},onchange:function(i){Mh.on("change",i)},onerror:function(i){Mh.on("error",i)},on:function(i,t){var n=gx[i];n&&document.addEventListener(n,t,!1)},off:function(i,t){var n=gx[i];n&&document.removeEventListener(n,t,!1)},raw:Id};Object.defineProperties(Mh,{isFullscreen:{get:function(){return Boolean(document[Id.fullscreenElement])}},element:{enumerable:!0,get:function(){var i;return(i=document[Id.fullscreenElement])!==null&&i!==void 0?i:void 0}},isEnabled:{enumerable:!0,get:function(){return Boolean(document[Id.fullscreenEnabled])}}}),Id||(Mh={isEnabled:!1});var zg=Mh;function nT(e){var i=iT();return function(){var n=(0,rr.Z)(e),r;if(i){var o=(0,rr.Z)(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return(0,jn.Z)(this,r)}}function iT(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var F7=function(e){(0,ui.Z)(t,e);var i=nT(t);function t(n){var r;return(0,Ur.Z)(this,t),r=i.call(this,n),(0,He.Z)((0,er.Z)(r),"isFullscreen",!1),(0,He.Z)((0,er.Z)(r),"toggleFullscreen",(0,An.Z)(Nt().mark(function o(){return Nt().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:if(!zg.isEnabled){f.next=3;break}return f.next=3,zg.toggle(r.mapContainer);case 3:case"end":return f.stop()}},o)}))),(0,He.Z)((0,er.Z)(r),"onClick",function(){r.toggleFullscreen()}),(0,He.Z)((0,er.Z)(r),"onFullscreenChange",function(){r.isFullscreen=!!document.fullscreenElement;var o=r.controlOption,u=o.btnText,f=o.btnIcon,g=o.title,x=o.exitBtnText,I=o.exitBtnIcon,P=o.exitTitle;r.isFullscreen?(r.setBtnTitle(P),r.setBtnText(x),r.setBtnIcon(I)):(r.setBtnTitle(g),r.setBtnText(u),r.setBtnIcon(f)),r.emit("fullscreenChange",r.isFullscreen)}),zg.isEnabled||console.warn("\u5F53\u524D\u6D4F\u89C8\u5668\u73AF\u5883\u4E0D\u652F\u6301\u5BF9\u5730\u56FE\u5168\u5C4F\u5316"),r}return(0,Jr.Z)(t,[{key:"setOptions",value:function(r){var o=r.exitBtnText,u=r.exitBtnIcon,f=r.exitTitle;this.isFullscreen&&(this.checkUpdateOption(r,["exitBtnIcon"])&&this.setBtnIcon(u),this.checkUpdateOption(r,["exitBtnText"])&&this.setBtnText(o),this.checkUpdateOption(r,["exitTitle"])&&this.setBtnTitle(f)),zu((0,rr.Z)(t.prototype),"setOptions",this).call(this,r)}},{key:"onAdd",value:function(){var r=zu((0,rr.Z)(t.prototype),"onAdd",this).call(this);return r.addEventListener("click",this.onClick),this.mapContainer=ei(this.scene.getSceneConfig().id),this.mapContainer.addEventListener("fullscreenchange",this.onFullscreenChange),r}},{key:"onRemove",value:function(){zu((0,rr.Z)(t.prototype),"onRemove",this).call(this),this.mapContainer.removeEventListener("fullscreenchange",this.onFullscreenChange)}},{key:"getDefault",value:function(r){return(0,oe.Z)((0,oe.Z)({},zu((0,rr.Z)(t.prototype),"getDefault",this).call(this,r)),{},{title:"\u5168\u5C4F",btnIcon:Md("l7-icon-fullscreen"),exitTitle:"\u9000\u51FA\u5168\u5C4F",exitBtnIcon:Md("l7-icon-exit-fullscreen")})}}]),t}(bm);function aT(e){var i=oT();return function(){var n=(0,rr.Z)(e),r;if(i){var o=(0,rr.Z)(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return(0,jn.Z)(this,r)}}function oT(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var N7=function(e){(0,ui.Z)(t,e);var i=aT(t);function t(){var n;(0,Ur.Z)(this,t);for(var r=arguments.length,o=new Array(r),u=0;u<r;u++)o[u]=arguments[u];return n=i.call.apply(i,[this].concat(o)),(0,He.Z)((0,er.Z)(n),"onClick",(0,An.Z)(Nt().mark(function f(){var g;return Nt().wrap(function(I){for(;;)switch(I.prev=I.next){case 0:if(g=n.controlOption.onExport,g!=null){I.next=5;break}I.next=10;break;case 5:return I.t0=g,I.next=8,n.getImage();case 8:I.t1=I.sent,(0,I.t0)(I.t1);case 10:case"end":return I.stop()}},f)}))),(0,He.Z)((0,er.Z)(n),"mergeImage",(0,An.Z)(Nt().mark(function f(){var g,x,I,P,G,$,Ee,Se,Re,Ye,St,vt,Ut,Kt,Tr=arguments;return Nt().wrap(function(dn){for(;;)switch(dn.prev=dn.next){case 0:for(I=n.controlOption.imageType,P=(g=(x=n.mapsService.getContainer())===null||x===void 0?void 0:x.getBoundingClientRect())!==null&&g!==void 0?g:{},G=P.width,$=G===void 0?0:G,Ee=P.height,Se=Ee===void 0?0:Ee,Re=document.createElement("canvas"),Re.width=$,Re.height=Se,Ye=Re.getContext("2d"),St=Tr.length,vt=new Array(St),Ut=0;Ut<St;Ut++)vt[Ut]=Tr[Ut];return dn.next=9,Promise.all(vt.map(function(vn){return new Promise(function(si){var ai=new Image;ai.onload=function(){si(ai)},ai.src=vn})}));case 9:return Kt=dn.sent,Kt.forEach(function(vn){Ye==null||Ye.drawImage(vn,0,0,$,Se)}),dn.abrupt("return",Re.toDataURL("image/".concat(I)));case 12:case"end":return dn.stop()}},f)}))),n}return(0,Jr.Z)(t,[{key:"onAdd",value:function(){var r=zu((0,rr.Z)(t.prototype),"onAdd",this).call(this);return r.addEventListener("click",this.onClick),r}},{key:"getDefault",value:function(r){return(0,oe.Z)((0,oe.Z)({},zu((0,rr.Z)(t.prototype),"getDefault",this).call(this,r)),{},{title:"\u5BFC\u51FA\u56FE\u7247",btnIcon:Md("l7-icon-export-picture"),imageType:"png"})}},{key:"getImage",value:function(){var r=this.mapsService.exportMap("png"),o=this.scene.exportPng("png");return this.mergeImage(r,o)}}]),t}(bm);function sT(e){var i=uT();return function(){var n=(0,rr.Z)(e),r;if(i){var o=(0,rr.Z)(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return(0,jn.Z)(this,r)}}function uT(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var B7=function(e){(0,ui.Z)(t,e);var i=sT(t);function t(n){var r;return(0,Ur.Z)(this,t),r=i.call(this,n),(0,He.Z)((0,er.Z)(r),"getGeoLocation",function(){return new Promise(function(o,u){window.navigator.geolocation.getCurrentPosition(function(f){var g=f.coords,x=g!=null?g:{},I=x.longitude,P=x.latitude;!(0,Wr.isNaN)(I)&&!(0,Wr.isNaN)(P)?o([I,P]):u()},function(f){u(f)})})}),(0,He.Z)((0,er.Z)(r),"onClick",(0,An.Z)(Nt().mark(function o(){var u,f,g;return Nt().wrap(function(I){for(;;)switch(I.prev=I.next){case 0:if(window.navigator.geolocation){I.next=2;break}return I.abrupt("return");case 2:return u=r.controlOption.transform,I.next=5,r.getGeoLocation();case 5:if(f=I.sent,g=r.mapsService.getZoom(),I.t0=r.mapsService,I.t1=g>15?g:15,!u){I.next=15;break}return I.next=12,u(f);case 12:I.t2=I.sent,I.next=16;break;case 15:I.t2=f;case 16:I.t3=I.t2,I.t0.setZoomAndCenter.call(I.t0,I.t1,I.t3);case 18:case"end":return I.stop()}},o)}))),window.navigator.geolocation||console.warn("\u5F53\u524D\u6D4F\u89C8\u5668\u73AF\u5883\u4E0D\u652F\u6301\u83B7\u53D6\u5730\u7406\u5B9A\u4F4D"),r}return(0,Jr.Z)(t,[{key:"getDefault",value:function(r){return(0,oe.Z)((0,oe.Z)({},zu((0,rr.Z)(t.prototype),"getDefault",this).call(this,r)),{},{title:"\u5B9A\u4F4D",btnIcon:Md("l7-icon-reposition")})}},{key:"onAdd",value:function(){var r=zu((0,rr.Z)(t.prototype),"onAdd",this).call(this);return r.addEventListener("click",this.onClick),r}}]),t}(bm),lT={normal:{text:"\u6807\u51C6",img:"https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*-nqiT6Vu948AAAAAAAAAAAAAARQnAQ"},light:{text:"\u6708\u5149\u94F6",img:"https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*J_wYQL_PaUEAAAAAAAAAAAAAARQnAQ"},dark:{text:"\u5E7B\u5F71\u9ED1",img:"https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*U7M9QI1yat4AAAAAAAAAAAAAARQnAQ"},fresh:{text:"\u8349\u8272\u9752",img:"https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*T-oBT4hB5ucAAAAAAAAAAAAAARQnAQ"},grey:{text:"\u96C5\u58EB\u7070",img:"https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*OREXQ4vgQRIAAAAAAAAAAAAAARQnAQ"},graffiti:{text:"\u6D82\u9E26",img:"https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*4UApTKmeiy4AAAAAAAAAAAAAARQnAQ"},macaron:{text:"\u9A6C\u5361\u9F99",img:"https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*0GrCQLtDjNcAAAAAAAAAAAAAARQnAQ"},darkblue:{text:"\u6781\u591C\u84DD",img:"https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*uWxqSZQlPkkAAAAAAAAAAAAAARQnAQ"},wine:{text:"\u9171\u7C7D",img:"https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*OFPrTbg3an0AAAAAAAAAAAAAARQnAQ"}},cT={normal:{text:"\u6807\u51C6",img:"https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*AnfJTbIBJOkAAAAAAAAAAAAAARQnAQ"},light:{text:"\u4EAE",img:"https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*gnuiQIok9qIAAAAAAAAAAAAAARQnAQ"},dark:{text:"\u6697",img:"https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*NwG-TbOlBH0AAAAAAAAAAAAAARQnAQ"},satellite:{text:"\u536B\u661F",img:"https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*2X5EQLKul3IAAAAAAAAAAAAAARQnAQ"},outdoors:{text:"\u6237\u5916",img:"https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*gXFLRIaBUI0AAAAAAAAAAAAAARQnAQ"}};function fT(e){var i=pT();return function(){var n=(0,rr.Z)(e),r;if(i){var o=(0,rr.Z)(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return(0,jn.Z)(this,r)}}function pT(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var z7=function(e){(0,ui.Z)(t,e);var i=fT(t);function t(){var n;(0,Ur.Z)(this,t);for(var r=arguments.length,o=new Array(r),u=0;u<r;u++)o[u]=arguments[u];return n=i.call.apply(i,[this].concat(o)),(0,He.Z)((0,er.Z)(n),"onMapThemeChange",function(){n.mapsService.setMapStyle(n.selectValue[0])}),n}return(0,Jr.Z)(t,[{key:"getDefault",value:function(r){return(0,oe.Z)((0,oe.Z)({},zu((0,rr.Z)(t.prototype),"getDefault",this).call(this,r)),{},{title:"\u5730\u56FE\u6837\u5F0F",btnIcon:Md("l7-icon-color"),options:[]})}},{key:"getStyleOptions",value:function(){var r=this.mapsService.getType()==="mapbox"?cT:lT;return Object.entries(this.mapsService.getMapStyleConfig()).filter(function(o){var u=(0,Mr.Z)(o,2),f=u[0],g=u[1];return typeof g=="string"&&f!=="blank"}).map(function(o){var u,f=(0,Mr.Z)(o,2),g=f[0],x=f[1],I=(u=r[g])!==null&&u!==void 0?u:{},P=I.text,G=I.img;return{text:P!=null?P:g,value:x,img:G,key:g}})}},{key:"getMapStyle",value:function(){return this.mapsService.getMapStyle()}},{key:"onAdd",value:function(){var r,o=this;if((r=this.controlOption.options)!==null&&r!==void 0&&r.length||(this.controlOption.options=this.getStyleOptions()),this.controlOption.defaultValue){var u,f,g=this.controlOption.defaultValue;this.controlOption.defaultValue=(u=(f=this.controlOption.options.find(function(I){return I.key===g}))===null||f===void 0?void 0:f.value)!==null&&u!==void 0?u:g}else{var x=this.getMapStyle();x?this.controlOption.defaultValue=x:this.mapsService.map.once("styledata",function(){var I=o.mapsService.getMapStyle();o.controlOption.defaultValue=I,o.setSelectValue(I,!1)})}return this.on("selectChange",this.onMapThemeChange),zu((0,rr.Z)(t.prototype),"onAdd",this).call(this)}},{key:"getIsMultiple",value:function(){return!1}}]),t}(hx);function hT(e){var i=dT();return function(){var n=(0,rr.Z)(e),r;if(i){var o=(0,rr.Z)(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return(0,jn.Z)(this,r)}}function dT(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var U7=function(e){(0,ui.Z)(t,e);var i=hT(t);function t(){var n;(0,Ur.Z)(this,t);for(var r=arguments.length,o=new Array(r),u=0;u<r;u++)o[u]=arguments[u];return n=i.call.apply(i,[this].concat(o)),(0,He.Z)((0,er.Z)(n),"onLayerChange",function(){var f;(f=n.controlOption.layers)!==null&&f!==void 0&&f.length||(n.selectValue=n.getLayerVisible(),n.setOptions({options:n.getLayerOptions()}))}),(0,He.Z)((0,er.Z)(n),"onLayerVisibleChane",function(){n.setSelectValue(n.getLayerVisible())}),(0,He.Z)((0,er.Z)(n),"onSelectChange",function(){n.layers.forEach(function(f){var g=n.selectValue.includes(f.name),x=f.isVisible();g&&!x&&f.show(),!g&&x&&f.hide()})}),n}return(0,Jr.Z)(t,[{key:"layers",get:function(){var r=this.layerService,o=this.controlOption.layers;if(Array.isArray(o)&&o.length){var u=[];return o.forEach(function(f){if(f instanceof Object&&u.push(f),typeof f=="string"){var g=r.getLayer(f)||r.getLayerByName(f);g&&u.push(g)}}),u}return r.getLayers()||[]}},{key:"getDefault",value:function(r){return(0,oe.Z)((0,oe.Z)({},zu((0,rr.Z)(t.prototype),"getDefault",this).call(this,r)),{},{title:"\u56FE\u5C42\u63A7\u5236",btnIcon:Md("l7-icon-layer"),options:[]})}},{key:"getLayerVisible",value:function(){return this.layers.filter(function(r){return r.isVisible()}).map(function(r){return r.name})}},{key:"getLayerOptions",value:function(){return this.layers.map(function(r){return{text:r.name,value:r.name}})}},{key:"setOptions",value:function(r){var o=this.checkUpdateOption(r,["layers"]);zu((0,rr.Z)(t.prototype),"setOptions",this).call(this,r),o&&(this.selectValue=this.getLayerVisible(),this.controlOption.options=this.getLayerOptions(),this.popper.setContent(this.getPopperContent(this.controlOption.options)))}},{key:"onAdd",value:function(){var r;return(r=this.controlOption.options)!==null&&r!==void 0&&r.length||(this.controlOption.options=this.getLayerOptions()),this.controlOption.defaultValue||(this.controlOption.defaultValue=this.getLayerVisible()),this.on("selectChange",this.onSelectChange),this.layerService.on("layerChange",this.onLayerChange),zu((0,rr.Z)(t.prototype),"onAdd",this).call(this)}},{key:"onRemove",value:function(){this.off("selectChange",this.onSelectChange),this.layerService.off("layerChange",this.onLayerChange)}},{key:"getIsMultiple",value:function(){return!0}}]),t}(hx);function vT(e){var i=mT();return function(){var n=(0,rr.Z)(e),r;if(i){var o=(0,rr.Z)(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return(0,jn.Z)(this,r)}}function mT(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var Z7=function(e){(0,ui.Z)(t,e);var i=vT(t);function t(){var n;(0,Ur.Z)(this,t);for(var r=arguments.length,o=new Array(r),u=0;u<r;u++)o[u]=arguments[u];return n=i.call.apply(i,[this].concat(o)),(0,He.Z)((0,er.Z)(n),"location",[0,0]),(0,He.Z)((0,er.Z)(n),"onMouseMove",function(f){var g=n.location,x=f.lngLat||f.lnglat,I=n.controlOption.transform;x&&(g=[x.lng,x.lat]),n.location=g,I&&(g=I(g)),n.insertLocation2HTML(g),n.emit("locationChange",g)}),n}return(0,Jr.Z)(t,[{key:"getLocation",value:function(){return this.location}},{key:"getDefault",value:function(r){return(0,oe.Z)((0,oe.Z)({},zu((0,rr.Z)(t.prototype),"getDefault",this).call(this,r)),{},{position:mh.BOTTOMLEFT,transform:function(u){var f=(0,Mr.Z)(u,2),g=f[0],x=f[1];return[+(+g).toFixed(6),+(+x).toFixed(6)]}})}},{key:"onAdd",value:function(){var r=Ua("div","l7-control-mouse-location");return r.innerHTML="&nbsp;",this.mapsService.on("mousemove",this.onMouseMove),r}},{key:"onRemove",value:function(){this.mapsService.off("mousemove",this.onMouseMove)}},{key:"insertLocation2HTML",value:function(r){this.container.innerText=r.join(", ")}}]),t}(Wv);function gT(e){var i=yT();return function(){var n=(0,rr.Z)(e),r;if(i){var o=(0,rr.Z)(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return(0,jn.Z)(this,r)}}function yT(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var j7=function(e){(0,ui.Z)(t,e);var i=gT(t);function t(){var n;(0,Ur.Z)(this,t);for(var r=arguments.length,o=new Array(r),u=0;u<r;u++)o[u]=arguments[u];return n=i.call.apply(i,[this].concat(o)),(0,He.Z)((0,er.Z)(n),"zoomIn",function(){!n.disabled&&n.mapsService.getZoom()<n.mapsService.getMaxZoom()&&n.mapsService.zoomIn()}),(0,He.Z)((0,er.Z)(n),"zoomOut",function(){!n.disabled&&n.mapsService.getZoom()>n.mapsService.getMinZoom()&&n.mapsService.zoomOut()}),(0,He.Z)((0,er.Z)(n),"updateDisabled",function(){var f=n.mapsService;n.zoomInButton.removeAttribute("disabled"),n.zoomOutButton.removeAttribute("disabled"),(n.disabled||f.getZoom()<=f.getMinZoom())&&n.zoomOutButton.setAttribute("disabled","true"),(n.disabled||f.getZoom()>=f.getMaxZoom())&&n.zoomInButton.setAttribute("disabled","true")}),n}return(0,Jr.Z)(t,[{key:"getDefault",value:function(r){return(0,oe.Z)((0,oe.Z)({},zu((0,rr.Z)(t.prototype),"getDefault",this).call(this,r)),{},{position:mh.BOTTOMRIGHT,name:"zoom",zoomInText:Md("l7-icon-enlarge"),zoomInTitle:"Zoom in",zoomOutText:Md("l7-icon-narrow"),zoomOutTitle:"Zoom out"})}},{key:"setOptions",value:function(r){zu((0,rr.Z)(t.prototype),"setOptions",this).call(this,r),this.checkUpdateOption(r,["zoomInText","zoomInTitle","zoomOutText","zoomOutTitle"])&&this.resetButtonGroup(this.container)}},{key:"onAdd",value:function(){var r=Ua("div","l7-control-zoom");return this.resetButtonGroup(r),this.mapsService.on("zoomend",this.updateDisabled),this.mapsService.on("zoomchange",this.updateDisabled),r}},{key:"onRemove",value:function(){this.mapsService.off("zoomend",this.updateDisabled),this.mapsService.off("zoomchange",this.updateDisabled)}},{key:"disable",value:function(){return this.disabled=!0,this.updateDisabled(),this}},{key:"enable",value:function(){return this.disabled=!1,this.updateDisabled(),this}},{key:"resetButtonGroup",value:function(r){ia(r),this.zoomInButton=this.createButton(this.controlOption.zoomInText,this.controlOption.zoomInTitle,"l7-button-control",r,this.zoomIn),this.zoomOutButton=this.createButton(this.controlOption.zoomOutText,this.controlOption.zoomOutTitle,"l7-button-control",r,this.zoomOut),this.updateDisabled()}},{key:"createButton",value:function(r,o,u,f,g){var x=Ua("button",u,f);return typeof r=="string"?x.innerHTML=r:x.append(r),x.title=o,x.addEventListener("click",g),x}}]),t}(Wv);function _T(e){var i=xT();return function(){var n=(0,rr.Z)(e),r;if(i){var o=(0,rr.Z)(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return(0,jn.Z)(this,r)}}function xT(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var V7=function(e){(0,ui.Z)(t,e);var i=_T(t);function t(){var n;(0,Ur.Z)(this,t);for(var r=arguments.length,o=new Array(r),u=0;u<r;u++)o[u]=arguments[u];return n=i.call.apply(i,[this].concat(o)),(0,He.Z)((0,er.Z)(n),"update",function(){var f=n.mapsService,g=n.controlOption.maxWidth,x=f.getSize()[1]/2,I=f.containerToLngLat([0,x]),P=f.containerToLngLat([g,x]),G=pf([I.lng,I.lat],[P.lng,P.lat]);n.updateScales(G)}),n}return(0,Jr.Z)(t,[{key:"getDefault",value:function(r){return(0,oe.Z)((0,oe.Z)({},zu((0,rr.Z)(t.prototype),"getDefault",this).call(this,r)),{},{name:"scale",position:mh.BOTTOMLEFT,maxWidth:100,metric:!0,updateWhenIdle:!1,imperial:!1,lockWidth:!0})}},{key:"onAdd",value:function(){var r="l7-control-scale",o=Ua("div",r);this.resetScaleLines(o);var u=this.controlOption.updateWhenIdle;return this.mapsService.on(u?"moveend":"mapmove",this.update),this.mapsService.on(u?"zoomend":"zoomchange",this.update),o}},{key:"onRemove",value:function(){var r=this.controlOption.updateWhenIdle;this.mapsService.off(r?"zoomend":"zoomchange",this.update),this.mapsService.off(r?"moveend":"mapmove",this.update)}},{key:"setOptions",value:function(r){zu((0,rr.Z)(t.prototype),"setOptions",this).call(this,r),this.checkUpdateOption(r,["lockWidth","maxWidth","metric","updateWhenIdle","imperial"])&&this.resetScaleLines(this.container)}},{key:"updateScales",value:function(r){var o=this.controlOption,u=o.metric,f=o.imperial;u&&r&&this.updateMetric(r),f&&r&&this.updateImperial(r)}},{key:"resetScaleLines",value:function(r){ia(r);var o=this.controlOption,u=o.metric,f=o.imperial,g=o.maxWidth,x=o.lockWidth;x&&Gs(r,"width: ".concat(g,"px")),u&&(this.mScale=Ua("div","l7-control-scale-line",r)),f&&(this.iScale=Ua("div","l7-control-scale-line",r)),this.update()}},{key:"updateScale",value:function(r,o,u){var f=this.controlOption.maxWidth;r.style.width=Math.round(f*u)+"px",r.innerHTML=o}},{key:"getRoundNum",value:function(r){var o=Math.pow(10,(Math.floor(r)+"").length-1),u=r/o;return u=u>=10?10:u>=5?5:u>=3?3:u>=2?2:1,o*u}},{key:"updateMetric",value:function(r){var o=this.getRoundNum(r),u=o<1e3?o+" m":o/1e3+" km";this.updateScale(this.mScale,u,o/r)}},{key:"updateImperial",value:function(r){var o=r*3.2808399,u,f,g;o>5280?(u=o/5280,f=this.getRoundNum(u),this.updateScale(this.iScale,f+" mi",f/u)):(g=this.getRoundNum(o),this.updateScale(this.iScale,g+" ft",g/o))}}]),t}(Wv);function bT(e){var i=ET();return function(){var n=(0,rr.Z)(e),r;if(i){var o=(0,rr.Z)(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return(0,jn.Z)(this,r)}}function ET(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var ST=function(e){(0,ui.Z)(t,e);var i=bT(t);function t(n){var r;(0,Ur.Z)(this,t),r=i.call(this),(0,He.Z)((0,er.Z)(r),"isShow",!0),(0,He.Z)((0,er.Z)(r),"onMouseMove",function(u){var f,g=r.mapsService.getMapContainer(),x=(f=g==null?void 0:g.getBoundingClientRect())!==null&&f!==void 0?f:{},I=x.left,P=I===void 0?0:I,G=x.top,$=G===void 0?0:G;r.setPopupPosition(u.clientX-P,u.clientY-$)}),(0,He.Z)((0,er.Z)(r),"updateLngLatPosition",function(){if(!(!r.mapsService||r.popupOption.followCursor)){var u=r.lngLat,f=u.lng,g=u.lat,x=r.mapsService.lngLatToContainer([f,g]),I=x.x,P=x.y;r.setPopupPosition(I,P)}}),(0,He.Z)((0,er.Z)(r),"onKeyDown",function(u){u.keyCode===27&&r.remove()}),(0,He.Z)((0,er.Z)(r),"onCloseButtonClick",function(u){u.stopPropagation&&u.stopPropagation(),r.hide()}),(0,He.Z)((0,er.Z)(r),"update",function(){var u=!!r.lngLat,f=r.popupOption,g=f.className,x=f.style,I=f.maxWidth,P=f.anchor,G=f.stopPropagation;if(!(!r.mapsService||!u||!r.content)){var $=r.mapsService.getMarkerContainer();!r.container&&$&&(r.container=Ua("div","l7-popup ".concat(g!=null?g:""," ").concat(r.isShow?"":"l7-popup-hide"),$),x&&r.container.setAttribute("style",x),r.tip=Ua("div","l7-popup-tip",r.container),r.container.appendChild(r.content),G&&["mousemove","mousedown","mouseup","click","dblclick"].forEach(function(Ee){r.container.addEventListener(Ee,function(Se){Se.stopPropagation()})}),r.container.style.whiteSpace="nowrap"),I&&r.container.style.maxWidth!==I&&(r.container.style.maxWidth=I),r.updateLngLatPosition(),lu(r.container,"".concat(rl[P])),Nu(r.container,P,"popup")}}),r.popupOption=(0,oe.Z)((0,oe.Z)({},r.getDefault(n!=null?n:{})),n);var o=r.popupOption.lngLat;return o&&(r.lngLat=o),r}return(0,Jr.Z)(t,[{key:"lngLat",get:function(){var r;return(r=this.popupOption.lngLat)!==null&&r!==void 0?r:{lng:0,lat:0}},set:function(r){this.popupOption.lngLat=r}},{key:"getIsShow",value:function(){return this.isShow}},{key:"addTo",value:function(r){this.mapsService=r.get(Ln.IMapService),this.sceneService=r.get(Ln.ISceneService),this.layerService=r.get(Ln.ILayerService),this.mapsService.on("camerachange",this.update),this.mapsService.on("viewchange",this.update),this.scene=r,this.update(),this.updateCloseOnClick(),this.updateCloseOnEsc(),this.updateFollowCursor();var o=this.popupOption,u=o.html,f=o.text;return u?this.setHTML(u):f&&this.setText(f),this.emit("open"),this}},{key:"remove",value:function(){if(!!this.isOpen())return this.content&&ns(this.content),this.container&&(ns(this.container),delete this.container),this.mapsService&&(this.mapsService.off("camerachange",this.update),this.mapsService.off("viewchange",this.update),this.updateCloseOnClick(!0),this.updateCloseOnEsc(!0),this.updateFollowCursor(!0),delete this.mapsService),this.emit("close"),this}},{key:"getOptions",value:function(){return this.popupOption}},{key:"setOptions",value:function(r){return this.show(),this.popupOption=(0,oe.Z)((0,oe.Z)({},this.popupOption),r),this.checkUpdateOption(r,["closeButton","closeButtonOffsets","maxWidth","anchor","stopPropagation","className","style","lngLat","offsets","title"])&&(this.container&&(ns(this.container),this.container=void 0),this.popupOption.html?this.setHTML(this.popupOption.html):this.popupOption.text&&this.setText(this.popupOption.text)),this.checkUpdateOption(r,["closeOnEsc"])&&this.updateCloseOnEsc(),this.checkUpdateOption(r,["closeOnClick"])&&this.updateCloseOnClick(),this.checkUpdateOption(r,["followCursor"])&&this.updateFollowCursor(),this.checkUpdateOption(r,["html"])&&r.html?this.setHTML(r.html):this.checkUpdateOption(r,["text"])&&r.text&&this.setText(r.text),this.checkUpdateOption(r,["lngLat"])&&r.lngLat&&this.setLnglat(r.lngLat),this}},{key:"open",value:function(){return this.addTo(this.scene),this}},{key:"close",value:function(){return this.remove(),this}},{key:"show",value:function(){if(!this.isShow)return this.container&&lc(this.container,"l7-popup-hide"),this.isShow=!0,this.emit("show"),this}},{key:"hide",value:function(){if(!!this.isShow)return this.container&&Vu(this.container,"l7-popup-hide"),this.isShow=!1,this.emit("hide"),this}},{key:"setHTML",value:function(r){return this.popupOption.html=r,this.setDOMContent(this.getPopupHTMLFragment(r))}},{key:"setText",value:function(r){return this.popupOption.text=r,this.setDOMContent(window.document.createTextNode(r))}},{key:"panToPopup",value:function(){var r=this.lngLat,o=r.lng,u=r.lat;return this.popupOption.autoPan&&this.mapsService.panTo([o,u]),this}},{key:"setLngLat",value:function(r){return this.setLnglat(r)}},{key:"setLnglat",value:function(r){var o=this;return this.show(),this.lngLat=r,Array.isArray(r)&&(this.lngLat={lng:r[0],lat:r[1]}),this.mapsService&&(this.mapsService.off("camerachange",this.update),this.mapsService.off("viewchange",this.update),this.mapsService.on("camerachange",this.update),this.mapsService.on("viewchange",this.update)),this.update(),this.popupOption.autoPan&&setTimeout(function(){o.panToPopup()},0),this}},{key:"getLnglat",value:function(){return this.lngLat}},{key:"setMaxWidth",value:function(r){return this.popupOption.maxWidth=r,this.update(),this}},{key:"isOpen",value:function(){return!!this.mapsService}},{key:"getDefault",value:function(r){return{closeButton:!0,closeOnClick:!1,maxWidth:"240px",offsets:[0,0],anchor:Ts.BOTTOM,stopPropagation:!0,autoPan:!1,autoClose:!0,closeOnEsc:!1,followCursor:!1}}},{key:"setDOMContent",value:function(r){return this.show(),this.createContent(),this.contentPanel.appendChild(r),this.update(),this}},{key:"updateCloseOnClick",value:function(r){var o=this,u=this.mapsService;u&&(u==null||u.off("click",this.onCloseButtonClick),this.popupOption.closeOnClick&&!r&&requestAnimationFrame(function(){u==null||u.on("click",o.onCloseButtonClick)}))}},{key:"updateCloseOnEsc",value:function(r){window.removeEventListener("keydown",this.onKeyDown),this.popupOption.closeOnEsc&&!r&&window.addEventListener("keydown",this.onKeyDown)}},{key:"updateFollowCursor",value:function(r){var o,u=(o=this.mapsService)===null||o===void 0?void 0:o.getContainer();u&&(u==null||u.removeEventListener("mousemove",this.onMouseMove),this.popupOption.followCursor&&!r&&(u==null||u.addEventListener("mousemove",this.onMouseMove)))}},{key:"createContent",value:function(){var r=this;if(this.content&&ns(this.content),this.content=Ua("div","l7-popup-content",this.container),this.popupOption.title){var o;this.contentTitle=Ua("div","l7-popup-content__title",this.content),(o=this.contentTitle)===null||o===void 0||o.append(this.getPopupHTMLFragment(this.popupOption.title))}else this.contentTitle=void 0;if(this.popupOption.closeButton){var u=Md("l7-icon-guanbi");Vu(u,"l7-popup-close-button"),this.content.appendChild(u),this.popupOption.closeButtonOffsets&&(u.style.right=this.popupOption.closeButtonOffsets[0]+"px",u.style.top=this.popupOption.closeButtonOffsets[1]+"px"),u.setAttribute("aria-label","Close popup"),u.addEventListener("click",function(){r.hide()}),this.closeButton=u}else this.closeButton=void 0;this.contentPanel=Ua("div","l7-popup-content__panel",this.content)}},{key:"setPopupPosition",value:function(r,o){if(this.container){var u=this.popupOption.offsets;this.container.style.left=r+u[0]+"px",this.container.style.top=o-u[1]+"px"}}},{key:"checkUpdateOption",value:function(r,o){return o.some(function(u){return u in r})}},{key:"getPopupHTMLFragment",value:function(r){var o=window.document.createDocumentFragment(),u=window.document.createElement("body"),f;for(typeof r=="string"?u.innerHTML=r:Array.isArray(r)?u.append.apply(u,(0,ie.Z)(r)):r instanceof HTMLElement&&u.append(r);f=u.firstChild,!!f;)o.appendChild(f);return o}}]),t}(ir.EventEmitter);function wT(e){var i=AT();return function(){var n=(0,rr.Z)(e),r;if(i){var o=(0,rr.Z)(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return(0,jn.Z)(this,r)}}function AT(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var G7=function(e){(0,ui.Z)(t,e);var i=wT(t);function t(){var n;(0,Ur.Z)(this,t);for(var r=arguments.length,o=new Array(r),u=0;u<r;u++)o[u]=arguments[u];return n=i.call.apply(i,[this].concat(o)),(0,He.Z)((0,er.Z)(n),"layerConfigMap",new WeakMap),n}return(0,Jr.Z)(t,[{key:"layerConfigItems",get:function(){var r,o=this.popupOption,u=o.config,f=o.items;return(r=u!=null?u:f)!==null&&r!==void 0?r:[]}},{key:"addTo",value:function(r){return zu((0,rr.Z)(t.prototype),"addTo",this).call(this,r),this.bindLayerEvent(),this.hide(),this}},{key:"remove",value:function(){return zu((0,rr.Z)(t.prototype),"remove",this).call(this),this.unbindLayerEvent(),this}},{key:"setOptions",value:function(r){return this.unbindLayerEvent(),zu((0,rr.Z)(t.prototype),"setOptions",this).call(this,r),this.bindLayerEvent(),this}},{key:"getDefault",value:function(r){var o=r.trigger==="click";return(0,oe.Z)((0,oe.Z)({},zu((0,rr.Z)(t.prototype),"getDefault",this).call(this,r)),{},{trigger:"hover",followCursor:!o,lngLat:{lng:0,lat:0},offsets:[0,10],closeButton:!1,autoClose:!1,closeOnEsc:!1})}},{key:"bindLayerEvent",value:function(){var r=this,o=this.popupOption.trigger;this.layerConfigItems.forEach(function(u){var f,g=r.getLayerByConfig(u);if(!!g){var x=(0,oe.Z)({},u);if(o==="hover"){var I=r.onLayerMouseMove.bind(r,g),P=r.onLayerMouseOut.bind(r,g);x.onMouseMove=I,x.onMouseOut=P,g==null||g.on("mousemove",I),g==null||g.on("mouseout",P)}else{var G=r.onLayerClick.bind(r,g);x.onClick=G,g==null||g.on("click",G)}var $=g==null||(f=g.getSource)===null||f===void 0?void 0:f.call(g),Ee=r.onSourceUpdate.bind(r,g);$==null||$.on("update",Ee),x.onSourceUpdate=Ee,r.layerConfigMap.set(g,x)}})}},{key:"unbindLayerEvent",value:function(){var r=this;this.layerConfigItems.forEach(function(o){var u=r.getLayerByConfig(o),f=u&&r.layerConfigMap.get(u);if(!!f){var g=f.onMouseMove,x=f.onMouseOut,I=f.onClick,P=f.onSourceUpdate;if(g&&u.off("mousemove",g),x&&u.off("mouseout",x),I&&u.off("click",I),P){var G;u==null||(G=u.getSource())===null||G===void 0||G.off("update",P)}}})}},{key:"onLayerMouseMove",value:function(r,o){if(!this.isSameFeature(r,o.featureId)){var u=this.getLayerInfoFrag(r,o);this.setDOMContent(u),this.displayFeatureInfo={layer:r,featureId:o.featureId}}this.isShow||this.show()}},{key:"onLayerMouseOut",value:function(r,o){this.displayFeatureInfo=void 0,this.isShow&&this.hide()}},{key:"onLayerClick",value:function(r,o){if(this.isShow&&this.isSameFeature(r,o.featureId))this.hide();else{var u=this.getLayerInfoFrag(r,o);this.setDOMContent(u),this.setLnglat(o.lngLat),this.show(),this.displayFeatureInfo={layer:r,featureId:o.featureId}}}},{key:"onSourceUpdate",value:function(r){var o;((o=this.displayFeatureInfo)===null||o===void 0?void 0:o.layer)===r&&(this.hide(),this.displayFeatureInfo=void 0)}},{key:"getLayerInfoFrag",value:function(r,o){var u=this.layerConfigMap.get(r),f=document.createDocumentFragment();if(u){var g=o.feature;g.type==="Feature"&&"properties"in g&&"geometry"in g&&(g=g.properties);var x=u.fields;x==null||x.forEach(function(I){var P,G,$=typeof I=="string"?{field:I}:I,Ee=$.field,Se=$.formatField,Re=$.formatValue,Ye=$.getValue,St=Ua("div","l7-layer-popup__row"),vt=Ye?Ye(o.feature):(0,Wr.get)(g,Ee),Ut=(P=Se instanceof Function?Se(Ee):Se)!==null&&P!==void 0?P:Ee,Kt=(G=Re instanceof Function?Re(vt):Re)!==null&&G!==void 0?G:vt;St.innerHTML='<span class="l7-layer-popup__key">'.concat(Ut,'</span>: <span class="l7-layer-popup__value">').concat(Kt,"</span>"),f.appendChild(St)})}return f}},{key:"getLayerByConfig",value:function(r){var o=r.layer;if(o instanceof Object)return o;if(typeof o=="string")return this.layerService.getLayer(o)||this.layerService.getLayerByName(o)}},{key:"isSameFeature",value:function(r,o){var u=this.displayFeatureInfo;return u&&r===u.layer&&o===u.featureId}}]),t}(ST);function CT(e,i){var t=typeof my!="undefined"&&!!my&&typeof my.showToast=="function"&&my.isFRM!==!0,n=typeof wx!="undefined"&&wx!==null&&(typeof wx.request!="undefined"||typeof wx.miniProgram!="undefined");if(!(t||n)&&(i||(i=document),!!i)){var r=i.head||i.getElementsByTagName("head")[0];if(!r){r=i.createElement("head");var o=i.body||i.getElementsByTagName("body")[0];o?o.parentNode.insertBefore(r,o):i.documentElement.appendChild(r)}var u=i.createElement("style");return u.type="text/css",u.styleSheet?u.styleSheet.cssText=e:u.appendChild(i.createTextNode(e)),r.appendChild(u),u}}CT(`.l7-marker-container {
  position: absolute;
  width: 100%;
  height: 100%;
  overflow: hidden;
}
.l7-marker {
  position: absolute !important;
  top: 0;
  left: 0;
  z-index: 5;
  cursor: pointer;
}
.l7-marker-cluster {
  width: 40px;
  height: 40px;
  background-color: rgba(181, 226, 140, 0.6);
  background-clip: padding-box;
  border-radius: 20px;
}
.l7-marker-cluster div {
  width: 30px;
  height: 30px;
  margin-top: 5px;
  margin-left: 5px;
  font: 12px 'Helvetica Neue', Arial, Helvetica, sans-serif;
  text-align: center;
  background-color: rgba(110, 204, 57, 0.6);
  border-radius: 15px;
}
.l7-marker-cluster span {
  line-height: 30px;
}
.l7-touch .l7-control-attribution,
.l7-touch .l7-control-layers,
.l7-touch .l7-bar {
  -webkit-box-shadow: none;
          box-shadow: none;
}
.l7-touch .l7-control-layers,
.l7-touch .l7-bar {
  background-clip: padding-box;
  border: 2px solid rgba(0, 0, 0, 0.2);
}
.mapboxgl-ctrl-logo,
.amap-logo {
  display: none !important;
}
.l7-select-box {
  border: 3px dashed gray;
  border-radius: 2px;
  position: absolute;
  z-index: 1000;
  -webkit-box-sizing: border-box;
          box-sizing: border-box;
}
.l7-control-container {
  font: 12px/1.5 'Helvetica Neue', Arial, Helvetica, sans-serif;
}
.l7-control-container .l7-control {
  position: relative;
  z-index: 800;
  float: left;
  clear: both;
  color: #595959;
  font-size: 12px;
  pointer-events: visiblePainted;
  /* IE 9-10 doesn't have auto */
  pointer-events: auto;
}
.l7-control-container .l7-control.l7-control--hide {
  display: none;
}
.l7-control-container .l7-top {
  top: 0;
  display: -webkit-box;
  display: -ms-flexbox;
  display: flex;
  position: absolute;
  z-index: 1000;
  pointer-events: none;
}
.l7-control-container .l7-top .l7-control:not(.l7-control--hide) {
  margin-top: 8px;
}
.l7-control-container .l7-right {
  right: 0;
  display: -webkit-box;
  display: -ms-flexbox;
  display: flex;
  position: absolute;
  z-index: 1000;
  pointer-events: none;
}
.l7-control-container .l7-right .l7-control:not(.l7-control--hide) {
  margin-right: 8px;
}
.l7-control-container .l7-bottom {
  bottom: 0;
  display: -webkit-box;
  display: -ms-flexbox;
  display: flex;
  position: absolute;
  z-index: 1000;
  pointer-events: none;
}
.l7-control-container .l7-bottom .l7-control:not(.l7-control--hide) {
  margin-bottom: 8px;
}
.l7-control-container .l7-left {
  left: 0;
  display: -webkit-box;
  display: -ms-flexbox;
  display: flex;
  position: absolute;
  z-index: 1000;
  pointer-events: none;
}
.l7-control-container .l7-left .l7-control:not(.l7-control--hide) {
  margin-left: 8px;
}
.l7-control-container .l7-center {
  position: absolute;
  display: -webkit-box;
  display: -ms-flexbox;
  display: flex;
  -webkit-box-pack: center;
      -ms-flex-pack: center;
          justify-content: center;
}
.l7-control-container .l7-center.l7-top,
.l7-control-container .l7-center.l7-bottom {
  width: 100%;
}
.l7-control-container .l7-center.l7-left,
.l7-control-container .l7-center.l7-right {
  height: 100%;
}
.l7-control-container .l7-center .l7-control {
  margin-right: 8px;
  margin-bottom: 8px;
}
.l7-control-container .l7-row {
  -webkit-box-orient: horizontal;
  -webkit-box-direction: normal;
      -ms-flex-direction: row;
          flex-direction: row;
}
.l7-control-container .l7-row.l7-top {
  -webkit-box-align: start;
      -ms-flex-align: start;
          align-items: flex-start;
}
.l7-control-container .l7-row.l7-bottom {
  -webkit-box-align: end;
      -ms-flex-align: end;
          align-items: flex-end;
}
.l7-control-container .l7-column {
  -webkit-box-orient: vertical;
  -webkit-box-direction: normal;
      -ms-flex-direction: column;
          flex-direction: column;
}
.l7-control-container .l7-column.l7-left {
  -webkit-box-align: start;
      -ms-flex-align: start;
          align-items: flex-start;
}
.l7-control-container .l7-column.l7-right {
  -webkit-box-align: end;
      -ms-flex-align: end;
          align-items: flex-end;
}
.l7-button-control {
  min-width: 28px;
  height: 28px;
  background-color: #fff;
  border-width: 0;
  border-radius: 2px;
  outline: 0;
  cursor: pointer;
  -webkit-transition: all 0.2s;
  transition: all 0.2s;
  display: -webkit-box;
  display: -ms-flexbox;
  display: flex;
  -webkit-box-pack: center;
      -ms-flex-pack: center;
          justify-content: center;
  -webkit-box-align: center;
      -ms-flex-align: center;
          align-items: center;
  padding: 0 6px;
  -webkit-box-shadow: 0 0 20px 0 rgba(0, 0, 0, 0.15);
          box-shadow: 0 0 20px 0 rgba(0, 0, 0, 0.15);
  line-height: 16px;
}
.l7-button-control .l7-iconfont {
  fill: #595959;
  color: #595959;
  width: 16px;
  height: 16px;
}
.l7-button-control.l7-button-control--row {
  padding: 0 16px 0 13px;
}
.l7-button-control.l7-button-control--row * + .l7-button-control__text {
  margin-left: 8px;
}
.l7-button-control.l7-button-control--column {
  height: 44px;
  -webkit-box-orient: vertical;
  -webkit-box-direction: normal;
      -ms-flex-direction: column;
          flex-direction: column;
}
.l7-button-control.l7-button-control--column .l7-iconfont {
  margin-top: 3px;
}
.l7-button-control.l7-button-control--column .l7-button-control__text {
  margin-top: 3px;
  font-size: 10px;
  -webkit-transform: scale(0.83333);
          transform: scale(0.83333);
}
.l7-button-control:not(:disabled):hover {
  background-color: #f3f3f3;
}
.l7-button-control:not(:disabled):active {
  background-color: #f3f3f3;
}
.l7-button-control:disabled {
  background-color: #fafafa;
  color: #bdbdbd;
  cursor: not-allowed;
}
.l7-button-control:disabled .l7-iconfont {
  fill: #bdbdbd;
  color: #bdbdbd;
}
.l7-button-control:disabled:hover {
  background-color: #fafafa;
}
.l7-button-control:disabled:active {
  background-color: #fafafa;
}
.l7-popper {
  position: absolute;
  display: -webkit-box;
  display: -ms-flexbox;
  display: flex;
  -webkit-box-pack: center;
      -ms-flex-pack: center;
          justify-content: center;
  -webkit-box-align: center;
      -ms-flex-align: center;
          align-items: center;
  z-index: 5;
  color: #595959;
}
.l7-popper.l7-popper-hide {
  display: none;
}
.l7-popper .l7-popper-content {
  min-height: 28px;
  background: #fff;
  border-radius: 2px;
  -webkit-box-shadow: 0 0 20px 0 rgba(0, 0, 0, 0.15);
          box-shadow: 0 0 20px 0 rgba(0, 0, 0, 0.15);
}
.l7-popper .l7-popper-arrow {
  width: 0;
  height: 0;
  border-width: 4px;
  border-style: solid;
  border-top-color: transparent;
  border-bottom-color: transparent;
  border-left-color: transparent;
  border-right-color: transparent;
  -webkit-box-shadow: 0 0 20px 0 rgba(0, 0, 0, 0.15);
          box-shadow: 0 0 20px 0 rgba(0, 0, 0, 0.15);
}
.l7-popper.l7-popper-left {
  -webkit-box-orient: horizontal;
  -webkit-box-direction: normal;
      -ms-flex-direction: row;
          flex-direction: row;
}
.l7-popper.l7-popper-left .l7-popper-arrow {
  border-left-color: #fff;
  margin: 10px 0;
}
.l7-popper.l7-popper-right {
  -webkit-box-orient: horizontal;
  -webkit-box-direction: reverse;
      -ms-flex-direction: row-reverse;
          flex-direction: row-reverse;
}
.l7-popper.l7-popper-right .l7-popper-arrow {
  border-right-color: #fff;
  margin: 10px 0;
}
.l7-popper.l7-popper-top {
  -webkit-box-orient: vertical;
  -webkit-box-direction: normal;
      -ms-flex-direction: column;
          flex-direction: column;
}
.l7-popper.l7-popper-top .l7-popper-arrow {
  border-top-color: #fff;
  margin: 0 10px;
}
.l7-popper.l7-popper-bottom {
  -webkit-box-orient: vertical;
  -webkit-box-direction: reverse;
      -ms-flex-direction: column-reverse;
          flex-direction: column-reverse;
}
.l7-popper.l7-popper-bottom .l7-popper-arrow {
  border-bottom-color: #fff;
  margin: 0 10px;
}
.l7-popper.l7-popper-start {
  -webkit-box-align: start;
      -ms-flex-align: start;
          align-items: flex-start;
}
.l7-popper.l7-popper-end {
  -webkit-box-align: end;
      -ms-flex-align: end;
          align-items: flex-end;
}
.l7-select-control--normal {
  padding: 4px 0;
}
.l7-select-control--normal .l7-select-control-item {
  height: 24px;
  line-height: 24px;
  display: -webkit-box;
  display: -ms-flexbox;
  display: flex;
  -webkit-box-align: center;
      -ms-flex-align: center;
          align-items: center;
  padding: 0 16px;
  font-size: 12px;
}
.l7-select-control--normal .l7-select-control-item > * + * {
  margin-left: 6px;
}
.l7-select-control--normal .l7-select-control-item input[type='checkbox'] {
  height: 14px;
  width: 14px;
}
.l7-select-control--normal .l7-select-control-item:hover {
  background-color: #f3f3f3;
}
.l7-select-control--image {
  padding: 12px 12px 0 12px;
  width: 474px;
  height: 320px;
  overflow: auto;
  display: -webkit-box;
  display: -ms-flexbox;
  display: flex;
  -ms-flex-wrap: wrap;
      flex-wrap: wrap;
  -webkit-box-sizing: border-box;
          box-sizing: border-box;
  -webkit-box-align: start;
      -ms-flex-align: start;
          align-items: flex-start;
}
.l7-select-control--image .l7-select-control-item {
  margin-right: 12px;
  border-radius: 2px;
  overflow: hidden;
  border: 1px solid #fff;
  -webkit-box-sizing: content-box;
          box-sizing: content-box;
  width: calc((100% - 36px) / 3);
  display: -webkit-box;
  display: -ms-flexbox;
  display: flex;
  -webkit-box-orient: vertical;
  -webkit-box-direction: normal;
      -ms-flex-direction: column;
          flex-direction: column;
  -webkit-box-pack: center;
      -ms-flex-pack: center;
          justify-content: center;
  margin-bottom: 12px;
  position: relative;
  font-size: 12px;
}
.l7-select-control--image .l7-select-control-item img {
  width: 142px;
  height: 80px;
}
.l7-select-control--image .l7-select-control-item input[type='checkbox'] {
  position: absolute;
  right: 0;
  top: 0;
}
.l7-select-control--image .l7-select-control-item .l7-select-control-item-row {
  display: -webkit-box;
  display: -ms-flexbox;
  display: flex;
  -webkit-box-pack: center;
      -ms-flex-pack: center;
          justify-content: center;
  -webkit-box-align: center;
      -ms-flex-align: center;
          align-items: center;
  line-height: 26px;
}
.l7-select-control--image .l7-select-control-item .l7-select-control-item-row > * + * {
  margin-left: 8px;
}
.l7-select-control--image .l7-select-control-item.l7-select-control-item-active {
  border-color: #0370fe;
}
.l7-select-control--image .l7-select-control-item:nth-child(3n) {
  margin-right: 0;
}
.l7-select-control-item {
  cursor: pointer;
}
.l7-select-control-item input[type='checkbox'] {
  margin: 0;
  cursor: pointer;
}
.l7-select-control--multiple .l7-select-control-item:hover {
  background-color: transparent;
}
.l7-control-logo {
  width: 89px;
  height: 16px;
  -webkit-user-select: none;
     -moz-user-select: none;
      -ms-user-select: none;
          user-select: none;
}
.l7-control-logo img {
  height: 100%;
  width: 100%;
}
.l7-control-logo .l7-control-logo-link {
  display: block;
  cursor: pointer;
}
.l7-control-logo .l7-control-logo-link img {
  cursor: pointer;
}
.l7-control-mouse-location {
  background-color: #fff;
  border-radius: 2px;
  -webkit-box-shadow: 0 0 20px 0 rgba(0, 0, 0, 0.15);
          box-shadow: 0 0 20px 0 rgba(0, 0, 0, 0.15);
  padding: 2px 4px;
  min-width: 130px;
}
.l7-control-zoom {
  -webkit-box-shadow: 0 0 20px 0 rgba(0, 0, 0, 0.15);
          box-shadow: 0 0 20px 0 rgba(0, 0, 0, 0.15);
  border-radius: 2px;
  overflow: hidden;
}
.l7-control-zoom .l7-button-control {
  -webkit-box-shadow: 0 0 0;
          box-shadow: 0 0 0;
  border-radius: 0;
  font-size: 16px;
}
.l7-control-zoom .l7-button-control .l7-iconfont {
  width: 14px;
  height: 14px;
}
.l7-control-zoom .l7-button-control:first-child {
  border-bottom: 1px solid #f0f0f0;
}
.l7-control-scale {
  display: -webkit-box;
  display: -ms-flexbox;
  display: flex;
  -webkit-box-orient: vertical;
  -webkit-box-direction: normal;
      -ms-flex-direction: column;
          flex-direction: column;
}
.l7-control-scale .l7-control-scale-line {
  -webkit-box-sizing: border-box;
          box-sizing: border-box;
  padding: 2px 5px 1px;
  overflow: hidden;
  color: #595959;
  font-size: 10px;
  line-height: 1.1;
  white-space: nowrap;
  background: #fff;
  border: 2px solid #000;
  border-top: 0;
  -webkit-transition: width 0.1s;
  transition: width 0.1s;
}
.l7-control-scale .l7-control-scale-line + .l7-control-scale .l7-control-scale-line {
  margin-top: -2px;
  border-top: 2px solid #777;
  border-bottom: none;
}
.l7-right .l7-control-scale {
  display: -webkit-box;
  display: -ms-flexbox;
  display: flex;
  -webkit-box-align: end;
      -ms-flex-align: end;
          align-items: flex-end;
}
.l7-right .l7-control-scale .l7-control-scale-line {
  text-align: right;
}
.l7-popup {
  position: absolute;
  top: 0;
  left: 0;
  z-index: 5;
  display: -webkit-box;
  display: -ms-flexbox;
  display: flex;
  will-change: transform;
}
.l7-popup.l7-popup-hide {
  display: none;
}
.l7-popup .l7-popup-content {
  position: relative;
  padding: 16px;
  font-size: 14px;
  background: #fff;
  border-radius: 3px;
  -webkit-box-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);
          box-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);
}
.l7-popup .l7-popup-content .l7-popup-content__title {
  margin-bottom: 8px;
  font-weight: bold;
}
.l7-popup .l7-popup-content .l7-popup-content__title,
.l7-popup .l7-popup-content .l7-popup-content__panel {
  white-space: break-spaces;
}
.l7-popup .l7-popup-content .l7-popup-close-button {
  position: absolute;
  top: 0;
  right: 0;
  width: 18px;
  height: 18px;
  padding: 0;
  font-size: 14px;
  line-height: 18px;
  text-align: center;
  background-color: transparent;
  border: 0;
  border-radius: 0 3px 0 0;
  cursor: pointer;
}
.l7-popup .l7-popup-tip {
  position: relative;
  z-index: 1;
  width: 0;
  height: 0;
  border: 10px solid transparent;
}
.l7-popup.l7-popup-anchor-bottom,
.l7-popup.l7-popup-anchor-bottom-left,
.l7-popup.l7-popup-anchor-bottom-right {
  -webkit-box-orient: vertical;
  -webkit-box-direction: reverse;
      -ms-flex-direction: column-reverse;
          flex-direction: column-reverse;
}
.l7-popup.l7-popup-anchor-bottom .l7-popup-tip,
.l7-popup.l7-popup-anchor-bottom-left .l7-popup-tip,
.l7-popup.l7-popup-anchor-bottom-right .l7-popup-tip {
  bottom: 1px;
}
.l7-popup.l7-popup-anchor-top,
.l7-popup.l7-popup-anchor-top-left,
.l7-popup.l7-popup-anchor-top-right {
  -webkit-box-orient: vertical;
  -webkit-box-direction: normal;
      -ms-flex-direction: column;
          flex-direction: column;
}
.l7-popup.l7-popup-anchor-top .l7-popup-tip,
.l7-popup.l7-popup-anchor-top-left .l7-popup-tip,
.l7-popup.l7-popup-anchor-top-right .l7-popup-tip {
  top: 1px;
}
.l7-popup.l7-popup-anchor-left {
  -webkit-box-orient: horizontal;
  -webkit-box-direction: normal;
      -ms-flex-direction: row;
          flex-direction: row;
}
.l7-popup.l7-popup-anchor-right {
  -webkit-box-orient: horizontal;
  -webkit-box-direction: reverse;
      -ms-flex-direction: row-reverse;
          flex-direction: row-reverse;
}
.l7-popup-anchor-top .l7-popup-tip {
  position: relative;
  -webkit-align-self: center;
  -ms-flex-item-align: center;
      align-self: center;
  border-top: none;
  border-bottom-color: #fff;
}
.l7-popup-anchor-top-left .l7-popup-tip {
  -webkit-align-self: flex-start;
  -ms-flex-item-align: start;
      align-self: flex-start;
  border-top: none;
  border-bottom-color: #fff;
  border-left: none;
}
.l7-popup-anchor-top-right .l7-popup-tip {
  -webkit-align-self: flex-end;
  -ms-flex-item-align: end;
      align-self: flex-end;
  border-top: none;
  border-right: none;
  border-bottom-color: #fff;
}
.l7-popup-anchor-bottom .l7-popup-tip {
  -webkit-align-self: center;
  -ms-flex-item-align: center;
      align-self: center;
  border-top-color: #fff;
  border-bottom: none;
}
.l7-popup-anchor-bottom-left .l7-popup-tip {
  -webkit-align-self: flex-start;
  -ms-flex-item-align: start;
      align-self: flex-start;
  border-top-color: #fff;
  border-bottom: none;
  border-left: none;
}
.l7-popup-anchor-bottom-right .l7-popup-tip {
  -webkit-align-self: flex-end;
  -ms-flex-item-align: end;
      align-self: flex-end;
  border-top-color: #fff;
  border-right: none;
  border-bottom: none;
}
.l7-popup-anchor-left .l7-popup-tip {
  -webkit-align-self: center;
  -ms-flex-item-align: center;
      align-self: center;
  border-right-color: #fff;
  border-left: none;
}
.l7-popup-anchor-right .l7-popup-tip {
  right: 1px;
  -webkit-align-self: center;
  -ms-flex-item-align: center;
      align-self: center;
  border-right: none;
  border-left-color: #fff;
}
.l7-popup-anchor-top-left .l7-popup-content {
  border-top-left-radius: 0;
}
.l7-popup-anchor-top-right .l7-popup-content {
  border-top-right-radius: 0;
}
.l7-popup-anchor-bottom-left .l7-popup-content {
  border-bottom-left-radius: 0;
}
.l7-popup-anchor-bottom-right .l7-popup-content {
  border-bottom-right-radius: 0;
}
.l7-popup-track-pointer {
  display: none;
}
.l7-popup-track-pointer * {
  -webkit-user-select: none;
     -moz-user-select: none;
      -ms-user-select: none;
          user-select: none;
  pointer-events: none;
}
.l7-map:hover .l7-popup-track-pointer {
  display: -webkit-box;
  display: -ms-flexbox;
  display: flex;
}
.l7-map:active .l7-popup-track-pointer {
  display: none;
}
.l7-layer-popup__row {
  font-size: 12px;
}
.l7-layer-popup__row + .l7-layer-popup__row {
  margin-top: 4px;
}
`);var Kd,Ug=(Kd={},(0,He.Z)(Kd,Yh.additive,{enable:!0,func:{srcRGB:$e.ONE,dstRGB:$e.ONE,srcAlpha:1,dstAlpha:1}}),(0,He.Z)(Kd,Yh.none,{enable:!1}),(0,He.Z)(Kd,Yh.normal,{enable:!0,func:{srcRGB:$e.SRC_ALPHA,dstRGB:$e.ONE_MINUS_SRC_ALPHA,srcAlpha:1,dstAlpha:1}}),(0,He.Z)(Kd,Yh.subtractive,{enable:!0,func:{srcRGB:$e.ONE,dstRGB:$e.ONE,srcAlpha:$e.ZERO,dstAlpha:$e.ONE_MINUS_SRC_COLOR},equation:{rgb:$e.FUNC_SUBTRACT,alpha:$e.FUNC_SUBTRACT}}),(0,He.Z)(Kd,Yh.max,{enable:!0,func:{srcRGB:$e.ONE,dstRGB:$e.ONE},equation:{rgb:$e.MAX_EXT}}),(0,He.Z)(Kd,Yh.min,{enable:!0,func:{srcRGB:$e.ONE,dstRGB:$e.ONE},equation:{rgb:$e.MIN_EXT}}),Kd);function Ih(e,i,t,n,r){i.updateStyleAttribute(e,t,n,r)}function TT(e,i){i.tileLayer||i.isTileLayer||(e.opacity&&Em("opacity",i,e.opacity),e.strokeWidth&&Em("strokeWidth",i,e.strokeWidth),e.strokeOpacity&&Em("strokeOpacity",i,e.strokeOpacity),e.stroke&&MT("stroke",i,e.stroke),e.offsets&&yx("offsets",i,e.offsets),e.textOffset&&yx("textOffset",i,e.textOffset),e.thetaOffset&&Em("thetaOffset",i,e.thetaOffset))}function Em(e,i,t){(0,Wr.isString)(t)?Ih(e,i,t,function(n){return n}):(0,Wr.isNumber)(t)||(Array.isArray(t)&&t.length===2?(0,Wr.isString)(t[0])&&(0,Wr.isFunction)(t[1])||(0,Wr.isString)(t[0])&&Array.isArray(t[1])&&(0,Wr.isNumber)(t[1][0])&&(0,Wr.isNumber)(t[1][1])?Ih(e,i,t[0],t[1]):Ih(e,i,[1],void 0):Ih(e,i,[1],void 0))}function yx(e,i,t){(0,Wr.isString)(t)?Ih(e,i,t,function(n){return n}):Array.isArray(t)&&t.length===2&&(0,Wr.isString)(t[0])&&(0,Wr.isFunction)(t[1])?Ih(e,i,t[0],t[1]):Array.isArray(t)&&t.length===2&&(0,Wr.isNumber)(t[0])&&(0,Wr.isNumber)(t[1])?Ih(e,i,t,void 0):Ih(e,i,[0,0],void 0)}function MT(e,i,t){(0,Wr.isString)(t)||(Array.isArray(t)&&t.length===2&&((0,Wr.isString)(t[0])&&(0,Wr.isFunction)(t[1])||(0,Wr.isString)(t[0])&&Array.isArray(t[1])&&t[1].length>0)?Ih(e,i,t[0],t[1]):Ih(e,i,"#fff",void 0))}var Mc;(function(e){e["GAODE1.x"]="GAODE1.x",e["GAODE2.x"]="GAODE2.x",e.MAPBOX="MAPBOX",e.DEFUALT="DEFUALTMAP",e.SIMPLE="SIMPLE",e.GLOBEL="GLOBEL"})(Mc||(Mc={}));function IT(e,i){var t=[i[0]-e[0],i[1]-e[1]],n=fu(t),r=[e[0]+n[0]*1e-4,e[1]+n[1]*1e-4];return r}function OT(e,i,t){if(e.length>0&&i.version===Mc["GAODE2.x"]){var n=t.coordCenter;typeof e[0].coordinates[0]=="number"?e.filter(function(r){return!r.originCoordinates}).map(function(r){r.version=Mc["GAODE2.x"],r.originCoordinates=(0,Wr.cloneDeep)(r.coordinates),r.coordinates=i.lngLatToCoordByLayer(r.coordinates,n)}):e.filter(function(r){return!r.originCoordinates}).map(function(r){r.version=Mc["GAODE2.x"],r.originCoordinates=(0,Wr.cloneDeep)(r.coordinates),r.coordinates=i.lngLatToCoordsByLayer(r.coordinates,n)})}}function RT(e,i){e.length>0&&i.version===Mc.SIMPLE&&e.map(function(t){t.simpleCoordinate||(t.coordinates=PT(t.coordinates,i),t.simpleCoordinate=!0)})}function PT(e,i){if(typeof e[0]=="number")return i.simpleMapCoord.unproject(e);if(e[0]&&e[0][0]instanceof Array){var t=[];return e.map(function(r){var o=[];r.map(function(u){o.push(i.simpleMapCoord.unproject(u))}),t.push(o)}),t}else{var n=[];return e.map(function(r){n.push(i.simpleMapCoord.unproject(r))}),n}}function kT(e,i){var t;if(!e.scale)return[];var n=(e==null||(t=e.scale)===null||t===void 0?void 0:t.scalers)||[],r=[];n.forEach(function(u){var f,g=u.field;(i.hasOwnProperty(g)||((f=e.scale)===null||f===void 0?void 0:f.type)==="variable")&&r.push(i[g])});var o=e.mapping?e.mapping(r):[];return o}function LT(e,i,t,n,r){var o=r==null?void 0:r.getLayerConfig(),u=o.arrow,f=u===void 0?{enable:!1}:u,g=i.map(function(x){var I={id:x._id,coordinates:x.coordinates};if(e.filter(function($){return $.scale!==void 0}).forEach(function($){var Ee=kT($,x);$.needRemapping=!1,$.name==="color"&&(Ee=Ee.map(function(Se){return co(Se)})),I[$.name]=Array.isArray(Ee)&&Ee.length===1?Ee[0]:Ee,$.name==="shape"&&(I.shape=t.getIconFontKey(I[$.name]))}),I.shape==="line"&&f.enable){var P=I.coordinates,G=IT(P[0],P[1]);I.coordinates.splice(1,0,G,G)}return I});return OT(g,n,r),RT(g,n),g}function DT(e,i,t,n,r,o){var u=new Bg(r,o),f=n.getLayerStyleAttributes()||[],g=u.data.dataArray,x=g,I=LT(f,x,i,t,e);return u.destroy(),I}function _x(e){return e.map(function(i){return typeof i=="string"&&(i=[i,{}]),i})}function xx(e,i,t,n){var r=e.multiPassRenderer,o=e.getLayerConfig(),u=o.enableTAA;return u?r.add(n("taa")):r.add(n("render")),_x(i).forEach(function(f){var g=(0,Mr.Z)(f,2),x=g[0],I=g[1];r.add(t(x),I)}),r.add(t("copy")),r}var FT=[["circle","cylinder"],["square","cylinder"],["triangle","cylinder"],["pentagon","cylinder"],["hexagon","cylinder"],["octogon","cylinder"],["hexagram","cylinder"],["rhombus","cylinder"],["vesica","cylinder"]];function NT(e,i,t){if(typeof i=="string"&&typeof t=="string"&&i!==t){if(e.type==="PointLayer"){e.dataState.dataSourceNeedUpdate=!0;return}FT.map(function(n){if(n.includes(i)&&n.includes(t)){e.dataState.dataSourceNeedUpdate=!0;return}})}}var BT=function(){function e(i){(0,Ur.Z)(this,e),this.layer=i}return(0,Jr.Z)(e,[{key:"pickRender",value:function(t){var n=this.layer;if(n.tileLayer)return n.tileLayer.pickRender(t);n.hooks.beforePickingEncode.call(),n.masks.length>0&&n.masks.filter(function(r){return r.inited}).forEach(function(){var r=(0,An.Z)(Nt().mark(function o(u){return Nt().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:u.render();case 1:case"end":return g.stop()}},o)}));return function(o){return r.apply(this,arguments)}}()),n.renderModels(!0),n.hooks.afterPickingEncode.call()}},{key:"pick",value:function(t,n){var r=this.layer.getContainer(),o=r.get(Ln.IPickingService);return t.type==="RasterLayer"?this.pickRasterLayer(t,n):(this.pickRender(n),o.pickFromPickingFBO(t,n))}},{key:"pickRasterLayer",value:function(t,n,r){var o=this.layer.getContainer(),u=o.get(Ln.IPickingService),f=o.get(Ln.IMapService),g=this.layer.getSource().extent,x=cf(n.lngLat,g),I={x:n.x,y:n.y,type:n.type,lngLat:n.lngLat,target:n,rasterValue:null},P=r||t;if(x){var G=this.readRasterValue(t,g,f,n.x,n.y);return I.rasterValue=G,u.triggerHoverOnLayer(P,I),!0}else return I.type=n.type==="mousemove"?"mouseout":"un"+n.type,u.triggerHoverOnLayer(P,(0,oe.Z)((0,oe.Z)({},I),{},{type:"unpick"})),u.triggerHoverOnLayer(P,I),!1}},{key:"readRasterValue",value:function(t,n,r,o,u){var f=t.getSource().data.dataArray[0],g=(0,Mr.Z)(n,4),x=g[0],I=x===void 0?0:x,P=g[1],G=P===void 0?0:P,$=g[2],Ee=$===void 0?10:$,Se=g[3],Re=Se===void 0?-10:Se,Ye=r.lngLatToContainer([I,G]),St=r.lngLatToContainer([Ee,Re]),vt=St.x-Ye.x,Ut=Ye.y-St.y,Kt=[(o-Ye.x)/vt,(u-St.y)/Ut],Tr=f.width||1,on=f.height||1,dn=Math.floor(Kt[0]*Tr),vn=Math.floor(Kt[1]*on),si=Math.max(0,vn-1)*Tr+dn,ai=f.data[si];return ai}},{key:"selectFeature",value:function(t){var n=this.layer,r=(0,Mr.Z)(t,3),o=r[0],u=r[1],f=r[2];n.hooks.beforeSelect.call([o,u,f])}},{key:"highlightPickedFeature",value:function(t){var n=(0,Mr.Z)(t,3),r=n[0],o=n[1],u=n[2];this.layer.hooks.beforeHighlight.call([r,o,u])}},{key:"getFeatureById",value:function(t){return this.layer.getSource().getFeatureById(t)}}]),e}(),zT=function(){function e(i){(0,Ur.Z)(this,e),this.layer=i;var t=this.layer.getContainer();this.rendererService=t.get(Ln.IRendererService)}return(0,Jr.Z)(e,[{key:"getColorTexture",value:function(t){var n=this.getTextureKey(t);return this.key===n?this.colorTexture:(this.createColorTexture(t),this.key=n,this.colorTexture)}},{key:"createColorTexture",value:function(t){var n=this.rendererService.createTexture2D,r=pu(t),o=n({data:r.data,width:r.width,height:r.height,flipY:!1});return this.colorTexture=o,o}},{key:"setColorTexture",value:function(t,n){this.key=this.getTextureKey(n),this.colorTexture=t}},{key:"destroy",value:function(){var t;(t=this.colorTexture)===null||t===void 0||t.destroy()}},{key:"getTextureKey",value:function(t){return"".concat(t.colors.join("_"),"_").concat(t.positions.join("_"))}}]),e}(),UT=["passes"],ZT=["moduleName","vertexShader","fragmentShader","triangulation","segmentNumber","workerEnabled","workerOptions"],bx,Zg,Ex;function jT(e,i){var t=typeof Symbol!="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(!t){if(Array.isArray(e)||(t=VT(e))||i&&e&&typeof e.length=="number"){t&&(e=t);var n=0,r=function(){};return{s:r,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(x){throw x},f:r}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var o=!0,u=!1,f;return{s:function(){t=t.call(e)},n:function(){var x=t.next();return o=x.done,x},e:function(x){u=!0,f=x},f:function(){try{!o&&t.return!=null&&t.return()}finally{if(u)throw f}}}}function VT(e,i){if(!!e){if(typeof e=="string")return Sx(e,i);var t=Object.prototype.toString.call(e).slice(8,-1);if(t==="Object"&&e.constructor&&(t=e.constructor.name),t==="Map"||t==="Set")return Array.from(e);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return Sx(e,i)}}function Sx(e,i){(i==null||i>e.length)&&(i=e.length);for(var t=0,n=new Array(i);t<i;t++)n[t]=e[t];return n}function GT(e){var i=HT();return function(){var n=(0,rr.Z)(e),r;if(i){var o=(0,rr.Z)(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return(0,jn.Z)(this,r)}}function HT(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var Ax=0,$v=(bx=Lg(Ln.IGlobalConfigService),Zg=function(e){(0,ui.Z)(t,e);var i=GT(t);function t(){var n,r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return(0,Ur.Z)(this,t),n=i.call(this),(0,He.Z)((0,er.Z)(n),"id","".concat(Ax++)),(0,He.Z)((0,er.Z)(n),"name","".concat(Ax)),(0,He.Z)((0,er.Z)(n),"visible",!0),(0,He.Z)((0,er.Z)(n),"zIndex",0),(0,He.Z)((0,er.Z)(n),"inited",!1),(0,He.Z)((0,er.Z)(n),"layerModelNeedUpdate",!1),(0,He.Z)((0,er.Z)(n),"pickedFeatureID",null),(0,He.Z)((0,er.Z)(n),"selectedFeatureID",null),(0,He.Z)((0,er.Z)(n),"styleNeedUpdate",!1),(0,He.Z)((0,er.Z)(n),"forceRender",!1),(0,He.Z)((0,er.Z)(n),"clusterZoom",0),(0,He.Z)((0,er.Z)(n),"defaultSourceConfig",{data:[],options:{parser:{type:"json"}}}),(0,He.Z)((0,er.Z)(n),"dataState",{dataSourceNeedUpdate:!1,dataMappingNeedUpdate:!1,filterNeedUpdate:!1,featureScaleNeedUpdate:!1,StyleAttrNeedUpdate:!1}),(0,He.Z)((0,er.Z)(n),"hooks",{init:new rw,afterInit:new T_,beforeRender:new T_,beforeRenderData:new nw,afterRender:new cd,beforePickingEncode:new cd,afterPickingEncode:new cd,beforeHighlight:new cd(["pickedColor"]),afterHighlight:new cd,beforeSelect:new cd(["pickedColor"]),afterSelect:new cd,beforeDestroy:new cd,afterDestroy:new cd}),(0,He.Z)((0,er.Z)(n),"models",[]),(0,He.Z)((0,er.Z)(n),"startInit",!1),(0,He.Z)((0,er.Z)(n),"layerChildren",[]),(0,He.Z)((0,er.Z)(n),"masks",[]),Bs((0,er.Z)(n),"configService",Ex,(0,er.Z)(n)),(0,He.Z)((0,er.Z)(n),"animateOptions",{enable:!1}),(0,He.Z)((0,er.Z)(n),"currentPickId",null),(0,He.Z)((0,er.Z)(n),"pendingStyleAttributes",[]),(0,He.Z)((0,er.Z)(n),"scaleOptions",{}),(0,He.Z)((0,er.Z)(n),"animateStatus",!1),(0,He.Z)((0,er.Z)(n),"isDestroyed",!1),(0,He.Z)((0,er.Z)(n),"encodeDataLength",0),(0,He.Z)((0,er.Z)(n),"sourceEvent",function(){n.dataState.dataSourceNeedUpdate=!0;var o=n.getLayerConfig();o&&o.autoFit&&n.fitBounds(o.fitBoundsOptions);var u=n.layerSource.getSourceCfg().autoRender;u&&n.reRender()}),n.name=r.name||n.id,n.zIndex=r.zIndex||0,n.rawConfig=r,n}return(0,Jr.Z)(t,[{key:"addMaskLayer",value:function(r){this.masks.push(r)}},{key:"removeMaskLayer",value:function(r){var o=this.masks.indexOf(r);o>-1&&this.masks.splice(o,1),r.destroy()}},{key:"getAttribute",value:function(r){return this.styleAttributeService.getLayerStyleAttribute(r)}},{key:"getLayerConfig",value:function(){return this.configService.getLayerConfig(this.id)}},{key:"updateLayerConfig",value:function(r){var o=this;if(Object.keys(r).map(function(f){f in o.rawConfig&&(o.rawConfig[f]=r[f])}),!this.startInit)this.needUpdateConfig=(0,oe.Z)((0,oe.Z)({},this.needUpdateConfig),r);else{var u=this.container.get(Ln.SceneID);TT(r,this),this.configService.setLayerConfig(u,this.id,(0,oe.Z)((0,oe.Z)((0,oe.Z)({},this.configService.getLayerConfig(this.id)),this.needUpdateConfig),r)),this.needUpdateConfig={}}}},{key:"setContainer",value:function(r,o){this.container=r,this.sceneContainer=o}},{key:"getContainer",value:function(){return this.container}},{key:"addPlugin",value:function(r){return this.plugins.push(r),this}},{key:"init",value:function(){var n=(0,An.Z)(Nt().mark(function o(){var u=this,f,g,x,I,P,G,$;return Nt().wrap(function(Se){for(;;)switch(Se.prev=Se.next){case 0:f=this.container.get(Ln.SceneID),this.startInit=!0,this.configService.setLayerConfig(f,this.id,this.rawConfig),this.layerType=this.rawConfig.layerType,this.iconService=this.container.get(Ln.IIconService),this.fontService=this.container.get(Ln.IFontService),this.rendererService=this.container.get(Ln.IRendererService),this.layerService=this.container.get(Ln.ILayerService),this.interactionService=this.container.get(Ln.IInteractionService),this.pickingService=this.container.get(Ln.IPickingService),this.mapService=this.container.get(Ln.IMapService),g=this.getLayerConfig(),x=g.enableMultiPassRenderer,I=g.passes,x&&I!==null&&I!==void 0&&I.length&&I.length>0&&this.mapService.on("mapAfterFrameChange",function(){u.renderLayers()}),this.cameraService=this.container.get(Ln.ICameraService),this.coordinateService=this.container.get(Ln.ICoordinateSystemService),this.shaderModuleService=this.container.get(Ln.IShaderModuleService),this.postProcessingPassFactory=this.container.get(Ln.IFactoryPostProcessingPass),this.normalPassFactory=this.container.get(Ln.IFactoryNormalPass),this.styleAttributeService=this.container.get(Ln.IStyleAttributeService),x&&(this.multiPassRenderer=this.container.get(Ln.IMultiPassRenderer),this.multiPassRenderer.setLayer(this)),this.pendingStyleAttributes.forEach(function(Re){var Ye=Re.attributeName,St=Re.attributeField,vt=Re.attributeValues,Ut=Re.updateOptions;u.styleAttributeService.updateStyleAttribute(Ye,{scale:(0,oe.Z)({field:St},u.splitValuesAndCallbackInAttribute(vt,u.getLayerConfig()[Ye]))},Ut)}),this.pendingStyleAttributes=[],this.plugins=this.container.getAll(Ln.ILayerPlugin),P=jT(this.plugins);try{for(P.s();!(G=P.n()).done;)$=G.value,$.apply(this,{rendererService:this.rendererService,mapService:this.mapService,styleAttributeService:this.styleAttributeService,normalPassFactory:this.normalPassFactory,postProcessingPassFactory:this.postProcessingPassFactory})}catch(Re){P.e(Re)}finally{P.f()}return this.layerPickService=new BT(this),this.textureService=new zT(this),Se.next=29,this.hooks.init.promise();case 29:this.inited=!0,this.emit("inited",{target:this,type:"inited"}),this.emit("add",{target:this,type:"add"}),this.hooks.afterInit.call();case 33:case"end":return Se.stop()}},o,this)}));function r(){return n.apply(this,arguments)}return r}()},{key:"updateModelData",value:function(r){r.attributes&&r.elements?this.models.map(function(o){o.updateAttributesAndElements(r.attributes,r.elements)}):console.warn("data error")}},{key:"createModelData",value:function(r,o){var u;if((u=this.layerModel)!==null&&u!==void 0&&u.createModelData)return this.layerModel.createModelData(o);var f=this.calculateEncodeData(r,o),g=this.triangulation;return f&&g?this.styleAttributeService.createAttributesAndIndices(f,g):{attributes:void 0,elements:void 0}}},{key:"setLayerPickService",value:function(r){this.layerPickService=r}},{key:"calculateEncodeData",value:function(r,o){return this.inited?DT(this,this.fontService,this.mapService,this.styleAttributeService,r,o):(console.warn("layer not inited!"),null)}},{key:"prepareBuildModel",value:function(){this.updateLayerConfig((0,oe.Z)((0,oe.Z)((0,oe.Z)({},this.getDefaultConfig()),this.rawConfig),this.needUpdateConfig));var r=this.getLayerConfig(),o=r.animateOption;o!=null&&o.enable&&(this.layerService.startAnimate(),this.animateStatus=!0)}},{key:"color",value:function(r,o,u){return this.updateStyleAttribute("color",r,o,u),this}},{key:"texture",value:function(r,o,u){return this.updateStyleAttribute("texture",r,o,u),this}},{key:"rotate",value:function(r,o,u){return this.updateStyleAttribute("rotate",r,o,u),this}},{key:"size",value:function(r,o,u){return this.updateStyleAttribute("size",r,o,u),this}},{key:"filter",value:function(r,o,u){return this.updateStyleAttribute("filter",r,o,u),this}},{key:"shape",value:function(r,o,u){var f,g,x,I=(f=this.styleAttributeService)===null||f===void 0||(g=f.getLayerStyleAttribute("shape"))===null||g===void 0||(x=g.scale)===null||x===void 0?void 0:x.field,P=r;return this.shapeOption={field:r,values:o},this.updateStyleAttribute("shape",r,o,u),this.tileLayer||NT(this,I,P),this}},{key:"label",value:function(r,o,u){return this.pendingStyleAttributes.push({attributeName:"label",attributeField:r,attributeValues:o,updateOptions:u}),this}},{key:"animate",value:function(r){var o={};return(0,Wr.isObject)(r)?(o.enable=!0,o=(0,oe.Z)((0,oe.Z)({},o),r)):o.enable=r,this.updateLayerConfig({animateOption:o}),this}},{key:"source",value:function(r,o){return(r==null?void 0:r.type)==="source"?(this.setSource(r),this):(this.sourceOption={data:r,options:o},this.clusterZoom=0,this)}},{key:"setData",value:function(r,o){var u=this;return this.inited?this.layerSource.setData(r,o):this.on("inited",function(){var f=u.getSource();f?u.layerSource.setData(r,o):u.source(new Bg(r,o))}),this}},{key:"style",value:function(r){var o=this,u=r.passes,f=(0,Ns.Z)(r,UT);return u&&_x(u).forEach(function(g){var x=o.multiPassRenderer.getPostProcessor().getPostProcessingPassByName(g[0]);x&&x.updateOptions(g[1])}),this.rawConfig=(0,oe.Z)((0,oe.Z)({},this.rawConfig),f),this.container&&(this.updateLayerConfig(this.rawConfig),this.styleNeedUpdate=!0),this}},{key:"scale",value:function(r,o){return(0,Wr.isObject)(r)?this.scaleOptions=(0,oe.Z)((0,oe.Z)({},this.scaleOptions),r):this.scaleOptions[r]=o,this}},{key:"renderLayers",value:function(){this.rendering=!0,this.layerService.renderLayers(),this.rendering=!1}},{key:"render",value:function(){return this.tileLayer?(this.tileLayer.render(),this):(this.layerService.beforeRenderData(this),this.encodeDataLength<=0&&!this.forceRender?this:(this.renderModels(),this))}},{key:"renderMultiPass",value:function(){var n=(0,An.Z)(Nt().mark(function o(){return Nt().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:if(!(this.encodeDataLength<=0&&!this.forceRender)){f.next=2;break}return f.abrupt("return");case 2:if(!(this.multiPassRenderer&&this.multiPassRenderer.getRenderFlag())){f.next=7;break}return f.next=5,this.multiPassRenderer.render();case 5:f.next=8;break;case 7:this.multiPassRenderer?this.renderModels():this.renderModels();case 8:case"end":return f.stop()}},o,this)}));function r(){return n.apply(this,arguments)}return r}()},{key:"active",value:function(r){var o={};return o.enableHighlight=(0,Wr.isObject)(r)?!0:r,(0,Wr.isObject)(r)?(o.enableHighlight=!0,r.color&&(o.highlightColor=r.color),r.mix&&(o.activeMix=r.mix)):o.enableHighlight=!!r,this.updateLayerConfig(o),this}},{key:"setActive",value:function(r,o){var u=this;if((0,Wr.isObject)(r)){var f=r.x,g=f===void 0?0:f,x=r.y,I=x===void 0?0:x;this.updateLayerConfig({highlightColor:(0,Wr.isObject)(o)?o.color:this.getLayerConfig().highlightColor,activeMix:(0,Wr.isObject)(o)?o.mix:this.getLayerConfig().activeMix}),this.pick({x:g,y:I})}else this.updateLayerConfig({pickedFeatureID:r,highlightColor:(0,Wr.isObject)(o)?o.color:this.getLayerConfig().highlightColor,activeMix:(0,Wr.isObject)(o)?o.mix:this.getLayerConfig().activeMix}),this.hooks.beforeSelect.call(ru(r)).then(function(){setTimeout(function(){u.reRender()},1)})}},{key:"select",value:function(r){var o={};return o.enableSelect=(0,Wr.isObject)(r)?!0:r,(0,Wr.isObject)(r)?(o.enableSelect=!0,r.color&&(o.selectColor=r.color),r.mix&&(o.selectMix=r.mix)):o.enableSelect=!!r,this.updateLayerConfig(o),this}},{key:"setSelect",value:function(r,o){var u=this;if((0,Wr.isObject)(r)){var f=r.x,g=f===void 0?0:f,x=r.y,I=x===void 0?0:x;this.updateLayerConfig({selectColor:(0,Wr.isObject)(o)?o.color:this.getLayerConfig().selectColor,selectMix:(0,Wr.isObject)(o)?o.mix:this.getLayerConfig().selectMix}),this.pick({x:g,y:I})}else this.updateLayerConfig({pickedFeatureID:r,selectColor:(0,Wr.isObject)(o)?o.color:this.getLayerConfig().selectColor,selectMix:(0,Wr.isObject)(o)?o.mix:this.getLayerConfig().selectMix}),this.hooks.beforeSelect.call(ru(r)).then(function(){setTimeout(function(){u.reRender()},1)})}},{key:"setBlend",value:function(r){return this.updateLayerConfig({blend:r}),this.layerModelNeedUpdate=!0,this.reRender(),this}},{key:"show",value:function(){return this.updateLayerConfig({visible:!0}),this.reRender(),this.emit("show"),this}},{key:"hide",value:function(){return this.updateLayerConfig({visible:!1}),this.reRender(),this.emit("hide"),this}},{key:"setIndex",value:function(r){return this.zIndex=r,this.layerService.updateLayerRenderList(),this.layerService.renderLayers(),this}},{key:"setCurrentPickId",value:function(r){this.currentPickId=r}},{key:"getCurrentPickId",value:function(){return this.currentPickId}},{key:"setCurrentSelectedId",value:function(r){this.selectedFeatureID=r}},{key:"getCurrentSelectedId",value:function(){return this.selectedFeatureID}},{key:"isVisible",value:function(){var r=this.mapService.getZoom(),o=this.getLayerConfig(),u=o.visible,f=o.minZoom,g=f===void 0?-1/0:f,x=o.maxZoom,I=x===void 0?1/0:x;return!!u&&r>=g&&r<I}},{key:"setMultiPass",value:function(r,o){if(this.updateLayerConfig({enableMultiPassRenderer:r}),o&&this.updateLayerConfig({passes:o}),r){var u=this.getLayerConfig(),f=u.passes,g=f===void 0?[]:f;this.multiPassRenderer=xx(this,g,this.postProcessingPassFactory,this.normalPassFactory),this.multiPassRenderer.setRenderFlag(!0);var x=this.rendererService.getViewportSize(),I=x.width,P=x.height;this.multiPassRenderer.resize(I,P)}return this}},{key:"setMinZoom",value:function(r){return this.updateLayerConfig({minZoom:r}),this}},{key:"getMinZoom",value:function(){var r=this.getLayerConfig(),o=r.minZoom;return o}},{key:"getMaxZoom",value:function(){var r=this.getLayerConfig(),o=r.maxZoom;return o}},{key:"get",value:function(r){var o=this.getLayerConfig();return o[r]}},{key:"setMaxZoom",value:function(r){return this.updateLayerConfig({maxZoom:r}),this}},{key:"setAutoFit",value:function(r){return this.updateLayerConfig({autoFit:r}),this}},{key:"fitBounds",value:function(r){if(!this.inited)return this.updateLayerConfig({autoFit:!0}),this;var o=this.getSource(),u=o.extent,f=u.some(function(g){return Math.abs(g)===1/0});return f?this:(this.mapService.fitBounds([[u[0],u[1]],[u[2],u[3]]],r),this)}},{key:"destroy",value:function(){var r,o,u,f=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.isDestroyed||(this.layerChildren.map(function(g){return g.destroy(!1)}),this.layerChildren=[],this.masks.map(function(g){return g.destroy(!1)}),this.masks=[],this.hooks.beforeDestroy.call(),this.layerSource.off("update",this.sourceEvent),(r=this.multiPassRenderer)===null||r===void 0||r.destroy(),this.textureService.destroy(),this.styleAttributeService.clearAllAttributes(),this.hooks.afterDestroy.call(),(o=this.layerModel)===null||o===void 0||o.clearModels(f),(u=this.tileLayer)===null||u===void 0||u.destroy(),this.models=[],this.emit("remove",{target:this,type:"remove"}),this.emit("destroy",{target:this,type:"destroy"}),this.removeAllListeners(),this.isDestroyed=!0)}},{key:"clear",value:function(){this.styleAttributeService.clearAllAttributes()}},{key:"clearModels",value:function(){var r;this.models.forEach(function(o){return o.destroy()}),(r=this.layerModel)===null||r===void 0||r.clearModels(),this.models=[]}},{key:"isDirty",value:function(){return!!(this.styleAttributeService.getLayerStyleAttributes()||[]).filter(function(r){return r.needRescale||r.needRemapping||r.needRegenerateVertices}).length}},{key:"setSource",value:function(r){var o=this;if(this.layerSource&&this.layerSource.off("update",this.sourceEvent),this.layerSource=r,this.clusterZoom=0,this.inited&&this.layerSource.cluster){var u=this.mapService.getZoom();this.layerSource.updateClusterData(u)}this.layerSource.inited&&this.sourceEvent(),this.layerSource.on("update",function(f){var g=f.type;if(o.coordCenter===void 0){var x,I=o.layerSource.center;o.coordCenter=I,(x=o.mapService)!==null&&x!==void 0&&x.setCoordCenter&&o.mapService.setCoordCenter(I)}g==="update"&&o.sourceEvent()})}},{key:"initSource",value:function(r){this.layerSource=r,this.clusterZoom=0,this.addSourceEvent()}},{key:"getSource",value:function(){return this.layerSource}},{key:"addSourceEvent",value:function(){var r=this;this.layerSource.on("update",function(){if(r.coordCenter===void 0){var o,u=r.layerSource.center;r.coordCenter=u,(o=r.mapService)!==null&&o!==void 0&&o.setCoordCenter&&r.mapService.setCoordCenter(u)}r.sourceEvent()})}},{key:"getScaleOptions",value:function(){return this.scaleOptions}},{key:"setEncodedData",value:function(r){this.encodedData=r,this.encodeDataLength=r.length}},{key:"getEncodedData",value:function(){return this.encodedData}},{key:"getScale",value:function(r){return this.styleAttributeService.getLayerAttributeScale(r)}},{key:"getLegend",value:function(r){var o,u,f,g=this.styleAttributeService.getLayerStyleAttribute(r),x=(g==null||(o=g.scale)===null||o===void 0?void 0:o.scalers)||[];return{type:(u=x[0].option)===null||u===void 0?void 0:u.type,field:g==null||(f=g.scale)===null||f===void 0?void 0:f.field,items:this.getLegendItems(r)}}},{key:"getLegendItems",value:function(r){var o=this.styleAttributeService.getLayerAttributeScale(r);if(!o)return[];if(o.invertExtent){var u=o.range().map(function(x){return(0,He.Z)({value:o.invertExtent(x)},r,x)});return u}else if(o.ticks){var f=o.ticks().map(function(x){return(0,He.Z)({value:x},r,o(x))});return f}else if(o!=null&&o.domain){var g=o.domain().filter(function(x){return!(0,Wr.isUndefined)(x)}).map(function(x){return(0,He.Z)({value:x},r,o(x))});return g}return[]}},{key:"pick",value:function(r){var o=r.x,u=r.y;this.interactionService.triggerHover({x:o,y:u})}},{key:"boxSelect",value:function(r,o){this.pickingService.boxPickLayer(this,r,o)}},{key:"buildLayerModel",value:function(){var n=(0,An.Z)(Nt().mark(function o(u){var f=this,g,x,I,P,G,$,Ee,Se,Re,Ye,St,vt,Ut,Kt;return Nt().wrap(function(on){for(;;)switch(on.prev=on.next){case 0:return g=u.moduleName,x=u.vertexShader,I=u.fragmentShader,P=u.triangulation,G=u.segmentNumber,$=u.workerEnabled,Ee=$===void 0?!1:$,Se=u.workerOptions,Re=(0,Ns.Z)(u,ZT),this.shaderModuleService.registerModule(g,{vs:x,fs:I}),Ye=this.shaderModuleService.getModule(g),St=Ye.vs,vt=Ye.fs,Ut=Ye.uniforms,Kt=this.rendererService.createModel,on.abrupt("return",new Promise(function(dn,vn){if(Se&&Se.modelType in Mi&&Ee)f.styleAttributeService.createAttributesAndIndicesAscy(f.encodedData,G,Se).then(function(Ou){var Ul=Ou.attributes,Gl=Ou.elements,Ic=Kt((0,oe.Z)({attributes:Ul,uniforms:Ut,fs:vt,vs:St,elements:Gl,blend:Ug[Yh.normal]},Re));dn(Ic)}).catch(function(Ou){return vn(Ou)});else{var si=f.styleAttributeService.createAttributesAndIndices(f.encodedData,P,G),ai=si.attributes,Hi=si.elements,wa=si.count,qa=(0,oe.Z)({attributes:ai,uniforms:Ut,fs:vt,vs:St,elements:Hi,blend:Ug[Yh.normal]},Re);wa&&(qa.count=wa);var zs=Kt(qa);dn(zs)}}));case 5:case"end":return on.stop()}},o,this)}));function r(o){return n.apply(this,arguments)}return r}()},{key:"createAttributes",value:function(r){var o=r.triangulation,u=this.styleAttributeService.createAttributes(this.encodedData,o),f=u.attributes;return f}},{key:"getTime",value:function(){return this.layerService.clock.getDelta()}},{key:"setAnimateStartTime",value:function(){this.animateStartTime=this.layerService.clock.getElapsedTime()}},{key:"stopAnimate",value:function(){this.animateStatus&&(this.layerService.stopAnimate(),this.animateStatus=!1,this.updateLayerConfig({animateOption:{enable:!1}}))}},{key:"getLayerAnimateTime",value:function(){return this.layerService.clock.getElapsedTime()-this.animateStartTime}},{key:"needPick",value:function(r){var o=this.getLayerConfig(),u=o.enableHighlight,f=u===void 0?!0:u,g=o.enableSelect,x=g===void 0?!0:g,I=this.eventNames().indexOf(r)!==-1||this.eventNames().indexOf("un"+r)!==-1;return(r==="click"||r==="dblclick")&&x&&(I=!0),r==="mousemove"&&(f||this.eventNames().indexOf("mouseenter")!==-1||this.eventNames().indexOf("unmousemove")!==-1||this.eventNames().indexOf("mouseout")!==-1)&&(I=!0),this.isVisible()&&I}},{key:"buildModels",value:function(){var n=(0,An.Z)(Nt().mark(function o(){return Nt().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:throw new Error("Method not implemented.");case 1:case"end":return f.stop()}},o)}));function r(){return n.apply(this,arguments)}return r}()},{key:"rebuildModels",value:function(){var n=(0,An.Z)(Nt().mark(function o(){return Nt().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return f.next=2,this.buildModels();case 2:case"end":return f.stop()}},o,this)}));function r(){return n.apply(this,arguments)}return r}()},{key:"renderMulPass",value:function(){var n=(0,An.Z)(Nt().mark(function o(u){return Nt().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return g.next=2,u.render();case 2:case"end":return g.stop()}},o)}));function r(o){return n.apply(this,arguments)}return r}()},{key:"renderModels",value:function(r){var o=this;return this.encodeDataLength<=0&&!this.forceRender?this:(this.hooks.beforeRender.call(),this.models.forEach(function(u){u.draw({uniforms:o.layerModel.getUninforms()},r)}),this.hooks.afterRender.call(),this)}},{key:"updateStyleAttribute",value:function(r,o,u,f){["color","size","texture","rotate","filter","label","shape"].indexOf(r)!==-1&&this.configService.setAttributeConfig(this.id,(0,He.Z)({},r,{field:o,values:u})),this.startInit?this.styleAttributeService.updateStyleAttribute(r,{scale:(0,oe.Z)({field:o},this.splitValuesAndCallbackInAttribute(u,this.getLayerConfig()[o]))},f):this.pendingStyleAttributes.push({attributeName:r,attributeField:o,attributeValues:u,updateOptions:f})}},{key:"getLayerAttributeConfig",value:function(){return this.configService.getAttributeConfig(this.id)}},{key:"getShaderPickStat",value:function(){return this.layerService.getShaderPickStat()}},{key:"setEarthTime",value:function(r){console.warn("empty fn")}},{key:"processData",value:function(r){return r}},{key:"getModelType",value:function(){throw new Error("Method not implemented.")}},{key:"getDefaultConfig",value:function(){return{}}},{key:"initLayerModels",value:function(){var n=(0,An.Z)(Nt().mark(function o(){return Nt().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return this.models.forEach(function(g){return g.destroy()}),this.models=[],f.next=4,this.layerModel.initModels();case 4:this.models=f.sent;case 5:case"end":return f.stop()}},o,this)}));function r(){return n.apply(this,arguments)}return r}()},{key:"reRender",value:function(){this.inited&&this.layerService.reRender()}},{key:"splitValuesAndCallbackInAttribute",value:function(r,o){return{values:(0,Wr.isFunction)(r)?void 0:r||o,callback:(0,Wr.isFunction)(r)?r:void 0}}}]),t}(ir.EventEmitter),Ex=Ds(Zg.prototype,"configService",[bx],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Zg),Cx,jg,Tx;function WT(e,i){var t=typeof Symbol!="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(!t){if(Array.isArray(e)||(t=$T(e))||i&&e&&typeof e.length=="number"){t&&(e=t);var n=0,r=function(){};return{s:r,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(x){throw x},f:r}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var o=!0,u=!1,f;return{s:function(){t=t.call(e)},n:function(){var x=t.next();return o=x.done,x},e:function(x){u=!0,f=x},f:function(){try{!o&&t.return!=null&&t.return()}finally{if(u)throw f}}}}function $T(e,i){if(!!e){if(typeof e=="string")return Mx(e,i);var t=Object.prototype.toString.call(e).slice(8,-1);if(t==="Object"&&e.constructor&&(t=e.constructor.name),t==="Map"||t==="Set")return Array.from(e);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return Mx(e,i)}}function Mx(e,i){(i==null||i>e.length)&&(i=e.length);for(var t=0,n=new Array(i);t<i;t++)n[t]=e[t];return n}var Sl=(Cx=Lg(Ln.IGlobalConfigService),jg=function(){function e(i){(0,Ur.Z)(this,e),Bs(this,"configService",Tx,this),this.layer=i,this.rendererService=i.getContainer().get(Ln.IRendererService),this.pickingService=i.getContainer().get(Ln.IPickingService),this.shaderModuleService=i.getContainer().get(Ln.IShaderModuleService),this.styleAttributeService=i.getContainer().get(Ln.IStyleAttributeService),this.mapService=i.getContainer().get(Ln.IMapService),this.iconService=i.getContainer().get(Ln.IIconService),this.fontService=i.getContainer().get(Ln.IFontService),this.cameraService=i.getContainer().get(Ln.ICameraService),this.layerService=i.getContainer().get(Ln.ILayerService),this.registerBuiltinAttributes(),this.startModelAnimate();var t=this.rendererService.createTexture2D;this.createTexture2D=t,this.DATA_TEXTURE_WIDTH=1024,this.rowCount=1,this.cellLength=0,this.cellProperties=[],this.cacheStyleProperties={thetaOffset:void 0,opacity:void 0,strokeOpacity:void 0,strokeWidth:void 0,stroke:void 0,offsets:void 0},this.stylePropertiesExist={hasThetaOffset:0,hasOpacity:0,hasStrokeOpacity:0,hasStrokeWidth:0,hasStroke:0,hasOffsets:0},this.dataTextureTest=this.layerService.getOESTextureFloat(),this.dataTextureTest||(this.dataTexture=this.createTexture2D({data:new Uint8Array(4),mag:$e.NEAREST,min:$e.NEAREST,width:1,height:1}))}return(0,Jr.Z)(e,[{key:"clearLastCalRes",value:function(){this.cellProperties=[],this.cellLength=0,this.stylePropertiesExist={hasThetaOffset:0,hasOpacity:0,hasStrokeOpacity:0,hasStrokeWidth:0,hasStroke:0,hasOffsets:0}}},{key:"getCellTypeLayout",value:function(){return this.dataTextureTest?[this.rowCount,this.DATA_TEXTURE_WIDTH,0,0,this.stylePropertiesExist.hasOpacity,this.stylePropertiesExist.hasStrokeOpacity,this.stylePropertiesExist.hasStrokeWidth,this.stylePropertiesExist.hasStroke,this.stylePropertiesExist.hasOffsets,this.stylePropertiesExist.hasThetaOffset,0,0,0,0,0,1]:[1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,-1]}},{key:"dataTextureNeedUpdate",value:function(t){var n=!1;return(0,Wr.isEqual)(t.thetaOffset,this.cacheStyleProperties.thetaOffset)||(n=!0,this.cacheStyleProperties.thetaOffset=t.thetaOffset),(0,Wr.isEqual)(t.opacity,this.cacheStyleProperties.opacity)||(n=!0,this.cacheStyleProperties.opacity=t.opacity),(0,Wr.isEqual)(t.strokeOpacity,this.cacheStyleProperties.strokeOpacity)||(n=!0,this.cacheStyleProperties.strokeOpacity=t.strokeOpacity),(0,Wr.isEqual)(t.strokeWidth,this.cacheStyleProperties.strokeWidth)||(n=!0,this.cacheStyleProperties.strokeWidth=t.strokeWidth),(0,Wr.isEqual)(t.stroke,this.cacheStyleProperties.stroke)||(n=!0,this.cacheStyleProperties.stroke=t.stroke),(0,Wr.isEqual)(t.offsets,this.cacheStyleProperties.offsets)||(n=!0,this.cacheStyleProperties.offsets=t.offsets),this.dataTexture===void 0&&(n=!0),n}},{key:"judgeStyleAttributes",value:function(t){this.clearLastCalRes(),t.opacity!==void 0&&!(0,Wr.isNumber)(t.opacity)&&(this.cellProperties.push({attr:"opacity",count:1}),this.stylePropertiesExist.hasOpacity=1,this.cellLength+=1),t.strokeOpacity!==void 0&&!(0,Wr.isNumber)(t.strokeOpacity)&&(this.cellProperties.push({attr:"strokeOpacity",count:1}),this.stylePropertiesExist.hasStrokeOpacity=1,this.cellLength+=1),t.strokeWidth!==void 0&&!(0,Wr.isNumber)(t.strokeWidth)&&(this.cellProperties.push({attr:"strokeWidth",count:1}),this.stylePropertiesExist.hasStrokeWidth=1,this.cellLength+=1),t.stroke!==void 0&&!this.isStaticColor(t.stroke)&&(this.cellProperties.push({attr:"stroke",count:4}),this.stylePropertiesExist.hasStroke=1,this.cellLength+=4),t.offsets!==void 0&&!this.isOffsetStatic(t.offsets)&&(this.cellProperties.push({attr:"offsets",count:2}),this.stylePropertiesExist.hasOffsets=1,this.cellLength+=2),t.thetaOffset!==void 0&&!(0,Wr.isNumber)(t.thetaOffset)&&(this.cellProperties.push({attr:"thetaOffset",count:1}),this.stylePropertiesExist.hasThetaOffset=1,this.cellLength+=1)}},{key:"isStaticColor",value:function(t){return(0,Wr.isString)(t)?!!Ei(t):!1}},{key:"getStrokeColor",value:function(t){if(this.isStaticColor(t)){var n=co(t);return n[0]=n[0]?n[0]:0,n[1]=n[1]?n[1]:0,n[2]=n[2]?n[2]:0,n[3]=n[3]?n[3]:0,n}else return[0,0,0,0]}},{key:"isOffsetStatic",value:function(t){return!!(Array.isArray(t)&&t.length===2&&(0,Wr.isNumber)(t[0])&&(0,Wr.isNumber)(t[1]))}},{key:"patchMod",value:function(t,n){for(var r=0;r<n;r++)t.push(-1)}},{key:"patchData",value:function(t,n,r){var o=WT(r),u;try{for(o.s();!(u=o.n()).done;){var f=u.value,g=f.attr,x=f.count,I=n[g];I!==void 0?g==="stroke"?t.push.apply(t,(0,ie.Z)(co(I))):g==="offsets"?this.isOffsetStatic(I)?t.push(-I[0],I[1]):t.push(0,0):t.push((0,Wr.isNumber)(I)?I:1):this.patchMod(t,x)}}catch(P){o.e(P)}finally{o.f()}}},{key:"calDataFrame",value:function(t,n,r){for(var o=n.length,u=Math.ceil(o*t/this.DATA_TEXTURE_WIDTH),f=u*this.DATA_TEXTURE_WIDTH,g=[],x=0;x<o;x++){var I=n[x];this.patchData(g,I,r)}for(var P=g.length;P<f;P++)g.push(-1);return{data:g,width:this.DATA_TEXTURE_WIDTH,height:u}}},{key:"getBlend",value:function(){var t=this.layer.getLayerConfig(),n=t.blend,r=n===void 0?"normal":n;return Ug[Yh[r]]}},{key:"getDefaultStyle",value:function(){return{}}},{key:"getUninforms",value:function(){throw new Error("Method not implemented.")}},{key:"getAnimateUniforms",value:function(){return{}}},{key:"needUpdate",value:function(){return!1}},{key:"buildModels",value:function(){var i=(0,An.Z)(Nt().mark(function n(){return Nt().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:throw new Error("Method not implemented.");case 1:case"end":return o.stop()}},n)}));function t(){return i.apply(this,arguments)}return t}()},{key:"initModels",value:function(){var i=(0,An.Z)(Nt().mark(function n(){return Nt().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:throw new Error("Method not implemented.");case 1:case"end":return o.stop()}},n)}));function t(){return i.apply(this,arguments)}return t}()},{key:"clearModels",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0}},{key:"getAttribute",value:function(){throw new Error("Method not implemented.")}},{key:"render",value:function(){throw new Error("Method not implemented.")}},{key:"registerBuiltinAttributes",value:function(){throw new Error("Method not implemented.")}},{key:"animateOption2Array",value:function(t){return[t.enable?0:1,t.duration||4,t.interval||.2,t.trailLength||.1]}},{key:"startModelAnimate",value:function(){var t=this.layer.getLayerConfig(),n=t.animateOption;n.enable&&this.layer.setAnimateStartTime()}}]),e}(),Tx=Ds(jg.prototype,"configService",[Cx],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),jg),Vg=100,H7=36,W7=40;function Ix(e){return e/180*Math.acos(-1)}function Ox(e){var i=Ix(e[0])+Math.PI/2,t=Ix(e[1]),n=Vg+Math.random()*.4,r=n*Math.cos(t)*Math.cos(i),o=n*Math.cos(t)*Math.sin(i),u=n*Math.sin(t);return[o,u,r]}function $7(e,i){var t=mat4.create(),n=mat4.create(),r=vec3.fromValues(0,1,0),o=vec3.fromValues(0,0,0);i=i||{},e=typeof e!="undefined"?e:1;for(var u=typeof i.segments!="undefined"?i.segments:32,f=2+u,g=2*f,x=[],I=[],P=[],G=[],$=[],Ee=[],Se=0;Se<=f;Se++){for(var Re=Se/f,Ye=Re*Math.PI,St=0;St<=g;St++){var vt=St/g,Ut=vt*Math.PI*2;mat4.identity(n),mat4.rotateZ(n,n,-Ye),mat4.identity(t),mat4.rotateY(t,t,Ut),vec3.transformMat4(o,r,n),vec3.transformMat4(o,o,t),vec3.scale(o,o,-e),P.push(o.slice()),G.push.apply(G,_toConsumableArray(o.slice())),vec3.normalize(o,o),$.push.apply($,_toConsumableArray(o.slice())),Ee.push([vt,1-Re]),G.push(vt,1-Re)}if(Se>0)for(var Kt=P.length,Tr=Kt-2*(g+1);Tr+g+2<Kt;Tr++)x.push([Tr,Tr+1,Tr+g+1]),I.push(Tr,Tr+1,Tr+g+1),x.push([Tr+g+1,Tr+1,Tr+g+2]),I.push(Tr+g+1,Tr+1,Tr+g+2)}return{cells:x,positions:P,uvs:Ee,positionsArr:G,indicesArr:I,normalArr:$}}var Sm=ls(),X7=ls(),up=ls(),Qd=ls(),Xv=ls();function Gg(e,i,t,n,r){al(e,t,n),Ot(e,e),i=Pf(-e[1],e[0]);var o=Pf(-t[1],t[0]);return[r/vr(i,o),i]}function Jd(e,i){return Uc(e,-i[1],i[0])}function Yv(e,i,t){return ba(e,i,t),Ot(e,e),e}function Hg(e,i){return e[0]===i[0]&&e[1]===i[1]}function Y7(e){for(var i=new Map,t=0;t<e.length;t++){var n=e[0].toString()+"-"+e[1].toString();i.get(n)?(e.splice(t,1),t++):i.set(n,n)}return e}var XT=function(){function e(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};(0,Ur.Z)(this,e),(0,He.Z)(this,"lastFlip",-1),(0,He.Z)(this,"miter",Pf(0,0)),(0,He.Z)(this,"started",!1),(0,He.Z)(this,"dash",!1),(0,He.Z)(this,"totalDistance",0),(0,He.Z)(this,"currentIndex",0),this.join=i.join||"miter",this.cap=i.cap||"butt",this.miterLimit=i.miterLimit||10,this.thickness=i.thickness||1,this.dash=i.dash||!1,this.complex={positions:[],indices:[],normals:[],startIndex:0,indexes:[]}}return(0,Jr.Z)(e,[{key:"simpleExtrude",value:function(t){var n=this.complex;if(t.length<=1)return n;this.lastFlip=-1,this.started=!1,this.normal=null,this.totalDistance=0;for(var r=t.length,o=n.startIndex,u=1;u<r;u++){var f=t[u-1],g=t[u],x=u<t.length-1?t[u+1]:null,I=this.simpleSegment(n,o,f,g,x);o+=I}if(this.dash)for(var P=0;P<n.positions.length/6;P++)n.positions[P*6+5]=this.totalDistance;return n.startIndex=n.positions.length/6,n}},{key:"simpleExtrude_gaode2",value:function(t,n){var r=this.complex;if(t.length<=1)return r;this.lastFlip=-1,this.started=!1,this.normal=null,this.totalDistance=0;for(var o=t.length,u=r.startIndex,f=1;f<o;f++){var g,x,I,P=t[f-1];P.push((g=n[f-1][2])!==null&&g!==void 0?g:0);var G=n[f-1],$=t[f];$.push((x=n[f][2])!==null&&x!==void 0?x:0);var Ee=n[f],Se=f<t.length-1?[].concat((0,ie.Z)(t[f+1]),[(I=n[f+1][2])!==null&&I!==void 0?I:0]):null,Re=f<n.length-1?n[f+1]:null,Ye=this.simpleSegment(r,u,P,$,Se,G,Ee,Re);u+=Ye}if(this.dash)for(var St=0;St<r.positions.length/6;St++)r.positions[St*6+5]=this.totalDistance;return r.startIndex=r.positions.length/6,r}},{key:"extrude_gaode2",value:function(t,n){var r=this.complex;if(t.length<=1)return r;this.lastFlip=-1,this.started=!1,this.normal=null,this.totalDistance=0;for(var o=t.length,u=r.startIndex,f=1;f<o;f++){var g,x,I,P=t[f-1];P.push((g=n[f-1][2])!==null&&g!==void 0?g:0);var G=n[f-1],$=t[f];$.push((x=n[f][2])!==null&&x!==void 0?x:0);var Ee=n[f],Se=f<t.length-1?[].concat((0,ie.Z)(t[f+1]),[(I=n[f+1][2])!==null&&I!==void 0?I:0]):null,Re=f<n.length-1?n[f+1]:null,Ye=this.segment_gaode2(r,u,P,$,Se,G,Ee,Re);u+=Ye}if(this.dash)for(var St=0;St<r.positions.length/6;St++)r.positions[St*6+5]=this.totalDistance;return r.startIndex=r.positions.length/6,r}},{key:"extrude",value:function(t){var n=this.complex;if(t.length<=1)return n;this.lastFlip=-1,this.started=!1,this.normal=null,this.totalDistance=0;for(var r=t.length,o=n.startIndex,u=1;u<r;u++){var f=t[u-1],g=t[u],x=u<t.length-1?t[u+1]:null,I=this.segment(n,o,f,g,x);o+=I}if(this.dash)for(var P=0;P<n.positions.length/6;P++)n.positions[P*6+5]=this.totalDistance;return n.startIndex=n.positions.length/6,n}},{key:"simpleSegment",value:function(t,n,r,o,u){var f=0,g=t.indices,x=t.positions,I=t.normals,P=xs([o[0],o[1]]),G=xs([r[0],r[1]]);Yv(up,P,G);var $=0;if(this.dash&&($=this.lineSegmentDistance(P,G),this.totalDistance+=$),this.normal||(this.normal=ls(),Jd(this.normal,up)),this.started||(this.started=!0,this.extrusions(x,I,r,this.normal,this.thickness,this.totalDistance-$)),g.push(n+0,n+1,n+2),!u)Jd(this.normal,up),this.extrusions(x,I,o,this.normal,this.thickness,this.totalDistance),g.push.apply(g,(0,ie.Z)(this.lastFlip===1?[n,n+2,n+3]:[n+2,n+1,n+3])),f+=2;else{var Ee=xs([u[0],u[1]]);Hg(P,Ee)&&al(Ee,P,Ot(Ee,Lf(Ee,P,G))),Yv(Qd,Ee,P);var Se=Gg(Xv,ls(),up,Qd,this.thickness),Re=(0,Mr.Z)(Se,2),Ye=Re[0],St=Re[1],vt=vr(Xv,this.normal)<0?-1:1;this.extrusions(x,I,o,St,Ye,this.totalDistance),g.push.apply(g,(0,ie.Z)(this.lastFlip===1?[n,n+2,n+3]:[n+2,n+1,n+3])),vt=-1,kf(this.normal,St),f+=2,this.lastFlip=vt}return f}},{key:"segment_gaode2",value:function(t,n,r,o,u,f,g,x){var I=0,P=t.indices,G=t.positions,$=t.normals,Ee=this.cap==="square",Se=this.join==="bevel",Re=xs([g[0],g[1]]),Ye=xs([f[0],f[1]]);Yv(up,o,r);var St=0;if(this.dash&&(St=this.lineSegmentDistance(Re,Ye),this.totalDistance+=St),this.normal||(this.normal=ls(),Jd(this.normal,up)),!this.started)if(this.started=!0,Ee){var vt=ls(),Ut=ls();al(vt,this.normal,up),al(Ut,this.normal,up),$.push(Ut[0],Ut[1],0),$.push(vt[0],vt[1],0),G.push(r[0],r[1],r[2]|0,this.totalDistance-St,-this.thickness,r[2]|0),this.complex.indexes.push(this.currentIndex),G.push(r[0],r[1],r[2]|0,this.totalDistance-St,this.thickness,r[2]|0),this.complex.indexes.push(this.currentIndex),this.currentIndex++}else this.extrusions(G,$,r,this.normal,this.thickness,this.totalDistance-St);if(P.push(n+0,n+1,n+2),u){Hg(o,u)&&al(u,o,Ot(u,Lf(u,o,r))),Yv(Qd,u,o);var on=Gg(Xv,ls(),up,Qd,this.thickness),dn=(0,Mr.Z)(on,2),vn=dn[0],si=dn[1],ai=vr(Xv,this.normal)<0?-1:1,Hi=Se;if(!Hi&&this.join==="miter"){var wa=vn;wa>this.miterLimit&&(Hi=!0)}Hi?($.push(this.normal[0],this.normal[1],0),$.push(si[0],si[1],0),G.push(o[0],o[1],o[2]|0,this.totalDistance,-this.thickness*ai,o[2]|0),this.complex.indexes.push(this.currentIndex),G.push(o[0],o[1],o[2]|0,this.totalDistance,this.thickness*ai,o[2]|0),this.complex.indexes.push(this.currentIndex),this.currentIndex++,P.push.apply(P,(0,ie.Z)(this.lastFlip!==-ai?[n,n+2,n+3]:[n+2,n+1,n+3])),P.push(n+2,n+3,n+4),Jd(Sm,Qd),kf(this.normal,Sm),$.push(this.normal[0],this.normal[1],0),G.push(o[0],o[1],o[2]|0,this.totalDistance,-this.thickness*ai,o[2]|0),this.complex.indexes.push(this.currentIndex),this.currentIndex++,I+=3):(this.extrusions(G,$,o,si,vn,this.totalDistance),P.push.apply(P,(0,ie.Z)(this.lastFlip===1?[n,n+2,n+3]:[n+2,n+1,n+3])),ai=-1,kf(this.normal,si),I+=2),this.lastFlip=ai}else{if(Jd(this.normal,up),Ee){var Kt=ls(),Tr=ls();ba(Tr,up,this.normal),al(Kt,up,this.normal),$.push(Tr[0],Tr[1],0),$.push(Kt[0],Kt[1],0),G.push(o[0],o[1],o[2]|0,this.totalDistance,this.thickness,o[2]|0),this.complex.indexes.push(this.currentIndex),G.push(o[0],o[1],o[2]|0,this.totalDistance,this.thickness,o[2]|0),this.complex.indexes.push(this.currentIndex),this.currentIndex++}else this.extrusions(G,$,o,this.normal,this.thickness,this.totalDistance);P.push.apply(P,(0,ie.Z)(this.lastFlip===1?[n,n+2,n+3]:[n+2,n+1,n+3])),I+=2}return I}},{key:"segment",value:function(t,n,r,o,u){var f=0,g=t.indices,x=t.positions,I=t.normals,P=this.cap==="square",G=this.join==="bevel",$=xs([o[0],o[1]]),Ee=xs([r[0],r[1]]);Yv(up,$,Ee);var Se=0;if(this.dash&&(Se=this.lineSegmentDistance($,Ee),this.totalDistance+=Se),this.normal||(this.normal=ls(),Jd(this.normal,up)),!this.started)if(this.started=!0,P){var Re=ls(),Ye=ls();al(Re,this.normal,up),al(Ye,this.normal,up),I.push(Ye[0],Ye[1],0),I.push(Re[0],Re[1],0),x.push(r[0],r[1],r[2]|0,this.totalDistance-Se,-this.thickness,r[2]|0),this.complex.indexes.push(this.currentIndex),x.push(r[0],r[1],r[2]|0,this.totalDistance-Se,this.thickness,r[2]|0),this.complex.indexes.push(this.currentIndex),this.currentIndex++}else this.extrusions(x,I,r,this.normal,this.thickness,this.totalDistance-Se);if(g.push(n+0,n+1,n+2),u){var Ut=xs([u[0],u[1]]);Hg($,Ut)&&al(Ut,$,Ot(Ut,Lf(Ut,$,Ee))),Yv(Qd,Ut,$);var Kt=Gg(Xv,ls(),up,Qd,this.thickness),Tr=(0,Mr.Z)(Kt,2),on=Tr[0],dn=Tr[1],vn=vr(Xv,this.normal)<0?-1:1,si=G;if(!si&&this.join==="miter"){var ai=on;ai>this.miterLimit&&(si=!0)}si?(I.push(this.normal[0],this.normal[1],0),I.push(dn[0],dn[1],0),x.push(o[0],o[1],o[2]|0,this.totalDistance,-this.thickness*vn,o[2]|0),this.complex.indexes.push(this.currentIndex),x.push(o[0],o[1],o[2]|0,this.totalDistance,this.thickness*vn,o[2]|0),this.complex.indexes.push(this.currentIndex),this.currentIndex++,g.push.apply(g,(0,ie.Z)(this.lastFlip!==-vn?[n,n+2,n+3]:[n+2,n+1,n+3])),g.push(n+2,n+3,n+4),Jd(Sm,Qd),kf(this.normal,Sm),I.push(this.normal[0],this.normal[1],0),x.push(o[0],o[1],o[2]|0,this.totalDistance,-this.thickness*vn,o[2]|0),this.complex.indexes.push(this.currentIndex),this.currentIndex++,f+=3):(this.extrusions(x,I,o,dn,on,this.totalDistance),g.push.apply(g,(0,ie.Z)(this.lastFlip===1?[n,n+2,n+3]:[n+2,n+1,n+3])),vn=-1,kf(this.normal,dn),f+=2),this.lastFlip=vn}else{if(Jd(this.normal,up),P){var St=ls(),vt=ls();ba(vt,up,this.normal),al(St,up,this.normal),I.push(vt[0],vt[1],0),I.push(St[0],St[1],0),x.push(o[0],o[1],o[2]|0,this.totalDistance,this.thickness,o[2]|0),this.complex.indexes.push(this.currentIndex),x.push(o[0],o[1],o[2]|0,this.totalDistance,this.thickness,o[2]|0),this.complex.indexes.push(this.currentIndex),this.currentIndex++}else this.extrusions(x,I,o,this.normal,this.thickness,this.totalDistance);g.push.apply(g,(0,ie.Z)(this.lastFlip===1?[n,n+2,n+3]:[n+2,n+1,n+3])),f+=2}return f}},{key:"extrusions",value:function(t,n,r,o,u,f){n.push(o[0],o[1],0),n.push(o[0],o[1],0),t.push(r[0],r[1],r[2]|0,f,-u,r[2]|0),this.complex.indexes.push(this.currentIndex),t.push(r[0],r[1],r[2]|0,f,u,r[2]|0),this.complex.indexes.push(this.currentIndex),this.currentIndex++}},{key:"lineSegmentDistance",value:function(t,n){var r=n[0]-t[0],o=n[1]-t[1];return Math.sqrt(r*r+o*o)}}]),e}();function Kv(){var e=new yl(3);return yl!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0),e}function YT(e){var i=new yl(3);return i[0]=e[0],i[1]=e[1],i[2]=e[2],i}function Rx(e){var i=e[0],t=e[1],n=e[2];return Math.hypot(i,t,n)}function lp(e,i,t){var n=new yl(3);return n[0]=e,n[1]=i,n[2]=t,n}function KT(e,i){return e[0]=i[0],e[1]=i[1],e[2]=i[2],e}function QT(e,i,t,n){return e[0]=i,e[1]=t,e[2]=n,e}function JT(e,i,t){return e[0]=i[0]+t[0],e[1]=i[1]+t[1],e[2]=i[2]+t[2],e}function Px(e,i,t){return e[0]=i[0]-t[0],e[1]=i[1]-t[1],e[2]=i[2]-t[2],e}function kx(e,i,t){return e[0]=i[0]*t[0],e[1]=i[1]*t[1],e[2]=i[2]*t[2],e}function Lx(e,i,t){return e[0]=i[0]/t[0],e[1]=i[1]/t[1],e[2]=i[2]/t[2],e}function qT(e,i){return e[0]=Math.ceil(i[0]),e[1]=Math.ceil(i[1]),e[2]=Math.ceil(i[2]),e}function e3(e,i){return e[0]=Math.floor(i[0]),e[1]=Math.floor(i[1]),e[2]=Math.floor(i[2]),e}function t3(e,i,t){return e[0]=Math.min(i[0],t[0]),e[1]=Math.min(i[1],t[1]),e[2]=Math.min(i[2],t[2]),e}function r3(e,i,t){return e[0]=Math.max(i[0],t[0]),e[1]=Math.max(i[1],t[1]),e[2]=Math.max(i[2],t[2]),e}function n3(e,i){return e[0]=Math.round(i[0]),e[1]=Math.round(i[1]),e[2]=Math.round(i[2]),e}function i3(e,i,t){return e[0]=i[0]*t,e[1]=i[1]*t,e[2]=i[2]*t,e}function a3(e,i,t,n){return e[0]=i[0]+t[0]*n,e[1]=i[1]+t[1]*n,e[2]=i[2]+t[2]*n,e}function Dx(e,i){var t=i[0]-e[0],n=i[1]-e[1],r=i[2]-e[2];return Math.hypot(t,n,r)}function Fx(e,i){var t=i[0]-e[0],n=i[1]-e[1],r=i[2]-e[2];return t*t+n*n+r*r}function Nx(e){var i=e[0],t=e[1],n=e[2];return i*i+t*t+n*n}function Bx(e,i){return e[0]=-i[0],e[1]=-i[1],e[2]=-i[2],e}function o3(e,i){return e[0]=1/i[0],e[1]=1/i[1],e[2]=1/i[2],e}function Qv(e,i){var t=i[0],n=i[1],r=i[2],o=t*t+n*n+r*r;return o>0&&(o=1/Math.sqrt(o)),e[0]=i[0]*o,e[1]=i[1]*o,e[2]=i[2]*o,e}function zx(e,i){return e[0]*i[0]+e[1]*i[1]+e[2]*i[2]}function Ux(e,i,t){var n=i[0],r=i[1],o=i[2],u=t[0],f=t[1],g=t[2];return e[0]=r*g-o*f,e[1]=o*u-n*g,e[2]=n*f-r*u,e}function s3(e,i,t,n){var r=i[0],o=i[1],u=i[2];return e[0]=r+n*(t[0]-r),e[1]=o+n*(t[1]-o),e[2]=u+n*(t[2]-u),e}function u3(e,i,t,n,r,o){var u=o*o,f=u*(2*o-3)+1,g=u*(o-2)+o,x=u*(o-1),I=u*(3-2*o);return e[0]=i[0]*f+t[0]*g+n[0]*x+r[0]*I,e[1]=i[1]*f+t[1]*g+n[1]*x+r[1]*I,e[2]=i[2]*f+t[2]*g+n[2]*x+r[2]*I,e}function l3(e,i,t,n,r,o){var u=1-o,f=u*u,g=o*o,x=f*u,I=3*o*f,P=3*g*u,G=g*o;return e[0]=i[0]*x+t[0]*I+n[0]*P+r[0]*G,e[1]=i[1]*x+t[1]*I+n[1]*P+r[1]*G,e[2]=i[2]*x+t[2]*I+n[2]*P+r[2]*G,e}function c3(e,i){i=i||1;var t=bp()*2*Math.PI,n=bp()*2-1,r=Math.sqrt(1-n*n)*i;return e[0]=Math.cos(t)*r,e[1]=Math.sin(t)*r,e[2]=n*i,e}function C0(e,i,t){var n=i[0],r=i[1],o=i[2],u=t[3]*n+t[7]*r+t[11]*o+t[15];return u=u||1,e[0]=(t[0]*n+t[4]*r+t[8]*o+t[12])/u,e[1]=(t[1]*n+t[5]*r+t[9]*o+t[13])/u,e[2]=(t[2]*n+t[6]*r+t[10]*o+t[14])/u,e}function f3(e,i,t){var n=i[0],r=i[1],o=i[2];return e[0]=n*t[0]+r*t[3]+o*t[6],e[1]=n*t[1]+r*t[4]+o*t[7],e[2]=n*t[2]+r*t[5]+o*t[8],e}function p3(e,i,t){var n=t[0],r=t[1],o=t[2],u=t[3],f=i[0],g=i[1],x=i[2],I=r*x-o*g,P=o*f-n*x,G=n*g-r*f,$=r*G-o*P,Ee=o*I-n*G,Se=n*P-r*I,Re=u*2;return I*=Re,P*=Re,G*=Re,$*=2,Ee*=2,Se*=2,e[0]=f+I+$,e[1]=g+P+Ee,e[2]=x+G+Se,e}function h3(e,i,t,n){var r=[],o=[];return r[0]=i[0]-t[0],r[1]=i[1]-t[1],r[2]=i[2]-t[2],o[0]=r[0],o[1]=r[1]*Math.cos(n)-r[2]*Math.sin(n),o[2]=r[1]*Math.sin(n)+r[2]*Math.cos(n),e[0]=o[0]+t[0],e[1]=o[1]+t[1],e[2]=o[2]+t[2],e}function v3(e,i,t,n){var r=[],o=[];return r[0]=i[0]-t[0],r[1]=i[1]-t[1],r[2]=i[2]-t[2],o[0]=r[2]*Math.sin(n)+r[0]*Math.cos(n),o[1]=r[1],o[2]=r[2]*Math.cos(n)-r[0]*Math.sin(n),e[0]=o[0]+t[0],e[1]=o[1]+t[1],e[2]=o[2]+t[2],e}function m3(e,i,t,n){var r=[],o=[];return r[0]=i[0]-t[0],r[1]=i[1]-t[1],r[2]=i[2]-t[2],o[0]=r[0]*Math.cos(n)-r[1]*Math.sin(n),o[1]=r[0]*Math.sin(n)+r[1]*Math.cos(n),o[2]=r[2],e[0]=o[0]+t[0],e[1]=o[1]+t[1],e[2]=o[2]+t[2],e}function Wg(e,i){var t=e[0],n=e[1],r=e[2],o=i[0],u=i[1],f=i[2],g=Math.sqrt(t*t+n*n+r*r),x=Math.sqrt(o*o+u*u+f*f),I=g*x,P=I&&zx(e,i)/I;return Math.acos(Math.min(Math.max(P,-1),1))}function g3(e){return e[0]=0,e[1]=0,e[2]=0,e}function y3(e){return"vec3("+e[0]+", "+e[1]+", "+e[2]+")"}function _3(e,i){return e[0]===i[0]&&e[1]===i[1]&&e[2]===i[2]}function x3(e,i){var t=e[0],n=e[1],r=e[2],o=i[0],u=i[1],f=i[2];return Math.abs(t-o)<=Au*Math.max(1,Math.abs(t),Math.abs(o))&&Math.abs(n-u)<=Au*Math.max(1,Math.abs(n),Math.abs(u))&&Math.abs(r-f)<=Au*Math.max(1,Math.abs(r),Math.abs(f))}var $g=Px,b3=kx,E3=Lx,S3=Dx,w3=Fx,A3=Rx,C3=Nx,T3=function(){var e=Kv();return function(i,t,n,r,o,u){var f,g;for(t||(t=3),n||(n=0),r?g=Math.min(r*t+n,i.length):g=i.length,f=n;f<g;f+=t)e[0]=i[f],e[1]=i[f+1],e[2]=i[f+2],o(e,e,u),i[f]=e[0],i[f+1]=e[1],i[f+2]=e[2];return i}}();function K7(e){var i=e[0][0],t=e[0][e[0].length-1];i[0]===t[0]&&i[1]===t[1]&&(e[0]=e[0].slice(0,e[0].length-1));for(var n=e[0].length,r=earcut.flatten(e),o=r.vertices,u=r.dimensions,f=[],g=[],x=0;x<o.length/u;x++)u===2?f.push(o[x*2],o[x*2+1],1):f.push(o[x*3],o[x*3+1],1);var I=earcut(r.vertices,r.holes,r.dimensions);g.push.apply(g,_toConsumableArray(I));for(var P=function(Ee){var Se=r.vertices.slice(Ee*u,(Ee+1)*u),Re=r.vertices.slice((Ee+1)*u,(Ee+2)*u);Re.length===0&&(Re=r.vertices.slice(0,u));var Ye=f.length/3;f.push(Se[0],Se[1],1,Re[0],Re[1],1,Se[0],Se[1],0,Re[0],Re[1],0),g.push.apply(g,_toConsumableArray([0,2,1,2,3,1].map(function(St){return St+Ye})))},G=0;G<n;G++)P(G);return{positions:f,index:g}}function Q7(e){var i=earcut.flatten(e),t=earcut(i.vertices,i.holes,i.dimensions);return{positions:i.vertices,index:t}}function Zx(e){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,t=e[0][0],n=e[0][e[0].length-1];t[0]===n[0]&&t[1]===n[1]&&(e[0]=e[0].slice(0,e[0].length-1));for(var r=e[0].length,o=hl().flatten(e),u=o.vertices,f=o.dimensions,g=[],x=[],I=[],P=0;P<u.length/f;P++)f===2?g.push(u[P*2],u[P*2+1],1,-1,-1):g.push(u[P*3],u[P*3+1],1,-1,-1),I.push(0,0,1);var G=hl()(o.vertices,o.holes,o.dimensions);x.push.apply(x,(0,ie.Z)(G));for(var $=function(Re){var Ye=o.vertices.slice(Re*f,(Re+1)*f),St=o.vertices.slice((Re+1)*f,(Re+2)*f);St.length===0&&(St=o.vertices.slice(0,f));var vt=g.length/5;g.push(Ye[0],Ye[1],1,0,0,St[0],St[1],1,.1,0,Ye[0],Ye[1],0,0,.8,St[0],St[1],0,.1,.8);var Ut=M3([St[0],St[1],1],[Ye[0],Ye[1],0],[Ye[0],Ye[1],1],i);I.push.apply(I,(0,ie.Z)(Ut).concat((0,ie.Z)(Ut),(0,ie.Z)(Ut),(0,ie.Z)(Ut))),x.push.apply(x,(0,ie.Z)([1,2,0,3,2,1].map(function(Kt){return Kt+vt})))},Ee=0;Ee<r;Ee++)$(Ee);return{positions:g,index:x,normals:I}}function M3(e,i,t){var n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1,r=Kv(),o=Kv(),u=Kv();n&&(e=du(e),i=du(i),t=du(t));var f=lp.apply(v,(0,ie.Z)(e)),g=lp.apply(v,(0,ie.Z)(i)),x=lp.apply(v,(0,ie.Z)(t));$g(r,x,g),$g(o,f,g),Ux(u,r,o);var I=Kv();return Qv(I,u),I}var Fh,vv;(function(e){e.CYLINDER="cylinder",e.SQUARECOLUMN="squareColumn",e.TRIANGLECOLUMN="triangleColumn",e.HEXAGONCOLUMN="hexagonColumn",e.PENTAGONCOLUMN="pentagonColumn"})(vv||(vv={}));var mv;(function(e){e.CIRCLE="circle",e.SQUARE="square",e.TRIANGLE="triangle",e.HEXAGON="hexagon",e.PENTAGON="pentagon"})(mv||(mv={}));function T0(e){for(var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,t=Math.PI*2/e,n=[],r=0;r<e;r++)n.push(t*r+i*Math.PI/12);var o=n.map(function(u){var f=Math.sin(u+Math.PI/4),g=Math.cos(u+Math.PI/4);return[f,g,0]});return o}function jx(){return T0(30)}function Vx(){return T0(4)}function Gx(){return T0(3)}function Hx(){return T0(6,1)}function Wx(){return T0(5)}var Xg=(Fh={},(0,He.Z)(Fh,mv.CIRCLE,jx),(0,He.Z)(Fh,mv.HEXAGON,Hx),(0,He.Z)(Fh,mv.TRIANGLE,Gx),(0,He.Z)(Fh,mv.SQUARE,Vx),(0,He.Z)(Fh,mv.PENTAGON,Wx),(0,He.Z)(Fh,vv.CYLINDER,jx),(0,He.Z)(Fh,vv.HEXAGONCOLUMN,Hx),(0,He.Z)(Fh,vv.TRIANGLECOLUMN,Gx),(0,He.Z)(Fh,vv.SQUARECOLUMN,Vx),(0,He.Z)(Fh,vv.PENTAGONCOLUMN,Wx),Fh),wm={};function gv(e){var i=d(e.coordinates);return{vertices:[].concat((0,ie.Z)(i),(0,ie.Z)(i),(0,ie.Z)(i),(0,ie.Z)(i)),indices:[0,1,2,2,3,0],size:i.length}}function $x(e){var i=d(e.coordinates),t=Ox(i);return{vertices:[].concat((0,ie.Z)(t),(0,ie.Z)(t),(0,ie.Z)(t),(0,ie.Z)(t)),indices:[0,1,2,2,3,0],size:t.length}}function Xx(e){var i=e.shape,t=F3(i,!1),n=t.positions,r=t.index,o=t.normals;return{vertices:n,indices:r,normals:o,size:5}}function I3(e){var i=d(e.coordinates);return{vertices:(0,ie.Z)(i),indices:[0],size:i.length}}function yv(e){var i=e.coordinates,t=e.originCoordinates,n=e.version,r=new XT({dash:!0,join:"bevel"});if(n==="GAODE2.x"){var o=i;Array.isArray(o[0][0])||(o=[i]);var u=t;Array.isArray(u[0][0])||(u=[t]);for(var f=0;f<o.length;f++){var g=o[f],x=u[f];r.extrude_gaode2(g,x)}}else{var I=i;I[0]&&!Array.isArray(I[0][0])&&(I=[i]),I.forEach(function(G){r.extrude(G)})}var P=r.complex;return{vertices:P.positions,indices:P.indices,normals:P.normals,indexes:P.indexes,size:6}}function O3(e){var i=e.coordinates,t=[];if(!Array.isArray(i[0]))return{vertices:[],indices:[],normals:[],size:6,count:0};var n=R3(i),r=n.results,o=n.totalDistance;return r.map(function(u){t.push(u[0],u[1],u[2],u[3],0,o)}),{vertices:t,indices:[],normals:[],size:6,count:r.length}}function J7(e){var i=e.coordinates,t=[];if(!Array.isArray(i[0]))return{vertices:[],indices:[],size:4,count:0};var n=P3(i),r=n.results;return r.map(function(o){t.push(o[0],o[1],o[2],o[3])}),{vertices:t,indices:[],size:4,count:r.length}}function Yx(e,i){var t=i[0]-e[0],n=i[1]-e[1];return Math.sqrt(t*t+n*n)}function Jv(e,i){return e.length<3&&e.push(0),i!==void 0&&e.push(i),e}function R3(e){var i=e;Array.isArray(i)&&Array.isArray(i[0])&&Array.isArray(i[0][0])&&(i=e.flat());var t=0;if(i.length<2)return{results:i,totalDistance:0};var n=[],r=Jv(i[0],t);n.push(r);for(var o=1;o<i.length-1;o++){var u=Yx(i[o-1],i[o]);t+=u;var f=Jv(i[o],t);n.push(f),n.push(f)}var g=Yx(i[i.length-2],i[i.length-1]);return t+=g,n.push(Jv(i[i.length-1],t)),{results:n,totalDistance:t}}function P3(e){if(e.length<2)return{results:e};var i=[],t=Jv(e[0]);i.push(t);for(var n=1;n<e.length-1;n++){var r=Jv(e[n]);i.push(r),i.push(r)}return i.push(Jv(e[e.length-1])),{results:i}}function M0(e){var i=e.coordinates,t=hl().flatten(i),n=t.vertices,r=t.dimensions,o=t.holes;return{indices:hl()(n,o,r),vertices:n,size:r}}function k3(e){var i=e.coordinates,t=hl().flatten(i),n=t.vertices,r=t.dimensions,o=t.holes;return{indices:hl()(n,o,r),vertices:L3(n),size:r+4}}function L3(e){for(var i=[],t=_(e),n=t.center,r=t.radius,o=0;o<e.length;o+=2){var u=e[o],f=e[o+1];i.push.apply(i,[u,f,0].concat((0,ie.Z)(n),[r]))}return i}function D3(e){var i=e.coordinates,t=Zx(i,!0),n=t.positions,r=t.index,o=t.normals;return{vertices:n,indices:r,normals:o,size:5}}function q7(e){var i=e.shape,t=B3(i),n=t.positions,r=t.index;return{vertices:n,indices:r,size:3}}function Am(e){var i=e.coordinates,t=[].concat((0,ie.Z)(i[0]),[0,0,1,i[1][0],i[0][1],0,1,1],(0,ie.Z)(i[1]),[0,1,0],(0,ie.Z)(i[0]),[0,0,1],(0,ie.Z)(i[1]),[0,1,0,i[0][0],i[1][1],0,0,0]),n=[0,1,2,3,4,5];return{vertices:t,indices:n,size:5}}function Cm(e,i){for(var t=i||30,n=e.coordinates,r=[],o=[],u=function(x){r.push(x,1,x,n[0][0],n[0][1],n[1][0],n[1][1],x,-1,x,n[0][0],n[0][1],n[1][0],n[1][1]),x!==t-1&&o.push.apply(o,(0,ie.Z)([0,1,2,1,3,2].map(function(I){return x*2+I})))},f=0;f<t;f++)u(f);return{vertices:r,indices:o,size:7}}function ek(e){var i=e.coordinates;i.length===2&&i.push(0);var t=Tm(-1,1),n=Tm(1,1),r=Tm(-1,-1),o=Tm(1,-1),u=[].concat(_toConsumableArray(i),_toConsumableArray(t),_toConsumableArray(i),_toConsumableArray(r),_toConsumableArray(i),_toConsumableArray(o),_toConsumableArray(i),_toConsumableArray(n)),f=[0,1,2,3,0,2];return{vertices:u,indices:f,size:5}}function F3(e){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(wm&&wm[e])return wm[e];var t=Xg[e]?Xg[e]():Xg.cylinder(),n=Zx([t],i);return wm[e]=n,n}function tk(e,i){for(var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:3,n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1,r=new Float32Array(e.length/t*3),o,u,f,g=vec3.create(),x=vec3.create(),I=vec3.create(),P=0,G=i.length;P<G;P+=3){o=i[P+0]*3,u=i[P+1]*3,f=i[P+2]*3;var $=[e[o],e[o+1]],Ee=[e[u],e[u+1]],Se=[e[f],e[f+1]];n&&($=lngLatToMeters($),Ee=lngLatToMeters(Ee),Se=lngLatToMeters(Se));var Re=$,Ye=_slicedToArray(Re,2),St=Ye[0],vt=Ye[1],Ut=vec3.fromValues(St,vt,e[o+2]),Kt=Ee,Tr=_slicedToArray(Kt,2),on=Tr[0],dn=Tr[1],vn=vec3.fromValues(on,dn,e[u+2]),si=Se,ai=_slicedToArray(si,2),Hi=ai[0],wa=ai[1],qa=vec3.fromValues(Hi,wa,e[f+2]);vec3.sub(g,qa,vn),vec3.sub(x,Ut,vn),vec3.cross(I,g,x),r[o]+=g[0],r[o+1]+=g[1],r[o+2]+=g[2],r[u]+=g[0],r[u+1]+=g[1],r[u+2]+=g[2],r[f]+=g[0],r[f+1]+=g[1],r[f+2]+=g[2]}return N3(r),r}function N3(e){for(var i=0,t=e.length;i<t;i+=3){var n=vec3.fromValues(e[i],e[i+1],e[i+2]),r=vec3.create();vec3.normalize(r,n),e.set(r,i)}}function rk(e){var i=e[0][0],t=e[0][e[0].length-1];return i[0]===t[0]&&i[1]===t[1]}function B3(e){var i=["cylinder","triangleColumn","hexagonColumn","squareColumn"],t=geometryShape[e]?geometryShape[e]():geometryShape.circle(),n=i.indexOf(e)===-1?fillPolygon([t]):extrudePolygon([t]);return n}function Tm(e,i){var t=(e+1)/2,n=(i+1)/2;return[t,n]}function nk(){var e=primitiveSphere(EARTH_RADIUS,{segments:EARTH_SEGMENTS}),i=e.positionsArr,t=e.indicesArr,n=e.normalArr;return{vertices:i,indices:t,size:5,normals:n}}function ik(){var e=primitiveSphere(EARTH_RADIUS+EARTH_RADIUS_OUTER,{segments:EARTH_SEGMENTS}),i=e.positionsArr,t=e.indicesArr,n=e.normalArr;return{vertices:i,indices:t,size:5,normals:n}}function z3(e){var i=U3();return function(){var n=(0,rr.Z)(e),r;if(i){var o=(0,rr.Z)(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return(0,jn.Z)(this,r)}}function U3(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var Z3=`
uniform float u_opacity;

varying vec4 v_dash_array;
varying vec4 v_color;

uniform float segmentNumber;

varying mat4 styleMappingMat; // \u4F20\u9012\u4ECE\u7247\u5143\u4E2D\u4F20\u9012\u7684\u6620\u5C04\u6570\u636E

#pragma include "picking"

void main() {
  float opacity = styleMappingMat[0][0];
  float d_distance_ratio = styleMappingMat[3].b; // \u5F53\u524D\u9876\u70B9\u5728\u5F27\u7EBF\u4E2D\u6240\u5904\u7684\u5206\u6BB5\u6BD4\u4F8B

  gl_FragColor = v_color;
  gl_FragColor.a *= opacity;

  float flag = 0.;
  float dashLength = mod(d_distance_ratio, v_dash_array.x + v_dash_array.y + v_dash_array.z + v_dash_array.w);
  if(dashLength < v_dash_array.x || (dashLength > (v_dash_array.x + v_dash_array.y) && dashLength <  v_dash_array.x + v_dash_array.y + v_dash_array.z)) {
    flag = 1.;
  };
  gl_FragColor.a *=flag;
  
  gl_FragColor = filterColor(gl_FragColor);
}`,j3=`
attribute vec4 a_Color;
attribute vec3 a_Position;
attribute vec4 a_Instance;
attribute float a_Size;
uniform mat4 u_ModelMatrix;
uniform mat4 u_Mvp;
uniform float segmentNumber;
varying vec4 v_color;


uniform vec4 u_dash_array: [10.0, 5., 0, 0];
uniform float u_lineDir: 1.0;
varying vec4 v_dash_array;

uniform float u_thetaOffset: 0.314;

uniform float u_opacity: 1.0;
varying mat4 styleMappingMat; // \u7528\u4E8E\u5C06\u5728\u9876\u70B9\u7740\u8272\u5668\u4E2D\u8BA1\u7B97\u597D\u7684\u6837\u5F0F\u503C\u4F20\u9012\u7ED9\u7247\u5143

#pragma include "styleMapping"
#pragma include "styleMappingCalOpacity"
#pragma include "styleMappingCalThetaOffset"

#pragma include "projection"
#pragma include "project"
#pragma include "picking"

float bezier3(vec3 arr, float t) {
  float ut = 1. - t;
  return (arr.x * ut + arr.y * t) * ut + (arr.y * ut + arr.z * t) * t;
}
vec2 midPoint(vec2 source, vec2 target, float arcThetaOffset) {
  vec2 center = target - source;
  float r = length(center);
  float theta = atan(center.y, center.x);
  float thetaOffset = arcThetaOffset;
  float r2 = r / 2.0 / cos(thetaOffset);
  float theta2 = theta + thetaOffset;
  vec2 mid = vec2(r2*cos(theta2) + source.x, r2*sin(theta2) + source.y);
  if(u_lineDir == 1.0) { // \u6B63\u5411
    return mid;
  } else { // \u9006\u5411
    // (mid + vmin)/2 = (s + t)/2
    vec2 vmid = source + target - mid;
    return vmid;
  }
  // return mid;
}
float getSegmentRatio(float index) {
  // dash: index / (segmentNumber - 1.);
  // normal: smoothstep(0.0, 1.0, index / (segmentNumber - 1.));
  return index / (segmentNumber - 1.);
}
vec2 interpolate (vec2 source, vec2 target, float t, float arcThetaOffset) {
  // if the angularDist is PI, linear interpolation is applied. otherwise, use spherical interpolation
  vec2 mid = midPoint(source, target, arcThetaOffset);
  vec3 x = vec3(source.x, mid.x, target.x);
  vec3 y = vec3(source.y, mid.y, target.y);
  return vec2(bezier3(x ,t), bezier3(y,t));
}
vec2 getExtrusionOffset(vec2 line_clipspace, float offset_direction) {
  // normalized direction of the line
  vec2 dir_screenspace = normalize(line_clipspace);
  // rotate by 90 degrees
   dir_screenspace = vec2(-dir_screenspace.y, dir_screenspace.x);
  vec2 offset = dir_screenspace * offset_direction * setPickingSize(a_Size) / 2.0;
  return offset;
}
vec2 getNormal(vec2 line_clipspace, float offset_direction) {
  // normalized direction of the line
  vec2 dir_screenspace = normalize(line_clipspace);
  // rotate by 90 degrees
   dir_screenspace = vec2(-dir_screenspace.y, dir_screenspace.x);
   return reverse_offset_normal(vec3(dir_screenspace,1.0)).xy * sign(offset_direction);
}

void main() {
  v_color = a_Color;

  // cal style mapping - \u6570\u636E\u7EB9\u7406\u6620\u5C04\u90E8\u5206\u7684\u8BA1\u7B97
  styleMappingMat = mat4(
    0.0, 0.0, 0.0, 0.0, // opacity - strokeOpacity - strokeWidth - empty
    0.0, 0.0, 0.0, 0.0, // strokeR - strokeG - strokeB - strokeA
    0.0, 0.0, 0.0, 0.0, // offsets[0] - offsets[1]
    0.0, 0.0, 0.0, 0.0  // dataset \u6570\u636E\u96C6
  );

  float rowCount = u_cellTypeLayout[0][0];    // \u5F53\u524D\u7684\u6570\u636E\u7EB9\u7406\u6709\u51E0\u884C
  float columnCount = u_cellTypeLayout[0][1]; // \u5F53\u770B\u5230\u6570\u636E\u7EB9\u7406\u6709\u51E0\u5217
  float columnWidth = 1.0/columnCount;  // \u5217\u5BBD
  float rowHeight = 1.0/rowCount;       // \u884C\u9AD8
  float cellCount = calCellCount(); // opacity - strokeOpacity - strokeWidth - stroke - offsets
  float id = a_vertexId; // \u7B2Cn\u4E2A\u9876\u70B9
  float cellCurrentRow = floor(id * cellCount / columnCount) + 1.0; // \u8D77\u59CB\u70B9\u5728\u7B2C\u51E0\u884C
  float cellCurrentColumn = mod(id * cellCount, columnCount) + 1.0; // \u8D77\u59CB\u70B9\u5728\u7B2C\u51E0\u5217
  
  // cell \u56FA\u5B9A\u987A\u5E8F opacity -> strokeOpacity -> strokeWidth -> stroke -> thetaOffset... 
  // \u6309\u987A\u5E8F\u4ECE cell \u4E2D\u53D6\u503C\u3001\u82E5\u6CA1\u6709\u5219\u81EA\u52A8\u5F80\u4E0B\u53D6\u503C
  float textureOffset = 0.0; // \u5728 cell \u4E2D\u53D6\u503C\u7684\u504F\u79FB\u91CF

  vec2 opacityAndOffset = calOpacityAndOffset(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset, columnWidth, rowHeight);
  styleMappingMat[0][0] = opacityAndOffset.r;
  textureOffset = opacityAndOffset.g;

  vec2 thetaOffsetAndOffset = calThetaOffsetAndOffset(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset, columnWidth, rowHeight);
  styleMappingMat[0][1] = thetaOffsetAndOffset.r;
  textureOffset = thetaOffsetAndOffset.g;
  // cal style mapping - \u6570\u636E\u7EB9\u7406\u6620\u5C04\u90E8\u5206\u7684\u8BA1\u7B97

  
  vec2 source = a_Instance.rg;  // \u8D77\u59CB\u70B9
  vec2 target =  a_Instance.ba; // \u7EC8\u70B9
  float segmentIndex = a_Position.x;
  float segmentRatio = getSegmentRatio(segmentIndex);

  float indexDir = mix(-1.0, 1.0, step(segmentIndex, 0.0));
  float nextSegmentRatio = getSegmentRatio(segmentIndex + indexDir);

  vec2 s = source;
  vec2 t = target;
  
  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x
    s = unProjCustomCoord(source);
    t = unProjCustomCoord(target);
  }
  float total_Distance = pixelDistance(s, t) / 2.0 * PI;
  v_dash_array = pow(2.0, 20.0 - u_Zoom) * u_dash_array / total_Distance;

  styleMappingMat[3].b = segmentIndex / segmentNumber;

  // styleMappingMat[0][1] - arcThetaOffset
  vec4 curr = project_position(vec4(interpolate(source, target, segmentRatio, styleMappingMat[0][1]), 0.0, 1.0));
  vec4 next = project_position(vec4(interpolate(source, target, nextSegmentRatio, styleMappingMat[0][1]), 0.0, 1.0));
  // v_normal = getNormal((next.xy - curr.xy) * indexDir, a_Position.y);
  //unProjCustomCoord
  
  vec2 offset = project_pixel(getExtrusionOffset((next.xy - curr.xy) * indexDir, a_Position.y));
  

  // gl_Position = project_common_position_to_clipspace(vec4(curr.xy + offset, 0, 1.0));
  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x
    // gl_Position = u_Mvp * (vec4(curr.xy + offset, 0, 1.0));
    gl_Position = u_Mvp * (vec4(curr.xy + offset, 0, 1.0));
  } else {
    gl_Position = project_common_position_to_clipspace(vec4(curr.xy + offset, 0, 1.0));
  }
  gl_PointSize = 5.0;
  setPickingColor(a_PickingColor);
}
`,V3=`
#define Animate 0.0
#define LineTexture 1.0

uniform float u_opacity;
uniform float u_textureBlend;
uniform float u_blur : 0.9;
uniform float u_line_type: 0.0;
// varying vec2 v_normal;
varying vec4 v_dash_array;
varying vec4 v_color;

uniform float u_time;
uniform vec4 u_animate: [ 1., 2., 1.0, 0.2 ];

uniform float u_line_texture;
uniform sampler2D u_texture;
uniform vec2 u_textSize;

uniform float segmentNumber;
varying vec2 v_iconMapUV;

varying mat4 styleMappingMat; // \u4F20\u9012\u4ECE\u7247\u5143\u4E2D\u4F20\u9012\u7684\u6620\u5C04\u6570\u636E

#pragma include "picking"

void main() {
  float opacity = styleMappingMat[0][0];
  float animateSpeed = 0.0; // \u8FD0\u52A8\u901F\u5EA6
  float d_segmentIndex = styleMappingMat[3].r;   // \u5F53\u524D\u9876\u70B9\u5728\u5F27\u7EBF\u4E2D\u6240\u5904\u7684\u5206\u6BB5\u4F4D\u7F6E
  float d_distance_ratio = styleMappingMat[3].b; // \u5F53\u524D\u9876\u70B9\u5728\u5F27\u7EBF\u4E2D\u6240\u5904\u7684\u5206\u6BB5\u6BD4\u4F8B

  gl_FragColor = v_color;
  
  gl_FragColor.a *= opacity;

  if(u_animate.x == Animate && u_line_texture != LineTexture) {
      animateSpeed = u_time / u_animate.y;
      float alpha =1.0 - fract( mod(1.0- d_distance_ratio, u_animate.z)* (1.0/ u_animate.z) + u_time / u_animate.y);
      alpha = (alpha + u_animate.w -1.0) / u_animate.w;
      // alpha = smoothstep(0., 1., alpha);
      alpha = clamp(alpha, 0.0, 1.0);
      gl_FragColor.a *= alpha;
  }

  // \u5F53\u5B58\u5728\u8D34\u56FE\u65F6\u5728\u5E95\u8272\u4E0A\u8D34\u4E0A\u8D34\u56FE
  if(u_line_texture == LineTexture) { // while load texture
    float arcRadio = smoothstep( 0.0, 1.0, (d_segmentIndex / segmentNumber));
    // float arcRadio = smoothstep( 0.0, 1.0, d_distance_ratio);

    float count = styleMappingMat[3].g; // \u8D34\u56FE\u5728\u5F27\u7EBF\u4E0A\u91CD\u590D\u7684\u6570\u91CF

    float time = 0.0;
    if(u_animate.x == Animate) {
      time = u_time / u_animate.y;
    }
    float redioCount = arcRadio * count;

    float u = fract(redioCount - time);
    float v = styleMappingMat[3].a; // \u6A2A\u5411 v
    vec2 uv= v_iconMapUV / u_textSize + vec2(u, v) / u_textSize * 64.;

    vec4 pattern = texture2D(u_texture, uv);

    if(u_animate.x == Animate) {
      float currentPlane = floor(redioCount - time);
      float textureStep = floor(count * u_animate.z);
      float a = mod(currentPlane, textureStep);
      if(a < textureStep - 1.0) {
        pattern = vec4(0.0);
      }
    }

    if(u_textureBlend == 0.0) { // normal
      pattern.a = 0.0;
      gl_FragColor = filterColor(gl_FragColor + pattern);
    } else { // replace
        pattern.a *= opacity;
        if(gl_FragColor.a <= 0.0) {
          pattern.a = 0.0;
        }
        gl_FragColor = filterColor(pattern);
    }
    
  } else {
     gl_FragColor = filterColor(gl_FragColor);
  }
}`,G3=`#define Animate 0.0
#define LineTexture 1.0

attribute vec4 a_Color;
attribute vec3 a_Position;
attribute vec4 a_Instance;
attribute float a_Size;
uniform mat4 u_ModelMatrix;
uniform mat4 u_Mvp;
uniform float segmentNumber;
uniform vec4 u_animate: [ 1., 2., 1.0, 0.2 ];
varying vec4 v_color;

uniform float u_lineDir: 1.0;

uniform float u_thetaOffset: 0.314;
uniform float u_icon_step: 100;
uniform float u_line_texture: 0.0;
attribute vec2 a_iconMapUV;
varying vec2 v_iconMapUV;

uniform float u_opacity: 1.0;
varying mat4 styleMappingMat; // \u7528\u4E8E\u5C06\u5728\u9876\u70B9\u7740\u8272\u5668\u4E2D\u8BA1\u7B97\u597D\u7684\u6837\u5F0F\u503C\u4F20\u9012\u7ED9\u7247\u5143

#pragma include "styleMapping"
#pragma include "styleMappingCalOpacity"
#pragma include "styleMappingCalThetaOffset"

#pragma include "projection"
#pragma include "project"
#pragma include "picking"

float bezier3(vec3 arr, float t) {
  float ut = 1. - t;
  return (arr.x * ut + arr.y * t) * ut + (arr.y * ut + arr.z * t) * t;
}
vec2 midPoint(vec2 source, vec2 target, float arcThetaOffset) {
  vec2 center = target - source;
  float r = length(center);
  float theta = atan(center.y, center.x);
  float thetaOffset = arcThetaOffset;
  float r2 = r / 2.0 / cos(thetaOffset);
  float theta2 = theta + thetaOffset;
  vec2 mid = vec2(r2*cos(theta2) + source.x, r2*sin(theta2) + source.y);
  if(u_lineDir == 1.0) { // \u6B63\u5411
    return mid;
  } else { // \u9006\u5411
    // (mid + vmin)/2 = (s + t)/2
    vec2 vmid = source + target - mid;
    return vmid;
  }
  // return mid;
}
float getSegmentRatio(float index) {
    // dash: index / (segmentNumber - 1.);
    // normal: smoothstep(0.0, 1.0, index / (segmentNumber - 1.));
    return smoothstep(0.0, 1.0, index / (segmentNumber - 1.));
    //  return index / (segmentNumber - 1.);
}
vec2 interpolate (vec2 source, vec2 target, float t, float arcThetaOffset) {
  // if the angularDist is PI, linear interpolation is applied. otherwise, use spherical interpolation
  vec2 mid = midPoint(source, target, arcThetaOffset);
  vec3 x = vec3(source.x, mid.x, target.x);
  vec3 y = vec3(source.y, mid.y, target.y);
  return vec2(bezier3(x ,t), bezier3(y,t));
}
vec2 getExtrusionOffset(vec2 line_clipspace, float offset_direction) {
  // normalized direction of the line
  vec2 dir_screenspace = normalize(line_clipspace);
  // rotate by 90 degrees
   dir_screenspace = vec2(-dir_screenspace.y, dir_screenspace.x);
  vec2 offset = dir_screenspace * offset_direction * setPickingSize(a_Size) / 2.0;
  return offset;
}
vec2 getNormal(vec2 line_clipspace, float offset_direction) {
  // normalized direction of the line
  vec2 dir_screenspace = normalize(line_clipspace);
  // rotate by 90 degrees
   dir_screenspace = vec2(-dir_screenspace.y, dir_screenspace.x);
   return reverse_offset_normal(vec3(dir_screenspace,1.0)).xy * sign(offset_direction);
}

void main() {
  v_color = a_Color;

  // cal style mapping - \u6570\u636E\u7EB9\u7406\u6620\u5C04\u90E8\u5206\u7684\u8BA1\u7B97
  styleMappingMat = mat4(
    0.0, 0.0, 0.0, 0.0, // opacity - strokeOpacity - strokeWidth - empty
    0.0, 0.0, 0.0, 0.0, // strokeR - strokeG - strokeB - strokeA
    0.0, 0.0, 0.0, 0.0, // offsets[0] - offsets[1]
    0.0, 0.0, 0.0, 0.0  // dataset \u6570\u636E\u96C6
  );

  float rowCount = u_cellTypeLayout[0][0];    // \u5F53\u524D\u7684\u6570\u636E\u7EB9\u7406\u6709\u51E0\u884C
  float columnCount = u_cellTypeLayout[0][1]; // \u5F53\u770B\u5230\u6570\u636E\u7EB9\u7406\u6709\u51E0\u5217
  float columnWidth = 1.0/columnCount;  // \u5217\u5BBD
  float rowHeight = 1.0/rowCount;       // \u884C\u9AD8
  float cellCount = calCellCount(); // opacity - strokeOpacity - strokeWidth - stroke - offsets
  float id = a_vertexId; // \u7B2Cn\u4E2A\u9876\u70B9
  float cellCurrentRow = floor(id * cellCount / columnCount) + 1.0; // \u8D77\u59CB\u70B9\u5728\u7B2C\u51E0\u884C
  float cellCurrentColumn = mod(id * cellCount, columnCount) + 1.0; // \u8D77\u59CB\u70B9\u5728\u7B2C\u51E0\u5217
  
  // cell \u56FA\u5B9A\u987A\u5E8F opacity -> strokeOpacity -> strokeWidth -> stroke -> thetaOffset... 
  // \u6309\u987A\u5E8F\u4ECE cell \u4E2D\u53D6\u503C\u3001\u82E5\u6CA1\u6709\u5219\u81EA\u52A8\u5F80\u4E0B\u53D6\u503C
  float textureOffset = 0.0; // \u5728 cell \u4E2D\u53D6\u503C\u7684\u504F\u79FB\u91CF

  vec2 opacityAndOffset = calOpacityAndOffset(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset, columnWidth, rowHeight);
  styleMappingMat[0][0] = opacityAndOffset.r;
  textureOffset = opacityAndOffset.g;

  vec2 thetaOffsetAndOffset = calThetaOffsetAndOffset(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset, columnWidth, rowHeight);
  styleMappingMat[0][1] = thetaOffsetAndOffset.r;
  textureOffset = thetaOffsetAndOffset.g;
  // cal style mapping - \u6570\u636E\u7EB9\u7406\u6620\u5C04\u90E8\u5206\u7684\u8BA1\u7B97

  
  vec2 source = a_Instance.rg;  // \u8D77\u59CB\u70B9
  vec2 target =  a_Instance.ba; // \u7EC8\u70B9
  float segmentIndex = a_Position.x;
  float segmentRatio = getSegmentRatio(segmentIndex);

  float indexDir = mix(-1.0, 1.0, step(segmentIndex, 0.0));
  float nextSegmentRatio = getSegmentRatio(segmentIndex + indexDir);
  float d_distance_ratio;
  
  if(u_animate.x == Animate) {
      d_distance_ratio = segmentIndex / segmentNumber;
      if(u_lineDir != 1.0) {
        d_distance_ratio = 1.0 - d_distance_ratio;
      }
  }

   styleMappingMat[3].b = d_distance_ratio;

  // styleMappingMat[0][1] - arcThetaOffset
  float arcThetaOffset = styleMappingMat[0][1];
  vec4 curr = project_position(vec4(interpolate(source, target, segmentRatio, arcThetaOffset), 0.0, 1.0));
  vec4 next = project_position(vec4(interpolate(source, target, nextSegmentRatio, arcThetaOffset), 0.0, 1.0));
  // v_normal = getNormal((next.xy - curr.xy) * indexDir, a_Position.y);
  //unProjCustomCoord
  
  vec2 offset = project_pixel(getExtrusionOffset((next.xy - curr.xy) * indexDir, a_Position.y));


  float d_segmentIndex = a_Position.x + 1.0; // \u5F53\u524D\u9876\u70B9\u5728\u5F27\u7EBF\u4E2D\u6240\u5904\u7684\u5206\u6BB5\u4F4D\u7F6E
  styleMappingMat[3].r = d_segmentIndex;

  if(LineTexture == u_line_texture) { // \u5F00\u542F\u8D34\u56FE\u6A21\u5F0F

    float arcDistrance = length(source - target); // \u8D77\u59CB\u70B9\u548C\u7EC8\u70B9\u7684\u8DDD\u79BB
    if(u_CoordinateSystem == COORDINATE_SYSTEM_P20) { // amap
      arcDistrance *= 1000000.0;
    }
    if(u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT || u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) { // mapbox
      // arcDistrance *= 8.0;
      arcDistrance = project_pixel_allmap(arcDistrance);
    }
    v_iconMapUV = a_iconMapUV;

    float pixelLen = project_pixel_texture(u_icon_step); // \u8D34\u56FE\u6CBF\u5F27\u7EBF\u65B9\u5411\u7684\u957F\u5EA6 - \u968F\u5730\u56FE\u7F29\u653E\u6539\u53D8
    float texCount = floor(arcDistrance/pixelLen); // \u8D34\u56FE\u5728\u5F27\u7EBF\u4E0A\u91CD\u590D\u7684\u6570\u91CF
     styleMappingMat[3].g = texCount;

    float lineOffsetWidth = length(offset + offset * sign(a_Position.y)); // \u7EBF\u6A2A\u5411\u504F\u79FB\u7684\u8DDD\u79BB
    float linePixelSize = project_pixel(a_Size); // \u5B9A\u70B9\u4F4D\u7F6E\u504F\u79FB
     styleMappingMat[3].a = lineOffsetWidth/linePixelSize; // \u7EBF\u56FE\u5C42\u8D34\u56FE\u90E8\u5206\u7684 v \u5750\u6807\u503C
  }
  

  // gl_Position = project_common_position_to_clipspace(vec4(curr.xy + offset, 0, 1.0));
  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x
    // gl_Position = u_Mvp * (vec4(curr.xy + offset, 0, 1.0));
    gl_Position = u_Mvp * (vec4(curr.xy + offset, 0, 1.0));
  } else {
    gl_Position = project_common_position_to_clipspace(vec4(curr.xy + offset, 0, 1.0));
  }
  setPickingColor(a_PickingColor);
}
`,H3=`#define Animate 0.0
#define LineTexture 1.0

uniform float u_opacity;
uniform float u_textureBlend;
uniform float u_blur : 0.9;
uniform float u_line_type: 0.0;
// varying vec2 v_normal;
varying vec4 v_dash_array;
varying vec4 v_color;

uniform float u_time;
uniform vec4 u_animate: [ 1., 2., 1.0, 0.2 ];

uniform float u_line_texture;
uniform sampler2D u_texture;
uniform vec2 u_textSize;

uniform float segmentNumber;
varying vec2 v_iconMapUV;

varying mat4 styleMappingMat; // \u4F20\u9012\u4ECE\u7247\u5143\u4E2D\u4F20\u9012\u7684\u6620\u5C04\u6570\u636E

uniform float u_linearColor: 0;
uniform vec4 u_sourceColor;
uniform vec4 u_targetColor;

#pragma include "picking"

void main() {
  float opacity = styleMappingMat[0][0];
  float d_segmentIndex = styleMappingMat[3].r;   // \u5F53\u524D\u9876\u70B9\u5728\u5F27\u7EBF\u4E2D\u6240\u5904\u7684\u5206\u6BB5\u4F4D\u7F6E

  // \u8BBE\u7F6E\u5F27\u7EBF\u7684\u5E95\u8272
  gl_FragColor = mix(u_sourceColor, u_targetColor, d_segmentIndex/segmentNumber);
  gl_FragColor.a *= opacity;
  gl_FragColor = filterColor(gl_FragColor);
}`,W3=`
attribute vec4 a_Color;
attribute vec3 a_Position;
attribute vec4 a_Instance;
attribute float a_Size;
uniform mat4 u_ModelMatrix;
uniform mat4 u_Mvp;
uniform float segmentNumber;
varying vec4 v_color;

uniform float u_lineDir: 1.0;

uniform float u_thetaOffset: 0.314;

uniform float u_opacity: 1.0;
varying mat4 styleMappingMat; // \u7528\u4E8E\u5C06\u5728\u9876\u70B9\u7740\u8272\u5668\u4E2D\u8BA1\u7B97\u597D\u7684\u6837\u5F0F\u503C\u4F20\u9012\u7ED9\u7247\u5143

#pragma include "styleMapping"
#pragma include "styleMappingCalOpacity"
#pragma include "styleMappingCalThetaOffset"

#pragma include "projection"
#pragma include "project"
#pragma include "picking"

float bezier3(vec3 arr, float t) {
  float ut = 1. - t;
  return (arr.x * ut + arr.y * t) * ut + (arr.y * ut + arr.z * t) * t;
}
vec2 midPoint(vec2 source, vec2 target, float arcThetaOffset) {
  vec2 center = target - source;
  float r = length(center);
  float theta = atan(center.y, center.x);
  float thetaOffset = arcThetaOffset;
  float r2 = r / 2.0 / cos(thetaOffset);
  float theta2 = theta + thetaOffset;
  vec2 mid = vec2(r2*cos(theta2) + source.x, r2*sin(theta2) + source.y);
  if(u_lineDir == 1.0) { // \u6B63\u5411
    return mid;
  } else { // \u9006\u5411
    // (mid + vmin)/2 = (s + t)/2
    vec2 vmid = source + target - mid;
    return vmid;
  }
  // return mid;
}
float getSegmentRatio(float index) {
    return smoothstep(0.0, 1.0, index / (segmentNumber - 1.));
}
vec2 interpolate (vec2 source, vec2 target, float t, float arcThetaOffset) {
  // if the angularDist is PI, linear interpolation is applied. otherwise, use spherical interpolation
  vec2 mid = midPoint(source, target, arcThetaOffset);
  vec3 x = vec3(source.x, mid.x, target.x);
  vec3 y = vec3(source.y, mid.y, target.y);
  return vec2(bezier3(x ,t), bezier3(y,t));
}
vec2 getExtrusionOffset(vec2 line_clipspace, float offset_direction) {
  // normalized direction of the line
  vec2 dir_screenspace = normalize(line_clipspace);
  // rotate by 90 degrees
   dir_screenspace = vec2(-dir_screenspace.y, dir_screenspace.x);
  vec2 offset = dir_screenspace * offset_direction * setPickingSize(a_Size) / 2.0;
  return offset;
}
vec2 getNormal(vec2 line_clipspace, float offset_direction) {
  // normalized direction of the line
  vec2 dir_screenspace = normalize(line_clipspace);
  // rotate by 90 degrees
   dir_screenspace = vec2(-dir_screenspace.y, dir_screenspace.x);
   return reverse_offset_normal(vec3(dir_screenspace,1.0)).xy * sign(offset_direction);
}

void main() {
  v_color = a_Color;

  // cal style mapping - \u6570\u636E\u7EB9\u7406\u6620\u5C04\u90E8\u5206\u7684\u8BA1\u7B97
  styleMappingMat = mat4(
    0.0, 0.0, 0.0, 0.0, // opacity - strokeOpacity - strokeWidth - empty
    0.0, 0.0, 0.0, 0.0, // strokeR - strokeG - strokeB - strokeA
    0.0, 0.0, 0.0, 0.0, // offsets[0] - offsets[1]
    0.0, 0.0, 0.0, 0.0  // dataset \u6570\u636E\u96C6
  );

  float rowCount = u_cellTypeLayout[0][0];    // \u5F53\u524D\u7684\u6570\u636E\u7EB9\u7406\u6709\u51E0\u884C
  float columnCount = u_cellTypeLayout[0][1]; // \u5F53\u770B\u5230\u6570\u636E\u7EB9\u7406\u6709\u51E0\u5217
  float columnWidth = 1.0/columnCount;  // \u5217\u5BBD
  float rowHeight = 1.0/rowCount;       // \u884C\u9AD8
  float cellCount = calCellCount(); // opacity - strokeOpacity - strokeWidth - stroke - offsets
  float id = a_vertexId; // \u7B2Cn\u4E2A\u9876\u70B9
  float cellCurrentRow = floor(id * cellCount / columnCount) + 1.0; // \u8D77\u59CB\u70B9\u5728\u7B2C\u51E0\u884C
  float cellCurrentColumn = mod(id * cellCount, columnCount) + 1.0; // \u8D77\u59CB\u70B9\u5728\u7B2C\u51E0\u5217
  
  // cell \u56FA\u5B9A\u987A\u5E8F opacity -> strokeOpacity -> strokeWidth -> stroke -> thetaOffset... 
  // \u6309\u987A\u5E8F\u4ECE cell \u4E2D\u53D6\u503C\u3001\u82E5\u6CA1\u6709\u5219\u81EA\u52A8\u5F80\u4E0B\u53D6\u503C
  float textureOffset = 0.0; // \u5728 cell \u4E2D\u53D6\u503C\u7684\u504F\u79FB\u91CF

  vec2 opacityAndOffset = calOpacityAndOffset(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset, columnWidth, rowHeight);
  styleMappingMat[0][0] = opacityAndOffset.r;
  textureOffset = opacityAndOffset.g;

  vec2 thetaOffsetAndOffset = calThetaOffsetAndOffset(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset, columnWidth, rowHeight);
  styleMappingMat[0][1] = thetaOffsetAndOffset.r;
  textureOffset = thetaOffsetAndOffset.g;
  // cal style mapping - \u6570\u636E\u7EB9\u7406\u6620\u5C04\u90E8\u5206\u7684\u8BA1\u7B97

  
  vec2 source = a_Instance.rg;  // \u8D77\u59CB\u70B9
  vec2 target =  a_Instance.ba; // \u7EC8\u70B9
  float segmentIndex = a_Position.x;
  float segmentRatio = getSegmentRatio(segmentIndex);

  float indexDir = mix(-1.0, 1.0, step(segmentIndex, 0.0));
  float nextSegmentRatio = getSegmentRatio(segmentIndex + indexDir);
  float d_distance_ratio;

   styleMappingMat[3].b = d_distance_ratio;

  // styleMappingMat[0][1] - arcThetaOffset
  vec4 curr = project_position(vec4(interpolate(source, target, segmentRatio, styleMappingMat[0][1]), 0.0, 1.0));
  vec4 next = project_position(vec4(interpolate(source, target, nextSegmentRatio, styleMappingMat[0][1]), 0.0, 1.0));
  // v_normal = getNormal((next.xy - curr.xy) * indexDir, a_Position.y);
  //unProjCustomCoord
  
  vec2 offset = project_pixel(getExtrusionOffset((next.xy - curr.xy) * indexDir, a_Position.y));


  float d_segmentIndex = a_Position.x + 1.0; // \u5F53\u524D\u9876\u70B9\u5728\u5F27\u7EBF\u4E2D\u6240\u5904\u7684\u5206\u6BB5\u4F4D\u7F6E
  styleMappingMat[3].r = d_segmentIndex;

  // gl_Position = project_common_position_to_clipspace(vec4(curr.xy + offset, 0, 1.0));
  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x
    // gl_Position = u_Mvp * (vec4(curr.xy + offset, 0, 1.0));
    gl_Position = u_Mvp * (vec4(curr.xy + offset, 0, 1.0));
  } else {
    gl_Position = project_common_position_to_clipspace(vec4(curr.xy + offset, 0, 1.0));
  }
  setPickingColor(a_PickingColor);
}
`,$3={solid:0,dash:1},X3=function(e){(0,ui.Z)(t,e);var i=z3(t);function t(){var n;(0,Ur.Z)(this,t);for(var r=arguments.length,o=new Array(r),u=0;u<r;u++)o[u]=arguments[u];return n=i.call.apply(i,[this].concat(o)),(0,He.Z)((0,er.Z)(n),"updateTexture",function(){var f=n.rendererService.createTexture2D;if(n.texture){n.texture.update({data:n.iconService.getCanvas()}),n.layer.render();return}n.texture=f({data:n.iconService.getCanvas(),mag:$e.NEAREST,min:$e.NEAREST,premultiplyAlpha:!1,width:1024,height:n.iconService.canvasHeight||128})}),n}return(0,Jr.Z)(t,[{key:"getUninforms",value:function(){var r=this.layer.getLayerConfig(),o=r.opacity,u=o===void 0?1:o,f=r.sourceColor,g=r.targetColor,x=r.textureBlend,I=x===void 0?"normal":x,P=r.lineType,G=P===void 0?"solid":P,$=r.dashArray,Ee=$===void 0?[10,5]:$,Se=r.forward,Re=Se===void 0?!0:Se,Ye=r.lineTexture,St=Ye===void 0?!1:Ye,vt=r.iconStep,Ut=vt===void 0?100:vt,Kt=r.segmentNumber,Tr=Kt===void 0?30:Kt,on=r.thetaOffset,dn=on===void 0?.314:on;if(this.dataTextureTest&&this.dataTextureNeedUpdate({opacity:u,thetaOffset:dn})){this.judgeStyleAttributes({opacity:u,thetaOffset:dn});var vn=this.layer.getEncodedData(),si=this.calDataFrame(this.cellLength,vn,this.cellProperties),ai=si.data,Hi=si.width,wa=si.height;this.rowCount=wa,this.dataTexture=this.cellLength>0&&ai.length>0?this.createTexture2D({flipY:!0,data:ai,format:$e.LUMINANCE,type:$e.FLOAT,width:Hi,height:wa}):this.createTexture2D({flipY:!0,data:[1],format:$e.LUMINANCE,type:$e.FLOAT,width:1,height:1})}Ee.length===2&&Ee.push(0,0);var qa=0,zs=[0,0,0,0],Ou=[0,0,0,0];return f&&g&&(zs=co(f),Ou=co(g),qa=1),this.rendererService.getDirty()&&this.texture.bind(),{u_dataTexture:this.dataTexture,u_cellTypeLayout:this.getCellTypeLayout(),u_thetaOffset:(0,Wr.isNumber)(dn)?dn:0,u_opacity:(0,Wr.isNumber)(u)?u:1,u_textureBlend:I==="normal"?0:1,segmentNumber:Tr,u_line_type:$3[G||"solid"],u_dash_array:Ee,u_blur:.9,u_lineDir:Re?1:-1,u_texture:this.texture,u_line_texture:St?1:0,u_icon_step:Ut,u_textSize:[1024,this.iconService.canvasHeight||128],u_linearColor:qa,u_sourceColor:zs,u_targetColor:Ou}}},{key:"getAnimateUniforms",value:function(){var r=this.layer.getLayerConfig(),o=r.animateOption;return{u_animate:this.animateOption2Array(o),u_time:this.layer.getLayerAnimateTime()}}},{key:"initModels",value:function(){var n=(0,An.Z)(Nt().mark(function o(){return Nt().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return this.updateTexture(),this.iconService.on("imageUpdate",this.updateTexture),f.next=4,this.buildModels();case 4:return f.abrupt("return",f.sent);case 5:case"end":return f.stop()}},o,this)}));function r(){return n.apply(this,arguments)}return r}()},{key:"clearModels",value:function(){var r,o;(r=this.texture)===null||r===void 0||r.destroy(),(o=this.dataTexture)===null||o===void 0||o.destroy(),this.iconService.off("imageUpdate",this.updateTexture)}},{key:"getShaders",value:function(){var r=this.layer.getLayerConfig(),o=r.sourceColor,u=r.targetColor,f=r.lineType;return f==="dash"?{frag:Z3,vert:j3,type:"Dash"}:o&&u?{frag:H3,vert:W3,type:"Linear"}:{frag:V3,vert:G3,type:""}}},{key:"buildModels",value:function(){var n=(0,An.Z)(Nt().mark(function o(){var u,f,g,x,I,P,G,$,Ee,Se,Re,Ye;return Nt().wrap(function(vt){for(;;)switch(vt.prev=vt.next){case 0:return u=this.layer.getLayerConfig(),f=u.segmentNumber,g=f===void 0?30:f,x=u.mask,I=x===void 0?!1:x,P=u.maskInside,G=P===void 0?!0:P,$=this.getShaders(),Ee=$.frag,Se=$.vert,Re=$.type,vt.next=4,this.layer.buildLayerModel({moduleName:"lineArc2d"+Re,vertexShader:Se,fragmentShader:Ee,triangulation:Cm,depth:{enable:!1},blend:this.getBlend(),segmentNumber:g,stencil:zo(I,G)});case 4:return Ye=vt.sent,vt.abrupt("return",[Ye]);case 6:case"end":return vt.stop()}},o,this)}));function r(){return n.apply(this,arguments)}return r}()},{key:"registerBuiltinAttributes",value:function(){var r=this;this.styleAttributeService.registerStyleAttribute({name:"size",type:ja.Attribute,descriptor:{name:"a_Size",buffer:{usage:$e.DYNAMIC_DRAW,data:[],type:$e.FLOAT},size:1,update:function(u){var f=u.size,g=f===void 0?1:f;return Array.isArray(g)?[g[0]]:[g]}}}),this.styleAttributeService.registerStyleAttribute({name:"instance",type:ja.Attribute,descriptor:{name:"a_Instance",buffer:{usage:$e.STATIC_DRAW,data:[],type:$e.FLOAT},size:4,update:function(u,f,g){return[g[3],g[4],g[5],g[6]]}}}),this.styleAttributeService.registerStyleAttribute({name:"uv",type:ja.Attribute,descriptor:{name:"a_iconMapUV",buffer:{usage:$e.DYNAMIC_DRAW,data:[],type:$e.FLOAT},size:2,update:function(u){var f=r.iconService.getIconMap(),g=u.texture,x=f[g]||{x:0,y:0},I=x.x,P=x.y;return[I,P]}}})}}]),t}(Sl);function Y3(e){var i=K3();return function(){var n=(0,rr.Z)(e),r;if(i){var o=(0,rr.Z)(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return(0,jn.Z)(this,r)}}function K3(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var Q3=`#define LineTypeSolid 0.0
#define LineTypeDash 1.0
#define Animate 0.0
#define LineTexture 1.0

uniform float u_opacity;
uniform float u_textureBlend;
uniform float u_blur : 0.9;
uniform float u_line_type: 0.0;
// varying vec2 v_normal;
varying vec4 v_dash_array;
varying vec4 v_color;

uniform float u_line_texture: 0.0;
uniform sampler2D u_texture;
uniform vec2 u_textSize;
varying float v_segmentIndex;
uniform float segmentNumber;

varying vec2 v_iconMapUV;

uniform float u_time;
uniform vec4 u_animate: [ 1., 2., 1.0, 0.2 ];

varying mat4 styleMappingMat;

#pragma include "picking"

void main() {
  float opacity = styleMappingMat[0][0];
  float animateSpeed = 0.0; // \u8FD0\u52A8\u901F\u5EA6
  float d_distance_ratio = styleMappingMat[3].g; // \u5F53\u524D\u70B9\u4F4D\u8DDD\u79BB\u5360\u7EBF\u603B\u957F\u7684\u6BD4\u4F8B
  gl_FragColor = v_color;

  gl_FragColor.a *= opacity;
  if(u_line_type == LineTypeDash) {
    float flag = 0.;
    float dashLength = mod(d_distance_ratio, v_dash_array.x + v_dash_array.y + v_dash_array.z + v_dash_array.w);
    if(dashLength < v_dash_array.x || (dashLength > (v_dash_array.x + v_dash_array.y) && dashLength <  v_dash_array.x + v_dash_array.y + v_dash_array.z)) {
      flag = 1.;
    }
    gl_FragColor.a *=flag;
  }

  if(u_animate.x == Animate && u_line_texture != LineTexture) {
      animateSpeed = u_time / u_animate.y;
      float alpha =1.0 - fract( mod(1.0- d_distance_ratio, u_animate.z)* (1.0/ u_animate.z) + u_time / u_animate.y);

      alpha = (alpha + u_animate.w -1.0) / u_animate.w;
      // alpha = smoothstep(0., 1., alpha);
      alpha = clamp(alpha, 0.0, 1.0);
      gl_FragColor.a *= alpha;

      // u_animate 
      // x enable
      // y duration
      // z interval
      // w trailLength
  }

  if(u_line_texture == LineTexture && u_line_type != LineTypeDash) { // while load texture
    // float arcRadio = smoothstep( 0.0, 1.0, (v_segmentIndex / segmentNumber));
    float arcRadio = v_segmentIndex / (segmentNumber - 1.0);
    float count = styleMappingMat[3].b; // // \u8D34\u56FE\u5728\u5F27\u7EBF\u4E0A\u91CD\u590D\u7684\u6570\u91CF

    float time = 0.0;
    if(u_animate.x == Animate) {
      time = u_time / u_animate.y;
    }
    float redioCount = arcRadio * count;

    float u = fract(redioCount - time);

    float v = styleMappingMat[3].a;  // \u7EBF\u56FE\u5C42\u8D34\u56FE\u90E8\u5206\u7684 v \u5750\u6807\u503C
    vec2 uv= v_iconMapUV / u_textSize + vec2(u, v) / u_textSize * 64.;
    vec4 pattern = texture2D(u_texture, uv);

    if(u_animate.x == Animate) {
      float currentPlane = floor(redioCount - time);
      float textureStep = floor(count * u_animate.z);
      float a = mod(currentPlane, textureStep);
      if(a < textureStep - 1.0) {
        pattern = vec4(0.0);
      }
    }

    if(u_textureBlend == 0.0) { // normal
      pattern.a = 0.0;
      gl_FragColor = filterColor(gl_FragColor + pattern);
    } else { // replace
        pattern.a *= opacity;
        if(gl_FragColor.a <= 0.0) {
          pattern.a = 0.0;
          discard;
        } else {
          gl_FragColor = filterColor(pattern);
        }
    }

  } else {
    gl_FragColor = filterColor(gl_FragColor);
  }
}
`,J3=`#define LineTypeSolid 0.0
#define LineTypeDash 1.0
#define Animate 0.0
#define LineTexture 1.0
attribute vec3 a_Position;
attribute vec4 a_Instance;
attribute vec4 a_Color;
attribute float a_Size;

uniform float u_globel;
uniform float u_globel_radius;
uniform float u_global_height: 10;
uniform mat4 u_ModelMatrix;
uniform mat4 u_Mvp;
uniform float segmentNumber;
uniform vec4 u_animate: [ 1., 2., 1.0, 0.2 ];
varying vec4 v_color;

uniform float u_line_type: 0.0;
uniform vec4 u_dash_array: [10.0, 5., 0, 0];
varying vec4 v_dash_array;

uniform float u_icon_step: 100;
uniform float u_line_texture: 0.0;
varying float v_segmentIndex;

attribute vec2 a_iconMapUV;
varying vec2 v_iconMapUV;

uniform float u_opacity: 1.0;
varying mat4 styleMappingMat; // \u7528\u4E8E\u5C06\u5728\u9876\u70B9\u7740\u8272\u5668\u4E2D\u8BA1\u7B97\u597D\u7684\u6837\u5F0F\u503C\u4F20\u9012\u7ED9\u7247\u5143

#pragma include "styleMapping"
#pragma include "styleMappingCalOpacity"

#pragma include "projection"
#pragma include "project"
#pragma include "picking"

float maps (float value, float start1, float stop1, float start2, float stop2) {
  return start2 + (stop2 - start2) * ((value - start1) / (stop1 - start1));
}

float getSegmentRatio(float index) {
  return smoothstep(0.0, 1.0, index / (segmentNumber - 1.0));
}

float paraboloid(vec2 source, vec2 target, float ratio) {
  vec2 x = mix(source, target, ratio);
  vec2 center = mix(source, target, 0.5);
  float dSourceCenter = distance(source, center);
  float dXCenter = distance(x, center);
  return (dSourceCenter + dXCenter) * (dSourceCenter - dXCenter);
}

vec3 getPos(vec2 source, vec2 target, float segmentRatio) {
  float vertex_height = paraboloid(source, target, segmentRatio);

  return vec3(
    mix(source, target, segmentRatio),
    sqrt(max(0.0, vertex_height))
  );
}
vec2 getExtrusionOffset(vec2 line_clipspace, float offset_direction) {
  // normalized direction of the line
  vec2 dir_screenspace = normalize(line_clipspace);
  // rotate by 90 degrees
  dir_screenspace = vec2(-dir_screenspace.y, dir_screenspace.x);

  vec2 offset = dir_screenspace * offset_direction * setPickingSize(a_Size) / 2.0;

  return offset;
}
vec2 getNormal(vec2 line_clipspace, float offset_direction) {
  // normalized direction of the line
  vec2 dir_screenspace = normalize(line_clipspace);
  // rotate by 90 degrees
  dir_screenspace = vec2(-dir_screenspace.y, dir_screenspace.x);
  return reverse_offset_normal(vec3(dir_screenspace,1.0)).xy * sign(offset_direction);
}

float torad(float deg) {
  return (deg / 180.0) * acos(-1.0);
}

vec3 lglt2xyz(vec2 lnglat) {
  float pi = 3.1415926;
  // + Math.PI/2 \u662F\u4E3A\u4E86\u5BF9\u9F50\u5750\u6807
  float lng = torad(lnglat.x) + pi / 2.0;
  float lat = torad(lnglat.y);

  // \u624B\u52A8\u589E\u52A0\u4E00\u4E9B\u504F\u79FB\uFF0C\u51CF\u8F7B\u9762\u7684\u51B2\u7A81
  float radius = u_globel_radius;

  float z = radius * cos(lat) * cos(lng);
  float x = radius * cos(lat) * sin(lng);
  float y = radius * sin(lat);
  return vec3(x, y, z);
}

void main() {
  // cal style mapping - \u6570\u636E\u7EB9\u7406\u6620\u5C04\u90E8\u5206\u7684\u8BA1\u7B97
  styleMappingMat = mat4(
    0.0, 0.0, 0.0, 0.0, // opacity - strokeOpacity - strokeWidth - empty
    0.0, 0.0, 0.0, 0.0, // strokeR - strokeG - strokeB - strokeA
    0.0, 0.0, 0.0, 0.0, // offsets[0] - offsets[1]
    0.0, 0.0, 0.0, 0.0  // dataset \u6570\u636E\u96C6
  );

  float rowCount = u_cellTypeLayout[0][0];    // \u5F53\u524D\u7684\u6570\u636E\u7EB9\u7406\u6709\u51E0\u884C
  float columnCount = u_cellTypeLayout[0][1]; // \u5F53\u770B\u5230\u6570\u636E\u7EB9\u7406\u6709\u51E0\u5217
  float columnWidth = 1.0/columnCount;  // \u5217\u5BBD
  float rowHeight = 1.0/rowCount;       // \u884C\u9AD8
  float cellCount = calCellCount(); // opacity - strokeOpacity - strokeWidth - stroke - offsets
  float id = a_vertexId; // \u7B2Cn\u4E2A\u9876\u70B9
  float cellCurrentRow = floor(id * cellCount / columnCount) + 1.0; // \u8D77\u59CB\u70B9\u5728\u7B2C\u51E0\u884C
  float cellCurrentColumn = mod(id * cellCount, columnCount) + 1.0; // \u8D77\u59CB\u70B9\u5728\u7B2C\u51E0\u5217
  
  // cell \u56FA\u5B9A\u987A\u5E8F opacity -> strokeOpacity -> strokeWidth -> stroke ... 
  // \u6309\u987A\u5E8F\u4ECE cell \u4E2D\u53D6\u503C\u3001\u82E5\u6CA1\u6709\u5219\u81EA\u52A8\u5F80\u4E0B\u53D6\u503C
  float textureOffset = 0.0; // \u5728 cell \u4E2D\u53D6\u503C\u7684\u504F\u79FB\u91CF

  vec2 opacityAndOffset = calOpacityAndOffset(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset, columnWidth, rowHeight);
  styleMappingMat[0][0] = opacityAndOffset.r;
  textureOffset = opacityAndOffset.g;
  // cal style mapping - \u6570\u636E\u7EB9\u7406\u6620\u5C04\u90E8\u5206\u7684\u8BA1\u7B97

  v_color = a_Color;
  vec2 source = project_position(vec4(a_Instance.rg, 0, 0)).xy;
  vec2 target = project_position(vec4(a_Instance.ba, 0, 0)).xy;
  float segmentIndex = a_Position.x;
  float segmentRatio = getSegmentRatio(segmentIndex);
  float indexDir = mix(-1.0, 1.0, step(segmentIndex, 0.0));

  float d_distance_ratio;
   if(u_line_type == LineTypeDash) {
    d_distance_ratio = segmentIndex / segmentNumber;
    vec2 s = source;
    vec2 t = target;
    
    if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x
      s = unProjCustomCoord(source);
      t = unProjCustomCoord(target);
    }
    float total_Distance = pixelDistance(s, t) / 2.0 * PI;
    v_dash_array = pow(2.0, 20.0 - u_Zoom) * u_dash_array / (total_Distance / segmentNumber * segmentIndex);
  }
    if(u_animate.x == Animate) {
      d_distance_ratio = segmentIndex / segmentNumber;
  }
  styleMappingMat[3].g = d_distance_ratio; // \u5F53\u524D\u70B9\u4F4D\u8DDD\u79BB\u5360\u7EBF\u603B\u957F\u7684\u6BD4\u4F8B

  float nextSegmentRatio = getSegmentRatio(segmentIndex + indexDir);
  vec3 curr = getPos(source, target, segmentRatio);
  vec3 next = getPos(source, target, nextSegmentRatio);
  vec2 offset = getExtrusionOffset((next.xy - curr.xy) * indexDir, a_Position.y);
  // v_normal = getNormal((next.xy - curr.xy) * indexDir, a_Position.y);


  v_segmentIndex = a_Position.x;
  if(LineTexture == u_line_texture && u_line_type != LineTypeDash) { // \u5F00\u542F\u8D34\u56FE\u6A21\u5F0F  

    float arcDistrance = length(source - target);
    float pixelLen =  project_pixel_texture(u_icon_step);
    styleMappingMat[3].b = floor(arcDistrance/pixelLen); // \u8D34\u56FE\u5728\u5F27\u7EBF\u4E0A\u91CD\u590D\u7684\u6570\u91CF

    vec2 projectOffset = project_pixel(offset);
    float lineOffsetWidth = length(projectOffset + projectOffset * sign(a_Position.y)); // \u7EBF\u6A2A\u5411\u504F\u79FB\u7684\u8DDD\u79BB
    float linePixelSize = project_pixel(a_Size);  // \u5B9A\u70B9\u4F4D\u7F6E\u504F\u79FB\uFF0C\u6309\u5730\u56FE\u7B49\u7EA7\u7F29\u653E\u540E\u7684\u8DDD\u79BB
    styleMappingMat[3].a = lineOffsetWidth/linePixelSize;  // \u7EBF\u56FE\u5C42\u8D34\u56FE\u90E8\u5206\u7684 v \u5750\u6807\u503C

    v_iconMapUV = a_iconMapUV;
  }
  

  // gl_Position = project_common_position_to_clipspace(vec4(curr.xy + project_pixel(offset), curr.z, 1.0));
  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x
    gl_Position = u_Mvp * (vec4(curr.xy + project_pixel(offset), curr.z, 1.0));
  } else {
    gl_Position = project_common_position_to_clipspace(vec4(curr.xy + project_pixel(offset), curr.z, 1.0));
  }

  // \u5730\u7403\u6A21\u5F0F
  if(u_globel > 0.0) {
    vec3 startLngLat = lglt2xyz(a_Instance.rg);
    vec3 endLngLat = lglt2xyz(a_Instance.ba);
    float globalRadius = length(startLngLat);

    vec3 lineDir = normalize(endLngLat - startLngLat);
    vec3 midPointDir = normalize((startLngLat + endLngLat)/2.0);

    // \u7EBF\u7684\u504F\u79FB
    vec3 lnglatOffset = cross(lineDir, midPointDir) * a_Position.y;
    // \u8BA1\u7B97\u8D77\u59CB\u70B9\u548C\u7EC8\u6B62\u70B9\u7684\u8DDD\u79BB
    float lnglatLength = length(a_Instance.rg - a_Instance.ba)/50.0;
    // \u8BA1\u7B97\u98DE\u7EBF\u5404\u4E2A\u8282\u70B9\u76F8\u5E94\u7684\u9AD8\u5EA6
    float lineHeight = u_global_height * (-4.0*segmentRatio*segmentRatio + 4.0 * segmentRatio) * lnglatLength;
    // \u5730\u7403\u70B9\u4F4D
    vec3 globalPoint = normalize(mix(startLngLat, endLngLat, segmentRatio)) * (globalRadius + lineHeight) + lnglatOffset * a_Size;
    
    gl_Position = u_ViewProjectionMatrix * vec4(globalPoint, 1.0);
  }
 

  setPickingColor(a_PickingColor);
}
`,q3=`
#define Animate 0.0

uniform float u_opacity;
uniform float u_blur : 0.9;
varying float v_segmentIndex;
uniform float segmentNumber;

uniform float u_time;
uniform vec4 u_animate: [ 1., 2., 1.0, 0.2 ];

uniform float u_linearColor: 0;
uniform vec4 u_sourceColor;
uniform vec4 u_targetColor;

varying mat4 styleMappingMat;

#pragma include "picking"

void main() {
  float opacity = styleMappingMat[0][0];
  float animateSpeed = 0.0; // \u8FD0\u52A8\u901F\u5EA6
  float d_distance_ratio = styleMappingMat[3].g; // \u5F53\u524D\u70B9\u4F4D\u8DDD\u79BB\u5360\u7EBF\u603B\u957F\u7684\u6BD4\u4F8B

  gl_FragColor = mix(u_sourceColor, u_targetColor, v_segmentIndex/segmentNumber);

  gl_FragColor.a *= opacity;

  if(u_animate.x == Animate) {
      animateSpeed = u_time / u_animate.y;
      float alpha =1.0 - fract( mod(1.0- d_distance_ratio, u_animate.z)* (1.0/ u_animate.z) + u_time / u_animate.y);

      alpha = (alpha + u_animate.w -1.0) / u_animate.w;
      // alpha = smoothstep(0., 1., alpha);
      alpha = clamp(alpha, 0.0, 1.0);
      gl_FragColor.a *= alpha;

      // u_animate 
      // x enable
      // y duration
      // z interval
      // w trailLength
  }

  gl_FragColor = filterColor(gl_FragColor);
}
`,eM=`#define LineTypeSolid 0.0
#define LineTypeDash 1.0
#define Animate 0.0
#define LineTexture 1.0
attribute vec3 a_Position;
attribute vec4 a_Instance;
attribute vec4 a_Color;
attribute float a_Size;
attribute vec2 a_iconMapUV;

uniform float u_globel;
uniform float u_globel_radius;
uniform float u_global_height: 10;
uniform mat4 u_ModelMatrix;
uniform mat4 u_Mvp;
uniform float segmentNumber;
uniform vec4 u_animate: [ 1., 2., 1.0, 0.2 ];

uniform float u_line_type: 0.0;
uniform vec4 u_dash_array: [10.0, 5., 0, 0];
uniform float u_icon_step: 100;
uniform float u_line_texture: 0.0;
uniform float u_opacity: 1.0;

varying vec4 v_dash_array;
varying vec4 v_color;
varying float v_segmentIndex;
varying vec2 v_iconMapUV;
varying mat4 styleMappingMat; // \u7528\u4E8E\u5C06\u5728\u9876\u70B9\u7740\u8272\u5668\u4E2D\u8BA1\u7B97\u597D\u7684\u6837\u5F0F\u503C\u4F20\u9012\u7ED9\u7247\u5143


#pragma include "styleMapping"
#pragma include "styleMappingCalOpacity"

#pragma include "projection"
#pragma include "project"
#pragma include "picking"

float maps (float value, float start1, float stop1, float start2, float stop2) {
  return start2 + (stop2 - start2) * ((value - start1) / (stop1 - start1));
}

float getSegmentRatio(float index) {
  return smoothstep(0.0, 1.0, index / (segmentNumber - 1.0));
}

float paraboloid(vec2 source, vec2 target, float ratio) {
  vec2 x = mix(source, target, ratio);
  vec2 center = mix(source, target, 0.5);
  float dSourceCenter = distance(source, center);
  float dXCenter = distance(x, center);
  return (dSourceCenter + dXCenter) * (dSourceCenter - dXCenter);
}

vec3 getPos(vec2 source, vec2 target, float segmentRatio) {
  float vertex_height = paraboloid(source, target, segmentRatio);

  return vec3(
    mix(source, target, segmentRatio),
    sqrt(max(0.0, vertex_height))
  );
}
vec2 getExtrusionOffset(vec2 line_clipspace, float offset_direction) {
  // normalized direction of the line
  vec2 dir_screenspace = normalize(line_clipspace);
  // rotate by 90 degrees
  dir_screenspace = vec2(-dir_screenspace.y, dir_screenspace.x);

  vec2 offset = dir_screenspace * offset_direction * setPickingSize(a_Size) / 2.0;

  return offset;
}
vec2 getNormal(vec2 line_clipspace, float offset_direction) {
  // normalized direction of the line
  vec2 dir_screenspace = normalize(line_clipspace);
  // rotate by 90 degrees
  dir_screenspace = vec2(-dir_screenspace.y, dir_screenspace.x);
  return reverse_offset_normal(vec3(dir_screenspace,1.0)).xy * sign(offset_direction);
}

float torad(float deg) {
  return (deg / 180.0) * acos(-1.0);
}

vec3 lglt2xyz(vec2 lnglat) {
  float pi = 3.1415926;
  // + Math.PI/2 \u662F\u4E3A\u4E86\u5BF9\u9F50\u5750\u6807
  float lng = torad(lnglat.x) + pi / 2.0;
  float lat = torad(lnglat.y);

  // \u624B\u52A8\u589E\u52A0\u4E00\u4E9B\u504F\u79FB\uFF0C\u51CF\u8F7B\u9762\u7684\u51B2\u7A81
  float radius = u_globel_radius;

  float z = radius * cos(lat) * cos(lng);
  float x = radius * cos(lat) * sin(lng);
  float y = radius * sin(lat);
  return vec3(x, y, z);
}

void main() {
  // cal style mapping - \u6570\u636E\u7EB9\u7406\u6620\u5C04\u90E8\u5206\u7684\u8BA1\u7B97
  styleMappingMat = mat4(
    0.0, 0.0, 0.0, 0.0, // opacity - strokeOpacity - strokeWidth - empty
    0.0, 0.0, 0.0, 0.0, // strokeR - strokeG - strokeB - strokeA
    0.0, 0.0, 0.0, 0.0, // offsets[0] - offsets[1]
    0.0, 0.0, 0.0, 0.0  // dataset \u6570\u636E\u96C6
  );

  float rowCount = u_cellTypeLayout[0][0];    // \u5F53\u524D\u7684\u6570\u636E\u7EB9\u7406\u6709\u51E0\u884C
  float columnCount = u_cellTypeLayout[0][1]; // \u5F53\u770B\u5230\u6570\u636E\u7EB9\u7406\u6709\u51E0\u5217
  float columnWidth = 1.0/columnCount;  // \u5217\u5BBD
  float rowHeight = 1.0/rowCount;       // \u884C\u9AD8
  float cellCount = calCellCount(); // opacity - strokeOpacity - strokeWidth - stroke - offsets
  float id = a_vertexId; // \u7B2Cn\u4E2A\u9876\u70B9
  float cellCurrentRow = floor(id * cellCount / columnCount) + 1.0; // \u8D77\u59CB\u70B9\u5728\u7B2C\u51E0\u884C
  float cellCurrentColumn = mod(id * cellCount, columnCount) + 1.0; // \u8D77\u59CB\u70B9\u5728\u7B2C\u51E0\u5217
  
  // cell \u56FA\u5B9A\u987A\u5E8F opacity -> strokeOpacity -> strokeWidth -> stroke ... 
  // \u6309\u987A\u5E8F\u4ECE cell \u4E2D\u53D6\u503C\u3001\u82E5\u6CA1\u6709\u5219\u81EA\u52A8\u5F80\u4E0B\u53D6\u503C
  float textureOffset = 0.0; // \u5728 cell \u4E2D\u53D6\u503C\u7684\u504F\u79FB\u91CF

  vec2 opacityAndOffset = calOpacityAndOffset(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset, columnWidth, rowHeight);
  styleMappingMat[0][0] = opacityAndOffset.r;
  textureOffset = opacityAndOffset.g;
  // cal style mapping - \u6570\u636E\u7EB9\u7406\u6620\u5C04\u90E8\u5206\u7684\u8BA1\u7B97

  v_color = a_Color;
  vec2 source = project_position(vec4(a_Instance.rg, 0, 0)).xy;
  vec2 target = project_position(vec4(a_Instance.ba, 0, 0)).xy;
  float segmentIndex = a_Position.x;
  float segmentRatio = getSegmentRatio(segmentIndex);
  float indexDir = mix(-1.0, 1.0, step(segmentIndex, 0.0));

  float d_distance_ratio;
   if(u_line_type == LineTypeDash) {
    d_distance_ratio = segmentIndex / segmentNumber;
    // float total_Distance = pixelDistance(a_Instance.rg, a_Instance.ba) / 2.0 * PI;
    vec2 s = source;
    vec2 t = target;
    
    if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x
      s = unProjCustomCoord(source);
      t = unProjCustomCoord(target);
    }
    float total_Distance = pixelDistance(s, t) / 2.0 * PI;
    v_dash_array = pow(2.0, 20.0 - u_Zoom) * u_dash_array / (total_Distance / segmentNumber * segmentIndex);
  }
    if(u_animate.x == Animate) {
      d_distance_ratio = segmentIndex / segmentNumber;
  }
  styleMappingMat[3].g = d_distance_ratio; // \u5F53\u524D\u70B9\u4F4D\u8DDD\u79BB\u5360\u7EBF\u603B\u957F\u7684\u6BD4\u4F8B

  float nextSegmentRatio = getSegmentRatio(segmentIndex + indexDir);
  vec3 curr = getPos(source, target, segmentRatio);
  vec3 next = getPos(source, target, nextSegmentRatio);
  vec2 offset = getExtrusionOffset((next.xy - curr.xy) * indexDir, a_Position.y);
  // v_normal = getNormal((next.xy - curr.xy) * indexDir, a_Position.y);


  v_segmentIndex = a_Position.x;
  if(LineTexture == u_line_texture && u_line_type != LineTypeDash) { // \u5F00\u542F\u8D34\u56FE\u6A21\u5F0F  

    float arcDistrance = length(source - target);
    float pixelLen =  project_pixel_texture(u_icon_step);
    styleMappingMat[3].b = floor(arcDistrance/pixelLen); // \u8D34\u56FE\u5728\u5F27\u7EBF\u4E0A\u91CD\u590D\u7684\u6570\u91CF

    vec2 projectOffset = project_pixel(offset);
    float lineOffsetWidth = length(projectOffset + projectOffset * sign(a_Position.y)); // \u7EBF\u6A2A\u5411\u504F\u79FB\u7684\u8DDD\u79BB
    float linePixelSize = project_pixel(a_Size);  // \u5B9A\u70B9\u4F4D\u7F6E\u504F\u79FB\uFF0C\u6309\u5730\u56FE\u7B49\u7EA7\u7F29\u653E\u540E\u7684\u8DDD\u79BB
    styleMappingMat[3].a = lineOffsetWidth/linePixelSize;  // \u7EBF\u56FE\u5C42\u8D34\u56FE\u90E8\u5206\u7684 v \u5750\u6807\u503C

    v_iconMapUV = a_iconMapUV;
  }
  

  // gl_Position = project_common_position_to_clipspace(vec4(curr.xy + project_pixel(offset), curr.z, 1.0));
  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x
    gl_Position = u_Mvp * (vec4(curr.xy + project_pixel(offset), curr.z, 1.0));
  } else {
    gl_Position = project_common_position_to_clipspace(vec4(curr.xy + project_pixel(offset), curr.z, 1.0));
  }

  // \u5730\u7403\u6A21\u5F0F
  if(u_globel > 0.0) {
    vec3 startLngLat = lglt2xyz(a_Instance.rg);
    vec3 endLngLat = lglt2xyz(a_Instance.ba);
    float globalRadius = length(startLngLat);

    vec3 lineDir = normalize(endLngLat - startLngLat);
    vec3 midPointDir = normalize((startLngLat + endLngLat)/2.0);

    // \u7EBF\u7684\u504F\u79FB
    vec3 lnglatOffset = cross(lineDir, midPointDir) * a_Position.y;
    // \u8BA1\u7B97\u8D77\u59CB\u70B9\u548C\u7EC8\u6B62\u70B9\u7684\u8DDD\u79BB
    float lnglatLength = length(a_Instance.rg - a_Instance.ba)/50.0;
    // \u8BA1\u7B97\u98DE\u7EBF\u5404\u4E2A\u8282\u70B9\u76F8\u5E94\u7684\u9AD8\u5EA6
    float lineHeight = u_global_height * (-4.0*segmentRatio*segmentRatio + 4.0 * segmentRatio) * lnglatLength;
    // \u5730\u7403\u70B9\u4F4D
    vec3 globalPoint = normalize(mix(startLngLat, endLngLat, segmentRatio)) * (globalRadius + lineHeight) + lnglatOffset * a_Size;
    
    gl_Position = u_ViewProjectionMatrix * vec4(globalPoint, 1.0);
  }
 

  setPickingColor(a_PickingColor);
}
`,tM={solid:0,dash:1},rM=function(e){(0,ui.Z)(t,e);var i=Y3(t);function t(){var n;(0,Ur.Z)(this,t);for(var r=arguments.length,o=new Array(r),u=0;u<r;u++)o[u]=arguments[u];return n=i.call.apply(i,[this].concat(o)),(0,He.Z)((0,er.Z)(n),"updateTexture",function(){var f=n.rendererService.createTexture2D;if(n.texture){n.texture.update({data:n.iconService.getCanvas()}),n.layer.render();return}n.texture=f({data:n.iconService.getCanvas(),mag:$e.NEAREST,min:$e.NEAREST,premultiplyAlpha:!1,width:1024,height:n.iconService.canvasHeight||128})}),n}return(0,Jr.Z)(t,[{key:"getUninforms",value:function(){var r=this.layer.getLayerConfig(),o=r.opacity,u=o===void 0?1:o,f=r.sourceColor,g=r.targetColor,x=r.textureBlend,I=x===void 0?"normal":x,P=r.lineType,G=P===void 0?"solid":P,$=r.dashArray,Ee=$===void 0?[10,5]:$,Se=r.lineTexture,Re=Se===void 0?!1:Se,Ye=r.iconStep,St=Ye===void 0?100:Ye,vt=r.segmentNumber,Ut=vt===void 0?30:vt,Kt=r.globalArcHeight,Tr=Kt===void 0?10:Kt;Ee.length===2&&Ee.push(0,0);var on=0,dn=[0,0,0,0],vn=[0,0,0,0];if(f&&g&&(dn=co(f),vn=co(g),on=1),this.rendererService.getDirty()&&this.texture.bind(),this.dataTextureTest&&this.dataTextureNeedUpdate({opacity:u})){this.judgeStyleAttributes({opacity:u});var si=this.layer.getEncodedData(),ai=this.calDataFrame(this.cellLength,si,this.cellProperties),Hi=ai.data,wa=ai.width,qa=ai.height;this.rowCount=qa,this.dataTexture=this.cellLength>0&&Hi.length>0?this.createTexture2D({flipY:!0,data:Hi,format:$e.LUMINANCE,type:$e.FLOAT,width:wa,height:qa}):this.createTexture2D({flipY:!0,data:[1],format:$e.LUMINANCE,type:$e.FLOAT,width:1,height:1})}return{u_globel:this.mapService.version==="GLOBEL"?1:0,u_globel_radius:Vg,u_global_height:Tr,u_dataTexture:this.dataTexture,u_cellTypeLayout:this.getCellTypeLayout(),u_opacity:(0,Wr.isNumber)(u)?u:1,u_textureBlend:I==="normal"?0:1,segmentNumber:Ut,u_line_type:tM[G]||0,u_dash_array:Ee,u_texture:this.texture,u_line_texture:Re?1:0,u_icon_step:St,u_textSize:[1024,this.iconService.canvasHeight||128],u_linearColor:on,u_sourceColor:dn,u_targetColor:vn}}},{key:"getAnimateUniforms",value:function(){var r=this.layer.getLayerConfig(),o=r.animateOption;return{u_animate:this.animateOption2Array(o),u_time:this.layer.getLayerAnimateTime()}}},{key:"initModels",value:function(){var n=(0,An.Z)(Nt().mark(function o(){return Nt().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return this.updateTexture(),this.iconService.on("imageUpdate",this.updateTexture),f.next=4,this.buildModels();case 4:return f.abrupt("return",f.sent);case 5:case"end":return f.stop()}},o,this)}));function r(){return n.apply(this,arguments)}return r}()},{key:"clearModels",value:function(){var r,o;(r=this.texture)===null||r===void 0||r.destroy(),(o=this.dataTexture)===null||o===void 0||o.destroy(),this.iconService.off("imageUpdate",this.updateTexture)}},{key:"getShaders",value:function(){var r=this.layer.getLayerConfig(),o=r.sourceColor,u=r.targetColor;return o&&u?{frag:q3,vert:eM,type:"Linear"}:{frag:Q3,vert:J3,type:""}}},{key:"buildModels",value:function(){var n=(0,An.Z)(Nt().mark(function o(){var u,f,g,x,I,P,G,$,Ee,Se,Re,Ye;return Nt().wrap(function(vt){for(;;)switch(vt.prev=vt.next){case 0:return u=this.layer.getLayerConfig(),f=u.segmentNumber,g=f===void 0?30:f,x=u.mask,I=x===void 0?!1:x,P=u.maskInside,G=P===void 0?!0:P,$=this.getShaders(),Ee=$.frag,Se=$.vert,Re=$.type,vt.next=4,this.layer.buildLayerModel({moduleName:"lineArc3d"+Re,vertexShader:Se,fragmentShader:Ee,triangulation:Cm,blend:this.getBlend(),segmentNumber:g,stencil:zo(I,G)});case 4:return Ye=vt.sent,vt.abrupt("return",[Ye]);case 6:case"end":return vt.stop()}},o,this)}));function r(){return n.apply(this,arguments)}return r}()},{key:"registerBuiltinAttributes",value:function(){var r=this;this.styleAttributeService.registerStyleAttribute({name:"size",type:ja.Attribute,descriptor:{name:"a_Size",buffer:{usage:$e.DYNAMIC_DRAW,data:[],type:$e.FLOAT},size:1,update:function(u){var f=u.size,g=f===void 0?1:f;return Array.isArray(g)?[g[0]]:[g]}}}),this.styleAttributeService.registerStyleAttribute({name:"instance",type:ja.Attribute,descriptor:{name:"a_Instance",buffer:{usage:$e.STATIC_DRAW,data:[],type:$e.FLOAT},size:4,update:function(u,f,g){return[g[3],g[4],g[5],g[6]]}}}),this.styleAttributeService.registerStyleAttribute({name:"uv",type:ja.Attribute,descriptor:{name:"a_iconMapUV",buffer:{usage:$e.DYNAMIC_DRAW,data:[],type:$e.FLOAT},size:2,update:function(u){var f=r.iconService.getIconMap(),g=u.texture,x=f[g]||{x:0,y:0},I=x.x,P=x.y;return[I,P]}}})}}]),t}(Sl);function nM(e){var i=iM();return function(){var n=(0,rr.Z)(e),r;if(i){var o=(0,rr.Z)(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return(0,jn.Z)(this,r)}}function iM(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var aM=`#define LineTypeSolid 0.0
#define LineTypeDash 1.0
#define Animate 0.0
#define LineTexture 1.0

uniform float u_opacity;
uniform float u_textureBlend;
uniform float u_blur : 0.9;
uniform float u_line_type: 0.0;
// varying vec2 v_normal;
varying vec4 v_dash_array;
varying vec4 v_color;

uniform float u_line_texture: 0.0;
uniform sampler2D u_texture;
uniform vec2 u_textSize;
varying float v_segmentIndex;
uniform float segmentNumber;

varying vec2 v_iconMapUV;

uniform float u_time;
uniform vec4 u_animate: [ 1., 2., 1.0, 0.2 ];

varying mat4 styleMappingMat;

#pragma include "picking"

void main() {
  float opacity = styleMappingMat[0][0];
  float animateSpeed = 0.0; // \u8FD0\u52A8\u901F\u5EA6
  float d_distance_ratio = styleMappingMat[3].g; // \u5F53\u524D\u70B9\u4F4D\u8DDD\u79BB\u5360\u7EBF\u603B\u957F\u7684\u6BD4\u4F8B
  gl_FragColor = v_color;

  gl_FragColor.a *= opacity;
  if(u_line_type == LineTypeDash) {
    float flag = 0.;
    float dashLength = mod(d_distance_ratio, v_dash_array.x + v_dash_array.y + v_dash_array.z + v_dash_array.w);
    if(dashLength < v_dash_array.x || (dashLength > (v_dash_array.x + v_dash_array.y) && dashLength <  v_dash_array.x + v_dash_array.y + v_dash_array.z)) {
      flag = 1.;
    }
    gl_FragColor.a *=flag;
  }

  if(u_animate.x == Animate && u_line_texture != LineTexture) {
      animateSpeed = u_time / u_animate.y;
      float alpha =1.0 - fract( mod(1.0- d_distance_ratio, u_animate.z)* (1.0/ u_animate.z) + u_time / u_animate.y);

      alpha = (alpha + u_animate.w -1.0) / u_animate.w;
      // alpha = smoothstep(0., 1., alpha);
      alpha = clamp(alpha, 0.0, 1.0);
      gl_FragColor.a *= alpha;

      // u_animate 
      // x enable
      // y duration
      // z interval
      // w trailLength
  }

  if(u_line_texture == LineTexture && u_line_type != LineTypeDash) { // while load texture
    // float arcRadio = smoothstep( 0.0, 1.0, (v_segmentIndex / segmentNumber));
    float arcRadio = v_segmentIndex / (segmentNumber - 1.0);
    float count = styleMappingMat[3].b; // // \u8D34\u56FE\u5728\u5F27\u7EBF\u4E0A\u91CD\u590D\u7684\u6570\u91CF

    float time = 0.0;
    if(u_animate.x == Animate) {
      time = u_time / u_animate.y;
    }
    float redioCount = arcRadio * count;

    float u = fract(redioCount - time);

    float v = styleMappingMat[3].a;  // \u7EBF\u56FE\u5C42\u8D34\u56FE\u90E8\u5206\u7684 v \u5750\u6807\u503C
    vec2 uv= v_iconMapUV / u_textSize + vec2(u, v) / u_textSize * 64.;
    vec4 pattern = texture2D(u_texture, uv);

    if(u_animate.x == Animate) {
      float currentPlane = floor(redioCount - time);
      float textureStep = floor(count * u_animate.z);
      float a = mod(currentPlane, textureStep);
      if(a < textureStep - 1.0) {
        pattern = vec4(0.0);
      }
    }

    if(u_textureBlend == 0.0) { // normal
      pattern.a = 0.0;
      gl_FragColor = filterColor(gl_FragColor + pattern);
    } else { // replace
        pattern.a *= opacity;
        if(gl_FragColor.a <= 0.0) {
          pattern.a = 0.0;
          discard;
        } else {
          gl_FragColor = filterColor(pattern);
        }
    }

  } else {
    gl_FragColor = filterColor(gl_FragColor);
  }
}
`,oM=`#define LineTypeSolid 0.0
#define LineTypeDash 1.0
#define Animate 0.0
#define LineTexture 1.0
attribute vec3 a_Position;
attribute vec4 a_Instance;
attribute vec4 a_Color;
attribute float a_Size;

uniform float u_globel;
uniform float u_globel_radius;
uniform float u_global_height: 10;
uniform mat4 u_ModelMatrix;
uniform mat4 u_Mvp;
uniform float segmentNumber;
uniform vec4 u_animate: [ 1., 2., 1.0, 0.2 ];
varying vec4 v_color;

uniform float u_line_type: 0.0;
uniform vec4 u_dash_array: [10.0, 5., 0, 0];
varying vec4 v_dash_array;

uniform float u_icon_step: 100;
uniform float u_line_texture: 0.0;
varying float v_segmentIndex;

attribute vec2 a_iconMapUV;
varying vec2 v_iconMapUV;

uniform float u_opacity: 1.0;
varying mat4 styleMappingMat; // \u7528\u4E8E\u5C06\u5728\u9876\u70B9\u7740\u8272\u5668\u4E2D\u8BA1\u7B97\u597D\u7684\u6837\u5F0F\u503C\u4F20\u9012\u7ED9\u7247\u5143

#pragma include "styleMapping"
#pragma include "styleMappingCalOpacity"

#pragma include "projection"
#pragma include "project"
#pragma include "picking"

float maps (float value, float start1, float stop1, float start2, float stop2) {
  return start2 + (stop2 - start2) * ((value - start1) / (stop1 - start1));
}

float getSegmentRatio(float index) {
  return smoothstep(0.0, 1.0, index / (segmentNumber - 1.0));
}

float paraboloid(vec2 source, vec2 target, float ratio) {
  vec2 x = mix(source, target, ratio);
  vec2 center = mix(source, target, 0.5);
  float dSourceCenter = distance(source, center);
  float dXCenter = distance(x, center);
  return (dSourceCenter + dXCenter) * (dSourceCenter - dXCenter);
}

vec3 getPos(vec2 source, vec2 target, float segmentRatio) {
  float vertex_height = paraboloid(source, target, segmentRatio);

  return vec3(
    mix(source, target, segmentRatio),
    sqrt(max(0.0, vertex_height))
  );
}
vec2 getExtrusionOffset(vec2 line_clipspace, float offset_direction) {
  // normalized direction of the line
  vec2 dir_screenspace = normalize(line_clipspace);
  // rotate by 90 degrees
  dir_screenspace = vec2(-dir_screenspace.y, dir_screenspace.x);

  vec2 offset = dir_screenspace * offset_direction * setPickingSize(a_Size) / 2.0;

  return offset;
}
vec2 getNormal(vec2 line_clipspace, float offset_direction) {
  // normalized direction of the line
  vec2 dir_screenspace = normalize(line_clipspace);
  // rotate by 90 degrees
  dir_screenspace = vec2(-dir_screenspace.y, dir_screenspace.x);
  return reverse_offset_normal(vec3(dir_screenspace,1.0)).xy * sign(offset_direction);
}

float torad(float deg) {
  return (deg / 180.0) * acos(-1.0);
}

vec3 lglt2xyz(vec2 lnglat) {
  float pi = 3.1415926;
  // + Math.PI/2 \u662F\u4E3A\u4E86\u5BF9\u9F50\u5750\u6807
  float lng = torad(lnglat.x) + pi / 2.0;
  float lat = torad(lnglat.y);

  // \u624B\u52A8\u589E\u52A0\u4E00\u4E9B\u504F\u79FB\uFF0C\u51CF\u8F7B\u9762\u7684\u51B2\u7A81
  float radius = u_globel_radius;

  float z = radius * cos(lat) * cos(lng);
  float x = radius * cos(lat) * sin(lng);
  float y = radius * sin(lat);
  return vec3(x, y, z);
}

void main() {
  // cal style mapping - \u6570\u636E\u7EB9\u7406\u6620\u5C04\u90E8\u5206\u7684\u8BA1\u7B97
  styleMappingMat = mat4(
    0.0, 0.0, 0.0, 0.0, // opacity - strokeOpacity - strokeWidth - empty
    0.0, 0.0, 0.0, 0.0, // strokeR - strokeG - strokeB - strokeA
    0.0, 0.0, 0.0, 0.0, // offsets[0] - offsets[1]
    0.0, 0.0, 0.0, 0.0  // dataset \u6570\u636E\u96C6
  );

  float rowCount = u_cellTypeLayout[0][0];    // \u5F53\u524D\u7684\u6570\u636E\u7EB9\u7406\u6709\u51E0\u884C
  float columnCount = u_cellTypeLayout[0][1]; // \u5F53\u770B\u5230\u6570\u636E\u7EB9\u7406\u6709\u51E0\u5217
  float columnWidth = 1.0/columnCount;  // \u5217\u5BBD
  float rowHeight = 1.0/rowCount;       // \u884C\u9AD8
  float cellCount = calCellCount(); // opacity - strokeOpacity - strokeWidth - stroke - offsets
  float id = a_vertexId; // \u7B2Cn\u4E2A\u9876\u70B9
  float cellCurrentRow = floor(id * cellCount / columnCount) + 1.0; // \u8D77\u59CB\u70B9\u5728\u7B2C\u51E0\u884C
  float cellCurrentColumn = mod(id * cellCount, columnCount) + 1.0; // \u8D77\u59CB\u70B9\u5728\u7B2C\u51E0\u5217
  
  // cell \u56FA\u5B9A\u987A\u5E8F opacity -> strokeOpacity -> strokeWidth -> stroke ... 
  // \u6309\u987A\u5E8F\u4ECE cell \u4E2D\u53D6\u503C\u3001\u82E5\u6CA1\u6709\u5219\u81EA\u52A8\u5F80\u4E0B\u53D6\u503C
  float textureOffset = 0.0; // \u5728 cell \u4E2D\u53D6\u503C\u7684\u504F\u79FB\u91CF

  vec2 opacityAndOffset = calOpacityAndOffset(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset, columnWidth, rowHeight);
  styleMappingMat[0][0] = opacityAndOffset.r;
  textureOffset = opacityAndOffset.g;
  // cal style mapping - \u6570\u636E\u7EB9\u7406\u6620\u5C04\u90E8\u5206\u7684\u8BA1\u7B97

  v_color = a_Color;
  vec2 source = project_position(vec4(a_Instance.rg, 0, 0)).xy;
  vec2 target = project_position(vec4(a_Instance.ba, 0, 0)).xy;
  float segmentIndex = a_Position.x;
  float segmentRatio = getSegmentRatio(segmentIndex);
  float indexDir = mix(-1.0, 1.0, step(segmentIndex, 0.0));

  float d_distance_ratio;
   if(u_line_type == LineTypeDash) {
    d_distance_ratio = segmentIndex / segmentNumber;
    vec2 s = source;
    vec2 t = target;
    
    if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x
      s = unProjCustomCoord(source);
      t = unProjCustomCoord(target);
    }
    float total_Distance = pixelDistance(s, t) / 2.0 * PI;
    v_dash_array = pow(2.0, 20.0 - u_Zoom) * u_dash_array / (total_Distance / segmentNumber * segmentIndex);
  }
    if(u_animate.x == Animate) {
      d_distance_ratio = segmentIndex / segmentNumber;
  }
  styleMappingMat[3].g = d_distance_ratio; // \u5F53\u524D\u70B9\u4F4D\u8DDD\u79BB\u5360\u7EBF\u603B\u957F\u7684\u6BD4\u4F8B

  float nextSegmentRatio = getSegmentRatio(segmentIndex + indexDir);
  vec3 curr = getPos(source, target, segmentRatio);
  vec3 next = getPos(source, target, nextSegmentRatio);
  vec2 offset = getExtrusionOffset((next.xy - curr.xy) * indexDir, a_Position.y);
  // v_normal = getNormal((next.xy - curr.xy) * indexDir, a_Position.y);


  v_segmentIndex = a_Position.x;
  if(LineTexture == u_line_texture && u_line_type != LineTypeDash) { // \u5F00\u542F\u8D34\u56FE\u6A21\u5F0F  

    float arcDistrance = length(source - target);
    float pixelLen =  project_pixel_texture(u_icon_step);
    styleMappingMat[3].b = floor(arcDistrance/pixelLen); // \u8D34\u56FE\u5728\u5F27\u7EBF\u4E0A\u91CD\u590D\u7684\u6570\u91CF

    vec2 projectOffset = project_pixel(offset);
    float lineOffsetWidth = length(projectOffset + projectOffset * sign(a_Position.y)); // \u7EBF\u6A2A\u5411\u504F\u79FB\u7684\u8DDD\u79BB
    float linePixelSize = project_pixel(a_Size);  // \u5B9A\u70B9\u4F4D\u7F6E\u504F\u79FB\uFF0C\u6309\u5730\u56FE\u7B49\u7EA7\u7F29\u653E\u540E\u7684\u8DDD\u79BB
    styleMappingMat[3].a = lineOffsetWidth/linePixelSize;  // \u7EBF\u56FE\u5C42\u8D34\u56FE\u90E8\u5206\u7684 v \u5750\u6807\u503C

    v_iconMapUV = a_iconMapUV;
  }
  

  // gl_Position = project_common_position_to_clipspace(vec4(curr.xy + project_pixel(offset), curr.z, 1.0));
  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x
    gl_Position = u_Mvp * (vec4(curr.xy + project_pixel(offset), curr.z, 1.0));
  } else {
    gl_Position = project_common_position_to_clipspace(vec4(curr.xy + project_pixel(offset), curr.z, 1.0));
  }

  // \u5730\u7403\u6A21\u5F0F
  if(u_globel > 0.0) {
    vec3 startLngLat = lglt2xyz(a_Instance.rg);
    vec3 endLngLat = lglt2xyz(a_Instance.ba);
    float globalRadius = length(startLngLat);

    vec3 lineDir = normalize(endLngLat - startLngLat);
    vec3 midPointDir = normalize((startLngLat + endLngLat)/2.0);

    // \u7EBF\u7684\u504F\u79FB
    vec3 lnglatOffset = cross(lineDir, midPointDir) * a_Position.y;
    // \u8BA1\u7B97\u8D77\u59CB\u70B9\u548C\u7EC8\u6B62\u70B9\u7684\u8DDD\u79BB
    float lnglatLength = length(a_Instance.rg - a_Instance.ba)/50.0;
    // \u8BA1\u7B97\u98DE\u7EBF\u5404\u4E2A\u8282\u70B9\u76F8\u5E94\u7684\u9AD8\u5EA6
    float lineHeight = u_global_height * (-4.0*segmentRatio*segmentRatio + 4.0 * segmentRatio) * lnglatLength;
    // \u5730\u7403\u70B9\u4F4D
    vec3 globalPoint = normalize(mix(startLngLat, endLngLat, segmentRatio)) * (globalRadius + lineHeight) + lnglatOffset * a_Size;
    
    gl_Position = u_ViewProjectionMatrix * vec4(globalPoint, 1.0);
  }
 

  setPickingColor(a_PickingColor);
}
`,sM=`
#define Animate 0.0

uniform float u_opacity;
uniform float u_blur : 0.9;
varying float v_segmentIndex;
uniform float segmentNumber;

uniform float u_time;
uniform vec4 u_animate: [ 1., 2., 1.0, 0.2 ];

uniform float u_linearColor: 0;
uniform vec4 u_sourceColor;
uniform vec4 u_targetColor;

varying mat4 styleMappingMat;

#pragma include "picking"

void main() {
  float opacity = styleMappingMat[0][0];
  float animateSpeed = 0.0; // \u8FD0\u52A8\u901F\u5EA6
  float d_distance_ratio = styleMappingMat[3].g; // \u5F53\u524D\u70B9\u4F4D\u8DDD\u79BB\u5360\u7EBF\u603B\u957F\u7684\u6BD4\u4F8B

  gl_FragColor = mix(u_sourceColor, u_targetColor, v_segmentIndex/segmentNumber);

  gl_FragColor.a *= opacity;

  if(u_animate.x == Animate) {
      animateSpeed = u_time / u_animate.y;
      float alpha =1.0 - fract( mod(1.0- d_distance_ratio, u_animate.z)* (1.0/ u_animate.z) + u_time / u_animate.y);

      alpha = (alpha + u_animate.w -1.0) / u_animate.w;
      // alpha = smoothstep(0., 1., alpha);
      alpha = clamp(alpha, 0.0, 1.0);
      gl_FragColor.a *= alpha;

      // u_animate 
      // x enable
      // y duration
      // z interval
      // w trailLength
  }

  gl_FragColor = filterColor(gl_FragColor);
}
`,uM=`#define LineTypeSolid 0.0
#define LineTypeDash 1.0
#define Animate 0.0
#define LineTexture 1.0
attribute vec3 a_Position;
attribute vec4 a_Instance;
attribute vec4 a_Color;
attribute float a_Size;
attribute vec2 a_iconMapUV;

uniform float u_globel;
uniform float u_globel_radius;
uniform float u_global_height: 10;
uniform mat4 u_ModelMatrix;
uniform mat4 u_Mvp;
uniform float segmentNumber;
uniform vec4 u_animate: [ 1., 2., 1.0, 0.2 ];

uniform float u_line_type: 0.0;
uniform vec4 u_dash_array: [10.0, 5., 0, 0];
uniform float u_icon_step: 100;
uniform float u_line_texture: 0.0;
uniform float u_opacity: 1.0;

varying vec4 v_dash_array;
varying vec4 v_color;
varying float v_segmentIndex;
varying vec2 v_iconMapUV;
varying mat4 styleMappingMat; // \u7528\u4E8E\u5C06\u5728\u9876\u70B9\u7740\u8272\u5668\u4E2D\u8BA1\u7B97\u597D\u7684\u6837\u5F0F\u503C\u4F20\u9012\u7ED9\u7247\u5143


#pragma include "styleMapping"
#pragma include "styleMappingCalOpacity"

#pragma include "projection"
#pragma include "project"
#pragma include "picking"

float maps (float value, float start1, float stop1, float start2, float stop2) {
  return start2 + (stop2 - start2) * ((value - start1) / (stop1 - start1));
}

float getSegmentRatio(float index) {
  return smoothstep(0.0, 1.0, index / (segmentNumber - 1.0));
}

float paraboloid(vec2 source, vec2 target, float ratio) {
  vec2 x = mix(source, target, ratio);
  vec2 center = mix(source, target, 0.5);
  float dSourceCenter = distance(source, center);
  float dXCenter = distance(x, center);
  return (dSourceCenter + dXCenter) * (dSourceCenter - dXCenter);
}

vec3 getPos(vec2 source, vec2 target, float segmentRatio) {
  float vertex_height = paraboloid(source, target, segmentRatio);

  return vec3(
    mix(source, target, segmentRatio),
    sqrt(max(0.0, vertex_height))
  );
}
vec2 getExtrusionOffset(vec2 line_clipspace, float offset_direction) {
  // normalized direction of the line
  vec2 dir_screenspace = normalize(line_clipspace);
  // rotate by 90 degrees
  dir_screenspace = vec2(-dir_screenspace.y, dir_screenspace.x);

  vec2 offset = dir_screenspace * offset_direction * setPickingSize(a_Size) / 2.0;

  return offset;
}
vec2 getNormal(vec2 line_clipspace, float offset_direction) {
  // normalized direction of the line
  vec2 dir_screenspace = normalize(line_clipspace);
  // rotate by 90 degrees
  dir_screenspace = vec2(-dir_screenspace.y, dir_screenspace.x);
  return reverse_offset_normal(vec3(dir_screenspace,1.0)).xy * sign(offset_direction);
}

float torad(float deg) {
  return (deg / 180.0) * acos(-1.0);
}

vec3 lglt2xyz(vec2 lnglat) {
  float pi = 3.1415926;
  // + Math.PI/2 \u662F\u4E3A\u4E86\u5BF9\u9F50\u5750\u6807
  float lng = torad(lnglat.x) + pi / 2.0;
  float lat = torad(lnglat.y);

  // \u624B\u52A8\u589E\u52A0\u4E00\u4E9B\u504F\u79FB\uFF0C\u51CF\u8F7B\u9762\u7684\u51B2\u7A81
  float radius = u_globel_radius;

  float z = radius * cos(lat) * cos(lng);
  float x = radius * cos(lat) * sin(lng);
  float y = radius * sin(lat);
  return vec3(x, y, z);
}

void main() {
  // cal style mapping - \u6570\u636E\u7EB9\u7406\u6620\u5C04\u90E8\u5206\u7684\u8BA1\u7B97
  styleMappingMat = mat4(
    0.0, 0.0, 0.0, 0.0, // opacity - strokeOpacity - strokeWidth - empty
    0.0, 0.0, 0.0, 0.0, // strokeR - strokeG - strokeB - strokeA
    0.0, 0.0, 0.0, 0.0, // offsets[0] - offsets[1]
    0.0, 0.0, 0.0, 0.0  // dataset \u6570\u636E\u96C6
  );

  float rowCount = u_cellTypeLayout[0][0];    // \u5F53\u524D\u7684\u6570\u636E\u7EB9\u7406\u6709\u51E0\u884C
  float columnCount = u_cellTypeLayout[0][1]; // \u5F53\u770B\u5230\u6570\u636E\u7EB9\u7406\u6709\u51E0\u5217
  float columnWidth = 1.0/columnCount;  // \u5217\u5BBD
  float rowHeight = 1.0/rowCount;       // \u884C\u9AD8
  float cellCount = calCellCount(); // opacity - strokeOpacity - strokeWidth - stroke - offsets
  float id = a_vertexId; // \u7B2Cn\u4E2A\u9876\u70B9
  float cellCurrentRow = floor(id * cellCount / columnCount) + 1.0; // \u8D77\u59CB\u70B9\u5728\u7B2C\u51E0\u884C
  float cellCurrentColumn = mod(id * cellCount, columnCount) + 1.0; // \u8D77\u59CB\u70B9\u5728\u7B2C\u51E0\u5217
  
  // cell \u56FA\u5B9A\u987A\u5E8F opacity -> strokeOpacity -> strokeWidth -> stroke ... 
  // \u6309\u987A\u5E8F\u4ECE cell \u4E2D\u53D6\u503C\u3001\u82E5\u6CA1\u6709\u5219\u81EA\u52A8\u5F80\u4E0B\u53D6\u503C
  float textureOffset = 0.0; // \u5728 cell \u4E2D\u53D6\u503C\u7684\u504F\u79FB\u91CF

  vec2 opacityAndOffset = calOpacityAndOffset(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset, columnWidth, rowHeight);
  styleMappingMat[0][0] = opacityAndOffset.r;
  textureOffset = opacityAndOffset.g;
  // cal style mapping - \u6570\u636E\u7EB9\u7406\u6620\u5C04\u90E8\u5206\u7684\u8BA1\u7B97

  v_color = a_Color;
  vec2 source = project_position(vec4(a_Instance.rg, 0, 0)).xy;
  vec2 target = project_position(vec4(a_Instance.ba, 0, 0)).xy;
  float segmentIndex = a_Position.x;
  float segmentRatio = getSegmentRatio(segmentIndex);
  float indexDir = mix(-1.0, 1.0, step(segmentIndex, 0.0));

  float d_distance_ratio;
   if(u_line_type == LineTypeDash) {
    d_distance_ratio = segmentIndex / segmentNumber;
    // float total_Distance = pixelDistance(a_Instance.rg, a_Instance.ba) / 2.0 * PI;
    vec2 s = source;
    vec2 t = target;
    
    if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x
      s = unProjCustomCoord(source);
      t = unProjCustomCoord(target);
    }
    float total_Distance = pixelDistance(s, t) / 2.0 * PI;
    v_dash_array = pow(2.0, 20.0 - u_Zoom) * u_dash_array / (total_Distance / segmentNumber * segmentIndex);
  }
    if(u_animate.x == Animate) {
      d_distance_ratio = segmentIndex / segmentNumber;
  }
  styleMappingMat[3].g = d_distance_ratio; // \u5F53\u524D\u70B9\u4F4D\u8DDD\u79BB\u5360\u7EBF\u603B\u957F\u7684\u6BD4\u4F8B

  float nextSegmentRatio = getSegmentRatio(segmentIndex + indexDir);
  vec3 curr = getPos(source, target, segmentRatio);
  vec3 next = getPos(source, target, nextSegmentRatio);
  vec2 offset = getExtrusionOffset((next.xy - curr.xy) * indexDir, a_Position.y);
  // v_normal = getNormal((next.xy - curr.xy) * indexDir, a_Position.y);


  v_segmentIndex = a_Position.x;
  if(LineTexture == u_line_texture && u_line_type != LineTypeDash) { // \u5F00\u542F\u8D34\u56FE\u6A21\u5F0F  

    float arcDistrance = length(source - target);
    float pixelLen =  project_pixel_texture(u_icon_step);
    styleMappingMat[3].b = floor(arcDistrance/pixelLen); // \u8D34\u56FE\u5728\u5F27\u7EBF\u4E0A\u91CD\u590D\u7684\u6570\u91CF

    vec2 projectOffset = project_pixel(offset);
    float lineOffsetWidth = length(projectOffset + projectOffset * sign(a_Position.y)); // \u7EBF\u6A2A\u5411\u504F\u79FB\u7684\u8DDD\u79BB
    float linePixelSize = project_pixel(a_Size);  // \u5B9A\u70B9\u4F4D\u7F6E\u504F\u79FB\uFF0C\u6309\u5730\u56FE\u7B49\u7EA7\u7F29\u653E\u540E\u7684\u8DDD\u79BB
    styleMappingMat[3].a = lineOffsetWidth/linePixelSize;  // \u7EBF\u56FE\u5C42\u8D34\u56FE\u90E8\u5206\u7684 v \u5750\u6807\u503C

    v_iconMapUV = a_iconMapUV;
  }
  

  // gl_Position = project_common_position_to_clipspace(vec4(curr.xy + project_pixel(offset), curr.z, 1.0));
  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x
    gl_Position = u_Mvp * (vec4(curr.xy + project_pixel(offset), curr.z, 1.0));
  } else {
    gl_Position = project_common_position_to_clipspace(vec4(curr.xy + project_pixel(offset), curr.z, 1.0));
  }

  // \u5730\u7403\u6A21\u5F0F
  if(u_globel > 0.0) {
    vec3 startLngLat = lglt2xyz(a_Instance.rg);
    vec3 endLngLat = lglt2xyz(a_Instance.ba);
    float globalRadius = length(startLngLat);

    vec3 lineDir = normalize(endLngLat - startLngLat);
    vec3 midPointDir = normalize((startLngLat + endLngLat)/2.0);

    // \u7EBF\u7684\u504F\u79FB
    vec3 lnglatOffset = cross(lineDir, midPointDir) * a_Position.y;
    // \u8BA1\u7B97\u8D77\u59CB\u70B9\u548C\u7EC8\u6B62\u70B9\u7684\u8DDD\u79BB
    float lnglatLength = length(a_Instance.rg - a_Instance.ba)/50.0;
    // \u8BA1\u7B97\u98DE\u7EBF\u5404\u4E2A\u8282\u70B9\u76F8\u5E94\u7684\u9AD8\u5EA6
    float lineHeight = u_global_height * (-4.0*segmentRatio*segmentRatio + 4.0 * segmentRatio) * lnglatLength;
    // \u5730\u7403\u70B9\u4F4D
    vec3 globalPoint = normalize(mix(startLngLat, endLngLat, segmentRatio)) * (globalRadius + lineHeight) + lnglatOffset * a_Size;
    
    gl_Position = u_ViewProjectionMatrix * vec4(globalPoint, 1.0);
  }
 

  setPickingColor(a_PickingColor);
}
`,lM={solid:0,dash:1},cM=function(e){(0,ui.Z)(t,e);var i=nM(t);function t(){var n;(0,Ur.Z)(this,t);for(var r=arguments.length,o=new Array(r),u=0;u<r;u++)o[u]=arguments[u];return n=i.call.apply(i,[this].concat(o)),(0,He.Z)((0,er.Z)(n),"updateTexture",function(){var f=n.rendererService.createTexture2D;if(n.texture){n.texture.update({data:n.iconService.getCanvas()}),n.layer.render();return}n.texture=f({data:n.iconService.getCanvas(),mag:$e.NEAREST,min:$e.NEAREST,premultiplyAlpha:!1,width:1024,height:n.iconService.canvasHeight||128})}),n}return(0,Jr.Z)(t,[{key:"getUninforms",value:function(){var r=this.layer.getLayerConfig(),o=r.opacity,u=o===void 0?1:o,f=r.sourceColor,g=r.targetColor,x=r.textureBlend,I=x===void 0?"normal":x,P=r.lineType,G=P===void 0?"solid":P,$=r.dashArray,Ee=$===void 0?[10,5]:$,Se=r.lineTexture,Re=Se===void 0?!1:Se,Ye=r.iconStep,St=Ye===void 0?100:Ye,vt=r.segmentNumber,Ut=vt===void 0?30:vt,Kt=r.globalArcHeight,Tr=Kt===void 0?10:Kt;Ee.length===2&&Ee.push(0,0);var on=0,dn=[0,0,0,0],vn=[0,0,0,0];if(f&&g&&(dn=co(f),vn=co(g),on=1),this.rendererService.getDirty()&&this.texture.bind(),this.dataTextureTest&&this.dataTextureNeedUpdate({opacity:u})){this.judgeStyleAttributes({opacity:u});var si=this.layer.getEncodedData(),ai=this.calDataFrame(this.cellLength,si,this.cellProperties),Hi=ai.data,wa=ai.width,qa=ai.height;this.rowCount=qa,this.dataTexture=this.cellLength>0&&Hi.length>0?this.createTexture2D({flipY:!0,data:Hi,format:$e.LUMINANCE,type:$e.FLOAT,width:wa,height:qa}):this.createTexture2D({flipY:!0,data:[1],format:$e.LUMINANCE,type:$e.FLOAT,width:1,height:1})}return{u_globel:1,u_globel_radius:Vg,u_global_height:Tr,u_dataTexture:this.dataTexture,u_cellTypeLayout:this.getCellTypeLayout(),u_opacity:(0,Wr.isNumber)(u)?u:1,u_textureBlend:I==="normal"?0:1,segmentNumber:Ut,u_line_type:lM[G]||0,u_dash_array:Ee,u_texture:this.texture,u_line_texture:Re?1:0,u_icon_step:St,u_textSize:[1024,this.iconService.canvasHeight||128],u_linearColor:on,u_sourceColor:dn,u_targetColor:vn}}},{key:"getAnimateUniforms",value:function(){var r=this.layer.getLayerConfig(),o=r.animateOption;return{u_animate:this.animateOption2Array(o),u_time:this.layer.getLayerAnimateTime()}}},{key:"initModels",value:function(){var n=(0,An.Z)(Nt().mark(function o(){return Nt().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return this.updateTexture(),this.iconService.on("imageUpdate",this.updateTexture),f.next=4,this.buildModels();case 4:return f.abrupt("return",f.sent);case 5:case"end":return f.stop()}},o,this)}));function r(){return n.apply(this,arguments)}return r}()},{key:"clearModels",value:function(){var r,o;(r=this.texture)===null||r===void 0||r.destroy(),(o=this.dataTexture)===null||o===void 0||o.destroy(),this.iconService.off("imageUpdate",this.updateTexture)}},{key:"getShaders",value:function(){var r=this.layer.getLayerConfig(),o=r.sourceColor,u=r.targetColor;return o&&u?{frag:sM,vert:uM,type:"Linear"}:{frag:aM,vert:oM,type:""}}},{key:"buildModels",value:function(){var n=(0,An.Z)(Nt().mark(function o(){var u,f,g,x,I,P,G,$,Ee,Se,Re,Ye;return Nt().wrap(function(vt){for(;;)switch(vt.prev=vt.next){case 0:return u=this.layer.getLayerConfig(),f=u.segmentNumber,g=f===void 0?30:f,x=u.mask,I=x===void 0?!1:x,P=u.maskInside,G=P===void 0?!0:P,$=this.getShaders(),Ee=$.frag,Se=$.vert,Re=$.type,vt.next=4,this.layer.buildLayerModel({moduleName:"lineEarthArc3d"+Re,vertexShader:Se,fragmentShader:Ee,triangulation:Cm,depth:{enable:!0},blend:this.getBlend(),segmentNumber:g,stencil:zo(I,G)});case 4:return Ye=vt.sent,vt.abrupt("return",[Ye]);case 6:case"end":return vt.stop()}},o,this)}));function r(){return n.apply(this,arguments)}return r}()},{key:"registerBuiltinAttributes",value:function(){var r=this;this.styleAttributeService.registerStyleAttribute({name:"size",type:ja.Attribute,descriptor:{name:"a_Size",buffer:{usage:$e.DYNAMIC_DRAW,data:[],type:$e.FLOAT},size:1,update:function(u){var f=u.size,g=f===void 0?1:f;return Array.isArray(g)?[g[0]]:[g]}}}),this.styleAttributeService.registerStyleAttribute({name:"instance",type:ja.Attribute,descriptor:{name:"a_Instance",buffer:{usage:$e.STATIC_DRAW,data:[],type:$e.FLOAT},size:4,update:function(u,f,g){return[g[3],g[4],g[5],g[6]]}}}),this.styleAttributeService.registerStyleAttribute({name:"uv",type:ja.Attribute,descriptor:{name:"a_iconMapUV",buffer:{usage:$e.DYNAMIC_DRAW,data:[],type:$e.FLOAT},size:2,update:function(u){var f=r.iconService.getIconMap(),g=u.texture,x=f[g]||{x:0,y:0},I=x.x,P=x.y;return[I,P]}}})}}]),t}(Sl);function fM(e){var i=pM();return function(){var n=(0,rr.Z)(e),r;if(i){var o=(0,rr.Z)(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return(0,jn.Z)(this,r)}}function pM(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var hM=`#define LineTypeSolid 0.0
#define LineTypeDash 1.0
#define Animate 0.0
#define LineTexture 1.0

uniform float u_opacity;
uniform float u_textureBlend;
uniform float u_blur : 0.9;
uniform float u_line_type: 0.0;
// varying vec2 v_normal;
varying vec4 v_dash_array;
varying float v_distance_ratio;
varying vec4 v_color;

uniform float u_time;
uniform vec4 u_animate: [ 1., 2., 1.0, 0.2 ];

uniform float u_line_texture: 0.0;
uniform sampler2D u_texture;
uniform vec2 u_textSize;
uniform float segmentNumber;

varying vec2 v_iconMapUV;

uniform float u_linearColor: 0;
uniform vec4 u_sourceColor;
uniform vec4 u_targetColor;

varying mat4 styleMappingMat;

#pragma include "picking"
#pragma include "project"
#pragma include "projection"

void main() {
  float opacity = styleMappingMat[0][0];
  float animateSpeed = 0.0;
  float d_segmentIndex = styleMappingMat[3].g;
  
  // \u8BBE\u7F6E\u5F27\u7EBF\u7684\u5E95\u8272
  if(u_linearColor == 1.0) { // \u4F7F\u7528\u6E10\u53D8\u989C\u8272
    gl_FragColor = mix(u_sourceColor, u_targetColor, d_segmentIndex/segmentNumber);
  } else { // \u4F7F\u7528 color \u65B9\u6CD5\u4F20\u5165\u7684\u989C\u8272
     gl_FragColor = v_color;
  }

  // float blur = 1.- smoothstep(u_blur, 1., length(v_normal.xy));
  // float blur = smoothstep(1.0, u_blur, length(v_normal.xy));
  gl_FragColor.a *= opacity;
  if(u_line_type == LineTypeDash) {
    float dashLength = mod(v_distance_ratio, v_dash_array.x + v_dash_array.y + v_dash_array.z + v_dash_array.w);
    if(dashLength < v_dash_array.x || (dashLength > (v_dash_array.x + v_dash_array.y) && dashLength <  v_dash_array.x + v_dash_array.y + v_dash_array.z)) {
      // \u5B9E\u7EBF\u90E8\u5206
    } else {
      // \u865A\u7EBF\u90E8\u5206
      discard;
    };
  }

  // \u8BBE\u7F6E\u5F27\u7EBF\u7684\u52A8\u753B\u6A21\u5F0F
  if(u_animate.x == Animate) {
      animateSpeed = u_time / u_animate.y;
      float alpha =1.0 - fract( mod(1.0- v_distance_ratio, u_animate.z)* (1.0/ u_animate.z) + u_time / u_animate.y);
      alpha = (alpha + u_animate.w -1.0) / u_animate.w;
      alpha = smoothstep(0., 1., alpha);
      gl_FragColor.a *= alpha;
  }

  // \u8BBE\u7F6E\u5F27\u7EBF\u7684\u8D34\u56FE
  if(LineTexture == u_line_texture && u_line_type != LineTypeDash) { 
    float arcRadio = smoothstep( 0.0, 1.0, (d_segmentIndex / (segmentNumber - 1.0)));
    // float arcRadio = d_segmentIndex / (segmentNumber - 1.0);
    float count = styleMappingMat[3].b; // \u8D34\u56FE\u5728\u5F27\u7EBF\u4E0A\u91CD\u590D\u7684\u6570\u91CF
    float u = fract(arcRadio * count - animateSpeed * count);
    // float u = fract(arcRadio * count - animateSpeed);
    if(u_animate.x == Animate) {
      u = gl_FragColor.a/opacity;
    }

    float v = styleMappingMat[3].a; // \u7EBF\u56FE\u5C42\u8D34\u56FE\u90E8\u5206\u7684 v \u5750\u6807\u503C

    vec2 uv= v_iconMapUV / u_textSize + vec2(u, v) / u_textSize * 64.;
    vec4 pattern = texture2D(u_texture, uv);
    
    // \u8BBE\u7F6E\u8D34\u56FE\u548C\u5E95\u8272\u7684\u53E0\u52A0\u6A21\u5F0F
    if(u_textureBlend == 0.0) { // normal
      pattern.a = 0.0;
      gl_FragColor = filterColor(gl_FragColor + pattern);
    } else { // replace
        pattern.a *= opacity;
        if(gl_FragColor.a <= 0.0) {
          pattern.a = 0.0;
        }
        gl_FragColor = filterColor(pattern);
    }
  } else {
    gl_FragColor = filterColor(gl_FragColor);
  }

  // gl_FragColor = filterColor(gl_FragColor);
}`,dM=`#define LineTypeSolid 0.0
#define LineTypeDash 1.0
#define Animate 0.0
#define LineTexture 1.0

attribute vec4 a_Color;
attribute vec3 a_Position;
attribute vec4 a_Instance;
attribute float a_Size;
uniform mat4 u_ModelMatrix;
uniform mat4 u_Mvp;
uniform float segmentNumber;
uniform vec4 u_animate: [ 1., 2., 1.0, 0.2 ];
varying vec4 v_color;

varying float v_distance_ratio;
uniform float u_line_type: 0.0;
uniform vec4 u_dash_array: [10.0, 5., 0, 0];
varying vec4 v_dash_array;

uniform float u_icon_step: 100;
uniform float u_line_texture: 0.0;

attribute vec2 a_iconMapUV;
varying vec2 v_iconMapUV;

uniform float u_opacity: 1.0;
varying mat4 styleMappingMat; // \u7528\u4E8E\u5C06\u5728\u9876\u70B9\u7740\u8272\u5668\u4E2D\u8BA1\u7B97\u597D\u7684\u6837\u5F0F\u503C\u4F20\u9012\u7ED9\u7247\u5143

#pragma include "styleMapping"
#pragma include "styleMappingCalOpacity"

#pragma include "projection"
#pragma include "project"
#pragma include "picking"

float maps (float value, float start1, float stop1, float start2, float stop2) {
    return start2 + (stop2 - start2) * ((value - start1) / (stop1 - start1));
}

float getSegmentRatio(float index) {
    return index / (segmentNumber - 1.);
}

float paraboloid(vec2 source, vec2 target, float ratio) {
    vec2 x = mix(source, target, ratio);
    vec2 center = mix(source, target, 0.5);
    float dSourceCenter = distance(source, center);
    float dXCenter = distance(x, center);
    return (dSourceCenter + dXCenter) * (dSourceCenter - dXCenter);
}

vec3 getPos(vec2 source, vec2 target, float segmentRatio) {
     float vertex_height = paraboloid(source, target, segmentRatio);

    return vec3(
    mix(source, target, segmentRatio),
    sqrt(max(0.0, vertex_height))
    );
}
vec2 getExtrusionOffset(vec2 line_clipspace, float offset_direction) {
  // normalized direction of the line
  vec2 dir_screenspace = normalize(line_clipspace);
  // rotate by 90 degrees
   dir_screenspace = vec2(-dir_screenspace.y, dir_screenspace.x);
  vec2 offset = dir_screenspace * offset_direction * setPickingSize(a_Size)/ 2.0;
  return offset;
}
vec2 getNormal(vec2 line_clipspace, float offset_direction) {
  // normalized direction of the line
  vec2 dir_screenspace = normalize(line_clipspace);
  // rotate by 90 degrees
   dir_screenspace = vec2(-dir_screenspace.y, dir_screenspace.x);
   return reverse_offset_normal(vec3(dir_screenspace,1.0)).xy * sign(offset_direction);
}
float getAngularDist (vec2 source, vec2 target) {
  vec2 delta = source - target;
  vec2 sin_half_delta = sin(delta / 2.0);
  float a =
    sin_half_delta.y * sin_half_delta.y +
    cos(source.y) * cos(target.y) *
    sin_half_delta.x * sin_half_delta.x;
  return 2.0 * atan(sqrt(a), sqrt(1.0 - a));
}

vec2 midPoint(vec2 source, vec2 target) {
  vec2 center = target - source;
  float r = length(center);
  float theta = atan(center.y, center.x);
  float thetaOffset = 0.314;
  float r2 = r / 2.0 / cos(thetaOffset);
  float theta2 = theta + thetaOffset;
  vec2 mid = vec2(r2*cos(theta2) + source.x, r2*sin(theta2) + source.y);
  return mid;
}
float bezier3(vec3 arr, float t) {
  float ut = 1. - t;
  return (arr.x * ut + arr.y * t) * ut + (arr.y * ut + arr.z * t) * t;
}

vec2 interpolate (vec2 source, vec2 target, float angularDist, float t) {
  // if the angularDist is PI, linear interpolation is applied. otherwise, use spherical interpolation
  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x
    vec2 mid = midPoint(source, target);
    vec3 x = vec3(source.x, mid.x, target.x);
    vec3 y = vec3(source.y, mid.y, target.y);
    return vec2(bezier3(x ,t), bezier3(y,t));
  }else {
    if(abs(angularDist - PI) < 0.001) {
      return (1.0 - t) * source + t * target;
    }
    float a = sin((1.0 - t) * angularDist) / sin(angularDist);
    float b = sin(t * angularDist) / sin(angularDist);
    vec2 sin_source = sin(source);
    vec2 cos_source = cos(source);
    vec2 sin_target = sin(target);
    vec2 cos_target = cos(target);
    float x = a * cos_source.y * cos_source.x + b * cos_target.y * cos_target.x;
    float y = a * cos_source.y * sin_source.x + b * cos_target.y * sin_target.x;
    float z = a * sin_source.y + b * sin_target.y;
    return vec2(atan(y, x), atan(z, sqrt(x * x + y * y)));
  }
}

void main() {
  // cal style mapping - \u6570\u636E\u7EB9\u7406\u6620\u5C04\u90E8\u5206\u7684\u8BA1\u7B97
  styleMappingMat = mat4(
    0.0, 0.0, 0.0, 0.0, // opacity - strokeOpacity - strokeWidth - empty
    0.0, 0.0, 0.0, 0.0, // strokeR - strokeG - strokeB - strokeA
    0.0, 0.0, 0.0, 0.0, // offsets[0] - offsets[1]
    0.0, 0.0, 0.0, 0.0  // dataset \u6570\u636E\u96C6
  );

  float rowCount = u_cellTypeLayout[0][0];    // \u5F53\u524D\u7684\u6570\u636E\u7EB9\u7406\u6709\u51E0\u884C
  float columnCount = u_cellTypeLayout[0][1]; // \u5F53\u770B\u5230\u6570\u636E\u7EB9\u7406\u6709\u51E0\u5217
  float columnWidth = 1.0/columnCount;  // \u5217\u5BBD
  float rowHeight = 1.0/rowCount;       // \u884C\u9AD8
  float cellCount = calCellCount(); // opacity - strokeOpacity - strokeWidth - stroke - offsets
  float id = a_vertexId; // \u7B2Cn\u4E2A\u9876\u70B9
  float cellCurrentRow = floor(id * cellCount / columnCount) + 1.0; // \u8D77\u59CB\u70B9\u5728\u7B2C\u51E0\u884C
  float cellCurrentColumn = mod(id * cellCount, columnCount) + 1.0; // \u8D77\u59CB\u70B9\u5728\u7B2C\u51E0\u5217
  
  // cell \u56FA\u5B9A\u987A\u5E8F opacity -> strokeOpacity -> strokeWidth -> stroke ... 
  // \u6309\u987A\u5E8F\u4ECE cell \u4E2D\u53D6\u503C\u3001\u82E5\u6CA1\u6709\u5219\u81EA\u52A8\u5F80\u4E0B\u53D6\u503C
  float textureOffset = 0.0; // \u5728 cell \u4E2D\u53D6\u503C\u7684\u504F\u79FB\u91CF

  vec2 opacityAndOffset = calOpacityAndOffset(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset, columnWidth, rowHeight);
  styleMappingMat[0][0] = opacityAndOffset.r;
  textureOffset = opacityAndOffset.g;
  // cal style mapping - \u6570\u636E\u7EB9\u7406\u6620\u5C04\u90E8\u5206\u7684\u8BA1\u7B97

  v_color = a_Color;
  vec2 source = radians(a_Instance.rg);
  vec2 target = radians(a_Instance.ba);
  float angularDist = getAngularDist(source, target);
  float segmentIndex = a_Position.x;
  float segmentRatio = getSegmentRatio(segmentIndex);
  float indexDir = mix(-1.0, 1.0, step(segmentIndex, 0.0));

  if(u_line_type == LineTypeDash) {
    v_distance_ratio = segmentIndex / segmentNumber;
    vec2 s = source;
    vec2 t = target;
    
    if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x
      s = unProjCustomCoord(source);
      t = unProjCustomCoord(target);
    }
    float total_Distance = pixelDistance(s, t) / 2.0 * PI;
    total_Distance = total_Distance*16.0; // total_Distance*16.0 \u8C03\u6574\u9ED8\u8BA4\u7684\u6548\u679C
    v_dash_array = pow(2.0, 20.0 - u_Zoom) * u_dash_array / total_Distance;
  }

  if(u_animate.x == Animate) {
      v_distance_ratio = segmentIndex / segmentNumber;
  }

  float nextSegmentRatio = getSegmentRatio(segmentIndex + indexDir);
  v_distance_ratio = segmentIndex / segmentNumber;
  vec4 curr = project_position(vec4(degrees(interpolate(source, target, angularDist, segmentRatio)), 0.0, 1.0));
  vec4 next = project_position(vec4(degrees(interpolate(source, target, angularDist, nextSegmentRatio)), 0.0, 1.0));
  // v_normal = getNormal((next.xy - curr.xy) * indexDir, a_Position.y);
  vec2 offset = project_pixel(getExtrusionOffset((next.xy - curr.xy) * indexDir, a_Position.y));
  //  vec4 project_pos = project_position(vec4(curr.xy, 0, 1.0));
  // gl_Position = project_common_position_to_clipspace(vec4(curr.xy + offset, curr.z, 1.0));

  styleMappingMat[3].g = a_Position.x; // \u8BE5\u9876\u70B9\u5728\u5F27\u7EBF\u4E0A\u7684\u5206\u6BB5\u6392\u5E8F
  if(LineTexture == u_line_texture) { // \u5F00\u542F\u8D34\u56FE\u6A21\u5F0F  
    // float mapZoomScale = u_CoordinateSystem !== COORDINATE_SYSTEM_P20_2?10000000.0:1.0;
    float d_arcDistrance = length(source - target);
    if(u_CoordinateSystem == COORDINATE_SYSTEM_P20) { // amap
      d_arcDistrance = d_arcDistrance * 1000000.0;
    }
    if(u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT || u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) { // mapbox
      d_arcDistrance = project_pixel_allmap(d_arcDistrance);
    }
    float d_pixelLen = project_pixel(u_icon_step)/8.0;
    styleMappingMat[3].b = floor(d_arcDistrance/d_pixelLen); // \u8D34\u56FE\u5728\u5F27\u7EBF\u4E0A\u91CD\u590D\u7684\u6570\u91CF

    float lineOffsetWidth = length(offset + offset * sign(a_Position.y)); // \u7EBF\u6A2A\u5411\u504F\u79FB\u7684\u8DDD\u79BB
    float linePixelSize = project_pixel(a_Size);  // \u5B9A\u70B9\u4F4D\u7F6E\u504F\u79FB\uFF0C\u6309\u5730\u56FE\u7B49\u7EA7\u7F29\u653E\u540E\u7684\u8DDD\u79BB
    styleMappingMat[3].a = lineOffsetWidth/linePixelSize;  // \u7EBF\u56FE\u5C42\u8D34\u56FE\u90E8\u5206\u7684 v \u5750\u6807\u503C

    v_iconMapUV = a_iconMapUV;
  }

  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x
    gl_Position = u_Mvp * (vec4(curr.xy + offset, curr.z, 1.0));
  } else {
    gl_Position = project_common_position_to_clipspace(vec4(curr.xy + offset, curr.z, 1.0));
  }
  setPickingColor(a_PickingColor);
}

`,vM={solid:0,dash:1},mM=function(e){(0,ui.Z)(t,e);var i=fM(t);function t(){var n;(0,Ur.Z)(this,t);for(var r=arguments.length,o=new Array(r),u=0;u<r;u++)o[u]=arguments[u];return n=i.call.apply(i,[this].concat(o)),(0,He.Z)((0,er.Z)(n),"updateTexture",function(){var f=n.rendererService.createTexture2D;if(n.texture){n.texture.update({data:n.iconService.getCanvas()}),n.layer.render();return}n.texture=f({data:n.iconService.getCanvas(),mag:$e.NEAREST,min:$e.NEAREST,premultiplyAlpha:!1,width:1024,height:n.iconService.canvasHeight||128})}),n}return(0,Jr.Z)(t,[{key:"getUninforms",value:function(){var r=this.layer.getLayerConfig(),o=r.opacity,u=o===void 0?1:o,f=r.sourceColor,g=r.targetColor,x=r.textureBlend,I=x===void 0?"normal":x,P=r.lineType,G=P===void 0?"solid":P,$=r.dashArray,Ee=$===void 0?[10,5]:$,Se=r.lineTexture,Re=Se===void 0?!1:Se,Ye=r.iconStep,St=Ye===void 0?100:Ye,vt=r.segmentNumber,Ut=vt===void 0?30:vt;Ee.length===2&&Ee.push(0,0),this.rendererService.getDirty()&&this.texture.bind();var Kt=0,Tr=[0,0,0,0],on=[0,0,0,0];if(f&&g&&(Tr=co(f),on=co(g),Kt=1),this.dataTextureTest&&this.dataTextureNeedUpdate({opacity:u})){this.judgeStyleAttributes({opacity:u});var dn=this.layer.getEncodedData(),vn=this.calDataFrame(this.cellLength,dn,this.cellProperties),si=vn.data,ai=vn.width,Hi=vn.height;this.rowCount=Hi,this.dataTexture=this.cellLength>0&&si.length>0?this.createTexture2D({flipY:!0,data:si,format:$e.LUMINANCE,type:$e.FLOAT,width:ai,height:Hi}):this.createTexture2D({flipY:!0,data:[1],format:$e.LUMINANCE,type:$e.FLOAT,width:1,height:1})}return{u_dataTexture:this.dataTexture,u_cellTypeLayout:this.getCellTypeLayout(),u_opacity:(0,Wr.isNumber)(u)?u:1,u_textureBlend:I==="normal"?0:1,segmentNumber:Ut,u_line_type:vM[G]||0,u_dash_array:Ee,u_texture:this.texture,u_line_texture:Re?1:0,u_icon_step:St,u_textSize:[1024,this.iconService.canvasHeight||128],u_linearColor:Kt,u_sourceColor:Tr,u_targetColor:on}}},{key:"getAnimateUniforms",value:function(){var r=this.layer.getLayerConfig(),o=r.animateOption;return{u_animate:this.animateOption2Array(o),u_time:this.layer.getLayerAnimateTime()}}},{key:"initModels",value:function(){var n=(0,An.Z)(Nt().mark(function o(){return Nt().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return this.updateTexture(),this.iconService.on("imageUpdate",this.updateTexture),f.next=4,this.buildModels();case 4:return f.abrupt("return",f.sent);case 5:case"end":return f.stop()}},o,this)}));function r(){return n.apply(this,arguments)}return r}()},{key:"clearModels",value:function(){var r,o;(r=this.texture)===null||r===void 0||r.destroy(),(o=this.dataTexture)===null||o===void 0||o.destroy(),this.iconService.off("imageUpdate",this.updateTexture)}},{key:"buildModels",value:function(){var n=(0,An.Z)(Nt().mark(function o(){var u,f,g,x,I,P;return Nt().wrap(function($){for(;;)switch($.prev=$.next){case 0:return u=this.layer.getLayerConfig(),f=u.mask,g=f===void 0?!1:f,x=u.maskInside,I=x===void 0?!0:x,$.next=3,this.layer.buildLayerModel({moduleName:"lineGreatCircle",vertexShader:dM,fragmentShader:hM,triangulation:Cm,depth:{enable:!1},blend:this.getBlend(),stencil:zo(g,I)});case 3:return P=$.sent,$.abrupt("return",[P]);case 5:case"end":return $.stop()}},o,this)}));function r(){return n.apply(this,arguments)}return r}()},{key:"registerBuiltinAttributes",value:function(){var r=this;this.styleAttributeService.registerStyleAttribute({name:"size",type:ja.Attribute,descriptor:{name:"a_Size",buffer:{usage:$e.DYNAMIC_DRAW,data:[],type:$e.FLOAT},size:1,update:function(u){var f=u.size,g=f===void 0?1:f;return Array.isArray(g)?[g[0]]:[g]}}}),this.styleAttributeService.registerStyleAttribute({name:"instance",type:ja.Attribute,descriptor:{name:"a_Instance",buffer:{usage:$e.STATIC_DRAW,data:[],type:$e.FLOAT},size:4,update:function(u,f,g){return[g[3],g[4],g[5],g[6]]}}}),this.styleAttributeService.registerStyleAttribute({name:"uv",type:ja.Attribute,descriptor:{name:"a_iconMapUV",buffer:{usage:$e.DYNAMIC_DRAW,data:[],type:$e.FLOAT},size:2,update:function(u){var f=r.iconService.getIconMap(),g=u.texture,x=f[g]||{x:0,y:0},I=x.x,P=x.y;return[I,P]}}})}}]),t}(Sl);function gM(e){var i=yM();return function(){var n=(0,rr.Z)(e),r;if(i){var o=(0,rr.Z)(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return(0,jn.Z)(this,r)}}function yM(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var _M=`#define COORDINATE_SYSTEM_LNGLAT 1.0        // mapbox
#define COORDINATE_SYSTEM_LNGLAT_OFFSET 2.0 // mapbox offset
#define COORDINATE_SYSTEM_VECTOR_TILE 3.0
#define COORDINATE_SYSTEM_IDENTITY 4.0
#define COORDINATE_SYSTEM_P20 5.0           // amap
#define COORDINATE_SYSTEM_P20_OFFSET 6.0    // amap offset
#define COORDINATE_SYSTEM_METER_OFFSET 7.0

#define COORDINATE_SYSTEM_P20_2 8.0         // amap2.0
uniform float u_CoordinateSystem;
varying vec4 v_color;
uniform float u_arrow: 0.0;
uniform float u_linearColor: 0;
uniform vec4 u_sourceColor;
uniform vec4 u_targetColor;

#pragma include "picking"

varying mat4 styleMappingMat;
void main() {
  float distanceAndIndex = styleMappingMat[0][3];
  float miter = styleMappingMat[0][2];

  float opacity = styleMappingMat[0][0];
  float d_distance_ratio = styleMappingMat[3].r; // \u5F53\u524D\u70B9\u4F4D\u8DDD\u79BB\u5360\u7EBF\u603B\u957F\u7684\u6BD4\u4F8B


  if(u_arrow > 0.0 && distanceAndIndex < 2.0) { // arrow
    if(u_CoordinateSystem == COORDINATE_SYSTEM_P20 || u_CoordinateSystem == COORDINATE_SYSTEM_P20_OFFSET) { 
      if(cross(vec3(styleMappingMat[1].rg, 0.0), vec3(styleMappingMat[1].ba, 0.0)).z < 0.0) { // amap
        discard;
      }
    } else { // amap2 mapbox map
      if(cross(vec3(styleMappingMat[1].rg, 0.0), vec3(styleMappingMat[1].ba, 0.0)).z > 0.0) { 
        discard;
      }
    }
  } else { // line body
    if(miter < 0.0) {
      discard;
    }
  }


  if(u_linearColor == 1.0) { // \u4F7F\u7528\u6E10\u53D8\u989C\u8272
    gl_FragColor = mix(u_sourceColor, u_targetColor, d_distance_ratio);
  } else { // \u4F7F\u7528 color \u65B9\u6CD5\u4F20\u5165\u7684\u989C\u8272
    gl_FragColor = v_color;
  }

  gl_FragColor.a *= opacity; // \u5168\u5C40\u900F\u660E\u5EA6
  gl_FragColor = filterColor(gl_FragColor);
}
`,xM=`attribute float a_Miter;
attribute vec4 a_Color;
attribute vec2 a_Size;
attribute vec3 a_Normal;
attribute vec3 a_Position;

// dash line
attribute vec4 a_dirPoints;
attribute vec3 a_DistanceAndIndex;

uniform vec4 u_lineDir;

uniform mat4 u_ModelMatrix;
uniform mat4 u_Mvp;

#pragma include "projection"
#pragma include "picking"

varying vec4 v_color;

uniform float u_linearColor: 0;
uniform float u_arrow: 0.0;
uniform float u_arrowHeight: 3.0;
uniform float u_arrowWidth: 2.0;
uniform float u_tailWidth: 1.0;

uniform float u_opacity: 1.0;
varying mat4 styleMappingMat; // \u7528\u4E8E\u5C06\u5728\u9876\u70B9\u7740\u8272\u5668\u4E2D\u8BA1\u7B97\u597D\u7684\u6837\u5F0F\u503C\u4F20\u9012\u7ED9\u7247\u5143

#pragma include "styleMapping"
#pragma include "styleMappingCalOpacity"

vec2 calculateArrow(vec2 offset) {
  /*
  * \u5728\u652F\u6301\u7BAD\u5934\u7684\u65F6\u5019\uFF0C\u7B2C\u4E8C\u3001\u7B2C\u4E09\u7EC4\u9876\u70B9\u662F\u989D\u5916\u63D2\u5165\u7528\u4E8E\u6784\u5EFA\u9876\u70B9\u7684
  */
  float arrowFlag = -1.0;
  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) {
    // \u9AD8\u5FB7 2.0 \u7684\u65CB\u8F6C\u89D2\u5EA6\u4E0D\u540C
    arrowFlag = 1.0;
  }
  float pi = arrowFlag * 3.1415926/2.;
  if(a_Miter < 0.) {
    // \u6839\u636E\u7EBF\u7684\u4E24\u4FA7\u504F\u79FB\u4E0D\u540C\u3001\u65CB\u8F6C\u7684\u65B9\u5411\u76F8\u53CD
    pi = -pi;
  }
  highp float angle_sin = sin(pi);
  highp float angle_cos = cos(pi);
  // \u8BA1\u7B97\u5782\u76F4\u4E0E\u7EBF\u65B9\u5411\u7684\u65CB\u8F6C\u77E9\u9635
  mat2 rotation_matrix = mat2(angle_cos, -1.0 * angle_sin, angle_sin, angle_cos);
  float arrowWidth = u_arrowWidth;
  float arrowHeight = u_arrowHeight;

  vec2 arrowOffset = vec2(0.0);
  /*
  * a_DistanceAndIndex.y \u7528\u4E8E\u6807\u8BB0\u5F53\u524D\u9876\u70B9\u5C5E\u4E8E\u54EA\u4E00\u7EC4\uFF08\u4E24\u4E2A\u9876\u70B9\u4E00\u7EC4\uFF0C\u6784\u6210\u7EBF\u7684\u5176\u5B9E\u662F\u77E9\u5F62\uFF0C\u6700\u7B80\u9700\u8981\u56DB\u4E2A\u9876\u70B9\u3001\u4E24\u7EC4\u9876\u70B9\u6784\u6210\uFF09
  */
  if(a_DistanceAndIndex.y == 0.0) {
    // \u7BAD\u5934\u5C16\u90E8
    offset = vec2(0.0);
  } else if(a_DistanceAndIndex.y == 1.0) {
    // \u7BAD\u5934\u4E24\u4FA7
    arrowOffset = rotation_matrix*(offset * arrowHeight);
    offset += arrowOffset; // \u6CBF\u7EBF\u504F\u79FB
    offset = offset * arrowWidth; // \u5782\u76F4\u7EBF\u5411\u5916\u504F\u79FB\uFF08\u662F\u6784\u5EFA\u7BAD\u5934\u4E24\u4FA7\u7684\u9876\u70B9\uFF09
  } else if(a_DistanceAndIndex.y == 2.0 || a_DistanceAndIndex.y == 3.0 || a_DistanceAndIndex.y == 4.0) {
    // \u504F\u79FB\u5176\u4F59\u7684\u70B9\u4F4D\uFF08\u5C06\u957F\u5EA6\u8BA9\u4F4D\u7ED9\u7BAD\u5934\uFF09
    arrowOffset = rotation_matrix*(offset * arrowHeight) * arrowWidth;
    offset += arrowOffset;// \u6CBF\u7EBF\u504F\u79FB
  }

  return offset;
}

void main() {
  // cal style mapping - \u6570\u636E\u7EB9\u7406\u6620\u5C04\u90E8\u5206\u7684\u8BA1\u7B97
  styleMappingMat = mat4(
    0.0, 0.0, 0.0, 0.0, // opacity - strokeOpacity - a_Miter - a_DistanceAndIndex
    0.0, 0.0, 0.0, 0.0, // originX - originY - vectorX - vectorY
    0.0, 0.0, 0.0, 0.0, // offsets[0] - offsets[1]
    0.0, 0.0, 0.0, 0.0  // distance_ratio/distance/pixelLen/texV
  );
  styleMappingMat[0][3] = a_DistanceAndIndex.y;
  styleMappingMat[0][2] = a_Miter;

  float rowCount = u_cellTypeLayout[0][0];    // \u5F53\u524D\u7684\u6570\u636E\u7EB9\u7406\u6709\u51E0\u884C
  float columnCount = u_cellTypeLayout[0][1]; // \u5F53\u770B\u5230\u6570\u636E\u7EB9\u7406\u6709\u51E0\u5217
  float columnWidth = 1.0/columnCount;  // \u5217\u5BBD
  float rowHeight = 1.0/rowCount;       // \u884C\u9AD8
  float cellCount = calCellCount(); // opacity - strokeOpacity - strokeWidth - stroke - offsets
  float id = a_vertexId; // \u7B2Cn\u4E2A\u9876\u70B9
  float cellCurrentRow = floor(id * cellCount / columnCount) + 1.0; // \u8D77\u59CB\u70B9\u5728\u7B2C\u51E0\u884C
  float cellCurrentColumn = mod(id * cellCount, columnCount) + 1.0; // \u8D77\u59CB\u70B9\u5728\u7B2C\u51E0\u5217
  
  // cell \u56FA\u5B9A\u987A\u5E8F opacity -> strokeOpacity -> strokeWidth -> stroke ... 
  // \u6309\u987A\u5E8F\u4ECE cell \u4E2D\u53D6\u503C\u3001\u82E5\u6CA1\u6709\u5219\u81EA\u52A8\u5F80\u4E0B\u53D6\u503C
  float textureOffset = 0.0; // \u5728 cell \u4E2D\u53D6\u503C\u7684\u504F\u79FB\u91CF

  vec2 opacityAndOffset = calOpacityAndOffset(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset, columnWidth, rowHeight);
  styleMappingMat[0][0] = opacityAndOffset.r;
  textureOffset = opacityAndOffset.g;
  // cal style mapping - \u6570\u636E\u7EB9\u7406\u6620\u5C04\u90E8\u5206\u7684\u8BA1\u7B97


  v_color = a_Color;

  vec3 size = a_Miter * setPickingSize(a_Size.x) * reverse_offset_normal(a_Normal);
  
  vec2 offset = project_pixel(size.xy);

  // styleMappingMat[1].rg = a_Position.xy + offset;

  vec2 copyOffset = vec2(offset.x, offset.y);

  float lineDistance = a_DistanceAndIndex.x;
  float total_Distance = a_DistanceAndIndex.z;
  float currentLinePointRatio = lineDistance / total_Distance;
 
  if(u_arrow > 0.0) {
      //  \u8BA1\u7B97\u7BAD\u5934
    offset = calculateArrow(offset);

    if(a_DistanceAndIndex.y > 4.0) {
      offset *= mix(1.0, u_tailWidth, currentLinePointRatio);
    }
  }

  float lineOffsetWidth = length(offset + offset * sign(a_Miter)); // \u7EBF\u6A2A\u5411\u504F\u79FB\u7684\u8DDD\u79BB\uFF08\u5411\u4E24\u4FA7\u504F\u79FB\u7684\u548C\uFF09
  float linePixelSize = project_pixel(a_Size.x) * 2.0;  // \u5B9A\u70B9\u4F4D\u7F6E\u504F\u79FB\uFF0C\u6309\u5730\u56FE\u7B49\u7EA7\u7F29\u653E\u540E\u7684\u8DDD\u79BB \u5355\u4FA7 * 2

  // \u8BBE\u7F6E\u6570\u636E\u96C6\u7684\u53C2\u6570
  styleMappingMat[3][0] = currentLinePointRatio; // \u5F53\u524D\u70B9\u4F4D\u8DDD\u79BB\u5360\u7EBF\u603B\u957F\u7684\u6BD4\u4F8B
  styleMappingMat[3][1] = lineDistance;       // \u5F53\u524D\u9876\u70B9\u7684\u8DDD\u79BB

  vec4 project_pos = project_position(vec4(a_Position.xy, 0, 1.0));

  // gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy + offset, a_Size.y, 1.0));

  float h = float(a_Position.z); // \u7EBF\u9876\u70B9\u7684\u9AD8\u5EA6 - \u517C\u5BB9\u4E0D\u5B58\u5728\u7B2C\u4E09\u4E2A\u6570\u503C\u7684\u60C5\u51B5 vertex height
  float lineHeight = a_Size.y; // size \u7B2C\u4E8C\u4E2A\u53C2\u6570\u4EE3\u8868\u7684\u9AD8\u5EA6 [linewidth, lineheight]

  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x
    lineHeight *= 0.2; // \u4FDD\u6301\u548C amap/mapbox \u4E00\u81F4\u7684\u6548\u679C
    gl_Position = u_Mvp * (vec4(project_pos.xy + offset, lineHeight, 1.0));
  } else {
    gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy + offset, lineHeight, 1.0));
  }
  
  if(u_arrow > 0.0 && a_DistanceAndIndex.y < 2.0) {
    vec2 startPoint = a_dirPoints.rg;
    vec2 endPoint = a_dirPoints.ba;
    vec4 t1 = project_position(vec4(startPoint, 0, 1.0));
    vec4 t2 = project_position(vec4(endPoint, 0, 1.0));
    // TODO\uFF1A \u540E\u7EED\u4F18\u5316\u53EF\u4EE5\u628A\u4F4D\u7F6E\u8BA1\u7B97\u653E\u5728 cpu \u4E2D\u5B8C\u6210
    if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x
      vec2 p1 = (u_Mvp * vec4(t1.xy, 0.0, 1.0)).xy;
      vec2 p2 = (u_Mvp * vec4(t2.xy, 0.0, 1.0)).xy;
      styleMappingMat[1].rg = normalize(p1 - p2);
      styleMappingMat[1].ba = normalize(gl_Position.xy - p2);
    } else {
      vec2 p1 = project_common_position_to_clipspace(vec4(t1.xy, 0.0, 1.0)).xy;
      vec2 p2 = project_common_position_to_clipspace(vec4(t2.xy, 0.0, 1.0)).xy;
      styleMappingMat[1].rg = normalize(p1 - p2);
      styleMappingMat[1].ba = normalize(gl_Position.xy - p2);
    }
  }

  setPickingColor(a_PickingColor);
}
`,bM=function(e){(0,ui.Z)(t,e);var i=gM(t);function t(){return(0,Ur.Z)(this,t),i.apply(this,arguments)}return(0,Jr.Z)(t,[{key:"getUninforms",value:function(){var r=this.layer.getLayerConfig(),o=r.opacity,u=o===void 0?1:o,f=r.sourceColor,g=r.targetColor,x=r.arrow,I=x===void 0?{enable:!1,arrowWidth:2,arrowHeight:3,tailWidth:1}:x,P=0,G=[0,0,0,0],$=[0,0,0,0];if(f&&g&&(G=co(f),$=co(g),P=1),this.dataTextureTest&&this.dataTextureNeedUpdate({opacity:u})){this.judgeStyleAttributes({opacity:u});var Ee=this.layer.getEncodedData(),Se=this.calDataFrame(this.cellLength,Ee,this.cellProperties),Re=Se.data,Ye=Se.width,St=Se.height;this.rowCount=St,this.dataTexture=this.cellLength>0&&Re.length>0?this.createTexture2D({flipY:!0,data:Re,format:$e.LUMINANCE,type:$e.FLOAT,width:Ye,height:St}):this.createTexture2D({flipY:!0,data:[1],format:$e.LUMINANCE,type:$e.FLOAT,width:1,height:1})}return{u_dataTexture:this.dataTexture,u_cellTypeLayout:this.getCellTypeLayout(),u_opacity:(0,Wr.isNumber)(u)?u:1,u_linearColor:P,u_sourceColor:G,u_targetColor:$,u_arrow:Number(I.enable),u_arrowHeight:I.arrowHeight||3,u_arrowWidth:I.arrowWidth||2,u_tailWidth:I.tailWidth===void 0?1:I.tailWidth}}},{key:"initModels",value:function(){var n=(0,An.Z)(Nt().mark(function o(){return Nt().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return f.next=2,this.buildModels();case 2:return f.abrupt("return",f.sent);case 3:case"end":return f.stop()}},o,this)}));function r(){return n.apply(this,arguments)}return r}()},{key:"clearModels",value:function(){var r;(r=this.dataTexture)===null||r===void 0||r.destroy()}},{key:"buildModels",value:function(){var n=(0,An.Z)(Nt().mark(function o(){var u,f,g,x,I,P,G,$,Ee,Se,Re;return Nt().wrap(function(St){for(;;)switch(St.prev=St.next){case 0:return u=this.layer.getLayerConfig(),f=u.mask,g=f===void 0?!1:f,x=u.maskInside,I=x===void 0?!0:x,P=u.depth,G=P===void 0?!1:P,$=this.getShaders(),Ee=$.frag,Se=$.vert,this.layer.triangulation=yv,St.next=5,this.layer.buildLayerModel({moduleName:"lineHalf",vertexShader:Se,fragmentShader:Ee,triangulation:yv,depth:{enable:G},blend:this.getBlend(),stencil:zo(g,I)});case 5:return Re=St.sent,St.abrupt("return",[Re]);case 7:case"end":return St.stop()}},o,this)}));function r(){return n.apply(this,arguments)}return r}()},{key:"getShaders",value:function(){return{frag:_M,vert:xM,type:"normal"}}},{key:"registerBuiltinAttributes",value:function(){this.styleAttributeService.registerStyleAttribute({name:"distanceAndIndex",type:ja.Attribute,descriptor:{name:"a_DistanceAndIndex",buffer:{usage:$e.STATIC_DRAW,data:[],type:$e.FLOAT},size:3,update:function(o,u,f,g,x,I){return I===void 0?[f[3],10,f[5]]:[f[3],I,f[5]]}}}),this.styleAttributeService.registerStyleAttribute({name:"dirPoints",type:ja.Attribute,descriptor:{name:"a_dirPoints",buffer:{usage:$e.STATIC_DRAW,data:[],type:$e.FLOAT},size:4,update:function(o){var u=o.coordinates[0]||[0,0],f=o.coordinates[3]||[0,0];return[u[0],u[1],f[0],f[1]]}}}),this.styleAttributeService.registerStyleAttribute({name:"size",type:ja.Attribute,descriptor:{name:"a_Size",buffer:{usage:$e.DYNAMIC_DRAW,data:[],type:$e.FLOAT},size:2,update:function(o){var u=o.size,f=u===void 0?1:u;return Array.isArray(f)?[f[0],f[1]]:[f,0]}}}),this.styleAttributeService.registerStyleAttribute({name:"normal",type:ja.Attribute,descriptor:{name:"a_Normal",buffer:{usage:$e.STATIC_DRAW,data:[],type:$e.FLOAT},size:3,update:function(o,u,f,g,x){return x}}}),this.styleAttributeService.registerStyleAttribute({name:"miter",type:ja.Attribute,descriptor:{name:"a_Miter",buffer:{usage:$e.STATIC_DRAW,data:[],type:$e.FLOAT},size:1,update:function(o,u,f){return[f[4]]}}})}}]),t}(Sl),Kx;(function(e){e[e.solid=0]="solid",e[e.dash=1]="dash"})(Kx||(Kx={}));var qv;(function(e){e.VERTICAL="vertical",e.HORIZONTAL="horizontal"})(qv||(qv={}));var Yg;(function(e){e.NORMAL="normal",e.REPLACE="replace"})(Yg||(Yg={}));var Qx;(function(e){e.ALWAYS="always",e.DRAGEND="dragend"})(Qx||(Qx={}));function EM(e){var i=SM();return function(){var n=(0,rr.Z)(e),r;if(i){var o=(0,rr.Z)(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return(0,jn.Z)(this,r)}}function SM(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var wM=`#define LineTypeSolid 0.0
uniform float u_opacity : 1.0;

varying vec4 v_color;

// dash
varying vec4 v_dash_array;

#pragma include "picking"

uniform float u_time;
uniform vec4 u_animate: [ 1., 2., 1.0, 0.2 ]; // \u63A7\u5236\u8FD0\u52A8

varying mat4 styleMappingMat;
// [animate, duration, interval, trailLength],
void main() {
  float opacity = styleMappingMat[0][0];
  float d_distance_ratio = styleMappingMat[3].r; // \u5F53\u524D\u70B9\u4F4D\u8DDD\u79BB\u5360\u7EBF\u603B\u957F\u7684\u6BD4\u4F8B
  gl_FragColor = v_color;
  gl_FragColor.a *= opacity; // \u5168\u5C40\u900F\u660E\u5EA6
 
  float dashLength = mod(d_distance_ratio, v_dash_array.x + v_dash_array.y + v_dash_array.z + v_dash_array.w);
  if(dashLength < v_dash_array.x || (dashLength > (v_dash_array.x + v_dash_array.y) && dashLength <  v_dash_array.x + v_dash_array.y + v_dash_array.z)) {
    // \u5B9E\u7EBF\u90E8\u5206
  } else {
    // \u865A\u7EBF\u90E8\u5206
    discard;
  };

  gl_FragColor = filterColor(gl_FragColor);
}
`,AM=`#define LineTypeSolid 0.0
#define LineTypeDash 1.0
#define Animate 0.0

attribute float a_Miter;
attribute vec4 a_Color;
attribute vec2 a_Size;
attribute vec3 a_Normal;
attribute vec3 a_Position;

attribute vec2 a_iconMapUV;

// dash line
attribute float a_Total_Distance;
attribute vec2 a_DistanceAndIndex;

uniform mat4 u_ModelMatrix;
uniform mat4 u_Mvp;
uniform vec4 u_dash_array: [10.0, 5., 0, 0];

uniform float u_vertexScale: 1.0;

#pragma include "projection"
#pragma include "picking"

varying vec4 v_color;
varying vec4 v_dash_array;

uniform float u_opacity: 1.0;
varying mat4 styleMappingMat; // \u7528\u4E8E\u5C06\u5728\u9876\u70B9\u7740\u8272\u5668\u4E2D\u8BA1\u7B97\u597D\u7684\u6837\u5F0F\u503C\u4F20\u9012\u7ED9\u7247\u5143

#pragma include "styleMapping"
#pragma include "styleMappingCalOpacity"

void main() {
  // cal style mapping - \u6570\u636E\u7EB9\u7406\u6620\u5C04\u90E8\u5206\u7684\u8BA1\u7B97
  styleMappingMat = mat4(
    0.0, 0.0, 0.0, 0.0, // opacity - strokeOpacity - strokeWidth - empty
    0.0, 0.0, 0.0, 0.0, // strokeR - strokeG - strokeB - strokeA
    0.0, 0.0, 0.0, 0.0, // offsets[0] - offsets[1]
    0.0, 0.0, 0.0, 0.0  // distance_ratio/distance/pixelLen/texV
  );

  float rowCount = u_cellTypeLayout[0][0];    // \u5F53\u524D\u7684\u6570\u636E\u7EB9\u7406\u6709\u51E0\u884C
  float columnCount = u_cellTypeLayout[0][1]; // \u5F53\u770B\u5230\u6570\u636E\u7EB9\u7406\u6709\u51E0\u5217
  float columnWidth = 1.0/columnCount;  // \u5217\u5BBD
  float rowHeight = 1.0/rowCount;       // \u884C\u9AD8
  float cellCount = calCellCount(); // opacity - strokeOpacity - strokeWidth - stroke - offsets
  float id = a_vertexId; // \u7B2Cn\u4E2A\u9876\u70B9
  float cellCurrentRow = floor(id * cellCount / columnCount) + 1.0; // \u8D77\u59CB\u70B9\u5728\u7B2C\u51E0\u884C
  float cellCurrentColumn = mod(id * cellCount, columnCount) + 1.0; // \u8D77\u59CB\u70B9\u5728\u7B2C\u51E0\u5217
  
  // cell \u56FA\u5B9A\u987A\u5E8F opacity -> strokeOpacity -> strokeWidth -> stroke ... 
  // \u6309\u987A\u5E8F\u4ECE cell \u4E2D\u53D6\u503C\u3001\u82E5\u6CA1\u6709\u5219\u81EA\u52A8\u5F80\u4E0B\u53D6\u503C
  float textureOffset = 0.0; // \u5728 cell \u4E2D\u53D6\u503C\u7684\u504F\u79FB\u91CF

  vec2 opacityAndOffset = calOpacityAndOffset(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset, columnWidth, rowHeight);
  styleMappingMat[0][0] = opacityAndOffset.r;
  textureOffset = opacityAndOffset.g;
  // cal style mapping - \u6570\u636E\u7EB9\u7406\u6620\u5C04\u90E8\u5206\u7684\u8BA1\u7B97

  v_dash_array = pow(2.0, 20.0 - u_Zoom) * u_dash_array / a_Total_Distance;
  v_color = a_Color;

  vec3 size = a_Miter * setPickingSize(a_Size.x) * reverse_offset_normal(a_Normal);
  vec2 offset = project_pixel(size.xy);

  // \u8BBE\u7F6E\u6570\u636E\u96C6\u7684\u53C2\u6570
  styleMappingMat[3][0] = a_DistanceAndIndex.x / a_Total_Distance; // \u5F53\u524D\u70B9\u4F4D\u8DDD\u79BB\u5360\u7EBF\u603B\u957F\u7684\u6BD4\u4F8B
  styleMappingMat[3][1] = a_DistanceAndIndex.x;       // \u5F53\u524D\u9876\u70B9\u7684\u8DDD\u79BB

  vec4 project_pos = project_position(vec4(a_Position.xy, 0, 1.0));

  // gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy + offset, a_Size.y, 1.0));

  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x
    gl_Position = u_Mvp * (vec4(project_pos.xy + offset, project_pixel(a_Size.y), 1.0));
  } else {
    float lineHeight = a_Size.y;
 
    // #define COORDINATE_SYSTEM_P20 5.0
    // #define COORDINATE_SYSTEM_P20_OFFSET 6.0
    // amap1.x
    if(u_CoordinateSystem == COORDINATE_SYSTEM_P20 || u_CoordinateSystem == COORDINATE_SYSTEM_P20_OFFSET) {
      // \u4FDD\u6301\u9AD8\u5EA6\u76F8\u5BF9\u4E0D\u53D8
      lineHeight *= pow(2.0, 20.0 - u_Zoom);
    }

    gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy + offset, lineHeight, 1.0));
  }

  setPickingColor(a_PickingColor);
}
`,CM=`#define Animate 0.0
#define LineTexture 1.0
uniform float u_opacity : 1.0;
uniform float u_textureBlend;

uniform float u_borderWidth: 0.0;

uniform vec3 u_blur;
uniform vec4 u_borderColor;
varying vec4 v_color;

// line texture
uniform float u_line_texture;
uniform sampler2D u_texture;
uniform vec2 u_textSize;

varying vec2 v_iconMapUV;

#pragma include "picking"

uniform float u_time;
uniform vec4 u_animate: [ 1, 2., 1.0, 0.2 ]; // \u63A7\u5236\u8FD0\u52A8

varying mat4 styleMappingMat;
// [animate, duration, interval, trailLength],
void main() {
  float opacity = styleMappingMat[0][0];
  float animateSpeed = 0.0; // \u8FD0\u52A8\u901F\u5EA6
  float d_distance_ratio = styleMappingMat[3].r; // \u5F53\u524D\u70B9\u4F4D\u8DDD\u79BB\u5360\u7EBF\u603B\u957F\u7684\u6BD4\u4F8B
  gl_FragColor = v_color;
  // anti-alias
  // float blur = 1.0 - smoothstep(u_blur, 1., length(v_normal.xy));
  gl_FragColor.a *= opacity; // \u5168\u5C40\u900F\u660E\u5EA6
  if(u_animate.x == Animate) {
      animateSpeed = u_time / u_animate.y;
       float alpha =1.0 - fract( mod(1.0- d_distance_ratio, u_animate.z)* (1.0/ u_animate.z) + animateSpeed);
      alpha = (alpha + u_animate.w -1.0) / u_animate.w;
      alpha = smoothstep(0., 1., alpha);
      gl_FragColor.a *= alpha;
  }

  if(u_line_texture == LineTexture) { // while load texture
    float aDistance = styleMappingMat[3].g;      // \u5F53\u524D\u9876\u70B9\u7684\u8DDD\u79BB
    float d_texPixelLen = styleMappingMat[3].b;  // \u8D34\u56FE\u7684\u50CF\u7D20\u957F\u5EA6\uFF0C\u6839\u636E\u5730\u56FE\u5C42\u7EA7\u7F29\u653E
    float u = fract(mod(aDistance, d_texPixelLen)/d_texPixelLen - animateSpeed);
    float v = styleMappingMat[3].a;  // \u7EBF\u56FE\u5C42\u8D34\u56FE\u90E8\u5206\u7684 v \u5750\u6807\u503C

    // v = max(smoothstep(0.95, 1.0, v), v);
    vec2 uv= v_iconMapUV / u_textSize + vec2(u, v) / u_textSize * 64.;
    
    // gl_FragColor = filterColor(gl_FragColor + texture2D(u_texture, vec2(u, v)));
    // gl_FragColor = filterColor(gl_FragColor + texture2D(u_texture, uv));
     vec4 pattern = texture2D(u_texture, uv);

    if(u_textureBlend == 0.0) { // normal
      pattern.a = 0.0;
      gl_FragColor += pattern;
    } else { // replace
        pattern.a *= opacity;
        if(gl_FragColor.a <= 0.0) {
          pattern.a = 0.0;
        }
        gl_FragColor = pattern;
    }
  } 

  float v = styleMappingMat[3].a;
  float borderWidth = min(0.5, u_borderWidth);
  // \u7ED8\u5236 border
  if(borderWidth > 0.01) {
    float borderOuterWidth = borderWidth/2.0;

    if(v >= 1.0 - borderWidth || v <= borderWidth) {
      if(v > borderWidth) {
        float linear = smoothstep(0.0, 1.0, (v - (1.0 - borderWidth))/borderWidth);
        gl_FragColor.rgb = mix(gl_FragColor.rgb, u_borderColor.rgb, linear);
      } else if(v <= borderWidth) {
        float linear = smoothstep(0.0, 1.0, v/borderWidth);
        gl_FragColor.rgb = mix(u_borderColor.rgb, gl_FragColor.rgb, linear);
      }
    }

    if(v < borderOuterWidth) {
      gl_FragColor.a = mix(0.0, gl_FragColor.a, v/borderOuterWidth);
    } else if(v > 1.0 - borderOuterWidth) {
      gl_FragColor.a = mix(gl_FragColor.a, 0.0, (v - (1.0 - borderOuterWidth))/borderOuterWidth);
    }
  }

  // blur
  float blurV = styleMappingMat[3][3];
  if(blurV < 0.5) {
    gl_FragColor.a *= mix(u_blur.r, u_blur.g, blurV/0.5);
  } else {
    gl_FragColor.a *= mix(u_blur.g, u_blur.b, (blurV - 0.5)/0.5);
  }
  
  gl_FragColor = filterColor(gl_FragColor);
}
`,Jx=`
#define Animate 0.0

attribute float a_Miter;
attribute vec4 a_Color;
attribute vec2 a_Size;
attribute vec3 a_Normal;
attribute vec3 a_Position;

attribute vec2 a_iconMapUV;

// dash line
attribute float a_Total_Distance;
attribute vec2 a_DistanceAndIndex;

uniform mat4 u_ModelMatrix;
uniform mat4 u_Mvp;
uniform vec4 u_animate: [ 1., 2., 1.0, 0.2 ];
uniform float u_icon_step: 100;

uniform float u_heightfixed: 0.0;
uniform float u_vertexScale: 1.0;
uniform float u_raisingHeight: 0.0;

#pragma include "projection"
#pragma include "picking"

varying vec4 v_color;

// texV \u7EBF\u56FE\u5C42 - \u8D34\u56FE\u90E8\u5206\u7684 v \u5750\u6807\uFF08\u7EBF\u7684\u5BBD\u5EA6\u65B9\u5411\uFF09
varying vec2 v_iconMapUV;


uniform float u_linearColor: 0;
uniform float u_arrow: 0.0;
uniform float u_arrowHeight: 3.0;
uniform float u_arrowWidth: 2.0;
uniform float u_tailWidth: 1.0;

uniform float u_opacity: 1.0;
varying mat4 styleMappingMat; // \u7528\u4E8E\u5C06\u5728\u9876\u70B9\u7740\u8272\u5668\u4E2D\u8BA1\u7B97\u597D\u7684\u6837\u5F0F\u503C\u4F20\u9012\u7ED9\u7247\u5143

#pragma include "styleMapping"
#pragma include "styleMappingCalOpacity"

vec2 calculateArrow(vec2 offset) {
  /*
  * \u5728\u652F\u6301\u7BAD\u5934\u7684\u65F6\u5019\uFF0C\u7B2C\u4E8C\u3001\u7B2C\u4E09\u7EC4\u9876\u70B9\u662F\u989D\u5916\u63D2\u5165\u7528\u4E8E\u6784\u5EFA\u9876\u70B9\u7684
  */
  float arrowFlag = -1.0;
  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) {
    // \u9AD8\u5FB7 2.0 \u7684\u65CB\u8F6C\u89D2\u5EA6\u4E0D\u540C
    arrowFlag = 1.0;
  }
  float pi = arrowFlag * 3.1415926/2.;
  if(a_Miter < 0.) {
    // \u6839\u636E\u7EBF\u7684\u4E24\u4FA7\u504F\u79FB\u4E0D\u540C\u3001\u65CB\u8F6C\u7684\u65B9\u5411\u76F8\u53CD
    pi = -pi;
  }
  highp float angle_sin = sin(pi);
  highp float angle_cos = cos(pi);
  // \u8BA1\u7B97\u5782\u76F4\u4E0E\u7EBF\u65B9\u5411\u7684\u65CB\u8F6C\u77E9\u9635
  mat2 rotation_matrix = mat2(angle_cos, -1.0 * angle_sin, angle_sin, angle_cos);
  float arrowWidth = u_arrowWidth;
  float arrowHeight = u_arrowHeight;

  vec2 arrowOffset = vec2(0.0);
  /*
  * a_DistanceAndIndex.y \u7528\u4E8E\u6807\u8BB0\u5F53\u524D\u9876\u70B9\u5C5E\u4E8E\u54EA\u4E00\u7EC4\uFF08\u4E24\u4E2A\u9876\u70B9\u4E00\u7EC4\uFF0C\u6784\u6210\u7EBF\u7684\u5176\u5B9E\u662F\u77E9\u5F62\uFF0C\u6700\u7B80\u9700\u8981\u56DB\u4E2A\u9876\u70B9\u3001\u4E24\u7EC4\u9876\u70B9\u6784\u6210\uFF09
  */
  if(a_DistanceAndIndex.y == 0.0) {
    // \u7BAD\u5934\u5C16\u90E8
    offset = vec2(0.0);
  } else if(a_DistanceAndIndex.y == 1.0) {
    // \u7BAD\u5934\u4E24\u4FA7
    arrowOffset = rotation_matrix*(offset * arrowHeight);
    offset += arrowOffset; // \u6CBF\u7EBF\u504F\u79FB
    offset = offset * arrowWidth; // \u5782\u76F4\u7EBF\u5411\u5916\u504F\u79FB\uFF08\u662F\u6784\u5EFA\u7BAD\u5934\u4E24\u4FA7\u7684\u9876\u70B9\uFF09
  } else if(a_DistanceAndIndex.y == 2.0 || a_DistanceAndIndex.y == 3.0 || a_DistanceAndIndex.y == 4.0) {
    // \u504F\u79FB\u5176\u4F59\u7684\u70B9\u4F4D\uFF08\u5C06\u957F\u5EA6\u8BA9\u4F4D\u7ED9\u7BAD\u5934\uFF09
    arrowOffset = rotation_matrix*(offset * arrowHeight) * arrowWidth;
    offset += arrowOffset;// \u6CBF\u7EBF\u504F\u79FB
  }

  return offset;
}

void main() {
  // cal style mapping - \u6570\u636E\u7EB9\u7406\u6620\u5C04\u90E8\u5206\u7684\u8BA1\u7B97
  styleMappingMat = mat4(
    0.0, 0.0, 0.0, 0.0, // opacity - strokeOpacity - strokeWidth - empty
    0.0, 0.0, 0.0, 0.0, // strokeR - strokeG - strokeB - strokeA
    0.0, 0.0, 0.0, 0.0, // offsets[0] - offsets[1]
    0.0, 0.0, 0.0, 0.0  // distance_ratio/distance/pixelLen/texV
  );

  float rowCount = u_cellTypeLayout[0][0];    // \u5F53\u524D\u7684\u6570\u636E\u7EB9\u7406\u6709\u51E0\u884C
  float columnCount = u_cellTypeLayout[0][1]; // \u5F53\u770B\u5230\u6570\u636E\u7EB9\u7406\u6709\u51E0\u5217
  float columnWidth = 1.0/columnCount;  // \u5217\u5BBD
  float rowHeight = 1.0/rowCount;       // \u884C\u9AD8
  float cellCount = calCellCount(); // opacity - strokeOpacity - strokeWidth - stroke - offsets
  float id = a_vertexId; // \u7B2Cn\u4E2A\u9876\u70B9
  float cellCurrentRow = floor(id * cellCount / columnCount) + 1.0; // \u8D77\u59CB\u70B9\u5728\u7B2C\u51E0\u884C
  float cellCurrentColumn = mod(id * cellCount, columnCount) + 1.0; // \u8D77\u59CB\u70B9\u5728\u7B2C\u51E0\u5217
  
  // cell \u56FA\u5B9A\u987A\u5E8F opacity -> strokeOpacity -> strokeWidth -> stroke ... 
  // \u6309\u987A\u5E8F\u4ECE cell \u4E2D\u53D6\u503C\u3001\u82E5\u6CA1\u6709\u5219\u81EA\u52A8\u5F80\u4E0B\u53D6\u503C
  float textureOffset = 0.0; // \u5728 cell \u4E2D\u53D6\u503C\u7684\u504F\u79FB\u91CF

  vec2 opacityAndOffset = calOpacityAndOffset(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset, columnWidth, rowHeight);
  styleMappingMat[0][0] = opacityAndOffset.r;
  textureOffset = opacityAndOffset.g;
  // cal style mapping - \u6570\u636E\u7EB9\u7406\u6620\u5C04\u90E8\u5206\u7684\u8BA1\u7B97

  float d_texPixelLen;    // \u8D34\u56FE\u7684\u50CF\u7D20\u957F\u5EA6\uFF0C\u6839\u636E\u5730\u56FE\u5C42\u7EA7\u7F29\u653E

  v_iconMapUV = a_iconMapUV;
  d_texPixelLen = project_float_pixel(u_icon_step);
  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) {
    d_texPixelLen *= 10.0;
  }

  v_color = a_Color;

  vec3 size = a_Miter * setPickingSize(a_Size.x) * reverse_offset_normal(a_Normal);
  
  vec2 offset = project_pixel(size.xy);

  float lineDistance = a_DistanceAndIndex.x;
  float currentLinePointRatio = lineDistance / a_Total_Distance;
 
  if(u_arrow > 0.0) {
      //  \u8BA1\u7B97\u7BAD\u5934
    offset = calculateArrow(offset);

    if(a_DistanceAndIndex.y > 4.0) {
      offset *= mix(1.0, u_tailWidth, currentLinePointRatio);
    }
  }

  float lineOffsetWidth = length(offset + offset * sign(a_Miter)); // \u7EBF\u6A2A\u5411\u504F\u79FB\u7684\u8DDD\u79BB\uFF08\u5411\u4E24\u4FA7\u504F\u79FB\u7684\u548C\uFF09
  float linePixelSize = project_pixel(a_Size.x) * 2.0;  // \u5B9A\u70B9\u4F4D\u7F6E\u504F\u79FB\uFF0C\u6309\u5730\u56FE\u7B49\u7EA7\u7F29\u653E\u540E\u7684\u8DDD\u79BB \u5355\u4FA7 * 2
  float texV = lineOffsetWidth/linePixelSize; // \u7EBF\u56FE\u5C42\u8D34\u56FE\u90E8\u5206\u7684 v \u5750\u6807\u503C

  // \u8BBE\u7F6E\u6570\u636E\u96C6\u7684\u53C2\u6570
  styleMappingMat[3][0] = currentLinePointRatio; // \u5F53\u524D\u70B9\u4F4D\u8DDD\u79BB\u5360\u7EBF\u603B\u957F\u7684\u6BD4\u4F8B
  styleMappingMat[3][1] = lineDistance;       // \u5F53\u524D\u9876\u70B9\u7684\u8DDD\u79BB
  styleMappingMat[3][2] = d_texPixelLen;    // \u8D34\u56FE\u7684\u50CF\u7D20\u957F\u5EA6\uFF0C\u6839\u636E\u5730\u56FE\u5C42\u7EA7\u7F29\u653E
  styleMappingMat[3][3] = texV;             // \u7EBF\u56FE\u5C42\u8D34\u56FE\u90E8\u5206\u7684 v \u5750\u6807\u503C

  vec4 project_pos = project_position(vec4(a_Position.xy, 0, 1.0));

  // gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy + offset, a_Size.y, 1.0));

  float h = float(a_Position.z) * u_vertexScale; // \u7EBF\u9876\u70B9\u7684\u9AD8\u5EA6 - \u517C\u5BB9\u4E0D\u5B58\u5728\u7B2C\u4E09\u4E2A\u6570\u503C\u7684\u60C5\u51B5 vertex height
  float lineHeight = a_Size.y; // size \u7B2C\u4E8C\u4E2A\u53C2\u6570\u4EE3\u8868\u7684\u9AD8\u5EA6 [linewidth, lineheight]

  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x
    lineHeight *= 0.2; // \u4FDD\u6301\u548C amap/mapbox \u4E00\u81F4\u7684\u6548\u679C
    h *= 0.2;
    if(u_heightfixed < 1.0) {
      lineHeight = project_pixel(a_Size.y);
    }
    gl_Position = u_Mvp * (vec4(project_pos.xy + offset, lineHeight + h + u_raisingHeight, 1.0));
  } else {
    // mapbox -  amap
    
    // \u517C\u5BB9 mapbox \u5728\u7EBF\u9AD8\u5EA6\u4E0A\u7684\u6548\u679C\u8868\u73B0\u57FA\u672C\u4E00\u81F4
    if(u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT || u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {
      // mapbox
      // \u4FDD\u6301\u9AD8\u5EA6\u76F8\u5BF9\u4E0D\u53D8
      float mapboxZoomScale = 4.0/pow(2.0, 21.0 - u_Zoom);
      h *= mapboxZoomScale;
      h += u_raisingHeight * mapboxZoomScale;
      if(u_heightfixed > 0.0) {
        lineHeight *= mapboxZoomScale;
      }
      
    } else {
      // amap
      h += u_raisingHeight;
      // lineHeight \u9876\u70B9\u504F\u79FB\u9AD8\u5EA6
      if(u_heightfixed < 1.0) {
        lineHeight *= pow(2.0, 20.0 - u_Zoom);
      }
    }

    gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy + offset, lineHeight + h, 1.0));
  }

  setPickingColor(a_PickingColor);
}
`,TM=`varying vec4 v_color;
uniform float u_linearDir: 1.0;
uniform float u_linearColor: 0;
uniform vec4 u_sourceColor;
uniform vec4 u_targetColor;

#pragma include "picking"


varying mat4 styleMappingMat;

void main() {
  float opacity = styleMappingMat[0][0];
  float linearRadio = styleMappingMat[3][0]; // \u5F53\u524D\u70B9\u4F4D\u8DDD\u79BB\u5360\u7EBF\u603B\u957F\u7684\u6BD4\u4F8B
  if(u_linearDir < 1.0) {
    linearRadio = styleMappingMat[3][3];
  }

  if(u_linearColor == 1.0) { // \u4F7F\u7528\u6E10\u53D8\u989C\u8272
    gl_FragColor = mix(u_sourceColor, u_targetColor, linearRadio);
  } else { // \u4F7F\u7528 color \u65B9\u6CD5\u4F20\u5165\u7684\u989C\u8272
     gl_FragColor = v_color;
  }

  gl_FragColor.a *= opacity; // \u5168\u5C40\u900F\u660E\u5EA6
  gl_FragColor = filterColor(gl_FragColor);
}
`,MM={solid:0,dash:1},qx=function(e){(0,ui.Z)(t,e);var i=EM(t);function t(){var n;(0,Ur.Z)(this,t);for(var r=arguments.length,o=new Array(r),u=0;u<r;u++)o[u]=arguments[u];return n=i.call.apply(i,[this].concat(o)),(0,He.Z)((0,er.Z)(n),"texture",n.createTexture2D({data:[0,0,0,0],mag:$e.NEAREST,min:$e.NEAREST,premultiplyAlpha:!1,width:1,height:1})),(0,He.Z)((0,er.Z)(n),"dataTexture",n.createTexture2D({flipY:!0,data:[1],format:$e.LUMINANCE,type:$e.FLOAT,width:1,height:1})),(0,He.Z)((0,er.Z)(n),"updateTexture",function(){var f=n.rendererService.createTexture2D;if(n.texture){n.texture.update({data:n.iconService.getCanvas()}),n.layer.render();return}n.texture=f({data:n.iconService.getCanvas(),mag:$e.NEAREST,min:$e.NEAREST,premultiplyAlpha:!1,width:1024,height:n.iconService.canvasHeight||128})}),n}return(0,Jr.Z)(t,[{key:"getUninforms",value:function(){var r=this.layer.getLayerConfig(),o=r.opacity,u=o===void 0?1:o,f=r.sourceColor,g=r.targetColor,x=r.textureBlend,I=x===void 0?"normal":x,P=r.lineType,G=P===void 0?"solid":P,$=r.dashArray,Ee=$===void 0?[10,5,0,0]:$,Se=r.lineTexture,Re=Se===void 0?!1:Se,Ye=r.iconStep,St=Ye===void 0?100:Ye,vt=r.vertexHeightScale,Ut=vt===void 0?20:vt,Kt=r.borderWidth,Tr=Kt===void 0?0:Kt,on=r.borderColor,dn=on===void 0?"#ccc":on,vn=r.raisingHeight,si=vn===void 0?0:vn,ai=r.heightfixed,Hi=ai===void 0?!1:ai,wa=r.linearDir,qa=wa===void 0?qv.VERTICAL:wa,zs=r.blur,Ou=zs===void 0?[1,1,1]:zs,Ul=r.arrow,Gl=Ul===void 0?{enable:!1,arrowWidth:2,arrowHeight:3,tailWidth:1}:Ul;Ee.length===2&&Ee.push(0,0),this.rendererService.getDirty()&&this.texture&&this.texture.bind();var Ic=0,Eh=[0,0,0,0],W0=[0,0,0,0];if(f&&g&&(Eh=co(f),W0=co(g),Ic=1),this.dataTextureTest&&this.dataTextureNeedUpdate({opacity:u})){this.judgeStyleAttributes({opacity:u});var c0=this.layer.getEncodedData(),$0=this.calDataFrame(this.cellLength,c0,this.cellProperties),tg=$0.data,Ly=$0.width,rg=$0.height;this.rowCount=rg,this.dataTexture=this.cellLength>0&&tg.length>0?this.createTexture2D({flipY:!0,data:tg,format:$e.LUMINANCE,type:$e.FLOAT,width:Ly,height:rg}):this.createTexture2D({flipY:!0,data:[1],format:$e.LUMINANCE,type:$e.FLOAT,width:1,height:1})}return{u_dataTexture:this.dataTexture,u_cellTypeLayout:this.getCellTypeLayout(),u_opacity:(0,Wr.isNumber)(u)?u:1,u_textureBlend:I===Yg.NORMAL?0:1,u_line_type:MM[G],u_dash_array:Ee,u_blur:Ou,u_texture:this.texture,u_line_texture:Re?1:0,u_icon_step:St,u_textSize:[1024,this.iconService.canvasHeight||128],u_borderWidth:Tr,u_borderColor:co(dn),u_linearDir:qa===qv.VERTICAL?1:0,u_linearColor:Ic,u_sourceColor:Eh,u_targetColor:W0,u_heightfixed:Number(Hi),u_vertexScale:Ut,u_raisingHeight:Number(si),u_arrow:Number(Gl.enable),u_arrowHeight:Gl.arrowHeight||3,u_arrowWidth:Gl.arrowWidth||2,u_tailWidth:Gl.tailWidth===void 0?1:Gl.tailWidth}}},{key:"getAnimateUniforms",value:function(){var r=this.layer.getLayerConfig(),o=r.animateOption;return{u_animate:this.animateOption2Array(o),u_time:this.layer.getLayerAnimateTime()}}},{key:"initModels",value:function(){var n=(0,An.Z)(Nt().mark(function o(){return Nt().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return f.next=2,this.buildModels();case 2:return f.abrupt("return",f.sent);case 3:case"end":return f.stop()}},o,this)}));function r(){return n.apply(this,arguments)}return r}()},{key:"clearModels",value:function(){var r,o;(r=this.texture)===null||r===void 0||r.destroy(),(o=this.dataTexture)===null||o===void 0||o.destroy(),this.iconService.off("imageUpdate",this.updateTexture)}},{key:"buildModels",value:function(){var n=(0,An.Z)(Nt().mark(function o(){var u,f,g,x,I,P,G,$,Ee,Se,Re,Ye,St,vt,Ut;return Nt().wrap(function(Tr){for(;;)switch(Tr.prev=Tr.next){case 0:return u=this.layer.getLayerConfig(),f=u.mask,g=f===void 0?!1:f,x=u.maskInside,I=x===void 0?!0:x,P=u.depth,G=P===void 0?!1:P,$=u.workerEnabled,Ee=$===void 0?!1:$,Se=u.enablePicking,Re=this.getShaders(),Ye=Re.frag,St=Re.vert,vt=Re.type,this.layer.triangulation=Nr,Tr.next=5,this.layer.buildLayerModel({moduleName:"line"+vt,vertexShader:St,fragmentShader:Ye,triangulation:Nr,depth:{enable:G},blend:this.getBlend(),stencil:zo(g,I),workerEnabled:Ee,workerOptions:{modelType:"line"+vt,enablePicking:Se,iconMap:this.iconService.getIconMap()}});case 5:return Ut=Tr.sent,Tr.abrupt("return",[Ut]);case 7:case"end":return Tr.stop()}},o,this)}));function r(){return n.apply(this,arguments)}return r}()},{key:"getShaders",value:function(){var r=this.layer.getLayerConfig(),o=r.sourceColor,u=r.targetColor,f=r.lineType;return f==="dash"?{frag:wM,vert:AM,type:"Dash"}:o&&u?{frag:TM,vert:Jx,type:"Linear"}:{frag:CM,vert:Jx,type:""}}},{key:"registerBuiltinAttributes",value:function(){var r=this;this.styleAttributeService.registerStyleAttribute({name:"distanceAndIndex",type:ja.Attribute,descriptor:{name:"a_DistanceAndIndex",buffer:{usage:$e.STATIC_DRAW,data:[],type:$e.FLOAT},size:2,update:function(u,f,g,x,I,P){return P===void 0?[g[3],10]:[g[3],P]}}}),this.styleAttributeService.registerStyleAttribute({name:"total_distance",type:ja.Attribute,descriptor:{name:"a_Total_Distance",buffer:{usage:$e.STATIC_DRAW,data:[],type:$e.FLOAT},size:1,update:function(u,f,g){return[g[5]]}}}),this.styleAttributeService.registerStyleAttribute({name:"size",type:ja.Attribute,descriptor:{name:"a_Size",buffer:{usage:$e.DYNAMIC_DRAW,data:[],type:$e.FLOAT},size:2,update:function(u){var f=u.size,g=f===void 0?1:f;return Array.isArray(g)?[g[0],g[1]]:[g,0]}}}),this.styleAttributeService.registerStyleAttribute({name:"normal",type:ja.Attribute,descriptor:{name:"a_Normal",buffer:{usage:$e.STATIC_DRAW,data:[],type:$e.FLOAT},size:3,update:function(u,f,g,x,I){return I}}}),this.styleAttributeService.registerStyleAttribute({name:"miter",type:ja.Attribute,descriptor:{name:"a_Miter",buffer:{usage:$e.STATIC_DRAW,data:[],type:$e.FLOAT},size:1,update:function(u,f,g){return[g[4]]}}}),this.styleAttributeService.registerStyleAttribute({name:"uv",type:ja.Attribute,descriptor:{name:"a_iconMapUV",buffer:{usage:$e.DYNAMIC_DRAW,data:[],type:$e.FLOAT},size:2,update:function(u){var f=r.iconService.getIconMap(),g=u.texture,x=f[g]||{x:0,y:0},I=x.x,P=x.y;return[I,P]}}})}}]),t}(Sl);function IM(e){var i=OM();return function(){var n=(0,rr.Z)(e),r;if(i){var o=(0,rr.Z)(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return(0,jn.Z)(this,r)}}function OM(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var RM=`uniform float u_opacity : 1.0;
uniform sampler2D u_texture;
uniform float u_linearDir: 1.0;

#pragma include "picking"

varying mat4 styleMappingMat;

void main() {
  float opacity = styleMappingMat[0][0];
  float linearRadio = styleMappingMat[3].r; // \u5F53\u524D\u70B9\u4F4D\u8DDD\u79BB\u5360\u7EBF\u603B\u957F\u7684\u6BD4\u4F8B
  if(u_linearDir < 1.0) {
    linearRadio = styleMappingMat[3][3];
  }

  gl_FragColor = texture2D(u_texture, vec2(linearRadio, 0.5));

  gl_FragColor.a *= opacity; // \u5168\u5C40\u900F\u660E\u5EA6
  gl_FragColor = filterColor(gl_FragColor);
}
`,PM=`
attribute float a_Miter;
attribute vec2 a_Size;
attribute vec3 a_Normal;
attribute vec3 a_Position;

// dash line
attribute float a_Total_Distance;
attribute vec2 a_DistanceAndIndex;

uniform mat4 u_ModelMatrix;
uniform mat4 u_Mvp;

uniform float u_heightfixed: 0.0;
uniform float u_vertexScale: 1.0;
uniform float u_raisingHeight: 0.0;

uniform float u_opacity: 1.0;

#pragma include "projection"
#pragma include "picking"

varying mat4 styleMappingMat; // \u7528\u4E8E\u5C06\u5728\u9876\u70B9\u7740\u8272\u5668\u4E2D\u8BA1\u7B97\u597D\u7684\u6837\u5F0F\u503C\u4F20\u9012\u7ED9\u7247\u5143

#pragma include "styleMapping"
#pragma include "styleMappingCalOpacity"

void main() {
  // cal style mapping - \u6570\u636E\u7EB9\u7406\u6620\u5C04\u90E8\u5206\u7684\u8BA1\u7B97
  styleMappingMat = mat4(
    0.0, 0.0, 0.0, 0.0, // opacity - strokeOpacity - strokeWidth - empty
    0.0, 0.0, 0.0, 0.0, // strokeR - strokeG - strokeB - strokeA
    0.0, 0.0, 0.0, 0.0, // offsets[0] - offsets[1]
    0.0, 0.0, 0.0, 0.0  // distance_ratio/distance/pixelLen/texV
  );

  float rowCount = u_cellTypeLayout[0][0];    // \u5F53\u524D\u7684\u6570\u636E\u7EB9\u7406\u6709\u51E0\u884C
  float columnCount = u_cellTypeLayout[0][1]; // \u5F53\u770B\u5230\u6570\u636E\u7EB9\u7406\u6709\u51E0\u5217
  float columnWidth = 1.0/columnCount;  // \u5217\u5BBD
  float rowHeight = 1.0/rowCount;       // \u884C\u9AD8
  float cellCount = calCellCount(); // opacity - strokeOpacity - strokeWidth - stroke - offsets
  float id = a_vertexId; // \u7B2Cn\u4E2A\u9876\u70B9
  float cellCurrentRow = floor(id * cellCount / columnCount) + 1.0; // \u8D77\u59CB\u70B9\u5728\u7B2C\u51E0\u884C
  float cellCurrentColumn = mod(id * cellCount, columnCount) + 1.0; // \u8D77\u59CB\u70B9\u5728\u7B2C\u51E0\u5217
  
  // cell \u56FA\u5B9A\u987A\u5E8F opacity -> strokeOpacity -> strokeWidth -> stroke ... 
  // \u6309\u987A\u5E8F\u4ECE cell \u4E2D\u53D6\u503C\u3001\u82E5\u6CA1\u6709\u5219\u81EA\u52A8\u5F80\u4E0B\u53D6\u503C
  float textureOffset = 0.0; // \u5728 cell \u4E2D\u53D6\u503C\u7684\u504F\u79FB\u91CF

  vec2 opacityAndOffset = calOpacityAndOffset(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset, columnWidth, rowHeight);
  styleMappingMat[0][0] = opacityAndOffset.r;
  textureOffset = opacityAndOffset.g;
  // cal style mapping - \u6570\u636E\u7EB9\u7406\u6620\u5C04\u90E8\u5206\u7684\u8BA1\u7B97

  vec3 size = a_Miter * setPickingSize(a_Size.x) * reverse_offset_normal(a_Normal);
  
  vec2 offset = project_pixel(size.xy);

  float lineDistance = a_DistanceAndIndex.x;
  float currentLinePointRatio = lineDistance / a_Total_Distance;
 

  float lineOffsetWidth = length(offset + offset * sign(a_Miter)); // \u7EBF\u6A2A\u5411\u504F\u79FB\u7684\u8DDD\u79BB\uFF08\u5411\u4E24\u4FA7\u504F\u79FB\u7684\u548C\uFF09
  float linePixelSize = project_pixel(a_Size.x) * 2.0;  // \u5B9A\u70B9\u4F4D\u7F6E\u504F\u79FB\uFF0C\u6309\u5730\u56FE\u7B49\u7EA7\u7F29\u653E\u540E\u7684\u8DDD\u79BB \u5355\u4FA7 * 2
  float texV = lineOffsetWidth/linePixelSize; // \u7EBF\u56FE\u5C42\u8D34\u56FE\u90E8\u5206\u7684 v \u5750\u6807\u503C

  // \u8BBE\u7F6E\u6570\u636E\u96C6\u7684\u53C2\u6570
  styleMappingMat[3][0] = currentLinePointRatio; // \u5F53\u524D\u70B9\u4F4D\u8DDD\u79BB\u5360\u7EBF\u603B\u957F\u7684\u6BD4\u4F8B
  styleMappingMat[3][3] = texV;             // \u7EBF\u56FE\u5C42\u8D34\u56FE\u90E8\u5206\u7684 v \u5750\u6807\u503C

  vec4 project_pos = project_position(vec4(a_Position.xy, 0, 1.0));

  // gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy + offset, a_Size.y, 1.0));

  float h = float(a_Position.z) * u_vertexScale; // \u7EBF\u9876\u70B9\u7684\u9AD8\u5EA6 - \u517C\u5BB9\u4E0D\u5B58\u5728\u7B2C\u4E09\u4E2A\u6570\u503C\u7684\u60C5\u51B5 vertex height
  float lineHeight = a_Size.y; // size \u7B2C\u4E8C\u4E2A\u53C2\u6570\u4EE3\u8868\u7684\u9AD8\u5EA6 [linewidth, lineheight]

  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x
    lineHeight *= 0.2; // \u4FDD\u6301\u548C amap/mapbox \u4E00\u81F4\u7684\u6548\u679C
    h *= 0.2;
    if(u_heightfixed < 1.0) {
      lineHeight = project_pixel(a_Size.y);
    }
    gl_Position = u_Mvp * (vec4(project_pos.xy + offset, lineHeight + h + u_raisingHeight, 1.0));
  } else {
    // mapbox -  amap
    
    // \u517C\u5BB9 mapbox \u5728\u7EBF\u9AD8\u5EA6\u4E0A\u7684\u6548\u679C\u8868\u73B0\u57FA\u672C\u4E00\u81F4
    if(u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT || u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {
      // mapbox
      // \u4FDD\u6301\u9AD8\u5EA6\u76F8\u5BF9\u4E0D\u53D8
      float mapboxZoomScale = 4.0/pow(2.0, 21.0 - u_Zoom);
      h *= mapboxZoomScale;
      h += u_raisingHeight * mapboxZoomScale;
      if(u_heightfixed > 0.0) {
        lineHeight *= mapboxZoomScale;
      }
      
    } else {
      // amap
      h += u_raisingHeight;
      // lineHeight \u9876\u70B9\u504F\u79FB\u9AD8\u5EA6
      if(u_heightfixed < 1.0) {
        lineHeight *= pow(2.0, 20.0 - u_Zoom);
      }
    }

    gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy + offset, lineHeight + h, 1.0));
  }

  setPickingColor(a_PickingColor);
}
`,kM=function(e){(0,ui.Z)(t,e);var i=IM(t);function t(){var n;(0,Ur.Z)(this,t);for(var r=arguments.length,o=new Array(r),u=0;u<r;u++)o[u]=arguments[u];return n=i.call.apply(i,[this].concat(o)),(0,He.Z)((0,er.Z)(n),"updateTexture",function(){var f=n.rendererService.createTexture2D;n.colorTexture&&n.colorTexture.destroy();var g=n.layer.getLayerConfig(),x=g.rampColors,I=pu(x);n.colorTexture=f({data:new Uint8Array(I.data),width:I.width,height:I.height,wrapS:$e.CLAMP_TO_EDGE,wrapT:$e.CLAMP_TO_EDGE,min:$e.NEAREST,mag:$e.NEAREST,flipY:!1})}),n}return(0,Jr.Z)(t,[{key:"getUninforms",value:function(){var r=this.layer.getLayerConfig(),o=r.opacity,u=o===void 0?1:o,f=r.vertexHeightScale,g=f===void 0?20:f,x=r.raisingHeight,I=x===void 0?0:x,P=r.heightfixed,G=P===void 0?!1:P,$=r.linearDir,Ee=$===void 0?qv.VERTICAL:$;if(this.rendererService.getDirty()&&this.colorTexture.bind(),this.dataTextureTest&&this.dataTextureNeedUpdate({opacity:u})){this.judgeStyleAttributes({opacity:u});var Se=this.layer.getEncodedData(),Re=this.calDataFrame(this.cellLength,Se,this.cellProperties),Ye=Re.data,St=Re.width,vt=Re.height;this.rowCount=vt,this.dataTexture=this.cellLength>0&&Ye.length>0?this.createTexture2D({flipY:!0,data:Ye,format:$e.LUMINANCE,type:$e.FLOAT,width:St,height:vt}):this.createTexture2D({flipY:!0,data:[1],format:$e.LUMINANCE,type:$e.FLOAT,width:1,height:1})}return{u_dataTexture:this.dataTexture,u_cellTypeLayout:this.getCellTypeLayout(),u_linearDir:Ee===qv.VERTICAL?1:0,u_opacity:(0,Wr.isNumber)(u)?u:1,u_texture:this.colorTexture,u_heightfixed:Number(G),u_vertexScale:g,u_raisingHeight:Number(I)}}},{key:"initModels",value:function(){var n=(0,An.Z)(Nt().mark(function o(){return Nt().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return this.updateTexture(),f.next=3,this.buildModels();case 3:return f.abrupt("return",f.sent);case 4:case"end":return f.stop()}},o,this)}));function r(){return n.apply(this,arguments)}return r}()},{key:"clearModels",value:function(){var r,o;(r=this.colorTexture)===null||r===void 0||r.destroy(),(o=this.dataTexture)===null||o===void 0||o.destroy()}},{key:"buildModels",value:function(){var n=(0,An.Z)(Nt().mark(function o(){var u,f,g,x,I,P,G,$;return Nt().wrap(function(Se){for(;;)switch(Se.prev=Se.next){case 0:return u=this.layer.getLayerConfig(),f=u.mask,g=f===void 0?!1:f,x=u.maskInside,I=x===void 0?!0:x,P=u.depth,G=P===void 0?!1:P,this.layer.triangulation=yv,Se.next=4,this.layer.buildLayerModel({moduleName:"lineRampColors",vertexShader:PM,fragmentShader:RM,triangulation:yv,depth:{enable:G},blend:this.getBlend(),stencil:zo(g,I)});case 4:return $=Se.sent,Se.abrupt("return",[$]);case 6:case"end":return Se.stop()}},o,this)}));function r(){return n.apply(this,arguments)}return r}()},{key:"registerBuiltinAttributes",value:function(){this.styleAttributeService.registerStyleAttribute({name:"distanceAndIndex",type:ja.Attribute,descriptor:{name:"a_DistanceAndIndex",buffer:{usage:$e.STATIC_DRAW,data:[],type:$e.FLOAT},size:2,update:function(o,u,f,g,x,I){return I===void 0?[f[3],10]:[f[3],I]}}}),this.styleAttributeService.registerStyleAttribute({name:"total_distance",type:ja.Attribute,descriptor:{name:"a_Total_Distance",buffer:{usage:$e.STATIC_DRAW,data:[],type:$e.FLOAT},size:1,update:function(o,u,f){return[f[5]]}}}),this.styleAttributeService.registerStyleAttribute({name:"size",type:ja.Attribute,descriptor:{name:"a_Size",buffer:{usage:$e.DYNAMIC_DRAW,data:[],type:$e.FLOAT},size:2,update:function(o){var u=o.size,f=u===void 0?1:u;return Array.isArray(f)?[f[0],f[1]]:[f,0]}}}),this.styleAttributeService.registerStyleAttribute({name:"normal",type:ja.Attribute,descriptor:{name:"a_Normal",buffer:{usage:$e.STATIC_DRAW,data:[],type:$e.FLOAT},size:3,update:function(o,u,f,g,x){return x}}}),this.styleAttributeService.registerStyleAttribute({name:"miter",type:ja.Attribute,descriptor:{name:"a_Miter",buffer:{usage:$e.STATIC_DRAW,data:[],type:$e.FLOAT},size:1,update:function(o,u,f){return[f[4]]}}})}}]),t}(Sl);function LM(e){var i=DM();return function(){var n=(0,rr.Z)(e),r;if(i){var o=(0,rr.Z)(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return(0,jn.Z)(this,r)}}function DM(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var FM=`
varying vec4 v_color;
varying mat4 styleMappingMat;
void main() {
  float opacity = styleMappingMat[0][0];
  float d_distance_ratio = styleMappingMat[3].r; // \u5F53\u524D\u70B9\u4F4D\u8DDD\u79BB\u5360\u7EBF\u603B\u957F\u7684\u6BD4\u4F8B

  gl_FragColor = v_color;
  gl_FragColor.a *= opacity; // \u5168\u5C40\u900F\u660E\u5EA6
}
`,NM=`uniform vec4 u_sourceColor;
uniform vec4 u_targetColor;

varying mat4 styleMappingMat;
void main() {
  float opacity = styleMappingMat[0][0];

  // styleMappingMat[3][0] \u5F53\u524D\u70B9\u4F4D\u8DDD\u79BB\u5360\u7EBF\u603B\u957F\u7684\u6BD4\u4F8B
  gl_FragColor = mix(u_sourceColor, u_targetColor, styleMappingMat[3][0]);
  gl_FragColor.a *= opacity; // \u5168\u5C40\u900F\u660E\u5EA6
}
`,eb=`attribute vec4 a_Color;
attribute vec2 a_Size;
attribute vec3 a_Position;

attribute float a_Total_Distance;
attribute float a_Distance;

uniform mat4 u_ModelMatrix;
uniform mat4 u_Mvp;

uniform float u_opacity: 1.0;
uniform float u_vertexScale: 1.0;

#pragma include "projection"

varying vec4 v_color;

varying mat4 styleMappingMat; // \u7528\u4E8E\u5C06\u5728\u9876\u70B9\u7740\u8272\u5668\u4E2D\u8BA1\u7B97\u597D\u7684\u6837\u5F0F\u503C\u4F20\u9012\u7ED9\u7247\u5143

#pragma include "styleMapping"
#pragma include "styleMappingCalOpacity"

void main() {
  // cal style mapping - \u6570\u636E\u7EB9\u7406\u6620\u5C04\u90E8\u5206\u7684\u8BA1\u7B97
  styleMappingMat = mat4(
    0.0, 0.0, 0.0, 0.0, // opacity - strokeOpacity - strokeWidth - empty
    0.0, 0.0, 0.0, 0.0, // strokeR - strokeG - strokeB - strokeA
    0.0, 0.0, 0.0, 0.0, // offsets[0] - offsets[1]
    0.0, 0.0, 0.0, 0.0  // distance_ratio/distance/pixelLen/texV
  );

  float rowCount = u_cellTypeLayout[0][0];    // \u5F53\u524D\u7684\u6570\u636E\u7EB9\u7406\u6709\u51E0\u884C
  float columnCount = u_cellTypeLayout[0][1]; // \u5F53\u770B\u5230\u6570\u636E\u7EB9\u7406\u6709\u51E0\u5217
  float columnWidth = 1.0/columnCount;  // \u5217\u5BBD
  float rowHeight = 1.0/rowCount;       // \u884C\u9AD8
  float cellCount = calCellCount(); // opacity - strokeOpacity - strokeWidth - stroke - offsets
  float id = a_vertexId; // \u7B2Cn\u4E2A\u9876\u70B9
  float cellCurrentRow = floor(id * cellCount / columnCount) + 1.0; // \u8D77\u59CB\u70B9\u5728\u7B2C\u51E0\u884C
  float cellCurrentColumn = mod(id * cellCount, columnCount) + 1.0; // \u8D77\u59CB\u70B9\u5728\u7B2C\u51E0\u5217
  
  // cell \u56FA\u5B9A\u987A\u5E8F opacity -> strokeOpacity -> strokeWidth -> stroke ... 
  // \u6309\u987A\u5E8F\u4ECE cell \u4E2D\u53D6\u503C\u3001\u82E5\u6CA1\u6709\u5219\u81EA\u52A8\u5F80\u4E0B\u53D6\u503C
  float textureOffset = 0.0; // \u5728 cell \u4E2D\u53D6\u503C\u7684\u504F\u79FB\u91CF

  vec2 opacityAndOffset = calOpacityAndOffset(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset, columnWidth, rowHeight);
  styleMappingMat[0][0] = opacityAndOffset.r;
  textureOffset = opacityAndOffset.g;
  // cal style mapping - \u6570\u636E\u7EB9\u7406\u6620\u5C04\u90E8\u5206\u7684\u8BA1\u7B97

  
  v_color = a_Color; 
  styleMappingMat[3][0] = a_Distance / a_Total_Distance;

  vec4 project_pos = project_position(vec4(a_Position.xy, 0, 1.0));

  float h = float(a_Position.z) * u_vertexScale; // \u7EBF\u9876\u70B9\u7684\u9AD8\u5EA6 - \u517C\u5BB9\u4E0D\u5B58\u5728\u7B2C\u4E09\u4E2A\u6570\u503C\u7684\u60C5\u51B5

  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x
    gl_Position = u_Mvp * (vec4(project_pos.xy, project_pixel(a_Size.y) + h * 0.2, 1.0));
  } else {
    float lineHeight = a_Size.y;
    // \u517C\u5BB9 mapbox \u5728\u7EBF\u9AD8\u5EA6\u4E0A\u7684\u6548\u679C\u8868\u73B0\u57FA\u672C\u4E00\u81F4
    if(u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT || u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {
      // \u4FDD\u6301\u9AD8\u5EA6\u76F8\u5BF9\u4E0D\u53D8
      h *= 2.0/pow(2.0, 20.0 - u_Zoom);
    }

    // #define COORDINATE_SYSTEM_P20 5.0
    // #define COORDINATE_SYSTEM_P20_OFFSET 6.0
    // amap1.x
    if(u_CoordinateSystem == COORDINATE_SYSTEM_P20 || u_CoordinateSystem == COORDINATE_SYSTEM_P20_OFFSET) {
      // \u4FDD\u6301\u9AD8\u5EA6\u76F8\u5BF9\u4E0D\u53D8
      lineHeight *= pow(2.0, 20.0 - u_Zoom);
    }

    gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy, lineHeight + h, 1.0));
    gl_PointSize = 10.0;
  }
}
`,BM=function(e){(0,ui.Z)(t,e);var i=LM(t);function t(){return(0,Ur.Z)(this,t),i.apply(this,arguments)}return(0,Jr.Z)(t,[{key:"getUninforms",value:function(){var r=this.layer.getLayerConfig(),o=r.opacity,u=o===void 0?1:o,f=r.sourceColor,g=r.targetColor,x=r.vertexHeightScale,I=x===void 0?20:x,P=0,G=[0,0,0,0],$=[0,0,0,0];if(f&&g&&(G=co(f),$=co(g),P=1),this.dataTextureTest&&this.dataTextureNeedUpdate({opacity:u})){this.judgeStyleAttributes({opacity:u});var Ee=this.layer.getEncodedData(),Se=this.calDataFrame(this.cellLength,Ee,this.cellProperties),Re=Se.data,Ye=Se.width,St=Se.height;this.rowCount=St,this.dataTexture=this.cellLength>0&&Re.length>0?this.createTexture2D({flipY:!0,data:Re,format:$e.LUMINANCE,type:$e.FLOAT,width:Ye,height:St}):this.createTexture2D({flipY:!0,data:[1],format:$e.LUMINANCE,type:$e.FLOAT,width:1,height:1})}return{u_dataTexture:this.dataTexture,u_cellTypeLayout:this.getCellTypeLayout(),u_opacity:(0,Wr.isNumber)(u)?u:1,u_linearColor:P,u_sourceColor:G,u_targetColor:$,u_vertexScale:I}}},{key:"initModels",value:function(){var n=(0,An.Z)(Nt().mark(function o(){return Nt().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return f.next=2,this.buildModels();case 2:return f.abrupt("return",f.sent);case 3:case"end":return f.stop()}},o,this)}));function r(){return n.apply(this,arguments)}return r}()},{key:"clearModels",value:function(){var r;(r=this.dataTexture)===null||r===void 0||r.destroy()}},{key:"getShaders",value:function(){var r=this.layer.getLayerConfig(),o=r.sourceColor,u=r.targetColor;return o&&u?{frag:NM,vert:eb,type:"lineSimpleLinear"}:{frag:FM,vert:eb,type:"lineSimpleNormal"}}},{key:"buildModels",value:function(){var n=(0,An.Z)(Nt().mark(function o(){var u,f,g,x,I,P,G,$,Ee,Se;return Nt().wrap(function(Ye){for(;;)switch(Ye.prev=Ye.next){case 0:return u=this.layer.getLayerConfig(),f=u.mask,g=f===void 0?!1:f,x=u.maskInside,I=x===void 0?!0:x,P=this.getShaders(),G=P.frag,$=P.vert,Ee=P.type,Ye.next=4,this.layer.buildLayerModel({moduleName:Ee,vertexShader:$,fragmentShader:G,triangulation:O3,primitive:$e.LINES,depth:{enable:!1},blend:this.getBlend(),stencil:zo(g,I),pick:!1});case 4:return Se=Ye.sent,Ye.abrupt("return",[Se]);case 6:case"end":return Ye.stop()}},o,this)}));function r(){return n.apply(this,arguments)}return r}()},{key:"registerBuiltinAttributes",value:function(){this.styleAttributeService.registerStyleAttribute({name:"distance",type:ja.Attribute,descriptor:{name:"a_Distance",buffer:{usage:$e.STATIC_DRAW,data:[],type:$e.FLOAT},size:1,update:function(o,u,f){return[f[3]]}}}),this.styleAttributeService.registerStyleAttribute({name:"total_distance",type:ja.Attribute,descriptor:{name:"a_Total_Distance",buffer:{usage:$e.STATIC_DRAW,data:[],type:$e.FLOAT},size:1,update:function(o,u,f){return[f[5]]}}}),this.styleAttributeService.registerStyleAttribute({name:"size",type:ja.Attribute,descriptor:{name:"a_Size",buffer:{usage:$e.DYNAMIC_DRAW,data:[],type:$e.FLOAT},size:2,update:function(o){var u=o.size,f=u===void 0?1:u;return Array.isArray(f)?[f[0],f[1]]:[f,0]}}})}}]),t}(Sl);function zM(e){var i=UM();return function(){var n=(0,rr.Z)(e),r;if(i){var o=(0,rr.Z)(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return(0,jn.Z)(this,r)}}function UM(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var ZM=`uniform float u_opacity : 1.0;
varying vec4 v_color;

#pragma include "picking"

void main() {
  gl_FragColor = v_color;
  gl_FragColor.a *= u_opacity;
  gl_FragColor = filterColor(gl_FragColor);
}
`,jM=`attribute float a_Miter;
attribute vec4 a_Color;
attribute vec2 a_Size;
attribute vec3 a_Normal;
attribute vec3 a_Position;

// uniform vec2 u_tileOrigin;
// uniform float u_coord;

uniform mat4 u_ModelMatrix;
uniform mat4 u_Mvp;


#pragma include "projection"
#pragma include "picking"

varying vec4 v_color;

void main() {
  v_color = a_Color;

  vec3 size = a_Miter * setPickingSize(a_Size.x) * reverse_offset_normal(a_Normal);
  
  vec2 offset = project_pixel(size.xy);

  vec4 project_pos = project_position(vec4(a_Position.xy, 0, 1.0));

  // if(u_coord > 0.0) { // \u4F7F\u7528\u7ECF\u7EAC\u5EA6\u5750\u6807
      if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x
      gl_Position = u_Mvp * (vec4(project_pos.xy + offset, 0.0, 1.0));
    } else {
      gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy + offset, 0.0, 1.0));
    }
  // } else { // \u4F7F\u7528\u504F\u79FB\u5750\u6807
  //   vec2 pointPos = a_Position.xy;
  //   vec4 tileWorld = vec4(project_mvt_offset_position(vec4(u_tileOrigin, 0.0, 1.0)).xyz, 1.0); // \u74E6\u7247\u8D77\u59CB\u70B9\u7684\u4E16\u754C\u5750\u6807

  //   vec2 pointOffset =  pointPos *  pow(2.0, u_Zoom); // \u74E6\u7247\u5185\u7684\u70B9\u7684\u504F\u79FB\u5750\u6807
    
  //   tileWorld.xy += pointOffset;

  //   tileWorld.xy += offset;

  //   if (u_CoordinateSystem == COORDINATE_SYSTEM_METER_OFFSET || u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {
  //     // Needs to be divided with project_uCommonUnitsPerMeter
  //     tileWorld.w *= u_PixelsPerMeter.z;
  //   }
  //   gl_Position = u_ViewProjectionMatrix * tileWorld + u_ViewportCenterProjection;
  // }

  setPickingColor(a_PickingColor);
}
`,VM=`uniform float u_opacity : 1.0;
uniform vec4 u_color;

void main() {
  gl_FragColor = u_color;
  gl_FragColor.a *= u_opacity;
}
`,GM=`attribute float a_Miter;
attribute vec4 a_Color;
attribute vec3 a_Normal;
attribute vec3 a_Position;

uniform mat4 u_ModelMatrix;
uniform mat4 u_Mvp;
uniform float u_size;

#pragma include "projection"

void main() {

  vec3 size = a_Miter * u_size * reverse_offset_normal(a_Normal);
  
  vec2 offset = project_pixel(size.xy);

  vec4 project_pos = project_position(vec4(a_Position.xy, 0, 1.0));

  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x
    gl_Position = u_Mvp * (vec4(project_pos.xy + offset, 0.0, 1.0));
  } else {
    gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy + offset, 0.0, 1.0));
  }
}
`,HM=function(e){(0,ui.Z)(t,e);var i=zM(t);function t(){return(0,Ur.Z)(this,t),i.apply(this,arguments)}return(0,Jr.Z)(t,[{key:"getUninforms",value:function(){var r=this.layer.getLayerConfig(),o=r.opacity,u=o===void 0?1:o,f=r.usage,g=r.color,x=g===void 0?"#fff":g,I=r.size,P=I===void 0?1:I;return{u_opacity:Number(u),u_color:f==="basemap"?co(x):[0,0,0,0],u_size:f==="basemap"?P:1}}},{key:"initModels",value:function(){var n=(0,An.Z)(Nt().mark(function o(){return Nt().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return f.next=2,this.buildModels();case 2:return f.abrupt("return",f.sent);case 3:case"end":return f.stop()}},o,this)}));function r(){return n.apply(this,arguments)}return r}()},{key:"buildModels",value:function(){var n=(0,An.Z)(Nt().mark(function o(){var u,f,g,x,I,P,G,$,Ee;return Nt().wrap(function(Re){for(;;)switch(Re.prev=Re.next){case 0:return u=this.layer.getLayerConfig(),f=u.mask,g=f===void 0?!1:f,x=u.maskInside,I=x===void 0?!0:x,P=u.depth,G=P===void 0?!1:P,$=u.usage,this.layer.triangulation=yv,Re.next=4,this.layer.buildLayerModel({moduleName:"lineTile_"+$,vertexShader:$==="basemap"?GM:jM,fragmentShader:$==="basemap"?VM:ZM,triangulation:yv,blend:this.getBlend(),depth:{enable:G},stencil:zo(g,I),pick:$!=="basemap"});case 4:return Ee=Re.sent,Re.abrupt("return",[Ee]);case 6:case"end":return Re.stop()}},o,this)}));function r(){return n.apply(this,arguments)}return r}()},{key:"registerBuiltinAttributes",value:function(){var r=this.layer.getLayerConfig(),o=r.usage;o!=="basemap"&&this.styleAttributeService.registerStyleAttribute({name:"size",type:ja.Attribute,descriptor:{name:"a_Size",buffer:{usage:$e.DYNAMIC_DRAW,data:[],type:$e.FLOAT},size:2,update:function(f){var g=f.size,x=g===void 0?1:g;return Array.isArray(x)?[x[0],x[1]]:[x,0]}}}),this.styleAttributeService.registerStyleAttribute({name:"normal",type:ja.Attribute,descriptor:{name:"a_Normal",buffer:{usage:$e.STATIC_DRAW,data:[],type:$e.FLOAT},size:3,update:function(f,g,x,I,P){return P}}}),this.styleAttributeService.registerStyleAttribute({name:"miter",type:ja.Attribute,descriptor:{name:"a_Miter",buffer:{usage:$e.STATIC_DRAW,data:[],type:$e.FLOAT},size:1,update:function(f,g,x){return[x[4]]}}})}}]),t}(Sl);function WM(e){var i=$M();return function(){var n=(0,rr.Z)(e),r;if(i){var o=(0,rr.Z)(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return(0,jn.Z)(this,r)}}function $M(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var XM=`#define Animate 0.0
#define LineTexture 1.0

// line texture
uniform float u_line_texture;
uniform sampler2D u_texture;
uniform vec2 u_textSize;
uniform float u_linearColor: 0;
uniform vec4 u_sourceColor;
uniform vec4 u_targetColor;
uniform float u_opacity : 1.0;
uniform float u_textureBlend;
uniform float u_iconStepCount;
uniform float u_time;
uniform vec4 u_animate: [ 1., 2., 1.0, 0.2 ]; // \u63A7\u5236\u8FD0\u52A8

varying vec2 v_iconMapUV;
varying float v_blur;
varying float v_radio;
varying vec4 v_color;
varying vec4 v_dataset;

#pragma include "picking"

void main() {
  float opacity = u_opacity;
  float animateSpeed = 0.0; // \u8FD0\u52A8\u901F\u5EA6
  float d_distance_ratio = v_dataset.r; // \u5F53\u524D\u70B9\u4F4D\u8DDD\u79BB\u5360\u7EBF\u603B\u957F\u7684\u6BD4\u4F8B
  float v = v_dataset.a;

  if(u_linearColor == 1.0) { // \u4F7F\u7528\u6E10\u53D8\u989C\u8272
    gl_FragColor = mix(u_sourceColor, u_targetColor, v);
  } else { // \u4F7F\u7528 color \u65B9\u6CD5\u4F20\u5165\u7684\u989C\u8272
     gl_FragColor = v_color;
  }

  gl_FragColor.a *= opacity; // \u5168\u5C40\u900F\u660E\u5EA6
  if(u_animate.x == Animate) {
      animateSpeed = u_time / u_animate.y;
       float alpha =1.0 - fract( mod(1.0- d_distance_ratio, u_animate.z)* (1.0/ u_animate.z) + animateSpeed);
      alpha = (alpha + u_animate.w -1.0) / u_animate.w;
      alpha = smoothstep(0., 1., alpha);
      gl_FragColor.a *= alpha;
  }

  if(u_line_texture == LineTexture) { // while load texture
    float aDistance = v_dataset.g;      // \u5F53\u524D\u9876\u70B9\u7684\u8DDD\u79BB
    float d_texPixelLen = v_dataset.b;  // \u8D34\u56FE\u7684\u50CF\u7D20\u957F\u5EA6\uFF0C\u6839\u636E\u5730\u56FE\u5C42\u7EA7\u7F29\u653E
    float u = fract(mod(aDistance, d_texPixelLen)/d_texPixelLen - animateSpeed);
    float v = v_dataset.a;  // \u7EBF\u56FE\u5C42\u8D34\u56FE\u90E8\u5206\u7684 v \u5750\u6807\u503C

    // \u8BA1\u7B97\u7EB9\u7406\u95F4\u9694 start
    float flag = 0.0;
    if(u > 1.0/u_iconStepCount) {
      flag = 1.0;
    }
    u = fract(u*u_iconStepCount);
    // \u8BA1\u7B97\u7EB9\u7406\u95F4\u9694 end

    vec2 uv= v_iconMapUV / u_textSize + vec2(u, v) / u_textSize * 64.;
    vec4 pattern = texture2D(u_texture, uv);

    // Tip: \u5224\u65AD\u7EB9\u7406\u95F4\u9694
    if(flag > 0.0) {
      pattern = vec4(0.0);
    }

    if(u_textureBlend == 0.0) { // normal
      pattern.a = 0.0;
      gl_FragColor = filterColor(gl_FragColor + pattern);
    } else { // replace
        pattern.a *= opacity;
        if(gl_FragColor.a <= 0.0) {
          pattern.a = 0.0;
        }
        gl_FragColor = filterColor(pattern);
    }
  }
  

  // blur - AA
  if(v < v_blur) {
    gl_FragColor.a = mix(0.0, gl_FragColor.a, v/v_blur);
  } else if(v > 1.0 - v_blur) {
    gl_FragColor.a = mix(gl_FragColor.a, 0.0, (v - (1.0 - v_blur))/v_blur);
  }

  gl_FragColor = filterColor(gl_FragColor);
}
`,YM=`#define Animate 0.0

attribute float a_Miter;
attribute vec4 a_Color;
attribute vec2 a_Size;
attribute vec3 a_Normal;
attribute vec3 a_Position;
attribute vec2 a_iconMapUV;
attribute float a_Total_Distance;
attribute float a_Distance;

uniform mat4 u_ModelMatrix;
uniform mat4 u_Mvp;
uniform vec4 u_animate: [ 1., 2., 1.0, 0.2 ];
uniform float u_icon_step: 100;
uniform float u_heightfixed;
uniform float u_linearColor: 0;

#pragma include "projection"
#pragma include "light"
#pragma include "picking"

// texV \u7EBF\u56FE\u5C42 - \u8D34\u56FE\u90E8\u5206\u7684 v \u5750\u6807\uFF08\u7EBF\u7684\u5BBD\u5EA6\u65B9\u5411\uFF09
varying vec2 v_iconMapUV;
varying vec4 v_color;
varying float v_blur;
varying float v_radio;
varying vec4 v_dataset;

void main() {


  float d_distance_ratio; // \u5F53\u524D\u70B9\u4F4D\u8DDD\u79BB\u5360\u7EBF\u603B\u957F\u7684\u6BD4\u4F8B
  float d_texPixelLen;    // \u8D34\u56FE\u7684\u50CF\u7D20\u957F\u5EA6\uFF0C\u6839\u636E\u5730\u56FE\u5C42\u7EA7\u7F29\u653E

  v_iconMapUV = a_iconMapUV;
  if(u_heightfixed < 1.0) {     // \u9AD8\u5EA6\u968F zoom \u8C03\u6574
    d_texPixelLen = project_pixel(u_icon_step);
  } else {
    d_texPixelLen = u_icon_step;
  }
  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) {
    d_texPixelLen *= 10.0;
  }

  if(u_animate.x == Animate || u_linearColor == 1.0) {
      d_distance_ratio = a_Distance / a_Total_Distance;
  }

  float miter = (a_Miter + 1.0)/2.0;
  // \u8BBE\u7F6E\u6570\u636E\u96C6\u7684\u53C2\u6570
  v_dataset[0] = d_distance_ratio; // \u5F53\u524D\u70B9\u4F4D\u8DDD\u79BB\u5360\u7EBF\u603B\u957F\u7684\u6BD4\u4F8B
  v_dataset[1] = a_Distance;       // \u5F53\u524D\u9876\u70B9\u7684\u8DDD\u79BB
  v_dataset[2] = d_texPixelLen;    // \u8D34\u56FE\u7684\u50CF\u7D20\u957F\u5EA6\uFF0C\u6839\u636E\u5730\u56FE\u5C42\u7EA7\u7F29\u653E
  v_dataset[3] = miter;          // \u7EBF\u56FE\u5C42\u8D34\u56FE\u90E8\u5206\u7684 v \u5750\u6807\u503C 0 - 1

  vec4 project_pos = project_position(vec4(a_Position.xy, 0, 1.0));

  float originSize = a_Size.x;  // \u56FA\u5B9A\u9AD8\u5EA6
  if(u_heightfixed < 1.0) {     // \u9AD8\u5EA6\u968F zoom \u8C03\u6574
    originSize = project_float_pixel(a_Size.x);
  }

  float wallHeight = originSize * miter;
  float lightWeight = calc_lighting(vec4(project_pos.xy, wallHeight, 1.0));

  v_blur = min(project_float_pixel(2.0) / originSize, 0.05);
  v_color = vec4(a_Color.rgb * lightWeight, a_Color.w);

  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x
    gl_Position = u_Mvp * (vec4(project_pos.xy, wallHeight, 1.0));
  } else {
    gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy, wallHeight, 1.0));
  }

  setPickingColor(a_PickingColor);
}
`,KM=function(e){(0,ui.Z)(t,e);var i=WM(t);function t(){var n;(0,Ur.Z)(this,t);for(var r=arguments.length,o=new Array(r),u=0;u<r;u++)o[u]=arguments[u];return n=i.call.apply(i,[this].concat(o)),(0,He.Z)((0,er.Z)(n),"updateTexture",function(){var f=n.rendererService.createTexture2D;if(n.texture){n.texture.update({data:n.iconService.getCanvas()}),n.layer.render();return}n.texture=f({data:n.iconService.getCanvas(),mag:$e.NEAREST,min:$e.NEAREST,premultiplyAlpha:!1,width:1024,height:n.iconService.canvasHeight||128})}),n}return(0,Jr.Z)(t,[{key:"getUninforms",value:function(){var r=this.layer.getLayerConfig(),o=r.opacity,u=o===void 0?1:o,f=r.sourceColor,g=r.targetColor,x=r.textureBlend,I=x===void 0?"normal":x,P=r.heightfixed,G=P===void 0?!1:P,$=r.lineTexture,Ee=$===void 0?!1:$,Se=r.iconStep,Re=Se===void 0?100:Se,Ye=r.iconStepCount,St=Ye===void 0?1:Ye;this.rendererService.getDirty()&&this.texture.bind();var vt=0,Ut=[0,0,0,0],Kt=[0,0,0,0];return f&&g&&(Ut=co(f),Kt=co(g),vt=1),{u_heightfixed:Number(G),u_opacity:(0,Wr.isNumber)(u)?u:1,u_textureBlend:I==="normal"?0:1,u_texture:this.texture,u_line_texture:Ee?1:0,u_iconStepCount:St,u_icon_step:Re,u_textSize:[1024,this.iconService.canvasHeight||128],u_linearColor:vt,u_sourceColor:Ut,u_targetColor:Kt}}},{key:"getAnimateUniforms",value:function(){var r=this.layer.getLayerConfig(),o=r.animateOption;return{u_animate:this.animateOption2Array(o),u_time:this.layer.getLayerAnimateTime()}}},{key:"initModels",value:function(){var n=(0,An.Z)(Nt().mark(function o(){return Nt().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return this.updateTexture(),this.iconService.on("imageUpdate",this.updateTexture),f.next=4,this.buildModels();case 4:return f.abrupt("return",f.sent);case 5:case"end":return f.stop()}},o,this)}));function r(){return n.apply(this,arguments)}return r}()},{key:"clearModels",value:function(){var r;(r=this.texture)===null||r===void 0||r.destroy(),this.iconService.off("imageUpdate",this.updateTexture)}},{key:"buildModels",value:function(){var n=(0,An.Z)(Nt().mark(function o(){var u;return Nt().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return g.next=2,this.layer.buildLayerModel({moduleName:"lineWall",vertexShader:YM,fragmentShader:XM,triangulation:yv,depth:{enable:!1},blend:this.getBlend()});case 2:return u=g.sent,g.abrupt("return",[u]);case 4:case"end":return g.stop()}},o,this)}));function r(){return n.apply(this,arguments)}return r}()},{key:"registerBuiltinAttributes",value:function(){var r=this;this.styleAttributeService.registerStyleAttribute({name:"distance",type:ja.Attribute,descriptor:{name:"a_Distance",buffer:{usage:$e.STATIC_DRAW,data:[],type:$e.FLOAT},size:1,update:function(u,f,g){return[g[3]]}}}),this.styleAttributeService.registerStyleAttribute({name:"total_distance",type:ja.Attribute,descriptor:{name:"a_Total_Distance",buffer:{usage:$e.STATIC_DRAW,data:[],type:$e.FLOAT},size:1,update:function(u,f,g){return[g[5]]}}}),this.styleAttributeService.registerStyleAttribute({name:"size",type:ja.Attribute,descriptor:{name:"a_Size",buffer:{usage:$e.DYNAMIC_DRAW,data:[],type:$e.FLOAT},size:2,update:function(u){var f=u.size,g=f===void 0?1:f;return Array.isArray(g)?[g[0],g[1]]:[g,0]}}}),this.styleAttributeService.registerStyleAttribute({name:"normal",type:ja.Attribute,descriptor:{name:"a_Normal",buffer:{usage:$e.STATIC_DRAW,data:[],type:$e.FLOAT},size:3,update:function(u,f,g,x,I){return I}}}),this.styleAttributeService.registerStyleAttribute({name:"miter",type:ja.Attribute,descriptor:{name:"a_Miter",buffer:{usage:$e.STATIC_DRAW,data:[],type:$e.FLOAT},size:1,update:function(u,f,g){return[g[4]]}}}),this.styleAttributeService.registerStyleAttribute({name:"uv",type:ja.Attribute,descriptor:{name:"a_iconMapUV",buffer:{usage:$e.DYNAMIC_DRAW,data:[],type:$e.FLOAT},size:2,update:function(u){var f=r.iconService.getIconMap(),g=u.texture,x=f[g]||{x:0,y:0},I=x.x,P=x.y;return[I,P]}}})}}]),t}(Sl),QM={arc:X3,arc3d:rM,greatcircle:mM,wall:KM,line:qx,halfLine:bM,simple:BM,linearline:kM,tileLine:HM,earthArc3d:cM},JM=QM;function qM(e){var i=e5();return function(){var n=(0,rr.Z)(e),r;if(i){var o=(0,rr.Z)(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return(0,jn.Z)(this,r)}}function e5(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var Kg=function(e){(0,ui.Z)(t,e);var i=qM(t);function t(){var n;(0,Ur.Z)(this,t);for(var r=arguments.length,o=new Array(r),u=0;u<r;u++)o[u]=arguments[u];return n=i.call.apply(i,[this].concat(o)),(0,He.Z)((0,er.Z)(n),"type","LineLayer"),(0,He.Z)((0,er.Z)(n),"arrowInsertCount",0),(0,He.Z)((0,er.Z)(n),"defaultSourceConfig",{data:[{lng1:100,lat1:30,lng2:130,lat2:30}],options:{parser:{type:"json",x:"lng1",y:"lat1",x1:"lng2",y1:"lat2"}}}),n}return(0,Jr.Z)(t,[{key:"buildModels",value:function(){var n=(0,An.Z)(Nt().mark(function o(){var u;return Nt().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return u=this.getModelType(),this.layerModel=new JM[u](this),g.next=4,this.initLayerModels();case 4:case"end":return g.stop()}},o,this)}));function r(){return n.apply(this,arguments)}return r}()},{key:"getDefaultConfig",value:function(){var r=this.getModelType(),o={line:{},linearline:{},simple:{},wall:{},arc3d:{blend:"additive"},arc:{blend:"additive"},greatcircle:{blend:"additive"},tileLine:{},halfLine:{},earthArc3d:{}};return o[r]}},{key:"getModelType",value:function(){var r;if(this.layerType)return this.layerType;var o=this.styleAttributeService.getLayerStyleAttribute("shape"),u=o==null||(r=o.scale)===null||r===void 0?void 0:r.field;return u||"line"}},{key:"processData",value:function(r){if(this.getModelType()!=="simple")return r;var o=[];return r.map(function(u){if(Array.isArray(u.coordinates)&&Array.isArray(u.coordinates[0])&&Array.isArray(u.coordinates[0][0])){var f=(0,oe.Z)({},u);u.coordinates.map(function(g){o.push((0,oe.Z)((0,oe.Z)({},f),{},{coordinates:g}))})}else o.push(u)}),o}}]),t}($v);function t5(e){var i=r5();return function(){var n=(0,rr.Z)(e),r;if(i){var o=(0,rr.Z)(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return(0,jn.Z)(this,r)}}function r5(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var n5=`varying vec4 v_color;
uniform float u_opacity: 1.0;

uniform float u_pickLight: 0.0;

#pragma include "picking"

varying mat4 styleMappingMat; // \u4F20\u9012\u4ECE\u7247\u5143\u4E2D\u4F20\u9012\u7684\u6620\u5C04\u6570\u636E

uniform float u_linearColor: 0;
uniform vec4 u_sourceColor;
uniform vec4 u_targetColor;

uniform float u_opacitylinear: 0.0;
uniform float u_opacitylinear_dir: 1.0;

void main() {
  float opacity = styleMappingMat[0][0];
  float lightWeight = styleMappingMat[1][3];
  float barLinearZ = styleMappingMat[2][3];

  // \u8BBE\u7F6E\u5706\u67F1\u7684\u5E95\u8272
  if(u_linearColor == 1.0) { // \u4F7F\u7528\u6E10\u53D8\u989C\u8272
    gl_FragColor = mix(u_sourceColor, u_targetColor, barLinearZ);
    gl_FragColor.rgb *= lightWeight;
  } else { // \u4F7F\u7528 color \u65B9\u6CD5\u4F20\u5165\u7684\u989C\u8272
     gl_FragColor = v_color;
  }

  // \u5E94\u7528\u900F\u660E\u5EA6
  gl_FragColor.a *= opacity;

  // \u5F00\u542F\u900F\u660E\u5EA6\u6E10\u53D8
  if(u_opacitylinear > 0.0) {
    gl_FragColor.a *= u_opacitylinear_dir > 0.0 ? (1.0 - barLinearZ): barLinearZ;
  }

  // picking
  if(u_pickLight > 0.0) {
    gl_FragColor = filterColorAlpha(gl_FragColor, lightWeight);
  } else {
    gl_FragColor = filterColor(gl_FragColor);
  }
}
`,i5=`precision highp float;

#define pi 3.1415926535
#define ambientRatio 0.5
#define diffuseRatio 0.3
#define specularRatio 0.2

attribute vec3 a_Position;
attribute vec3 a_Pos;
attribute vec4 a_Color;
attribute vec3 a_Size;
attribute vec3 a_Normal;

uniform float u_heightfixed: 0.0; // \u9ED8\u8BA4\u4E0D\u56FA\u5B9A
uniform float u_globel;
uniform float u_r;
uniform mat4 u_ModelMatrix;
uniform mat4 u_Mvp;
varying vec4 v_color;

uniform float u_opacity : 1;
uniform float u_lightEnable: 1;

varying mat4 styleMappingMat; // \u7528\u4E8E\u5C06\u5728\u9876\u70B9\u7740\u8272\u5668\u4E2D\u8BA1\u7B97\u597D\u7684\u6837\u5F0F\u503C\u4F20\u9012\u7ED9\u7247\u5143

#pragma include "styleMapping"
#pragma include "styleMappingCalOpacity"

#pragma include "projection"
#pragma include "light"
#pragma include "picking"

float getYRadian(float x, float z) {
  if(x > 0.0 && z > 0.0) {
    return atan(x/z);
  } else if(x > 0.0 && z <= 0.0){
    return atan(-z/x) + pi/2.0;
  } else if(x <= 0.0 && z <= 0.0) {
    return  pi + atan(x/z); //atan(x/z) + 
  } else {
    return atan(z/-x) + pi*3.0/2.0;
  }
}

float getXRadian(float y, float r) {
  return atan(y/r);
}

void main() {

  // cal style mapping - \u6570\u636E\u7EB9\u7406\u6620\u5C04\u90E8\u5206\u7684\u8BA1\u7B97
  styleMappingMat = mat4(
    0.0, 0.0, 0.0, 0.0, // opacity - strokeOpacity - strokeWidth - empty
    0.0, 0.0, 0.0, 0.0, // strokeR - strokeG - strokeB - strokeA - lightWeight
    0.0, 0.0, 0.0, 0.0, // offsets[0] - offsets[1] - linearZ(\u5782\u76F4\u65B9\u5411 0 - 1 \u7684\u503C)
    0.0, 0.0, 0.0, 0.0
  );

  float rowCount = u_cellTypeLayout[0][0];    // \u5F53\u524D\u7684\u6570\u636E\u7EB9\u7406\u6709\u51E0\u884C
  float columnCount = u_cellTypeLayout[0][1]; // \u5F53\u770B\u5230\u6570\u636E\u7EB9\u7406\u6709\u51E0\u5217
  float columnWidth = 1.0/columnCount;  // \u5217\u5BBD
  float rowHeight = 1.0/rowCount;       // \u884C\u9AD8
  float cellCount = calCellCount(); // opacity - strokeOpacity - strokeWidth - stroke - offsets
  float id = a_vertexId; // \u7B2Cn\u4E2A\u9876\u70B9
  float cellCurrentRow = floor(id * cellCount / columnCount) + 1.0; // \u8D77\u59CB\u70B9\u5728\u7B2C\u51E0\u884C
  float cellCurrentColumn = mod(id * cellCount, columnCount) + 1.0; // \u8D77\u59CB\u70B9\u5728\u7B2C\u51E0\u5217
  
  // cell \u56FA\u5B9A\u987A\u5E8F opacity -> strokeOpacity -> strokeWidth -> stroke ... 
  // \u6309\u987A\u5E8F\u4ECE cell \u4E2D\u53D6\u503C\u3001\u82E5\u6CA1\u6709\u5219\u81EA\u52A8\u5F80\u4E0B\u53D6\u503C
  float textureOffset = 0.0; // \u5728 cell \u4E2D\u53D6\u503C\u7684\u504F\u79FB\u91CF

  vec2 opacityAndOffset = calOpacityAndOffset(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset, columnWidth, rowHeight);
  styleMappingMat[0][0] = opacityAndOffset.r;
  textureOffset = opacityAndOffset.g;
  // cal style mapping - \u6570\u636E\u7EB9\u7406\u6620\u5C04\u90E8\u5206\u7684\u8BA1\u7B97
  vec3 size = a_Size * a_Position;

  // a_Position.z \u662F\u5728\u6784\u5EFA\u7F51\u683C\u7684\u65F6\u5019\u4F20\u5165\u7684\u6807\u51C6\u503C 0 - 1\uFF0C\u5728\u63D2\u503C\u5668\u63D2\u503C\u53EF\u4EE5\u83B7\u53D6 0\uFF5E1 \u7EBF\u6027\u6E10\u53D8\u7684\u503C
  styleMappingMat[2][3] =  a_Position.z;

  vec3 offset = size; // \u63A7\u5236\u5706\u67F1\u4F53\u7684\u5927\u5C0F - \u4ECE\u6807\u51C6\u5355\u4F4D\u5706\u67F1\u4F53\u8FDB\u884C\u504F\u79FB
  if(u_heightfixed < 1.0) { // \u5706\u67F1\u4F53\u4E0D\u56FA\u5B9A\u9AD8\u5EA6
    
    if (u_CoordinateSystem == COORDINATE_SYSTEM_P20 || u_CoordinateSystem == COORDINATE_SYSTEM_P20_OFFSET) {
      // P20 \u5750\u6807\u7CFB\u4E0B\uFF0C\u4E3A\u4E86\u548C Web \u58A8\u5361\u6258\u5750\u6807\u7CFB\u7EDF\u4E00\uFF0Czoom \u9ED8\u8BA4\u51CF1
      offset = offset * pow(2.0, (19.0 - u_Zoom));
    }
    if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) {
      // P20_2 \u5750\u6807\u7CFB\u4E0B\uFF0C\u4E3A\u4E86\u548C Web \u58A8\u5361\u6258\u5750\u6807\u7CFB\u7EDF\u4E00\uFF0Czoom \u9ED8\u8BA4\u51CF3
      offset = offset * pow(2.0, (19.0 - 3.0 - u_Zoom));
    }
  } else {// \u5706\u67F1\u4F53\u56FA\u5B9A\u9AD8\u5EA6 \uFF08 \u5904\u7406 mapbox \uFF09
    if(u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT || u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {
      offset *= 4.0/pow(2.0, 21.0 - u_Zoom);
    }
  }


  vec4 project_pos = project_position(vec4(a_Pos.xy, 0., 1.0));

  // u_r \u63A7\u5236\u5706\u67F1\u7684\u751F\u957F
  vec4 pos = vec4(project_pos.xy + offset.xy, offset.z * u_r, 1.0);

  // \u5706\u67F1\u5149\u7167\u6548\u679C
  float lightWeight = 1.0;
  if(u_lightEnable > 0.0) { // \u53D6\u6D88\u4E09\u5143\u8868\u8FBE\u5F0F\uFF0C\u589E\u5F3A\u5065\u58EE\u6027
    lightWeight = calc_lighting(pos);
  }
  styleMappingMat[1][3] = lightWeight;

  v_color =vec4(a_Color.rgb * lightWeight, a_Color.w);

  
  // \u5728\u5730\u7403\u6A21\u5F0F\u4E0B\uFF0C\u5C06\u539F\u672C\u5782\u76F4\u4E8E xy \u5E73\u9762\u7684\u5706\u67F1\u8C03\u6574\u59FF\u6001\u5230\u9002\u5E94\u5706\u7684\u89D2\u5EA6
  //\u65CB\u8F6C\u77E9\u9635mx\uFF0C\u521B\u5EFA\u7ED5x\u8F74\u65CB\u8F6C\u77E9\u9635
  float r = sqrt(a_Pos.z*a_Pos.z + a_Pos.x*a_Pos.x);
  float xRadian = getXRadian(a_Pos.y, r);
  float xcos = cos(xRadian);//\u6C42\u89E3\u65CB\u8F6C\u89D2\u5EA6\u4F59\u5F26\u503C
  float xsin = sin(xRadian);//\u6C42\u89E3\u65CB\u8F6C\u89D2\u5EA6\u6B63\u5F26\u503C
  mat4 mx = mat4(
    1,0,0,0,  
    0,xcos,-xsin,0,  
    0,xsin,xcos,0,  
    0,0,0,1);

  //\u65CB\u8F6C\u77E9\u9635my\uFF0C\u521B\u5EFA\u7ED5y\u8F74\u65CB\u8F6C\u77E9\u9635
  float yRadian = getYRadian(a_Pos.x, a_Pos.z);
  float ycos = cos(yRadian);//\u6C42\u89E3\u65CB\u8F6C\u89D2\u5EA6\u4F59\u5F26\u503C
  float ysin = sin(yRadian);//\u6C42\u89E3\u65CB\u8F6C\u89D2\u5EA6\u6B63\u5F26\u503C
  mat4 my = mat4(
    ycos,0,-ysin,0,  
    0,1,0,0,  
    ysin,0,ycos,0,  
    0,0,0,1);

  gl_Position = u_ViewProjectionMatrix * vec4(( my * mx *  vec4(a_Position * a_Size, 1.0)).xyz + a_Pos, 1.0);
  

  setPickingColor(a_PickingColor);
}
`,a5=function(e){(0,ui.Z)(t,e);var i=t5(t);function t(){var n;(0,Ur.Z)(this,t);for(var r=arguments.length,o=new Array(r),u=0;u<r;u++)o[u]=arguments[u];return n=i.call.apply(i,[this].concat(o)),(0,He.Z)((0,er.Z)(n),"raiseCount",0),(0,He.Z)((0,er.Z)(n),"raiseRepeat",0),n}return(0,Jr.Z)(t,[{key:"getUninforms",value:function(){var r=this.layer.getLayerConfig(),o=r.animateOption,u=o===void 0?{enable:!1,speed:.01,repeat:!1}:o,f=r.opacity,g=f===void 0?1:f,x=r.sourceColor,I=r.targetColor,P=r.pickLight,G=P===void 0?!1:P,$=r.heightfixed,Ee=$===void 0?!1:$,Se=r.opacityLinear,Re=Se===void 0?{enable:!1,dir:"up"}:Se,Ye=r.lightEnable,St=Ye===void 0?!0:Ye;if(this.dataTextureTest&&this.dataTextureNeedUpdate({opacity:g})){this.judgeStyleAttributes({opacity:g});var vt=this.layer.getEncodedData(),Ut=this.calDataFrame(this.cellLength,vt,this.cellProperties),Kt=Ut.data,Tr=Ut.width,on=Ut.height;this.rowCount=on,this.dataTexture=this.cellLength>0&&Kt.length>0?this.createTexture2D({flipY:!0,data:Kt,format:$e.LUMINANCE,type:$e.FLOAT,width:Tr,height:on}):this.createTexture2D({flipY:!0,data:[1],format:$e.LUMINANCE,type:$e.FLOAT,width:1,height:1})}var dn=0,vn=[0,0,0,0],si=[0,0,0,0];if(x&&I&&(vn=co(x),si=co(I),dn=1),this.raiseCount<1&&this.raiseRepeat>0&&u.enable){var ai=u.speed,Hi=ai===void 0?.01:ai;this.raiseCount+=Hi,this.raiseCount>=1&&(this.raiseRepeat>1?(this.raiseCount=0,this.raiseRepeat--):this.raiseCount=1)}return{u_pickLight:Number(G),u_heightfixed:Number(Ee),u_r:u.enable&&this.raiseRepeat>0?this.raiseCount:1,u_dataTexture:this.dataTexture,u_cellTypeLayout:this.getCellTypeLayout(),u_opacity:(0,Wr.isNumber)(g)?g:1,u_linearColor:dn,u_sourceColor:vn,u_targetColor:si,u_opacitylinear:Number(Re.enable),u_opacitylinear_dir:Re.dir==="up"?1:0,u_lightEnable:Number(St)}}},{key:"initModels",value:function(){var n=(0,An.Z)(Nt().mark(function o(){return Nt().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return f.next=2,this.buildModels();case 2:return f.abrupt("return",f.sent);case 3:case"end":return f.stop()}},o,this)}));function r(){return n.apply(this,arguments)}return r}()},{key:"buildModels",value:function(){var n=(0,An.Z)(Nt().mark(function o(){var u,f,g,x;return Nt().wrap(function(P){for(;;)switch(P.prev=P.next){case 0:return u=this.layer.getLayerConfig(),f=u.animateOption.repeat,g=f===void 0?1:f,this.raiseRepeat=g,P.next=4,this.layer.buildLayerModel({moduleName:"pointEarthExtrude",vertexShader:i5,fragmentShader:n5,triangulation:Xx,depth:{enable:!0},cull:{enable:!0,face:is(this.mapService.version)},blend:this.getBlend()});case 4:return x=P.sent,P.abrupt("return",[x]);case 6:case"end":return P.stop()}},o,this)}));function r(){return n.apply(this,arguments)}return r}()},{key:"clearModels",value:function(){var r;(r=this.dataTexture)===null||r===void 0||r.destroy()}},{key:"registerBuiltinAttributes",value:function(){this.styleAttributeService.registerStyleAttribute({name:"size",type:ja.Attribute,descriptor:{name:"a_Size",buffer:{usage:$e.DYNAMIC_DRAW,data:[],type:$e.FLOAT},size:3,update:function(o){var u=o.size;if(u){var f=[];return Array.isArray(u)&&(f=u.length===2?[u[0],u[0],u[1]]:u),Array.isArray(u)||(f=[u,u,u]),f}else return[2,2,2]}}}),this.styleAttributeService.registerStyleAttribute({name:"normal",type:ja.Attribute,descriptor:{name:"a_Normal",buffer:{usage:$e.STATIC_DRAW,data:[],type:$e.FLOAT},size:3,update:function(o,u,f,g,x){return x}}}),this.styleAttributeService.registerStyleAttribute({name:"pos",type:ja.Attribute,descriptor:{name:"a_Pos",buffer:{usage:$e.DYNAMIC_DRAW,data:[],type:$e.FLOAT},size:3,update:function(o){var u=d(o.coordinates);return Ox([u[0],u[1]])}}})}}]),t}(Sl);function o5(e){var i=s5();return function(){var n=(0,rr.Z)(e),r;if(i){var o=(0,rr.Z)(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return(0,jn.Z)(this,r)}}function s5(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var u5=`uniform float u_additive;

varying mat4 styleMappingMat; // \u4F20\u9012\u4ECE\u7247\u5143\u4E2D\u4F20\u9012\u7684\u6620\u5C04\u6570\u636E

varying vec4 v_data;
varying vec4 v_color;
varying float v_radius;

#pragma include "sdf_2d"
#pragma include "picking"


void main() {
  int shape = int(floor(v_data.w + 0.5));

  vec4 textrueStroke = vec4(
    styleMappingMat[1][0],
    styleMappingMat[1][1],
    styleMappingMat[1][2],
    styleMappingMat[1][3]
  );

  float opacity = styleMappingMat[0][0];
  float stroke_opacity = styleMappingMat[0][1];
  float strokeWidth = styleMappingMat[0][2];
  vec4 strokeColor = textrueStroke == vec4(0) ? v_color : textrueStroke;

  lowp float antialiasblur = v_data.z;
  float r = v_radius / (v_radius + strokeWidth);

  float outer_df;
  float inner_df;
  // 'circle', 'triangle', 'square', 'pentagon', 'hexagon', 'octogon', 'hexagram', 'rhombus', 'vesica'
  if (shape == 0) {
    outer_df = sdCircle(v_data.xy, 1.0);
    inner_df = sdCircle(v_data.xy, r);
  } else if (shape == 1) {
    outer_df = sdEquilateralTriangle(1.1 * v_data.xy);
    inner_df = sdEquilateralTriangle(1.1 / r * v_data.xy);
  } else if (shape == 2) {
    outer_df = sdBox(v_data.xy, vec2(1.));
    inner_df = sdBox(v_data.xy, vec2(r));
  } else if (shape == 3) {
    outer_df = sdPentagon(v_data.xy, 0.8);
    inner_df = sdPentagon(v_data.xy, r * 0.8);
  } else if (shape == 4) {
    outer_df = sdHexagon(v_data.xy, 0.8);
    inner_df = sdHexagon(v_data.xy, r * 0.8);
  } else if (shape == 5) {
    outer_df = sdOctogon(v_data.xy, 1.0);
    inner_df = sdOctogon(v_data.xy, r);
  } else if (shape == 6) {
    outer_df = sdHexagram(v_data.xy, 0.52);
    inner_df = sdHexagram(v_data.xy, r * 0.52);
  } else if (shape == 7) {
    outer_df = sdRhombus(v_data.xy, vec2(1.0));
    inner_df = sdRhombus(v_data.xy, vec2(r));
  } else if (shape == 8) {
    outer_df = sdVesica(v_data.xy, 1.1, 0.8);
    inner_df = sdVesica(v_data.xy, r * 1.1, r * 0.8);
  }

  if(outer_df > antialiasblur + 0.018) discard;

  float opacity_t = smoothstep(0.0, antialiasblur, outer_df);

  float color_t = strokeWidth < 0.01 ? 0.0 : smoothstep(
    antialiasblur,
    0.0,
    inner_df
  );

  if(strokeWidth < 0.01) {
    gl_FragColor = vec4(v_color.rgb, v_color.a * opacity);
  } else {
    gl_FragColor = mix(vec4(v_color.rgb, v_color.a * opacity), strokeColor * stroke_opacity, color_t);
  }

  if(u_additive > 0.0) {
    gl_FragColor *= opacity_t;
    gl_FragColor = filterColorAlpha(gl_FragColor, gl_FragColor.a);
  } else {
    gl_FragColor.a *= opacity_t;
    gl_FragColor = filterColor(gl_FragColor);
  }
}
`,l5=`attribute vec4 a_Color;
attribute vec3 a_Position;
attribute vec3 a_Extrude;
attribute float a_Size;
attribute float a_Shape;

varying mat4 styleMappingMat; // \u7528\u4E8E\u5C06\u5728\u9876\u70B9\u7740\u8272\u5668\u4E2D\u8BA1\u7B97\u597D\u7684\u6837\u5F0F\u503C\u4F20\u9012\u7ED9\u7247\u5143

uniform mat4 u_ModelMatrix;
uniform mat4 u_Mvp;

varying vec4 v_data;
varying vec4 v_color;
varying float v_radius;

uniform float u_opacity : 1;
uniform float u_stroke_opacity : 1;
uniform float u_stroke_width : 2;
uniform vec4 u_stroke_color : [0.0, 0.0, 0.0, 0.0];
uniform vec2 u_offsets;

uniform float u_blur : 0.0;

#pragma include "styleMapping"
#pragma include "styleMappingCalOpacity"
#pragma include "styleMappingCalStrokeOpacity"
#pragma include "styleMappingCalStrokeWidth"

#pragma include "projection"
#pragma include "picking"


void main() {
  vec3 extrude = a_Extrude;
  float shape_type = a_Shape;
  /*
  *  setPickingSize \u8BBE\u7F6E\u62FE\u53D6\u5927\u5C0F
  */
  float newSize = setPickingSize(a_Size);
  // float newSize = setPickingSize(a_Size) * 0.00001038445708445579;

  // cal style mapping - \u6570\u636E\u7EB9\u7406\u6620\u5C04\u90E8\u5206\u7684\u8BA1\u7B97
  styleMappingMat = mat4(
    0.0, 0.0, 0.0, 0.0, // opacity - strokeOpacity - strokeWidth - empty
    0.0, 0.0, 0.0, 0.0, // strokeR - strokeG - strokeB - strokeA
    0.0, 0.0, 0.0, 0.0, // offsets[0] - offsets[1]
    0.0, 0.0, 0.0, 0.0
  );

  float rowCount = u_cellTypeLayout[0][0];    // \u5F53\u524D\u7684\u6570\u636E\u7EB9\u7406\u6709\u51E0\u884C
  float columnCount = u_cellTypeLayout[0][1]; // \u5F53\u770B\u5230\u6570\u636E\u7EB9\u7406\u6709\u51E0\u5217
  float columnWidth = 1.0/columnCount;  // \u5217\u5BBD
  float rowHeight = 1.0/rowCount;       // \u884C\u9AD8
  float cellCount = calCellCount(); // opacity - strokeOpacity - strokeWidth - stroke - offsets
  float id = a_vertexId; // \u7B2Cn\u4E2A\u9876\u70B9
  float cellCurrentRow = floor(id * cellCount / columnCount) + 1.0; // \u8D77\u59CB\u70B9\u5728\u7B2C\u51E0\u884C
  float cellCurrentColumn = mod(id * cellCount, columnCount) + 1.0; // \u8D77\u59CB\u70B9\u5728\u7B2C\u51E0\u5217
  
  // cell \u56FA\u5B9A\u987A\u5E8F opacity -> strokeOpacity -> strokeWidth -> stroke ... 
  // \u6309\u987A\u5E8F\u4ECE cell \u4E2D\u53D6\u503C\u3001\u82E5\u6CA1\u6709\u5219\u81EA\u52A8\u5F80\u4E0B\u53D6\u503C
  float textureOffset = 0.0; // \u5728 cell \u4E2D\u53D6\u503C\u7684\u504F\u79FB\u91CF

  vec2 opacityAndOffset = calOpacityAndOffset(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset, columnWidth, rowHeight);
  styleMappingMat[0][0] = opacityAndOffset.r;
  textureOffset = opacityAndOffset.g;

  vec2 strokeOpacityAndOffset = calStrokeOpacityAndOffset(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset, columnWidth, rowHeight);
  styleMappingMat[0][1] = strokeOpacityAndOffset.r;
  textureOffset = strokeOpacityAndOffset.g;

  vec2 strokeWidthAndOffset = calStrokeWidthAndOffset(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset, columnWidth, rowHeight);
  styleMappingMat[0][2] = strokeWidthAndOffset.r;
  textureOffset = strokeWidthAndOffset.g;

  vec4 textrueStroke = vec4(-1.0, -1.0, -1.0, -1.0);
  if(hasStroke()) {
    vec2 valueRPos = nextPos(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset);
    styleMappingMat[1][0] = pos2value(valueRPos, columnWidth, rowHeight); // R
    textureOffset += 1.0;

    vec2 valueGPos = nextPos(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset);
    styleMappingMat[1][1] = pos2value(valueGPos, columnWidth, rowHeight); // G
    textureOffset += 1.0;

    vec2 valueBPos = nextPos(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset);
    styleMappingMat[1][2] = pos2value(valueBPos, columnWidth, rowHeight); // B
    textureOffset += 1.0;

    vec2 valueAPos = nextPos(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset);
    styleMappingMat[1][3] = pos2value(valueAPos, columnWidth, rowHeight); // A
    textureOffset += 1.0;
  } else {
    if(u_stroke_color == vec4(0.0)) {
      styleMappingMat[1][0] = v_color.r;
      styleMappingMat[1][1] = v_color.g;
      styleMappingMat[1][2] = v_color.b;
      styleMappingMat[1][3] = v_color.a;
    } else {
      styleMappingMat[1][0] = u_stroke_color.r;
      styleMappingMat[1][1] = u_stroke_color.g;
      styleMappingMat[1][2] = u_stroke_color.b;
      styleMappingMat[1][3] = u_stroke_color.a;
    }
  }

  // cal style mapping

  // unpack color(vec2)
  v_color = a_Color;

  // radius(16-bit)
  v_radius = newSize;

  // anti-alias
  //  float antialiased_blur = -max(u_blur, antialiasblur);
  float antialiasblur = -max(2.0 / u_DevicePixelRatio / newSize, u_blur);

  // TODP: /abs(extrude.x) \u662F\u4E3A\u4E86\u517C\u5BB9\u5730\u7403\u6A21\u5F0F
  v_data = vec4(extrude.x/abs(extrude.x), extrude.y/abs(extrude.y), antialiasblur,shape_type);


  gl_Position = u_ViewProjectionMatrix * vec4(a_Position + extrude * newSize * 0.1, 1.0);

  setPickingColor(a_PickingColor);
}
`,c5=function(e){(0,ui.Z)(t,e);var i=o5(t);function t(){return(0,Ur.Z)(this,t),i.apply(this,arguments)}return(0,Jr.Z)(t,[{key:"getUninforms",value:function(){var r=this.layer.getLayerConfig(),o=r.opacity,u=o===void 0?1:o,f=r.strokeOpacity,g=f===void 0?1:f,x=r.strokeWidth,I=x===void 0?0:x,P=r.stroke,G=P===void 0?"rgba(0,0,0,0)":P,$=r.offsets,Ee=$===void 0?[0,0]:$,Se=r.blend,Re=r.blur,Ye=Re===void 0?0:Re;if(this.dataTextureTest&&this.dataTextureNeedUpdate({opacity:u,strokeOpacity:g,strokeWidth:I,stroke:G,offsets:Ee})){this.judgeStyleAttributes({opacity:u,strokeOpacity:g,strokeWidth:I,stroke:G,offsets:Ee});var St=this.layer.getEncodedData(),vt=this.calDataFrame(this.cellLength,St,this.cellProperties),Ut=vt.data,Kt=vt.width,Tr=vt.height;this.rowCount=Tr,this.dataTexture=this.cellLength>0&&Ut.length>0?this.createTexture2D({flipY:!0,data:Ut,format:$e.LUMINANCE,type:$e.FLOAT,width:Kt,height:Tr}):this.createTexture2D({flipY:!0,data:[1],format:$e.LUMINANCE,type:$e.FLOAT,width:1,height:1})}return{u_blur:Ye,u_additive:Se==="additive"?1:0,u_dataTexture:this.dataTexture,u_cellTypeLayout:this.getCellTypeLayout(),u_opacity:(0,Wr.isNumber)(u)?u:1,u_stroke_opacity:(0,Wr.isNumber)(g)?g:1,u_stroke_width:(0,Wr.isNumber)(I)?I:1,u_stroke_color:this.getStrokeColor(G),u_offsets:this.isOffsetStatic(Ee)?Ee:[0,0]}}},{key:"getAnimateUniforms",value:function(){var r=this.layer.getLayerConfig(),o=r.animateOption,u=o===void 0?{enable:!1}:o;return{u_animate:this.animateOption2Array(u),u_time:this.layer.getLayerAnimateTime()}}},{key:"initModels",value:function(){var n=(0,An.Z)(Nt().mark(function o(){return Nt().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return f.next=2,this.buildModels();case 2:return f.abrupt("return",f.sent);case 3:case"end":return f.stop()}},o,this)}));function r(){return n.apply(this,arguments)}return r}()},{key:"buildModels",value:function(){var n=(0,An.Z)(Nt().mark(function o(){var u;return Nt().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return this.layer.triangulation=$x,g.next=3,this.layer.buildLayerModel({moduleName:"pointEarthFill",vertexShader:l5,fragmentShader:u5,triangulation:$x,depth:{enable:!0},blend:this.getBlend()});case 3:return u=g.sent,g.abrupt("return",[u]);case 5:case"end":return g.stop()}},o,this)}));function r(){return n.apply(this,arguments)}return r}()},{key:"clearModels",value:function(){var r;(r=this.dataTexture)===null||r===void 0||r.destroy()}},{key:"animateOption2Array",value:function(r){return[r.enable?0:1,r.speed||1,r.rings||3,0]}},{key:"registerBuiltinAttributes",value:function(){var r=this;this.styleAttributeService.registerStyleAttribute({name:"extrude",type:ja.Attribute,descriptor:{name:"a_Extrude",buffer:{usage:$e.DYNAMIC_DRAW,data:[],type:$e.FLOAT},size:3,update:function(u,f,g,x){var I=(0,Mr.Z)(g,3),P=I[0],G=I[1],$=I[2],Ee=lp(0,0,1),Se=lp(P,0,$),Re=P>=0?Wg(Ee,Se):Math.PI*2-Wg(Ee,Se),Ye=Math.PI*2-Math.asin(G/100),St=no();ad(St,St,Re),hh(St,St,Ye);var vt=lp(1,1,0);C0(vt,vt,St),Qv(vt,vt);var Ut=lp(-1,1,0);C0(Ut,Ut,St),Qv(Ut,Ut);var Kt=lp(-1,-1,0);C0(Kt,Kt,St),Qv(Kt,Kt);var Tr=lp(1,-1,0);C0(Tr,Tr,St),Qv(Tr,Tr);var on=[].concat((0,ie.Z)(vt),(0,ie.Z)(Ut),(0,ie.Z)(Kt),(0,ie.Z)(Tr)),dn=x%4*3;return[on[dn],on[dn+1],on[dn+2]]}}}),this.styleAttributeService.registerStyleAttribute({name:"size",type:ja.Attribute,descriptor:{name:"a_Size",buffer:{usage:$e.DYNAMIC_DRAW,data:[],type:$e.FLOAT},size:1,update:function(u){var f=u.size,g=f===void 0?5:f;return Array.isArray(g)?[g[0]]:[g]}}}),this.styleAttributeService.registerStyleAttribute({name:"shape",type:ja.Attribute,descriptor:{name:"a_Shape",buffer:{usage:$e.DYNAMIC_DRAW,data:[],type:$e.FLOAT},size:1,update:function(u){var f=u.shape,g=f===void 0?2:f,x=r.layer.getLayerConfig().shape2d,I=x.indexOf(g);return[I]}}})}}]),t}(Sl);function f5(e){var i=p5();return function(){var n=(0,rr.Z)(e),r;if(i){var o=(0,rr.Z)(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return(0,jn.Z)(this,r)}}function p5(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var h5=`varying vec4 v_color;
uniform float u_opacity: 1.0;

uniform float u_pickLight: 0.0;

#pragma include "picking"

varying mat4 styleMappingMat; // \u4F20\u9012\u4ECE\u7247\u5143\u4E2D\u4F20\u9012\u7684\u6620\u5C04\u6570\u636E

uniform float u_linearColor: 0;
uniform vec4 u_sourceColor;
uniform vec4 u_targetColor;

uniform float u_opacitylinear: 0.0;
uniform float u_opacitylinear_dir: 1.0;

void main() {
  float opacity = styleMappingMat[0][0];
  float lightWeight = styleMappingMat[1][3];
  float barLinearZ = styleMappingMat[2][3];

  // \u8BBE\u7F6E\u5706\u67F1\u7684\u5E95\u8272
  if(u_linearColor == 1.0) { // \u4F7F\u7528\u6E10\u53D8\u989C\u8272
    gl_FragColor = mix(u_sourceColor, u_targetColor, barLinearZ);
    gl_FragColor.rgb *= lightWeight;
  } else { // \u4F7F\u7528 color \u65B9\u6CD5\u4F20\u5165\u7684\u989C\u8272
     gl_FragColor = v_color;
  }

  // \u5E94\u7528\u900F\u660E\u5EA6
  gl_FragColor.a *= opacity;

  // \u5F00\u542F\u900F\u660E\u5EA6\u6E10\u53D8
  if(u_opacitylinear > 0.0) {
    gl_FragColor.a *= u_opacitylinear_dir > 0.0 ? (1.0 - barLinearZ): barLinearZ;
  }

  // picking
  if(u_pickLight > 0.0) {
    gl_FragColor = filterColorAlpha(gl_FragColor, lightWeight);
  } else {
    gl_FragColor = filterColor(gl_FragColor);
  }
}
`,d5=`precision highp float;

#define pi 3.1415926535
#define ambientRatio 0.5
#define diffuseRatio 0.3
#define specularRatio 0.2

attribute vec3 a_Position;
attribute vec3 a_Pos;
attribute vec4 a_Color;
attribute vec3 a_Size;
attribute vec3 a_Normal;

uniform float u_heightfixed: 0.0; // \u9ED8\u8BA4\u4E0D\u56FA\u5B9A
uniform float u_r;
uniform mat4 u_ModelMatrix;
uniform mat4 u_Mvp;
varying vec4 v_color;

uniform float u_opacity : 1;
uniform float u_lightEnable: 1;

varying mat4 styleMappingMat; // \u7528\u4E8E\u5C06\u5728\u9876\u70B9\u7740\u8272\u5668\u4E2D\u8BA1\u7B97\u597D\u7684\u6837\u5F0F\u503C\u4F20\u9012\u7ED9\u7247\u5143

#pragma include "styleMapping"
#pragma include "styleMappingCalOpacity"

#pragma include "projection"
#pragma include "light"
#pragma include "picking"

float getYRadian(float x, float z) {
  if(x > 0.0 && z > 0.0) {
    return atan(x/z);
  } else if(x > 0.0 && z <= 0.0){
    return atan(-z/x) + pi/2.0;
  } else if(x <= 0.0 && z <= 0.0) {
    return  pi + atan(x/z); //atan(x/z) + 
  } else {
    return atan(z/-x) + pi*3.0/2.0;
  }
}

float getXRadian(float y, float r) {
  return atan(y/r);
}

void main() {

  // cal style mapping - \u6570\u636E\u7EB9\u7406\u6620\u5C04\u90E8\u5206\u7684\u8BA1\u7B97
  styleMappingMat = mat4(
    0.0, 0.0, 0.0, 0.0, // opacity - strokeOpacity - strokeWidth - empty
    0.0, 0.0, 0.0, 0.0, // strokeR - strokeG - strokeB - strokeA - lightWeight
    0.0, 0.0, 0.0, 0.0, // offsets[0] - offsets[1] - linearZ(\u5782\u76F4\u65B9\u5411 0 - 1 \u7684\u503C)
    0.0, 0.0, 0.0, 0.0
  );

  float rowCount = u_cellTypeLayout[0][0];    // \u5F53\u524D\u7684\u6570\u636E\u7EB9\u7406\u6709\u51E0\u884C
  float columnCount = u_cellTypeLayout[0][1]; // \u5F53\u770B\u5230\u6570\u636E\u7EB9\u7406\u6709\u51E0\u5217
  float columnWidth = 1.0/columnCount;  // \u5217\u5BBD
  float rowHeight = 1.0/rowCount;       // \u884C\u9AD8
  float cellCount = calCellCount(); // opacity - strokeOpacity - strokeWidth - stroke - offsets
  float id = a_vertexId; // \u7B2Cn\u4E2A\u9876\u70B9
  float cellCurrentRow = floor(id * cellCount / columnCount) + 1.0; // \u8D77\u59CB\u70B9\u5728\u7B2C\u51E0\u884C
  float cellCurrentColumn = mod(id * cellCount, columnCount) + 1.0; // \u8D77\u59CB\u70B9\u5728\u7B2C\u51E0\u5217
  
  // cell \u56FA\u5B9A\u987A\u5E8F opacity -> strokeOpacity -> strokeWidth -> stroke ... 
  // \u6309\u987A\u5E8F\u4ECE cell \u4E2D\u53D6\u503C\u3001\u82E5\u6CA1\u6709\u5219\u81EA\u52A8\u5F80\u4E0B\u53D6\u503C
  float textureOffset = 0.0; // \u5728 cell \u4E2D\u53D6\u503C\u7684\u504F\u79FB\u91CF

  vec2 opacityAndOffset = calOpacityAndOffset(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset, columnWidth, rowHeight);
  styleMappingMat[0][0] = opacityAndOffset.r;
  textureOffset = opacityAndOffset.g;
  // cal style mapping - \u6570\u636E\u7EB9\u7406\u6620\u5C04\u90E8\u5206\u7684\u8BA1\u7B97
  vec3 size = a_Size * a_Position;

  // a_Position.z \u662F\u5728\u6784\u5EFA\u7F51\u683C\u7684\u65F6\u5019\u4F20\u5165\u7684\u6807\u51C6\u503C 0 - 1\uFF0C\u5728\u63D2\u503C\u5668\u63D2\u503C\u53EF\u4EE5\u83B7\u53D6 0\uFF5E1 \u7EBF\u6027\u6E10\u53D8\u7684\u503C
  styleMappingMat[2][3] =  a_Position.z;

  vec3 offset = size; // \u63A7\u5236\u5706\u67F1\u4F53\u7684\u5927\u5C0F - \u4ECE\u6807\u51C6\u5355\u4F4D\u5706\u67F1\u4F53\u8FDB\u884C\u504F\u79FB
  if(u_heightfixed < 1.0) { // \u5706\u67F1\u4F53\u4E0D\u56FA\u5B9A\u9AD8\u5EA6
    
    if (u_CoordinateSystem == COORDINATE_SYSTEM_P20 || u_CoordinateSystem == COORDINATE_SYSTEM_P20_OFFSET) {
      // P20 \u5750\u6807\u7CFB\u4E0B\uFF0C\u4E3A\u4E86\u548C Web \u58A8\u5361\u6258\u5750\u6807\u7CFB\u7EDF\u4E00\uFF0Czoom \u9ED8\u8BA4\u51CF1
      offset = offset * pow(2.0, (19.0 - u_Zoom));
    }
    if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) {
      // P20_2 \u5750\u6807\u7CFB\u4E0B\uFF0C\u4E3A\u4E86\u548C Web \u58A8\u5361\u6258\u5750\u6807\u7CFB\u7EDF\u4E00\uFF0Czoom \u9ED8\u8BA4\u51CF3
      offset = offset * pow(2.0, (19.0 - 3.0 - u_Zoom));
    }
  } else {// \u5706\u67F1\u4F53\u56FA\u5B9A\u9AD8\u5EA6 \uFF08 \u5904\u7406 mapbox \uFF09
    if(u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT || u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {
      offset *= 4.0/pow(2.0, 21.0 - u_Zoom);
    }
  }


  vec4 project_pos = project_position(vec4(a_Pos.xy, 0., 1.0));

  // u_r \u63A7\u5236\u5706\u67F1\u7684\u751F\u957F
  vec4 pos = vec4(project_pos.xy + offset.xy, offset.z * u_r, 1.0);

  // \u5706\u67F1\u5149\u7167\u6548\u679C
  float lightWeight = 1.0;
  if(u_lightEnable > 0.0) { // \u53D6\u6D88\u4E09\u5143\u8868\u8FBE\u5F0F\uFF0C\u589E\u5F3A\u5065\u58EE\u6027
    lightWeight = calc_lighting(pos);
  }
  styleMappingMat[1][3] = lightWeight;

  v_color =vec4(a_Color.rgb * lightWeight, a_Color.w);

  // gl_Position = project_common_position_to_clipspace(pos);

  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x
    gl_Position = u_Mvp * pos;
  } else {
    gl_Position = project_common_position_to_clipspace(pos);
  }

  setPickingColor(a_PickingColor);
}
`,tb=function(e){(0,ui.Z)(t,e);var i=f5(t);function t(){var n;(0,Ur.Z)(this,t);for(var r=arguments.length,o=new Array(r),u=0;u<r;u++)o[u]=arguments[u];return n=i.call.apply(i,[this].concat(o)),(0,He.Z)((0,er.Z)(n),"raiseCount",0),(0,He.Z)((0,er.Z)(n),"raiseRepeat",0),n}return(0,Jr.Z)(t,[{key:"getUninforms",value:function(){var r=this.layer.getLayerConfig(),o=r.animateOption,u=o===void 0?{enable:!1,speed:.01,repeat:!1}:o,f=r.opacity,g=f===void 0?1:f,x=r.sourceColor,I=r.targetColor,P=r.pickLight,G=P===void 0?!1:P,$=r.heightfixed,Ee=$===void 0?!1:$,Se=r.opacityLinear,Re=Se===void 0?{enable:!1,dir:"up"}:Se,Ye=r.lightEnable,St=Ye===void 0?!0:Ye;if(this.dataTextureTest&&this.dataTextureNeedUpdate({opacity:g})){this.judgeStyleAttributes({opacity:g});var vt=this.layer.getEncodedData(),Ut=this.calDataFrame(this.cellLength,vt,this.cellProperties),Kt=Ut.data,Tr=Ut.width,on=Ut.height;this.rowCount=on,this.dataTexture=this.cellLength>0&&Kt.length>0?this.createTexture2D({flipY:!0,data:Kt,format:$e.LUMINANCE,type:$e.FLOAT,width:Tr,height:on}):this.createTexture2D({flipY:!0,data:[1],format:$e.LUMINANCE,type:$e.FLOAT,width:1,height:1})}var dn=0,vn=[0,0,0,0],si=[0,0,0,0];if(x&&I&&(vn=co(x),si=co(I),dn=1),this.raiseCount<1&&this.raiseRepeat>0&&u.enable){var ai=u.speed,Hi=ai===void 0?.01:ai;this.raiseCount+=Hi,this.raiseCount>=1&&(this.raiseRepeat>1?(this.raiseCount=0,this.raiseRepeat--):this.raiseCount=1)}return{u_pickLight:Number(G),u_heightfixed:Number(Ee),u_r:u.enable&&this.raiseRepeat>0?this.raiseCount:1,u_dataTexture:this.dataTexture,u_cellTypeLayout:this.getCellTypeLayout(),u_opacity:(0,Wr.isNumber)(g)?g:1,u_linearColor:dn,u_sourceColor:vn,u_targetColor:si,u_opacitylinear:Number(Re.enable),u_opacitylinear_dir:Re.dir==="up"?1:0,u_lightEnable:Number(St)}}},{key:"initModels",value:function(){var n=(0,An.Z)(Nt().mark(function o(){return Nt().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return f.next=2,this.buildModels();case 2:return f.abrupt("return",f.sent);case 3:case"end":return f.stop()}},o,this)}));function r(){return n.apply(this,arguments)}return r}()},{key:"buildModels",value:function(){var n=(0,An.Z)(Nt().mark(function o(){var u,f,g,x,I,P;return Nt().wrap(function($){for(;;)switch($.prev=$.next){case 0:return u=this.layer.getLayerConfig(),f=u.depth,g=f===void 0?!0:f,x=u.animateOption.repeat,I=x===void 0?1:x,this.raiseRepeat=I,$.next=4,this.layer.buildLayerModel({moduleName:"pointExtrude",vertexShader:d5,fragmentShader:h5,triangulation:Xx,blend:this.getBlend(),cull:{enable:!0,face:is(this.mapService.version)},depth:{enable:g}});case 4:return P=$.sent,$.abrupt("return",[P]);case 6:case"end":return $.stop()}},o,this)}));function r(){return n.apply(this,arguments)}return r}()},{key:"clearModels",value:function(){var r;(r=this.dataTexture)===null||r===void 0||r.destroy()}},{key:"registerBuiltinAttributes",value:function(){this.styleAttributeService.registerStyleAttribute({name:"size",type:ja.Attribute,descriptor:{name:"a_Size",buffer:{usage:$e.DYNAMIC_DRAW,data:[],type:$e.FLOAT},size:3,update:function(o){var u=o.size;if(u){var f=[];return Array.isArray(u)&&(f=u.length===2?[u[0],u[0],u[1]]:u),Array.isArray(u)||(f=[u,u,u]),f}else return[2,2,2]}}}),this.styleAttributeService.registerStyleAttribute({name:"normal",type:ja.Attribute,descriptor:{name:"a_Normal",buffer:{usage:$e.STATIC_DRAW,data:[],type:$e.FLOAT},size:3,update:function(o,u,f,g,x){return x}}}),this.styleAttributeService.registerStyleAttribute({name:"pos",type:ja.Attribute,descriptor:{name:"a_Pos",buffer:{usage:$e.DYNAMIC_DRAW,data:[],type:$e.FLOAT},size:3,update:function(o){var u=d(o.coordinates);return[u[0],u[1],0]}}})}}]),t}(Sl);function v5(e){var i=m5();return function(){var n=(0,rr.Z)(e),r;if(i){var o=(0,rr.Z)(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return(0,jn.Z)(this,r)}}function m5(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var rb=`
uniform float u_additive;

varying mat4 styleMappingMat; // \u4F20\u9012\u4ECE\u7247\u5143\u4E2D\u4F20\u9012\u7684\u6620\u5C04\u6570\u636E

varying vec4 v_data;
varying vec4 v_color;
varying float v_radius;
uniform float u_time;
uniform vec4 u_animate: [ 1., 2., 1.0, 0.2 ];

#pragma include "sdf_2d"
#pragma include "picking"

void main() {

  vec4 textrueStroke = vec4(
    styleMappingMat[1][0],
    styleMappingMat[1][1],
    styleMappingMat[1][2],
    styleMappingMat[1][3]
  );

  float opacity = styleMappingMat[0][0];

  lowp float antialiasblur = v_data.z;
  float r = v_radius / (v_radius);

  float outer_df;
  float inner_df;
  // 'circle', 'triangle', 'square', 'pentagon', 'hexagon', 'octogon', 'hexagram', 'rhombus', 'vesica'
  
  outer_df = sdCircle(v_data.xy, 1.0);
  inner_df = sdCircle(v_data.xy, r);


  float opacity_t = smoothstep(0.0, antialiasblur, outer_df);

  float color_t = smoothstep(
    antialiasblur,
    0.0,
    inner_df
  );
  float PI = 3.14159;
  float N_RINGS = 3.0;
  float FREQ = 1.0;

 gl_FragColor = vec4(v_color.rgb, v_color.a * opacity);

  float d = length(v_data.xy);
  if(d > 0.5) {
    discard;
  }
  float intensity = clamp(cos(d * PI), 0.0, 1.0) * clamp(cos(2.0 * PI * (d * 2.0 * u_animate.z - u_animate.y * u_time)), 0.0, 1.0);
  
  // \u6839\u636E\u53E0\u52A0\u6A21\u5F0F\u9009\u62E9\u6548\u679C
  if(u_additive > 0.0) {
    gl_FragColor *= intensity;
    // \u4F18\u5316\u6C34\u6CE2\u70B9 blend additive \u6A21\u5F0F\u4E0B\u6709\u7684\u62FE\u53D6\u6548\u679C 
    gl_FragColor = filterColorAlpha(gl_FragColor, gl_FragColor.a);
  } else {
    gl_FragColor = vec4(gl_FragColor.xyz, gl_FragColor.a * intensity);
    gl_FragColor = filterColor(gl_FragColor);
  }
}
`,g5=`uniform float u_additive;

varying mat4 styleMappingMat; // \u4F20\u9012\u4ECE\u7247\u5143\u4E2D\u4F20\u9012\u7684\u6620\u5C04\u6570\u636E

varying vec4 v_data;
varying vec4 v_color;
varying float v_radius;

#pragma include "sdf_2d"
#pragma include "picking"


void main() {
  int shape = int(floor(v_data.w + 0.5));

  vec4 textrueStroke = vec4(
    styleMappingMat[1][0],
    styleMappingMat[1][1],
    styleMappingMat[1][2],
    styleMappingMat[1][3]
  );

  float opacity = styleMappingMat[0][0];
  float stroke_opacity = styleMappingMat[0][1];
  float strokeWidth = styleMappingMat[0][2];
  vec4 strokeColor = textrueStroke == vec4(0) ? v_color : textrueStroke;

  lowp float antialiasblur = v_data.z;
  float r = v_radius / (v_radius + strokeWidth);

  float outer_df;
  float inner_df;
  // 'circle', 'triangle', 'square', 'pentagon', 'hexagon', 'octogon', 'hexagram', 'rhombus', 'vesica'
  if (shape == 0) {
    outer_df = sdCircle(v_data.xy, 1.0);
    inner_df = sdCircle(v_data.xy, r);
  } else if (shape == 1) {
    outer_df = sdEquilateralTriangle(1.1 * v_data.xy);
    inner_df = sdEquilateralTriangle(1.1 / r * v_data.xy);
  } else if (shape == 2) {
    outer_df = sdBox(v_data.xy, vec2(1.));
    inner_df = sdBox(v_data.xy, vec2(r));
  } else if (shape == 3) {
    outer_df = sdPentagon(v_data.xy, 0.8);
    inner_df = sdPentagon(v_data.xy, r * 0.8);
  } else if (shape == 4) {
    outer_df = sdHexagon(v_data.xy, 0.8);
    inner_df = sdHexagon(v_data.xy, r * 0.8);
  } else if (shape == 5) {
    outer_df = sdOctogon(v_data.xy, 1.0);
    inner_df = sdOctogon(v_data.xy, r);
  } else if (shape == 6) {
    outer_df = sdHexagram(v_data.xy, 0.52);
    inner_df = sdHexagram(v_data.xy, r * 0.52);
  } else if (shape == 7) {
    outer_df = sdRhombus(v_data.xy, vec2(1.0));
    inner_df = sdRhombus(v_data.xy, vec2(r));
  } else if (shape == 8) {
    outer_df = sdVesica(v_data.xy, 1.1, 0.8);
    inner_df = sdVesica(v_data.xy, r * 1.1, r * 0.8);
  }

  float opacity_t = smoothstep(0.0, antialiasblur, outer_df);

  float color_t = strokeWidth < 0.01 ? 0.0 : smoothstep(
    antialiasblur,
    0.0,
    inner_df
  );

  if(strokeWidth < 0.01) {
    gl_FragColor = vec4(v_color.rgb, v_color.a * opacity);
  } else {
    gl_FragColor = mix(vec4(v_color.rgb, v_color.a * opacity), strokeColor * stroke_opacity, color_t);
  }

  if(u_additive > 0.0) {
    gl_FragColor *= opacity_t;
    gl_FragColor = filterColorAlpha(gl_FragColor, gl_FragColor.a);
  } else {
    gl_FragColor.a *= opacity_t;
    gl_FragColor = filterColor(gl_FragColor);
  }
}
`,Qg=`attribute vec4 a_Color;
attribute vec3 a_Position;
attribute vec3 a_Extrude;
attribute float a_Size;
attribute float a_Shape;

varying mat4 styleMappingMat; // \u7528\u4E8E\u5C06\u5728\u9876\u70B9\u7740\u8272\u5668\u4E2D\u8BA1\u7B97\u597D\u7684\u6837\u5F0F\u503C\u4F20\u9012\u7ED9\u7247\u5143

uniform mat4 u_ModelMatrix;
uniform mat4 u_Mvp;
uniform float u_meter2coord;
uniform float u_meteryScale;
uniform float u_isMeter;

varying vec4 v_data;
varying vec4 v_color;
varying float v_radius;

uniform float u_opacity : 1;
uniform float u_stroke_opacity : 1;
uniform float u_stroke_width : 2;
uniform vec4 u_stroke_color : [0.0, 0.0, 0.0, 0.0];
uniform vec2 u_offsets;

uniform float u_blur : 0.0;
uniform float u_raisingHeight: 0.0;
uniform float u_heightfixed: 0.0;

#pragma include "styleMapping"
#pragma include "styleMappingCalOpacity"
#pragma include "styleMappingCalStrokeOpacity"
#pragma include "styleMappingCalStrokeWidth"

#pragma include "projection"
#pragma include "picking"


void main() {
  vec3 extrude = a_Extrude;
  float shape_type = a_Shape;
  /*
  *  setPickingSize \u8BBE\u7F6E\u62FE\u53D6\u5927\u5C0F
  *  u_meter2coord \u5728\u7B49\u9762\u79EF\u5927\u5C0F\u7684\u65F6\u5019\u8BBE\u7F6E\u5355\u4F4D
  */
  float newSize = setPickingSize(a_Size) * u_meter2coord;
  // float newSize = setPickingSize(a_Size) * 0.00001038445708445579;

  // cal style mapping - \u6570\u636E\u7EB9\u7406\u6620\u5C04\u90E8\u5206\u7684\u8BA1\u7B97
  styleMappingMat = mat4(
    0.0, 0.0, 0.0, 0.0, // opacity - strokeOpacity - strokeWidth - empty
    0.0, 0.0, 0.0, 0.0, // strokeR - strokeG - strokeB - strokeA
    0.0, 0.0, 0.0, 0.0, // offsets[0] - offsets[1]
    0.0, 0.0, 0.0, 0.0
  );

  float rowCount = u_cellTypeLayout[0][0];    // \u5F53\u524D\u7684\u6570\u636E\u7EB9\u7406\u6709\u51E0\u884C
  float columnCount = u_cellTypeLayout[0][1]; // \u5F53\u770B\u5230\u6570\u636E\u7EB9\u7406\u6709\u51E0\u5217
  float columnWidth = 1.0/columnCount;  // \u5217\u5BBD
  float rowHeight = 1.0/rowCount;       // \u884C\u9AD8
  float cellCount = calCellCount(); // opacity - strokeOpacity - strokeWidth - stroke - offsets
  float id = a_vertexId; // \u7B2Cn\u4E2A\u9876\u70B9
  float cellCurrentRow = floor(id * cellCount / columnCount) + 1.0; // \u8D77\u59CB\u70B9\u5728\u7B2C\u51E0\u884C
  float cellCurrentColumn = mod(id * cellCount, columnCount) + 1.0; // \u8D77\u59CB\u70B9\u5728\u7B2C\u51E0\u5217
  
  // cell \u56FA\u5B9A\u987A\u5E8F opacity -> strokeOpacity -> strokeWidth -> stroke ... 
  // \u6309\u987A\u5E8F\u4ECE cell \u4E2D\u53D6\u503C\u3001\u82E5\u6CA1\u6709\u5219\u81EA\u52A8\u5F80\u4E0B\u53D6\u503C
  float textureOffset = 0.0; // \u5728 cell \u4E2D\u53D6\u503C\u7684\u504F\u79FB\u91CF

  vec2 opacityAndOffset = calOpacityAndOffset(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset, columnWidth, rowHeight);
  styleMappingMat[0][0] = opacityAndOffset.r;
  textureOffset = opacityAndOffset.g;

  vec2 strokeOpacityAndOffset = calStrokeOpacityAndOffset(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset, columnWidth, rowHeight);
  styleMappingMat[0][1] = strokeOpacityAndOffset.r;
  textureOffset = strokeOpacityAndOffset.g;

  vec2 strokeWidthAndOffset = calStrokeWidthAndOffset(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset, columnWidth, rowHeight);
  styleMappingMat[0][2] = strokeWidthAndOffset.r;
  textureOffset = strokeWidthAndOffset.g;

  vec4 textrueStroke = vec4(-1.0, -1.0, -1.0, -1.0);
  if(hasStroke()) {
    vec2 valueRPos = nextPos(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset);
    styleMappingMat[1][0] = pos2value(valueRPos, columnWidth, rowHeight); // R
    textureOffset += 1.0;

    vec2 valueGPos = nextPos(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset);
    styleMappingMat[1][1] = pos2value(valueGPos, columnWidth, rowHeight); // G
    textureOffset += 1.0;

    vec2 valueBPos = nextPos(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset);
    styleMappingMat[1][2] = pos2value(valueBPos, columnWidth, rowHeight); // B
    textureOffset += 1.0;

    vec2 valueAPos = nextPos(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset);
    styleMappingMat[1][3] = pos2value(valueAPos, columnWidth, rowHeight); // A
    textureOffset += 1.0;
  } else {
    if(u_stroke_color == vec4(0.0)) {
      styleMappingMat[1][0] = v_color.r;
      styleMappingMat[1][1] = v_color.g;
      styleMappingMat[1][2] = v_color.b;
      styleMappingMat[1][3] = v_color.a;
    } else {
      styleMappingMat[1][0] = u_stroke_color.r;
      styleMappingMat[1][1] = u_stroke_color.g;
      styleMappingMat[1][2] = u_stroke_color.b;
      styleMappingMat[1][3] = u_stroke_color.a;
    }
  }

  vec2 textrueOffsets = vec2(0.0, 0.0);
  if(hasOffsets()) {
    vec2 valueXPos = nextPos(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset);
    textrueOffsets.r = pos2value(valueXPos, columnWidth, rowHeight); // x
    textureOffset += 1.0;

    vec2 valueYPos = nextPos(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset);
    textrueOffsets.g = pos2value(valueYPos, columnWidth, rowHeight); // x
    textureOffset += 1.0;
  } else {
    textrueOffsets = u_offsets;
  }

  // cal style mapping

  // unpack color(vec2)
  v_color = a_Color;

  // radius(16-bit)
  v_radius = newSize;

  // anti-alias
  //  float antialiased_blur = -max(u_blur, antialiasblur);
  float antialiasblur = -max(2.0 / u_DevicePixelRatio / newSize, u_blur);

  vec2 offset = (extrude.xy * (newSize + u_stroke_width) + textrueOffsets);
  vec3 aPosition = a_Position;
  if(u_isMeter < 1.0) {
    // \u4E0D\u4EE5\u7C73\u4E3A\u5B9E\u9645\u5355\u4F4D
    offset = project_pixel(offset);
  } else {
    // \u4EE5\u7C73\u4E3A\u5B9E\u9645\u5355\u4F4D
    if(newSize * pow(2.0, u_Zoom) < 48.0) {
      antialiasblur = max(antialiasblur, -0.05);
    } else if(newSize * pow(2.0, u_Zoom) < 128.0) {
      antialiasblur = max(antialiasblur, -0.6/pow(u_Zoom, 2.0));
    } else {
      antialiasblur = max(antialiasblur, -0.8/pow(u_Zoom, 2.0));
    }
    
    if(u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT || u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {
      aPosition.x += offset.x / u_meteryScale;
      aPosition.y += offset.y;
      offset = vec2(0.0);
    }
  }

  // TODP: /abs(extrude.x) \u662F\u4E3A\u4E86\u517C\u5BB9\u5730\u7403\u6A21\u5F0F
  v_data = vec4(extrude.x/abs(extrude.x), extrude.y/abs(extrude.y), antialiasblur,shape_type);


  // vec4 project_pos = project_position(vec4(a_Position.xy, 0.0, 1.0));
  vec4 project_pos = project_position(vec4(aPosition.xy, 0.0, 1.0));
  // gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy + offset, project_pixel(setPickingOrder(0.0)), 1.0));

  float raisingHeight = u_raisingHeight;

  if(u_heightfixed < 1.0) { // false
    raisingHeight = project_pixel(u_raisingHeight);
  } else {
     if(u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT || u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {
      float mapboxZoomScale = 4.0/pow(2.0, 21.0 - u_Zoom);
      raisingHeight = u_raisingHeight * mapboxZoomScale;
    }
  }
 

  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x
    gl_Position = u_Mvp * vec4(project_pos.xy + offset, raisingHeight, 1.0);
  } else {
    gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy + offset, raisingHeight, 1.0));
  }
 
  // gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy + offset, 0.0, 1.0));

  setPickingColor(a_PickingColor);
}
`,nb=function(e){(0,ui.Z)(t,e);var i=v5(t);function t(){var n;(0,Ur.Z)(this,t);for(var r=arguments.length,o=new Array(r),u=0;u<r;u++)o[u]=arguments[u];return n=i.call.apply(i,[this].concat(o)),(0,He.Z)((0,er.Z)(n),"meter2coord",1),(0,He.Z)((0,er.Z)(n),"meterYScale",1),(0,He.Z)((0,er.Z)(n),"isMeter",!1),(0,He.Z)((0,er.Z)(n),"unit","l7size"),n}return(0,Jr.Z)(t,[{key:"getUninforms",value:function(){var r=this.layer.getLayerConfig(),o=r.opacity,u=o===void 0?1:o,f=r.strokeOpacity,g=f===void 0?1:f,x=r.strokeWidth,I=x===void 0?0:x,P=r.stroke,G=P===void 0?"rgba(0,0,0,0)":P,$=r.offsets,Ee=$===void 0?[0,0]:$,Se=r.blend,Re=r.blur,Ye=Re===void 0?0:Re,St=r.raisingHeight,vt=St===void 0?0:St,Ut=r.heightfixed,Kt=Ut===void 0?!1:Ut,Tr=r.unit,on=Tr===void 0?"l7size":Tr;if(this.updateUnit(on),this.dataTextureTest&&this.dataTextureNeedUpdate({opacity:u,strokeOpacity:g,strokeWidth:I,stroke:G,offsets:Ee})){this.judgeStyleAttributes({opacity:u,strokeOpacity:g,strokeWidth:I,stroke:G,offsets:Ee});var dn=this.layer.getEncodedData(),vn=this.calDataFrame(this.cellLength,dn,this.cellProperties),si=vn.data,ai=vn.width,Hi=vn.height;this.rowCount=Hi,this.dataTexture=this.cellLength>0&&si.length>0?this.createTexture2D({flipY:!0,data:si,format:$e.LUMINANCE,type:$e.FLOAT,width:ai,height:Hi}):this.createTexture2D({flipY:!0,data:[1],format:$e.LUMINANCE,type:$e.FLOAT,width:1,height:1})}return{u_raisingHeight:Number(vt),u_heightfixed:Number(Kt),u_meter2coord:this.meter2coord,u_meteryScale:this.meterYScale,u_isMeter:Number(this.isMeter),u_blur:Ye,u_additive:Se==="additive"?1:0,u_dataTexture:this.dataTexture,u_cellTypeLayout:this.getCellTypeLayout(),u_opacity:(0,Wr.isNumber)(u)?u:1,u_stroke_opacity:(0,Wr.isNumber)(g)?g:1,u_stroke_width:(0,Wr.isNumber)(I)?I:1,u_stroke_color:this.getStrokeColor(G),u_offsets:this.isOffsetStatic(Ee)?Ee:[0,0]}}},{key:"getAnimateUniforms",value:function(){var r=this.layer.getLayerConfig(),o=r.animateOption,u=o===void 0?{enable:!1}:o;return{u_animate:this.animateOption2Array(u),u_time:this.layer.getLayerAnimateTime()}}},{key:"getAttribute",value:function(){return this.styleAttributeService.createAttributesAndIndices(this.layer.getEncodedData(),Er)}},{key:"initModels",value:function(){var n=(0,An.Z)(Nt().mark(function o(){return Nt().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return this.updateUnit("l7size"),f.next=3,this.buildModels();case 3:return f.abrupt("return",f.sent);case 4:case"end":return f.stop()}},o,this)}));function r(){return n.apply(this,arguments)}return r}()},{key:"calMeter2Coord",value:function(){var r=(0,Mr.Z)(this.layer.getSource().extent,4),o=r[0],u=r[1],f=r[2],g=r[3],x=[(o+f)/2,(u+g)/2],I=this.mapService.version,P=vs==null?void 0:vs.mapboxgl;if(I===Mc.MAPBOX&&P!==null&&P!==void 0&&P.MercatorCoordinate){var G=P.MercatorCoordinate.fromLngLat({lng:x[0],lat:x[1]},0),$=G.meterInMercatorCoordinateUnits(),Ee=new P.MercatorCoordinate(G.x-$,G.y,G.z),Se=Ee.toLngLat(),Re=new P.MercatorCoordinate(G.x,G.y-$,G.z),Ye=Re.toLngLat();this.meter2coord=x[0]-Se.lng,this.meterYScale=(Ye.lat-x[1])/this.meter2coord;return}var St=this.mapService.meterToCoord(x,[o,u]),vt=this.mapService.meterToCoord(x,[f===o?f+.1:f,g===u?u+.1:g]);this.meter2coord=(St+vt)/2,this.meter2coord||(this.meter2coord=7.70681090738883)}},{key:"buildModels",value:function(){var n=(0,An.Z)(Nt().mark(function o(){var u,f,g,x,I,P,G,$,Ee,Se,Re,Ye,St,vt,Ut,Kt;return Nt().wrap(function(on){for(;;)switch(on.prev=on.next){case 0:return u=this.layer.getLayerConfig(),f=u.mask,g=f===void 0?!1:f,x=u.maskInside,I=x===void 0?!0:x,P=u.animateOption,G=P===void 0?{enable:!1}:P,$=u.workerEnabled,Ee=$===void 0?!1:$,Se=u.enablePicking,Re=u.shape2d,Ye=this.getShaders(G),St=Ye.frag,vt=Ye.vert,Ut=Ye.type,this.layer.triangulation=Er,on.next=5,this.layer.buildLayerModel({moduleName:Ut,vertexShader:vt,fragmentShader:St,triangulation:Er,depth:{enable:!1},blend:this.getBlend(),stencil:zo(g,I),workerEnabled:Ee,workerOptions:{modelType:Ut,enablePicking:Se,shape2d:Re}});case 5:return Kt=on.sent,on.abrupt("return",[Kt]);case 7:case"end":return on.stop()}},o,this)}));function r(){return n.apply(this,arguments)}return r}()},{key:"getShaders",value:function(r){if(r.enable)switch(r.type){case"wave":return{frag:rb,vert:Qg,type:"pointWave"};default:return{frag:rb,vert:Qg,type:"pointWave"}}else return{frag:g5,vert:Qg,type:"pointFill"}}},{key:"clearModels",value:function(){var r;(r=this.dataTexture)===null||r===void 0||r.destroy()}},{key:"animateOption2Array",value:function(r){return[r.enable?0:1,r.speed||1,r.rings||3,0]}},{key:"registerBuiltinAttributes",value:function(){var r=this.layer.getLayerConfig().shape2d;this.styleAttributeService.registerStyleAttribute({name:"extrude",type:ja.Attribute,descriptor:{name:"a_Extrude",buffer:{usage:$e.DYNAMIC_DRAW,data:[],type:$e.FLOAT},size:3,update:function(u,f,g,x){var I=[1,1,0,-1,1,0,-1,-1,0,1,-1,0],P=x%4*3;return[I[P],I[P+1],I[P+2]]}}}),this.styleAttributeService.registerStyleAttribute({name:"size",type:ja.Attribute,descriptor:{name:"a_Size",buffer:{usage:$e.DYNAMIC_DRAW,data:[],type:$e.FLOAT},size:1,update:function(u){var f=u.size,g=f===void 0?5:f;return Array.isArray(g)?[g[0]]:[g]}}}),this.styleAttributeService.registerStyleAttribute({name:"shape",type:ja.Attribute,descriptor:{name:"a_Shape",buffer:{usage:$e.DYNAMIC_DRAW,data:[],type:$e.FLOAT},size:1,update:function(u){var f=u.shape,g=f===void 0?2:f,x=r.indexOf(g);return[x]}}})}},{key:"updateUnit",value:function(r){var o=this.mapService.version;this.unit!==r&&(this.unit!=="meter"&&r==="meter"&&o!==Mc.DEFUALT&&o!==Mc.GLOBEL?(this.isMeter=!0,this.calMeter2Coord()):this.unit==="meter"&&r!=="meter"&&(this.isMeter=!1,this.meter2coord=1),this.unit=r)}}]),t}(Sl);function y5(e){var i=_5();return function(){var n=(0,rr.Z)(e),r;if(i){var o=(0,rr.Z)(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return(0,jn.Z)(this,r)}}function _5(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var x5=`uniform sampler2D u_texture;
uniform vec2 u_textSize;

varying mat4 styleMappingMat; // \u4F20\u9012\u4ECE\u7247\u5143\u4E2D\u4F20\u9012\u7684\u6620\u5C04\u6570\u636E

#pragma include "sdf_2d"
#pragma include "picking"
varying vec2 v_uv; // \u672C\u8EAB\u7684 uv \u5750\u6807
varying vec2 v_Iconuv;

void main() {

  float opacity = styleMappingMat[0][0];

  vec2 pos = v_Iconuv / u_textSize + v_uv / u_textSize * 64.;
  gl_FragColor = texture2D(u_texture, pos);
  gl_FragColor.a *= opacity;

  gl_FragColor = filterColor(gl_FragColor);
}
`,b5=`attribute vec4 a_Color;
attribute vec3 a_Position;
attribute vec3 a_Extrude;
attribute float a_Size;
attribute vec2 a_Uv;
attribute float a_Rotate;

varying mat4 styleMappingMat; // \u7528\u4E8E\u5C06\u5728\u9876\u70B9\u7740\u8272\u5668\u4E2D\u8BA1\u7B97\u597D\u7684\u6837\u5F0F\u503C\u4F20\u9012\u7ED9\u7247\u5143

uniform mat4 u_ModelMatrix;
uniform mat4 u_Mvp;
uniform mat2 u_RotateMatrix;
uniform float u_isMeter;

varying vec2 v_uv; // \u672C\u8EAB\u7684 uv \u5750\u6807
varying vec2 v_Iconuv; // icon \u8D34\u56FE\u7684 uv \u5750\u6807

uniform float u_raisingHeight: 0.0;
uniform float u_heightfixed: 0.0;
uniform float u_opacity : 1;
uniform vec2 u_offsets;

#pragma include "styleMapping"
#pragma include "styleMappingCalOpacity"

#pragma include "projection"
#pragma include "picking"

void main() {
  vec3 extrude = a_Extrude;

  v_uv = (a_Extrude.xy + 1.0)/2.0;
  v_uv.y = 1.0 - v_uv.y;
  v_Iconuv = a_Uv;

  // cal style mapping - \u6570\u636E\u7EB9\u7406\u6620\u5C04\u90E8\u5206\u7684\u8BA1\u7B97
  styleMappingMat = mat4(
    0.0, 0.0, 0.0, 0.0, // opacity - empty - empty - empty
    0.0, 0.0, 0.0, 0.0, // empty - empty - empty - empty
    0.0, 0.0, 0.0, 0.0, // offsets[0] - offsets[1]
    0.0, 0.0, 0.0, 0.0
  );

  float rowCount = u_cellTypeLayout[0][0];    // \u5F53\u524D\u7684\u6570\u636E\u7EB9\u7406\u6709\u51E0\u884C
  float columnCount = u_cellTypeLayout[0][1]; // \u5F53\u770B\u5230\u6570\u636E\u7EB9\u7406\u6709\u51E0\u5217
  float columnWidth = 1.0/columnCount;  // \u5217\u5BBD
  float rowHeight = 1.0/rowCount;       // \u884C\u9AD8
  float cellCount = calCellCount(); // opacity - strokeOpacity - strokeWidth - stroke - offsets
  float id = a_vertexId; // \u7B2Cn\u4E2A\u9876\u70B9
  float cellCurrentRow = floor(id * cellCount / columnCount) + 1.0; // \u8D77\u59CB\u70B9\u5728\u7B2C\u51E0\u884C
  float cellCurrentColumn = mod(id * cellCount, columnCount) + 1.0; // \u8D77\u59CB\u70B9\u5728\u7B2C\u51E0\u5217
  
  // cell \u56FA\u5B9A\u987A\u5E8F opacity -> strokeOpacity -> strokeWidth -> stroke ... 
  // \u6309\u987A\u5E8F\u4ECE cell \u4E2D\u53D6\u503C\u3001\u82E5\u6CA1\u6709\u5219\u81EA\u52A8\u5F80\u4E0B\u53D6\u503C
  float textureOffset = 0.0; // \u5728 cell \u4E2D\u53D6\u503C\u7684\u504F\u79FB\u91CF

  vec2 opacityAndOffset = calOpacityAndOffset(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset, columnWidth, rowHeight);
  styleMappingMat[0][0] = opacityAndOffset.r;
  textureOffset = opacityAndOffset.g;

  vec2 textrueOffsets = vec2(0.0, 0.0);
  if(hasOffsets()) {
    vec2 valueXPos = nextPos(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset);
    textrueOffsets.r = pos2value(valueXPos, columnWidth, rowHeight); // x
    textureOffset += 1.0;

    vec2 valueYPos = nextPos(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset);
    textrueOffsets.g = pos2value(valueYPos, columnWidth, rowHeight); // x
    textureOffset += 1.0;
  } else {
    textrueOffsets = u_offsets;
  }

  // cal style mapping

  highp float angle_sin = sin(a_Rotate);
  highp float angle_cos = cos(a_Rotate);
  mat2 rotation_matrix = mat2(angle_cos, -1.0 * angle_sin, angle_sin, angle_cos);

  // vec2 offset = (u_RotateMatrix * extrude.xy * (a_Size) + textrueOffsets);
  vec2 offset = (rotation_matrix * u_RotateMatrix * extrude.xy * (a_Size) + textrueOffsets);
  vec3 aPosition = a_Position;
  if(u_isMeter < 1.0) {
    // \u4E0D\u4EE5\u7C73\u4E3A\u5B9E\u9645\u5355\u4F4D
    offset = project_pixel(offset);
  } else {
    // \u4EE5\u7C73\u4E3A\u5B9E\u9645\u5355\u4F4D

    if(u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT || u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {
      aPosition.xy += offset;
      offset.x = 0.0;
      offset.y = 0.0;
    }
  }

  vec4 project_pos = project_position(vec4(aPosition.xy, 0.0, 1.0));
  float raisingHeight = u_raisingHeight;
  if(u_heightfixed < 1.0) { // height fixed
    raisingHeight = project_pixel(u_raisingHeight);
  } else {
    if(u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT || u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {
      float mapboxZoomScale = 4.0/pow(2.0, 21.0 - u_Zoom);
      raisingHeight = u_raisingHeight * mapboxZoomScale;
    }
  }

  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x
    gl_Position = u_Mvp * vec4(project_pos.xy + offset, raisingHeight, 1.0);
  } else {
    gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy + offset, raisingHeight, 1.0));
  }
 
  // gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy + offset, 0.0, 1.0));

  setPickingColor(a_PickingColor);
}
`,E5=function(e){(0,ui.Z)(t,e);var i=y5(t);function t(){var n;(0,Ur.Z)(this,t);for(var r=arguments.length,o=new Array(r),u=0;u<r;u++)o[u]=arguments[u];return n=i.call.apply(i,[this].concat(o)),(0,He.Z)((0,er.Z)(n),"meter2coord",1),(0,He.Z)((0,er.Z)(n),"isMeter",!1),(0,He.Z)((0,er.Z)(n),"radian",0),(0,He.Z)((0,er.Z)(n),"updateTexture",function(){var f=n.rendererService.createTexture2D;if(n.texture){n.texture.update({data:n.iconService.getCanvas(),mag:"linear",min:"linear mipmap nearest",mipmap:!0}),n.layerService.throttleRenderLayers();return}n.texture=f({data:n.iconService.getCanvas(),mag:$e.LINEAR,min:$e.LINEAR_MIPMAP_LINEAR,premultiplyAlpha:!1,width:1024,height:n.iconService.canvasHeight||128,mipmap:!0})}),n}return(0,Jr.Z)(t,[{key:"getUninforms",value:function(){var r=this.layer.getLayerConfig(),o=r.opacity,u=o===void 0?1:o,f=r.offsets,g=f===void 0?[0,0]:f,x=r.rotation,I=r.raisingHeight,P=I===void 0?0:I,G=r.heightfixed,$=G===void 0?!1:G;this.rendererService.getDirty()&&this.texture.bind();var Ee=1;if((this.mapService.version==="GAODE2.x"||this.mapService.version==="GAODE1.x")&&(Ee=-1),this.radian=x!==void 0?Ee*Math.PI*x/180:Ee*Math.PI*(this.mapService.getRotation()%360)/180,this.dataTextureTest&&this.dataTextureNeedUpdate({opacity:u,offsets:g})){this.judgeStyleAttributes({opacity:u,offsets:g});var Se=this.layer.getEncodedData(),Re=this.calDataFrame(this.cellLength,Se,this.cellProperties),Ye=Re.data,St=Re.width,vt=Re.height;this.rowCount=vt,this.dataTexture=this.cellLength>0&&Ye.length>0?this.createTexture2D({flipY:!0,data:Ye,format:$e.LUMINANCE,type:$e.FLOAT,width:St,height:vt}):this.createTexture2D({flipY:!0,data:[1],format:$e.LUMINANCE,type:$e.FLOAT,width:1,height:1})}return{u_raisingHeight:Number(P),u_heightfixed:Number($),u_isMeter:Number(this.isMeter),u_RotateMatrix:new Float32Array([Math.cos(this.radian),Math.sin(this.radian),-Math.sin(this.radian),Math.cos(this.radian)]),u_dataTexture:this.dataTexture,u_cellTypeLayout:this.getCellTypeLayout(),u_texture:this.texture,u_textSize:[1024,this.iconService.canvasHeight||128],u_opacity:(0,Wr.isNumber)(u)?u:1,u_offsets:this.isOffsetStatic(g)?g:[0,0]}}},{key:"getAttribute",value:function(){return this.styleAttributeService.createAttributesAndIndices(this.layer.getEncodedData(),gv)}},{key:"initModels",value:function(){var n=(0,An.Z)(Nt().mark(function o(){var u,f,g,x;return Nt().wrap(function(P){for(;;)switch(P.prev=P.next){case 0:return this.iconService.on("imageUpdate",this.updateTexture),this.updateTexture(),u=this.layer.getLayerConfig(),f=u.unit,g=f===void 0?"l7size":f,x=this.mapService.version,g==="meter"&&x!==Mc.DEFUALT&&x!==Mc.GLOBEL&&(this.isMeter=!0,this.calMeter2Coord()),P.next=7,this.buildModels();case 7:return P.abrupt("return",P.sent);case 8:case"end":return P.stop()}},o,this)}));function r(){return n.apply(this,arguments)}return r}()},{key:"calMeter2Coord",value:function(){var r=(0,Mr.Z)(this.layer.getSource().extent,4),o=r[0],u=r[1],f=r[2],g=r[3],x=[(o+f)/2,(u+g)/2],I=this.mapService.version;if(I===Mc.MAPBOX&&window.mapboxgl.MercatorCoordinate){var P=window.mapboxgl.MercatorCoordinate.fromLngLat({lng:x[0],lat:x[1]},0),G=1,$=G*P.meterInMercatorCoordinateUnits(),Ee=new window.mapboxgl.MercatorCoordinate(P.x-$,P.y,P.z),Se=Ee.toLngLat();this.meter2coord=x[0]-Se.lng;return}var Re=this.mapService.meterToCoord(x,[o,u]),Ye=this.mapService.meterToCoord(x,[f===o?f+.1:f,g===u?u+.1:g]);this.meter2coord=(Re+Ye)/2,this.meter2coord||(this.meter2coord=7.70681090738883)}},{key:"buildModels",value:function(){var n=(0,An.Z)(Nt().mark(function o(){var u,f,g,x,I,P;return Nt().wrap(function($){for(;;)switch($.prev=$.next){case 0:return u=this.layer.getLayerConfig(),f=u.mask,g=f===void 0?!1:f,x=u.maskInside,I=x===void 0?!0:x,$.next=3,this.layer.buildLayerModel({moduleName:"pointFillImage",vertexShader:b5,fragmentShader:x5,triangulation:gv,depth:{enable:!1},blend:this.getBlend(),stencil:zo(g,I),cull:{enable:!0,face:is(this.mapService.version)}});case 3:return P=$.sent,$.abrupt("return",[P]);case 5:case"end":return $.stop()}},o,this)}));function r(){return n.apply(this,arguments)}return r}()},{key:"clearModels",value:function(){var r,o;this.iconService.off("imageUpdate",this.updateTexture),(r=this.texture)===null||r===void 0||r.destroy(),(o=this.dataTexture)===null||o===void 0||o.destroy()}},{key:"registerBuiltinAttributes",value:function(){var r=this;this.styleAttributeService.registerStyleAttribute({name:"rotate",type:ja.Attribute,descriptor:{name:"a_Rotate",buffer:{usage:$e.DYNAMIC_DRAW,data:[],type:$e.FLOAT},size:1,update:function(u){var f=u.rotate,g=f===void 0?0:f;return Array.isArray(g)?[g[0]]:[g]}}}),this.styleAttributeService.registerStyleAttribute({name:"uv",type:ja.Attribute,descriptor:{name:"a_Uv",buffer:{usage:$e.DYNAMIC_DRAW,data:[],type:$e.FLOAT},size:2,update:function(u){var f=r.iconService.getIconMap(),g=u.shape,x=f[g]||{x:0,y:0},I=x.x,P=x.y;return[I,P]}}}),this.styleAttributeService.registerStyleAttribute({name:"extrude",type:ja.Attribute,descriptor:{name:"a_Extrude",buffer:{usage:$e.DYNAMIC_DRAW,data:[],type:$e.FLOAT},size:3,update:function(u,f,g,x){var I=[1,1,0,-1,1,0,-1,-1,0,1,-1,0],P=x%4*3;return[I[P],I[P+1],I[P+2]]}}}),this.styleAttributeService.registerStyleAttribute({name:"size",type:ja.Attribute,descriptor:{name:"a_Size",buffer:{usage:$e.DYNAMIC_DRAW,data:[],type:$e.FLOAT},size:1,update:function(u){var f=u.size,g=f===void 0?5:f;return Array.isArray(g)?[g[0]*r.meter2coord]:[g*r.meter2coord]}}})}}]),t}(Sl);function S5(e){var i=w5();return function(){var n=(0,rr.Z)(e),r;if(i){var o=(0,rr.Z)(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return(0,jn.Z)(this,r)}}function w5(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var A5=`
uniform sampler2D u_texture;
varying vec4 v_color;
varying vec2 v_uv;
uniform vec2 u_textSize;
uniform float u_opacity : 1;

varying mat4 styleMappingMat; // \u4F20\u9012\u4ECE\u7247\u5143\u4E2D\u4F20\u9012\u7684\u6620\u5C04\u6570\u636E

#pragma include "picking"

void main(){
      float opacity = styleMappingMat[0][0];
      float size = styleMappingMat[1][0];
      vec2 pos = v_uv / u_textSize + gl_PointCoord / u_textSize * 64.;
      vec4 textureColor;

      // Y = 0.299R + 0.587G + 0.114B // \u4EAE\u5EA6\u63D0\u53D6
     
      textureColor = texture2D(u_texture, pos);

      // Tip: \u53BB\u9664\u8FB9\u7F18\u90E8\u5206 mipmap \u5BFC\u81F4\u7684\u6DF7\u5408\u53D8\u6697
      float fragmengTocenter = distance(vec2(0.5), gl_PointCoord);
      if(fragmengTocenter >= 0.5) {
            float luma = 0.299 * textureColor.r + 0.587 * textureColor.g + 0.114 * textureColor.b;
            textureColor.a *= luma;
      }
      
      

      if(all(lessThan(v_color, vec4(1.0+0.00001))) && all(greaterThan(v_color, vec4(1.0-0.00001))) || v_color==vec4(1.0)){
            gl_FragColor= textureColor;
      }else {
            gl_FragColor= step(0.01, textureColor.z) * v_color;
      }

      gl_FragColor.a = gl_FragColor.a * opacity;
      gl_FragColor = filterColor(gl_FragColor);
}
`,C5=`precision highp float;
attribute vec3 a_Position;
attribute vec4 a_Color;
attribute vec2 a_Uv;
attribute float a_Size;
varying vec4 v_color;
varying vec2 v_uv;
uniform mat4 u_ModelMatrix;
uniform mat4 u_Mvp;
uniform vec2 u_offsets;

uniform float u_opacity : 1;
uniform float u_raisingHeight: 0.0;
uniform float u_heightfixed: 0.0;

varying mat4 styleMappingMat; // \u7528\u4E8E\u5C06\u5728\u9876\u70B9\u7740\u8272\u5668\u4E2D\u8BA1\u7B97\u597D\u7684\u6837\u5F0F\u503C\u4F20\u9012\u7ED9\u7247\u5143

#pragma include "styleMapping"
#pragma include "styleMappingCalOpacity"

#pragma include "projection"
#pragma include "picking"

void main() {
  // cal style mapping - \u6570\u636E\u7EB9\u7406\u6620\u5C04\u90E8\u5206\u7684\u8BA1\u7B97
  styleMappingMat = mat4(
    0.0, 0.0, 0.0, 0.0, // opacity - strokeOpacity - strokeWidth - empty
    0.0, 0.0, 0.0, 0.0, // strokeR - strokeG - strokeB - strokeA
    0.0, 0.0, 0.0, 0.0, // offsets[0] - offsets[1]
    0.0, 0.0, 0.0, 0.0
  );

  float rowCount = u_cellTypeLayout[0][0];    // \u5F53\u524D\u7684\u6570\u636E\u7EB9\u7406\u6709\u51E0\u884C
  float columnCount = u_cellTypeLayout[0][1]; // \u5F53\u770B\u5230\u6570\u636E\u7EB9\u7406\u6709\u51E0\u5217
  float columnWidth = 1.0/columnCount;  // \u5217\u5BBD
  float rowHeight = 1.0/rowCount;       // \u884C\u9AD8
  float cellCount = calCellCount(); // opacity - strokeOpacity - strokeWidth - stroke - offsets
  float id = a_vertexId; // \u7B2Cn\u4E2A\u9876\u70B9
  float cellCurrentRow = floor(id * cellCount / columnCount) + 1.0; // \u8D77\u59CB\u70B9\u5728\u7B2C\u51E0\u884C
  float cellCurrentColumn = mod(id * cellCount, columnCount) + 1.0; // \u8D77\u59CB\u70B9\u5728\u7B2C\u51E0\u5217
  
  // cell \u56FA\u5B9A\u987A\u5E8F opacity -> strokeOpacity -> strokeWidth -> stroke ... 
  // \u6309\u987A\u5E8F\u4ECE cell \u4E2D\u53D6\u503C\u3001\u82E5\u6CA1\u6709\u5219\u81EA\u52A8\u5F80\u4E0B\u53D6\u503C
  float textureOffset = 0.0; // \u5728 cell \u4E2D\u53D6\u503C\u7684\u504F\u79FB\u91CF

  vec2 opacityAndOffset = calOpacityAndOffset(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset, columnWidth, rowHeight);
  styleMappingMat[0][0] = opacityAndOffset.r;
  textureOffset = opacityAndOffset.g;

  styleMappingMat[1][0] = a_Size;

  vec2 textrueOffsets = vec2(0.0, 0.0);
  if(hasOffsets()) {
    vec2 valueXPos = nextPos(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset);
    textrueOffsets.r = pos2value(valueXPos, columnWidth, rowHeight); // x
    textureOffset += 1.0;

    vec2 valueYPos = nextPos(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset);
    textrueOffsets.g = pos2value(valueYPos, columnWidth, rowHeight); // x
    textureOffset += 1.0;
  } else {
    textrueOffsets = u_offsets;
  }

  // cal style mapping - \u6570\u636E\u7EB9\u7406\u6620\u5C04\u90E8\u5206\u7684\u8BA1\u7B97
  v_color = a_Color;
  v_uv = a_Uv;
  vec4 project_pos = project_position(vec4(a_Position, 1.0));
   
  vec2 offset = project_pixel(textrueOffsets);

  float raisingHeight = u_raisingHeight;
  if(u_heightfixed < 1.0) { // false
    raisingHeight = project_pixel(u_raisingHeight);
  } else {
     if(u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT || u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {
      float mapboxZoomScale = 4.0/pow(2.0, 21.0 - u_Zoom);
      raisingHeight = u_raisingHeight * mapboxZoomScale;
    }
  }

  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x
    gl_Position = u_Mvp * vec4(project_pos.xy + offset, raisingHeight, 1.0);
  } else {
    gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy + offset, raisingHeight, 1.0));
  }

  gl_PointSize = a_Size * 2.0 * u_DevicePixelRatio;
  setPickingColor(a_PickingColor);
}
`,ib=function(e){(0,ui.Z)(t,e);var i=S5(t);function t(){var n;(0,Ur.Z)(this,t);for(var r=arguments.length,o=new Array(r),u=0;u<r;u++)o[u]=arguments[u];return n=i.call.apply(i,[this].concat(o)),(0,He.Z)((0,er.Z)(n),"updateTexture",function(){var f=n.rendererService.createTexture2D;if(n.texture){n.texture.update({data:n.iconService.getCanvas(),mag:"linear",min:"linear mipmap nearest",mipmap:!0}),setTimeout(function(){n.layerService.throttleRenderLayers()});return}n.texture=f({data:n.iconService.getCanvas(),mag:$e.LINEAR,min:$e.LINEAR_MIPMAP_LINEAR,premultiplyAlpha:!1,width:1024,height:n.iconService.canvasHeight||128,mipmap:!0})}),n}return(0,Jr.Z)(t,[{key:"getUninforms",value:function(){var r=this.layer.getLayerConfig(),o=r.opacity,u=o===void 0?1:o,f=r.offsets,g=f===void 0?[0,0]:f,x=r.raisingHeight,I=x===void 0?0:x,P=r.heightfixed,G=P===void 0?!1:P;if(this.rendererService.getDirty()&&this.texture.bind(),this.dataTextureTest&&this.dataTextureNeedUpdate({opacity:u,offsets:g})){this.judgeStyleAttributes({opacity:u,offsets:g});var $=this.layer.getEncodedData(),Ee=this.calDataFrame(this.cellLength,$,this.cellProperties),Se=Ee.data,Re=Ee.width,Ye=Ee.height;this.rowCount=Ye,this.dataTexture=this.cellLength>0&&Se.length>0?this.createTexture2D({flipY:!0,data:Se,format:$e.LUMINANCE,type:$e.FLOAT,width:Re,height:Ye}):this.createTexture2D({flipY:!0,data:[1],format:$e.LUMINANCE,type:$e.FLOAT,width:1,height:1})}return{u_raisingHeight:Number(I),u_heightfixed:Number(G),u_dataTexture:this.dataTexture,u_cellTypeLayout:this.getCellTypeLayout(),u_texture:this.texture,u_textSize:[1024,this.iconService.canvasHeight||128],u_opacity:(0,Wr.isNumber)(u)?u:1,u_offsets:this.isOffsetStatic(g)?g:[0,0]}}},{key:"initModels",value:function(){var n=(0,An.Z)(Nt().mark(function o(){return Nt().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return this.iconService.off("imageUpdate",this.updateTexture),this.iconService.on("imageUpdate",this.updateTexture),this.updateTexture(),f.next=5,this.buildModels();case 5:return f.abrupt("return",f.sent);case 6:case"end":return f.stop()}},o,this)}));function r(){return n.apply(this,arguments)}return r}()},{key:"clearModels",value:function(){var r,o;(r=this.texture)===null||r===void 0||r.destroy(),(o=this.dataTexture)===null||o===void 0||o.destroy(),this.iconService.off("imageUpdate",this.updateTexture)}},{key:"buildModels",value:function(){var n=(0,An.Z)(Nt().mark(function o(){var u,f,g,x,I,P;return Nt().wrap(function($){for(;;)switch($.prev=$.next){case 0:return u=this.layer.getLayerConfig(),f=u.mask,g=f===void 0?!1:f,x=u.maskInside,I=x===void 0?!0:x,$.next=3,this.layer.buildLayerModel({moduleName:"pointImage",vertexShader:C5,fragmentShader:A5,triangulation:I3,depth:{enable:!1},primitive:$e.POINTS,blend:this.getBlend(),stencil:zo(g,I)});case 3:return P=$.sent,$.abrupt("return",[P]);case 5:case"end":return $.stop()}},o,this)}));function r(){return n.apply(this,arguments)}return r}()},{key:"registerBuiltinAttributes",value:function(){var r=this;this.styleAttributeService.registerStyleAttribute({name:"size",type:ja.Attribute,descriptor:{name:"a_Size",buffer:{usage:$e.DYNAMIC_DRAW,data:[],type:$e.FLOAT},size:1,update:function(u){var f=u.size,g=f===void 0?5:f;return Array.isArray(g)?[g[0]]:[g]}}}),this.styleAttributeService.registerStyleAttribute({name:"uv",type:ja.Attribute,descriptor:{name:"a_Uv",buffer:{usage:$e.DYNAMIC_DRAW,data:[],type:$e.FLOAT},size:2,update:function(u){var f=r.iconService.getIconMap(),g=u.shape,x=f[g]||{x:0,y:0},I=x.x,P=x.y;return[I,P]}}})}}]),t}(Sl);function T5(e){var i=M5();return function(){var n=(0,rr.Z)(e),r;if(i){var o=(0,rr.Z)(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return(0,jn.Z)(this,r)}}function M5(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var I5=`uniform float u_opacity : 1;
varying vec4 v_color;
void main() {
  gl_FragColor = v_color;
  gl_FragColor.a *= u_opacity;
}
`,O5=`
attribute vec3 a_Position;
uniform mat4 u_ModelMatrix;
uniform mat4 u_Mvp;
attribute float a_Size;
attribute vec4 a_Color;

varying vec4 v_color;

#pragma include "projection"
#pragma include "project"

void main() {
  v_color = a_Color;

  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x
    gl_Position = u_Mvp * vec4(a_Position.xy, a_Position.z, 1.0);
  } else {
    vec4 project_pos = project_position(vec4(a_Position, 1.0)) + vec4(a_Size / 2.,-a_Size /2.,0.,0.);
    gl_Position = project_common_position_to_clipspace(vec4(vec2(project_pos.xy),project_pos.z,project_pos.w));
  }

  gl_PointSize = a_Size * 2.0 * u_DevicePixelRatio;
}
`;function ab(e){var i=e.coordinates;return{vertices:(0,ie.Z)(i),indices:[0],size:i.length}}var ob=function(e){(0,ui.Z)(t,e);var i=T5(t);function t(){return(0,Ur.Z)(this,t),i.apply(this,arguments)}return(0,Jr.Z)(t,[{key:"getDefaultStyle",value:function(){return{blend:"additive"}}},{key:"getUninforms",value:function(){var r=this.layer.getLayerConfig(),o=r.opacity,u=o===void 0?1:o;return{u_opacity:(0,Wr.isNumber)(u)?u:1}}},{key:"initModels",value:function(){var n=(0,An.Z)(Nt().mark(function o(){return Nt().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return f.next=2,this.buildModels();case 2:return f.abrupt("return",f.sent);case 3:case"end":return f.stop()}},o,this)}));function r(){return n.apply(this,arguments)}return r}()},{key:"buildModels",value:function(){var n=(0,An.Z)(Nt().mark(function o(){var u,f,g,x,I,P;return Nt().wrap(function($){for(;;)switch($.prev=$.next){case 0:return u=this.layer.getLayerConfig(),f=u.mask,g=f===void 0?!1:f,x=u.maskInside,I=x===void 0?!0:x,this.layer.triangulation=ab,$.next=4,this.layer.buildLayerModel({moduleName:"pointNormal",vertexShader:O5,fragmentShader:I5,triangulation:ab,depth:{enable:!1},primitive:$e.POINTS,blend:this.getBlend(),stencil:zo(g,I),pick:!1});case 4:return P=$.sent,$.abrupt("return",[P]);case 6:case"end":return $.stop()}},o,this)}));function r(){return n.apply(this,arguments)}return r}()},{key:"clearModels",value:function(){}},{key:"registerBuiltinAttributes",value:function(){this.styleAttributeService.registerStyleAttribute({name:"size",type:ja.Attribute,descriptor:{name:"a_Size",buffer:{usage:$e.DYNAMIC_DRAW,data:[],type:$e.FLOAT},size:1,update:function(o){var u=o.size,f=u===void 0?1:u;return Array.isArray(f)?[f[0]]:[f]}}})}}]),t}(Sl);function R5(e){var i=P5();return function(){var n=(0,rr.Z)(e),r;if(i){var o=(0,rr.Z)(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return(0,jn.Z)(this,r)}}function P5(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var k5=`
uniform float u_additive;
uniform float u_opacity: 1.0;

varying vec4 v_data;
varying vec4 v_color;
varying float v_radius;
varying vec2 v_exteude;
#pragma include "sdf_2d"
#pragma include "picking"

void main() {

  lowp float antialiasblur = v_data.z;
  float r = v_radius / (v_radius);

  float outer_df = sdCircle(v_data.xy, 1.0);
  float inner_df = sdCircle(v_data.xy, r);

  float opacity_t = smoothstep(0.0, antialiasblur, outer_df);

  gl_FragColor = vec4(v_color.rgb, v_color.a * u_opacity);

  if(u_additive > 0.0) {
    gl_FragColor *= opacity_t;
  } else {
    gl_FragColor.a *= opacity_t;
  }

  if(gl_FragColor.a > 0.0) {
    gl_FragColor = filterColor(gl_FragColor);
  }

  vec2 extrude =  v_exteude;
  vec2 dir = normalize(extrude);
  vec2 baseDir = vec2(1.0, 0.0);
  float pi = 3.14159265359;
  // full circle
  // float rades = dot(dir, baseDir);
  // float flag = sign(dir.y);
  // float radar_v = (flag - 1.0) * -0.5 + flag * acos(rades)/pi/2.0;
  
  // half circle
  float flag = sign(dir.y);
  float rades = dot(dir, baseDir);
  float radar_v = (flag - 1.0) * -0.5 * acos(rades)/pi;
  // simple AA
  if(radar_v > 0.99) {
    radar_v = 1.0 - (radar_v - 0.99)/0.01;
  }

  gl_FragColor.a *= radar_v;
}
`,L5=`attribute vec4 a_Color;
attribute vec3 a_Position;
attribute vec3 a_Extrude;
attribute float a_Size;
uniform float u_speed: 1.0;
uniform float u_time;

uniform mat4 u_ModelMatrix;
uniform mat4 u_Mvp;
uniform float u_isMeter;

varying vec4 v_data;
varying vec4 v_color;
varying float v_radius;
varying vec2 v_exteude;

#pragma include "projection"
#pragma include "picking"

void main() {
  vec3 extrude = a_Extrude;
  float newSize = setPickingSize(a_Size);

  float time = u_time * u_speed;
  mat2 rotateMatrix = mat2( 
    cos(time), sin(time), 
    -sin(time), cos(time)
  );
  v_exteude = rotateMatrix * a_Extrude.xy;

  // unpack color(vec2)
  v_color = a_Color;

  // radius(16-bit)
  v_radius = newSize;

  // anti-alias
  float blur = 0.0;
  float antialiasblur = -max(2.0 / u_DevicePixelRatio / a_Size, blur);

  vec2 offset = (extrude.xy * (newSize));
  vec3 aPosition = a_Position;
  if(u_isMeter < 1.0) {
    // \u4E0D\u4EE5\u7C73\u4E3A\u5B9E\u9645\u5355\u4F4D
    offset = project_pixel(offset);
  } else {
    // \u4EE5\u7C73\u4E3A\u5B9E\u9645\u5355\u4F4D
    antialiasblur *= pow(19.0 - u_Zoom, 2.0);
    antialiasblur = max(antialiasblur, -0.01);
    // offset *= 0.5;

    if(u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT || u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {
      aPosition.xy += offset;
      offset.x = 0.0;
      offset.y = 0.0;
    }
  }

  v_data = vec4(extrude.x, extrude.y, antialiasblur, -1.0);

  vec4 project_pos = project_position(vec4(aPosition.xy, 0.0, 1.0));

  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x
    gl_Position = u_Mvp * vec4(project_pos.xy + offset, 0.0, 1.0);
  } else {
    gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy + offset, project_pixel(setPickingOrder(0.0)), 1.0));
  }

  setPickingColor(a_PickingColor);
}
`,D5=function(e){(0,ui.Z)(t,e);var i=R5(t);function t(){var n;(0,Ur.Z)(this,t);for(var r=arguments.length,o=new Array(r),u=0;u<r;u++)o[u]=arguments[u];return n=i.call.apply(i,[this].concat(o)),(0,He.Z)((0,er.Z)(n),"meter2coord",1),(0,He.Z)((0,er.Z)(n),"isMeter",!1),n}return(0,Jr.Z)(t,[{key:"getUninforms",value:function(){var r=this.layer.getLayerConfig(),o=r.opacity,u=o===void 0?1:o,f=r.blend,g=r.speed,x=g===void 0?1:g;return{u_isMeter:Number(this.isMeter),u_speed:x,u_additive:f==="additive"?1:0,u_opacity:(0,Wr.isNumber)(u)?u:1}}},{key:"getAnimateUniforms",value:function(){var r=this.layer.getLayerConfig(),o=r.animateOption,u=o===void 0?{enable:!1}:o;return{u_animate:this.animateOption2Array(u),u_time:this.layer.getLayerAnimateTime()}}},{key:"getAttribute",value:function(){return this.styleAttributeService.createAttributesAndIndices(this.layer.getEncodedData(),gv)}},{key:"initModels",value:function(){var n=(0,An.Z)(Nt().mark(function o(){var u,f,g,x;return Nt().wrap(function(P){for(;;)switch(P.prev=P.next){case 0:return u=this.layer.getLayerConfig(),f=u.unit,g=f===void 0?"l7size":f,x=this.mapService.version,g==="meter"&&x!==Mc.DEFUALT&&x!==Mc.GLOBEL&&(this.isMeter=!0,this.calMeter2Coord()),P.next=5,this.buildModels();case 5:return P.abrupt("return",P.sent);case 6:case"end":return P.stop()}},o,this)}));function r(){return n.apply(this,arguments)}return r}()},{key:"calMeter2Coord",value:function(){var r=(0,Mr.Z)(this.layer.getSource().extent,4),o=r[0],u=r[1],f=r[2],g=r[3],x=[(o+f)/2,(u+g)/2],I=this.mapService.version;if(I===Mc.MAPBOX&&window.mapboxgl.MercatorCoordinate){var P=window.mapboxgl.MercatorCoordinate.fromLngLat({lng:x[0],lat:x[1]},0),G=1,$=G*P.meterInMercatorCoordinateUnits(),Ee=new window.mapboxgl.MercatorCoordinate(P.x-$,P.y,P.z),Se=Ee.toLngLat();this.meter2coord=x[0]-Se.lng;return}var Re=this.mapService.meterToCoord(x,[o,u]),Ye=this.mapService.meterToCoord(x,[f===o?f+.1:f,g===u?u+.1:g]);this.meter2coord=(Re+Ye)/2,this.meter2coord||(this.meter2coord=7.70681090738883)}},{key:"buildModels",value:function(){var n=(0,An.Z)(Nt().mark(function o(){var u,f,g,x,I,P;return Nt().wrap(function($){for(;;)switch($.prev=$.next){case 0:return u=this.layer.getLayerConfig(),f=u.mask,g=f===void 0?!1:f,x=u.maskInside,I=x===void 0?!0:x,$.next=3,this.layer.buildLayerModel({moduleName:"pointRadar",vertexShader:L5,fragmentShader:k5,triangulation:gv,depth:{enable:!1},blend:this.getBlend(),stencil:zo(g,I)});case 3:return P=$.sent,$.abrupt("return",[P]);case 5:case"end":return $.stop()}},o,this)}));function r(){return n.apply(this,arguments)}return r}()},{key:"clearModels",value:function(){var r;(r=this.dataTexture)===null||r===void 0||r.destroy()}},{key:"animateOption2Array",value:function(r){return[r.enable?0:1,r.speed||1,r.rings||3,0]}},{key:"registerBuiltinAttributes",value:function(){var r=this;this.styleAttributeService.registerStyleAttribute({name:"extrude",type:ja.Attribute,descriptor:{name:"a_Extrude",buffer:{usage:$e.DYNAMIC_DRAW,data:[],type:$e.FLOAT},size:3,update:function(u,f,g,x){var I=[1,1,0,-1,1,0,-1,-1,0,1,-1,0],P=x%4*3;return[I[P],I[P+1],I[P+2]]}}}),this.styleAttributeService.registerStyleAttribute({name:"size",type:ja.Attribute,descriptor:{name:"a_Size",buffer:{usage:$e.DYNAMIC_DRAW,data:[],type:$e.FLOAT},size:1,update:function(u){var f=u.size,g=f===void 0?5:f;return Array.isArray(g)?[g[0]*r.meter2coord]:[g*r.meter2coord]}}})}}]),t}(Sl);function F5(e){var i=N5();return function(){var n=(0,rr.Z)(e),r;if(i){var o=(0,rr.Z)(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return(0,jn.Z)(this,r)}}function N5(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var B5=`
uniform float u_opacity : 1;
uniform vec2 u_offsets;
uniform float u_additive;

uniform float u_stroke_opacity : 1;

uniform vec4 u_stroke_color : [0.0, 0.0, 0.0, 0.0];

varying vec4 v_color;
varying mat4 styleMappingMat; // \u4F20\u9012\u4ECE\u7247\u5143\u4E2D\u4F20\u9012\u7684\u6620\u5C04\u6570\u636E
varying float v_blur;
varying float v_innerRadius;

#pragma include "picking"
void main() {
  vec2 center = vec2(0.5);

  float opacity = styleMappingMat[0][0];
  // Tip: \u7247\u5143\u5230\u4E2D\u5FC3\u70B9\u7684\u8DDD\u79BB 0 - 1
  float fragmengTocenter = distance(center, gl_PointCoord) * 2.0;
  // Tip: \u7247\u5143\u7684\u526A\u5207\u6210\u5706\u5F62
  float circleClipOpacity = 1.0 - smoothstep(v_blur, 1.0, fragmengTocenter);


  if(v_innerRadius < 0.99) {
    // \u5F53\u5B58\u5728 stroke \u4E14 stroke > 0.01
    float blurWidth = (1.0 - v_blur)/2.0;
    vec4 stroke = vec4(u_stroke_color.rgb, u_stroke_opacity);
    if(fragmengTocenter > v_innerRadius + blurWidth) {
      gl_FragColor = stroke;
    } else if(fragmengTocenter > v_innerRadius - blurWidth){
      float mixR = (fragmengTocenter - (v_innerRadius - blurWidth)) / (blurWidth * 2.0);
      gl_FragColor = mix(v_color, stroke, mixR);
    } else {
      gl_FragColor = v_color;
    }
  } else {
    // \u5F53\u4E0D\u5B58\u5728 stroke \u6216 stroke <= 0.01
    gl_FragColor = v_color;
  }

  gl_FragColor.a *= opacity;

  gl_FragColor = filterColor(gl_FragColor);
  
  if(u_additive > 0.0) {
    gl_FragColor *= circleClipOpacity;
  } else {
    gl_FragColor.a *= circleClipOpacity;
  }

}
`,z5=`
attribute vec3 a_Position;
uniform mat4 u_ModelMatrix;
uniform mat4 u_Mvp;
attribute float a_Size;
attribute vec4 a_Color;
varying vec4 v_color;

uniform float u_opacity : 1;
uniform vec2 u_offsets;
uniform float u_stroke_width;

varying mat4 styleMappingMat; // \u7528\u4E8E\u5C06\u5728\u9876\u70B9\u7740\u8272\u5668\u4E2D\u8BA1\u7B97\u597D\u7684\u6837\u5F0F\u503C\u4F20\u9012\u7ED9\u7247\u5143
varying float v_blur;
varying float v_innerRadius;

#pragma include "styleMapping"
#pragma include "styleMappingCalOpacity"

#pragma include "projection"
#pragma include "picking"
#pragma include "project"
void main() {
  v_color = a_Color;
  v_blur = 1.0 - max(2.0/a_Size, 0.05);
  v_innerRadius = max((a_Size - u_stroke_width) / a_Size, 0.0);

  // cal style mapping - \u6570\u636E\u7EB9\u7406\u6620\u5C04\u90E8\u5206\u7684\u8BA1\u7B97
styleMappingMat = mat4(
    0.0, 0.0, 0.0, 0.0, // opacity - strokeOpacity - strokeWidth - empty
    0.0, 0.0, 0.0, 0.0, // strokeR - strokeG - strokeB - strokeA
    0.0, 0.0, 0.0, 0.0, // offsets[0] - offsets[1]
    0.0, 0.0, 0.0, 0.0
  );

  float rowCount = u_cellTypeLayout[0][0];    // \u5F53\u524D\u7684\u6570\u636E\u7EB9\u7406\u6709\u51E0\u884C
  float columnCount = u_cellTypeLayout[0][1]; // \u5F53\u770B\u5230\u6570\u636E\u7EB9\u7406\u6709\u51E0\u5217
  float columnWidth = 1.0/columnCount;  // \u5217\u5BBD
  float rowHeight = 1.0/rowCount;       // \u884C\u9AD8
  float cellCount = calCellCount(); // opacity - strokeOpacity - strokeWidth - stroke - offsets
  float id = a_vertexId; // \u7B2Cn\u4E2A\u9876\u70B9
  float cellCurrentRow = floor(id * cellCount / columnCount) + 1.0; // \u8D77\u59CB\u70B9\u5728\u7B2C\u51E0\u884C
  float cellCurrentColumn = mod(id * cellCount, columnCount) + 1.0; // \u8D77\u59CB\u70B9\u5728\u7B2C\u51E0\u5217
  
  // cell \u56FA\u5B9A\u987A\u5E8F opacity -> strokeOpacity -> strokeWidth -> stroke ... 
  // \u6309\u987A\u5E8F\u4ECE cell \u4E2D\u53D6\u503C\u3001\u82E5\u6CA1\u6709\u5219\u81EA\u52A8\u5F80\u4E0B\u53D6\u503C
  float textureOffset = 0.0; // \u5728 cell \u4E2D\u53D6\u503C\u7684\u504F\u79FB\u91CF

  vec2 opacityAndOffset = calOpacityAndOffset(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset, columnWidth, rowHeight);
  styleMappingMat[0][0] = opacityAndOffset.r;
  textureOffset = opacityAndOffset.g;

  vec2 textrueOffsets = vec2(0.0, 0.0);
  if(hasOffsets()) {
    vec2 valueXPos = nextPos(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset);
    textrueOffsets.r = pos2value(valueXPos, columnWidth, rowHeight); // x
    textureOffset += 1.0;

    vec2 valueYPos = nextPos(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset);
    textrueOffsets.g = pos2value(valueYPos, columnWidth, rowHeight); // x
    textureOffset += 1.0;
  } else {
    textrueOffsets = u_offsets;
  }

  // cal style mapping
  
  vec2 offset = project_pixel(textrueOffsets);
  
  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x
    gl_Position = u_Mvp * vec4(a_Position.xy + offset, a_Position.z, 1.0);
  } else { // else
    vec4 project_pos = project_position(vec4(a_Position, 1.0)) + vec4(a_Size / 2.,-a_Size /2.,0.,0.);
    gl_Position = project_common_position_to_clipspace(vec4(vec2(project_pos.xy+offset),project_pos.z,project_pos.w));
  }

  gl_PointSize = a_Size * 2.0 * u_DevicePixelRatio;
  setPickingColor(a_PickingColor);
}
`;function sb(e){var i=e.coordinates;return{vertices:(0,ie.Z)(i),indices:[0],size:i.length}}var U5=function(e){(0,ui.Z)(t,e);var i=F5(t);function t(){return(0,Ur.Z)(this,t),i.apply(this,arguments)}return(0,Jr.Z)(t,[{key:"getDefaultStyle",value:function(){return{blend:"additive"}}},{key:"getUninforms",value:function(){var r=this.layer.getLayerConfig(),o=r.opacity,u=o===void 0?1:o,f=r.offsets,g=f===void 0?[0,0]:f,x=r.blend,I=r.strokeOpacity,P=I===void 0?1:I,G=r.strokeWidth,$=G===void 0?0:G,Ee=r.stroke,Se=Ee===void 0?"#fff":Ee;if(this.dataTextureTest&&this.dataTextureNeedUpdate({opacity:u,offsets:g})){this.judgeStyleAttributes({opacity:u,offsets:g});var Re=this.layer.getEncodedData(),Ye=this.calDataFrame(this.cellLength,Re,this.cellProperties),St=Ye.data,vt=Ye.width,Ut=Ye.height;this.rowCount=Ut,this.dataTexture=this.cellLength>0&&St.length>0?this.createTexture2D({flipY:!0,data:St,format:$e.LUMINANCE,type:$e.FLOAT,width:vt,height:Ut}):this.createTexture2D({flipY:!0,data:[1],format:$e.LUMINANCE,type:$e.FLOAT,width:1,height:1})}return{u_additive:x==="additive"?1:0,u_dataTexture:this.dataTexture,u_cellTypeLayout:this.getCellTypeLayout(),u_opacity:(0,Wr.isNumber)(u)?u:1,u_offsets:this.isOffsetStatic(g)?g:[0,0],u_stroke_opacity:(0,Wr.isNumber)(P)?P:1,u_stroke_width:(0,Wr.isNumber)($)?$:1,u_stroke_color:this.getStrokeColor(Se)}}},{key:"initModels",value:function(){var n=(0,An.Z)(Nt().mark(function o(){return Nt().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return f.next=2,this.buildModels();case 2:return f.abrupt("return",f.sent);case 3:case"end":return f.stop()}},o,this)}));function r(){return n.apply(this,arguments)}return r}()},{key:"buildModels",value:function(){var n=(0,An.Z)(Nt().mark(function o(){var u,f,g,x,I,P;return Nt().wrap(function($){for(;;)switch($.prev=$.next){case 0:return u=this.layer.getLayerConfig(),f=u.mask,g=f===void 0?!1:f,x=u.maskInside,I=x===void 0?!0:x,this.layer.triangulation=sb,$.next=4,this.layer.buildLayerModel({moduleName:"pointSimple",vertexShader:z5,fragmentShader:B5,triangulation:sb,depth:{enable:!1},primitive:$e.POINTS,blend:this.getBlend(),stencil:zo(g,I)});case 4:return P=$.sent,$.abrupt("return",[P]);case 6:case"end":return $.stop()}},o,this)}));function r(){return n.apply(this,arguments)}return r}()},{key:"clearModels",value:function(){var r;(r=this.dataTexture)===null||r===void 0||r.destroy()}},{key:"registerBuiltinAttributes",value:function(){this.styleAttributeService.registerStyleAttribute({name:"size",type:ja.Attribute,descriptor:{name:"a_Size",buffer:{usage:$e.DYNAMIC_DRAW,data:[],type:$e.FLOAT},size:1,update:function(o){var u=o.size,f=u===void 0?1:u;return Array.isArray(f)?[f[0]]:[f]}}})}}]),t}(Sl);function Z5(e,i){var t=typeof Symbol!="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(!t){if(Array.isArray(e)||(t=j5(e))||i&&e&&typeof e.length=="number"){t&&(e=t);var n=0,r=function(){};return{s:r,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(x){throw x},f:r}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var o=!0,u=!1,f;return{s:function(){t=t.call(e)},n:function(){var x=t.next();return o=x.done,x},e:function(x){u=!0,f=x},f:function(){try{!o&&t.return!=null&&t.return()}finally{if(u)throw f}}}}function j5(e,i){if(!!e){if(typeof e=="string")return ub(e,i);var t=Object.prototype.toString.call(e).slice(8,-1);if(t==="Object"&&e.constructor&&(t=e.constructor.name),t==="Map"||t==="Set")return Array.from(e);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return ub(e,i)}}function ub(e,i){(i==null||i>e.length)&&(i=e.length);for(var t=0,n=new Array(i);t<i;t++)n[t]=e[t];return n}var V5=function(){function e(i,t,n){(0,Ur.Z)(this,e),(0,He.Z)(this,"boxCells",[]);var r=this.boxCells;this.xCellCount=Math.ceil(i/n),this.yCellCount=Math.ceil(t/n);for(var o=0;o<this.xCellCount*this.yCellCount;o++)r.push([]);this.boxKeys=[],this.bboxes=[],this.width=i,this.height=t,this.xScale=this.xCellCount/i,this.yScale=this.yCellCount/t,this.boxUid=0}return(0,Jr.Z)(e,[{key:"insert",value:function(t,n,r,o,u){this.forEachCell(n,r,o,u,this.insertBoxCell,this.boxUid++),this.boxKeys.push(t),this.bboxes.push(n),this.bboxes.push(r),this.bboxes.push(o),this.bboxes.push(u)}},{key:"query",value:function(t,n,r,o,u){return this.queryHitTest(t,n,r,o,!1,u)}},{key:"hitTest",value:function(t,n,r,o,u){return this.queryHitTest(t,n,r,o,!0,u)}},{key:"insertBoxCell",value:function(t,n,r,o,u,f){this.boxCells[u].push(f)}},{key:"queryHitTest",value:function(t,n,r,o,u,f){if(r<0||t>this.width||o<0||n>this.height)return u?!1:[];var g=[];if(t<=0&&n<=0&&this.width<=r&&this.height<=o){if(u)return!0;for(var x=0;x<this.boxKeys.length;x++)g.push({key:this.boxKeys[x],x1:this.bboxes[x*4],y1:this.bboxes[x*4+1],x2:this.bboxes[x*4+2],y2:this.bboxes[x*4+3]});return f?g.filter(f):g}var I={hitTest:u,seenUids:{box:{},circle:{}}};return this.forEachCell(t,n,r,o,this.queryCell,g,I,f),u?g.length>0:g}},{key:"queryCell",value:function(t,n,r,o,u,f,g,x){var I=g.seenUids,P=this.boxCells[u];if(P!==null){var G=this.bboxes,$=Z5(P),Ee;try{for($.s();!(Ee=$.n()).done;){var Se=Ee.value;if(!I.box[Se]){I.box[Se]=!0;var Re=Se*4;if(t<=G[Re+2]&&n<=G[Re+3]&&r>=G[Re+0]&&o>=G[Re+1]&&(!x||x(this.boxKeys[Se]))){if(g.hitTest)return f.push(!0),!0;f.push({key:this.boxKeys[Se],x1:G[Re],y1:G[Re+1],x2:G[Re+2],y2:G[Re+3]})}}}}catch(Ye){$.e(Ye)}finally{$.f()}}return!1}},{key:"forEachCell",value:function(t,n,r,o,u,f,g,x){for(var I=this.convertToXCellCoord(t),P=this.convertToYCellCoord(n),G=this.convertToXCellCoord(r),$=this.convertToYCellCoord(o),Ee=I;Ee<=G;Ee++)for(var Se=P;Se<=$;Se++){var Re=this.xCellCount*Se+Ee;if(u.call(this,t,n,r,o,Re,f,g,x))return}}},{key:"convertToXCellCoord",value:function(t){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(t*this.xScale)))}},{key:"convertToYCellCoord",value:function(t){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(t*this.yScale)))}}]),e}(),G5=V5,lb=function(){function e(i,t){(0,Ur.Z)(this,e),(0,He.Z)(this,"viewportPadding",100),this.width=i,this.height=t,this.viewportPadding=Math.max(i,t),this.grid=new G5(i+this.viewportPadding,t+this.viewportPadding,25),this.screenRightBoundary=i+this.viewportPadding,this.screenBottomBoundary=t+this.viewportPadding,this.gridRightBoundary=i+2*this.viewportPadding,this.gridBottomBoundary=t+2*this.viewportPadding}return(0,Jr.Z)(e,[{key:"placeCollisionBox",value:function(t){var n=t.x1+t.anchorPointX+this.viewportPadding,r=t.y1+t.anchorPointY+this.viewportPadding,o=t.x2+t.anchorPointX+this.viewportPadding,u=t.y2+t.anchorPointY+this.viewportPadding;return!this.isInsideGrid(n,r,o,u)||this.grid.hitTest(n,r,o,u)?{box:[]}:{box:[n,r,o,u]}}},{key:"insertCollisionBox",value:function(t,n){var r={featureIndex:n};this.grid.insert(r,t[0],t[1],t[2],t[3])}},{key:"project",value:function(t,n,r){var o=lg(n,r,0,1),u=J0(),f=ph.apply(w,(0,ie.Z)(t));return v0(u,o,f),{x:(u[0]/u[3]+1)/2*this.width+this.viewportPadding,y:(-u[1]/u[3]+1)/2*this.height+this.viewportPadding}}},{key:"isInsideGrid",value:function(t,n,r,o){return r>=0&&t<this.gridRightBoundary&&o>=0&&n<this.gridBottomBoundary}}]),e}();function cb(e,i){var t=typeof Symbol!="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(!t){if(Array.isArray(e)||(t=H5(e))||i&&e&&typeof e.length=="number"){t&&(e=t);var n=0,r=function(){};return{s:r,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(x){throw x},f:r}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var o=!0,u=!1,f;return{s:function(){t=t.call(e)},n:function(){var x=t.next();return o=x.done,x},e:function(x){u=!0,f=x},f:function(){try{!o&&t.return!=null&&t.return()}finally{if(u)throw f}}}}function H5(e,i){if(!!e){if(typeof e=="string")return fb(e,i);var t=Object.prototype.toString.call(e).slice(8,-1);if(t==="Object"&&e.constructor&&(t=e.constructor.name),t==="Map"||t==="Set")return Array.from(e);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return fb(e,i)}}function fb(e,i){(i==null||i>e.length)&&(i=e.length);for(var t=0,n=new Array(i);t<i;t++)n[t]=e[t];return n}function pb(e){var i=.5,t=.5;switch(e){case"right":case"top-right":case"bottom-right":i=1;break;case"left":case"top-left":case"bottom-left":i=0;break;default:i=.5}switch(e){case"bottom":case"bottom-right":case"bottom-left":t=1;break;case"top":case"top-right":case"top-left":t=0;break;default:t=.5}return{horizontalAlign:i,verticalAlign:t}}function hb(e,i,t,n,r){if(!!r){var o=e[n],u=o.glyph;if(u)for(var f=i[u].advance*o.scale,g=(e[n].x+f)*r,x=t;x<=n;x++)e[x].x-=g}}function db(e,i,t,n,r,o,u){var f=(i-t)*r,g=(-n*u+.5)*o,x=cb(e),I;try{for(x.s();!(I=x.n()).done;){var P=I.value;P.x+=f,P.y+=g}}catch(G){x.e(G)}finally{x.f()}}function W5(e,i,t,n,r,o,u){var f=-8,g=0,x=f,I=0,P=e.positionedGlyphs,G=o==="right"?1:o==="left"?0:.5,$=P.length;t.forEach(function(St){if(St.split("").forEach(function(Ut){var Kt=i[Ut],Tr=0;Kt&&(P.push({glyph:Ut,x:g,y:x+Tr,vertical:!1,scale:1,metrics:Kt}),g+=Kt.advance+u)}),P.length!==$){var vt=g-u;I=Math.max(vt,I),hb(P,i,$,P.length-1,G)}g=0,x-=n+5});var Ee=pb(r),Se=Ee.horizontalAlign,Re=Ee.verticalAlign;db(P,G,Se,Re,I,n,t.length);var Ye=x-f;e.top+=-Re*Ye,e.bottom=e.top-Ye,e.left+=-Se*I,e.right=e.left+I}function $5(e,i,t,n,r,o,u){var f=-8,g=0,x=f,I=0,P=e.positionedGlyphs,G=o==="right"?1:o==="left"?0:.5,$=P.length;t.forEach(function(St){var vt=i[St],Ut=0;if(vt&&(P.push({glyph:St,x:vt.advance/2,y:x+Ut,vertical:!1,scale:1,metrics:vt}),g+=vt.advance+u),P.length!==$){var Kt=g-u;I=Math.max(Kt,I),hb(P,i,$,P.length-1,G)}g=0,x-=n+5});var Ee=pb(r),Se=Ee.horizontalAlign,Re=Ee.verticalAlign;db(P,G,Se,Re,I,n,t.length);var Ye=x-f;e.top+=-Re*Ye,e.bottom=e.top-Ye,e.left+=-Se*I,e.right=e.left+I}function vb(e,i,t,n,r,o){var u=arguments.length>6&&arguments[6]!==void 0?arguments[6]:[0,0],f=arguments.length>7?arguments[7]:void 0,g=e.split(`
`),x=[],I={positionedGlyphs:x,top:u[1],bottom:u[1],left:u[0],right:u[0],lineCount:g.length,text:e};return f?$5(I,i,g,t,n,r,o):W5(I,i,g,t,n,r,o),x.length?I:!1}function mb(e){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[0,0],t=arguments.length>2?arguments[2]:void 0,n=e.positionedGlyphs,r=n===void 0?[]:n,o=[],u=cb(r),f;try{for(u.s();!(f=u.n()).done;){var g=f.value,x=g.metrics,I=4,P=x.advance*g.scale/2,G=t?[g.x+P,g.y]:[0,0],$=t?[0,0]:[g.x+P+i[0],g.y+i[1]],Ee=(0-I)*g.scale-P+$[0],Se=(0-I)*g.scale+$[1],Re=Ee+x.width*g.scale,Ye=Se+x.height*g.scale,St={x:Ee,y:Se},vt={x:Re,y:Se},Ut={x:Ee,y:Ye},Kt={x:Re,y:Ye};o.push({tl:St,tr:vt,bl:Ut,br:Kt,tex:x,glyphOffset:G})}}catch(Tr){u.e(Tr)}finally{u.f()}return o}function X5(e,i){var t=typeof Symbol!="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(!t){if(Array.isArray(e)||(t=Y5(e))||i&&e&&typeof e.length=="number"){t&&(e=t);var n=0,r=function(){};return{s:r,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(x){throw x},f:r}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var o=!0,u=!1,f;return{s:function(){t=t.call(e)},n:function(){var x=t.next();return o=x.done,x},e:function(x){u=!0,f=x},f:function(){try{!o&&t.return!=null&&t.return()}finally{if(u)throw f}}}}function Y5(e,i){if(!!e){if(typeof e=="string")return gb(e,i);var t=Object.prototype.toString.call(e).slice(8,-1);if(t==="Object"&&e.constructor&&(t=e.constructor.name),t==="Map"||t==="Set")return Array.from(e);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return gb(e,i)}}function gb(e,i){(i==null||i>e.length)&&(i=e.length);for(var t=0,n=new Array(i);t<i;t++)n[t]=e[t];return n}function K5(e){var i=Q5();return function(){var n=(0,rr.Z)(e),r;if(i){var o=(0,rr.Z)(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return(0,jn.Z)(this,r)}}function Q5(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var yb=`#define SDF_PX 8.0
#define EDGE_GAMMA 0.105
#define FONT_SIZE 48.0
uniform sampler2D u_sdf_map;
uniform float u_gamma_scale : 0.5;
// uniform float u_font_size : 24.0;
uniform float u_opacity : 1.0;
uniform vec4 u_stroke_color : [0, 0, 0, 1];
uniform float u_stroke_width : 2.0;
uniform float u_halo_blur : 0.5;
uniform float u_DevicePixelRatio;

varying vec4 v_color;
varying vec2 v_uv;
varying float v_gamma_scale;
varying float v_fontScale;

varying mat4 styleMappingMat; // \u4F20\u9012\u4ECE\u7247\u5143\u4E2D\u4F20\u9012\u7684\u6620\u5C04\u6570\u636E

#pragma include "picking"
void main() {
  // get style data mapping
  float opacity = styleMappingMat[0][0];
  float strokeWidth = styleMappingMat[0][2];
  vec4 textrueStroke = vec4(
    styleMappingMat[1][0],
    styleMappingMat[1][1],
    styleMappingMat[1][2],
    styleMappingMat[1][3]
  );

  // get sdf from atlas
  float dist = texture2D(u_sdf_map, v_uv).a;

  // float fontScale = u_font_size / FONT_SIZE;

  // lowp float buff = (6.0 - u_stroke_width / v_fontScale) / SDF_PX;
  lowp float buff = (6.0 - strokeWidth / v_fontScale) / SDF_PX;
  highp float gamma = (u_halo_blur * 1.19 / SDF_PX + EDGE_GAMMA) / (v_fontScale * u_gamma_scale) / 1.0;

  highp float gamma_scaled = gamma * v_gamma_scale;

  highp float alpha = smoothstep(buff - gamma_scaled, buff + gamma_scaled, dist);
  // gl_FragColor = mix(vec4(v_color.rgb, v_color.a * u_opacity), vec4(u_stroke_color.rgb, u_stroke_color.a * u_opacity), smoothstep(0., 0.5, 1. - dist));
  gl_FragColor = mix(vec4(v_color.rgb, v_color.a * opacity), vec4(textrueStroke.rgb, textrueStroke.a * opacity), smoothstep(0., 0.5, 1. - dist));
  gl_FragColor.a= gl_FragColor.a * alpha;
  gl_FragColor = filterColor(gl_FragColor);
}
`,_b=`#define SDF_PX 8.0
#define EDGE_GAMMA 0.105
#define FONT_SIZE 24.0
attribute vec3 a_Position;
attribute vec2 a_tex;
attribute vec2 a_textOffsets;
attribute vec4 a_Color;
attribute float a_Size;
attribute float a_Rotate;

uniform vec2 u_sdf_map_size;
uniform mat4 u_ModelMatrix;
uniform mat4 u_Mvp;
uniform float u_raisingHeight: 0.0;

varying vec2 v_uv;
varying float v_gamma_scale;
varying vec4 v_color;
varying float v_fontScale;

varying mat4 styleMappingMat; // \u7528\u4E8E\u5C06\u5728\u9876\u70B9\u7740\u8272\u5668\u4E2D\u8BA1\u7B97\u597D\u7684\u6837\u5F0F\u503C\u4F20\u9012\u7ED9\u7247\u5143

uniform float u_opacity : 1;
uniform float u_stroke_width : 2;
uniform vec4 u_stroke_color : [0.0, 0.0, 0.0, 0.0];

#pragma include "styleMapping"
#pragma include "styleMappingCalOpacity"
#pragma include "styleMappingCalStrokeWidth"

#pragma include "projection"
#pragma include "picking"

void main() {
  // cal style mapping - \u6570\u636E\u7EB9\u7406\u6620\u5C04\u90E8\u5206\u7684\u8BA1\u7B97
   styleMappingMat = mat4(
    0.0, 0.0, 0.0, 0.0, // opacity - strokeOpacity - strokeWidth - empty
    0.0, 0.0, 0.0, 0.0, // strokeR - strokeG - strokeB - strokeA
    0.0, 0.0, 0.0, 0.0, // offsets[0] - offsets[1]
    0.0, 0.0, 0.0, 0.0
  );

  float rowCount = u_cellTypeLayout[0][0];    // \u5F53\u524D\u7684\u6570\u636E\u7EB9\u7406\u6709\u51E0\u884C
  float columnCount = u_cellTypeLayout[0][1]; // \u5F53\u770B\u5230\u6570\u636E\u7EB9\u7406\u6709\u51E0\u5217
  float columnWidth = 1.0/columnCount;  // \u5217\u5BBD
  float rowHeight = 1.0/rowCount;       // \u884C\u9AD8
  float cellCount = calCellCount(); // opacity - strokeOpacity - strokeWidth - stroke - offsets
  float id = a_vertexId; // \u7B2Cn\u4E2A\u9876\u70B9
  float cellCurrentRow = floor(id * cellCount / columnCount) + 1.0; // \u8D77\u59CB\u70B9\u5728\u7B2C\u51E0\u884C
  float cellCurrentColumn = mod(id * cellCount, columnCount) + 1.0; // \u8D77\u59CB\u70B9\u5728\u7B2C\u51E0\u5217
  
  // cell \u56FA\u5B9A\u987A\u5E8F opacity -> strokeOpacity -> strokeWidth -> stroke ... 
  // \u6309\u987A\u5E8F\u4ECE cell \u4E2D\u53D6\u503C\u3001\u82E5\u6CA1\u6709\u5219\u81EA\u52A8\u5F80\u4E0B\u53D6\u503C
  float textureOffset = 0.0; // \u5728 cell \u4E2D\u53D6\u503C\u7684\u504F\u79FB\u91CF

  vec2 opacityAndOffset = calOpacityAndOffset(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset, columnWidth, rowHeight);
  styleMappingMat[0][0] = opacityAndOffset.r;
  textureOffset = opacityAndOffset.g;

   vec2 strokeWidthAndOffset = calStrokeWidthAndOffset(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset, columnWidth, rowHeight);
  styleMappingMat[0][2] = strokeWidthAndOffset.r;
  textureOffset = strokeWidthAndOffset.g;

  vec4 textrueStroke = vec4(-1.0, -1.0, -1.0, -1.0);
  if(hasStroke()) {
    vec2 valueRPos = nextPos(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset);
    styleMappingMat[1][0] = pos2value(valueRPos, columnWidth, rowHeight); // R
    textureOffset += 1.0;

    vec2 valueGPos = nextPos(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset);
    styleMappingMat[1][1] = pos2value(valueGPos, columnWidth, rowHeight); // G
    textureOffset += 1.0;

    vec2 valueBPos = nextPos(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset);
    styleMappingMat[1][2] = pos2value(valueBPos, columnWidth, rowHeight); // B
    textureOffset += 1.0;

    vec2 valueAPos = nextPos(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset);
    styleMappingMat[1][3] = pos2value(valueAPos, columnWidth, rowHeight); // A
    textureOffset += 1.0;
  } else {
    if(u_stroke_color == vec4(0.0)) {
      styleMappingMat[1][0] = v_color.r;
      styleMappingMat[1][1] = v_color.g;
      styleMappingMat[1][2] = v_color.b;
      styleMappingMat[1][3] = v_color.a;
    } else {
      styleMappingMat[1][0] = u_stroke_color.r;
      styleMappingMat[1][1] = u_stroke_color.g;
      styleMappingMat[1][2] = u_stroke_color.b;
      styleMappingMat[1][3] = u_stroke_color.a;
    }
  }
  
  // cal style mapping - \u6570\u636E\u7EB9\u7406\u6620\u5C04\u90E8\u5206\u7684\u8BA1\u7B97

  v_color = a_Color;
  v_uv = a_tex / u_sdf_map_size;

  // \u6587\u672C\u7F29\u653E\u6BD4\u4F8B
  float fontScale = a_Size / FONT_SIZE;
  v_fontScale = fontScale;

  vec4 project_pos = project_position(vec4(a_Position, 1.0));
  // vec4 projected_position  = project_common_position_to_clipspace(vec4(project_pos.xyz, 1.0));

  highp float angle_sin = sin(a_Rotate);
  highp float angle_cos = cos(a_Rotate);
  mat2 rotation_matrix = mat2(angle_cos, -1.0 * angle_sin, angle_sin, angle_cos);
  
  // gl_Position = vec4(projected_position.xy / projected_position.w + rotation_matrix * a_textOffsets * fontScale / u_ViewportSize * 2.0 * u_DevicePixelRatio, 0.0, 1.0);

  float raiseHeight = u_raisingHeight;
  if(u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT || u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {
    float mapboxZoomScale = 4.0/pow(2.0, 21.0 - u_Zoom);
    raiseHeight = u_raisingHeight * mapboxZoomScale;
  }

  vec4 projected_position;
  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x
   projected_position  = u_Mvp * (vec4(a_Position.xyz + vec3(0.0, 0.0, raiseHeight), 1.0));
  } else { // else
   projected_position  = project_common_position_to_clipspace(vec4(project_pos.xyz + vec3(0.0, 0.0, raiseHeight), 1.0));
  }

  gl_Position = vec4(
    projected_position.xy / projected_position.w + rotation_matrix * a_textOffsets * fontScale / u_ViewportSize * 2.0 * u_DevicePixelRatio, 0.0, 1.0);
  v_gamma_scale = gl_Position.w;
  setPickingColor(a_PickingColor);

}
`;function xb(e){var i=this,t=e.id,n=[],r=[];if(!i.glyphInfoMap||!i.glyphInfoMap[t])return{vertices:[],indices:[],size:7};var o=i.glyphInfoMap[t].centroid,u=o.length===2?[o[0],o[1],0]:o;return i.glyphInfoMap[t].glyphQuads.forEach(function(f,g){n.push.apply(n,(0,ie.Z)(u).concat([f.tex.x,f.tex.y+f.tex.height,f.tl.x,f.tl.y],(0,ie.Z)(u),[f.tex.x+f.tex.width,f.tex.y+f.tex.height,f.tr.x,f.tr.y],(0,ie.Z)(u),[f.tex.x+f.tex.width,f.tex.y,f.br.x,f.br.y],(0,ie.Z)(u),[f.tex.x,f.tex.y,f.bl.x,f.bl.y])),r.push(0+g*4,1+g*4,2+g*4,2+g*4,3+g*4,0+g*4)}),{vertices:n,indices:r,size:7}}var bb=function(e){(0,ui.Z)(t,e);var i=K5(t);function t(){var n;(0,Ur.Z)(this,t);for(var r=arguments.length,o=new Array(r),u=0;u<r;u++)o[u]=arguments[u];return n=i.call.apply(i,[this].concat(o)),(0,He.Z)((0,er.Z)(n),"glyphInfoMap",{}),(0,He.Z)((0,er.Z)(n),"currentZoom",-1),(0,He.Z)((0,er.Z)(n),"textureHeight",0),(0,He.Z)((0,er.Z)(n),"textCount",0),(0,He.Z)((0,er.Z)(n),"preTextStyle",{}),(0,He.Z)((0,er.Z)(n),"mapping",(0,An.Z)(Nt().mark(function f(){return Nt().wrap(function(x){for(;;)switch(x.prev=x.next){case 0:return n.initGlyph(),n.updateTexture(),x.next=4,n.reBuildModel();case 4:case"end":return x.stop()}},f)}))),n}return(0,Jr.Z)(t,[{key:"getUninforms",value:function(){var r=this.layer.getLayerConfig(),o=r.opacity,u=o===void 0?1:o,f=r.stroke,g=f===void 0?"#fff":f,x=r.strokeWidth,I=x===void 0?0:x,P=r.textAnchor,G=P===void 0?"center":P,$=r.textAllowOverlap,Ee=$===void 0?!1:$,Se=r.halo,Re=Se===void 0?.5:Se,Ye=r.gamma,St=Ye===void 0?2:Ye,vt=r.raisingHeight,Ut=vt===void 0?0:vt,Kt=this.fontService,Tr=Kt.canvas,on=Kt.mapping;if(on&&Object.keys(on).length!==this.textCount&&Tr&&(this.updateTexture(),this.textCount=Object.keys(on).length),this.preTextStyle={textAnchor:G,textAllowOverlap:Ee},this.dataTextureTest&&this.dataTextureNeedUpdate({opacity:u,strokeWidth:I,stroke:g})){this.judgeStyleAttributes({opacity:u,strokeWidth:I,stroke:g});var dn=this.layer.getEncodedData(),vn=this.calDataFrame(this.cellLength,dn,this.cellProperties),si=vn.data,ai=vn.width,Hi=vn.height;this.rowCount=Hi,this.dataTexture=this.cellLength>0&&si.length>0?this.createTexture2D({flipY:!0,data:si,format:$e.LUMINANCE,type:$e.FLOAT,width:ai,height:Hi}):this.createTexture2D({flipY:!0,data:[1],format:$e.LUMINANCE,type:$e.FLOAT,width:1,height:1})}return{u_dataTexture:this.dataTexture,u_cellTypeLayout:this.getCellTypeLayout(),u_raisingHeight:Number(Ut),u_opacity:(0,Wr.isNumber)(u)?u:1,u_stroke_width:(0,Wr.isNumber)(I)?I:1,u_stroke_color:this.getStrokeColor(g),u_sdf_map:this.texture,u_halo_blur:Re,u_gamma_scale:St,u_sdf_map_size:[(Tr==null?void 0:Tr.width)||1,(Tr==null?void 0:Tr.height)||1]}}},{key:"initModels",value:function(){var n=(0,An.Z)(Nt().mark(function o(){var u,f,g,x,I;return Nt().wrap(function(G){for(;;)switch(G.prev=G.next){case 0:return this.layer.inited||this.bindEvent(),this.extent=this.textExtent(),u=this.layer.getLayerConfig(),f=u.textAnchor,g=f===void 0?"center":f,x=u.textAllowOverlap,I=x===void 0?!0:x,this.preTextStyle={textAnchor:g,textAllowOverlap:I},G.next=6,this.buildModels();case 6:return G.abrupt("return",G.sent);case 7:case"end":return G.stop()}},o,this)}));function r(){return n.apply(this,arguments)}return r}()},{key:"buildModels",value:function(){var n=(0,An.Z)(Nt().mark(function o(){var u,f,g,x,I,P,G,$;return Nt().wrap(function(Se){for(;;)switch(Se.prev=Se.next){case 0:return u=this.layer.getLayerConfig(),f=u.mask,g=f===void 0?!1:f,x=u.maskInside,I=x===void 0?!0:x,P=u.textAllowOverlap,G=P===void 0?!1:P,this.initGlyph(),this.updateTexture(),G||this.filterGlyphs(),Se.next=6,this.layer.buildLayerModel({moduleName:"pointText",vertexShader:_b,fragmentShader:yb,triangulation:xb.bind(this),depth:{enable:!1},blend:this.getBlend(),stencil:zo(g,I)});case 6:return $=Se.sent,Se.abrupt("return",[$]);case 8:case"end":return Se.stop()}},o,this)}));function r(){return n.apply(this,arguments)}return r}()},{key:"needUpdate",value:function(){var r=this.layer.getLayerConfig(),o=r.textAllowOverlap,u=o===void 0?!1:o,f=this.layer.getEncodedData();if(f.length<5||u)return!1;var g=this.mapService.getZoom(),x=this.mapService.getBounds(),I=Dl(this.extent,x);return Math.abs(this.currentZoom-g)>1||!I||u!==this.preTextStyle.textAllowOverlap?(this.reBuildModel(),!0):!1}},{key:"clearModels",value:function(){var r,o;(r=this.texture)===null||r===void 0||r.destroy(),(o=this.dataTexture)===null||o===void 0||o.destroy(),this.layer.off("remapping",this.mapping)}},{key:"registerBuiltinAttributes",value:function(){this.styleAttributeService.registerStyleAttribute({name:"rotate",type:ja.Attribute,descriptor:{name:"a_Rotate",buffer:{usage:$e.DYNAMIC_DRAW,data:[],type:$e.FLOAT},size:1,update:function(o){var u=o.rotate,f=u===void 0?0:u;return Array.isArray(f)?[f[0]]:[f]}}}),this.styleAttributeService.registerStyleAttribute({name:"textOffsets",type:ja.Attribute,descriptor:{name:"a_textOffsets",buffer:{usage:$e.STATIC_DRAW,data:[],type:$e.FLOAT},size:2,update:function(o,u,f){return[f[5],f[6]]}}}),this.styleAttributeService.registerStyleAttribute({name:"size",type:ja.Attribute,descriptor:{name:"a_Size",buffer:{usage:$e.DYNAMIC_DRAW,data:[],type:$e.FLOAT},size:1,update:function(o){var u=o.size,f=u===void 0?12:u;return Array.isArray(f)?[f[0]]:[f]}}}),this.styleAttributeService.registerStyleAttribute({name:"textUv",type:ja.Attribute,descriptor:{name:"a_tex",buffer:{usage:$e.DYNAMIC_DRAW,data:[],type:$e.FLOAT},size:2,update:function(o,u,f){return[f[3],f[4]]}}})}},{key:"bindEvent",value:function(){this.layer.isTileLayer||this.layer.on("remapping",this.mapping)}},{key:"textExtent",value:function(){var r=this.mapService.getBounds();return cl(r,.5)}},{key:"initTextFont",value:function(){var r=this.layer.getLayerConfig(),o=r.fontWeight,u=o===void 0?"400":o,f=r.fontFamily,g=f===void 0?"sans-serif":f,x=this.layer.getEncodedData(),I=[];x.forEach(function(P){var G=P.shape,$=G===void 0?"":G;$=$.toString();var Ee=X5($),Se;try{for(Ee.s();!(Se=Ee.n()).done;){var Re=Se.value;I.indexOf(Re)===-1&&I.push(Re)}}catch(Ye){Ee.e(Ye)}finally{Ee.f()}}),this.fontService.setFontOptions({characterSet:I,fontWeight:u,fontFamily:g,iconfont:!1})}},{key:"initIconFontTex",value:function(){var r=this.layer.getLayerConfig(),o=r.fontWeight,u=o===void 0?"400":o,f=r.fontFamily,g=f===void 0?"sans-serif":f,x=this.layer.getEncodedData(),I=[];x.forEach(function(P){var G=P.shape,$=G===void 0?"":G;$="".concat($),I.indexOf($)===-1&&I.push($)}),this.fontService.setFontOptions({characterSet:I,fontWeight:u,fontFamily:g,iconfont:!0})}},{key:"generateGlyphLayout",value:function(r){var o=this,u=this.fontService.mapping,f=this.layer.getLayerConfig(),g=f.spacing,x=g===void 0?2:g,I=f.textAnchor,P=I===void 0?"center":I,G=this.layer.getEncodedData();this.glyphInfo=G.map(function($){var Ee=$.shape,Se=Ee===void 0?"":Ee,Re=$.id,Ye=$.size,St=Ye===void 0?1:Ye,vt=$.textOffset,Ut=vt===void 0?[0,0]:vt,Kt=vb(Se.toString(),u,St,P,"left",x,Ut,r),Tr=mb(Kt,Ut,!1);return $.shaping=Kt,$.glyphQuads=Tr,$.centroid=d($.coordinates),$.originCentroid=$.version==="GAODE2.x"?d($.originCoordinates):$.originCentroid=$.centroid,o.glyphInfoMap[Re]={shaping:Kt,glyphQuads:Tr,centroid:d($.coordinates)},$})}},{key:"filterGlyphs",value:function(){var r=this,o=this.layer.getLayerConfig(),u=o.padding,f=u===void 0?[4,4]:u,g=o.textAllowOverlap,x=g===void 0?!1:g;if(!x){this.glyphInfoMap={},this.currentZoom=this.mapService.getZoom(),this.extent=this.textExtent();var I=this.rendererService.getViewportSize(),P=I.width,G=I.height,$=new lb(P,G),Ee=this.glyphInfo.filter(function(Se){var Re=Se.shaping,Ye=Se.id,St=Ye===void 0?0:Ye,vt=Se.version==="GAODE2.x"?Se.originCentroid:Se.centroid,Ut=Se.size,Kt=Ut/16,Tr=r.mapService.lngLatToContainer(vt),on=$.placeCollisionBox({x1:Re.left*Kt-f[0],x2:Re.right*Kt+f[0],y1:Re.top*Kt-f[1],y2:Re.bottom*Kt+f[1],anchorPointX:Tr.x,anchorPointY:Tr.y}),dn=on.box;return dn&&dn.length?($.insertCollisionBox(dn,St),!0):!1});Ee.forEach(function(Se){r.glyphInfoMap[Se.id]=Se})}}},{key:"initGlyph",value:function(){var r=this.layer.getLayerConfig(),o=r.iconfont,u=o===void 0?!1:o;u?this.initIconFontTex():this.initTextFont(),this.generateGlyphLayout(u)}},{key:"updateTexture",value:function(){var r=this.rendererService.createTexture2D,o=this.fontService.canvas;this.textureHeight=o.height,this.texture&&this.texture.destroy(),this.texture=r({data:o,mag:$e.LINEAR,min:$e.LINEAR,width:o.width,height:o.height})}},{key:"reBuildModel",value:function(){var n=(0,An.Z)(Nt().mark(function o(){var u,f,g,x,I,P;return Nt().wrap(function($){for(;;)switch($.prev=$.next){case 0:return u=this.layer.getLayerConfig(),f=u.mask,g=f===void 0?!1:f,x=u.maskInside,I=x===void 0?!0:x,this.filterGlyphs(),$.next=4,this.layer.buildLayerModel({moduleName:"pointText",vertexShader:_b,fragmentShader:yb,triangulation:xb.bind(this),depth:{enable:!1},blend:this.getBlend(),stencil:zo(g,I)});case 4:P=$.sent,this.layer.models=[P];case 6:case"end":return $.stop()}},o,this)}));function r(){return n.apply(this,arguments)}return r}()}]),t}(Sl);function J5(e,i){var t=typeof Symbol!="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(!t){if(Array.isArray(e)||(t=q5(e))||i&&e&&typeof e.length=="number"){t&&(e=t);var n=0,r=function(){};return{s:r,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(x){throw x},f:r}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var o=!0,u=!1,f;return{s:function(){t=t.call(e)},n:function(){var x=t.next();return o=x.done,x},e:function(x){u=!0,f=x},f:function(){try{!o&&t.return!=null&&t.return()}finally{if(u)throw f}}}}function q5(e,i){if(!!e){if(typeof e=="string")return Eb(e,i);var t=Object.prototype.toString.call(e).slice(8,-1);if(t==="Object"&&e.constructor&&(t=e.constructor.name),t==="Map"||t==="Set")return Array.from(e);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return Eb(e,i)}}function Eb(e,i){(i==null||i>e.length)&&(i=e.length);for(var t=0,n=new Array(i);t<i;t++)n[t]=e[t];return n}function e4(e){var i=t4();return function(){var n=(0,rr.Z)(e),r;if(i){var o=(0,rr.Z)(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return(0,jn.Z)(this,r)}}function t4(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var Sb=`#define SDF_PX 8.0
#define EDGE_GAMMA 0.105
#define FONT_SIZE 48.0
uniform sampler2D u_sdf_map;
uniform float u_gamma_scale : 0.5;
// uniform float u_font_size : 24.0;
uniform float u_opacity : 1.0;
uniform vec4 u_stroke_color : [0, 0, 0, 1];
uniform float u_stroke_width : 2.0;
uniform float u_halo_blur : 0.5;
uniform float u_DevicePixelRatio;

varying vec4 v_color;
varying vec2 v_uv;
varying float v_gamma_scale;
varying float v_fontScale;

#pragma include "picking"
void main() {
  // get sdf from atlas
  float dist = texture2D(u_sdf_map, v_uv).a;

  lowp float buff = (6.0 - u_stroke_width / v_fontScale) / SDF_PX;
  highp float gamma = (u_halo_blur * 1.19 / SDF_PX + EDGE_GAMMA) / (v_fontScale * u_gamma_scale) / 1.0;

  highp float gamma_scaled = gamma * v_gamma_scale;

  highp float alpha = smoothstep(buff - gamma_scaled, buff + gamma_scaled, dist);
  
  gl_FragColor = mix(vec4(v_color.rgb, v_color.a * u_opacity), vec4(u_stroke_color.rgb, u_stroke_color.a * u_opacity), smoothstep(0., 0.5, 1. - dist));
  gl_FragColor.a= gl_FragColor.a * alpha;
  gl_FragColor = filterColor(gl_FragColor);
}
`,wb=`#define SDF_PX 8.0
#define EDGE_GAMMA 0.105
#define FONT_SIZE 24.0
attribute vec3 a_Position;
attribute vec2 a_tex;
attribute vec2 a_textOffsets;
attribute vec4 a_Color;
attribute float a_Size;

uniform vec2 u_sdf_map_size;
uniform mat4 u_ModelMatrix;
uniform mat4 u_Mvp;

varying vec2 v_uv;
varying float v_gamma_scale;
varying vec4 v_color;
varying float v_fontScale;

uniform float u_opacity : 1;
uniform float u_stroke_width : 2;
uniform vec4 u_stroke_color : [0.0, 0.0, 0.0, 0.0];

#pragma include "projection"
#pragma include "picking"

void main() {
  v_color = a_Color;
  v_uv = a_tex / u_sdf_map_size;

  // \u6587\u672C\u7F29\u653E\u6BD4\u4F8B
  float fontScale = a_Size / FONT_SIZE;
  v_fontScale = fontScale;

  vec4 project_pos = project_position(vec4(a_Position, 1.0));

  vec4 projected_position;
  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x
   projected_position  = u_Mvp * (vec4(a_Position.xyz, 1.0));
  } else { // else
   projected_position  = project_common_position_to_clipspace(vec4(project_pos.xyz, 1.0));
  }

  gl_Position = vec4(
    projected_position.xy / projected_position.w + a_textOffsets * fontScale / u_ViewportSize * 2.0 * u_DevicePixelRatio, 0.0, 1.0);
  v_gamma_scale = gl_Position.w;
  setPickingColor(a_PickingColor);

}
`,Ab=`#define SDF_PX 8.0
#define EDGE_GAMMA 0.105
#define FONT_SIZE 48.0
uniform sampler2D u_sdf_map;
uniform float u_gamma_scale : 0.5;

uniform float u_opacity : 1.0;
uniform vec4 u_stroke_color : [0, 0, 0, 1];
uniform float u_stroke_width : 2.0;
uniform float u_halo_blur : 0.5;
uniform float u_DevicePixelRatio;

varying vec2 v_uv;
varying float v_gamma_scale;
varying float v_fontScale;
uniform vec4 u_color;

void main() {
  // get sdf from atlas
  float dist = texture2D(u_sdf_map, v_uv).a;

  lowp float buff = (6.0 - u_stroke_width / v_fontScale) / SDF_PX;
  highp float gamma = (u_halo_blur * 1.19 / SDF_PX + EDGE_GAMMA) / (v_fontScale * u_gamma_scale) / 1.0;

  highp float gamma_scaled = gamma * v_gamma_scale;

  highp float alpha = smoothstep(buff - gamma_scaled, buff + gamma_scaled, dist);
  
  gl_FragColor = mix(vec4(u_color.rgb, u_color.a * u_opacity), vec4(u_stroke_color.rgb, u_stroke_color.a * u_opacity), smoothstep(0., 0.5, 1. - dist));
  gl_FragColor.a= gl_FragColor.a * alpha;
}
`,Cb=`#define FONT_SIZE 24.0
attribute vec3 a_Position;
attribute vec2 a_tex;
attribute vec2 a_textOffsets;

uniform vec2 u_sdf_map_size;
uniform mat4 u_ModelMatrix;
uniform mat4 u_Mvp;

uniform float u_size;

varying vec2 v_uv;
varying float v_gamma_scale;
varying float v_fontScale;

#pragma include "projection"

void main() {
  v_uv = a_tex / u_sdf_map_size;

  // \u6587\u672C\u7F29\u653E\u6BD4\u4F8B
  float fontScale = u_size / FONT_SIZE;
  v_fontScale = fontScale;

  vec4 project_pos = project_position(vec4(a_Position, 1.0));

  vec4 projected_position;
  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x
   projected_position  = u_Mvp * (vec4(a_Position.xyz, 1.0));
  } else { // else
   projected_position  = project_common_position_to_clipspace(vec4(project_pos.xyz, 1.0));
  }

  gl_Position = vec4(
    projected_position.xy / projected_position.w + a_textOffsets * fontScale / u_ViewportSize * 2.0 * u_DevicePixelRatio, 0.0, 1.0);
  v_gamma_scale = gl_Position.w;

}
`;function Tb(e){var i=this,t=e.id,n=[],r=[];if(!i.glyphInfoMap||!i.glyphInfoMap[t])return{vertices:[],indices:[],size:7};var o=i.glyphInfoMap[t].centroid,u=o.length===2?[o[0],o[1],0]:o;return i.glyphInfoMap[t].glyphQuads.forEach(function(f,g){n.push.apply(n,(0,ie.Z)(u).concat([f.tex.x,f.tex.y+f.tex.height,f.tl.x,f.tl.y],(0,ie.Z)(u),[f.tex.x+f.tex.width,f.tex.y+f.tex.height,f.tr.x,f.tr.y],(0,ie.Z)(u),[f.tex.x+f.tex.width,f.tex.y,f.br.x,f.br.y],(0,ie.Z)(u),[f.tex.x,f.tex.y,f.bl.x,f.bl.y])),r.push(0+g*4,1+g*4,2+g*4,2+g*4,3+g*4,0+g*4)}),{vertices:n,indices:r,size:7}}var r4=function(e){(0,ui.Z)(t,e);var i=e4(t);function t(){var n;(0,Ur.Z)(this,t);for(var r=arguments.length,o=new Array(r),u=0;u<r;u++)o[u]=arguments[u];return n=i.call.apply(i,[this].concat(o)),(0,He.Z)((0,er.Z)(n),"glyphInfoMap",{}),(0,He.Z)((0,er.Z)(n),"currentZoom",-1),(0,He.Z)((0,er.Z)(n),"textureHeight",0),(0,He.Z)((0,er.Z)(n),"textCount",0),(0,He.Z)((0,er.Z)(n),"preTextStyle",{}),(0,He.Z)((0,er.Z)(n),"mapping",function(){n.initGlyph(),n.updateTexture(),n.filterGlyphs(),n.reBuildModel()}),n}return(0,Jr.Z)(t,[{key:"getUninforms",value:function(){var r=this.layer.getLayerConfig(),o=r.opacity,u=o===void 0?1:o,f=r.stroke,g=f===void 0?"#fff":f,x=r.strokeWidth,I=x===void 0?0:x,P=r.textAnchor,G=P===void 0?"center":P,$=r.textAllowOverlap,Ee=$===void 0?!1:$,Se=r.halo,Re=Se===void 0?.5:Se,Ye=r.gamma,St=Ye===void 0?2:Ye,vt=r.usage,Ut=r.color,Kt=Ut===void 0?"#fff":Ut,Tr=r.size,on=Tr===void 0?1:Tr,dn=this.fontService,vn=dn.canvas,si=dn.mapping;return Object.keys(si).length!==this.textCount&&(this.updateTexture(),this.textCount=Object.keys(si).length),this.preTextStyle={textAnchor:G,textAllowOverlap:Ee},{u_opacity:(0,Wr.isNumber)(u)?u:1,u_stroke_width:(0,Wr.isNumber)(I)?I:1,u_stroke_color:this.getStrokeColor(g),u_sdf_map:this.texture,u_halo_blur:Re,u_gamma_scale:St,u_sdf_map_size:[vn.width,vn.height],u_color:vt==="basemap"?co(Kt):[0,0,0,0],u_size:vt==="basemap"?on:1}}},{key:"initModels",value:function(){var n=(0,An.Z)(Nt().mark(function o(){var u,f,g,x,I;return Nt().wrap(function(G){for(;;)switch(G.prev=G.next){case 0:return this.extent=this.textExtent(),u=this.layer.getLayerConfig(),f=u.textAnchor,g=f===void 0?"center":f,x=u.textAllowOverlap,I=x===void 0?!0:x,this.preTextStyle={textAnchor:g,textAllowOverlap:I},G.next=5,this.buildModels();case 5:return G.abrupt("return",G.sent);case 6:case"end":return G.stop()}},o,this)}));function r(){return n.apply(this,arguments)}return r}()},{key:"buildModels",value:function(){var n=(0,An.Z)(Nt().mark(function o(){var u,f,g;return Nt().wrap(function(I){for(;;)switch(I.prev=I.next){case 0:return this.mapping(),u=this.layer.getLayerConfig(),f=u.usage,I.next=4,this.layer.buildLayerModel({moduleName:"pointTileText_"+f,vertexShader:f==="basemap"?Cb:wb,fragmentShader:f==="basemap"?Ab:Sb,triangulation:Tb.bind(this),depth:{enable:!1},blend:this.getBlend(),pick:f!=="basemap"});case 4:return g=I.sent,I.abrupt("return",[g]);case 6:case"end":return I.stop()}},o,this)}));function r(){return n.apply(this,arguments)}return r}()},{key:"clearModels",value:function(){var r;(r=this.texture)===null||r===void 0||r.destroy()}},{key:"registerBuiltinAttributes",value:function(){var r=this.layer.getLayerConfig(),o=r.usage;this.styleAttributeService.registerStyleAttribute({name:"textOffsets",type:ja.Attribute,descriptor:{name:"a_textOffsets",buffer:{usage:$e.STATIC_DRAW,data:[],type:$e.FLOAT},size:2,update:function(f,g,x){return[x[5],x[6]]}}}),o!=="basemap"&&this.styleAttributeService.registerStyleAttribute({name:"size",type:ja.Attribute,descriptor:{name:"a_Size",buffer:{usage:$e.DYNAMIC_DRAW,data:[],type:$e.FLOAT},size:1,update:function(f){var g=f.size,x=g===void 0?12:g;return Array.isArray(x)?[x[0]]:[x]}}}),this.styleAttributeService.registerStyleAttribute({name:"textUv",type:ja.Attribute,descriptor:{name:"a_tex",buffer:{usage:$e.DYNAMIC_DRAW,data:[],type:$e.FLOAT},size:2,update:function(f,g,x){return[x[3],x[4]]}}})}},{key:"textExtent",value:function(){var r=this.mapService.getBounds();return cl(r,.5)}},{key:"initTextFont",value:function(){var r=this.layer.getLayerConfig(),o=r.fontWeight,u=o===void 0?"400":o,f=r.fontFamily,g=f===void 0?"sans-serif":f,x=this.layer.getEncodedData(),I=[];x.forEach(function(P){var G=P.shape,$=G===void 0?"":G;$=$.toString();var Ee=J5($),Se;try{for(Ee.s();!(Se=Ee.n()).done;){var Re=Se.value;I.indexOf(Re)===-1&&I.push(Re)}}catch(Ye){Ee.e(Ye)}finally{Ee.f()}}),this.fontService.setFontOptions({characterSet:I,fontWeight:u,fontFamily:g,iconfont:!1})}},{key:"generateGlyphLayout",value:function(){var r=this,o=this.fontService.mapping,u=this.layer.getLayerConfig(),f=u.spacing,g=f===void 0?2:f,x=u.textAnchor,I=x===void 0?"center":x,P=this.layer.getEncodedData();this.glyphInfo=P.map(function(G){var $=G.shape,Ee=$===void 0?"":$,Se=G.id,Re=G.size,Ye=Re===void 0?1:Re,St=G.textOffset,vt=St===void 0?[0,0]:St,Ut=vb(Ee.toString(),o,Ye,I,"left",g,vt,!1),Kt=mb(Ut,vt,!1);return G.shaping=Ut,G.glyphQuads=Kt,G.centroid=d(G.coordinates),G.originCentroid=G.version==="GAODE2.x"?d(G.originCoordinates):G.originCentroid=G.centroid,r.glyphInfoMap[Se]={shaping:Ut,glyphQuads:Kt,centroid:d(G.coordinates)},G})}},{key:"filterGlyphs",value:function(){var r=this,o=this.layer.getLayerConfig(),u=o.padding,f=u===void 0?[4,4]:u,g=o.textAllowOverlap,x=g===void 0?!1:g;if(!x){this.glyphInfoMap={},this.currentZoom=this.mapService.getZoom(),this.extent=this.textExtent();var I=this.rendererService.getViewportSize(),P=I.width,G=I.height,$=new lb(P,G),Ee=this.glyphInfo.filter(function(Se){var Re=Se.shaping,Ye=Se.id,St=Ye===void 0?0:Ye,vt=Se.version==="GAODE2.x"?Se.originCentroid:Se.centroid,Ut=Se.size,Kt=Ut/24,Tr=r.mapService.lngLatToContainer(vt),on=$.placeCollisionBox({x1:Re.left*Kt-f[0],x2:Re.right*Kt+f[0],y1:Re.top*Kt-f[1],y2:Re.bottom*Kt+f[1],anchorPointX:Tr.x,anchorPointY:Tr.y}),dn=on.box;return dn&&dn.length?($.insertCollisionBox(dn,St),!0):!1});Ee.forEach(function(Se){r.glyphInfoMap[Se.id]=Se})}}},{key:"initGlyph",value:function(){this.initTextFont(),this.generateGlyphLayout()}},{key:"updateTexture",value:function(){var r=this.rendererService.createTexture2D,o=this.fontService.canvas;this.textureHeight=o.height,this.texture&&this.texture.destroy(),this.texture=r({data:o,mag:$e.LINEAR,min:$e.LINEAR,width:o.width,height:o.height})}},{key:"reBuildModel",value:function(){var n=(0,An.Z)(Nt().mark(function o(){var u,f,g;return Nt().wrap(function(I){for(;;)switch(I.prev=I.next){case 0:return u=this.layer.getLayerConfig(),f=u.usage,this.filterGlyphs(),I.next=4,this.layer.buildLayerModel({moduleName:"pointTileText_"+f,vertexShader:f==="basemap"?Cb:wb,fragmentShader:f==="basemap"?Ab:Sb,triangulation:Tb.bind(this),depth:{enable:!1},blend:this.getBlend(),pick:f!=="basemap"});case 4:return g=I.sent,I.abrupt("return",[g]);case 6:case"end":return I.stop()}},o,this)}));function r(){return n.apply(this,arguments)}return r}()}]),t}(Sl);function n4(e){var i=i4();return function(){var n=(0,rr.Z)(e),r;if(i){var o=(0,rr.Z)(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return(0,jn.Z)(this,r)}}function i4(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var a4=`uniform float u_additive;

uniform float u_opacity : 1;
uniform float u_stroke_opacity : 1;
uniform float u_stroke_width : 2;
uniform vec4 u_stroke_color : [0.0, 0.0, 0.0, 0.0];

varying vec4 v_data;
varying vec4 v_color;
varying float v_radius;

#pragma include "sdf_2d"
#pragma include "picking"

void main() {
  int shape = int(floor(v_data.w + 0.5));


  lowp float antialiasblur = v_data.z;
  float r = v_radius / (v_radius + u_stroke_width);

  float outer_df;
  float inner_df;
  // 'circle', 'triangle', 'square', 'pentagon', 'hexagon', 'octogon', 'hexagram', 'rhombus', 'vesica'
  if (shape == 0) {
    outer_df = sdCircle(v_data.xy, 1.0);
    inner_df = sdCircle(v_data.xy, r);
  } else if (shape == 1) {
    outer_df = sdEquilateralTriangle(1.1 * v_data.xy);
    inner_df = sdEquilateralTriangle(1.1 / r * v_data.xy);
  } else if (shape == 2) {
    outer_df = sdBox(v_data.xy, vec2(1.));
    inner_df = sdBox(v_data.xy, vec2(r));
  } else if (shape == 3) {
    outer_df = sdPentagon(v_data.xy, 0.8);
    inner_df = sdPentagon(v_data.xy, r * 0.8);
  } else if (shape == 4) {
    outer_df = sdHexagon(v_data.xy, 0.8);
    inner_df = sdHexagon(v_data.xy, r * 0.8);
  } else if (shape == 5) {
    outer_df = sdOctogon(v_data.xy, 1.0);
    inner_df = sdOctogon(v_data.xy, r);
  } else if (shape == 6) {
    outer_df = sdHexagram(v_data.xy, 0.52);
    inner_df = sdHexagram(v_data.xy, r * 0.52);
  } else if (shape == 7) {
    outer_df = sdRhombus(v_data.xy, vec2(1.0));
    inner_df = sdRhombus(v_data.xy, vec2(r));
  } else if (shape == 8) {
    outer_df = sdVesica(v_data.xy, 1.1, 0.8);
    inner_df = sdVesica(v_data.xy, r * 1.1, r * 0.8);
  }


  float opacity_t = smoothstep(0.0, antialiasblur, outer_df);

  float color_t = u_stroke_width < 0.01 ? 0.0 : smoothstep(
    antialiasblur,
    0.0,
    inner_df
  );

  if(u_stroke_width < 0.01) {
    gl_FragColor = vec4(v_color.rgb, v_color.a * u_opacity);
  } else {
    gl_FragColor = mix(vec4(v_color.rgb, v_color.a * u_opacity), u_stroke_color * u_stroke_opacity, color_t);
  }

  if(u_additive > 0.0) {
    gl_FragColor *= opacity_t;
    gl_FragColor = filterColorAlpha(gl_FragColor, gl_FragColor.a);
  } else {
    gl_FragColor.a *= opacity_t;
    gl_FragColor = filterColor(gl_FragColor);
  }
}
`,o4=`attribute vec4 a_Color;
attribute vec3 a_Position;
attribute vec3 a_Extrude;
attribute float a_Size;
attribute float a_Shape;

uniform mat4 u_ModelMatrix;
uniform mat4 u_Mvp;

// uniform vec2 u_tileOrigin;
// uniform float u_coord;

varying vec4 v_data;
varying vec4 v_color;
varying float v_radius;

uniform float u_opacity : 1;
uniform float u_stroke_opacity : 1;
uniform float u_stroke_width : 2;
uniform vec4 u_stroke_color : [0.0, 0.0, 0.0, 0.0];

#pragma include "projection"
#pragma include "picking"

void main() {
  vec3 extrude = a_Extrude;
  float shape_type = a_Shape;
  float newSize = setPickingSize(a_Size);

  // cal style mapping

  v_color = a_Color;
  v_radius = newSize;

  // anti-alias
  //  float antialiased_blur = -max(u_blur, antialiasblur);
  float antialiasblur = -max(2.0 / u_DevicePixelRatio / a_Size, 0.0);

  vec2 offset = (extrude.xy * (newSize + u_stroke_width));
  offset = project_pixel(offset);

  v_data = vec4(extrude.x, extrude.y, antialiasblur,shape_type);

  vec4 project_pos = project_position(vec4(a_Position.xy, 0.0, 1.0));

  if(u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT || u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {
    float mapboxZoomScale = 4.0/pow(2.0, 21.0 - u_Zoom);
  }

// if(u_coord > 0.0) {
  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x
    gl_Position = u_Mvp * vec4(project_pos.xy + offset, 0.0, 1.0);
  } else {
    gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy + offset, 0.0, 1.0));
  }
// } else {

  // vec2 pointPos = a_Position.xy;
  // vec4 world = vec4(project_mvt_offset_position(vec4(u_tileOrigin, 0.0, 1.0)).xyz, 1.0); // \u74E6\u7247\u8D77\u59CB\u70B9\u7684\u4E16\u754C\u5750\u6807

  // vec2 pointOffset =  pointPos *  pow(2.0, u_Zoom); // \u74E6\u7247\u5185\u7684\u70B9\u7684\u504F\u79FB\u5750\u6807
  
  // world.xy += offset;
  // world.xy += pointOffset;

  // if (u_CoordinateSystem == COORDINATE_SYSTEM_METER_OFFSET || u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {
  //   // Needs to be divided with project_uCommonUnitsPerMeter
  //   world.w *= u_PixelsPerMeter.z;
  // }

  // gl_Position = u_ViewProjectionMatrix * world + u_ViewportCenterProjection;
// }

 
  setPickingColor(a_PickingColor);


}
`,s4=function(e){(0,ui.Z)(t,e);var i=n4(t);function t(){return(0,Ur.Z)(this,t),i.apply(this,arguments)}return(0,Jr.Z)(t,[{key:"getUninforms",value:function(){var r=this.layer.getLayerConfig(),o=r.opacity,u=o===void 0?1:o,f=r.strokeOpacity,g=f===void 0?1:f,x=r.strokeWidth,I=x===void 0?0:x,P=r.stroke,G=P===void 0?"rgba(0,0,0,0)":P,$=r.blend;return{u_additive:$==="additive"?1:0,u_opacity:Number(u),u_stroke_opacity:Number(g),u_stroke_width:Number(I),u_stroke_color:this.getStrokeColor(G)}}},{key:"getAttribute",value:function(){return this.styleAttributeService.createAttributesAndIndices(this.layer.getEncodedData(),gv)}},{key:"initModels",value:function(){var n=(0,An.Z)(Nt().mark(function o(){return Nt().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return f.next=2,this.buildModels();case 2:return f.abrupt("return",f.sent);case 3:case"end":return f.stop()}},o,this)}));function r(){return n.apply(this,arguments)}return r}()},{key:"buildModels",value:function(){var n=(0,An.Z)(Nt().mark(function o(){var u,f,g,x,I;return Nt().wrap(function(G){for(;;)switch(G.prev=G.next){case 0:return u=this.layer.getLayerConfig(),f=u.workerEnabled,g=f===void 0?!1:f,x=u.usage,this.layer.triangulation=gv,G.next=4,this.layer.buildLayerModel({moduleName:"pointTile_"+x,vertexShader:o4,fragmentShader:a4,triangulation:gv,depth:{enable:!1},cull:{enable:!0,face:is(this.mapService.version)},blend:this.getBlend(),workerEnabled:g,workerOptions:{modelType:"pointTile"},pick:x!=="basemap"});case 4:return I=G.sent,G.abrupt("return",[I]);case 6:case"end":return G.stop()}},o,this)}));function r(){return n.apply(this,arguments)}return r}()},{key:"clearModels",value:function(){}},{key:"registerBuiltinAttributes",value:function(){var r=this;this.styleAttributeService.registerStyleAttribute({name:"extrude",type:ja.Attribute,descriptor:{name:"a_Extrude",buffer:{usage:$e.DYNAMIC_DRAW,data:[],type:$e.FLOAT},size:3,update:function(u,f,g,x){var I=[1,1,0,-1,1,0,-1,-1,0,1,-1,0],P=x%4*3;return[I[P],I[P+1],I[P+2]]}}}),this.styleAttributeService.registerStyleAttribute({name:"size",type:ja.Attribute,descriptor:{name:"a_Size",buffer:{usage:$e.DYNAMIC_DRAW,data:[],type:$e.FLOAT},size:1,update:function(u){var f=u.size,g=f===void 0?5:f;return Array.isArray(g)?[g[0]]:[g]}}}),this.styleAttributeService.registerStyleAttribute({name:"shape",type:ja.Attribute,descriptor:{name:"a_Shape",buffer:{usage:$e.DYNAMIC_DRAW,data:[],type:$e.FLOAT},size:1,update:function(u){var f=u.shape,g=f===void 0?2:f,x=r.layer.getLayerConfig().shape2d,I=x.indexOf(g);return[I]}}})}}]),t}(Sl),u4={fillImage:E5,fill:nb,radar:D5,image:ib,normal:ob,simplePoint:U5,extrude:tb,text:bb,tile:s4,tileText:r4,earthFill:c5,earthExtrude:a5},l4=u4;function c4(e,i){var t=typeof Symbol!="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(!t){if(Array.isArray(e)||(t=f4(e))||i&&e&&typeof e.length=="number"){t&&(e=t);var n=0,r=function(){};return{s:r,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(x){throw x},f:r}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var o=!0,u=!1,f;return{s:function(){t=t.call(e)},n:function(){var x=t.next();return o=x.done,x},e:function(x){u=!0,f=x},f:function(){try{!o&&t.return!=null&&t.return()}finally{if(u)throw f}}}}function f4(e,i){if(!!e){if(typeof e=="string")return Mb(e,i);var t=Object.prototype.toString.call(e).slice(8,-1);if(t==="Object"&&e.constructor&&(t=e.constructor.name),t==="Map"||t==="Set")return Array.from(e);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return Mb(e,i)}}function Mb(e,i){(i==null||i>e.length)&&(i=e.length);for(var t=0,n=new Array(i);t<i;t++)n[t]=e[t];return n}function p4(e){var i=h4();return function(){var n=(0,rr.Z)(e),r;if(i){var o=(0,rr.Z)(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return(0,jn.Z)(this,r)}}function h4(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var Mm=function(e){(0,ui.Z)(t,e);var i=p4(t);function t(){var n;(0,Ur.Z)(this,t);for(var r=arguments.length,o=new Array(r),u=0;u<r;u++)o[u]=arguments[u];return n=i.call.apply(i,[this].concat(o)),(0,He.Z)((0,er.Z)(n),"type","PointLayer"),(0,He.Z)((0,er.Z)(n),"defaultSourceConfig",{data:[],options:{parser:{type:"json",x:"lng",y:"lat"}}}),n}return(0,Jr.Z)(t,[{key:"buildModels",value:function(){var n=(0,An.Z)(Nt().mark(function o(){var u;return Nt().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return u=this.getModelType(),this.layerModel=new l4[u](this),g.next=4,this.initLayerModels();case 4:case"end":return g.stop()}},o,this)}));function r(){return n.apply(this,arguments)}return r}()},{key:"rebuildModels",value:function(){var n=(0,An.Z)(Nt().mark(function o(){return Nt().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return f.next=2,this.buildModels();case 2:case"end":return f.stop()}},o,this)}));function r(){return n.apply(this,arguments)}return r}()},{key:"getModelTypeWillEmptyData",value:function(){if(this.shapeOption){var r=this.shapeOption,o=r.field,u=r.values,f=this.getLayerConfig(),g=f.shape2d,x=this.iconService.getIconMap();if(o&&(g==null?void 0:g.indexOf(o))!==-1)return"fill";if(u==="text")return"text";if(u&&u instanceof Array){var I=c4(u),P;try{for(I.s();!(P=I.n()).done;){var G=P.value;if(typeof G=="string"&&x.hasOwnProperty(G))return"image"}}catch($){I.e($)}finally{I.f()}}}return"normal"}},{key:"getDefaultConfig",value:function(){var r=this.getModelType(),o={fillImage:{},normal:{blend:"additive"},radar:{},simplePoint:{},fill:{blend:"normal"},extrude:{},image:{},text:{blend:"normal"},tile:{},tileText:{},earthFill:{},earthExtrude:{}};return o[r]}},{key:"getModelType",value:function(){var r=this.getEncodedData(),o=this.getLayerConfig(),u=o.shape2d,f=o.shape3d,g=this.iconService.getIconMap(),x=r.find(function(P){return P.hasOwnProperty("shape")});if(x){var I=x.shape;return I==="dot"?"normal":I==="simple"?"simplePoint":I==="radar"?"radar":this.layerType==="fillImage"?"fillImage":(u==null?void 0:u.indexOf(I))!==-1?this.mapService.version==="GLOBEL"?"earthFill":"fill":(f==null?void 0:f.indexOf(I))!==-1?this.mapService.version==="GLOBEL"?"earthExtrude":"extrude":g.hasOwnProperty(I)?"image":"text"}else return this.getModelTypeWillEmptyData()}}]),t}($v);function d4(e){var i=v4();return function(){var n=(0,rr.Z)(e),r;if(i){var o=(0,rr.Z)(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return(0,jn.Z)(this,r)}}function v4(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var m4=`uniform float u_opacity: 1.0;
uniform vec4 u_sourceColor;
uniform vec4 u_targetColor;
uniform float u_linearColor: 0;

uniform float u_topsurface: 1.0;
uniform float u_sidesurface: 1.0;

varying vec4 v_Color;
varying mat4 styleMappingMat; // \u4F20\u9012\u4ECE\u7247\u5143\u4E2D\u4F20\u9012\u7684\u6620\u5C04\u6570\u636E
#pragma include "picking"

void main() {
  float opacity = styleMappingMat[0][0];  
  float isSide = styleMappingMat[0][3];
  float sidey = styleMappingMat[3][0];
  float lightWeight = styleMappingMat[3][1];

  // Tip: \u90E8\u5206\u673A\u578B GPU \u8BA1\u7B97\u7CBE\u5EA6\u517C\u5BB9
  if(isSide < 0.999) {
    // side face
    if(u_sidesurface < 1.0) {
      discard;
    }

    if(u_linearColor == 1.0) {
      vec4 linearColor = mix(u_targetColor, u_sourceColor, sidey);
      linearColor.rgb *= lightWeight;
      gl_FragColor = linearColor;
    } else {
      gl_FragColor = v_Color;
    }

  } else {
     // top face
    if(u_topsurface < 1.0) {
      discard;
    }

    gl_FragColor = v_Color;
  }

  gl_FragColor.a *= opacity;
  gl_FragColor = filterColor(gl_FragColor);
}
`,g4=`precision highp float;

#define ambientRatio 0.5
#define diffuseRatio 0.3
#define specularRatio 0.2

attribute vec4 a_Color;
attribute vec3 a_Position;
attribute vec3 a_Normal;
attribute float a_Size;
attribute vec3 a_uvs;
uniform mat4 u_ModelMatrix;
uniform mat4 u_Mvp;

varying vec4 v_Color;
uniform float u_heightfixed: 0.0; // \u9ED8\u8BA4\u4E0D\u56FA\u5B9A
uniform float u_raisingHeight: 0.0;
uniform float u_opacity: 1.0;
varying mat4 styleMappingMat; // \u7528\u4E8E\u5C06\u5728\u9876\u70B9\u7740\u8272\u5668\u4E2D\u8BA1\u7B97\u597D\u7684\u6837\u5F0F\u503C\u4F20\u9012\u7ED9\u7247\u5143

#pragma include "styleMapping"
#pragma include "styleMappingCalOpacity"

#pragma include "projection"
#pragma include "light"
#pragma include "picking"

void main() {
  // cal style mapping - \u6570\u636E\u7EB9\u7406\u6620\u5C04\u90E8\u5206\u7684\u8BA1\u7B97
  styleMappingMat = mat4(
    0.0, 0.0, 0.0, 0.0, // opacity - strokeOpacity - strokeWidth - isSide
    0.0, 0.0, 0.0, 0.0, // strokeR - strokeG - strokeB - strokeA
    0.0, 0.0, 0.0, 0.0, // offsets[0] - offsets[1]
    0.0, 0.0, 0.0, 0.0  // sidey
  );
  styleMappingMat[0][3] = a_Position.z;
  styleMappingMat[3][0] = a_uvs[2];

  float rowCount = u_cellTypeLayout[0][0];    // \u5F53\u524D\u7684\u6570\u636E\u7EB9\u7406\u6709\u51E0\u884C
  float columnCount = u_cellTypeLayout[0][1]; // \u5F53\u770B\u5230\u6570\u636E\u7EB9\u7406\u6709\u51E0\u5217
  float columnWidth = 1.0/columnCount;  // \u5217\u5BBD
  float rowHeight = 1.0/rowCount;       // \u884C\u9AD8
  float cellCount = calCellCount(); // opacity - strokeOpacity - strokeWidth - stroke - offsets
  float id = a_vertexId; // \u7B2Cn\u4E2A\u9876\u70B9
  float cellCurrentRow = floor(id * cellCount / columnCount) + 1.0; // \u8D77\u59CB\u70B9\u5728\u7B2C\u51E0\u884C
  float cellCurrentColumn = mod(id * cellCount, columnCount) + 1.0; // \u8D77\u59CB\u70B9\u5728\u7B2C\u51E0\u5217
  
  // cell \u56FA\u5B9A\u987A\u5E8F opacity -> strokeOpacity -> strokeWidth -> stroke ... 
  // \u6309\u987A\u5E8F\u4ECE cell \u4E2D\u53D6\u503C\u3001\u82E5\u6CA1\u6709\u5219\u81EA\u52A8\u5F80\u4E0B\u53D6\u503C
  float textureOffset = 0.0; // \u5728 cell \u4E2D\u53D6\u503C\u7684\u504F\u79FB\u91CF

  vec2 opacityAndOffset = calOpacityAndOffset(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset, columnWidth, rowHeight);
  styleMappingMat[0][0] = opacityAndOffset.r;
  textureOffset = opacityAndOffset.g;
  // cal style mapping - \u6570\u636E\u7EB9\u7406\u6620\u5C04\u90E8\u5206\u7684\u8BA1\u7B97

  vec4 pos = vec4(a_Position.xy, a_Position.z * a_Size, 1.0);
  vec4 project_pos = project_position(pos);

  if(u_heightfixed > 0.0) { // \u5224\u65AD\u51E0\u4F55\u4F53\u662F\u5426\u56FA\u5B9A\u9AD8\u5EA6
    project_pos.z = a_Position.z * a_Size;
    project_pos.z += u_raisingHeight;

    if(u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT || u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {
      float mapboxZoomScale = 4.0/pow(2.0, 21.0 - u_Zoom);
      project_pos.z *= mapboxZoomScale;
      project_pos.z += u_raisingHeight * mapboxZoomScale;
    }
  }

  // project_pos.z += 500000.0; // amap1

  // project_pos.z += (500000.0 * 4.0)/pow(2.0, 21.0 - u_Zoom); // mapbox
  // gl_Position = project_common_position_to_clipspace(vec4(project_pos.xyz, 1.0));

  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x
    // gl_Position = u_Mvp * (vec4(project_pos.xyz * vec3(1.0, 1.0, -1.0), 1.0));
    gl_Position = u_Mvp * (vec4(project_pos.xyz, 1.0));
  } else {
    gl_Position = project_common_position_to_clipspace(vec4(project_pos.xyz, 1.0));
  }

  float lightWeight = calc_lighting(pos);
  // v_Color = a_Color;
  v_Color = vec4(a_Color.rgb * lightWeight, a_Color.w);

  styleMappingMat[3][1] = lightWeight;

  setPickingColor(a_PickingColor);
}
`,y4=`uniform sampler2D u_texture;
uniform float u_opacity: 1.0;
uniform vec4 u_sourceColor;
uniform vec4 u_targetColor;
uniform float u_linearColor: 0;

uniform float u_topsurface: 1.0;
uniform float u_sidesurface: 1.0;

varying vec4 v_Color;
varying mat4 styleMappingMat; // \u4F20\u9012\u4ECE\u7247\u5143\u4E2D\u4F20\u9012\u7684\u6620\u5C04\u6570\u636E
#pragma include "picking"

void main() {
  float opacity = styleMappingMat[0][0];
  float isSide = styleMappingMat[0][3];
  float lightWeight = styleMappingMat[3][1];
  float topU = styleMappingMat[2][2];
  float topV = styleMappingMat[2][3];

  float sidey = styleMappingMat[3][0];
  // Tip: \u90E8\u5206\u673A\u578B GPU \u8BA1\u7B97\u7CBE\u5EA6\u517C\u5BB9
  if(isSide < 0.999) {
    // side face
    if(u_sidesurface < 1.0) {
      discard;
    }

    if(u_linearColor == 1.0) {
      vec4 linearColor = mix(u_targetColor, u_sourceColor, sidey);
      linearColor.rgb *= lightWeight;
      gl_FragColor = linearColor;
    } else {
      gl_FragColor = v_Color;
    }
  } else {

     // top face
    if(u_topsurface < 1.0) {
      discard;
    }

    gl_FragColor = texture2D(u_texture, vec2(topU, topV));
  }
  

  gl_FragColor.a *= opacity;
  gl_FragColor = filterColor(gl_FragColor);
}
`,_4=`precision highp float;

#define ambientRatio 0.5
#define diffuseRatio 0.3
#define specularRatio 0.2

attribute vec4 a_Color;
attribute vec3 a_Position;
attribute vec3 a_Normal;
attribute float a_Size;
attribute vec3 a_uvs;
uniform mat4 u_ModelMatrix;
uniform mat4 u_Mvp;

varying vec4 v_Color;
uniform float u_heightfixed: 0.0; // \u9ED8\u8BA4\u4E0D\u56FA\u5B9A
uniform float u_raisingHeight: 0.0;
uniform float u_opacity: 1.0;
varying mat4 styleMappingMat; // \u7528\u4E8E\u5C06\u5728\u9876\u70B9\u7740\u8272\u5668\u4E2D\u8BA1\u7B97\u597D\u7684\u6837\u5F0F\u503C\u4F20\u9012\u7ED9\u7247\u5143

#pragma include "styleMapping"
#pragma include "styleMappingCalOpacity"

#pragma include "projection"
#pragma include "light"
#pragma include "picking"

void main() {
  v_Color = a_Color;

  // cal style mapping - \u6570\u636E\u7EB9\u7406\u6620\u5C04\u90E8\u5206\u7684\u8BA1\u7B97
  styleMappingMat = mat4(
    0.0, 0.0, 0.0, 0.0, // opacity - strokeOpacity - strokeWidth - a_Position.z(judge side by a_Position.z)
    0.0, 0.0, 0.0, 0.0, // strokeR - strokeG - strokeB - strokeA
    0.0, 0.0, 0.0, 0.0, // offsets[0] - offsets[1] - u - v
    0.0, 0.0, 0.0, 0.0  // sidey
  );
  
  styleMappingMat[0][3] = a_Position.z;
  styleMappingMat[2][2] = a_uvs[0];
  styleMappingMat[2][3] = 1.0 - a_uvs[1];
  styleMappingMat[3][0] = a_uvs[2];


  float rowCount = u_cellTypeLayout[0][0];    // \u5F53\u524D\u7684\u6570\u636E\u7EB9\u7406\u6709\u51E0\u884C
  float columnCount = u_cellTypeLayout[0][1]; // \u5F53\u770B\u5230\u6570\u636E\u7EB9\u7406\u6709\u51E0\u5217
  float columnWidth = 1.0/columnCount;  // \u5217\u5BBD
  float rowHeight = 1.0/rowCount;       // \u884C\u9AD8
  float cellCount = calCellCount(); // opacity - strokeOpacity - strokeWidth - stroke - offsets
  float id = a_vertexId; // \u7B2Cn\u4E2A\u9876\u70B9
  float cellCurrentRow = floor(id * cellCount / columnCount) + 1.0; // \u8D77\u59CB\u70B9\u5728\u7B2C\u51E0\u884C
  float cellCurrentColumn = mod(id * cellCount, columnCount) + 1.0; // \u8D77\u59CB\u70B9\u5728\u7B2C\u51E0\u5217
  
  // cell \u56FA\u5B9A\u987A\u5E8F opacity -> strokeOpacity -> strokeWidth -> stroke ... 
  // \u6309\u987A\u5E8F\u4ECE cell \u4E2D\u53D6\u503C\u3001\u82E5\u6CA1\u6709\u5219\u81EA\u52A8\u5F80\u4E0B\u53D6\u503C
  float textureOffset = 0.0; // \u5728 cell \u4E2D\u53D6\u503C\u7684\u504F\u79FB\u91CF

  vec2 opacityAndOffset = calOpacityAndOffset(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset, columnWidth, rowHeight);
  styleMappingMat[0][0] = opacityAndOffset.r;
  textureOffset = opacityAndOffset.g;
  // cal style mapping - \u6570\u636E\u7EB9\u7406\u6620\u5C04\u90E8\u5206\u7684\u8BA1\u7B97

  vec4 pos = vec4(a_Position.xy, a_Position.z * a_Size, 1.0);
  vec4 project_pos = project_position(pos);

  if(u_heightfixed > 0.0) { // \u5224\u65AD\u51E0\u4F55\u4F53\u662F\u5426\u56FA\u5B9A\u9AD8\u5EA6
    project_pos.z = a_Position.z * a_Size;
    project_pos.z += u_raisingHeight;

    if(u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT || u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {
      float mapboxZoomScale = 4.0/pow(2.0, 21.0 - u_Zoom);
      project_pos.z *= mapboxZoomScale;
      project_pos.z += u_raisingHeight * mapboxZoomScale;
    }
  }

  // project_pos.z += 500000.0; // amap1

  // project_pos.z += (500000.0 * 4.0)/pow(2.0, 21.0 - u_Zoom); // mapbox
  // gl_Position = project_common_position_to_clipspace(vec4(project_pos.xyz, 1.0));

  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x
    // gl_Position = u_Mvp * (vec4(project_pos.xyz * vec3(1.0, 1.0, -1.0), 1.0));
    gl_Position = u_Mvp * (vec4(project_pos.xyz, 1.0));
  } else {
    gl_Position = project_common_position_to_clipspace(vec4(project_pos.xyz, 1.0));
  }

  float lightWeight = calc_lighting(pos);
  styleMappingMat[3][1] = lightWeight;

  setPickingColor(a_PickingColor);
}
`,x4=`uniform float u_opacity: 1.0;
uniform vec4 u_sourceColor;
uniform vec4 u_targetColor;
uniform float u_linearColor: 0;

uniform float u_topsurface: 1.0;
uniform float u_sidesurface: 1.0;

varying vec4 v_Color;
varying mat4 styleMappingMat; // \u4F20\u9012\u4ECE\u7247\u5143\u4E2D\u4F20\u9012\u7684\u6620\u5C04\u6570\u636E
#pragma include "picking"

void main() {
  float opacity = styleMappingMat[0][0];
  float isSide = styleMappingMat[0][3];
  float sidey = styleMappingMat[3][0];
  float lightWeight = styleMappingMat[3][1];

  // Tip: \u90E8\u5206\u673A\u578B GPU \u8BA1\u7B97\u7CBE\u5EA6\u517C\u5BB9
  if(isSide < 0.999) {
    // side face
    if(u_sidesurface < 1.0) {
      discard;
    }
    
    if( u_linearColor == 1.0) {
      // side use linear
      vec4 linearColor = mix(u_targetColor, u_sourceColor, sidey);
      linearColor.rgb *= lightWeight;
      gl_FragColor = linearColor;
    } else {
      // side notuse linear
       gl_FragColor = v_Color;
    }
  } else {
    // top face
    if(u_topsurface < 1.0) {
      discard;
    }
    gl_FragColor = v_Color;
  }

  gl_FragColor.a *= opacity;
  gl_FragColor = filterColorAlpha(gl_FragColor, lightWeight);
}
`,b4=`precision highp float;

#define ambientRatio 0.5
#define diffuseRatio 0.3
#define specularRatio 0.2

attribute vec4 a_Color;
attribute vec3 a_Position;
attribute vec3 a_Normal;
attribute float a_Size;
attribute vec3 a_uvs;
uniform mat4 u_ModelMatrix;
uniform mat4 u_Mvp;

varying vec4 v_Color;
uniform float u_heightfixed: 0.0; // \u9ED8\u8BA4\u4E0D\u56FA\u5B9A
uniform float u_raisingHeight: 0.0;
uniform float u_opacity: 1.0;
varying mat4 styleMappingMat; // \u7528\u4E8E\u5C06\u5728\u9876\u70B9\u7740\u8272\u5668\u4E2D\u8BA1\u7B97\u597D\u7684\u6837\u5F0F\u503C\u4F20\u9012\u7ED9\u7247\u5143

#pragma include "styleMapping"
#pragma include "styleMappingCalOpacity"

#pragma include "projection"
#pragma include "light"
#pragma include "picking"

void main() {
  // cal style mapping - \u6570\u636E\u7EB9\u7406\u6620\u5C04\u90E8\u5206\u7684\u8BA1\u7B97
  styleMappingMat = mat4(
    0.0, 0.0, 0.0, 0.0, // opacity - strokeOpacity - strokeWidth - isSide
    0.0, 0.0, 0.0, 0.0, // strokeR - strokeG - strokeB - strokeA
    0.0, 0.0, 0.0, 0.0, // offsets[0] - offsets[1]
    0.0, 0.0, 0.0, 0.0  // sidey
  );
  styleMappingMat[0][3] = a_Position.z;
  styleMappingMat[3][0] = a_uvs[2];

  float rowCount = u_cellTypeLayout[0][0];    // \u5F53\u524D\u7684\u6570\u636E\u7EB9\u7406\u6709\u51E0\u884C
  float columnCount = u_cellTypeLayout[0][1]; // \u5F53\u770B\u5230\u6570\u636E\u7EB9\u7406\u6709\u51E0\u5217
  float columnWidth = 1.0/columnCount;  // \u5217\u5BBD
  float rowHeight = 1.0/rowCount;       // \u884C\u9AD8
  float cellCount = calCellCount(); // opacity - strokeOpacity - strokeWidth - stroke - offsets
  float id = a_vertexId; // \u7B2Cn\u4E2A\u9876\u70B9
  float cellCurrentRow = floor(id * cellCount / columnCount) + 1.0; // \u8D77\u59CB\u70B9\u5728\u7B2C\u51E0\u884C
  float cellCurrentColumn = mod(id * cellCount, columnCount) + 1.0; // \u8D77\u59CB\u70B9\u5728\u7B2C\u51E0\u5217
  
  // cell \u56FA\u5B9A\u987A\u5E8F opacity -> strokeOpacity -> strokeWidth -> stroke ... 
  // \u6309\u987A\u5E8F\u4ECE cell \u4E2D\u53D6\u503C\u3001\u82E5\u6CA1\u6709\u5219\u81EA\u52A8\u5F80\u4E0B\u53D6\u503C
  float textureOffset = 0.0; // \u5728 cell \u4E2D\u53D6\u503C\u7684\u504F\u79FB\u91CF

  vec2 opacityAndOffset = calOpacityAndOffset(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset, columnWidth, rowHeight);
  styleMappingMat[0][0] = opacityAndOffset.r;
  textureOffset = opacityAndOffset.g;
  // cal style mapping - \u6570\u636E\u7EB9\u7406\u6620\u5C04\u90E8\u5206\u7684\u8BA1\u7B97
  vec4 pos = vec4(a_Position.xy, a_Position.z * a_Size, 1.0);
  vec4 project_pos = project_position(pos);

  if(u_heightfixed > 0.0) { // \u5224\u65AD\u51E0\u4F55\u4F53\u662F\u5426\u56FA\u5B9A\u9AD8\u5EA6
    project_pos.z = a_Position.z * a_Size;
    project_pos.z += u_raisingHeight;
    if(u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT || u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {
      float mapboxZoomScale = 4.0/pow(2.0, 21.0 - u_Zoom);
      project_pos.z *= mapboxZoomScale;
      project_pos.z += u_raisingHeight * mapboxZoomScale;
    }
  }

  // gl_Position = project_common_position_to_clipspace(vec4(project_pos.xyz, 1.0));

  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x
    // gl_Position = u_Mvp * (vec4(project_pos.xyz * vec3(1.0, 1.0, -1.0), 1.0));
    gl_Position = u_Mvp * (vec4(project_pos.xyz, 1.0));
  } else {
    gl_Position = project_common_position_to_clipspace(vec4(project_pos.xyz, 1.0));
  }

  float lightWeight = calc_lighting(pos);
  // v_Color = a_Color;
  v_Color = vec4(a_Color.rgb * lightWeight, a_Color.w);

  styleMappingMat[3][1] = lightWeight;

  setPickingColor(a_PickingColor);
}
`,E4=function(e){(0,ui.Z)(t,e);var i=d4(t);function t(){return(0,Ur.Z)(this,t),i.apply(this,arguments)}return(0,Jr.Z)(t,[{key:"getUninforms",value:function(){var r=this.layer.getLayerConfig(),o=r.opacity,u=o===void 0?1:o,f=r.heightfixed,g=f===void 0?!1:f,x=r.raisingHeight,I=x===void 0?0:x,P=r.topsurface,G=P===void 0?!0:P,$=r.sidesurface,Ee=$===void 0?!0:$,Se=r.sourceColor,Re=r.targetColor;if(this.dataTextureTest&&this.dataTextureNeedUpdate({opacity:u})){this.judgeStyleAttributes({opacity:u});var Ye=this.layer.getEncodedData(),St=this.calDataFrame(this.cellLength,Ye,this.cellProperties),vt=St.data,Ut=St.width,Kt=St.height;this.rowCount=Kt,this.dataTexture=this.cellLength>0&&vt.length>0?this.createTexture2D({flipY:!0,data:vt,format:$e.LUMINANCE,type:$e.FLOAT,width:Ut,height:Kt}):this.createTexture2D({flipY:!0,data:[1],format:$e.LUMINANCE,type:$e.FLOAT,width:1,height:1})}var Tr=0,on=[1,1,1,1],dn=[1,1,1,1];return Se&&Re&&(on=co(Se),dn=co(Re),Tr=1),{u_topsurface:Number(G),u_sidesurface:Number(Ee),u_heightfixed:Number(g),u_dataTexture:this.dataTexture,u_cellTypeLayout:this.getCellTypeLayout(),u_raisingHeight:Number(I),u_opacity:(0,Wr.isNumber)(u)?u:1,u_linearColor:Tr,u_sourceColor:on,u_targetColor:dn,u_texture:this.texture}}},{key:"initModels",value:function(){var n=(0,An.Z)(Nt().mark(function o(){return Nt().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return this.loadTexture(),f.next=3,this.buildModels();case 3:return f.abrupt("return",f.sent);case 4:case"end":return f.stop()}},o,this)}));function r(){return n.apply(this,arguments)}return r}()},{key:"buildModels",value:function(){var n=(0,An.Z)(Nt().mark(function o(){var u,f,g,x,I,P,G,$,Ee,Se;return Nt().wrap(function(Ye){for(;;)switch(Ye.prev=Ye.next){case 0:return u=this.layer.getLayerConfig(),f=u.mask,g=f===void 0?!1:f,x=u.maskInside,I=x===void 0?!0:x,P=this.getShaders(),G=P.frag,$=P.vert,Ee=P.type,Ye.next=4,this.layer.buildLayerModel({moduleName:Ee,vertexShader:$,fragmentShader:G,triangulation:D3,stencil:zo(g,I)});case 4:return Se=Ye.sent,Ye.abrupt("return",[Se]);case 6:case"end":return Ye.stop()}},o,this)}));function r(){return n.apply(this,arguments)}return r}()},{key:"getShaders",value:function(){var r=this.layer.getLayerConfig(),o=r.pickLight,u=r.mapTexture;return u?{frag:y4,vert:_4,type:"polygonExtrudeTexture"}:o?{frag:x4,vert:b4,type:"polygonExtrudePickLight"}:{frag:m4,vert:g4,type:"polygonExtrude"}}},{key:"clearModels",value:function(){var r,o;(r=this.dataTexture)===null||r===void 0||r.destroy(),(o=this.texture)===null||o===void 0||o.destroy()}},{key:"registerBuiltinAttributes",value:function(){var r=this.layer.getSource().extent,o=(0,Mr.Z)(r,4),u=o[0],f=o[1],g=o[2],x=o[3],I=g-u,P=x-f;this.styleAttributeService.registerStyleAttribute({name:"uvs",type:ja.Attribute,descriptor:{name:"a_uvs",buffer:{usage:$e.STATIC_DRAW,data:[],type:$e.FLOAT},size:3,update:function($,Ee,Se){var Re=Se[0],Ye=Se[1];return[(Re-u)/I,(Ye-f)/P,Se[4]]}}}),this.styleAttributeService.registerStyleAttribute({name:"normal",type:ja.Attribute,descriptor:{name:"a_Normal",buffer:{usage:$e.STATIC_DRAW,data:[],type:$e.FLOAT},size:3,update:function($,Ee,Se,Re,Ye){return Ye}}}),this.styleAttributeService.registerStyleAttribute({name:"size",type:ja.Attribute,descriptor:{name:"a_Size",buffer:{usage:$e.DYNAMIC_DRAW,data:[],type:$e.FLOAT},size:1,update:function($){var Ee=$.size,Se=Ee===void 0?10:Ee;return Array.isArray(Se)?[Se[0]]:[Se]}}})}},{key:"loadTexture",value:function(){var r=this,o=this.layer.getLayerConfig(),u=o.mapTexture,f=this.rendererService.createTexture2D;if(this.texture=f({height:0,width:0}),u){var g=new Image;g.crossOrigin="",g.src=u,g.onload=function(){r.texture=f({data:g,width:g.width,height:g.height,wrapS:$e.CLAMP_TO_EDGE,wrapT:$e.CLAMP_TO_EDGE,min:$e.LINEAR,mag:$e.LINEAR}),r.layerService.reRender()}}}}]),t}(Sl);function S4(e){var i=w4();return function(){var n=(0,rr.Z)(e),r;if(i){var o=(0,rr.Z)(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return(0,jn.Z)(this,r)}}function w4(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var A4=`uniform float u_opacity: 1.0;
varying vec4 v_color;
varying mat4 styleMappingMat; // \u4F20\u9012\u4ECE\u7247\u5143\u4E2D\u4F20\u9012\u7684\u6620\u5C04\u6570\u636E

#pragma include "picking"

void main() {
  float opacity = styleMappingMat[0][0];
  gl_FragColor = v_color;
  gl_FragColor.a *= opacity;
  gl_FragColor = filterColor(gl_FragColor);
}
`,C4=`uniform float u_opacity: 1.0;
varying vec4 v_Color;
varying mat4 styleMappingMat; // \u4F20\u9012\u4ECE\u7247\u5143\u4E2D\u4F20\u9012\u7684\u6620\u5C04\u6570\u636E

#pragma include "picking"
uniform float u_opacitylinear: 0.0;
uniform float u_dir: 1.0;
varying vec3 v_linear;
varying vec2 v_pos;


void main() {
  float opacity = styleMappingMat[0][0];
  gl_FragColor = v_Color;
  
  if(u_opacitylinear > 0.0) {
    gl_FragColor.a *= u_dir == 1.0 ? 1.0 - length(v_pos - v_linear.xy)/v_linear.z : length(v_pos - v_linear.xy)/v_linear.z;
  }

  gl_FragColor.a *= opacity;
  gl_FragColor = filterColor(gl_FragColor);
}
`,T4=`attribute vec4 a_Color;
attribute vec3 a_Position;

uniform mat4 u_ModelMatrix;
uniform mat4 u_Mvp;
uniform float u_opacity: 1.0;
uniform float u_raisingHeight: 0.0;

varying vec4 v_Color;
varying mat4 styleMappingMat; // \u7528\u4E8E\u5C06\u5728\u9876\u70B9\u7740\u8272\u5668\u4E2D\u8BA1\u7B97\u597D\u7684\u6837\u5F0F\u503C\u4F20\u9012\u7ED9\u7247\u5143

#pragma include "styleMapping"
#pragma include "styleMappingCalOpacity"

#pragma include "projection"
#pragma include "picking"

uniform float u_opacitylinear: 0.0;

attribute vec3 a_linear;
varying vec3 v_linear;
varying vec2 v_pos;

void main() {
  if(u_opacitylinear > 0.0) {
    v_linear = a_linear;
    v_pos = a_Position.xy;
  }
  
  // cal style mapping - \u6570\u636E\u7EB9\u7406\u6620\u5C04\u90E8\u5206\u7684\u8BA1\u7B97
styleMappingMat = mat4(
    0.0, 0.0, 0.0, 0.0, // opacity - strokeOpacity - strokeWidth - empty
    0.0, 0.0, 0.0, 0.0, // strokeR - strokeG - strokeB - strokeA
    0.0, 0.0, 0.0, 0.0, // offsets[0] - offsets[1]
    0.0, 0.0, 0.0, 0.0
  );

  float rowCount = u_cellTypeLayout[0][0];    // \u5F53\u524D\u7684\u6570\u636E\u7EB9\u7406\u6709\u51E0\u884C
  float columnCount = u_cellTypeLayout[0][1]; // \u5F53\u770B\u5230\u6570\u636E\u7EB9\u7406\u6709\u51E0\u5217
  float columnWidth = 1.0/columnCount;  // \u5217\u5BBD
  float rowHeight = 1.0/rowCount;       // \u884C\u9AD8
  float cellCount = calCellCount(); // opacity - strokeOpacity - strokeWidth - stroke - offsets
  float id = a_vertexId; // \u7B2Cn\u4E2A\u9876\u70B9
  float cellCurrentRow = floor(id * cellCount / columnCount) + 1.0; // \u8D77\u59CB\u70B9\u5728\u7B2C\u51E0\u884C
  float cellCurrentColumn = mod(id * cellCount, columnCount) + 1.0; // \u8D77\u59CB\u70B9\u5728\u7B2C\u51E0\u5217
  
  // cell \u56FA\u5B9A\u987A\u5E8F opacity -> strokeOpacity -> strokeWidth -> stroke ... 
  // \u6309\u987A\u5E8F\u4ECE cell \u4E2D\u53D6\u503C\u3001\u82E5\u6CA1\u6709\u5219\u81EA\u52A8\u5F80\u4E0B\u53D6\u503C
  float textureOffset = 0.0; // \u5728 cell \u4E2D\u53D6\u503C\u7684\u504F\u79FB\u91CF

  vec2 opacityAndOffset = calOpacityAndOffset(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset, columnWidth, rowHeight);
  styleMappingMat[0][0] = opacityAndOffset.r;
  textureOffset = opacityAndOffset.g;
  // cal style mapping - \u6570\u636E\u7EB9\u7406\u6620\u5C04\u90E8\u5206\u7684\u8BA1\u7B97

  v_Color = a_Color;
  vec4 project_pos = project_position(vec4(a_Position, 1.0));
  // gl_Position = project_common_position_to_clipspace(vec4(project_pos.xyz, 1.0));
  project_pos.z += u_raisingHeight;

  if(u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT || u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {
    float mapboxZoomScale = 4.0/pow(2.0, 21.0 - u_Zoom);
    project_pos.z *= mapboxZoomScale;
    project_pos.z += u_raisingHeight * mapboxZoomScale;
  }

  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x
    gl_Position = u_Mvp * (vec4(project_pos.xyz, 1.0));
  } else {
    gl_Position = project_common_position_to_clipspace(vec4(project_pos.xyz, 1.0));
  }

  setPickingColor(a_PickingColor);
}`,M4=`attribute vec4 a_Color;
attribute vec3 a_Position;

uniform mat4 u_ModelMatrix;
uniform mat4 u_Mvp;

uniform float u_opacity: 1.0;
uniform float u_raisingHeight: 0.0;

varying vec4 v_color;
varying mat4 styleMappingMat; // \u7528\u4E8E\u5C06\u5728\u9876\u70B9\u7740\u8272\u5668\u4E2D\u8BA1\u7B97\u597D\u7684\u6837\u5F0F\u503C\u4F20\u9012\u7ED9\u7247\u5143

#pragma include "styleMapping"
#pragma include "styleMappingCalOpacity"

#pragma include "projection"
#pragma include "picking"

void main() {
  // cal style mapping - \u6570\u636E\u7EB9\u7406\u6620\u5C04\u90E8\u5206\u7684\u8BA1\u7B97
styleMappingMat = mat4(
    0.0, 0.0, 0.0, 0.0, // opacity - strokeOpacity - strokeWidth - empty
    0.0, 0.0, 0.0, 0.0, // strokeR - strokeG - strokeB - strokeA
    0.0, 0.0, 0.0, 0.0, // offsets[0] - offsets[1]
    0.0, 0.0, 0.0, 0.0
  );

  float rowCount = u_cellTypeLayout[0][0];    // \u5F53\u524D\u7684\u6570\u636E\u7EB9\u7406\u6709\u51E0\u884C
  float columnCount = u_cellTypeLayout[0][1]; // \u5F53\u770B\u5230\u6570\u636E\u7EB9\u7406\u6709\u51E0\u5217
  float columnWidth = 1.0/columnCount;  // \u5217\u5BBD
  float rowHeight = 1.0/rowCount;       // \u884C\u9AD8
  float cellCount = calCellCount(); // opacity - strokeOpacity - strokeWidth - stroke - offsets
  float id = a_vertexId; // \u7B2Cn\u4E2A\u9876\u70B9
  float cellCurrentRow = floor(id * cellCount / columnCount) + 1.0; // \u8D77\u59CB\u70B9\u5728\u7B2C\u51E0\u884C
  float cellCurrentColumn = mod(id * cellCount, columnCount) + 1.0; // \u8D77\u59CB\u70B9\u5728\u7B2C\u51E0\u5217
  
  // cell \u56FA\u5B9A\u987A\u5E8F opacity -> strokeOpacity -> strokeWidth -> stroke ... 
  // \u6309\u987A\u5E8F\u4ECE cell \u4E2D\u53D6\u503C\u3001\u82E5\u6CA1\u6709\u5219\u81EA\u52A8\u5F80\u4E0B\u53D6\u503C
  float textureOffset = 0.0; // \u5728 cell \u4E2D\u53D6\u503C\u7684\u504F\u79FB\u91CF

  vec2 opacityAndOffset = calOpacityAndOffset(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset, columnWidth, rowHeight);
  styleMappingMat[0][0] = opacityAndOffset.r;
  textureOffset = opacityAndOffset.g;
  // cal style mapping - \u6570\u636E\u7EB9\u7406\u6620\u5C04\u90E8\u5206\u7684\u8BA1\u7B97

  v_color = a_Color;
  vec4 project_pos = project_position(vec4(a_Position, 1.0));
  // gl_Position = project_common_position_to_clipspace(vec4(project_pos.xyz, 1.0));

  project_pos.z += u_raisingHeight;

  if(u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT || u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {
    float mapboxZoomScale = 4.0/pow(2.0, 21.0 - u_Zoom);
    project_pos.z *= mapboxZoomScale;
    project_pos.z += u_raisingHeight * mapboxZoomScale;
  }

  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x
    gl_Position = u_Mvp * (vec4(project_pos.xyz, 1.0));
  } else {
    gl_Position = project_common_position_to_clipspace(vec4(project_pos.xyz, 1.0));
  }

  setPickingColor(a_PickingColor);
}

`,I4=function(e){(0,ui.Z)(t,e);var i=S4(t);function t(){return(0,Ur.Z)(this,t),i.apply(this,arguments)}return(0,Jr.Z)(t,[{key:"getUninforms",value:function(){var r=this.layer.getLayerConfig(),o=r.raisingHeight,u=o===void 0?0:o,f=r.opacity,g=f===void 0?1:f,x=r.opacityLinear,I=x===void 0?{enable:!1,dir:"in"}:x;if(this.dataTextureTest&&this.dataTextureNeedUpdate({opacity:g})){this.judgeStyleAttributes({opacity:g});var P=this.layer.getEncodedData(),G=this.calDataFrame(this.cellLength,P,this.cellProperties),$=G.data,Ee=G.width,Se=G.height;this.rowCount=Se,this.dataTexture=this.cellLength>0&&$.length>0?this.createTexture2D({flipY:!0,data:$,format:$e.LUMINANCE,type:$e.FLOAT,width:Ee,height:Se}):this.createTexture2D({flipY:!0,data:[1],format:$e.LUMINANCE,type:$e.FLOAT,width:1,height:1})}return{u_dataTexture:this.dataTexture,u_cellTypeLayout:this.getCellTypeLayout(),u_raisingHeight:Number(u),u_opacity:(0,Wr.isNumber)(g)?g:1,u_opacitylinear:Number(I.enable),u_dir:I.dir==="in"?1:0}}},{key:"initModels",value:function(){var n=(0,An.Z)(Nt().mark(function o(){return Nt().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return f.next=2,this.buildModels();case 2:return f.abrupt("return",f.sent);case 3:case"end":return f.stop()}},o,this)}));function r(){return n.apply(this,arguments)}return r}()},{key:"buildModels",value:function(){var n=(0,An.Z)(Nt().mark(function o(){var u,f,g,x,I,P,G,$,Ee,Se,Re,Ye,St,vt;return Nt().wrap(function(Kt){for(;;)switch(Kt.prev=Kt.next){case 0:return u=this.getModelParams(),f=u.frag,g=u.vert,x=u.triangulation,I=u.type,P=this.layer.getLayerConfig(),G=P.mask,$=G===void 0?!1:G,Ee=P.maskInside,Se=Ee===void 0?!0:Ee,Re=P.workerEnabled,Ye=Re===void 0?!1:Re,St=P.enablePicking,this.layer.triangulation=x,Kt.next=5,this.layer.buildLayerModel({moduleName:I,vertexShader:g,fragmentShader:f,triangulation:x,primitive:$e.TRIANGLES,depth:{enable:!1},blend:this.getBlend(),stencil:zo($,Se),workerEnabled:Ye,workerOptions:{modelType:I,enablePicking:St}});case 5:return vt=Kt.sent,Kt.abrupt("return",[vt]);case 7:case"end":return Kt.stop()}},o,this)}));function r(){return n.apply(this,arguments)}return r}()},{key:"clearModels",value:function(){var r;(r=this.dataTexture)===null||r===void 0||r.destroy()}},{key:"registerBuiltinAttributes",value:function(){var r=this.layer.getLayerConfig(),o=r.opacityLinear,u=o===void 0?{enable:!1,dir:"in"}:o;u.enable&&this.styleAttributeService.registerStyleAttribute({name:"linear",type:ja.Attribute,descriptor:{name:"a_linear",buffer:{usage:$e.STATIC_DRAW,data:[],type:$e.FLOAT},size:3,update:function(g,x,I){return[I[3],I[4],I[5]]}}})}},{key:"getModelParams",value:function(){var r=this.layer.getLayerConfig(),o=r.opacityLinear,u=o===void 0?{enable:!1}:o;return u.enable?{frag:C4,vert:T4,type:"polygonLinear",triangulation:k3}:{frag:A4,vert:M4,type:"polygonFill",triangulation:oi}}}]),t}(Sl);function O4(e){var i=R4();return function(){var n=(0,rr.Z)(e),r;if(i){var o=(0,rr.Z)(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return(0,jn.Z)(this,r)}}function R4(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var P4=`
uniform float u_time: 0.0;
uniform float u_opacity: 1.0;

varying vec2 v_uv;

float coast2water_fadedepth = 0.10;
float large_waveheight      = .750; // change to adjust the "heavy" waves
float large_wavesize        = 3.4;  // factor to adjust the large wave size
float small_waveheight      = 0.6;  // change to adjust the small random waves
float small_wavesize        = 0.5;   // factor to ajust the small wave size
float water_softlight_fact  = 15.;  // range [1..200] (should be << smaller than glossy-fact)
float water_glossylight_fact= 120.; // range [1..200]
float particle_amount       = 70.;
// vec3 watercolor             = vec3(0.43, 0.60, 0.66); // 'transparent' low-water color (RGB)
// vec3 watercolor2            = vec3(0.06, 0.07, 0.11); // deep-water color (RGB, should be darker than the low-water color)
uniform vec4 u_watercolor;
uniform vec4 u_watercolor2;
vec3 water_specularcolor    = vec3(1.3, 1.3, 0.9);    // specular Color (RGB) of the water-highlights
#define light                 vec3(-0., sin(u_time*0.5)*.5 + .35, 2.8) // position of the sun

uniform sampler2D u_texture1;
uniform sampler2D u_texture2;
uniform sampler2D u_texture3;

  

float hash( float n ) {
    return fract(sin(n)*43758.5453123);
}

// 2d noise function
float noise1( in vec2 x ) {
  vec2 p  = floor(x);
  vec2 f  = smoothstep(0.0, 1.0, fract(x));
  float n = p.x + p.y*57.0;
  return mix(mix( hash(n+  0.0), hash(n+  1.0),f.x),
    mix( hash(n+ 57.0), hash(n+ 58.0),f.x),f.y);
}

float noise(vec2 p) {
    return texture2D(u_texture2,p*vec2(1./256.)).x;
}

vec4 highness(vec2 p) {
    vec4 t = texture2D(u_texture1,fract(p));
    float clipped = -2.0-smoothstep(3.,10.,t.a)*6.9-smoothstep(10.,100.,t.a)*89.9-smoothstep(0.,10000.,t.a)*10000.0;
    return clamp(t, 0.0,3.0)+clamp(t/3.0-1.0, 0.0,1.0)+clamp(t/16.0-1.0, 0.0,1.0);
}

float height_map( vec2 p ) {
    vec4 height=highness(p);
    /*
    height = -0.5+
        0.5*smoothstep(-100.,0.,-height)+
        2.75*smoothstep(0.,2.,height)+
        1.75*smoothstep(2.,4.,height)+
        2.75*smoothstep(4.,16.,height)+
        1.5*smoothstep(16.,1000.,height);
    */

    mat2 m = mat2( 0.9563*1.4,  -0.2924*1.4,  0.2924*1.4,  0.9563*1.4 );
    //p = p*6.;
    float f = 0.6000*noise1( p ); p = m*p*1.1*6.;
    f += 0.2500*noise( p ); p = m*p*1.32;
    f += 0.1666*noise( p ); p = m*p*1.11;
    f += 0.0834*noise( p ); p = m*p*1.12;
    f += 0.0634*noise( p ); p = m*p*1.13;
    f += 0.0444*noise( p ); p = m*p*1.14;
    f += 0.0274*noise( p ); p = m*p*1.15;
    f += 0.0134*noise( p ); p = m*p*1.16;
    f += 0.0104*noise( p ); p = m*p*1.17;
    f += 0.0084*noise( p );
    f = .25*f+dot(height,vec4(-.03125,-.125,.25,.25))*.5;
        const float FLAT_LEVEL = 0.92525;
        //f = f*0.25+height*0.75;
    if (f<FLAT_LEVEL)
        f = f;
    else
        f = pow((f-FLAT_LEVEL)/(1.-FLAT_LEVEL), 2.)*(1.-FLAT_LEVEL)*2.0+FLAT_LEVEL; // makes a smooth coast-increase
    return clamp(f, 0., 10.);
}

vec3 plasma_quintic( float x ) {
    x = clamp( x, 0.0, 1.0);
    vec4 x1 = vec4( 1.0, x, x * x, x * x * x ); // 1 x x2 x3
    vec4 x2 = x1 * x1.w * x; // x4 x5 x6 x7
    return vec3(
        dot( x1.xyzw, vec4( +0.063861086, +1.992659096, -1.023901152, -0.490832805 ) ) + dot( x2.xy, vec2( +1.308442123, -0.914547012 ) ),
        dot( x1.xyzw, vec4( +0.049718590, -0.791144343, +2.892305078, +0.811726816 ) ) + dot( x2.xy, vec2( -4.686502417, +2.717794514 ) ),
        dot( x1.xyzw, vec4( +0.513275779, +1.580255060, -5.164414457, +4.559573646 ) ) + dot( x2.xy, vec2( -1.916810682, +0.570638854 ) ) );
}

vec4 color(vec2 p){
    vec4 c1 = vec4(1.7,1.6,.9,1);
    vec4 c2 = vec4(.2,.94,.1,1);
    vec4 c3 = vec4(.3,.2,.0,1);
    vec4 c4 = vec4(.99,.99,1.6,1);
    vec4 v = highness(p);
    float los = smoothstep(0.1,1.1,v.b);
    float his = smoothstep(3.5,6.5,v.b);
    float ces = smoothstep(1.,5.,v.a);
    vec4 lo = mix(c1,c2,los);
    vec4 hi = mix(c3,c4,his);
    vec4 ce = mix(lo,hi,ces);

    return vec4(plasma_quintic(ces),1).ragb;
}

vec3 terrain_map( vec2 p )
{
  return color(p).rgb*0.75+0.25*vec3(0.7, .55, .4)+texture2D(u_texture3, fract(p*5.)).rgb*.5; // test-terrain is simply 'sandstone'
}

const mat2 m = mat2( 0.72, -1.60,  1.60,  0.72 );

float water_map( vec2 p, float height ) {
    vec2 p2 = p*large_wavesize;
    vec2 shift1 = 0.001*vec2( u_time*160.0*2.0, u_time*120.0*2.0 );
    vec2 shift2 = 0.001*vec2( u_time*190.0*2.0, -u_time*130.0*2.0 );

    // coarse crossing 'ocean' waves...
    float f = 0.6000*noise( p );
    f += 0.2500*noise( p*m );
    f += 0.1666*noise( p*m*m );
    float wave = sin(p2.x*0.622+p2.y*0.622+shift2.x*4.269)*large_waveheight*f*height*height ;

    p *= small_wavesize;
    f = 0.;
    float amp = 1.0, s = .5;
    for (int i=0; i<9; i++)
    { p = m*p*.947; f -= amp*abs(sin((noise( p+shift1*s )-.5)*2.)); amp = amp*.59; s*=-1.329; }
    
    return wave+f*small_waveheight;
}

float nautic(vec2 p) {
    p *= 18.;
    float f = 0.;
    float amp = 1.0, s = .5;
    for (int i=0; i<3; i++)
    { p = m*p*1.2; f += amp*abs(smoothstep(0., 1., noise( p+u_time*s ))-.5); amp = amp*.5; s*=-1.227; }
    return pow(1.-f, 5.);
}

float particles(vec2 p) {
    p *= 200.;
    float f = 0.;
    float amp = 1.0, s = 1.5;
    for (int i=0; i<3; i++)
    { p = m*p*1.2; f += amp*noise( p+u_time*s ); amp = amp*.5; s*=-1.227; }
    return pow(f*.35, 7.)*particle_amount;
}

float test_shadow( vec2 xy, float height) {
    vec3 r0 = vec3(xy, height);
    vec3 rd = normalize( light - r0 );
    
    float hit = 1.0;
    float t   = 0.001;
    for (int j=1; j<25; j++)
    {
        vec3 p = r0 + t*rd;
        float h = height_map( p.xy );
        float height_diff = p.z - h;
        if (height_diff<0.0)
        {
            return 0.0;
        }
        t += 0.01+height_diff*.02;
        hit = min(hit, 2.*height_diff/t); // soft shaddow   
    }
    return hit;
}

vec3 CalcTerrain(vec2 uv, float height) {
    vec3 col = terrain_map( uv );
    vec2 iResolution = vec2(512.);
    float h1 = height_map(uv-vec2(0., 0.5)/ iResolution.xy);
    float h2 = height_map(uv+vec2(0., 0.5)/ iResolution.xy);
    float h3 = height_map(uv-vec2(0.5, 0.)/ iResolution.xy);
    float h4 = height_map(uv+vec2(0.5, 0.)/ iResolution.xy);
    vec3 norm = normalize(vec3(h3-h4, h1-h2, 1.));
    vec3 r0 = vec3(uv, height);
    vec3 rd = normalize( light - r0 );
    float grad = dot(norm, rd);
    col *= grad+pow(grad, 8.);
    float terrainshade = test_shadow( uv, height );
    col = mix(col*.25, col, terrainshade);
    return col;
}


void main() {
  vec3 watercolor = u_watercolor.rgb;
  vec3 watercolor2 = u_watercolor2.rgb;
  vec2 uv = v_uv;
  float WATER_LEVEL = 0.84; // Water level (range: 0.0 - 2.0)
  float deepwater_fadedepth   = 0.4 + coast2water_fadedepth;
  float height = height_map( uv );
  vec3 col;

    float waveheight = clamp(WATER_LEVEL*3.-1.5, 0., 1.);
    float level = WATER_LEVEL + .2*water_map(uv*15. + vec2(u_time*.1), waveheight);
    if (height > level)
    {
        col = CalcTerrain(uv, height);
    }
    if (height <= level)
    {
        vec2 dif = vec2(.0, .01);
        vec2 pos = uv*15. + vec2(u_time*.01);
        float h1 = water_map(pos-dif,waveheight);
        float h2 = water_map(pos+dif,waveheight);
        float h3 = water_map(pos-dif.yx,waveheight);
        float h4 = water_map(pos+dif.yx,waveheight);
        vec3 normwater = normalize(vec3(h3-h4, h1-h2, .125)); // norm-vector of the 'bumpy' water-plane
        uv += normwater.xy*.002*(level-height);
        
        col = CalcTerrain(uv, height);

        float coastfade = clamp((level-height)/coast2water_fadedepth, 0., 1.);
        float coastfade2= clamp((level-height)/deepwater_fadedepth, 0., 1.);
        float intensity = col.r*.2126+col.g*.7152+col.b*.0722;
        watercolor = mix(watercolor*intensity, watercolor2, smoothstep(0., 1., coastfade2));

        vec3 r0 = vec3(uv, WATER_LEVEL);
        vec3 rd = normalize( light - r0 ); // ray-direction to the light from water-position
        float grad     = dot(normwater, rd); // dot-product of norm-vector and light-direction
        float specular = pow(grad, water_softlight_fact);  // used for soft highlights                          
        float specular2= pow(grad, water_glossylight_fact); // used for glossy highlights
        float gradpos  = dot(vec3(0., 0., 1.), rd);
        float specular1= smoothstep(0., 1., pow(gradpos, 5.));  // used for diffusity (some darker corona around light's specular reflections...)                          
        float watershade  = test_shadow( uv, level );
        watercolor *= 2.2+watershade;
        watercolor += (.2+.8*watershade) * ((grad-1.0)*.5+specular) * .25;
        watercolor /= (1.+specular1*1.25);
        watercolor += watershade*specular2*water_specularcolor;
        watercolor += watershade*coastfade*(1.-coastfade2)*(vec3(.5, .6, .7)*nautic(uv)+vec3(1., 1., 1.)*particles(uv));
        
        col = mix(col, watercolor, coastfade);
    }
    

  float opacity = u_opacity;
  gl_FragColor = vec4(col, opacity);  
}
`,k4=`attribute vec2 a_uv;
attribute vec3 a_Position;
uniform mat4 u_ModelMatrix;
uniform mat4 u_Mvp;

varying vec2 v_uv;

#pragma include "projection"

void main() {
  v_uv = a_uv;

  vec4 project_pos = project_position(vec4(a_Position, 1.0));

  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x
    gl_Position = u_Mvp * (vec4(project_pos.xyz, 1.0));
  } else {
    gl_Position = project_common_position_to_clipspace(vec4(project_pos.xyz, 1.0));
  }
}

`,L4=function(e){(0,ui.Z)(t,e);var i=O4(t);function t(){return(0,Ur.Z)(this,t),i.apply(this,arguments)}return(0,Jr.Z)(t,[{key:"getUninforms",value:function(){var r=this.layer.getLayerConfig(),o=r.opacity,u=o===void 0?1:o,f=r.watercolor,g=f===void 0?"#6D99A8":f,x=r.watercolor2,I=x===void 0?"#0F121C":x;return{u_texture1:this.texture1,u_texture2:this.texture2,u_texture3:this.texture3,u_watercolor:co(g),u_watercolor2:co(I),u_opacity:(0,Wr.isNumber)(u)?u:1}}},{key:"getAnimateUniforms",value:function(){return{u_time:this.layer.getLayerAnimateTime()}}},{key:"initModels",value:function(){var n=(0,An.Z)(Nt().mark(function o(){return Nt().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return this.loadTexture(),f.next=3,this.buildModels();case 3:return f.abrupt("return",f.sent);case 4:case"end":return f.stop()}},o,this)}));function r(){return n.apply(this,arguments)}return r}()},{key:"buildModels",value:function(){var n=(0,An.Z)(Nt().mark(function o(){var u,f,g,x,I,P;return Nt().wrap(function($){for(;;)switch($.prev=$.next){case 0:return u=this.layer.getLayerConfig(),f=u.mask,g=f===void 0?!1:f,x=u.maskInside,I=x===void 0?!0:x,$.next=3,this.layer.buildLayerModel({moduleName:"polygonOcean",vertexShader:k4,fragmentShader:P4,triangulation:M0,primitive:$e.TRIANGLES,depth:{enable:!1},stencil:zo(g,I)});case 3:return P=$.sent,$.abrupt("return",[P]);case 5:case"end":return $.stop()}},o,this)}));function r(){return n.apply(this,arguments)}return r}()},{key:"clearModels",value:function(){var r,o,u;(r=this.texture1)===null||r===void 0||r.destroy(),(o=this.texture2)===null||o===void 0||o.destroy(),(u=this.texture3)===null||u===void 0||u.destroy()}},{key:"registerBuiltinAttributes",value:function(){var r=this.layer.getSource().extent,o=(0,Mr.Z)(r,4),u=o[0],f=o[1],g=o[2],x=o[3],I=g-u,P=x-f;this.styleAttributeService.registerStyleAttribute({name:"oceanUv",type:ja.Attribute,descriptor:{name:"a_uv",buffer:{usage:$e.STATIC_DRAW,data:[],type:$e.FLOAT},size:2,update:function($,Ee,Se,Re){var Ye=$.version===Mc["GAODE2.x"]?$.originCoordinates[0][Re]:Se,St=(0,Mr.Z)(Ye,2),vt=St[0],Ut=St[1];return[(vt-u)/I,(Ut-f)/P]}}})}},{key:"loadTexture",value:function(){var r=this,o=this.rendererService.createTexture2D,u={height:0,width:0};this.texture1=o(u),this.texture2=o(u),this.texture3=o(u),f(function(x){r.texture1=g(x[0]),r.texture2=g(x[1]),r.texture3=g(x[2]),r.layerService.reRender()});function f(x){var I=0,P=[],G=["https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*EojwT4VzSiYAAAAAAAAAAAAAARQnAQ","https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*MJ22QbpuCzIAAAAAAAAAAAAAARQnAQ","https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*-z2HSIVDsHIAAAAAAAAAAAAAARQnAQ"];G.map(function($){var Ee=new Image;Ee.crossOrigin="",Ee.src=$,P.push(Ee),Ee.onload=function(){I++,I===3&&x(P)}})}function g(x){return o({data:x,width:x.width,height:x.height,wrapS:$e.MIRRORED_REPEAT,wrapT:$e.MIRRORED_REPEAT,min:$e.LINEAR,mag:$e.LINEAR})}}}]),t}(Sl);function D4(e){var i=F4();return function(){var n=(0,rr.Z)(e),r;if(i){var o=(0,rr.Z)(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return(0,jn.Z)(this,r)}}function F4(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var N4=`uniform float u_opacity : 1.0;
varying vec4 v_color;

#pragma include "picking"

void main() {
  gl_FragColor = v_color;
  gl_FragColor.a *= u_opacity;
  gl_FragColor = filterColor(gl_FragColor);
}
`,B4=`attribute vec4 a_Color;
attribute vec3 a_Position;

uniform mat4 u_ModelMatrix;
uniform mat4 u_Mvp;

// uniform vec2 u_tileOrigin;
// uniform float u_coord;

varying vec4 v_color;

#pragma include "projection"
#pragma include "picking"

void main() {
  v_color = a_Color;
  vec4 project_pos = project_position(vec4(a_Position, 1.0));

  // if(u_coord > 0.0) {
    if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x
      gl_Position = u_Mvp * (vec4(project_pos.xyz, 1.0));
    } else {
      gl_Position = project_common_position_to_clipspace(vec4(project_pos.xyz, 1.0));
    }
  // } else {
  //   vec4 world = vec4(project_mvt_offset_position(vec4(u_tileOrigin, 0.0, 1.0)).xyz, 1.0); // \u74E6\u7247\u8D77\u59CB\u70B9\u7684\u4E16\u754C\u5750\u6807

  //   vec2 pointOffset = a_Position.xy *  pow(2.0, u_Zoom); // \u74E6\u7247\u5185\u7684\u70B9\u7684\u504F\u79FB\u5750\u6807
    
  //   world.xy += pointOffset;

  //   if (u_CoordinateSystem == COORDINATE_SYSTEM_METER_OFFSET || u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {
  //     // Needs to be divided with project_uCommonUnitsPerMeter
  //     world.w *= u_PixelsPerMeter.z;
  //   }

  //   gl_Position = u_ViewProjectionMatrix * world + u_ViewportCenterProjection;
  // }

  setPickingColor(a_PickingColor);
}

`,z4=`uniform float u_opacity : 1.0;
uniform vec4 u_color;

void main() {
  gl_FragColor = u_color;
  gl_FragColor.a *= u_opacity;
}
`,U4=`attribute vec3 a_Position;

uniform mat4 u_ModelMatrix;
uniform mat4 u_Mvp;

#pragma include "projection"

void main() {
  vec4 project_pos = project_position(vec4(a_Position, 1.0));

  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x
    gl_Position = u_Mvp * (vec4(project_pos.xyz, 1.0));
  } else {
    gl_Position = project_common_position_to_clipspace(vec4(project_pos.xyz, 1.0));
  }
}`,Z4=function(e){(0,ui.Z)(t,e);var i=D4(t);function t(){return(0,Ur.Z)(this,t),i.apply(this,arguments)}return(0,Jr.Z)(t,[{key:"getUninforms",value:function(){var r=this.layer.getLayerConfig(),o=r.opacity,u=o===void 0?1:o,f=r.usage,g=r.color,x=g===void 0?"#fff":g;return{u_opacity:u,u_color:f==="basemap"?co(x):[0,0,0,0]}}},{key:"initModels",value:function(){var n=(0,An.Z)(Nt().mark(function o(){return Nt().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return f.next=2,this.buildModels();case 2:return f.abrupt("return",f.sent);case 3:case"end":return f.stop()}},o,this)}));function r(){return n.apply(this,arguments)}return r}()},{key:"buildModels",value:function(){var n=(0,An.Z)(Nt().mark(function o(){var u,f,g,x,I,P,G;return Nt().wrap(function(Ee){for(;;)switch(Ee.prev=Ee.next){case 0:return u=this.layer.getLayerConfig(),f=u.mask,g=f===void 0?!1:f,x=u.maskInside,I=x===void 0?!0:x,P=u.usage,this.layer.triangulation=M0,Ee.next=4,this.layer.buildLayerModel({moduleName:"polygonTile_"+P,vertexShader:P==="basemap"?U4:B4,fragmentShader:P==="basemap"?z4:N4,triangulation:M0,depth:{enable:!1},blend:this.getBlend(),stencil:zo(g,I),pick:P!=="basemap"});case 4:return G=Ee.sent,Ee.abrupt("return",[G]);case 6:case"end":return Ee.stop()}},o,this)}));function r(){return n.apply(this,arguments)}return r}()},{key:"clearModels",value:function(){}},{key:"registerBuiltinAttributes",value:function(){}}]),t}(Sl);function j4(e){var i=V4();return function(){var n=(0,rr.Z)(e),r;if(i){var o=(0,rr.Z)(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return(0,jn.Z)(this,r)}}function V4(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var G4=`uniform sampler2D u_texture;
uniform float u_time: 0.0;
uniform float u_speed: 1.0;
uniform float u_opacity: 1.0;

varying vec4 v_Color;
varying vec2 v_uv;

float rand(vec2 n) { return 0.5 + 0.5 * fract(sin(dot(n.xy, vec2(12.9898, 78.233)))* 43758.5453); }

float water(vec3 p) {
  float t = u_time * u_speed;
  p.z += t * 2.; p.x += t * 2.;
  vec3 c1 = texture2D(u_texture, p.xz / 30.).xyz;
  p.z += t * 3.; p.x += t * 0.52;
  vec3 c2 = texture2D(u_texture, p.xz / 30.).xyz;
  p.z += t * 4.; p.x += t * 0.8;
  vec3 c3 = texture2D(u_texture, p.xz / 30.).xyz;
  c1 += c2 - c3;
  float z = (c1.x + c1.y + c1.z) / 3.;
  return p.y + z / 4.;
}

float map(vec3 p) {
  float d = 100.0;
  d = water(p);
  return d;
}

float intersect(vec3 ro, vec3 rd) {
  float d = 0.0;
  for (int i = 0; i <= 100; i++) {
    float h = map(ro + rd * d);
    if (h < 0.1) return  d;
    d += h;
  }
  return 0.0;
}

vec3 norm(vec3 p) {
  float eps = .1;
  return normalize(vec3(
    map(p + vec3(eps, 0, 0)) - map(p + vec3(-eps, 0, 0)),
    map(p + vec3(0, eps, 0)) - map(p + vec3(0, -eps, 0)),
    map(p + vec3(0, 0, eps)) - map(p + vec3(0, 0, -eps))
  ));
} 

float calSpc() {
  vec3 l1 = normalize(vec3(1, 1, 1));
  vec3 ro = vec3(-3, 20, -8);
  vec3 rc = vec3(0, 0, 0);
  vec3 ww = normalize(rc - ro);
  vec3 uu = normalize(cross(vec3(0,1,0), ww));
  vec3 vv = normalize(cross(rc - ro, uu));
  vec3 rd = normalize(uu * v_uv.x + vv * v_uv.y + ww);
  float d = intersect(ro, rd);
  vec3 p = ro + rd * d;
  vec3 n = norm(p);
  float spc = pow(max(0.0, dot(reflect(l1, n), rd)), 30.0);
  return spc;
}

void main() {
  float opacity = u_opacity;
  gl_FragColor = v_Color;
  gl_FragColor.a *= opacity;

  float spc = calSpc();
  gl_FragColor += spc * 0.4;
}
`,H4=`attribute vec4 a_Color;
attribute vec2 a_uv;
attribute vec3 a_Position;
uniform mat4 u_ModelMatrix;
uniform mat4 u_Mvp;

varying vec4 v_Color;
varying vec2 v_uv;
uniform float u_opacity: 1.0;


#pragma include "projection"

void main() {
  v_uv = a_uv;

  v_Color = a_Color;
  vec4 project_pos = project_position(vec4(a_Position, 1.0));

  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x
    gl_Position = u_Mvp * (vec4(project_pos.xyz, 1.0));
  } else {
    gl_Position = project_common_position_to_clipspace(vec4(project_pos.xyz, 1.0));
  }
}

`,W4=function(e){(0,ui.Z)(t,e);var i=j4(t);function t(){return(0,Ur.Z)(this,t),i.apply(this,arguments)}return(0,Jr.Z)(t,[{key:"getUninforms",value:function(){var r=this.layer.getLayerConfig(),o=r.opacity,u=o===void 0?1:o,f=r.speed,g=f===void 0?.5:f;return{u_texture:this.texture,u_speed:g,u_opacity:(0,Wr.isNumber)(u)?u:1}}},{key:"getAnimateUniforms",value:function(){return{u_time:this.layer.getLayerAnimateTime()}}},{key:"initModels",value:function(){var n=(0,An.Z)(Nt().mark(function o(){return Nt().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return this.loadTexture(),f.next=3,this.buildModels();case 3:return f.abrupt("return",f.sent);case 4:case"end":return f.stop()}},o,this)}));function r(){return n.apply(this,arguments)}return r}()},{key:"buildModels",value:function(){var n=(0,An.Z)(Nt().mark(function o(){var u,f,g,x,I,P;return Nt().wrap(function($){for(;;)switch($.prev=$.next){case 0:return u=this.layer.getLayerConfig(),f=u.mask,g=f===void 0?!1:f,x=u.maskInside,I=x===void 0?!0:x,$.next=3,this.layer.buildLayerModel({moduleName:"polygonWater",vertexShader:H4,fragmentShader:G4,triangulation:M0,primitive:$e.TRIANGLES,depth:{enable:!1},stencil:zo(g,I)});case 3:return P=$.sent,$.abrupt("return",[P]);case 5:case"end":return $.stop()}},o,this)}));function r(){return n.apply(this,arguments)}return r}()},{key:"clearModels",value:function(){var r;(r=this.texture)===null||r===void 0||r.destroy()}},{key:"registerBuiltinAttributes",value:function(){var r=this.layer.getSource().extent,o=(0,Mr.Z)(r,4),u=o[0],f=o[1],g=o[2],x=o[3],I=g-u,P=x-f;this.styleAttributeService.registerStyleAttribute({name:"waterUv",type:ja.Attribute,descriptor:{name:"a_uv",buffer:{usage:$e.STATIC_DRAW,data:[],type:$e.FLOAT},size:2,update:function($,Ee,Se,Re){var Ye=$.version===Mc["GAODE2.x"]?$.originCoordinates[0][Re]:Se,St=(0,Mr.Z)(Ye,2),vt=St[0],Ut=St[1];return[(vt-u)/I,(Ut-f)/P]}}})}},{key:"loadTexture",value:function(){var r=this,o=this.layer.getLayerConfig(),u=o.waterTexture,f=this.rendererService.createTexture2D;this.texture=f({height:0,width:0});var g=new Image;g.crossOrigin="",u?(console.warn("L7 recommend\uFF1Ahttps://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*EojwT4VzSiYAAAAAAAAAAAAAARQnAQ"),g.src=u):g.src="https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*EojwT4VzSiYAAAAAAAAAAAAAARQnAQ",g.onload=function(){r.texture=f({data:g,width:g.width,height:g.height,wrapS:$e.MIRRORED_REPEAT,wrapT:$e.MIRRORED_REPEAT,min:$e.LINEAR,mag:$e.LINEAR}),r.layerService.reRender()}}}]),t}(Sl),$4={fill:I4,line:qx,extrude:E4,text:bb,point_fill:nb,point_image:ib,point_normal:ob,point_extrude:tb,water:W4,ocean:L4,tile:Z4},X4=$4;function Y4(e){var i=K4();return function(){var n=(0,rr.Z)(e),r;if(i){var o=(0,rr.Z)(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return(0,jn.Z)(this,r)}}function K4(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var Ib=function(e){(0,ui.Z)(t,e);var i=Y4(t);function t(){var n;(0,Ur.Z)(this,t);for(var r=arguments.length,o=new Array(r),u=0;u<r;u++)o[u]=arguments[u];return n=i.call.apply(i,[this].concat(o)),(0,He.Z)((0,er.Z)(n),"type","PolygonLayer"),n}return(0,Jr.Z)(t,[{key:"buildModels",value:function(){var n=(0,An.Z)(Nt().mark(function o(){var u;return Nt().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return u=this.getModelType(),this.layerModel=new X4[u](this),g.next=4,this.initLayerModels();case 4:case"end":return g.stop()}},o,this)}));function r(){return n.apply(this,arguments)}return r}()},{key:"getModelType",value:function(){var r,o=this.styleAttributeService.getLayerStyleAttribute("shape"),u=o==null||(r=o.scale)===null||r===void 0?void 0:r.field;return u==="fill"?"fill":u==="extrude"?"extrude":u==="water"?"water":u==="ocean"?"ocean":u==="line"?"line":u==="tile"?"tile":this.getPointModelType()}},{key:"getPointModelType",value:function(){var r=this.getEncodedData(),o=this.getLayerConfig(),u=o.shape2d,f=o.shape3d,g=this.iconService.getIconMap(),x=r.find(function(P){return P.hasOwnProperty("shape")});if(x){var I=x.shape;return I==="dot"?"point_normal":(u==null?void 0:u.indexOf(I))!==-1?"point_fill":(f==null?void 0:f.indexOf(I))!==-1?"point_extrude":g.hasOwnProperty(I)?"point_image":"text"}else return"fill"}}]),t}($v);function Q4(e){var i=J4();return function(){var n=(0,rr.Z)(e),r;if(i){var o=(0,rr.Z)(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return(0,jn.Z)(this,r)}}function J4(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var q4=`uniform float u_opacity : 1.0;
uniform vec4 u_color;

void main() {
  gl_FragColor = u_color;
  gl_FragColor.a *= u_opacity;
}
`,eI=`attribute vec3 a_Position;
uniform mat4 u_ModelMatrix;
uniform mat4 u_Mvp;

#pragma include "projection"

void main() {
  vec4 project_pos = project_position(vec4(a_Position, 1.0));

  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x
    gl_Position = u_Mvp * (vec4(project_pos.xyz, 1.0));
  } else {
    gl_Position = project_common_position_to_clipspace(vec4(project_pos.xyz, 1.0));
  }
}

`,tI=function(e){(0,ui.Z)(t,e);var i=Q4(t);function t(){return(0,Ur.Z)(this,t),i.apply(this,arguments)}return(0,Jr.Z)(t,[{key:"getUninforms",value:function(){var r=this.layer.getLayerConfig(),o=r.opacity,u=o===void 0?0:o,f=r.color,g=f===void 0?"#000":f;return{u_opacity:(0,Wr.isNumber)(u)?u:0,u_color:co(g)}}},{key:"initModels",value:function(){var n=(0,An.Z)(Nt().mark(function o(){return Nt().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return f.next=2,this.buildModels();case 2:return f.abrupt("return",f.sent);case 3:case"end":return f.stop()}},o,this)}));function r(){return n.apply(this,arguments)}return r}()},{key:"buildModels",value:function(){var n=(0,An.Z)(Nt().mark(function o(){var u;return Nt().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return g.next=2,this.layer.buildLayerModel({moduleName:"mask",vertexShader:eI,fragmentShader:q4,triangulation:M0,depth:{enable:!1},blend:this.getBlend(),stencil:{enable:!0,mask:255,func:{cmp:$e.ALWAYS,ref:1,mask:255},opFront:{fail:$e.REPLACE,zfail:$e.REPLACE,zpass:$e.REPLACE}},pick:!1});case 2:return u=g.sent,g.abrupt("return",[u]);case 4:case"end":return g.stop()}},o,this)}));function r(){return n.apply(this,arguments)}return r}()},{key:"clearModels",value:function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;r&&this.layerService.clear()}},{key:"registerBuiltinAttributes",value:function(){return""}}]),t}(Sl),rI={fill:tI},nI=rI;function iI(e){var i=aI();return function(){var n=(0,rr.Z)(e),r;if(i){var o=(0,rr.Z)(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return(0,jn.Z)(this,r)}}function aI(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var Jg=function(e){(0,ui.Z)(t,e);var i=iI(t);function t(){var n;(0,Ur.Z)(this,t);for(var r=arguments.length,o=new Array(r),u=0;u<r;u++)o[u]=arguments[u];return n=i.call.apply(i,[this].concat(o)),(0,He.Z)((0,er.Z)(n),"type","MaskLayer"),n}return(0,Jr.Z)(t,[{key:"buildModels",value:function(){var n=(0,An.Z)(Nt().mark(function o(){var u;return Nt().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return u=this.getModelType(),this.layerModel=new nI[u](this),g.next=4,this.initLayerModels();case 4:case"end":return g.stop()}},o,this)}));function r(){return n.apply(this,arguments)}return r}()},{key:"getModelType",value:function(){return"fill"}}]),t}($v),Ob,Rb,Pb,kb,Im,Lb,Db,oI=(Ob=(0,Ki.b2)(),Rb=(0,Ki.f3)(Ln.IMapService),Pb=(0,Ki.f3)(Ln.IFontService),Ob(kb=(Im=function(){function e(){(0,Ur.Z)(this,e),Bs(this,"mapService",Lb,this),Bs(this,"fontService",Db,this)}return(0,Jr.Z)(e,[{key:"apply",value:function(t,n){var r=this,o=n.styleAttributeService;t.hooks.init.tapPromise("DataMappingPlugin",(0,An.Z)(Nt().mark(function u(){return Nt().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:r.generateMaping(t,{styleAttributeService:o});case 1:case"end":return g.stop()}},u)}))),t.hooks.beforeRenderData.tapPromise("DataMappingPlugin",function(){var u=(0,An.Z)(Nt().mark(function f(g){return Nt().wrap(function(I){for(;;)switch(I.prev=I.next){case 0:if(g){I.next=2;break}return I.abrupt("return",g);case 2:return t.dataState.dataMappingNeedUpdate=!1,r.generateMaping(t,{styleAttributeService:o}),I.abrupt("return",!0);case 5:case"end":return I.stop()}},f)}));return function(f){return u.apply(this,arguments)}}()),t.hooks.beforeRender.tap("DataMappingPlugin",function(){var u=t.getSource();if(!(t.layerModelNeedUpdate||!u||!u.inited)){var f=o.getLayerStyleAttributes()||[],g=o.getLayerStyleAttribute("filter"),x=u.data.dataArray;if(!(Array.isArray(x)&&x.length===0)){var I=f.filter(function(Ee){return Ee.needRemapping}),P=x;if(g!=null&&g.needRemapping&&g!==null&&g!==void 0&&g.scale&&(P=x.filter(function(Ee){return r.applyAttributeMapping(g,Ee)[0]})),I.length)if(g!=null&&g.needRemapping){var G=r.mapping(t,f,P,void 0);t.setEncodedData(G),g.needRemapping=!1}else{var $=r.mapping(t,I,P,t.getEncodedData());t.setEncodedData($)}}}})}},{key:"generateMaping",value:function(t,n){var r=this,o=n.styleAttributeService,u=o.getLayerStyleAttributes()||[],f=o.getLayerStyleAttribute("filter"),g=t.getSource().data.dataArray,x=g;f!=null&&f.scale&&(x=g.filter(function(P){return r.applyAttributeMapping(f,P)[0]})),x=t.processData(x);var I=this.mapping(t,u,x,void 0);t.setEncodedData(I),t.emit("dataUpdate",null)}},{key:"mapping",value:function(t,n,r,o){var u=this,f=t.getLayerConfig(),g=f.arrow,x=g===void 0?{enable:!1}:g,I=n.filter(function(G){return G.scale!==void 0}),P=r.map(function(G,$){var Ee=o?o[$]:{},Se=(0,oe.Z)({id:G._id,coordinates:G.coordinates},Ee);if(I.forEach(function(St){var vt=u.applyAttributeMapping(St,G);St.needRemapping=!1,St.name==="color"&&(vt=vt.map(function(Ut){return co(Ut)})),Se[St.name]=Array.isArray(vt)&&vt.length===1?vt[0]:vt,St.name==="shape"&&(Se.shape=u.fontService.getIconFontKey(Se[St.name]))}),x.enable&&(Se.shape==="line"||Se.shape==="halfLine")){var Re=Se.coordinates;if(t.arrowInsertCount<t.encodeDataLength){var Ye=u.getArrowPoints(Re[0],Re[1]);Se.coordinates.splice(1,0,Ye,Ye),t.arrowInsertCount++}}return Se});return this.adjustData2Amap2Coordinates(P,t),this.adjustData2SimpleCoordinates(P),P}},{key:"adjustData2Amap2Coordinates",value:function(t,n){var r=this;if(t.length>0&&this.mapService.version===Mc["GAODE2.x"]){var o=n.coordCenter||n.getSource().center;typeof t[0].coordinates[0]=="number"?t.filter(function(u){return!u.originCoordinates}).map(function(u){u.version=Mc["GAODE2.x"],u.originCoordinates=(0,Wr.cloneDeep)(u.coordinates),u.coordinates=r.mapService.lngLatToCoordByLayer(u.coordinates,o)}):t.filter(function(u){return!u.originCoordinates}).map(function(u){u.version=Mc["GAODE2.x"],u.originCoordinates=(0,Wr.cloneDeep)(u.coordinates),u.coordinates=r.mapService.lngLatToCoordsByLayer(u.coordinates,o)})}}},{key:"adjustData2SimpleCoordinates",value:function(t){var n=this;t.length>0&&this.mapService.version===Mc.SIMPLE&&t.map(function(r){r.simpleCoordinate||(r.coordinates=n.unProjectCoordinates(r.coordinates),r.simpleCoordinate=!0)})}},{key:"unProjectCoordinates",value:function(t){var n=this;if(typeof t[0]=="number")return this.mapService.simpleMapCoord.unproject(t);if(t[0]&&t[0][0]instanceof Array){var r=[];return t.map(function(u){var f=[];u.map(function(g){f.push(n.mapService.simpleMapCoord.unproject(g))}),r.push(f)}),r}else{var o=[];return t.map(function(u){o.push(n.mapService.simpleMapCoord.unproject(u))}),o}}},{key:"applyAttributeMapping",value:function(t,n){var r;if(!t.scale)return[];var o=(t==null||(r=t.scale)===null||r===void 0?void 0:r.scalers)||[],u=[];o.forEach(function(g){var x,I=g.field;(n.hasOwnProperty(I)||((x=t.scale)===null||x===void 0?void 0:x.type)==="variable")&&u.push(n[I])});var f=t.mapping?t.mapping(u):[];return f}},{key:"getArrowPoints",value:function(t,n){var r=[n[0]-t[0],n[1]-t[1]],o=fu(r),u=[t[0]+o[0]*1e-4,t[1]+o[1]*1e-4];return u}}]),e}(),Lb=Ds(Im.prototype,"mapService",[Rb],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Db=Ds(Im.prototype,"fontService",[Pb],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Im))||kb),Fb,Nb,sI=(Fb=(0,Ki.b2)(),Fb(Nb=function(){function e(){(0,Ur.Z)(this,e)}return(0,Jr.Z)(e,[{key:"apply",value:function(t){var n=this;this.mapService=t.getContainer().get(Ln.IMapService),t.hooks.init.tapPromise("DataSourcePlugin",(0,An.Z)(Nt().mark(function r(){var o,u,f,g;return Nt().wrap(function(I){for(;;)switch(I.prev=I.next){case 0:if(o=t.getSource(),o||(u=t.sourceOption||t.defaultSourceConfig,f=u.data,g=u.options,o=new Bg(f,g),t.setSource(o)),!o.inited){I.next=6;break}n.updateClusterData(t),I.next=8;break;case 6:return I.next=8,new Promise(function(P){o.on("update",function(G){G.type==="inited"&&n.updateClusterData(t),P(null)})});case 8:case"end":return I.stop()}},r)}))),t.hooks.beforeRenderData.tapPromise("DataSourcePlugin",(0,An.Z)(Nt().mark(function r(){var o,u;return Nt().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return o=n.updateClusterData(t),u=t.dataState.dataSourceNeedUpdate,t.dataState.dataSourceNeedUpdate=!1,g.abrupt("return",o||u);case 4:case"end":return g.stop()}},r)})))}},{key:"updateClusterData",value:function(t){if(t.isTileLayer||t.tileLayer||!t.getSource())return!1;var n=t.getSource(),r=n.cluster,o=n.clusterOptions.zoom,u=o===void 0?0:o,f=this.mapService.getZoom()-1,g=t.dataState.dataSourceNeedUpdate;return r&&g&&n.updateClusterData(Math.floor(f)),r&&Math.abs(t.clusterZoom-f)>=1?(u!==Math.floor(f)&&n.updateClusterData(Math.floor(f)),t.clusterZoom=f,!0):!1}}]),e}())||Nb);function qg(e,i){return e<i?-1:e>i?1:e>=i?0:NaN}function Bb(e){return e.length===1&&(e=uI(e)),{left:function(i,t,n,r){for(n==null&&(n=0),r==null&&(r=i.length);n<r;){var o=n+r>>>1;e(i[o],t)<0?n=o+1:r=o}return n},right:function(i,t,n,r){for(n==null&&(n=0),r==null&&(r=i.length);n<r;){var o=n+r>>>1;e(i[o],t)>0?r=o:n=o+1}return n}}}function uI(e){return function(i,t){return qg(e(i),t)}}var zb=Bb(qg),lI=zb.right,ak=zb.left,Om=lI;function Ub(e,i){var t=e.length,n=-1,r,o,u;if(i==null){for(;++n<t;)if((r=e[n])!=null&&r>=r)for(o=u=r;++n<t;)(r=e[n])!=null&&(o>r&&(o=r),u<r&&(u=r))}else for(;++n<t;)if((r=i(e[n],n,e))!=null&&r>=r)for(o=u=r;++n<t;)(r=i(e[n],n,e))!=null&&(o>r&&(o=r),u<r&&(u=r));return[o,u]}var Zb=Array.prototype,ok=Zb.slice,sk=Zb.map,ey=Math.sqrt(50),ty=Math.sqrt(10),ry=Math.sqrt(2);function jb(e,i,t){var n,r=-1,o,u,f;if(i=+i,e=+e,t=+t,e===i&&t>0)return[e];if((n=i<e)&&(o=e,e=i,i=o),(f=Rm(e,i,t))===0||!isFinite(f))return[];if(f>0)for(e=Math.ceil(e/f),i=Math.floor(i/f),u=new Array(o=Math.ceil(i-e+1));++r<o;)u[r]=(e+r)*f;else for(e=Math.floor(e*f),i=Math.ceil(i*f),u=new Array(o=Math.ceil(e-i+1));++r<o;)u[r]=(e-r)/f;return n&&u.reverse(),u}function Rm(e,i,t){var n=(i-e)/Math.max(0,t),r=Math.floor(Math.log(n)/Math.LN10),o=n/Math.pow(10,r);return r>=0?(o>=ey?10:o>=ty?5:o>=ry?2:1)*Math.pow(10,r):-Math.pow(10,-r)/(o>=ey?10:o>=ty?5:o>=ry?2:1)}function ny(e,i,t){var n=Math.abs(i-e)/Math.max(0,t),r=Math.pow(10,Math.floor(Math.log(n)/Math.LN10)),o=n/r;return o>=ey?r*=10:o>=ty?r*=5:o>=ry&&(r*=2),i<e?-r:r}function uk(){var e=identity,i=extent,t=sturges;function n(r){var o,u=r.length,f,g=new Array(u);for(o=0;o<u;++o)g[o]=e(r[o],o,r);var x=i(g),I=x[0],P=x[1],G=t(g,I,P);Array.isArray(G)||(G=tickStep(I,P,G),G=range(Math.ceil(I/G)*G,P,G));for(var $=G.length;G[0]<=I;)G.shift(),--$;for(;G[$-1]>P;)G.pop(),--$;var Ee=new Array($+1),Se;for(o=0;o<=$;++o)Se=Ee[o]=[],Se.x0=o>0?G[o-1]:I,Se.x1=o<$?G[o]:P;for(o=0;o<u;++o)f=g[o],I<=f&&f<=P&&Ee[bisect(G,f,0,$)].push(r[o]);return Ee}return n.value=function(r){return arguments.length?(e=typeof r=="function"?r:constant(r),n):e},n.domain=function(r){return arguments.length?(i=typeof r=="function"?r:constant([r[0],r[1]]),n):i},n.thresholds=function(r){return arguments.length?(t=typeof r=="function"?r:Array.isArray(r)?constant(slice.call(r)):constant(r),n):t},n}function lk(e,i,t){return e=map.call(e,number).sort(ascending),Math.ceil((t-i)/(2*(quantile(e,.75)-quantile(e,.25))*Math.pow(e.length,-.3333333333333333)))}function cI(e){return e===null?NaN:+e}function fI(e,i,t){if(t==null&&(t=cI),!!(n=e.length)){if((i=+i)<=0||n<2)return+t(e[0],0,e);if(i>=1)return+t(e[n-1],n-1,e);var n,r=(n-1)*i,o=Math.floor(r),u=+t(e[o],o,e),f=+t(e[o+1],o+1,e);return u+(f-u)*(r-o)}}function Vb(e,i,t,n,r){var o=e*e,u=o*e;return((1-3*e+3*o-u)*i+(4-6*o+3*u)*t+(1+3*e+3*o-3*u)*n+u*r)/6}function pI(e){var i=e.length-1;return function(t){var n=t<=0?t=0:t>=1?(t=1,i-1):Math.floor(t*i),r=e[n],o=e[n+1],u=n>0?e[n-1]:2*r-o,f=n<i-1?e[n+2]:2*o-r;return Vb((t-n/i)*i,u,r,o,f)}}function hI(e){var i=e.length;return function(t){var n=Math.floor(((t%=1)<0?++t:t)*i),r=e[(n+i-1)%i],o=e[n%i],u=e[(n+1)%i],f=e[(n+2)%i];return Vb((t-n/i)*i,r,o,u,f)}}function iy(e){return function(){return e}}function Gb(e,i){return function(t){return e+t*i}}function dI(e,i,t){return e=Math.pow(e,t),i=Math.pow(i,t)-e,t=1/t,function(n){return Math.pow(e+n*i,t)}}function ck(e,i){var t=i-e;return t?Gb(e,t>180||t<-180?t-360*Math.round(t/360):t):constant(isNaN(e)?i:e)}function vI(e){return(e=+e)==1?Hb:function(i,t){return t-i?dI(i,t,e):iy(isNaN(i)?t:i)}}function Hb(e,i){var t=i-e;return t?Gb(e,t):iy(isNaN(e)?i:e)}var Wb=function e(i){var t=vI(i);function n(r,o){var u=t((r=Ga(r)).r,(o=Ga(o)).r),f=t(r.g,o.g),g=t(r.b,o.b),x=Hb(r.opacity,o.opacity);return function(I){return r.r=u(I),r.g=f(I),r.b=g(I),r.opacity=x(I),r+""}}return n.gamma=e,n}(1);function $b(e){return function(i){var t=i.length,n=new Array(t),r=new Array(t),o=new Array(t),u,f;for(u=0;u<t;++u)f=Ga(i[u]),n[u]=f.r||0,r[u]=f.g||0,o[u]=f.b||0;return n=e(n),r=e(r),o=e(o),f.opacity=1,function(g){return f.r=n(g),f.g=r(g),f.b=o(g),f+""}}}var mI=$b(pI),fk=$b(hI),Nh="$";function Pm(){}Pm.prototype=Xb.prototype={constructor:Pm,has:function(e){return Nh+e in this},get:function(e){return this[Nh+e]},set:function(e,i){return this[Nh+e]=i,this},remove:function(e){var i=Nh+e;return i in this&&delete this[i]},clear:function(){for(var e in this)e[0]===Nh&&delete this[e]},keys:function(){var e=[];for(var i in this)i[0]===Nh&&e.push(i.slice(1));return e},values:function(){var e=[];for(var i in this)i[0]===Nh&&e.push(this[i]);return e},entries:function(){var e=[];for(var i in this)i[0]===Nh&&e.push({key:i.slice(1),value:this[i]});return e},size:function(){var e=0;for(var i in this)i[0]===Nh&&++e;return e},empty:function(){for(var e in this)if(e[0]===Nh)return!1;return!0},each:function(e){for(var i in this)i[0]===Nh&&e(this[i],i.slice(1),this)}};function Xb(e,i){var t=new Pm;if(e instanceof Pm)e.each(function(f,g){t.set(g,f)});else if(Array.isArray(e)){var n=-1,r=e.length,o;if(i==null)for(;++n<r;)t.set(n,e[n]);else for(;++n<r;)t.set(i(o=e[n],n,e),o)}else if(e)for(var u in e)t.set(u,e[u]);return t}var ay=Xb;function pk(){var e=[],i=[],t,n,r;function o(f,g,x,I){if(g>=e.length)return t!=null&&f.sort(t),n!=null?n(f):f;for(var P=-1,G=f.length,$=e[g++],Ee,Se,Re=map(),Ye,St=x();++P<G;)(Ye=Re.get(Ee=$(Se=f[P])+""))?Ye.push(Se):Re.set(Ee,[Se]);return Re.each(function(vt,Ut){I(St,Ut,o(vt,g,x,I))}),St}function u(f,g){if(++g>e.length)return f;var x,I=i[g-1];return n!=null&&g>=e.length?x=f.entries():(x=[],f.each(function(P,G){x.push({key:G,values:u(P,g)})})),I!=null?x.sort(function(P,G){return I(P.key,G.key)}):x}return r={object:function(f){return o(f,0,gI,yI)},map:function(f){return o(f,0,Yb,Kb)},entries:function(f){return u(o(f,0,Yb,Kb),0)},key:function(f){return e.push(f),r},sortKeys:function(f){return i[e.length-1]=f,r},sortValues:function(f){return t=f,r},rollup:function(f){return n=f,r}}}function gI(){return{}}function yI(e,i,t){e[i]=t}function Yb(){return map()}function Kb(e,i,t){e.set(i,t)}function km(){}var _v=ay.prototype;km.prototype=_I.prototype={constructor:km,has:_v.has,add:function(e){return e+="",this[Nh+e]=e,this},remove:_v.remove,clear:_v.clear,values:_v.keys,size:_v.size,empty:_v.empty,each:_v.each};function _I(e,i){var t=new km;if(e instanceof km)e.each(function(o){t.add(o)});else if(e){var n=-1,r=e.length;if(i==null)for(;++n<r;)t.add(e[n]);else for(;++n<r;)t.add(i(e[n],n,e))}return t}var hk=null,Qb=Array.prototype,Lm=Qb.map,xv=Qb.slice;function qd(e,i){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(i).domain(e);break}return this}function Jb(e,i){switch(arguments.length){case 0:break;case 1:this.interpolator(e);break;default:this.interpolator(i).domain(e);break}return this}var qb={name:"implicit"};function Dm(){var e=ay(),i=[],t=[],n=qb;function r(o){var u=o+"",f=e.get(u);if(!f){if(n!==qb)return n;e.set(u,f=i.push(o))}return t[(f-1)%t.length]}return r.domain=function(o){if(!arguments.length)return i.slice();i=[],e=ay();for(var u=-1,f=o.length,g,x;++u<f;)e.has(x=(g=o[u])+"")||e.set(x,i.push(g));return r},r.range=function(o){return arguments.length?(t=xv.call(o),r):t.slice()},r.unknown=function(o){return arguments.length?(n=o,r):n},r.copy=function(){return Dm(i,t).unknown(n)},qd.apply(r,arguments),r}function e2(){var e=ordinal().unknown(void 0),i=e.domain,t=e.range,n=[0,1],r,o,u=!1,f=0,g=0,x=.5;delete e.unknown;function I(){var P=i().length,G=n[1]<n[0],$=n[G-0],Ee=n[1-G];r=(Ee-$)/Math.max(1,P-f+g*2),u&&(r=Math.floor(r)),$+=(Ee-$-r*(P-f))*x,o=r*(1-f),u&&($=Math.round($),o=Math.round(o));var Se=sequence(P).map(function(Re){return $+r*Re});return t(G?Se.reverse():Se)}return e.domain=function(P){return arguments.length?(i(P),I()):i()},e.range=function(P){return arguments.length?(n=[+P[0],+P[1]],I()):n.slice()},e.rangeRound=function(P){return n=[+P[0],+P[1]],u=!0,I()},e.bandwidth=function(){return o},e.step=function(){return r},e.round=function(P){return arguments.length?(u=!!P,I()):u},e.padding=function(P){return arguments.length?(f=Math.min(1,g=+P),I()):f},e.paddingInner=function(P){return arguments.length?(f=Math.min(1,P),I()):f},e.paddingOuter=function(P){return arguments.length?(g=+P,I()):g},e.align=function(P){return arguments.length?(x=Math.max(0,Math.min(1,P)),I()):x},e.copy=function(){return e2(i(),n).round(u).paddingInner(f).paddingOuter(g).align(x)},initRange.apply(I(),arguments)}function t2(e){var i=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return t2(i())},e}function dk(){return t2(e2.apply(null,arguments).paddingInner(1))}function vk(e,i){return(isNumberArray(i)?numberArray:r2)(e,i)}function r2(e,i){var t=i?i.length:0,n=e?Math.min(t,e.length):0,r=new Array(n),o=new Array(t),u;for(u=0;u<n;++u)r[u]=uy(e[u],i[u]);for(;u<t;++u)o[u]=i[u];return function(f){for(u=0;u<n;++u)o[u]=r[u](f);return o}}function xI(e,i){var t=new Date;return e=+e,i=+i,function(n){return t.setTime(e*(1-n)+i*n),t}}function Fm(e,i){return e=+e,i=+i,function(t){return e*(1-t)+i*t}}function bI(e,i){var t={},n={},r;(e===null||typeof e!="object")&&(e={}),(i===null||typeof i!="object")&&(i={});for(r in i)r in e?t[r]=uy(e[r],i[r]):n[r]=i[r];return function(o){for(r in t)n[r]=t[r](o);return n}}var oy=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,sy=new RegExp(oy.source,"g");function EI(e){return function(){return e}}function SI(e){return function(i){return e(i)+""}}function wI(e,i){var t=oy.lastIndex=sy.lastIndex=0,n,r,o,u=-1,f=[],g=[];for(e=e+"",i=i+"";(n=oy.exec(e))&&(r=sy.exec(i));)(o=r.index)>t&&(o=i.slice(t,o),f[u]?f[u]+=o:f[++u]=o),(n=n[0])===(r=r[0])?f[u]?f[u]+=r:f[++u]=r:(f[++u]=null,g.push({i:u,x:Fm(n,r)})),t=sy.lastIndex;return t<i.length&&(o=i.slice(t),f[u]?f[u]+=o:f[++u]=o),f.length<2?g[0]?SI(g[0].x):EI(i):(i=g.length,function(x){for(var I=0,P;I<i;++I)f[(P=g[I]).i]=P.x(x);return f.join("")})}function AI(e,i){i||(i=[]);var t=e?Math.min(i.length,e.length):0,n=i.slice(),r;return function(o){for(r=0;r<t;++r)n[r]=e[r]*(1-o)+i[r]*o;return n}}function CI(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function uy(e,i){var t=typeof i,n;return i==null||t==="boolean"?iy(i):(t==="number"?Fm:t==="string"?(n=Ei(i))?(i=n,Wb):wI:i instanceof Ei?Wb:i instanceof Date?xI:CI(i)?AI:Array.isArray(i)?r2:typeof i.valueOf!="function"&&typeof i.toString!="function"||isNaN(i)?bI:Fm)(e,i)}function TI(e,i){return e=+e,i=+i,function(t){return Math.round(e*(1-t)+i*t)}}function MI(e){return function(){return e}}function ly(e){return+e}var n2=[0,1];function Xp(e){return e}function cy(e,i){return(i-=e=+e)?function(t){return(t-e)/i}:MI(isNaN(i)?NaN:.5)}function i2(e){var i=e[0],t=e[e.length-1],n;return i>t&&(n=i,i=t,t=n),function(r){return Math.max(i,Math.min(t,r))}}function II(e,i,t){var n=e[0],r=e[1],o=i[0],u=i[1];return r<n?(n=cy(r,n),o=t(u,o)):(n=cy(n,r),o=t(o,u)),function(f){return o(n(f))}}function OI(e,i,t){var n=Math.min(e.length,i.length)-1,r=new Array(n),o=new Array(n),u=-1;for(e[n]<e[0]&&(e=e.slice().reverse(),i=i.slice().reverse());++u<n;)r[u]=cy(e[u],e[u+1]),o[u]=t(i[u],i[u+1]);return function(f){var g=Om(e,f,1,n)-1;return o[g](r[g](f))}}function Nm(e,i){return i.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function fy(){var e=n2,i=n2,t=uy,n,r,o,u=Xp,f,g,x;function I(){return f=Math.min(e.length,i.length)>2?OI:II,g=x=null,P}function P(G){return isNaN(G=+G)?o:(g||(g=f(e.map(n),i,t)))(n(u(G)))}return P.invert=function(G){return u(r((x||(x=f(i,e.map(n),Fm)))(G)))},P.domain=function(G){return arguments.length?(e=Lm.call(G,ly),u===Xp||(u=i2(e)),I()):e.slice()},P.range=function(G){return arguments.length?(i=xv.call(G),I()):i.slice()},P.rangeRound=function(G){return i=xv.call(G),t=TI,I()},P.clamp=function(G){return arguments.length?(u=G?i2(e):Xp,P):u!==Xp},P.interpolate=function(G){return arguments.length?(t=G,I()):t},P.unknown=function(G){return arguments.length?(o=G,P):o},function(G,$){return n=G,r=$,I()}}function a2(e,i){return fy()(e,i)}var RI=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Bm(e){if(!(i=RI.exec(e)))throw new Error("invalid format: "+e);var i;return new py({fill:i[1],align:i[2],sign:i[3],symbol:i[4],zero:i[5],width:i[6],comma:i[7],precision:i[8]&&i[8].slice(1),trim:i[9],type:i[10]})}Bm.prototype=py.prototype;function py(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}py.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function PI(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function zm(e,i){if((t=(e=i?e.toExponential(i-1):e.toExponential()).indexOf("e"))<0)return null;var t,n=e.slice(0,t);return[n.length>1?n[0]+n.slice(2):n,+e.slice(t+1)]}function e0(e){return e=zm(Math.abs(e)),e?e[1]:NaN}function kI(e,i){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(e0(i)/3)))*3-e0(Math.abs(e)))}function LI(e,i){return function(t,n){for(var r=t.length,o=[],u=0,f=e[0],g=0;r>0&&f>0&&(g+f+1>n&&(f=Math.max(1,n-g)),o.push(t.substring(r-=f,r+f)),!((g+=f+1)>n));)f=e[u=(u+1)%e.length];return o.reverse().join(i)}}function DI(e){return function(i){return i.replace(/[0-9]/g,function(t){return e[+t]})}}function FI(e){e:for(var i=e.length,t=1,n=-1,r;t<i;++t)switch(e[t]){case".":n=r=t;break;case"0":n===0&&(n=t),r=t;break;default:if(!+e[t])break e;n>0&&(n=0);break}return n>0?e.slice(0,n)+e.slice(r+1):e}var o2;function NI(e,i){var t=zm(e,i);if(!t)return e+"";var n=t[0],r=t[1],o=r-(o2=Math.max(-8,Math.min(8,Math.floor(r/3)))*3)+1,u=n.length;return o===u?n:o>u?n+new Array(o-u+1).join("0"):o>0?n.slice(0,o)+"."+n.slice(o):"0."+new Array(1-o).join("0")+zm(e,Math.max(0,i+o-1))[0]}function s2(e,i){var t=zm(e,i);if(!t)return e+"";var n=t[0],r=t[1];return r<0?"0."+new Array(-r).join("0")+n:n.length>r+1?n.slice(0,r+1)+"."+n.slice(r+1):n+new Array(r-n.length+2).join("0")}var u2={"%":function(e,i){return(e*100).toFixed(i)},b:function(e){return Math.round(e).toString(2)},c:function(e){return e+""},d:PI,e:function(e,i){return e.toExponential(i)},f:function(e,i){return e.toFixed(i)},g:function(e,i){return e.toPrecision(i)},o:function(e){return Math.round(e).toString(8)},p:function(e,i){return s2(e*100,i)},r:s2,s:NI,X:function(e){return Math.round(e).toString(16).toUpperCase()},x:function(e){return Math.round(e).toString(16)}};function l2(e){return e}var c2=Array.prototype.map,f2=["y","z","a","f","p","n","\xB5","m","","k","M","G","T","P","E","Z","Y"];function BI(e){var i=e.grouping===void 0||e.thousands===void 0?l2:LI(c2.call(e.grouping,Number),e.thousands+""),t=e.currency===void 0?"":e.currency[0]+"",n=e.currency===void 0?"":e.currency[1]+"",r=e.decimal===void 0?".":e.decimal+"",o=e.numerals===void 0?l2:DI(c2.call(e.numerals,String)),u=e.percent===void 0?"%":e.percent+"",f=e.minus===void 0?"-":e.minus+"",g=e.nan===void 0?"NaN":e.nan+"";function x(P){P=Bm(P);var G=P.fill,$=P.align,Ee=P.sign,Se=P.symbol,Re=P.zero,Ye=P.width,St=P.comma,vt=P.precision,Ut=P.trim,Kt=P.type;Kt==="n"?(St=!0,Kt="g"):u2[Kt]||(vt===void 0&&(vt=12),Ut=!0,Kt="g"),(Re||G==="0"&&$==="=")&&(Re=!0,G="0",$="=");var Tr=Se==="$"?t:Se==="#"&&/[boxX]/.test(Kt)?"0"+Kt.toLowerCase():"",on=Se==="$"?n:/[%p]/.test(Kt)?u:"",dn=u2[Kt],vn=/[defgprs%]/.test(Kt);vt=vt===void 0?6:/[gprs]/.test(Kt)?Math.max(1,Math.min(21,vt)):Math.max(0,Math.min(20,vt));function si(ai){var Hi=Tr,wa=on,qa,zs,Ou;if(Kt==="c")wa=dn(ai)+wa,ai="";else{ai=+ai;var Ul=ai<0||1/ai<0;if(ai=isNaN(ai)?g:dn(Math.abs(ai),vt),Ut&&(ai=FI(ai)),Ul&&+ai==0&&Ee!=="+"&&(Ul=!1),Hi=(Ul?Ee==="("?Ee:f:Ee==="-"||Ee==="("?"":Ee)+Hi,wa=(Kt==="s"?f2[8+o2/3]:"")+wa+(Ul&&Ee==="("?")":""),vn){for(qa=-1,zs=ai.length;++qa<zs;)if(Ou=ai.charCodeAt(qa),48>Ou||Ou>57){wa=(Ou===46?r+ai.slice(qa+1):ai.slice(qa))+wa,ai=ai.slice(0,qa);break}}}St&&!Re&&(ai=i(ai,1/0));var Gl=Hi.length+ai.length+wa.length,Ic=Gl<Ye?new Array(Ye-Gl+1).join(G):"";switch(St&&Re&&(ai=i(Ic+ai,Ic.length?Ye-wa.length:1/0),Ic=""),$){case"<":ai=Hi+ai+wa+Ic;break;case"=":ai=Hi+Ic+ai+wa;break;case"^":ai=Ic.slice(0,Gl=Ic.length>>1)+Hi+ai+wa+Ic.slice(Gl);break;default:ai=Ic+Hi+ai+wa;break}return o(ai)}return si.toString=function(){return P+""},si}function I(P,G){var $=x((P=Bm(P),P.type="f",P)),Ee=Math.max(-8,Math.min(8,Math.floor(e0(G)/3)))*3,Se=Math.pow(10,-Ee),Re=f2[8+Ee/3];return function(Ye){return $(Se*Ye)+Re}}return{format:x,formatPrefix:I}}var Um,hy,p2;zI({decimal:".",thousands:",",grouping:[3],currency:["$",""],minus:"-"});function zI(e){return Um=BI(e),hy=Um.format,p2=Um.formatPrefix,Um}function UI(e,i){return e=Math.abs(e),i=Math.abs(i)-e,Math.max(0,e0(i)-e0(e))+1}function ZI(e){return Math.max(0,-e0(Math.abs(e)))}function jI(e,i,t,n){var r=ny(e,i,t),o;switch(n=Bm(n==null?",f":n),n.type){case"s":{var u=Math.max(Math.abs(e),Math.abs(i));return n.precision==null&&!isNaN(o=kI(r,u))&&(n.precision=o),p2(n,u)}case"":case"e":case"g":case"p":case"r":{n.precision==null&&!isNaN(o=UI(r,Math.max(Math.abs(e),Math.abs(i))))&&(n.precision=o-(n.type==="e"));break}case"f":case"%":{n.precision==null&&!isNaN(o=ZI(r))&&(n.precision=o-(n.type==="%")*2);break}}return hy(n)}function t0(e){var i=e.domain;return e.ticks=function(t){var n=i();return jb(n[0],n[n.length-1],t==null?10:t)},e.tickFormat=function(t,n){var r=i();return jI(r[0],r[r.length-1],t==null?10:t,n)},e.nice=function(t){t==null&&(t=10);var n=i(),r=0,o=n.length-1,u=n[r],f=n[o],g;return f<u&&(g=u,u=f,f=g,g=r,r=o,o=g),g=Rm(u,f,t),g>0?(u=Math.floor(u/g)*g,f=Math.ceil(f/g)*g,g=Rm(u,f,t)):g<0&&(u=Math.ceil(u*g)/g,f=Math.floor(f*g)/g,g=Rm(u,f,t)),g>0?(n[r]=Math.floor(u/g)*g,n[o]=Math.ceil(f/g)*g,i(n)):g<0&&(n[r]=Math.ceil(u*g)/g,n[o]=Math.floor(f*g)/g,i(n)),e},e}function h2(){var e=a2(Xp,Xp);return e.copy=function(){return Nm(e,h2())},qd.apply(e,arguments),t0(e)}function d2(e){var i;function t(n){return isNaN(n=+n)?i:n}return t.invert=t,t.domain=t.range=function(n){return arguments.length?(e=Lm.call(n,ly),t):e.slice()},t.unknown=function(n){return arguments.length?(i=n,t):i},t.copy=function(){return d2(e).unknown(i)},e=arguments.length?Lm.call(e,ly):[0,1],t0(t)}function v2(e,i){e=e.slice();var t=0,n=e.length-1,r=e[t],o=e[n],u;return o<r&&(u=t,t=n,n=u,u=r,r=o,o=u),e[t]=i.floor(r),e[n]=i.ceil(o),e}function m2(e){return Math.log(e)}function g2(e){return Math.exp(e)}function VI(e){return-Math.log(-e)}function GI(e){return-Math.exp(-e)}function HI(e){return isFinite(e)?+("1e"+e):e<0?0:e}function WI(e){return e===10?HI:e===Math.E?Math.exp:function(i){return Math.pow(e,i)}}function $I(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),function(i){return Math.log(i)/e})}function y2(e){return function(i){return-e(-i)}}function XI(e){var i=e(m2,g2),t=i.domain,n=10,r,o;function u(){return r=$I(n),o=WI(n),t()[0]<0?(r=y2(r),o=y2(o),e(VI,GI)):e(m2,g2),i}return i.base=function(f){return arguments.length?(n=+f,u()):n},i.domain=function(f){return arguments.length?(t(f),u()):t()},i.ticks=function(f){var g=t(),x=g[0],I=g[g.length-1],P;(P=I<x)&&(G=x,x=I,I=G);var G=r(x),$=r(I),Ee,Se,Re,Ye=f==null?10:+f,St=[];if(!(n%1)&&$-G<Ye){if(G=Math.round(G)-1,$=Math.round($)+1,x>0){for(;G<$;++G)for(Se=1,Ee=o(G);Se<n;++Se)if(Re=Ee*Se,!(Re<x)){if(Re>I)break;St.push(Re)}}else for(;G<$;++G)for(Se=n-1,Ee=o(G);Se>=1;--Se)if(Re=Ee*Se,!(Re<x)){if(Re>I)break;St.push(Re)}}else St=jb(G,$,Math.min($-G,Ye)).map(o);return P?St.reverse():St},i.tickFormat=function(f,g){if(g==null&&(g=n===10?".0e":","),typeof g!="function"&&(g=hy(g)),f===1/0)return g;f==null&&(f=10);var x=Math.max(1,n*f/i.ticks().length);return function(I){var P=I/o(Math.round(r(I)));return P*n<n-.5&&(P*=n),P<=x?g(I):""}},i.nice=function(){return t(v2(t(),{floor:function(f){return o(Math.floor(r(f)))},ceil:function(f){return o(Math.ceil(r(f)))}}))},i}function _2(){var e=XI(fy()).domain([1,10]);return e.copy=function(){return Nm(e,_2()).base(e.base())},qd.apply(e,arguments),e}function x2(e){return function(i){return Math.sign(i)*Math.log1p(Math.abs(i/e))}}function b2(e){return function(i){return Math.sign(i)*Math.expm1(Math.abs(i))*e}}function YI(e){var i=1,t=e(x2(i),b2(i));return t.constant=function(n){return arguments.length?e(x2(i=+n),b2(i)):i},linearish(t)}function KI(){var e=YI(transformer());return e.copy=function(){return copy(e,KI()).constant(e.constant())},initRange.apply(e,arguments)}function E2(e){return function(i){return i<0?-Math.pow(-i,e):Math.pow(i,e)}}function QI(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function JI(e){return e<0?-e*e:e*e}function qI(e){var i=e(Xp,Xp),t=1;function n(){return t===1?e(Xp,Xp):t===.5?e(QI,JI):e(E2(t),E2(1/t))}return i.exponent=function(r){return arguments.length?(t=+r,n()):t},t0(i)}function dy(){var e=qI(fy());return e.copy=function(){return Nm(e,dy()).exponent(e.exponent())},qd.apply(e,arguments),e}function mk(){return dy.apply(null,arguments).exponent(.5)}function S2(){var e=[],i=[],t=[],n;function r(){var u=0,f=Math.max(1,i.length);for(t=new Array(f-1);++u<f;)t[u-1]=fI(e,u/f);return o}function o(u){return isNaN(u=+u)?n:i[Om(t,u)]}return o.invertExtent=function(u){var f=i.indexOf(u);return f<0?[NaN,NaN]:[f>0?t[f-1]:e[0],f<t.length?t[f]:e[e.length-1]]},o.domain=function(u){if(!arguments.length)return e.slice();e=[];for(var f=0,g=u.length,x;f<g;++f)x=u[f],x!=null&&!isNaN(x=+x)&&e.push(x);return e.sort(qg),r()},o.range=function(u){return arguments.length?(i=xv.call(u),r()):i.slice()},o.unknown=function(u){return arguments.length?(n=u,o):n},o.quantiles=function(){return t.slice()},o.copy=function(){return S2().domain(e).range(i).unknown(n)},qd.apply(o,arguments)}function w2(){var e=0,i=1,t=1,n=[.5],r=[0,1],o;function u(g){return g<=g?r[Om(n,g,0,t)]:o}function f(){var g=-1;for(n=new Array(t);++g<t;)n[g]=((g+1)*i-(g-t)*e)/(t+1);return u}return u.domain=function(g){return arguments.length?(e=+g[0],i=+g[1],f()):[e,i]},u.range=function(g){return arguments.length?(t=(r=xv.call(g)).length-1,f()):r.slice()},u.invertExtent=function(g){var x=r.indexOf(g);return x<0?[NaN,NaN]:x<1?[e,n[0]]:x>=t?[n[t-1],i]:[n[x-1],n[x]]},u.unknown=function(g){return arguments.length&&(o=g),u},u.thresholds=function(){return n.slice()},u.copy=function(){return w2().domain([e,i]).range(r).unknown(o)},qd.apply(t0(u),arguments)}function A2(){var e=[.5],i=[0,1],t,n=1;function r(o){return o<=o?i[Om(e,o,0,n)]:t}return r.domain=function(o){return arguments.length?(e=xv.call(o),n=Math.min(e.length,i.length-1),r):e.slice()},r.range=function(o){return arguments.length?(i=xv.call(o),n=Math.min(e.length,i.length-1),r):i.slice()},r.invertExtent=function(o){var u=i.indexOf(o);return[e[u-1],e[u]]},r.unknown=function(o){return arguments.length?(t=o,r):t},r.copy=function(){return A2().domain(e).range(i).unknown(t)},qd.apply(r,arguments)}var vy=new Date,gy=new Date;function ih(e,i,t,n){function r(o){return e(o=arguments.length===0?new Date:new Date(+o)),o}return r.floor=function(o){return e(o=new Date(+o)),o},r.ceil=function(o){return e(o=new Date(o-1)),i(o,1),e(o),o},r.round=function(o){var u=r(o),f=r.ceil(o);return o-u<f-o?u:f},r.offset=function(o,u){return i(o=new Date(+o),u==null?1:Math.floor(u)),o},r.range=function(o,u,f){var g=[],x;if(o=r.ceil(o),f=f==null?1:Math.floor(f),!(o<u)||!(f>0))return g;do g.push(x=new Date(+o)),i(o,f),e(o);while(x<o&&o<u);return g},r.filter=function(o){return ih(function(u){if(u>=u)for(;e(u),!o(u);)u.setTime(u-1)},function(u,f){if(u>=u)if(f<0)for(;++f<=0;)for(;i(u,-1),!o(u););else for(;--f>=0;)for(;i(u,1),!o(u););})},t&&(r.count=function(o,u){return vy.setTime(+o),gy.setTime(+u),e(vy),e(gy),Math.floor(t(vy,gy))},r.every=function(o){return o=Math.floor(o),!isFinite(o)||!(o>0)?null:o>1?r.filter(n?function(u){return n(u)%o===0}:function(u){return r.count(0,u)%o===0}):r}),r}var yy=ih(function(e){e.setMonth(0,1),e.setHours(0,0,0,0)},function(e,i){e.setFullYear(e.getFullYear()+i)},function(e,i){return i.getFullYear()-e.getFullYear()},function(e){return e.getFullYear()});yy.every=function(e){return!isFinite(e=Math.floor(e))||!(e>0)?null:ih(function(i){i.setFullYear(Math.floor(i.getFullYear()/e)*e),i.setMonth(0,1),i.setHours(0,0,0,0)},function(i,t){i.setFullYear(i.getFullYear()+t*e)})};var r0=yy,gk=yy.range,C2=ih(function(e){e.setDate(1),e.setHours(0,0,0,0)},function(e,i){e.setMonth(e.getMonth()+i)},function(e,i){return i.getMonth()-e.getMonth()+(i.getFullYear()-e.getFullYear())*12},function(e){return e.getMonth()}),eO=C2,yk=C2.range,Zm=1e3,I0=6e4,T2=36e5,M2=864e5,I2=6048e5;function bv(e){return ih(function(i){i.setDate(i.getDate()-(i.getDay()+7-e)%7),i.setHours(0,0,0,0)},function(i,t){i.setDate(i.getDate()+t*7)},function(i,t){return(t-i-(t.getTimezoneOffset()-i.getTimezoneOffset())*I0)/I2})}var _y=bv(0),jm=bv(1),tO=bv(2),rO=bv(3),n0=bv(4),nO=bv(5),iO=bv(6),_k=_y.range,xk=jm.range,bk=tO.range,Ek=rO.range,Sk=n0.range,wk=nO.range,Ak=iO.range,O2=ih(function(e){e.setHours(0,0,0,0)},function(e,i){e.setDate(e.getDate()+i)},function(e,i){return(i-e-(i.getTimezoneOffset()-e.getTimezoneOffset())*I0)/M2},function(e){return e.getDate()-1}),xy=O2,Ck=O2.range,R2=ih(function(e){e.setTime(e-e.getMilliseconds()-e.getSeconds()*Zm-e.getMinutes()*I0)},function(e,i){e.setTime(+e+i*T2)},function(e,i){return(i-e)/T2},function(e){return e.getHours()}),aO=R2,Tk=R2.range,P2=ih(function(e){e.setTime(e-e.getMilliseconds()-e.getSeconds()*Zm)},function(e,i){e.setTime(+e+i*I0)},function(e,i){return(i-e)/I0},function(e){return e.getMinutes()}),oO=P2,Mk=P2.range,k2=ih(function(e){e.setTime(e-e.getMilliseconds())},function(e,i){e.setTime(+e+i*Zm)},function(e,i){return(i-e)/Zm},function(e){return e.getUTCSeconds()}),sO=k2,Ik=k2.range,Vm=ih(function(){},function(e,i){e.setTime(+e+i)},function(e,i){return i-e});Vm.every=function(e){return e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?ih(function(i){i.setTime(Math.floor(i/e)*e)},function(i,t){i.setTime(+i+t*e)},function(i,t){return(t-i)/e}):Vm};var uO=Vm,Ok=Vm.range;function Ev(e){return ih(function(i){i.setUTCDate(i.getUTCDate()-(i.getUTCDay()+7-e)%7),i.setUTCHours(0,0,0,0)},function(i,t){i.setUTCDate(i.getUTCDate()+t*7)},function(i,t){return(t-i)/I2})}var L2=Ev(0),Gm=Ev(1),lO=Ev(2),cO=Ev(3),i0=Ev(4),fO=Ev(5),pO=Ev(6),Rk=L2.range,Pk=Gm.range,kk=lO.range,Lk=cO.range,Dk=i0.range,Fk=fO.range,Nk=pO.range,D2=ih(function(e){e.setUTCHours(0,0,0,0)},function(e,i){e.setUTCDate(e.getUTCDate()+i)},function(e,i){return(i-e)/M2},function(e){return e.getUTCDate()-1}),F2=D2,Bk=D2.range,by=ih(function(e){e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},function(e,i){e.setUTCFullYear(e.getUTCFullYear()+i)},function(e,i){return i.getUTCFullYear()-e.getUTCFullYear()},function(e){return e.getUTCFullYear()});by.every=function(e){return!isFinite(e=Math.floor(e))||!(e>0)?null:ih(function(i){i.setUTCFullYear(Math.floor(i.getUTCFullYear()/e)*e),i.setUTCMonth(0,1),i.setUTCHours(0,0,0,0)},function(i,t){i.setUTCFullYear(i.getUTCFullYear()+t*e)})};var O0=by,zk=by.range;function Ey(e){if(0<=e.y&&e.y<100){var i=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return i.setFullYear(e.y),i}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function Sy(e){if(0<=e.y&&e.y<100){var i=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return i.setUTCFullYear(e.y),i}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function R0(e,i,t){return{y:e,m:i,d:t,H:0,M:0,S:0,L:0}}function hO(e){var i=e.dateTime,t=e.date,n=e.time,r=e.periods,o=e.days,u=e.shortDays,f=e.months,g=e.shortMonths,x=P0(r),I=k0(r),P=P0(o),G=k0(o),$=P0(u),Ee=k0(u),Se=P0(f),Re=k0(f),Ye=P0(g),St=k0(g),vt={a:Ul,A:Gl,b:Ic,B:Eh,c:null,d:j2,e:j2,f:FO,g:WO,G:XO,H:kO,I:LO,j:DO,L:V2,m:NO,M:BO,p:W0,q:c0,Q:Y2,s:K2,S:zO,u:UO,U:ZO,V:jO,w:VO,W:GO,x:null,X:null,y:HO,Y:$O,Z:YO,"%":X2},Ut={a:$0,A:tg,b:Ly,B:rg,c:null,d:H2,e:H2,f:qO,g:l6,G:f6,H:KO,I:QO,j:JO,L:W2,m:e6,M:t6,p:g7,q:y7,Q:Y2,s:K2,S:r6,u:n6,U:i6,V:a6,w:o6,W:s6,x:null,X:null,y:u6,Y:c6,Z:p6,"%":X2},Kt={a:si,A:ai,b:Hi,B:wa,c:qa,d:U2,e:U2,f:IO,g:z2,G:B2,H:Z2,I:Z2,j:AO,L:MO,m:wO,M:CO,p:vn,q:SO,Q:RO,s:PO,S:TO,u:yO,U:_O,V:xO,w:gO,W:bO,x:zs,X:Ou,y:z2,Y:B2,Z:EO,"%":OO};vt.x=Tr(t,vt),vt.X=Tr(n,vt),vt.c=Tr(i,vt),Ut.x=Tr(t,Ut),Ut.X=Tr(n,Ut),Ut.c=Tr(i,Ut);function Tr(Wo,Wu){return function(Al){var za=[],Sh=-1,Oc=0,Rh=Wo.length,Ph,Cv,OS;for(Al instanceof Date||(Al=new Date(+Al));++Sh<Rh;)Wo.charCodeAt(Sh)===37&&(za.push(Wo.slice(Oc,Sh)),(Cv=N2[Ph=Wo.charAt(++Sh)])!=null?Ph=Wo.charAt(++Sh):Cv=Ph==="e"?" ":"0",(OS=Wu[Ph])&&(Ph=OS(Al,Cv)),za.push(Ph),Oc=Sh+1);return za.push(Wo.slice(Oc,Sh)),za.join("")}}function on(Wo,Wu){return function(Al){var za=R0(1900,void 0,1),Sh=dn(za,Wo,Al+="",0),Oc,Rh;if(Sh!=Al.length)return null;if("Q"in za)return new Date(za.Q);if("s"in za)return new Date(za.s*1e3+("L"in za?za.L:0));if(Wu&&!("Z"in za)&&(za.Z=0),"p"in za&&(za.H=za.H%12+za.p*12),za.m===void 0&&(za.m="q"in za?za.q:0),"V"in za){if(za.V<1||za.V>53)return null;"w"in za||(za.w=1),"Z"in za?(Oc=Sy(R0(za.y,0,1)),Rh=Oc.getUTCDay(),Oc=Rh>4||Rh===0?Gm.ceil(Oc):Gm(Oc),Oc=F2.offset(Oc,(za.V-1)*7),za.y=Oc.getUTCFullYear(),za.m=Oc.getUTCMonth(),za.d=Oc.getUTCDate()+(za.w+6)%7):(Oc=Ey(R0(za.y,0,1)),Rh=Oc.getDay(),Oc=Rh>4||Rh===0?jm.ceil(Oc):jm(Oc),Oc=xy.offset(Oc,(za.V-1)*7),za.y=Oc.getFullYear(),za.m=Oc.getMonth(),za.d=Oc.getDate()+(za.w+6)%7)}else("W"in za||"U"in za)&&("w"in za||(za.w="u"in za?za.u%7:"W"in za?1:0),Rh="Z"in za?Sy(R0(za.y,0,1)).getUTCDay():Ey(R0(za.y,0,1)).getDay(),za.m=0,za.d="W"in za?(za.w+6)%7+za.W*7-(Rh+5)%7:za.w+za.U*7-(Rh+6)%7);return"Z"in za?(za.H+=za.Z/100|0,za.M+=za.Z%100,Sy(za)):Ey(za)}}function dn(Wo,Wu,Al,za){for(var Sh=0,Oc=Wu.length,Rh=Al.length,Ph,Cv;Sh<Oc;){if(za>=Rh)return-1;if(Ph=Wu.charCodeAt(Sh++),Ph===37){if(Ph=Wu.charAt(Sh++),Cv=Kt[Ph in N2?Wu.charAt(Sh++):Ph],!Cv||(za=Cv(Wo,Al,za))<0)return-1}else if(Ph!=Al.charCodeAt(za++))return-1}return za}function vn(Wo,Wu,Al){var za=x.exec(Wu.slice(Al));return za?(Wo.p=I[za[0].toLowerCase()],Al+za[0].length):-1}function si(Wo,Wu,Al){var za=$.exec(Wu.slice(Al));return za?(Wo.w=Ee[za[0].toLowerCase()],Al+za[0].length):-1}function ai(Wo,Wu,Al){var za=P.exec(Wu.slice(Al));return za?(Wo.w=G[za[0].toLowerCase()],Al+za[0].length):-1}function Hi(Wo,Wu,Al){var za=Ye.exec(Wu.slice(Al));return za?(Wo.m=St[za[0].toLowerCase()],Al+za[0].length):-1}function wa(Wo,Wu,Al){var za=Se.exec(Wu.slice(Al));return za?(Wo.m=Re[za[0].toLowerCase()],Al+za[0].length):-1}function qa(Wo,Wu,Al){return dn(Wo,i,Wu,Al)}function zs(Wo,Wu,Al){return dn(Wo,t,Wu,Al)}function Ou(Wo,Wu,Al){return dn(Wo,n,Wu,Al)}function Ul(Wo){return u[Wo.getDay()]}function Gl(Wo){return o[Wo.getDay()]}function Ic(Wo){return g[Wo.getMonth()]}function Eh(Wo){return f[Wo.getMonth()]}function W0(Wo){return r[+(Wo.getHours()>=12)]}function c0(Wo){return 1+~~(Wo.getMonth()/3)}function $0(Wo){return u[Wo.getUTCDay()]}function tg(Wo){return o[Wo.getUTCDay()]}function Ly(Wo){return g[Wo.getUTCMonth()]}function rg(Wo){return f[Wo.getUTCMonth()]}function g7(Wo){return r[+(Wo.getUTCHours()>=12)]}function y7(Wo){return 1+~~(Wo.getUTCMonth()/3)}return{format:function(Wo){var Wu=Tr(Wo+="",vt);return Wu.toString=function(){return Wo},Wu},parse:function(Wo){var Wu=on(Wo+="",!1);return Wu.toString=function(){return Wo},Wu},utcFormat:function(Wo){var Wu=Tr(Wo+="",Ut);return Wu.toString=function(){return Wo},Wu},utcParse:function(Wo){var Wu=on(Wo+="",!0);return Wu.toString=function(){return Wo},Wu}}}var N2={"-":"",_:" ",0:"0"},Rp=/^\s*\d+/,dO=/^%/,vO=/[\\^$*+?|[\]().{}]/g;function wl(e,i,t){var n=e<0?"-":"",r=(n?-e:e)+"",o=r.length;return n+(o<t?new Array(t-o+1).join(i)+r:r)}function mO(e){return e.replace(vO,"\\$&")}function P0(e){return new RegExp("^(?:"+e.map(mO).join("|")+")","i")}function k0(e){for(var i={},t=-1,n=e.length;++t<n;)i[e[t].toLowerCase()]=t;return i}function gO(e,i,t){var n=Rp.exec(i.slice(t,t+1));return n?(e.w=+n[0],t+n[0].length):-1}function yO(e,i,t){var n=Rp.exec(i.slice(t,t+1));return n?(e.u=+n[0],t+n[0].length):-1}function _O(e,i,t){var n=Rp.exec(i.slice(t,t+2));return n?(e.U=+n[0],t+n[0].length):-1}function xO(e,i,t){var n=Rp.exec(i.slice(t,t+2));return n?(e.V=+n[0],t+n[0].length):-1}function bO(e,i,t){var n=Rp.exec(i.slice(t,t+2));return n?(e.W=+n[0],t+n[0].length):-1}function B2(e,i,t){var n=Rp.exec(i.slice(t,t+4));return n?(e.y=+n[0],t+n[0].length):-1}function z2(e,i,t){var n=Rp.exec(i.slice(t,t+2));return n?(e.y=+n[0]+(+n[0]>68?1900:2e3),t+n[0].length):-1}function EO(e,i,t){var n=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(i.slice(t,t+6));return n?(e.Z=n[1]?0:-(n[2]+(n[3]||"00")),t+n[0].length):-1}function SO(e,i,t){var n=Rp.exec(i.slice(t,t+1));return n?(e.q=n[0]*3-3,t+n[0].length):-1}function wO(e,i,t){var n=Rp.exec(i.slice(t,t+2));return n?(e.m=n[0]-1,t+n[0].length):-1}function U2(e,i,t){var n=Rp.exec(i.slice(t,t+2));return n?(e.d=+n[0],t+n[0].length):-1}function AO(e,i,t){var n=Rp.exec(i.slice(t,t+3));return n?(e.m=0,e.d=+n[0],t+n[0].length):-1}function Z2(e,i,t){var n=Rp.exec(i.slice(t,t+2));return n?(e.H=+n[0],t+n[0].length):-1}function CO(e,i,t){var n=Rp.exec(i.slice(t,t+2));return n?(e.M=+n[0],t+n[0].length):-1}function TO(e,i,t){var n=Rp.exec(i.slice(t,t+2));return n?(e.S=+n[0],t+n[0].length):-1}function MO(e,i,t){var n=Rp.exec(i.slice(t,t+3));return n?(e.L=+n[0],t+n[0].length):-1}function IO(e,i,t){var n=Rp.exec(i.slice(t,t+6));return n?(e.L=Math.floor(n[0]/1e3),t+n[0].length):-1}function OO(e,i,t){var n=dO.exec(i.slice(t,t+1));return n?t+n[0].length:-1}function RO(e,i,t){var n=Rp.exec(i.slice(t));return n?(e.Q=+n[0],t+n[0].length):-1}function PO(e,i,t){var n=Rp.exec(i.slice(t));return n?(e.s=+n[0],t+n[0].length):-1}function j2(e,i){return wl(e.getDate(),i,2)}function kO(e,i){return wl(e.getHours(),i,2)}function LO(e,i){return wl(e.getHours()%12||12,i,2)}function DO(e,i){return wl(1+xy.count(r0(e),e),i,3)}function V2(e,i){return wl(e.getMilliseconds(),i,3)}function FO(e,i){return V2(e,i)+"000"}function NO(e,i){return wl(e.getMonth()+1,i,2)}function BO(e,i){return wl(e.getMinutes(),i,2)}function zO(e,i){return wl(e.getSeconds(),i,2)}function UO(e){var i=e.getDay();return i===0?7:i}function ZO(e,i){return wl(_y.count(r0(e)-1,e),i,2)}function G2(e){var i=e.getDay();return i>=4||i===0?n0(e):n0.ceil(e)}function jO(e,i){return e=G2(e),wl(n0.count(r0(e),e)+(r0(e).getDay()===4),i,2)}function VO(e){return e.getDay()}function GO(e,i){return wl(jm.count(r0(e)-1,e),i,2)}function HO(e,i){return wl(e.getFullYear()%100,i,2)}function WO(e,i){return e=G2(e),wl(e.getFullYear()%100,i,2)}function $O(e,i){return wl(e.getFullYear()%1e4,i,4)}function XO(e,i){var t=e.getDay();return e=t>=4||t===0?n0(e):n0.ceil(e),wl(e.getFullYear()%1e4,i,4)}function YO(e){var i=e.getTimezoneOffset();return(i>0?"-":(i*=-1,"+"))+wl(i/60|0,"0",2)+wl(i%60,"0",2)}function H2(e,i){return wl(e.getUTCDate(),i,2)}function KO(e,i){return wl(e.getUTCHours(),i,2)}function QO(e,i){return wl(e.getUTCHours()%12||12,i,2)}function JO(e,i){return wl(1+F2.count(O0(e),e),i,3)}function W2(e,i){return wl(e.getUTCMilliseconds(),i,3)}function qO(e,i){return W2(e,i)+"000"}function e6(e,i){return wl(e.getUTCMonth()+1,i,2)}function t6(e,i){return wl(e.getUTCMinutes(),i,2)}function r6(e,i){return wl(e.getUTCSeconds(),i,2)}function n6(e){var i=e.getUTCDay();return i===0?7:i}function i6(e,i){return wl(L2.count(O0(e)-1,e),i,2)}function $2(e){var i=e.getUTCDay();return i>=4||i===0?i0(e):i0.ceil(e)}function a6(e,i){return e=$2(e),wl(i0.count(O0(e),e)+(O0(e).getUTCDay()===4),i,2)}function o6(e){return e.getUTCDay()}function s6(e,i){return wl(Gm.count(O0(e)-1,e),i,2)}function u6(e,i){return wl(e.getUTCFullYear()%100,i,2)}function l6(e,i){return e=$2(e),wl(e.getUTCFullYear()%100,i,2)}function c6(e,i){return wl(e.getUTCFullYear()%1e4,i,4)}function f6(e,i){var t=e.getUTCDay();return e=t>=4||t===0?i0(e):i0.ceil(e),wl(e.getUTCFullYear()%1e4,i,4)}function p6(){return"+0000"}function X2(){return"%"}function Y2(e){return+e}function K2(e){return Math.floor(+e/1e3)}var a0,Q2,h6,d6,v6;m6({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function m6(e){return a0=hO(e),Q2=a0.format,h6=a0.parse,d6=a0.utcFormat,v6=a0.utcParse,a0}var L0=1e3,D0=L0*60,F0=D0*60,N0=F0*24,g6=N0*7,J2=N0*30,wy=N0*365;function y6(e){return new Date(e)}function _6(e){return e instanceof Date?+e:+new Date(+e)}function q2(e,i,t,n,r,o,u,f,g){var x=a2(Xp,Xp),I=x.invert,P=x.domain,G=g(".%L"),$=g(":%S"),Ee=g("%I:%M"),Se=g("%I %p"),Re=g("%a %d"),Ye=g("%b %d"),St=g("%B"),vt=g("%Y"),Ut=[[u,1,L0],[u,5,5*L0],[u,15,15*L0],[u,30,30*L0],[o,1,D0],[o,5,5*D0],[o,15,15*D0],[o,30,30*D0],[r,1,F0],[r,3,3*F0],[r,6,6*F0],[r,12,12*F0],[n,1,N0],[n,2,2*N0],[t,1,g6],[i,1,J2],[i,3,3*J2],[e,1,wy]];function Kt(on){return(u(on)<on?G:o(on)<on?$:r(on)<on?Ee:n(on)<on?Se:i(on)<on?t(on)<on?Re:Ye:e(on)<on?St:vt)(on)}function Tr(on,dn,vn,si){if(on==null&&(on=10),typeof on=="number"){var ai=Math.abs(vn-dn)/on,Hi=Bb(function(wa){return wa[2]}).right(Ut,ai);Hi===Ut.length?(si=ny(dn/wy,vn/wy,on),on=e):Hi?(Hi=Ut[ai/Ut[Hi-1][2]<Ut[Hi][2]/ai?Hi-1:Hi],si=Hi[1],on=Hi[0]):(si=Math.max(ny(dn,vn,on),1),on=f)}return si==null?on:on.every(si)}return x.invert=function(on){return new Date(I(on))},x.domain=function(on){return arguments.length?P(Lm.call(on,_6)):P().map(y6)},x.ticks=function(on,dn){var vn=P(),si=vn[0],ai=vn[vn.length-1],Hi=ai<si,wa;return Hi&&(wa=si,si=ai,ai=wa),wa=Tr(on,si,ai,dn),wa=wa?wa.range(si,ai+1):[],Hi?wa.reverse():wa},x.tickFormat=function(on,dn){return dn==null?Kt:g(dn)},x.nice=function(on,dn){var vn=P();return(on=Tr(on,vn[0],vn[vn.length-1],dn))?P(v2(vn,on)):x},x.copy=function(){return Nm(x,q2(e,i,t,n,r,o,u,f,g))},x}function x6(){return qd.apply(q2(r0,eO,_y,xy,aO,oO,sO,uO,Q2).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function Uk(){return initRange.apply(calendar(utcYear,utcMonth,utcWeek,utcDay,utcHour,utcMinute,utcSecond,utcMillisecond,utcFormat).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function Hm(){var e=0,i=1,t,n,r,o,u=Xp,f=!1,g;function x(I){return isNaN(I=+I)?g:u(r===0?.5:(I=(o(I)-t)*r,f?Math.max(0,Math.min(1,I)):I))}return x.domain=function(I){return arguments.length?(t=o(e=+I[0]),n=o(i=+I[1]),r=t===n?0:1/(n-t),x):[e,i]},x.clamp=function(I){return arguments.length?(f=!!I,x):f},x.interpolator=function(I){return arguments.length?(u=I,x):u},x.unknown=function(I){return arguments.length?(g=I,x):g},function(I){return o=I,t=I(e),n=I(i),r=t===n?0:1/(n-t),x}}function B0(e,i){return i.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function eE(){var e=t0(Hm()(Xp));return e.copy=function(){return B0(e,eE())},Jb.apply(e,arguments)}function b6(){var e=loggish(Hm()).domain([1,10]);return e.copy=function(){return B0(e,b6()).base(e.base())},initInterpolator.apply(e,arguments)}function E6(){var e=symlogish(Hm());return e.copy=function(){return B0(e,E6()).constant(e.constant())},initInterpolator.apply(e,arguments)}function tE(){var e=powish(Hm());return e.copy=function(){return B0(e,tE()).exponent(e.exponent())},initInterpolator.apply(e,arguments)}function Zk(){return tE.apply(null,arguments).exponent(.5)}function S6(){var e=[],i=identity;function t(n){if(!isNaN(n=+n))return i((bisect(e,n)-1)/(e.length-1))}return t.domain=function(n){if(!arguments.length)return e.slice();e=[];for(var r=0,o=n.length,u;r<o;++r)u=n[r],u!=null&&!isNaN(u=+u)&&e.push(u);return e.sort(ascending),t},t.interpolator=function(n){return arguments.length?(i=n,t):i},t.copy=function(){return S6(i).domain(e)},initInterpolator.apply(t,arguments)}function Wm(){var e=0,i=.5,t=1,n,r,o,u,f,g=Xp,x,I=!1,P;function G($){return isNaN($=+$)?P:($=.5+(($=+x($))-r)*($<r?u:f),g(I?Math.max(0,Math.min(1,$)):$))}return G.domain=function($){return arguments.length?(n=x(e=+$[0]),r=x(i=+$[1]),o=x(t=+$[2]),u=n===r?0:.5/(r-n),f=r===o?0:.5/(o-r),G):[e,i,t]},G.clamp=function($){return arguments.length?(I=!!$,G):I},G.interpolator=function($){return arguments.length?(g=$,G):g},G.unknown=function($){return arguments.length?(P=$,G):P},function($){return x=$,n=$(e),r=$(i),o=$(t),u=n===r?0:.5/(r-n),f=r===o?0:.5/(o-r),G}}function rE(){var e=t0(Wm()(Xp));return e.copy=function(){return B0(e,rE())},Jb.apply(e,arguments)}function w6(){var e=loggish(Wm()).domain([.1,1,10]);return e.copy=function(){return copy(e,w6()).base(e.base())},initInterpolator.apply(e,arguments)}function A6(){var e=symlogish(Wm());return e.copy=function(){return copy(e,A6()).constant(e.constant())},initInterpolator.apply(e,arguments)}function nE(){var e=powish(Wm());return e.copy=function(){return copy(e,nE()).exponent(e.exponent())},initInterpolator.apply(e,arguments)}function jk(){return nE.apply(null,arguments).exponent(.5)}var Oh,iE,aE,C6=/^(?:(?!0000)[0-9]{4}([-/.]+)(?:(?:0?[1-9]|1[0-2])\1(?:0?[1-9]|1[0-9]|2[0-8])|(?:0?[13-9]|1[0-2])\1(?:29|30)|(?:0?[13578]|1[02])\1(?:31))|(?:[0-9]{2}(?:0[48]|[2468][048]|[13579][26])|(?:0[48]|[2468][048]|[13579][26])00)([-/.]?)0?2\2(?:29))(\s+([01]|([01][0-9]|2[0-3])):([0-9]|[0-5][0-9]):([0-9]|[0-5][0-9]))?$/,T6=(Oh={},(0,He.Z)(Oh,El.LINEAR,h2),(0,He.Z)(Oh,El.POWER,dy),(0,He.Z)(Oh,El.LOG,_2),(0,He.Z)(Oh,El.IDENTITY,d2),(0,He.Z)(Oh,El.SEQUENTIAL,eE),(0,He.Z)(Oh,El.TIME,x6),(0,He.Z)(Oh,El.QUANTILE,S2),(0,He.Z)(Oh,El.QUANTIZE,w2),(0,He.Z)(Oh,El.THRESHOLD,A2),(0,He.Z)(Oh,El.CAT,Dm),(0,He.Z)(Oh,El.DIVERGING,rE),Oh),M6=(iE=(0,Ki.b2)(),iE(aE=function(){function e(){(0,Ur.Z)(this,e),(0,He.Z)(this,"scaleOptions",{})}return(0,Jr.Z)(e,[{key:"apply",value:function(t,n){var r=this,o=n.styleAttributeService;t.hooks.init.tapPromise("FeatureScalePlugin",(0,An.Z)(Nt().mark(function u(){var f,g,x;return Nt().wrap(function(P){for(;;)switch(P.prev=P.next){case 0:if(r.scaleOptions=t.getScaleOptions(),g=o.getLayerStyleAttributes(),x=(f=t.getSource())===null||f===void 0?void 0:f.data.dataArray,!(Array.isArray(x)&&x.length===0)){P.next=7;break}return P.abrupt("return");case 7:r.caculateScalesForAttributes(g||[],x);case 8:case"end":return P.stop()}},u)}))),t.hooks.beforeRenderData.tapPromise("FeatureScalePlugin",function(){var u=(0,An.Z)(Nt().mark(function f(g){var x,I;return Nt().wrap(function(G){for(;;)switch(G.prev=G.next){case 0:if(g){G.next=2;break}return G.abrupt("return",g);case 2:if(r.scaleOptions=t.getScaleOptions(),x=o.getLayerStyleAttributes(),I=t.getSource().data.dataArray,!(Array.isArray(I)&&I.length===0)){G.next=7;break}return G.abrupt("return",!0);case 7:return r.caculateScalesForAttributes(x||[],I),t.layerModelNeedUpdate=!0,G.abrupt("return",!0);case 10:case"end":return G.stop()}},f)}));return function(f){return u.apply(this,arguments)}}()),t.hooks.beforeRender.tap("FeatureScalePlugin",function(){if(!t.layerModelNeedUpdate){r.scaleOptions=t.getScaleOptions();var u=o.getLayerStyleAttributes(),f=t.getSource().data.dataArray;if(!(Array.isArray(f)&&f.length===0)&&u){var g=u.filter(function(x){return x.needRescale});g.length&&r.caculateScalesForAttributes(g,f)}}})}},{key:"isNumber",value:function(t){return!isNaN(parseFloat(t))&&isFinite(t)}},{key:"caculateScalesForAttributes",value:function(t,n){var r=this;t.forEach(function(o){if(o.scale){var u=o.scale;u.names=r.parseFields(o.scale.field||[]);var f=[];u.names.forEach(function(g){var x;f.push(r.createScale(g,o.name,(x=o.scale)===null||x===void 0?void 0:x.values,n))}),f.some(function(g){return g.type===Yd.VARIABLE})?(u.type=Yd.VARIABLE,f.forEach(function(g){var x;if(!u.callback&&u.values!=="text")switch((x=g.option)===null||x===void 0?void 0:x.type){case El.LOG:case El.LINEAR:case El.POWER:if(u.values&&u.values.length>2){var I=g.scale.ticks(u.values.length);g.scale.domain(I)}u.values?g.scale.range(u.values):g.scale.range(g.option.domain);break;case El.QUANTILE:case El.QUANTIZE:case El.THRESHOLD:g.scale.range(u.values);break;case El.CAT:u.values?g.scale.range(u.values):g.scale.range(g.option.domain);break;case El.DIVERGING:case El.SEQUENTIAL:g.scale.interpolator(mI(u.values));break}if(u.values==="text"){var P;g.scale.range((P=g.option)===null||P===void 0?void 0:P.domain)}})):(u.type=Yd.CONSTANT,u.defaultValues=f.map(function(g,x){return g.scale(u.names[x])})),u.scalers=f.map(function(g){return{field:g.field,func:g.scale,option:g.option}}),o.needRescale=!1}})}},{key:"parseFields",value:function(t){return Array.isArray(t)?t:(0,Wr.isString)(t)?t.split("*"):[t]}},{key:"createScale",value:function(t,n,r,o){var u,f,g=this.scaleOptions[n]&&((u=this.scaleOptions[n])===null||u===void 0?void 0:u.field)===t?this.scaleOptions[n]:this.scaleOptions[t],x={field:t,scale:void 0,type:Yd.VARIABLE,option:g};if(!o||!o.length)return g&&g.type?x.scale=this.createDefaultScale(g):(x.scale=Dm([t]),x.type=Yd.CONSTANT),x;var I=(f=o.find(function($){return!(0,Wr.isNil)($[t])}))===null||f===void 0?void 0:f[t];if(this.isNumber(t)||(0,Wr.isNil)(I)&&!g)x.scale=Dm([t]),x.type=Yd.CONSTANT;else{var P=g&&g.type||this.getDefaultType(I);r==="text"&&(P=El.CAT);var G=this.createScaleConfig(P,t,g,o);x.scale=this.createDefaultScale(G),x.option=G}return x}},{key:"getDefaultType",value:function(t){var n=El.LINEAR;return typeof t=="string"&&(n=C6.test(t)?El.TIME:El.CAT),n}},{key:"createScaleConfig",value:function(t,n,r,o){var u={type:t},f=(o==null?void 0:o.map(function(I){return I[n]}))||[];if(r!=null&&r.domain)u.domain=r==null?void 0:r.domain;else if(t!==El.CAT&&t!==El.QUANTILE&&t!==El.DIVERGING)u.domain=Ub(f);else if(t===El.CAT)u.domain=(0,Wr.uniq)(f);else if(t===El.QUANTILE)u.domain=f;else if(t===El.DIVERGING){var g=Ub(f),x=(r==null?void 0:r.neutral)!==void 0?r==null?void 0:r.neutral:(g[0]+g[1])/2;u.domain=[g[0],x,g[1]]}return(0,oe.Z)((0,oe.Z)({},u),r)}},{key:"createDefaultScale",value:function(t){var n=t.type,r=t.domain,o=t.unknown,u=t.clamp,f=t.nice,g=T6[n]();return r&&g.domain&&g.domain(r),o&&g.unknown(o),u!==void 0&&g.clamp&&g.clamp(u),f!==void 0&&g.nice&&g.nice(f),g}}]),e}())||aE),oE,sE,I6=(oE=(0,Ki.b2)(),oE(sE=function(){function e(){(0,Ur.Z)(this,e)}return(0,Jr.Z)(e,[{key:"apply",value:function(t){t.hooks.beforeRender.tap("LayerAnimateStylePlugin",function(){var n=t.animateStatus;n&&t.models.forEach(function(r){r.addUniforms((0,oe.Z)({},t.layerModel.getAnimateUniforms()))})})}}]),e}())||sE),O6=function(){function e(i){var t=i.rendererService,n=i.layerService,r=i.parent;(0,Ur.Z)(this,e),(0,He.Z)(this,"tileResource",new Map),(0,He.Z)(this,"_tiles",[]),this.rendererService=t,this.layerService=n,this.parent=r}return(0,Jr.Z)(e,[{key:"tiles",get:function(){return this._tiles}},{key:"hasTile",value:function(t){return this._tiles.some(function(n){return n.key===t})}},{key:"addTile",value:function(t){this._tiles.push(t)}},{key:"getTile",value:function(t){return this._tiles.find(function(n){return n.key===t})}},{key:"getVisibleTileBylngLat",value:function(t){return this._tiles.find(function(n){return n.isLoaded&&n.visible&&n.lnglatInBounds(t)})}},{key:"removeTile",value:function(t){var n=this._tiles.findIndex(function(o){return o.key===t}),r=this._tiles.splice(n,1);r[0]&&r[0].destroy()}},{key:"updateTileVisible",value:function(t){var n=this.getTile(t.key);n==null||n.updateVisible(t.isVisible)}},{key:"isParentLoaded",value:function(t){var n=t.parent;if(!n)return!0;var r=this.getTile(n==null?void 0:n.key);return!!(r!=null&&r.isLoaded)}},{key:"isChildrenLoaded",value:function(t){var n=this,r=t==null?void 0:t.children;return r.length===0?!0:r.some(function(o){var u=n.getTile(o==null?void 0:o.key);return(u==null?void 0:u.isLoaded)===!1})}},{key:"render",value:function(){var i=(0,An.Z)(Nt().mark(function n(){var r=this,o;return Nt().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:o=this.getRenderLayers(),o.map(function(){var g=(0,An.Z)(Nt().mark(function x(I){return Nt().wrap(function(G){for(;;)switch(G.prev=G.next){case 0:return G.next=2,r.layerService.renderLayer(I);case 2:case"end":return G.stop()}},x)}));return function(x){return g.apply(this,arguments)}}());case 2:case"end":return f.stop()}},n,this)}));function t(){return i.apply(this,arguments)}return t}()},{key:"getRenderLayers",value:function(){var t=this._tiles.filter(function(r){return r.visible&&r.isLoaded}),n=[];return t.map(function(r){return n.push.apply(n,(0,ie.Z)(r.getLayers()))}),n}},{key:"getLayers",value:function(){var t=this._tiles.filter(function(r){return r.isLoaded}),n=[];return t.map(function(r){return n.push.apply(n,(0,ie.Z)(r.getLayers()))}),n}},{key:"getTiles",value:function(){return this._tiles}},{key:"destroy",value:function(){this._tiles.forEach(function(t){return t.destroy()}),this.tileResource.clear()}}]),e}(),R6=c(23167);function P6(e,i,t){t===void 0&&(t={});var n=ce(e),r=ce(i),o=R6.union(n.coordinates,r.coordinates);return o.length===0?null:o.length===1?xr(o[0],t.properties):Vr(o,t.properties)}var k6=P6,L6=function(){function e(){(0,Ur.Z)(this,e)}return(0,Jr.Z)(e,[{key:"getCombineFeature",value:function(t){var n=null,r=t[0];return t.map(function(o){var u=xr(o.coordinates);n===null?n=u:n=k6(n,u)}),r&&(n.properties=(0,oe.Z)({},r)),n}}]),e}(),z0="select",U0="active",D6=function(){function e(i){var t=i.layerService,n=i.tileLayerService,r=i.parent;(0,Ur.Z)(this,e),(0,He.Z)(this,"tilePickID",new Map),this.layerService=t,this.tileLayerService=n,this.parent=r,this.tileSourceService=new L6}return(0,Jr.Z)(e,[{key:"pickRender",value:function(t){var n=this.tileLayerService.getVisibleTileBylngLat(t.lngLat);if(n){var r=n.getMainLayer();r==null||r.layerPickService.pickRender(t)}}},{key:"pick",value:function(t,n){var r=this.parent.getContainer(),o=r.get(Ln.IPickingService);if(t.type==="RasterLayer"){var u=this.tileLayerService.getVisibleTileBylngLat(n.lngLat);if(u&&u.getMainLayer()!==void 0){var f=u.getMainLayer();return f.layerPickService.pickRasterLayer(f,n,this.parent)}return!1}return this.pickRender(n),o.pickFromPickingFBO(t,n)}},{key:"selectFeature",value:function(t){var n=(0,Mr.Z)(t,3),r=n[0],o=n[1],u=n[2],f=this.color2PickId(r,o,u);this.tilePickID.set(z0,f),this.updateHighLight(r,o,u,z0)}},{key:"highlightPickedFeature",value:function(t){var n=(0,Mr.Z)(t,3),r=n[0],o=n[1],u=n[2],f=this.color2PickId(r,o,u);this.tilePickID.set(U0,f),this.updateHighLight(r,o,u,U0)}},{key:"updateHighLight",value:function(t,n,r,o){this.tileLayerService.tiles.map(function(u){var f=u.getMainLayer();switch(o){case z0:f==null||f.hooks.beforeSelect.call([t,n,r]);break;case U0:f==null||f.hooks.beforeHighlight.call([t,n,r]);break}})}},{key:"setPickState",value:function(){var t=this.tilePickID.get(z0),n=this.tilePickID.get(U0);if(t){var r=this.pickId2Color(t),o=(0,Mr.Z)(r,3),u=o[0],f=o[1],g=o[2];this.updateHighLight(u,f,g,z0);return}if(n){var x=this.pickId2Color(n),I=(0,Mr.Z)(x,3),P=I[0],G=I[1],$=I[2];this.updateHighLight(P,G,$,U0);return}}},{key:"color2PickId",value:function(t,n,r){return es(new Uint8Array([t,n,r]))}},{key:"pickId2Color",value:function(t){return ru(t)}},{key:"getFeatureById",value:function(t){var n=this.tileLayerService.getTiles().filter(function(o){return o.visible}),r=[];return n.map(function(o){r.push.apply(r,(0,ie.Z)(o.getFeatureById(t)))}),r.length<=0?null:[]}},{key:"pickRasterLayer",value:function(t,n,r){return!1}}]),e}();function F6(e){return e==="PolygonLayer"?Ib:e==="LineLayer"?Kg:Mm}function N6(e){return["PolygonLayer","LineLayer"].indexOf(e)!==-1}var Sv=function(){function e(i,t){(0,Ur.Z)(this,e),(0,He.Z)(this,"visible",!0),(0,He.Z)(this,"layers",[]),(0,He.Z)(this,"isLoaded",!1),this.parent=t,this.sourceTile=i,this.x=i.x,this.y=i.y,this.z=i.z,this.key="".concat(this.x,"_").concat(this.y,"_").concat(this.z)}return(0,Jr.Z)(e,[{key:"getLayers",value:function(){return this.layers}},{key:"styleUpdate",value:function(){}},{key:"lnglatInBounds",value:function(t){var n=(0,Mr.Z)(this.sourceTile.bounds,4),r=n[0],o=n[1],u=n[2],f=n[3],g=t.lng,x=t.lat;return g>=r&&g<=u&&x>=o&&x<=f}},{key:"getLayerOptions",value:function(){var t=this.parent.getLayerConfig();return(0,oe.Z)((0,oe.Z)({},t),{},{autoFit:!1,mask:N6(this.parent.type)||t.mask})}},{key:"addMask",value:function(){var i=(0,An.Z)(Nt().mark(function n(r,o){var u;return Nt().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return u=ym(this.parent.sceneContainer),o.setContainer(u,this.parent.sceneContainer),g.next=4,o.init();case 4:r.addMaskLayer(o);case 5:case"end":return g.stop()}},n,this)}));function t(n,r){return i.apply(this,arguments)}return t}()},{key:"addLayer",value:function(){var i=(0,An.Z)(Nt().mark(function n(r){var o;return Nt().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return r.isTileLayer=!0,o=ym(this.parent.sceneContainer),r.setContainer(o,this.parent.sceneContainer),this.layers.push(r),f.next=6,r.init();case 6:case"end":return f.stop()}},n,this)}));function t(n){return i.apply(this,arguments)}return t}()},{key:"updateVisible",value:function(t){this.visible=t,this.updateOptions("visible",t)}},{key:"updateOptions",value:function(t,n){this.layers.forEach(function(r){r.updateLayerConfig((0,He.Z)({},t,n))})}},{key:"getMainLayer",value:function(){return this.layers[0]}},{key:"getFeatures",value:function(t){return[]}},{key:"getFeatureById",value:function(t){return[]}},{key:"destroy",value:function(){this.layers.forEach(function(t){return t.destroy()})}}]),e}();function B6(e){var i=z6();return function(){var n=(0,rr.Z)(e),r;if(i){var o=(0,rr.Z)(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return(0,jn.Z)(this,r)}}function z6(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var $m=function(e){(0,ui.Z)(t,e);var i=B6(t);function t(){return(0,Ur.Z)(this,t),i.apply(this,arguments)}return(0,Jr.Z)(t,[{key:"initTileLayer",value:function(){var n=(0,An.Z)(Nt().mark(function o(){var u,f,g,x,I;return Nt().wrap(function(G){for(;;)switch(G.prev=G.next){case 0:if(u=this.parent.getLayerAttributeConfig(),f=this.getLayerOptions(),g=F6(this.parent.type),x=this.getSourceOption(),x){G.next=7;break}return this.isLoaded=!0,G.abrupt("return");case 7:if(I=new g((0,oe.Z)({},f)).source(x.data,x.options),Object.keys(u).forEach(function($){var Ee,Se,Re=$;I[Re]((Ee=u[Re])===null||Ee===void 0?void 0:Ee.field,(Se=u[Re])===null||Se===void 0?void 0:Se.values)}),!f.mask){G.next=12;break}return G.next=12,this.addTileMask(I);case 12:return G.next=14,this.addLayer(I);case 14:this.setLayerMinMaxZoom(I),this.isLoaded=!0;case 16:case"end":return G.stop()}},o,this)}));function r(){return n.apply(this,arguments)}return r}()},{key:"addTileMask",value:function(){var n=(0,An.Z)(Nt().mark(function o(u){var f;return Nt().wrap(function(x){for(;;)switch(x.prev=x.next){case 0:return f=new Jg({layerType:"MaskLayer"}).source({type:"FeatureCollection",features:[this.sourceTile.bboxPolygon]},{parser:{type:"geojson",featureId:"id"}}),x.next=3,this.addMask(u,f);case 3:case"end":return x.stop()}},o,this)}));function r(o){return n.apply(this,arguments)}return r}()},{key:"getSourceOption",value:function(){var r=this.parent.getSource(),o=this.parent.getLayerConfig(),u=o.sourceLayer,f=u===void 0?"defaultLayer":u,g=o.featureId,x=g===void 0?"id":g,I=this.getFeatures(f);return{data:{type:"FeatureCollection",features:I},options:{parser:{type:"geojson",featureId:x},transforms:r.transforms}}}},{key:"setLayerMinMaxZoom",value:function(r){r.getModelType()==="text"&&r.updateLayerConfig({maxZoom:this.z+1,minZoom:this.z-1})}},{key:"getFeatures",value:function(r){var o=this.sourceTile.data;return o.getTileData(r)}},{key:"getFeatureById",value:function(r){var o=this.getMainLayer();return o?o.getSource().data.dataArray.filter(function(u){return u._id===r}):[]}}]),t}(Sv);function U6(e){var i=Z6();return function(){var n=(0,rr.Z)(e),r;if(i){var o=(0,rr.Z)(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return(0,jn.Z)(this,r)}}function Z6(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var j6=function(e){(0,ui.Z)(t,e);var i=U6(t);function t(){return(0,Ur.Z)(this,t),i.apply(this,arguments)}return(0,Jr.Z)(t,[{key:"initTileLayer",value:function(){var n=(0,An.Z)(Nt().mark(function o(){var u,f,g,x;return Nt().wrap(function(P){for(;;)switch(P.prev=P.next){case 0:return u=this.getSourceOption(),f=u.data.features[0].properties,g=new Kg().source(u.data,u.options).size(1).shape("line").color("red"),x=new Mm({minZoom:this.z-1,maxZoom:this.z+1}).source([f],{parser:{type:"json",x:"textLng",y:"textLat"}}).size(20).color("red").shape(this.key).style({stroke:"#fff",strokeWidth:2}),P.next=6,this.addLayer(g);case 6:return P.next=8,this.addLayer(x);case 8:this.isLoaded=!0;case 9:case"end":return P.stop()}},o,this)}));function r(){return n.apply(this,arguments)}return r}()},{key:"getSourceOption",value:function(){var r=this.parent.getSource(),o=this.sourceTile.data.layers.testTile.features;return{data:{type:"FeatureCollection",features:o},options:{parser:{type:"geojson"},transforms:r.transforms}}}}]),t}(Sv);function V6(e){var i=G6();return function(){var n=(0,rr.Z)(e),r;if(i){var o=(0,rr.Z)(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return(0,jn.Z)(this,r)}}function G6(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var H6=`precision mediump float;
uniform float u_opacity: 1.0;
uniform sampler2D u_texture;
varying vec2 v_texCoord;
void main() {
  vec4 color = texture2D(u_texture,vec2(v_texCoord.x,v_texCoord.y));
  gl_FragColor = color;
  gl_FragColor.a *= u_opacity;
}
`,W6=`precision highp float;
uniform mat4 u_ModelMatrix;
uniform mat4 u_Mvp;
attribute vec3 a_Position;
attribute vec2 a_Uv;
varying vec2 v_texCoord;
#pragma include "projection"
void main() {
   v_texCoord = a_Uv;
   vec4 project_pos = project_position(vec4(a_Position, 1.0));
   // gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy,0., 1.0));
   if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x
      gl_Position = u_Mvp * (vec4(project_pos.xy,0., 1.0));
   } else {
      gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy,0., 1.0));
   }
}
`,$6=function(e){(0,ui.Z)(t,e);var i=V6(t);function t(){return(0,Ur.Z)(this,t),i.apply(this,arguments)}return(0,Jr.Z)(t,[{key:"getUninforms",value:function(){var r=this.layer.getLayerConfig(),o=r.opacity;return{u_opacity:o||1,u_texture:this.texture}}},{key:"initModels",value:function(){var n=(0,An.Z)(Nt().mark(function o(){var u=this,f,g,x,I,P,G,$,Ee,Se,Re,Ye;return Nt().wrap(function(vt){for(;;)switch(vt.prev=vt.next){case 0:if(f=this.layer.getLayerConfig(),g=f.mask,x=g===void 0?!1:g,I=f.maskInside,P=I===void 0?!0:I,G=this.layer.getSource(),$=this.rendererService.createTexture2D,this.texture=$({height:0,width:0}),!qu){vt.next=12;break}Ee=this.layerService.sceneService.getSceneConfig().canvas,Se=Ee.createImage(),Se.crossOrigin="anonymous",Se.src=G.data.originData,Se.onload=function(){u.texture=$({data:Se,width:Se.width,height:Se.height}),u.layerService.reRender()},vt.next=16;break;case 12:return vt.next=14,G.data.images;case 14:Re=vt.sent,this.texture=$({data:Re[0],width:Re[0].width,height:Re[0].height,mag:$e.LINEAR,min:$e.LINEAR});case 16:return vt.next=18,this.layer.buildLayerModel({moduleName:"rasterImage",vertexShader:W6,fragmentShader:H6,triangulation:Am,primitive:$e.TRIANGLES,blend:{enable:!0},depth:{enable:!1},stencil:zo(x,P)});case 18:return Ye=vt.sent,vt.abrupt("return",[Ye]);case 20:case"end":return vt.stop()}},o,this)}));function r(){return n.apply(this,arguments)}return r}()},{key:"clearModels",value:function(){var r;(r=this.texture)===null||r===void 0||r.destroy()}},{key:"buildModels",value:function(){var n=(0,An.Z)(Nt().mark(function o(){return Nt().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return f.next=2,this.initModels();case 2:return f.abrupt("return",f.sent);case 3:case"end":return f.stop()}},o,this)}));function r(){return n.apply(this,arguments)}return r}()},{key:"registerBuiltinAttributes",value:function(){this.styleAttributeService.registerStyleAttribute({name:"uv",type:ja.Attribute,descriptor:{name:"a_Uv",buffer:{usage:$e.DYNAMIC_DRAW,data:[],type:$e.FLOAT},size:2,update:function(o,u,f){return[f[3],f[4]]}}})}}]),t}(Sl),X6={image:$6},Y6=X6;function K6(e){var i=Q6();return function(){var n=(0,rr.Z)(e),r;if(i){var o=(0,rr.Z)(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return(0,jn.Z)(this,r)}}function Q6(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var J6=function(e){(0,ui.Z)(t,e);var i=K6(t);function t(){var n;(0,Ur.Z)(this,t);for(var r=arguments.length,o=new Array(r),u=0;u<r;u++)o[u]=arguments[u];return n=i.call.apply(i,[this].concat(o)),(0,He.Z)((0,er.Z)(n),"type","ImageLayer"),n}return(0,Jr.Z)(t,[{key:"buildModels",value:function(){var n=(0,An.Z)(Nt().mark(function o(){var u;return Nt().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return u=this.getModelType(),this.layerModel=new Y6[u](this),g.next=4,this.initLayerModels();case 4:case"end":return g.stop()}},o,this)}));function r(){return n.apply(this,arguments)}return r}()},{key:"getDefaultConfig",value:function(){var r=this.getModelType(),o={image:{}};return o[r]}},{key:"getModelType",value:function(){return"image"}}]),t}($v);function q6(e){var i=eR();return function(){var n=(0,rr.Z)(e),r;if(i){var o=(0,rr.Z)(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return(0,jn.Z)(this,r)}}function eR(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var tR=function(e){(0,ui.Z)(t,e);var i=q6(t);function t(){return(0,Ur.Z)(this,t),i.apply(this,arguments)}return(0,Jr.Z)(t,[{key:"initTileLayer",value:function(){var n=(0,An.Z)(Nt().mark(function o(){var u,f,g,x;return Nt().wrap(function(P){for(;;)switch(P.prev=P.next){case 0:return u=this.parent.getLayerAttributeConfig(),f=this.getLayerOptions(),g=this.getSourceOption(),x=new J6((0,oe.Z)({},f)).source(g.data,g.options),u&&Object.keys(u).forEach(function(G){var $,Ee,Se=G;x[Se](($=u[Se])===null||$===void 0?void 0:$.field,(Ee=u[Se])===null||Ee===void 0?void 0:Ee.values)}),P.next=7,this.addLayer(x);case 7:this.isLoaded=!0;case 8:case"end":return P.stop()}},o,this)}));function r(){return n.apply(this,arguments)}return r}()},{key:"getSourceOption",value:function(){var r=this.parent.getSource();return{data:this.sourceTile.data,options:{parser:{type:"image",extent:this.sourceTile.bounds},transforms:r.transforms}}}}]),t}(Sv);function rR(e){var i=nR();return function(){var n=(0,rr.Z)(e),r;if(i){var o=(0,rr.Z)(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return(0,jn.Z)(this,r)}}function nR(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var iR=`precision mediump float;
uniform float u_opacity: 1.0;
uniform sampler2D u_texture;
uniform sampler2D u_colorTexture;
uniform float u_min;
uniform float u_max;
uniform vec2 u_domain;
uniform float u_noDataValue;
uniform bool u_clampLow: true;
uniform bool u_clampHigh: true;
varying vec2 v_texCoord;
bool isnan_emu(float x) { return (x > 0.0 || x < 0.0) ? x != x : x != 0.0; }


void main() {

  float value = texture2D(u_texture,vec2(v_texCoord.x,v_texCoord.y)).r;
  if (value == u_noDataValue || isnan_emu(value))
    gl_FragColor = vec4(0.0, 0, 0, 0.0);
  else if ((!u_clampLow && value < u_domain[0]) || (!u_clampHigh && value > u_domain[1]))
    gl_FragColor = vec4(0, 0, 0, 0);
  else {
    float normalisedValue =(value - u_domain[0]) / (u_domain[1] -u_domain[0]);
    vec4 color = texture2D(u_colorTexture,vec2(normalisedValue, 0));
    gl_FragColor = color;
    gl_FragColor.a =  gl_FragColor.a * u_opacity ;
  }
}
`,aR=`precision highp float;
uniform mat4 u_ModelMatrix;
uniform mat4 u_Mvp;
attribute vec3 a_Position;
attribute vec2 a_Uv;
varying vec2 v_texCoord;
#pragma include "projection"
void main() {
   v_texCoord = a_Uv;
   vec4 project_pos = project_position(vec4(a_Position, 1.0));

   if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x
      gl_Position = u_Mvp * (vec4(project_pos.xy,0., 1.0));
   } else {
      gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy,0., 1.0));
   }
}
`,uE=function(e){(0,ui.Z)(t,e);var i=rR(t);function t(){return(0,Ur.Z)(this,t),i.apply(this,arguments)}return(0,Jr.Z)(t,[{key:"getUninforms",value:function(){var r=this.layer.getLayerConfig(),o=r.opacity,u=o===void 0?1:o,f=r.clampLow,g=f===void 0?!0:f,x=r.clampHigh,I=x===void 0?!0:x,P=r.noDataValue,G=P===void 0?-9999999:P,$=r.domain,Ee=$===void 0?[0,1]:$,Se=r.rampColors;return this.colorTexture=this.layer.textureService.getColorTexture(Se),{u_opacity:u||1,u_texture:this.texture,u_domain:Ee,u_clampLow:g,u_clampHigh:typeof I!="undefined"?I:g,u_noDataValue:G,u_colorTexture:this.colorTexture}}},{key:"getRasterData",value:function(){var n=(0,An.Z)(Nt().mark(function o(u){var f,g,x,I;return Nt().wrap(function(G){for(;;)switch(G.prev=G.next){case 0:if(!Array.isArray(u.data)){G.next=4;break}return G.abrupt("return",{data:u.data,width:u.width,height:u.height});case 4:return G.next=6,u.data;case 6:return f=G.sent,g=f.rasterData,x=f.width,I=f.height,G.abrupt("return",{data:Array.from(g),width:x,height:I});case 11:case"end":return G.stop()}},o)}));function r(o){return n.apply(this,arguments)}return r}()},{key:"initModels",value:function(){var n=(0,An.Z)(Nt().mark(function o(){var u,f,g,x,I,P,G,$,Ee,Se,Re,Ye,St;return Nt().wrap(function(Ut){for(;;)switch(Ut.prev=Ut.next){case 0:return u=this.layer.getLayerConfig(),f=u.mask,g=f===void 0?!1:f,x=u.maskInside,I=x===void 0?!0:x,P=this.layer.getSource(),G=this.rendererService.createTexture2D,$=P.data.dataArray[0],Ut.next=6,this.getRasterData($);case 6:return Ee=Ut.sent,Se=Ee.data,Re=Ee.width,Ye=Ee.height,this.texture=G({data:Se,width:Re,height:Ye,format:$e.LUMINANCE,type:$e.FLOAT}),Ut.next=13,this.layer.buildLayerModel({moduleName:"rasterImageData",vertexShader:aR,fragmentShader:iR,triangulation:Am,primitive:$e.TRIANGLES,depth:{enable:!1},stencil:zo(g,I)});case 13:return St=Ut.sent,Ut.abrupt("return",[St]);case 15:case"end":return Ut.stop()}},o,this)}));function r(){return n.apply(this,arguments)}return r}()},{key:"buildModels",value:function(){var n=(0,An.Z)(Nt().mark(function o(){return Nt().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return f.next=2,this.initModels();case 2:return f.abrupt("return",f.sent);case 3:case"end":return f.stop()}},o,this)}));function r(){return n.apply(this,arguments)}return r}()},{key:"clearModels",value:function(){var r,o;(r=this.texture)===null||r===void 0||r.destroy(),(o=this.colorTexture)===null||o===void 0||o.destroy()}},{key:"registerBuiltinAttributes",value:function(){this.styleAttributeService.registerStyleAttribute({name:"uv",type:ja.Attribute,descriptor:{name:"a_Uv",buffer:{usage:$e.DYNAMIC_DRAW,data:[],type:$e.FLOAT},size:2,update:function(o,u,f){return[f[3],f[4]]}}})}},{key:"updateColorTexture",value:function(){var r=this.rendererService.createTexture2D,o=this.layer.getLayerConfig(),u=o.rampColors,f=pu(u);this.colorTexture=r({data:f.data,width:f.width,height:f.height,flipY:!1})}}]),t}(Sl),oR=["data"],sR=["rasterData"];function uR(e){var i=lR();return function(){var n=(0,rr.Z)(e),r;if(i){var o=(0,rr.Z)(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return(0,jn.Z)(this,r)}}function lR(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var cR=`precision mediump float;
uniform vec2 u_rminmax: vec2(0,255); 
uniform vec2 u_gminmax: vec2(0,255);
uniform vec2 u_bminmax: vec2(0,255);
uniform float u_opacity: 1.0;
uniform sampler2D u_texture;
uniform float u_noDataValue : 0.0;
varying vec2 v_texCoord;

void main() {
  vec3 rgb = texture2D(u_texture,vec2(v_texCoord.x,v_texCoord.y)).rgb;
  if(rgb == vec3(u_noDataValue)) {
    gl_FragColor = vec4(0.0, 0, 0, 0.0);
  } else {
    gl_FragColor = vec4(rgb.r / (u_rminmax.y -u_rminmax.x), rgb.g /(u_gminmax.y -u_gminmax.x), rgb.b/ (u_bminmax.y - u_bminmax.x), u_opacity);
  }
 
}`,fR=`precision highp float;
uniform mat4 u_ModelMatrix;
uniform mat4 u_Mvp;
attribute vec3 a_Position;
attribute vec2 a_Uv;
varying vec2 v_texCoord;
#pragma include "projection"
void main() {
   v_texCoord = a_Uv;
   vec4 project_pos = project_position(vec4(a_Position, 1.0));

   if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x
      gl_Position = u_Mvp * (vec4(project_pos.xy,0., 1.0));
   } else {
      gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy,0., 1.0));
   }
}
`,pR=function(e){(0,ui.Z)(t,e);var i=uR(t);function t(){var n;(0,Ur.Z)(this,t);for(var r=arguments.length,o=new Array(r),u=0;u<r;u++)o[u]=arguments[u];return n=i.call.apply(i,[this].concat(o)),(0,He.Z)((0,er.Z)(n),"dataOption",{}),n}return(0,Jr.Z)(t,[{key:"getUninforms",value:function(){var r=this.layer.getLayerConfig(),o=r.opacity,u=o===void 0?1:o,f=r.noDataValue,g=f===void 0?0:f,x=this.dataOption,I=x.rMinMax,P=x.gMinMax,G=x.bMinMax;return{u_opacity:u||1,u_texture:this.texture,u_noDataValue:g,u_rminmax:I,u_gminmax:P,u_bminmax:G}}},{key:"getRasterData",value:function(){var n=(0,An.Z)(Nt().mark(function o(u){var f,g,x,I,P;return Nt().wrap(function($){for(;;)switch($.prev=$.next){case 0:if(!Array.isArray(u.data)){$.next=4;break}return f=u.data,g=(0,Ns.Z)(u,oR),this.dataOption=g,$.abrupt("return",(0,oe.Z)({data:f},g));case 4:return $.next=6,u.data;case 6:if(x=$.sent,I=x.rasterData,P=(0,Ns.Z)(x,sR),this.dataOption=P,!Array.isArray(I)){$.next=14;break}return $.abrupt("return",(0,oe.Z)({data:I},P));case 14:return $.abrupt("return",(0,oe.Z)({data:Array.from(I)},P));case 15:case"end":return $.stop()}},o,this)}));function r(o){return n.apply(this,arguments)}return r}()},{key:"initModels",value:function(){var n=(0,An.Z)(Nt().mark(function o(){var u,f,g,x,I,P,G,$,Ee,Se,Re,Ye,St;return Nt().wrap(function(Ut){for(;;)switch(Ut.prev=Ut.next){case 0:return u=this.layer.getLayerConfig(),f=u.mask,g=f===void 0?!1:f,x=u.maskInside,I=x===void 0?!0:x,P=this.layer.getSource(),G=this.rendererService.createTexture2D,$=P.data.dataArray[0],Ut.next=6,this.getRasterData($);case 6:return Ee=Ut.sent,Se=Ee.data,Re=Ee.width,Ye=Ee.height,this.texture=G({data:Se,width:Re,height:Ye,format:$e.RGB,type:$e.FLOAT}),Ut.next=13,this.layer.buildLayerModel({moduleName:"rasterImageDataRGBA",vertexShader:fR,fragmentShader:cR,triangulation:Am,primitive:$e.TRIANGLES,depth:{enable:!1},stencil:zo(g,I)});case 13:return St=Ut.sent,Ut.abrupt("return",[St]);case 15:case"end":return Ut.stop()}},o,this)}));function r(){return n.apply(this,arguments)}return r}()},{key:"buildModels",value:function(){var n=(0,An.Z)(Nt().mark(function o(){return Nt().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return f.next=2,this.initModels();case 2:return f.abrupt("return",f.sent);case 3:case"end":return f.stop()}},o,this)}));function r(){return n.apply(this,arguments)}return r}()},{key:"clearModels",value:function(){var r;(r=this.texture)===null||r===void 0||r.destroy()}},{key:"registerBuiltinAttributes",value:function(){this.styleAttributeService.registerStyleAttribute({name:"uv",type:ja.Attribute,descriptor:{name:"a_Uv",buffer:{usage:$e.DYNAMIC_DRAW,data:[],type:$e.FLOAT},size:2,update:function(o,u,f){return[f[3],f[4]]}}})}}]),t}(Sl);function hR(e){var i=dR();return function(){var n=(0,rr.Z)(e),r;if(i){var o=(0,rr.Z)(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return(0,jn.Z)(this,r)}}function dR(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var vR=`precision mediump float;
uniform float u_opacity: 1.0;

uniform sampler2D u_texture;
uniform sampler2D u_colorTexture;

varying vec2 v_texCoord;

uniform vec2 u_domain;
uniform float u_noDataValue;
uniform bool u_clampLow: true;
uniform bool u_clampHigh: true;

void main() {
  vec4 baseColor = texture2D(u_texture, vec2(v_texCoord.x, v_texCoord.y)) * 256.0;
  float r = baseColor.r * 256.0 * 256.0;
  float g = baseColor.g * 256.0;
  float b = baseColor.b;
  float value =  (r + g + b) * 0.1 - 10000.0;
  
  if (value == u_noDataValue) {
    gl_FragColor = vec4(0.0, 0, 0, 0.0);
  } else if ((!u_clampLow && value < u_domain[0]) || (!u_clampHigh && value > u_domain[1])) {
     gl_FragColor = vec4(0.0, 0, 0, 0.0);
  } else {
    float normalisedValue =(value - u_domain[0]) / (u_domain[1] - u_domain[0]);
    vec4 color = texture2D(u_colorTexture, vec2(normalisedValue, 0));
    gl_FragColor = color;
    gl_FragColor.a =  gl_FragColor.a * u_opacity ;
  }
}
`,mR=`precision highp float;
uniform mat4 u_ModelMatrix;
uniform mat4 u_Mvp;
attribute vec3 a_Position;
attribute vec2 a_Uv;
varying vec2 v_texCoord;
#pragma include "projection"
void main() {
   v_texCoord = a_Uv;
   vec4 project_pos = project_position(vec4(a_Position, 1.0));
   // gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy,0., 1.0));
   if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x
      gl_Position = u_Mvp * (vec4(project_pos.xy,0., 1.0));
   } else {
      gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy,0., 1.0));
   }
}
`,gR=function(e){(0,ui.Z)(t,e);var i=hR(t);function t(){return(0,Ur.Z)(this,t),i.apply(this,arguments)}return(0,Jr.Z)(t,[{key:"getUninforms",value:function(){var r=this.layer.getLayerConfig(),o=r.opacity,u=r.clampLow,f=u===void 0?!0:u,g=r.clampHigh,x=g===void 0?!0:g,I=r.noDataValue,P=I===void 0?-9999999:I,G=r.domain,$=G===void 0?[0,1]:G,Ee=r.rampColors,Se=r.colorTexture,Re=Se;return Se?this.layer.textureService.setColorTexture(Se,Ee):Re=this.layer.textureService.getColorTexture(Ee),{u_opacity:o||1,u_texture:this.texture,u_domain:$,u_clampLow:f,u_clampHigh:typeof x!="undefined"?x:f,u_noDataValue:P,u_colorTexture:Re}}},{key:"initModels",value:function(){var n=(0,An.Z)(Nt().mark(function o(){var u,f,g,x,I,P,G,$,Ee;return Nt().wrap(function(Re){for(;;)switch(Re.prev=Re.next){case 0:return u=this.layer.getLayerConfig(),f=u.mask,g=f===void 0?!1:f,x=u.maskInside,I=x===void 0?!0:x,P=this.layer.getSource(),G=this.rendererService.createTexture2D,Re.next=5,P.data.images;case 5:return $=Re.sent,this.texture=G({data:$[0],width:$[0].width,height:$[0].height}),Re.next=9,this.layer.buildLayerModel({moduleName:"RasterTileDataImage",vertexShader:mR,fragmentShader:vR,triangulation:Am,primitive:$e.TRIANGLES,depth:{enable:!1},blend:this.getBlend(),stencil:zo(g,I)});case 9:return Ee=Re.sent,Re.abrupt("return",[Ee]);case 11:case"end":return Re.stop()}},o,this)}));function r(){return n.apply(this,arguments)}return r}()},{key:"clearModels",value:function(){var r;(r=this.texture)===null||r===void 0||r.destroy()}},{key:"buildModels",value:function(){var n=(0,An.Z)(Nt().mark(function o(){return Nt().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return f.next=2,this.initModels();case 2:return f.abrupt("return",f.sent);case 3:case"end":return f.stop()}},o,this)}));function r(){return n.apply(this,arguments)}return r}()},{key:"registerBuiltinAttributes",value:function(){this.styleAttributeService.registerStyleAttribute({name:"uv",type:ja.Attribute,descriptor:{name:"a_Uv",buffer:{usage:$e.DYNAMIC_DRAW,data:[],type:$e.FLOAT},size:2,update:function(o,u,f){return[f[3],f[4]]}}})}}]),t}(Sl),yR={raster:uE,rasterRgb:pR,raster3d:uE,rasterTerrainRgb:gR},_R=yR;function xR(e){var i=bR();return function(){var n=(0,rr.Z)(e),r;if(i){var o=(0,rr.Z)(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return(0,jn.Z)(this,r)}}function bR(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var Ay=function(e){(0,ui.Z)(t,e);var i=xR(t);function t(){var n;(0,Ur.Z)(this,t);for(var r=arguments.length,o=new Array(r),u=0;u<r;u++)o[u]=arguments[u];return n=i.call.apply(i,[this].concat(o)),(0,He.Z)((0,er.Z)(n),"type","RasterLayer"),n}return(0,Jr.Z)(t,[{key:"buildModels",value:function(){var n=(0,An.Z)(Nt().mark(function o(){var u;return Nt().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return u=this.getModelType(),this.layerModel=new _R[u](this),g.next=4,this.initLayerModels();case 4:case"end":return g.stop()}},o,this)}));function r(){return n.apply(this,arguments)}return r}()},{key:"getDefaultConfig",value:function(){var r=this.getModelType(),o={raster:{},rasterRgb:{},raster3d:{},rasterTerrainRgb:{}};return o[r]}},{key:"getModelType",value:function(){var r=this.layerSource.getParserType();switch(r){case"raster":return"raster";case"rasterRgb":return"rasterRgb";case"image":return"rasterTerrainRgb";default:return"raster"}}}]),t}($v),ER=["rasterData"];function SR(e){var i=wR();return function(){var n=(0,rr.Z)(e),r;if(i){var o=(0,rr.Z)(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return(0,jn.Z)(this,r)}}function wR(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var AR={positions:[0,1],colors:["#000","#fff"]},CR=function(e){(0,ui.Z)(t,e);var i=SR(t);function t(){return(0,Ur.Z)(this,t),i.apply(this,arguments)}return(0,Jr.Z)(t,[{key:"initTileLayer",value:function(){var n=(0,An.Z)(Nt().mark(function o(){var u,f,g,x;return Nt().wrap(function(P){for(;;)switch(P.prev=P.next){case 0:return u=this.parent.getLayerAttributeConfig(),f=this.getLayerOptions(),g=this.getSourceOption(),this.colorTexture=this.parent.textureService.getColorTexture(f.rampColors),x=new Ay((0,oe.Z)((0,oe.Z)({},f),{},{colorTexture:this.colorTexture})).source(g.data,g.options),u&&Object.keys(u).forEach(function(G){var $,Ee,Se=G;x[Se](($=u[Se])===null||$===void 0?void 0:$.field,(Ee=u[Se])===null||Ee===void 0?void 0:Ee.values)}),P.next=8,this.addLayer(x);case 8:this.isLoaded=!0;case 9:case"end":return P.stop()}},o,this)}));function r(){return n.apply(this,arguments)}return r}()},{key:"getSourceOption",value:function(){var r=this.parent.getSource(),o=this.sourceTile.data.data,u=o.rasterData,f=(0,Ns.Z)(o,ER);return{data:u,options:{parser:(0,oe.Z)({type:"raster",extent:this.sourceTile.bounds},f),transforms:r.transforms}}}},{key:"styleUpdate",value:function(){for(var r=this,o=arguments.length,u=new Array(o),f=0;f<o;f++)u[f]=arguments[f];var g=u.rampColors,x=g===void 0?AR:g;this.colorTexture=this.parent.textureService.getColorTexture(x),this.layers.forEach(function(I){return I.style({colorTexture:r.colorTexture})})}},{key:"destroy",value:function(){this.layers.forEach(function(r){return r.destroy()})}}]),t}(Sv),TR=["rasterData"];function MR(e){var i=IR();return function(){var n=(0,rr.Z)(e),r;if(i){var o=(0,rr.Z)(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return(0,jn.Z)(this,r)}}function IR(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var OR=function(e){(0,ui.Z)(t,e);var i=MR(t);function t(){return(0,Ur.Z)(this,t),i.apply(this,arguments)}return(0,Jr.Z)(t,[{key:"initTileLayer",value:function(){var n=(0,An.Z)(Nt().mark(function o(){var u,f,g,x;return Nt().wrap(function(P){for(;;)switch(P.prev=P.next){case 0:return u=this.parent.getLayerAttributeConfig(),f=this.getLayerOptions(),g=this.getSourceOption(),x=new Ay((0,oe.Z)({},f)).source(g.data,g.options),u&&Object.keys(u).forEach(function(G){var $,Ee,Se=G;x[Se](($=u[Se])===null||$===void 0?void 0:$.field,(Ee=u[Se])===null||Ee===void 0?void 0:Ee.values)}),P.next=7,this.addLayer(x);case 7:this.isLoaded=!0;case 8:case"end":return P.stop()}},o,this)}));function r(){return n.apply(this,arguments)}return r}()},{key:"getSourceOption",value:function(){var r=this.parent.getSource(),o=this.sourceTile.data.data,u=o.rasterData,f=(0,Ns.Z)(o,TR);return{data:u,options:{parser:(0,oe.Z)({type:"rasterRgb",extent:this.sourceTile.bounds},f),transforms:r.transforms}}}}]),t}(Sv);function RR(e){var i=PR();return function(){var n=(0,rr.Z)(e),r;if(i){var o=(0,rr.Z)(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return(0,jn.Z)(this,r)}}function PR(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var kR=function(e){(0,ui.Z)(t,e);var i=RR(t);function t(){return(0,Ur.Z)(this,t),i.apply(this,arguments)}return(0,Jr.Z)(t,[{key:"initTileLayer",value:function(){var n=(0,An.Z)(Nt().mark(function o(){var u,f,g,x;return Nt().wrap(function(P){for(;;)switch(P.prev=P.next){case 0:return u=this.parent.getLayerAttributeConfig(),f=this.getLayerOptions(),g=this.getSourceOption(),x=new Ay((0,oe.Z)({},f)).source(g.data,g.options),u&&Object.keys(u).forEach(function(G){var $,Ee,Se=G;x[Se](($=u[Se])===null||$===void 0?void 0:$.field,(Ee=u[Se])===null||Ee===void 0?void 0:Ee.values)}),P.next=7,this.addLayer(x);case 7:this.isLoaded=!0;case 8:case"end":return P.stop()}},o,this)}));function r(){return n.apply(this,arguments)}return r}()},{key:"getSourceOption",value:function(){var r=this.parent.getSource();return{data:this.sourceTile.data,options:{parser:{type:"image",extent:this.sourceTile.bounds},transforms:r.transforms}}}}]),t}(Sv);function LR(e){var i=DR();return function(){var n=(0,rr.Z)(e),r;if(i){var o=(0,rr.Z)(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return(0,jn.Z)(this,r)}}function DR(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var FR=function(e){(0,ui.Z)(t,e);var i=LR(t);function t(){return(0,Ur.Z)(this,t),i.apply(this,arguments)}return(0,Jr.Z)(t,[{key:"initTileLayer",value:function(){var n=(0,An.Z)(Nt().mark(function o(){var u,f,g,x;return Nt().wrap(function(P){for(;;)switch(P.prev=P.next){case 0:return u=this.parent.getLayerAttributeConfig(),f=this.getLayerOptions(),g=this.getSourceOption(),x=new Jg((0,oe.Z)({},f)).source(g.data,g.options),u&&Object.keys(u).forEach(function(G){var $,Ee,Se=G;x[Se](($=u[Se])===null||$===void 0?void 0:$.field,(Ee=u[Se])===null||Ee===void 0?void 0:Ee.values)}),P.next=7,this.addLayer(x);case 7:this.isLoaded=!0;case 8:case"end":return P.stop()}},o,this)}));function r(){return n.apply(this,arguments)}return r}()},{key:"getFeatures",value:function(r){if(!r)return[];var o=this.sourceTile.data;return o.getTileData(r)}},{key:"getSourceOption",value:function(){var r=this.parent.getSource(),o=this.parent.getLayerConfig(),u=o.sourceLayer,f=o.featureId,g=this.getFeatures(u);return{data:{type:"FeatureCollection",features:g},options:{parser:{type:"geojson",featureId:f},transforms:r.transforms}}}}]),t}(Sv);function NR(e){var i=e.type;switch(i){case"PolygonLayer":return $m;case"LineLayer":return $m;case"PointLayer":return $m;case"TileDebugLayer":return j6;case"MaskLayer":return FR;case"RasterLayer":var t=e.getSource().parser.dataType;switch(t){case"rgb":return OR;case"arraybuffer":return CR;case"terrainRGB":return kR;default:return tR}default:return $m}}var BR=["shape","color","size","style","animate","filter","rotate","scale","setBlend","setSelect","setActive"],lE=function(){function e(i){(0,Ur.Z)(this,e),(0,He.Z)(this,"initedTileset",!1),(0,He.Z)(this,"viewchange",(0,Wr.debounce)(this.mapchange,24)),this.parent=i;var t=this.parent.getContainer();this.rendererService=t.get(Ln.IRendererService),this.layerService=t.get(Ln.ILayerService),this.mapService=t.get(Ln.IMapService),this.pickingService=t.get(Ln.IPickingService),this.tileLayerService=new O6({rendererService:this.rendererService,layerService:this.layerService,parent:i}),this.tilePickService=new D6({tileLayerService:this.tileLayerService,layerService:this.layerService,parent:i}),this.parent.setLayerPickService(this.tilePickService),this.proxy(i),this.initTileSetManager()}return(0,Jr.Z)(e,[{key:"initTileSetManager",value:function(){var t,n=this.parent.getSource();this.tilesetManager=n.tileset,this.initedTileset||(this.bindTilesetEvent(),this.initedTileset=!0);var r=this.getCurrentView(),o=r.latLonBounds,u=r.zoom;(t=this.tilesetManager)===null||t===void 0||t.update(u,o)}},{key:"mapchange",value:function(){var t,n=this.getCurrentView(),r=n.latLonBounds,o=n.zoom;if(this.mapService.version==="GAODE1.x"){var u=this.parent.getLayerConfig(),f=u.visible;o<3&&f?(this.parent.updateLayerConfig({visible:!1}),this.layerService.reRender()):o>=3&&!f&&(this.parent.updateLayerConfig({visible:!0}),this.layerService.reRender())}this.lastViewStates&&this.lastViewStates.zoom===o&&this.lastViewStates.latLonBounds.toString()===r.toString()||(this.lastViewStates={zoom:o,latLonBounds:r},(t=this.tilesetManager)===null||t===void 0||t.throttleUpdate(o,r))}},{key:"getCurrentView",value:function(){var t=this.mapService.getBounds(),n=[t[0][0],t[0][1],t[1][0],t[1][1]],r=this.mapService.getZoom();return{latLonBounds:n,zoom:r}}},{key:"bindTilesetEvent",value:function(){var t=this;this.tilesetManager.on("tile-loaded",function(n){}),this.tilesetManager.on("tile-unload",function(n){t.tileUnLoad(n)}),this.tilesetManager.on("tile-error",function(n,r){t.tileError(n)}),this.tilesetManager.on("tile-update",function(){t.tileUpdate()}),this.mapService.on("zoomend",function(){return t.mapchange()}),this.mapService.on("moveend",function(){return t.viewchange()})}},{key:"render",value:function(){this.tileLayerService.render()}},{key:"getLayers",value:function(){return this.tileLayerService.getLayers()}},{key:"getTiles",value:function(){return this.tileLayerService.getTiles()}},{key:"tileLoaded",value:function(t){}},{key:"tileError",value:function(t){console.warn("error:",t)}},{key:"destroy",value:function(){var t;(t=this.tilesetManager)===null||t===void 0||t.destroy(),this.tileLayerService.destroy()}},{key:"tileUnLoad",value:function(t){this.tileLayerService.removeTile(t.key)}},{key:"tileUpdate",value:function(){var i=(0,An.Z)(Nt().mark(function n(){var r=this,o,u;return Nt().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:if(this.tilesetManager){g.next=2;break}return g.abrupt("return");case 2:return o=this.parent.getMinZoom(),u=this.parent.getMaxZoom(),g.next=6,Promise.all(this.tilesetManager.tiles.filter(function(x){return x.isLoaded}).filter(function(x){return x.isVisibleChange}).filter(function(x){return x.data}).filter(function(x){return x.z>=o&&x.z<u}).map(function(){var x=(0,An.Z)(Nt().mark(function I(P){var G,$;return Nt().wrap(function(Se){for(;;)switch(Se.prev=Se.next){case 0:if(r.tileLayerService.hasTile(P.key)){Se.next=9;break}return G=NR(r.parent),$=new G(P,r.parent),Se.next=5,$.initTileLayer();case 5:r.tilePickService.setPickState(),$.getLayers().length!==0&&(r.tileLayerService.addTile($),r.tileLayerService.updateTileVisible(P),r.layerService.reRender()),Se.next=12;break;case 9:r.tileLayerService.updateTileVisible(P),r.tilePickService.setPickState(),r.layerService.reRender();case 12:case"end":return Se.stop()}},I)}));return function(I){return x.apply(this,arguments)}}()));case 6:this.tilesetManager.isLoaded&&this.parent.emit("tiles-loaded",this.tilesetManager.currentTiles);case 7:case"end":return g.stop()}},n,this)}));function t(){return i.apply(this,arguments)}return t}()},{key:"setPickState",value:function(t){}},{key:"pickRender",value:function(t){this.tilePickService.pickRender(t)}},{key:"selectFeature",value:function(t){this.tilePickService.selectFeature(t)}},{key:"highlightPickedFeature",value:function(t){this.tilePickService.highlightPickedFeature(t)}},{key:"proxy",value:function(t){var n=this;BR.forEach(function(r){var o=t[r].bind(t);t[r]=function(){for(var u=arguments.length,f=new Array(u),g=0;g<u;g++)f[g]=arguments[g];return o.apply(void 0,f),n.getLayers().map(function(x){x[r].apply(x,f)}),r==="style"&&n.getTiles().forEach(function(x){return x.styleUpdate.apply(x,f)}),t}})}}]),e}(),cE,fE,zR=(cE=(0,Ki.b2)(),cE(fE=function(){function e(){(0,Ur.Z)(this,e)}return(0,Jr.Z)(e,[{key:"initLayerModel",value:function(){var i=(0,An.Z)(Nt().mark(function n(r){return Nt().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return r.prepareBuildModel(),u.next=3,r.buildModels();case 3:r.styleNeedUpdate=!1;case 4:case"end":return u.stop()}},n)}));function t(n){return i.apply(this,arguments)}return t}()},{key:"prepareLayerModel",value:function(){var i=(0,An.Z)(Nt().mark(function n(r){return Nt().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return r.prepareBuildModel(),u.next=3,r.buildModels();case 3:case"end":return u.stop()}},n)}));function t(n){return i.apply(this,arguments)}return t}()},{key:"apply",value:function(t){var n=this;t.hooks.init.tapPromise("LayerModelPlugin",(0,An.Z)(Nt().mark(function r(){return Nt().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:if(!t.getSource().isTile){u.next=4;break}return t.prepareBuildModel(),t.tileLayer=new lE(t),u.abrupt("return");case 4:return u.next=6,n.initLayerModel(t);case 6:case"end":return u.stop()}},r)}))),t.hooks.beforeRenderData.tapPromise("LayerModelPlugin",function(){var r=(0,An.Z)(Nt().mark(function o(u){return Nt().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:if(u){g.next=2;break}return g.abrupt("return",!1);case 2:if(!t.getSource().isTile){g.next=5;break}return t.tileLayer=new lE(t),g.abrupt("return",!1);case 5:return g.next=7,n.prepareLayerModel(t);case 7:return g.abrupt("return",!0);case 8:case"end":return g.stop()}},o)}));return function(o){return r.apply(this,arguments)}}())}}]),e}())||fE),pE,hE,UR=(pE=(0,Ki.b2)(),pE(hE=function(){function e(){(0,Ur.Z)(this,e)}return(0,Jr.Z)(e,[{key:"apply",value:function(t){t.hooks.afterInit.tap("LayerStylePlugin",function(){var n=t.getLayerConfig(),r=n.autoFit,o=n.fitBoundsOptions;r&&t.fitBounds(o)})}}]),e}())||hE),dE,vE,ZR=["type"],mE={directional:{lights:"u_DirectionalLights",num:"u_NumOfDirectionalLights"},spot:{lights:"u_SpotLights",num:"u_NumOfSpotLights"}},jR={type:"directional",direction:[1,10.5,12],ambient:[.2,.2,.2],diffuse:[.6,.6,.6],specular:[.1,.1,.1]},VR={direction:[0,0,0],ambient:[0,0,0],diffuse:[0,0,0],specular:[0,0,0]},GR={position:[0,0,0],direction:[0,0,0],ambient:[0,0,0],diffuse:[0,0,0],specular:[0,0,0],constant:1,linear:0,quadratic:0,angle:14,exponent:40,blur:5};function HR(e){var i={u_DirectionalLights:new Array(3).fill((0,oe.Z)({},VR)),u_NumOfDirectionalLights:0,u_SpotLights:new Array(3).fill((0,oe.Z)({},GR)),u_NumOfSpotLights:0};return(!e||!e.length)&&(e=[jR]),e.forEach(function(t){var n=t.type,r=n===void 0?"directional":n,o=(0,Ns.Z)(t,ZR),u=mE[r].lights,f=mE[r].num,g=i[f];i[u][g]=(0,oe.Z)((0,oe.Z)({},i[u][g]),o),i[f]++}),i}var WR=(dE=(0,Ki.b2)(),dE(vE=function(){function e(){(0,Ur.Z)(this,e)}return(0,Jr.Z)(e,[{key:"apply",value:function(t){t.hooks.beforeRender.tap("LightingPlugin",function(){var n=t.getLayerConfig(),r=n.enableLighting;r&&t.models.forEach(function(o){return o.addUniforms((0,oe.Z)({},HR()))})})}}]),e}())||vE),gE,yE,$R=(gE=(0,Ki.b2)(),gE(yE=function(){function e(){(0,Ur.Z)(this,e)}return(0,Jr.Z)(e,[{key:"apply",value:function(t,n){var r=this,o=n.rendererService,u=n.postProcessingPassFactory,f=n.normalPassFactory;t.hooks.init.tapPromise("MultiPassRendererPlugin",function(){var g=t.getLayerConfig(),x=g.enableMultiPassRenderer,I=g.passes,P=I===void 0?[]:I;r.enabled=!!x&&t.getLayerConfig().enableMultiPassRenderer!==!1,r.enabled&&(t.multiPassRenderer=xx(t,P,u,f),t.multiPassRenderer.setRenderFlag(!0))}),t.hooks.beforeRender.tap("MultiPassRendererPlugin",function(){if(r.enabled){var g=o.getViewportSize(),x=g.width,I=g.height;t.multiPassRenderer.resize(x,I)}})}}]),e}())||yE),_E,xE,Xm={NONE:0,ENCODE:1,HIGHLIGHT:2},XR=(_E=(0,Ki.b2)(),_E(xE=function(){function e(){(0,Ur.Z)(this,e)}return(0,Jr.Z)(e,[{key:"apply",value:function(t,n){var r=n.styleAttributeService;t.hooks.init.tapPromise("PixelPickingPlugin",function(){var o=t.getLayerConfig(),u=o.enablePicking;r.registerStyleAttribute({name:"pickingColor",type:ja.Attribute,descriptor:{name:"a_PickingColor",buffer:{data:[],type:$e.FLOAT},size:3,update:function(g){var x=g.id;return u?ru(x):[0,0,0]}}})}),t.hooks.beforePickingEncode.tap("PixelPickingPlugin",function(){var o=t.getLayerConfig(),u=o.enablePicking;u&&t.isVisible()&&t.models.forEach(function(f){return f.addUniforms({u_PickingStage:Xm.ENCODE})})}),t.hooks.afterPickingEncode.tap("PixelPickingPlugin",function(){var o=t.getLayerConfig(),u=o.enablePicking;u&&t.isVisible()&&t.models.forEach(function(f){return f.addUniforms({u_PickingStage:Xm.HIGHLIGHT})})}),t.hooks.beforeHighlight.tap("PixelPickingPlugin",function(o){var u=t.getLayerConfig(),f=u.highlightColor,g=u.activeMix,x=g===void 0?0:g,I=typeof f=="string"?co(f):f||[1,0,0,1];t.updateLayerConfig({pickedFeatureID:es(new Uint8Array(o))}),t.models.forEach(function(P){return P.addUniforms({u_PickingStage:Xm.HIGHLIGHT,u_PickingColor:o,u_HighlightColor:I.map(function(G){return G*255}),u_activeMix:x})})}),t.hooks.beforeSelect.tap("PixelPickingPlugin",function(o){var u=t.getLayerConfig(),f=u.selectColor,g=u.selectMix,x=g===void 0?0:g,I=typeof f=="string"?co(f):f||[1,0,0,1];t.updateLayerConfig({pickedFeatureID:es(new Uint8Array(o))}),t.models.forEach(function(P){return P.addUniforms({u_PickingStage:Xm.HIGHLIGHT,u_PickingColor:o,u_HighlightColor:I.map(function(G){return G*255}),u_activeMix:x,u_CurrentSelectedId:o,u_SelectColor:I.map(function(G){return G*255}),u_EnableSelect:1})})})}}]),e}())||xE),YR=["mvt","geojsonvt","testTile"];function KR(e){var i=e.getSource();return YR.includes(i.parser.type)}function Vk(e){return e.getContext?{width:e.width/DOM.DPR,height:e.height/DOM.DPR}:e.getBoundingClientRect()}var bE,EE,QR=(bE=(0,Ki.b2)(),bE(EE=function(){function e(){(0,Ur.Z)(this,e)}return(0,Jr.Z)(e,[{key:"apply",value:function(t,n){var r=this,o=n.styleAttributeService;t.hooks.init.tapPromise("RegisterStyleAttributePlugin",function(){KR(t)||r.registerBuiltinAttributes(o,t)})}},{key:"registerBuiltinAttributes",value:function(t,n){if(n.type==="MaskLayer"){this.registerPositionAttribute(t);return}this.registerPositionAttribute(t),this.registerFilterAttribute(t),this.registerColorAttribute(t),this.registerVertexIdAttribute(t)}},{key:"registerPositionAttribute",value:function(t){t.registerStyleAttribute({name:"position",type:ja.Attribute,descriptor:{name:"a_Position",buffer:{data:[],type:$e.FLOAT},size:3,update:function(r,o,u){return u.length===2?[u[0],u[1],0]:[u[0],u[1],u[2]]}}})}},{key:"registerFilterAttribute",value:function(t){t.registerStyleAttribute({name:"filter",type:ja.Attribute,descriptor:{name:"filter",buffer:{usage:$e.DYNAMIC_DRAW,data:[],type:$e.FLOAT},size:1,update:function(r){var o=r.filter;return o?[1]:[0]}}})}},{key:"registerColorAttribute",value:function(t){t.registerStyleAttribute({name:"color",type:ja.Attribute,descriptor:{name:"a_Color",buffer:{usage:$e.DYNAMIC_DRAW,data:[],type:$e.FLOAT},size:4,update:function(r){var o=r.color;return!o||!o.length?[1,1,1,1]:o}}})}},{key:"registerVertexIdAttribute",value:function(t){t.registerStyleAttribute({name:"vertexId",type:ja.Attribute,descriptor:{name:"a_vertexId",buffer:{usage:$e.DYNAMIC_DRAW,data:[],type:$e.FLOAT},size:1,update:function(r,o){return[o]}}})}}]),e}())||EE),SE,wE,AE,CE,TE,ME,o0,IE,OE,RE,PE,JR=(SE=(0,Ki.b2)(),wE=(0,Ki.f3)(Ln.ICameraService),AE=(0,Ki.f3)(Ln.ICoordinateSystemService),CE=(0,Ki.f3)(Ln.IRendererService),TE=(0,Ki.f3)(Ln.IMapService),SE(ME=(o0=function(){function e(){(0,Ur.Z)(this,e),Bs(this,"cameraService",IE,this),Bs(this,"coordinateSystemService",OE,this),Bs(this,"rendererService",RE,this),Bs(this,"mapService",PE,this)}return(0,Jr.Z)(e,[{key:"apply",value:function(t){var n=this,r=this.mapService.version,o=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],u=[0,0];t.hooks.beforeRender.tap("ShaderUniformPlugin",function(){var f=t.getLayerConfig().tileOrigin;n.coordinateSystemService.refresh(f),r==="GAODE2.x"&&(n.setLayerCenter(t),o=n.mapService.map.customCoords.getMVPMatrix(),u=n.mapService.getCustomCoordCenter());var g=n.rendererService.getViewportSize(),x=g.width,I=g.height;t.models.forEach(function(P){var G;P.addUniforms((G={},(0,He.Z)(G,dv.ProjectionMatrix,n.cameraService.getProjectionMatrix()),(0,He.Z)(G,dv.ViewMatrix,n.cameraService.getViewMatrix()),(0,He.Z)(G,dv.ViewProjectionMatrix,n.cameraService.getViewProjectionMatrix()),(0,He.Z)(G,dv.Zoom,n.cameraService.getZoom()),(0,He.Z)(G,dv.ZoomScale,n.cameraService.getZoomScale()),(0,He.Z)(G,dv.FocalDistance,n.cameraService.getFocalDistance()),(0,He.Z)(G,dv.CameraPosition,n.cameraService.getCameraPosition()),(0,He.Z)(G,wd.CoordinateSystem,n.coordinateSystemService.getCoordinateSystem()),(0,He.Z)(G,wd.ViewportCenter,n.coordinateSystemService.getViewportCenter()),(0,He.Z)(G,wd.ViewportCenterProjection,n.coordinateSystemService.getViewportCenterProjection()),(0,He.Z)(G,wd.PixelsPerDegree,n.coordinateSystemService.getPixelsPerDegree()),(0,He.Z)(G,wd.PixelsPerDegree2,n.coordinateSystemService.getPixelsPerDegree2()),(0,He.Z)(G,wd.PixelsPerMeter,n.coordinateSystemService.getPixelsPerMeter()),(0,He.Z)(G,wd.Mvp,o),(0,He.Z)(G,"u_SceneCenterMKT",u),(0,He.Z)(G,"u_ViewportSize",[x,I]),(0,He.Z)(G,"u_ModelMatrix",n.cameraService.getModelMatrix()),(0,He.Z)(G,"u_DevicePixelRatio",vs.devicePixelRatio),(0,He.Z)(G,"u_PickingBuffer",t.getLayerConfig().pickingBuffer||0),(0,He.Z)(G,"u_shaderPick",Number(t.getShaderPickStat())),G))})})}},{key:"setLayerCenter",value:function(t){t.coordCenter===void 0&&(t.coordCenter=t.getSource().center),this.mapService.setCoordCenter&&this.mapService.setCoordCenter(t.coordCenter)}}]),e}(),IE=Ds(o0.prototype,"cameraService",[wE],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),OE=Ds(o0.prototype,"coordinateSystemService",[AE],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),RE=Ds(o0.prototype,"rendererService",[CE],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),PE=Ds(o0.prototype,"mapService",[TE],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),o0))||ME),kE,LE,qR=(kE=(0,Ki.b2)(),kE(LE=function(){function e(){(0,Ur.Z)(this,e)}return(0,Jr.Z)(e,[{key:"apply",value:function(t){t.hooks.beforeRender.tap("UpdateModelPlugin",function(){t.layerModel&&t.layerModel.needUpdate()}),t.hooks.afterRender.tap("UpdateModelPlugin",function(){t.layerModelNeedUpdate=!1})}}]),e}())||LE),DE,FE,eP=(DE=(0,Ki.b2)(),DE(FE=function(){function e(){(0,Ur.Z)(this,e)}return(0,Jr.Z)(e,[{key:"apply",value:function(t,n){var r=this,o=n.styleAttributeService;t.hooks.init.tapPromise("UpdateStyleAttributePlugin",function(){r.initStyleAttribute(t,{styleAttributeService:o})}),t.hooks.beforeRender.tap("UpdateStyleAttributePlugin",function(){t.layerModelNeedUpdate||t.inited&&r.updateStyleAttribute(t,{styleAttributeService:o})})}},{key:"updateStyleAttribute",value:function(t,n){var r=n.styleAttributeService,o=r.getLayerStyleAttributes()||[],u=r.getLayerStyleAttribute("filter");if(u&&u.needRegenerateVertices){t.layerModelNeedUpdate=!0,o.forEach(function(f){return f.needRegenerateVertices=!1});return}o.filter(function(f){return f.needRegenerateVertices}).forEach(function(f){r.updateAttributeByFeatureRange(f.name,t.getEncodedData(),f.featureRange.startIndex,f.featureRange.endIndex,t),f.needRegenerateVertices=!1})}},{key:"initStyleAttribute",value:function(t,n){var r=n.styleAttributeService,o=r.getLayerStyleAttributes()||[];o.filter(function(u){return u.needRegenerateVertices}).forEach(function(u){r.updateAttributeByFeatureRange(u.name,t.getEncodedData(),u.featureRange.startIndex,u.featureRange.endIndex),u.needRegenerateVertices=!1})}}]),e}())||FE);Th.bind(Ln.ILayerPlugin).to(sI).inRequestScope(),Th.bind(Ln.ILayerPlugin).to(QR).inRequestScope(),Th.bind(Ln.ILayerPlugin).to(M6).inRequestScope(),Th.bind(Ln.ILayerPlugin).to(oI).inRequestScope(),Th.bind(Ln.ILayerPlugin).to(UR).inRequestScope(),Th.bind(Ln.ILayerPlugin).to(eP).inRequestScope(),Th.bind(Ln.ILayerPlugin).to(qR).inRequestScope(),Th.bind(Ln.ILayerPlugin).to($R).inRequestScope(),Th.bind(Ln.ILayerPlugin).to(JR).inRequestScope(),Th.bind(Ln.ILayerPlugin).to(I6).inRequestScope(),Th.bind(Ln.ILayerPlugin).to(WR).inRequestScope(),Th.bind(Ln.ILayerPlugin).to(XR).inRequestScope(),Th.bind(Ln.ILayerPlugin).to(zR).inRequestScope();var tP=c(92593),rP=c.n(tP),nP=function(){function e(i,t){(0,Ur.Z)(this,e);var n=t.buffer,r=t.offset,o=t.stride,u=t.normalized,f=t.size,g=t.divisor;this.buffer=n,this.attribute={buffer:n.get(),offset:r||0,stride:o||0,normalized:u||!1,divisor:g||0},f&&(this.attribute.size=f)}return(0,Jr.Z)(e,[{key:"get",value:function(){return this.attribute}},{key:"updateBuffer",value:function(t){this.buffer.subData(t)}},{key:"destroy",value:function(){this.buffer.destroy()}}]),e}(),Od,Z0,Rd,Bh,j0,ev,V0,Ym,fd,wv,Bp,pd,hd,Km,iP=(Od={},(0,He.Z)(Od,$e.POINTS,"points"),(0,He.Z)(Od,$e.LINES,"lines"),(0,He.Z)(Od,$e.LINE_LOOP,"line loop"),(0,He.Z)(Od,$e.LINE_STRIP,"line strip"),(0,He.Z)(Od,$e.TRIANGLES,"triangles"),(0,He.Z)(Od,$e.TRIANGLE_FAN,"triangle fan"),(0,He.Z)(Od,$e.TRIANGLE_STRIP,"triangle strip"),Od),NE=(Z0={},(0,He.Z)(Z0,$e.STATIC_DRAW,"static"),(0,He.Z)(Z0,$e.DYNAMIC_DRAW,"dynamic"),(0,He.Z)(Z0,$e.STREAM_DRAW,"stream"),Z0),Cy=(Rd={},(0,He.Z)(Rd,$e.BYTE,"int8"),(0,He.Z)(Rd,$e.UNSIGNED_INT,"int16"),(0,He.Z)(Rd,$e.INT,"int32"),(0,He.Z)(Rd,$e.UNSIGNED_BYTE,"uint8"),(0,He.Z)(Rd,$e.UNSIGNED_SHORT,"uint16"),(0,He.Z)(Rd,$e.UNSIGNED_INT,"uint32"),(0,He.Z)(Rd,$e.FLOAT,"float"),Rd),aP=(Bh={},(0,He.Z)(Bh,$e.ALPHA,"alpha"),(0,He.Z)(Bh,$e.LUMINANCE,"luminance"),(0,He.Z)(Bh,$e.LUMINANCE_ALPHA,"luminance alpha"),(0,He.Z)(Bh,$e.RGB,"rgb"),(0,He.Z)(Bh,$e.RGBA,"rgba"),(0,He.Z)(Bh,$e.RGBA4,"rgba4"),(0,He.Z)(Bh,$e.RGB5_A1,"rgb5 a1"),(0,He.Z)(Bh,$e.RGB565,"rgb565"),(0,He.Z)(Bh,$e.DEPTH_COMPONENT,"depth"),(0,He.Z)(Bh,$e.DEPTH_STENCIL,"depth stencil"),Bh),oP=(j0={},(0,He.Z)(j0,$e.DONT_CARE,"dont care"),(0,He.Z)(j0,$e.NICEST,"nice"),(0,He.Z)(j0,$e.FASTEST,"fast"),j0),BE=(ev={},(0,He.Z)(ev,$e.NEAREST,"nearest"),(0,He.Z)(ev,$e.LINEAR,"linear"),(0,He.Z)(ev,$e.LINEAR_MIPMAP_LINEAR,"mipmap"),(0,He.Z)(ev,$e.NEAREST_MIPMAP_LINEAR,"nearest mipmap linear"),(0,He.Z)(ev,$e.LINEAR_MIPMAP_NEAREST,"linear mipmap nearest"),(0,He.Z)(ev,$e.NEAREST_MIPMAP_NEAREST,"nearest mipmap nearest"),ev),zE=(V0={},(0,He.Z)(V0,$e.REPEAT,"repeat"),(0,He.Z)(V0,$e.CLAMP_TO_EDGE,"clamp"),(0,He.Z)(V0,$e.MIRRORED_REPEAT,"mirror"),V0),sP=(Ym={},(0,He.Z)(Ym,$e.NONE,"none"),(0,He.Z)(Ym,$e.BROWSER_DEFAULT_WEBGL,"browser"),Ym),uP=(fd={},(0,He.Z)(fd,$e.NEVER,"never"),(0,He.Z)(fd,$e.ALWAYS,"always"),(0,He.Z)(fd,$e.LESS,"less"),(0,He.Z)(fd,$e.LEQUAL,"lequal"),(0,He.Z)(fd,$e.GREATER,"greater"),(0,He.Z)(fd,$e.GEQUAL,"gequal"),(0,He.Z)(fd,$e.EQUAL,"equal"),(0,He.Z)(fd,$e.NOTEQUAL,"notequal"),fd),UE=(wv={},(0,He.Z)(wv,$e.FUNC_ADD,"add"),(0,He.Z)(wv,$e.MIN_EXT,"min"),(0,He.Z)(wv,$e.MAX_EXT,"max"),(0,He.Z)(wv,$e.FUNC_SUBTRACT,"subtract"),(0,He.Z)(wv,$e.FUNC_REVERSE_SUBTRACT,"reverse subtract"),wv),Qm=(Bp={},(0,He.Z)(Bp,$e.ZERO,"zero"),(0,He.Z)(Bp,$e.ONE,"one"),(0,He.Z)(Bp,$e.SRC_COLOR,"src color"),(0,He.Z)(Bp,$e.ONE_MINUS_SRC_COLOR,"one minus src color"),(0,He.Z)(Bp,$e.SRC_ALPHA,"src alpha"),(0,He.Z)(Bp,$e.ONE_MINUS_SRC_ALPHA,"one minus src alpha"),(0,He.Z)(Bp,$e.DST_COLOR,"dst color"),(0,He.Z)(Bp,$e.ONE_MINUS_DST_COLOR,"one minus dst color"),(0,He.Z)(Bp,$e.DST_ALPHA,"dst alpha"),(0,He.Z)(Bp,$e.ONE_MINUS_DST_ALPHA,"one minus dst alpha"),(0,He.Z)(Bp,$e.CONSTANT_COLOR,"constant color"),(0,He.Z)(Bp,$e.ONE_MINUS_CONSTANT_COLOR,"one minus constant color"),(0,He.Z)(Bp,$e.CONSTANT_ALPHA,"constant alpha"),(0,He.Z)(Bp,$e.ONE_MINUS_CONSTANT_ALPHA,"one minus constant alpha"),(0,He.Z)(Bp,$e.SRC_ALPHA_SATURATE,"src alpha saturate"),Bp),lP=(pd={},(0,He.Z)(pd,$e.NEVER,"never"),(0,He.Z)(pd,$e.ALWAYS,"always"),(0,He.Z)(pd,$e.LESS,"less"),(0,He.Z)(pd,$e.LEQUAL,"lequal"),(0,He.Z)(pd,$e.GREATER,"greater"),(0,He.Z)(pd,$e.GEQUAL,"gequal"),(0,He.Z)(pd,$e.EQUAL,"equal"),(0,He.Z)(pd,$e.NOTEQUAL,"notequal"),pd),s0=(hd={},(0,He.Z)(hd,$e.ZERO,"zero"),(0,He.Z)(hd,$e.KEEP,"keep"),(0,He.Z)(hd,$e.REPLACE,"replace"),(0,He.Z)(hd,$e.INVERT,"invert"),(0,He.Z)(hd,$e.INCR,"increment"),(0,He.Z)(hd,$e.DECR,"decrement"),(0,He.Z)(hd,$e.INCR_WRAP,"increment wrap"),(0,He.Z)(hd,$e.DECR_WRAP,"decrement wrap"),hd),cP=(Km={},(0,He.Z)(Km,$e.FRONT,"front"),(0,He.Z)(Km,$e.BACK,"back"),Km),fP=function(){function e(i,t){(0,Ur.Z)(this,e);var n=t.data,r=t.usage,o=t.type;this.buffer=i.buffer({data:n,usage:NE[r||$e.STATIC_DRAW],type:Cy[o||$e.UNSIGNED_BYTE]})}return(0,Jr.Z)(e,[{key:"get",value:function(){return this.buffer}},{key:"destroy",value:function(){this.buffer.destroy()}},{key:"subData",value:function(t){var n=t.data,r=t.offset;this.buffer.subdata(n,r)}}]),e}(),pP=function(){function e(i,t){(0,Ur.Z)(this,e);var n=t.data,r=t.usage,o=t.type,u=t.count;this.elements=i.elements({data:n,usage:NE[r||$e.STATIC_DRAW],type:Cy[o||$e.UNSIGNED_BYTE],count:u})}return(0,Jr.Z)(e,[{key:"get",value:function(){return this.elements}},{key:"subData",value:function(t){var n=t.data;this.elements.subdata(n)}},{key:"destroy",value:function(){}}]),e}(),hP=function(){function e(i,t){(0,Ur.Z)(this,e);var n=t.width,r=t.height,o=t.color,u=t.colors,f={width:n,height:r};Array.isArray(u)&&(f.colors=u.map(function(g){return g.get()})),o&&typeof o!="boolean"&&(f.color=o.get()),this.framebuffer=i.framebuffer(f)}return(0,Jr.Z)(e,[{key:"get",value:function(){return this.framebuffer}},{key:"destroy",value:function(){this.framebuffer.destroy()}},{key:"resize",value:function(t){var n=t.width,r=t.height;this.framebuffer.resize(n,r)}}]),e}(),dP=function(){function e(i,t){(0,Ur.Z)(this,e),(0,He.Z)(this,"destroyed",!1),(0,He.Z)(this,"uniforms",{}),this.reGl=i;var n=t.pick,r=n===void 0?!0:n,o=t.vs,u=t.fs,f=t.attributes,g=t.uniforms,x=t.primitive,I=t.count,P=t.elements,G=t.depth,$=t.blend,Ee=t.stencil,Se=t.cull,Re=t.instances,Ye={};this.options=t,g&&(this.uniforms=this.extractUniforms(g),Object.keys(g).forEach(function(Kt){Ye[Kt]=i.prop(Kt)}));var St={};Object.keys(f).forEach(function(Kt){St[Kt]=f[Kt].get()});var vt={attributes:St,frag:u,uniforms:Ye,vert:o,blend:{},primitive:iP[x===void 0?$e.TRIANGLES:x]};if(Re&&(vt.instances=Re),I?vt.count=I:P&&(vt.elements=P.get()),this.initDepthDrawParams({depth:G},vt),this.initBlendDrawParams({blend:$},vt),this.initStencilDrawParams({stencil:Ee},vt),this.initCullDrawParams({cull:Se},vt),this.drawCommand=i(vt),r){var Ut=(0,Wr.cloneDeep)(vt);Ut.blend=(0,oe.Z)((0,oe.Z)({},Ut.blend),{},{enable:!1}),this.drawPickCommand=i(Ut)}this.drawParams=vt}return(0,Jr.Z)(e,[{key:"updateAttributesAndElements",value:function(t,n){var r={};if(Object.keys(t).forEach(function(u){r[u]=t[u].get()}),this.drawParams.attributes=r,this.drawParams.elements=n.get(),this.drawCommand=this.reGl(this.drawParams),this.options.pick){var o=(0,Wr.cloneDeep)(this.drawParams);o.blend=(0,oe.Z)((0,oe.Z)({},o.blend),{},{enable:!1}),this.drawPickCommand=this.reGl(o)}}},{key:"updateAttributes",value:function(t){var n={};if(Object.keys(t).forEach(function(o){n[o]=t[o].get()}),this.drawParams.attributes=n,this.drawCommand=this.reGl(this.drawParams),this.options.pick){var r=(0,Wr.cloneDeep)(this.drawParams);r.blend=(0,oe.Z)((0,oe.Z)({},r.blend),{},{enable:!1}),this.drawPickCommand=this.reGl(r)}}},{key:"addUniforms",value:function(t){this.uniforms=(0,oe.Z)((0,oe.Z)({},this.uniforms),this.extractUniforms(t))}},{key:"draw",value:function(t,n){if(!(this.drawParams.attributes&&Object.keys(this.drawParams.attributes).length===0)){var r=(0,oe.Z)((0,oe.Z)({},this.uniforms),this.extractUniforms(t.uniforms||{})),o={};Object.keys(r).forEach(function(u){var f=(0,ve.Z)(r[u]);f==="boolean"||f==="number"||Array.isArray(r[u])||r[u].BYTES_PER_ELEMENT?o[u]=r[u]:o[u]=r[u].get()}),n?this.drawPickCommand&&this.drawPickCommand(o):this.drawCommand(o)}}},{key:"destroy",value:function(){var t,n;(t=this.drawParams)===null||t===void 0||(n=t.elements)===null||n===void 0||n.destroy(),this.options.attributes&&Object.values(this.options.attributes).forEach(function(r){r==null||r.destroy()}),this.destroyed=!0}},{key:"initDepthDrawParams",value:function(t,n){var r=t.depth;r&&(n.depth={enable:r.enable===void 0?!0:!!r.enable,mask:r.mask===void 0?!0:!!r.mask,func:uP[r.func||$e.LESS],range:r.range||[0,1]})}},{key:"initBlendDrawParams",value:function(t,n){var r=t.blend;if(r){var o=r.enable,u=r.func,f=r.equation,g=r.color,x=g===void 0?[0,0,0,0]:g;n.blend={enable:!!o,func:{srcRGB:Qm[u&&u.srcRGB||$e.SRC_ALPHA],srcAlpha:Qm[u&&u.srcAlpha||$e.SRC_ALPHA],dstRGB:Qm[u&&u.dstRGB||$e.ONE_MINUS_SRC_ALPHA],dstAlpha:Qm[u&&u.dstAlpha||$e.ONE_MINUS_SRC_ALPHA]},equation:{rgb:UE[f&&f.rgb||$e.FUNC_ADD],alpha:UE[f&&f.alpha||$e.FUNC_ADD]},color:x}}}},{key:"initStencilDrawParams",value:function(t,n){var r=t.stencil;if(r){var o=r.enable,u=r.mask,f=u===void 0?-1:u,g=r.func,x=g===void 0?{cmp:$e.ALWAYS,ref:0,mask:-1}:g,I=r.opFront,P=I===void 0?{fail:$e.KEEP,zfail:$e.KEEP,zpass:$e.KEEP}:I,G=r.opBack,$=G===void 0?{fail:$e.KEEP,zfail:$e.KEEP,zpass:$e.KEEP}:G;n.stencil={enable:!!o,mask:f,func:(0,oe.Z)((0,oe.Z)({},x),{},{cmp:lP[x.cmp]}),opFront:{fail:s0[P.fail],zfail:s0[P.zfail],zpass:s0[P.zpass]},opBack:{fail:s0[$.fail],zfail:s0[$.zfail],zpass:s0[$.zpass]}}}}},{key:"initCullDrawParams",value:function(t,n){var r=t.cull;if(r){var o=r.enable,u=r.face,f=u===void 0?$e.BACK:u;n.cull={enable:!!o,face:cP[f]}}}},{key:"extractUniforms",value:function(t){var n=this,r={};return Object.keys(t).forEach(function(o){n.extractUniformsRecursively(o,t[o],r,"")}),r}},{key:"extractUniformsRecursively",value:function(t,n,r,o){var u=this;if(n===null||typeof n=="number"||typeof n=="boolean"||Array.isArray(n)&&typeof n[0]=="number"||(0,Wr.isTypedArray)(n)||n===""||"resize"in n){r["".concat(o&&o+".").concat(t)]=n;return}(0,Wr.isPlainObject)(n)&&Object.keys(n).forEach(function(f){u.extractUniformsRecursively(f,n[f],r,"".concat(o&&o+".").concat(t))}),Array.isArray(n)&&n.forEach(function(f,g){Object.keys(f).forEach(function(x){u.extractUniformsRecursively(x,f[x],r,"".concat(o&&o+".").concat(t,"[").concat(g,"]"))})})}}]),e}(),vP=function(){function e(i,t){(0,Ur.Z)(this,e),(0,He.Z)(this,"isDestroy",!1);var n=t.data,r=t.type,o=r===void 0?$e.UNSIGNED_BYTE:r,u=t.width,f=t.height,g=t.flipY,x=g===void 0?!1:g,I=t.format,P=I===void 0?$e.RGBA:I,G=t.mipmap,$=G===void 0?!1:G,Ee=t.wrapS,Se=Ee===void 0?$e.CLAMP_TO_EDGE:Ee,Re=t.wrapT,Ye=Re===void 0?$e.CLAMP_TO_EDGE:Re,St=t.aniso,vt=St===void 0?0:St,Ut=t.alignment,Kt=Ut===void 0?1:Ut,Tr=t.premultiplyAlpha,on=Tr===void 0?!1:Tr,dn=t.mag,vn=dn===void 0?$e.NEAREST:dn,si=t.min,ai=si===void 0?$e.NEAREST:si,Hi=t.colorSpace,wa=Hi===void 0?$e.BROWSER_DEFAULT_WEBGL:Hi,qa=t.x,zs=qa===void 0?0:qa,Ou=t.y,Ul=Ou===void 0?0:Ou,Gl=t.copy,Ic=Gl===void 0?!1:Gl;this.width=u,this.height=f;var Eh={width:u,height:f,type:Cy[o],format:aP[P],wrapS:zE[Se],wrapT:zE[Ye],mag:BE[vn],min:BE[ai],alignment:Kt,flipY:x,colorSpace:sP[wa],premultiplyAlpha:on,aniso:vt,x:zs,y:Ul,copy:Ic};n&&(Eh.data=n),typeof $=="number"?Eh.mipmap=oP[$]:typeof $=="boolean"&&(Eh.mipmap=$),this.texture=i.texture(Eh)}return(0,Jr.Z)(e,[{key:"get",value:function(){return this.texture}},{key:"update",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.texture(t)}},{key:"bind",value:function(){this.texture._texture.bind()}},{key:"resize",value:function(t){var n=t.width,r=t.height;this.texture.resize(n,r),this.width=n,this.height=r}},{key:"destroy",value:function(){if(!this.isDestroy){var t;(t=this.texture)===null||t===void 0||t.destroy()}this.isDestroy=!0}}]),e}(),ZE,jE,mP=(ZE=(0,Ki.b2)(),ZE(jE=function(){function e(){var i=this;(0,Ur.Z)(this,e),(0,He.Z)(this,"createModel",function(t){return new dP(i.gl,t)}),(0,He.Z)(this,"createAttribute",function(t){return new nP(i.gl,t)}),(0,He.Z)(this,"createBuffer",function(t){return new fP(i.gl,t)}),(0,He.Z)(this,"createElements",function(t){return new pP(i.gl,t)}),(0,He.Z)(this,"createTexture2D",function(t){return new vP(i.gl,t)}),(0,He.Z)(this,"createFramebuffer",function(t){return new hP(i.gl,t)}),(0,He.Z)(this,"useFramebuffer",function(t,n){i.gl({framebuffer:t?t.get():null})(n)}),(0,He.Z)(this,"clear",function(t){var n,r=t.color,o=t.depth,u=t.stencil,f=t.framebuffer,g=f===void 0?null:f,x={color:r,depth:o,stencil:u};x.framebuffer=g===null?g:g.get(),(n=i.gl)===null||n===void 0||n.clear(x)}),(0,He.Z)(this,"viewport",function(t){var n=t.x,r=t.y,o=t.width,u=t.height;i.gl._gl.viewport(n,r,o,u),i.width=o,i.height=u,i.gl._refresh()}),(0,He.Z)(this,"readPixels",function(t){var n=t.framebuffer,r=t.x,o=t.y,u=t.width,f=t.height,g={x:r,y:o,width:u,height:f};return n&&(g.framebuffer=n.get()),i.gl.read(g)}),(0,He.Z)(this,"getViewportSize",function(){return{width:i.gl._gl.drawingBufferWidth,height:i.gl._gl.drawingBufferHeight}}),(0,He.Z)(this,"getContainer",function(){if(qu)return i.canvas;var t;return(t=i.canvas)===null||t===void 0?void 0:t.parentElement}),(0,He.Z)(this,"getCanvas",function(){return i.canvas}),(0,He.Z)(this,"getGLContext",function(){return i.gl._gl}),(0,He.Z)(this,"destroy",function(){var t,n,r;i.canvas=null,(t=i.gl)===null||t===void 0||(n=t._gl)===null||n===void 0||(r=n.getExtension("WEBGL_lose_context"))===null||r===void 0||r.loseContext(),i.gl.destroy(),i.gl=null})}return(0,Jr.Z)(e,[{key:"init",value:function(){var i=(0,An.Z)(Nt().mark(function n(r,o,u){var f=this;return Nt().wrap(function(x){for(;;)switch(x.prev=x.next){case 0:if(this.canvas=r,!u){x.next=5;break}this.gl=u,x.next=8;break;case 5:return x.next=7,new Promise(function(I,P){rP()({canvas:f.canvas,attributes:{alpha:!0,antialias:o.antialias,premultipliedAlpha:!0,preserveDrawingBuffer:o.preserveDrawingBuffer,stencil:o.stencil},extensions:["OES_element_index_uint","OES_standard_derivatives","ANGLE_instanced_arrays"],optionalExtensions:["oes_texture_float_linear","OES_texture_float","EXT_texture_filter_anisotropic","EXT_blend_minmax","WEBGL_depth_texture"],profile:!0,onDone:function($,Ee){($||!Ee)&&P($),I(Ee)}})});case 7:this.gl=x.sent;case 8:this.extensionObject={OES_texture_float:this.testExtension("OES_texture_float")};case 9:case"end":return x.stop()}},n,this)}));function t(n,r,o){return i.apply(this,arguments)}return t}()},{key:"getPointSizeRange",value:function(){return this.gl._gl.getParameter(this.gl._gl.ALIASED_POINT_SIZE_RANGE)}},{key:"testExtension",value:function(t){return!!this.getGLContext().getExtension(t)}},{key:"setState",value:function(){this.gl({cull:{enable:!1,face:"back"},viewport:{x:0,y:0,height:this.width,width:this.height},blend:{enable:!0,equation:"add"},framebuffer:null}),this.gl._refresh()}},{key:"setBaseState",value:function(){this.gl({cull:{enable:!1,face:"back"},viewport:{x:0,y:0,height:this.width,width:this.height},blend:{enable:!1,equation:"add"},framebuffer:null}),this.gl._refresh()}},{key:"setCustomLayerDefaults",value:function(){var t=this.getGLContext();t.disable(t.CULL_FACE)}},{key:"setDirty",value:function(t){this.isDirty=t}},{key:"getDirty",value:function(){return this.isDirty}}]),e}())||jE);function gP(e){var i=yP();return function(){var n=(0,rr.Z)(e),r;if(i){var o=(0,rr.Z)(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return(0,jn.Z)(this,r)}}function yP(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var Ty=["selectstart","selecting","selectend"],_P=function(e){(0,ui.Z)(t,e);var i=gP(t);function t(n){var r,o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return(0,Ur.Z)(this,t),r=i.call(this),(0,He.Z)((0,er.Z)(r),"isEnable",!1),(0,He.Z)((0,er.Z)(r),"onDragStart",function(u){r.box.style.display="block",r.startEvent=r.endEvent=u,r.syncBoxBound(),r.emit("selectstart",r.getLngLatBox(),r.startEvent,r.endEvent)}),(0,He.Z)((0,er.Z)(r),"onDragging",function(u){r.endEvent=u,r.syncBoxBound(),r.emit("selecting",r.getLngLatBox(),r.startEvent,r.endEvent)}),(0,He.Z)((0,er.Z)(r),"onDragEnd",function(u){r.endEvent=u,r.box.style.display="none",r.emit("selectend",r.getLngLatBox(),r.startEvent,r.endEvent)}),r.scene=n,r.options=o,r}return(0,Jr.Z)(t,[{key:"container",get:function(){return this.scene.getMapService().getMarkerContainer()}},{key:"enable",value:function(){if(!this.isEnable){var r=this.options.className;if(this.scene.setMapStatus({dragEnable:!1}),this.container.style.cursor="crosshair",!this.box){var o=Ua("div",void 0,this.container);o.classList.add("l7-select-box"),r&&o.classList.add(r),o.style.display="none",this.box=o}this.scene.on("dragstart",this.onDragStart),this.scene.on("dragging",this.onDragging),this.scene.on("dragend",this.onDragEnd),this.isEnable=!0}}},{key:"disable",value:function(){!this.isEnable||(this.scene.setMapStatus({dragEnable:!0}),this.container.style.cursor="auto",this.scene.off("dragstart",this.onDragStart),this.scene.off("dragging",this.onDragging),this.scene.off("dragend",this.onDragEnd),this.isEnable=!1)}},{key:"syncBoxBound",value:function(){var r=this.startEvent,o=r.x,u=r.y,f=this.endEvent,g=f.x,x=f.y,I=Math.min(o,g),P=Math.min(u,x),G=Math.abs(o-g),$=Math.abs(u-x);this.box.style.top="".concat(P,"px"),this.box.style.left="".concat(I,"px"),this.box.style.width="".concat(G,"px"),this.box.style.height="".concat($,"px")}},{key:"getLngLatBox",value:function(){var r=this.startEvent.lngLat,o=r.lng,u=r.lat,f=this.endEvent.lngLat,g=f.lng,x=f.lat;return m([[o,u],[g,x]])}}]),t}(ir.EventEmitter),xP=function(){function e(i){(0,Ur.Z)(this,e);var t=i.id,n=i.map,r=i.canvas,o=i.hasBaseMap,u=UA();this.container=u,n.setContainer(u,t,r,o),u.bind(Ln.IRendererService).to(mP).inSingletonScope(),this.sceneService=u.get(Ln.ISceneService),this.mapService=u.get(Ln.IMapService),this.iconService=u.get(Ln.IIconService),this.fontService=u.get(Ln.IFontService),this.controlService=u.get(Ln.IControlService),this.layerService=u.get(Ln.ILayerService),this.markerService=u.get(Ln.IMarkerService),this.interactionService=u.get(Ln.IInteractionService),this.popupService=u.get(Ln.IPopupService),this.boxSelect=new _P(this,{}),qu?this.sceneService.initMiniScene(i):(this.initComponent(t),this.sceneService.init(i),this.initControl())}return(0,Jr.Z)(e,[{key:"map",get:function(){return this.mapService.map}},{key:"loaded",get:function(){return this.sceneService.loaded}},{key:"getServiceContainer",value:function(){return this.container}},{key:"getSize",value:function(){return this.mapService.getSize()}},{key:"getMinZoom",value:function(){return this.mapService.getMinZoom()}},{key:"getMaxZoom",value:function(){return this.mapService.getMaxZoom()}},{key:"getType",value:function(){return this.mapService.getType()}},{key:"getMapContainer",value:function(){return this.mapService.getMapContainer()}},{key:"getMapCanvasContainer",value:function(){return this.mapService.getMapCanvasContainer()}},{key:"getMapService",value:function(){return this.mapService}},{key:"exportPng",value:function(t){return this.sceneService.exportPng(t)}},{key:"exportMap",value:function(t){return this.sceneService.exportPng(t)}},{key:"registerRenderService",value:function(t){var n=this;if(this.sceneService.loaded){var r=new t(this);r.init()}else this.on("loaded",function(){var o=new t(n);o.init()})}},{key:"setBgColor",value:function(t){this.mapService.setBgColor(t)}},{key:"addLayer",value:function(t){var n=this,r=ym(this.container);if(t.setContainer(r,this.container),this.sceneService.addLayer(t),t.inited){var o=this.initMask(t);this.addMask(o,t.id)}else t.on("inited",function(){var u=n.initMask(t);n.addMask(u,t.id)})}},{key:"initMask",value:function(t){var n=t.getLayerConfig(),r=n.mask,o=n.maskfence,u=n.maskColor,f=u===void 0?"#000":u,g=n.maskOpacity,x=g===void 0?0:g;if(!(!r||!o)){var I=new Jg().source(o).shape("fill").style({color:f,opacity:x});return I}}},{key:"addMask",value:function(t,n){if(!!t){var r=this.getLayer(n);if(r){var o=ym(this.container);t.setContainer(o,this.container),r.addMaskLayer(t),this.sceneService.addMask(t)}else console.warn("parent layer not find!")}}},{key:"getPickedLayer",value:function(){return this.layerService.pickedLayerId}},{key:"getLayers",value:function(){return this.layerService.getLayers()}},{key:"getLayer",value:function(t){return this.layerService.getLayer(t)}},{key:"getLayerByName",value:function(t){return this.layerService.getLayerByName(t)}},{key:"removeLayer",value:function(t,n){this.layerService.remove(t,n)}},{key:"removeAllLayer",value:function(){this.layerService.removeAllLayers()}},{key:"render",value:function(){this.sceneService.render()}},{key:"setEnableRender",value:function(t){this.layerService.setEnableRender(t)}},{key:"addIconFont",value:function(t,n){this.fontService.addIconFont(t,n)}},{key:"addIconFonts",value:function(t){var n=this;t.forEach(function(r){var o=(0,Mr.Z)(r,2),u=o[0],f=o[1];n.fontService.addIconFont(u,f)})}},{key:"addFontFace",value:function(t,n){var r=this;this.fontService.once("fontloaded",function(o){r.emit("fontloaded",o)}),this.fontService.addFontFace(t,n)}},{key:"addImage",value:function(){var i=(0,An.Z)(Nt().mark(function n(r,o){return Nt().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:if(qu){f.next=5;break}return f.next=3,this.iconService.addImage(r,o);case 3:f.next=6;break;case 5:this.iconService.addImageMini(r,o,this.sceneService);case 6:case"end":return f.stop()}},n,this)}));function t(n,r){return i.apply(this,arguments)}return t}()},{key:"hasImage",value:function(t){return this.iconService.hasImage(t)}},{key:"removeImage",value:function(t){this.iconService.removeImage(t)}},{key:"addIconFontGlyphs",value:function(t,n){this.fontService.addIconGlyphs(n)}},{key:"addControl",value:function(t){this.controlService.addControl(t,this.container)}},{key:"removeControl",value:function(t){this.controlService.removeControl(t)}},{key:"getControlByName",value:function(t){return this.controlService.getControlByName(t)}},{key:"addMarker",value:function(t){this.markerService.addMarker(t)}},{key:"addMarkerLayer",value:function(t){this.markerService.addMarkerLayer(t)}},{key:"removeMarkerLayer",value:function(t){this.markerService.removeMarkerLayer(t)}},{key:"removeAllMakers",value:function(){this.markerService.removeAllMarkers()}},{key:"addPopup",value:function(t){this.popupService.addPopup(t)}},{key:"removePopup",value:function(t){this.popupService.removePopup(t)}},{key:"on",value:function(t,n){if(Ty.includes(t)){var r;(r=this.boxSelect)===null||r===void 0||r.on(t,n)}else xm.includes(t)?this.sceneService.on(t,n):this.mapService.on(t,n)}},{key:"once",value:function(t,n){if(Ty.includes(t)){var r;(r=this.boxSelect)===null||r===void 0||r.once(t,n)}else xm.includes(t)?this.sceneService.once(t,n):this.mapService.once(t,n)}},{key:"emit",value:function(t,n){xm.indexOf(t)===-1?this.mapService.on(t,n):this.sceneService.emit(t,n)}},{key:"off",value:function(t,n){if(Ty.includes(t)){var r;(r=this.boxSelect)===null||r===void 0||r.off(t,n)}else xm.includes(t)?this.sceneService.off(t,n):this.mapService.off(t,n)}},{key:"getZoom",value:function(){return this.mapService.getZoom()}},{key:"getCenter",value:function(t){return this.mapService.getCenter(t)}},{key:"setCenter",value:function(t,n){return this.mapService.setCenter(t,n)}},{key:"getPitch",value:function(){return this.mapService.getPitch()}},{key:"setPitch",value:function(t){return this.mapService.setPitch(t)}},{key:"getRotation",value:function(){return this.mapService.getRotation()}},{key:"getBounds",value:function(){return this.mapService.getBounds()}},{key:"setRotation",value:function(t){this.mapService.setRotation(t)}},{key:"zoomIn",value:function(){this.mapService.zoomIn()}},{key:"zoomOut",value:function(){this.mapService.zoomOut()}},{key:"panTo",value:function(t){this.mapService.panTo(t)}},{key:"panBy",value:function(t,n){this.mapService.panBy(t,n)}},{key:"getContainer",value:function(){return this.mapService.getContainer()}},{key:"setZoom",value:function(t){this.mapService.setZoom(t)}},{key:"fitBounds",value:function(t,n){var r=this.sceneService.getSceneConfig(),o=r.fitBoundsOptions,u=r.animate;this.mapService.fitBounds(t,n||(0,oe.Z)((0,oe.Z)({},o),{},{animate:u}))}},{key:"setZoomAndCenter",value:function(t,n){this.mapService.setZoomAndCenter(t,n)}},{key:"setMapStyle",value:function(t){this.mapService.setMapStyle(t)}},{key:"setMapStatus",value:function(t){this.mapService.setMapStatus(t)}},{key:"pixelToLngLat",value:function(t){return this.mapService.pixelToLngLat(t)}},{key:"lngLatToPixel",value:function(t){return this.mapService.lngLatToPixel(t)}},{key:"containerToLngLat",value:function(t){return this.mapService.containerToLngLat(t)}},{key:"lngLatToContainer",value:function(t){return this.mapService.lngLatToContainer(t)}},{key:"destroy",value:function(){this.sceneService.destroy()}},{key:"registerPostProcessingPass",value:function(t,n){this.container.bind(Ln.IPostProcessingPass).to(t).whenTargetNamed(n)}},{key:"enableShaderPick",value:function(){this.layerService.enableShaderPick()}},{key:"diasbleShaderPick",value:function(){this.layerService.disableShaderPick()}},{key:"enableBoxSelect",value:function(){var t=this,n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.boxSelect.enable(),n&&this.boxSelect.once("selectend",function(){t.disableBoxSelect()})}},{key:"disableBoxSelect",value:function(){this.boxSelect.disable()}},{key:"getPointSizeRange",value:function(){return this.sceneService.getPointSizeRange()}},{key:"initComponent",value:function(t){this.controlService.init({container:ei(t)},this.container),this.markerService.init(this.container),this.popupService.init(this.container)}},{key:"initControl",value:function(){var t=this.sceneService.getSceneConfig(),n=t.logoVisible,r=t.logoPosition;n&&this.addControl(new tT({position:r}))}}]),e}(),VE,My,GE,HE=(VE=Lg(Ln.IGlobalConfigService),My=function(){function e(i){(0,Ur.Z)(this,e),Bs(this,"configService",GE,this),this.config=i}return(0,Jr.Z)(e,[{key:"setContainer",value:function(t,n,r,o){t.bind(Ln.MapConfig).toConstantValue((0,oe.Z)((0,oe.Z)({},this.config),{},{id:n,canvas:r,hasBaseMap:o})),t.bind(Ln.IMapService).to(this.getServiceConstructor()).inSingletonScope()}},{key:"getServiceConstructor",value:function(){throw new Error("Method not implemented.")}}]),e}(),GE=Ds(My.prototype,"configService",[VE],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),My);if(!window)throw Error("AMap JSAPI can only be used in Browser.");var zh;(function(e){e.notload="notload",e.loading="loading",e.loaded="loaded",e.failed="failed"})(zh||(zh={}));var bh={key:"",AMap:{version:"2.0",plugins:[]}},Pd={AMap:zh.notload},bP={AMap:[]},EP=[],SP=function(i){if(typeof i=="function"){if(Pd.AMap===zh.loaded){i(window.AMap);return}EP.push(i)}},wP=function(){var e=(0,An.Z)(Nt().mark(function i(t){return Nt().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",new Promise(function(o,u){if(Pd.AMap===zh.failed)u("");else if(Pd.AMap===zh.notload){var f=t.key,g=t.version,x=t.plugins;if(!f){u("\u8BF7\u586B\u5199key");return}window.AMap&&location.host!=="lbs.amap.com"&&u("\u7981\u6B62\u591A\u79CDAPI\u52A0\u8F7D\u65B9\u5F0F\u6DF7\u7528"),bh.key=f,bh.AMap.version=g||bh.AMap.version,bh.AMap.plugins=x||bh.AMap.plugins,Pd.AMap=zh.loading;var I=document.body||document.head;window._onAPILoaded=function(Ee){Ee?(Pd.AMap=zh.failed,u(Ee)):(Pd.AMap=zh.loaded,o(null))};var P=document.createElement("script");P.type="text/javascript",P.async=!1,P.src="https://webapi.amap.com/maps?callback=_onAPILoaded&v="+bh.AMap.version+"&key="+f+"&plugin="+bh.AMap.plugins.join(","),P.onerror=function(Ee){Pd.AMap=zh.failed,u(Ee)},I.appendChild(P)}else if(Pd.AMap===zh.loaded){if(t.key&&t.key!==bh.key){u("\u591A\u4E2A\u4E0D\u4E00\u81F4\u7684 key");return}if(t.version&&t.version!==bh.AMap.version){u("\u4E0D\u5141\u8BB8\u591A\u4E2A\u7248\u672C JSAPI \u6DF7\u7528");return}var G=[];t.plugins&&t.plugins.forEach(function(Ee){bh.AMap.plugins.indexOf(Ee)===-1&&G.push(Ee)}),G.length&&window.AMap.plugin(G,function(){o(window.AMap)})}else{if(t.key&&t.key!==bh.key){u("\u591A\u4E2A\u4E0D\u4E00\u81F4\u7684 key");return}if(t.version&&t.version!==bh.AMap.version){u("\u4E0D\u5141\u8BB8\u591A\u4E2A\u7248\u672C JSAPI \u6DF7\u7528");return}var $=[];t.plugins&&t.plugins.forEach(function(Ee){bh.AMap.plugins.indexOf(Ee)===-1&&$.push(Ee)}),SP(function(){$.length&&window.AMap.plugin($,function(){o(window.AMap)})})}}));case 1:case"end":return r.stop()}},i)}));return function(t){return e.apply(this,arguments)}}();function AP(){delete window.AMap,bh={key:"",AMap:{version:"1.4.15",plugins:[]}},Pd={AMap:zh.notload},bP={AMap:[]}}var CP={load:wP,reset:AP},TP=c(41978),MP=c.n(TP),WE=function(){function e(i){(0,Ur.Z)(this,e),(0,He.Z)(this,"size",1e4),this.size=i||1e4}return(0,Jr.Z)(e,[{key:"setSize",value:function(t){this.size=t}},{key:"getSize",value:function(){return[this.size,this.size]}},{key:"mercatorXfromLng",value:function(t){return(180+t)/360*this.size}},{key:"mercatorYfromLat",value:function(t){return(1-(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+t*Math.PI/360)))/360)*this.size}},{key:"lngFromMercatorX",value:function(t){return t/this.size*360-180}},{key:"latFromMercatorY",value:function(t){var n=180-(1-t/this.size)*360;return 360/Math.PI*Math.atan(Math.exp(n*Math.PI/180))-90}},{key:"project",value:function(t){var n=this.mercatorXfromLng(t[0]),r=this.mercatorYfromLat(t[1]);return[n,r]}},{key:"unproject",value:function(t){var n=this.lngFromMercatorX(t[0]),r=this.latFromMercatorY(t[1]);return[n,r]}}]),e}();function $E(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},i={top:0,right:0,bottom:0,left:0};if(typeof e=="number")return{top:e,right:e,bottom:e,left:e};if(Array.isArray(e)){if(e.length===4)return{top:e[0],right:e[1],bottom:e[2],left:e[3]};if(e.length===2)return{top:e[0],right:e[1],bottom:e[0],left:e[1]}}return(0,oe.Z)((0,oe.Z)({},i),e)}function G0(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function Jm(e,i){var t=v0([],i,e);return d0(t,t,1/t[3]),t}function Gk(e,i){var t=e%i;return t<0?i+t:t}function Hk(e,i,t){return t*i+(1-t)*e}function Av(e,i){if(!e)throw new Error(i||"viewport-mercator-project: assertion failed.")}var Kh=Math.PI,XE=Kh/4,kd=Kh/180,YE=180/Kh,Iy=512,Oy=4003e4,IP=1.5;function KE(e){return Math.pow(2,e)}function OP(e){return Math.log2(e)}function qm(e,i){var t=(0,Mr.Z)(e,2),n=t[0],r=t[1];Av(Number.isFinite(n)&&Number.isFinite(i)),Av(Number.isFinite(r)&&r>=-90&&r<=90,"invalid latitude"),i*=Iy;var o=n*kd,u=r*kd,f=i*(o+Kh)/(2*Kh),g=i*(Kh-Math.log(Math.tan(XE+u*.5)))/(2*Kh);return[f,g]}function Ry(e,i){var t=(0,Mr.Z)(e,2),n=t[0],r=t[1];i*=Iy;var o=n/i*(2*Kh)-Kh,u=2*(Math.atan(Math.exp(Kh-r/i*(2*Kh)))-XE);return[o*YE,u*YE]}function Wk(e){var i=e.latitude;assert(Number.isFinite(i));var t=Math.cos(i*kd);return OP(Oy*t)-9}function QE(e){var i=e.latitude,t=e.longitude,n=e.zoom,r=e.scale,o=e.highPrecision,u=o===void 0?!1:o;r=r!==void 0?r:KE(n),Av(Number.isFinite(i)&&Number.isFinite(t)&&Number.isFinite(r));var f={},g=Iy*r,x=Math.cos(i*kd),I=g/360,P=I/x,G=g/Oy/x;if(f.pixelsPerMeter=[G,-G,G],f.metersPerPixel=[1/G,-1/G,1/G],f.pixelsPerDegree=[I,-P,G],f.degreesPerPixel=[1/I,-1/P,1/G],u){var $=kd*Math.tan(i*kd)/x,Ee=I*$/2,Se=g/Oy*$,Re=Se/P*G;f.pixelsPerDegree2=[0,-Ee,Se],f.pixelsPerMeter2=[Re,0,Re]}return f}function $k(e,i){var t=_slicedToArray(e,3),n=t[0],r=t[1],o=t[2],u=_slicedToArray(i,3),f=u[0],g=u[1],x=u[2],I=1,P=QE({longitude:n,latitude:r,scale:I,highPrecision:!0}),G=P.pixelsPerMeter,$=P.pixelsPerMeter2,Ee=qm(e,I);Ee[0]+=f*(G[0]+$[0]*g),Ee[1]+=g*(G[1]+$[1]*g);var Se=Ry(Ee,I),Re=(o||0)+(x||0);return Number.isFinite(o)||Number.isFinite(x)?[Se[0],Se[1],Re]:Se}function RP(e){var i=e.height,t=e.pitch,n=e.bearing,r=e.altitude,o=e.center,u=o===void 0?null:o,f=e.flipY,g=f===void 0?!1:f,x=G0();return th(x,x,[0,0,-r]),Ch(x,x,[1,1,1/i]),hh(x,x,-t*kd),od(x,x,n*kd),g&&Ch(x,x,[1,-1,1]),u&&th(x,x,Bx([],u)),x}function PP(e){var i=e.width,t=e.height,n=e.altitude,r=n===void 0?IP:n,o=e.pitch,u=o===void 0?0:o,f=e.nearZMultiplier,g=f===void 0?1:f,x=e.farZMultiplier,I=x===void 0?1:x,P=u*kd,G=Math.atan(.5/r),$=Math.sin(G)*r/Math.sin(Math.PI/2-P-G),Ee=Math.cos(Math.PI/2-P)*$+r;return{fov:2*Math.atan(t/2/r),aspect:i/t,focalDistance:r,near:g,far:Ee*I}}function kP(e){var i=e.width,t=e.height,n=e.pitch,r=e.altitude,o=e.nearZMultiplier,u=e.farZMultiplier,f=PP({width:i,height:t,altitude:r,pitch:n,nearZMultiplier:o,farZMultiplier:u}),g=f.fov,x=f.aspect,I=f.near,P=f.far,G=Sd([],g,x,I,P);return G}function LP(e,i){var t=(0,Mr.Z)(e,3),n=t[0],r=t[1],o=t[2],u=o===void 0?0:o;return Av(Number.isFinite(n)&&Number.isFinite(r)&&Number.isFinite(u)),Jm(i,[n,r,u,1])}function JE(e,i){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,n=(0,Mr.Z)(e,3),r=n[0],o=n[1],u=n[2];if(Av(Number.isFinite(r)&&Number.isFinite(o),"invalid pixel coordinate"),Number.isFinite(u)){var f=Jm(i,[r,o,u,1]);return f}var g=Jm(i,[r,o,0,1]),x=Jm(i,[r,o,1,1]),I=g[2],P=x[2],G=I===P?0:((t||0)-I)/(P-I);return Pn([],g,x,G)}var qE=G0(),DP=function(){function e(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=i.width,n=i.height,r=i.viewMatrix,o=r===void 0?qE:r,u=i.projectionMatrix,f=u===void 0?qE:u;(0,Ur.Z)(this,e),this.width=t||1,this.height=n||1,this.scale=1,this.pixelsPerMeter=1,this.viewMatrix=o,this.projectionMatrix=f;var g=G0();Sp(g,g,this.projectionMatrix),Sp(g,g,this.viewMatrix),this.viewProjectionMatrix=g;var x=G0();Ch(x,x,[this.width/2,-this.height/2,1]),th(x,x,[1,-1,0]),Sp(x,x,this.viewProjectionMatrix);var I=Dp(G0(),x);if(!I)throw new Error("Pixel project matrix not invertible");this.pixelProjectionMatrix=x,this.pixelUnprojectionMatrix=I,this.equals=this.equals.bind(this),this.project=this.project.bind(this),this.unproject=this.unproject.bind(this),this.projectPosition=this.projectPosition.bind(this),this.unprojectPosition=this.unprojectPosition.bind(this),this.projectFlat=this.projectFlat.bind(this),this.unprojectFlat=this.unprojectFlat.bind(this)}return(0,Jr.Z)(e,[{key:"equals",value:function(t){return t instanceof e?t.width===this.width&&t.height===this.height&&Gd(t.projectionMatrix,this.projectionMatrix)&&Gd(t.viewMatrix,this.viewMatrix):!1}},{key:"project",value:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=n.topLeft,o=r===void 0?!0:r,u=this.projectPosition(t),f=LP(u,this.pixelProjectionMatrix),g=(0,Mr.Z)(f,2),x=g[0],I=g[1],P=o?I:this.height-I;return t.length===2?[x,P]:[x,P,f[2]]}},{key:"unproject",value:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=n.topLeft,o=r===void 0?!0:r,u=n.targetZ,f=(0,Mr.Z)(t,3),g=f[0],x=f[1],I=f[2],P=o?x:this.height-x,G=u&&u*this.pixelsPerMeter,$=JE([g,P,I],this.pixelUnprojectionMatrix,G),Ee=this.unprojectPosition($),Se=(0,Mr.Z)(Ee,3),Re=Se[0],Ye=Se[1],St=Se[2];return Number.isFinite(I)?[Re,Ye,St]:Number.isFinite(u)?[Re,Ye,u]:[Re,Ye]}},{key:"projectPosition",value:function(t){var n=this.projectFlat(t),r=(0,Mr.Z)(n,2),o=r[0],u=r[1],f=(t[2]||0)*this.pixelsPerMeter;return[o,u,f]}},{key:"unprojectPosition",value:function(t){var n=this.unprojectFlat(t),r=(0,Mr.Z)(n,2),o=r[0],u=r[1],f=(t[2]||0)/this.pixelsPerMeter;return[o,u,f]}},{key:"projectFlat",value:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.scale;return t}},{key:"unprojectFlat",value:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.scale;return t}}]),e}();function FP(e){var i=e.width,t=e.height,n=e.bounds,r=e.minExtent,o=r===void 0?0:r,u=e.maxZoom,f=u===void 0?24:u,g=e.padding,x=g===void 0?0:g,I=e.offset,P=I===void 0?[0,0]:I,G=(0,Mr.Z)(n,2),$=(0,Mr.Z)(G[0],2),Ee=$[0],Se=$[1],Re=(0,Mr.Z)(G[1],2),Ye=Re[0],St=Re[1];if(Number.isFinite(x)){var vt=x;x={top:vt,bottom:vt,left:vt,right:vt}}else Av(Number.isFinite(x.top)&&Number.isFinite(x.bottom)&&Number.isFinite(x.left)&&Number.isFinite(x.right));var Ut=new Py({width:i,height:t,longitude:0,latitude:0,zoom:0}),Kt=Ut.project([Ee,St]),Tr=Ut.project([Ye,Se]),on=[Math.max(Math.abs(Tr[0]-Kt[0]),o),Math.max(Math.abs(Tr[1]-Kt[1]),o)],dn=[i-x.left-x.right-Math.abs(P[0])*2,t-x.top-x.bottom-Math.abs(P[1])*2];Av(dn[0]>0&&dn[1]>0);var vn=dn[0]/on[0],si=dn[1]/on[1],ai=(x.right-x.left)/2/vn,Hi=(x.bottom-x.top)/2/si,wa=[(Tr[0]+Kt[0])/2+ai,(Tr[1]+Kt[1])/2+Hi],qa=Ut.unproject(wa),zs=Ut.zoom+Math.log2(Math.abs(Math.min(vn,si)));return{longitude:qa[0],latitude:qa[1],zoom:Math.min(zs,f)}}var Py=function(e){(0,ui.Z)(i,e);function i(){var t,n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=n.width,o=n.height,u=n.latitude,f=u===void 0?0:u,g=n.longitude,x=g===void 0?0:g,I=n.zoom,P=I===void 0?0:I,G=n.pitch,$=G===void 0?0:G,Ee=n.bearing,Se=Ee===void 0?0:Ee,Re=n.altitude,Ye=Re===void 0?1.5:Re,St=n.nearZMultiplier,vt=n.farZMultiplier;(0,Ur.Z)(this,i),r=r||1,o=o||1;var Ut=KE(P);Ye=Math.max(.75,Ye);var Kt=qm([x,f],Ut);Kt[2]=0;var Tr=kP({width:r,height:o,pitch:$,bearing:Se,altitude:Ye,nearZMultiplier:St||1/o,farZMultiplier:vt||1.01}),on=RP({height:o,center:Kt,pitch:$,bearing:Se,altitude:Ye,flipY:!0});return t=(0,jn.Z)(this,(0,rr.Z)(i).call(this,{width:r,height:o,viewMatrix:on,projectionMatrix:Tr})),t.latitude=f,t.longitude=x,t.zoom=P,t.pitch=$,t.bearing=Se,t.altitude=Ye,t.scale=Ut,t.center=Kt,t.pixelsPerMeter=QE((0,er.Z)((0,er.Z)(t))).pixelsPerMeter[2],Object.freeze((0,er.Z)((0,er.Z)(t))),t}return(0,Jr.Z)(i,[{key:"projectFlat",value:function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.scale;return qm(n,r)}},{key:"unprojectFlat",value:function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.scale;return Ry(n,r)}},{key:"getMapCenterByLngLatPosition",value:function(n){var r=n.lngLat,o=n.pos,u=JE(o,this.pixelUnprojectionMatrix),f=qm(r,this.scale),g=al([],f,Ue([],u)),x=al([],this.center,g);return Ry(x,this.scale)}},{key:"getLocationAtPoint",value:function(n){var r=n.lngLat,o=n.pos;return this.getMapCenterByLngLatPosition({lngLat:r,pos:o})}},{key:"fitBounds",value:function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=this.width,u=this.height,f=FP(Object.assign({width:o,height:u,bounds:n},r)),g=f.longitude,x=f.latitude,I=f.zoom;return new i({width:o,height:u,longitude:g,latitude:x,zoom:I})}}]),i}(DP),NP=function(){function e(){(0,Ur.Z)(this,e)}return(0,Jr.Z)(e,[{key:"syncWithMapCamera",value:function(t){var n=t.center,r=t.zoom,o=t.pitch,u=t.bearing,f=t.viewportHeight,g=t.viewportWidth,x=this.viewport?{width:this.viewport.width,height:this.viewport.height,longitude:this.viewport.center[0],latitude:this.viewport.center[1],zoom:this.viewport.zoom,pitch:this.viewport.pitch,bearing:this.viewport.bearing}:{};this.viewport=new Py((0,oe.Z)((0,oe.Z)({},x),{},{width:g,height:f,longitude:n&&n[0],latitude:n&&n[1],zoom:r,pitch:o,bearing:u}))}},{key:"getZoom",value:function(){return this.viewport.zoom}},{key:"getZoomScale",value:function(){return Math.pow(2,this.getZoom())}},{key:"getCenter",value:function(){return[this.viewport.longitude,this.viewport.latitude]}},{key:"getProjectionMatrix",value:function(){return this.viewport.projectionMatrix}},{key:"getModelMatrix",value:function(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}},{key:"getViewMatrix",value:function(){return this.viewport.viewMatrix}},{key:"getViewMatrixUncentered",value:function(){return this.viewport.viewMatrixUncentered}},{key:"getViewProjectionMatrix",value:function(){return this.viewport.viewProjectionMatrix}},{key:"getViewProjectionMatrixUncentered",value:function(){return this.viewport.viewProjectionMatrix}},{key:"getFocalDistance",value:function(){return 1}},{key:"projectFlat",value:function(t,n){return this.viewport.projectFlat(t,n)}}]),e}(),BP={normal:"amap://styles/normal",light:"amap://styles/c422f5c0cfced5be9fe3a83f05f28a68?isPublic=true",dark:"amap://styles/c9f1d10cae34f8ab05e425462c5a58d7?isPublic=true",blank:"amap://styles/07c17002b38775b32a7a76c66cf90e99?isPublic=true",fresh:"amap://styles/fresh",grey:"amap://styles/grey",graffiti:"amap://styles/graffiti",macaron:"amap://styles/macaron",darkblue:"amap://styles/darkblue",wine:"amap://styles/wine"},zP=["id","style","minZoom","maxZoom","token","mapInstance","plugin"],eS,tS,rS,nS,iS,aS,u0,oS,sS,uS,lS;function UP(e,i){var t=typeof my!="undefined"&&!!my&&typeof my.showToast=="function"&&my.isFRM!==!0,n=typeof wx!="undefined"&&wx!==null&&(typeof wx.request!="undefined"||typeof wx.miniProgram!="undefined");if(!(t||n)&&(i||(i=document),!!i)){var r=i.head||i.getElementsByTagName("head")[0];if(!r){r=i.createElement("head");var o=i.body||i.getElementsByTagName("body")[0];o?o.parentNode.insertBefore(r,o):i.documentElement.appendChild(r)}var u=i.createElement("style");return u.type="text/css",u.styleSheet?u.styleSheet.cssText=e:u.appendChild(i.createTextNode(e)),r.appendChild(u),u}}UP(`.amap-logo{
 display: none !important;
}
`);var cS={contextmenu:"rightclick"},ZP=0;window.forceWebGL=!0;var fS="15cd8a57710d40c9b7c0e3cc120f1200",jP="1.4.15",VP="amap-script",ky=!1,eg=[],GP=12,HP=(eS=(0,Ki.b2)(),tS=(0,Ki.f3)(Ln.IGlobalConfigService),rS=(0,Ki.f3)(Ln.MapConfig),nS=(0,Ki.f3)(Ln.ICoordinateSystemService),iS=(0,Ki.f3)(Ln.IEventEmitter),eS(aS=(u0=function(){function e(){var i=this;(0,Ur.Z)(this,e),(0,He.Z)(this,"version",Mc["GAODE1.x"]),(0,He.Z)(this,"simpleMapCoord",new WE),(0,He.Z)(this,"bgColor","rgba(0, 0, 0, 0)"),Bs(this,"configService",oS,this),Bs(this,"config",sS,this),Bs(this,"coordinateSystemService",uS,this),Bs(this,"eventEmitter",lS,this),(0,He.Z)(this,"handleCameraChanged",function(t){var n=t.camera,r=n.fov,o=n.near,u=n.far,f=n.height,g=n.pitch,x=n.rotation,I=n.aspect,P=n.position,G=i.getCenter(),$=G.lng,Ee=G.lat;if(i.emit("mapchange"),i.cameraChangedCallback){i.viewport.syncWithMapCamera({aspect:I,bearing:360-x,far:u,fov:r,cameraHeight:f,near:o,pitch:g,zoom:i.map.getZoom()-1,center:[$,Ee],offsetOrigin:[P.x,P.y]});var Se=i.config.offsetZoom,Re=Se===void 0?GP:Se;i.viewport.getZoom()>Re?i.coordinateSystemService.setCoordinateSystem(yh.P20_OFFSET):i.coordinateSystemService.setCoordinateSystem(yh.P20),i.cameraChangedCallback(i.viewport)}})}return(0,Jr.Z)(e,[{key:"setBgColor",value:function(t){this.bgColor=t}},{key:"addMarkerContainer",value:function(){var t=this.map.getContainer();if(t!==null){var n=t.getElementsByClassName("amap-maps")[0];this.markerContainer=Ua("div","l7-marker-container",n)}}},{key:"getMarkerContainer",value:function(){return this.markerContainer}},{key:"on",value:function(t,n){Dg.indexOf(t)!==-1?this.eventEmitter.on(t,n):this.map.on(cS[t]||t,n)}},{key:"off",value:function(t,n){Dg.indexOf(t)!==-1?this.eventEmitter.off(t,n):this.map.off(cS[t]||t,n)}},{key:"getContainer",value:function(){return this.map.getContainer()}},{key:"getMapCanvasContainer",value:function(){var t;return(t=this.map.getContainer())===null||t===void 0?void 0:t.getElementsByClassName("amap-maps")[0]}},{key:"getSize",value:function(){var t=this.map.getSize();return[t.getWidth(),t.getHeight()]}},{key:"getType",value:function(){return"amap"}},{key:"getZoom",value:function(){return this.map.getZoom()-1}},{key:"setZoom",value:function(t){return this.map.setZoom(t+1)}},{key:"getCenter",value:function(t){if(t!=null&&t.padding){var n=this.getCenter(),r=$E(t.padding),o=this.lngLatToPixel([n.lng,n.lat]),u=[(r.right-r.left)/2,(r.bottom-r.top)/2],f=this.pixelToLngLat([o.x-u[0],o.y-u[1]]);return f}var g=this.map.getCenter();return{lng:g.getLng(),lat:g.getLat()}}},{key:"setCenter",value:function(t,n){if(n!=null&&n.padding){var r=$E(n.padding),o=this.lngLatToPixel(t),u=[(r.right-r.left)/2,(r.bottom-r.top)/2],f=this.pixelToLngLat([o.x+u[0],o.y+u[1]]);this.map.setCenter([f.lng,f.lat])}else this.map.setCenter(t)}},{key:"getPitch",value:function(){return this.map.getPitch()}},{key:"getRotation",value:function(){return 360-this.map.getRotation()}},{key:"getBounds",value:function(){var t=this.map.getBounds().toBounds(),n=t.getNorthEast(),r=t.getSouthWest(),o=this.getCenter(),u=o.lng>n.getLng()||o.lng<r.getLng()?180-n.getLng():n.getLng(),f=o.lng<r.getLng()?r.getLng()-180:r.getLng();return[[f,r.getLat()],[u,n.getLat()]]}},{key:"getMinZoom",value:function(){var t=this.map.get("zooms");return t[0]-1}},{key:"getMaxZoom",value:function(){var t=this.map.get("zooms");return t[1]-1}},{key:"setRotation",value:function(t){return this.map.setRotation(t)}},{key:"setPitch",value:function(t){return this.map.setPitch(t)}},{key:"zoomIn",value:function(){this.map.zoomIn()}},{key:"zoomOut",value:function(){this.map.zoomOut()}},{key:"panTo",value:function(t){this.map.panTo(t)}},{key:"panBy",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;this.map.panBy(t,n)}},{key:"fitBounds",value:function(t){this.map.setBounds(new AMap.Bounds([t[0][0],t[0][1],t[1][0],t[1][1]]))}},{key:"setZoomAndCenter",value:function(t,n){this.map.setZoomAndCenter(t+1,n)}},{key:"setMapStyle",value:function(t){this.map.setMapStyle(this.getMapStyleValue(t))}},{key:"setMapStatus",value:function(t){this.map.setStatus(t)}},{key:"getMapStyleConfig",value:function(){return BP}},{key:"getMapStyleValue",value:function(t){return this.getMapStyleConfig()[t]||t}},{key:"getMapStyle",value:function(){return this.map.getMapStyle()}},{key:"pixelToLngLat",value:function(t){var n=this.map.pixelToLngLat(new AMap.Pixel(t[0],t[1]));return{lng:n.getLng(),lat:n.getLat()}}},{key:"lngLatToPixel",value:function(t){var n=this.map.lnglatToPixel(new AMap.LngLat(t[0],t[1]));return{x:n.getX(),y:n.getY()}}},{key:"containerToLngLat",value:function(t){var n=new AMap.Pixel(t[0],t[1]),r=this.map.containerToLngLat(n);return{lng:r==null?void 0:r.getLng(),lat:r==null?void 0:r.getLat()}}},{key:"lngLatToContainer",value:function(t){var n=new AMap.LngLat(t[0],t[1]),r=this.map.lngLatToContainer(n);return{x:r.getX(),y:r.getY()}}},{key:"lngLatToCoord",value:function(t){var n=this.map.lngLatToGeodeticCoord(t),r=n.x,o=n.y;return[r,-o]}},{key:"lngLatToMercator",value:function(t,n){return{x:0,y:0,z:0}}},{key:"getModelMatrix",value:function(t,n,r){var o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:[1,1,1],u=this.viewport.projectFlat(t),f=no();return th(f,f,lp(u[0],u[1],n)),Ch(f,f,lp(o[0],o[1],o[2])),hh(f,f,r[0]),ad(f,f,r[1]),od(f,f,r[2]),f}},{key:"init",value:function(){var i=(0,An.Z)(Nt().mark(function n(){var r=this,o,u,f,g,x,I,P,G,$,Ee,Se,Re,Ye,St;return Nt().wrap(function(Ut){for(;;)switch(Ut.prev=Ut.next){case 0:return o=this.config,u=o.id,f=o.style,g=f===void 0?"light":f,x=o.minZoom,I=x===void 0?0:x,P=o.maxZoom,G=P===void 0?18:P,$=o.token,Ee=$===void 0?fS:$,Se=o.mapInstance,Re=o.plugin,Ye=Re===void 0?[]:Re,St=(0,Ns.Z)(o,zP),Ut.next=3,new Promise(function(Kt){var Tr=function(){if(Se)r.map=Se,r.$mapContainer=r.map.getContainer(),setTimeout(function(){r.map.on("camerachange",r.handleCameraChanged),Kt()},30);else{r.$mapContainer=r.creatMapContainer(u);var dn=(0,oe.Z)({mapStyle:r.getMapStyleValue(g),zooms:[I,G],viewMode:"3D"},St);dn.zoom&&(dn.zoom+=1);var vn=new AMap.Map(r.$mapContainer,dn);vn.on("camerachange",r.handleCameraChanged),vn.on("camerachange",function(){setTimeout(function(){return r.handleAfterMapChange()})}),r.map=vn,setTimeout(function(){Kt()},10)}};!ky&&!Se?(Ee===fS&&console.warn(r.configService.getSceneWarninfo("MapToken")),ky=!0,Ye.push("Map3D"),MP().load({key:Ee,version:jP,plugins:Ye}).then(function(){Tr(),eg.length&&(eg.forEach(function(on){return on()}),eg=[])}).catch(function(on){throw new Error(on)})):ky&&window.AMap||Se?Tr():eg.push(Tr)});case 3:this.viewport=new NP;case 4:case"end":return Ut.stop()}},n,this)}));function t(){return i.apply(this,arguments)}return t}()},{key:"meterToCoord",value:function(t,n){var r=AMap.GeometryUtil.distance(Kn(AMap.LngLat,(0,ie.Z)(t)),Kn(AMap.LngLat,(0,ie.Z)(n))),o=this.lngLatToCoord(t),u=(0,Mr.Z)(o,2),f=u[0],g=u[1],x=this.lngLatToCoord(n),I=(0,Mr.Z)(x,2),P=I[0],G=I[1],$=Math.sqrt(Math.pow(f-P,2)+Math.pow(g-G,2));return $/r}},{key:"updateView",value:function(t){}},{key:"getOverlayContainer",value:function(){}},{key:"exportMap",value:function(t){var n,r=(n=this.getContainer())===null||n===void 0?void 0:n.getElementsByClassName("amap-layer")[0],o=t==="jpg"?r==null?void 0:r.toDataURL("image/jpeg"):r==null?void 0:r.toDataURL("image/png");return o}},{key:"emit",value:function(t){for(var n,r=arguments.length,o=new Array(r>1?r-1:0),u=1;u<r;u++)o[u-1]=arguments[u];(n=this.eventEmitter).emit.apply(n,[t].concat(o))}},{key:"once",value:function(t){for(var n,r=arguments.length,o=new Array(r>1?r-1:0),u=1;u<r;u++)o[u-1]=arguments[u];(n=this.eventEmitter).once.apply(n,[t].concat(o))}},{key:"destroy",value:function(){var t,n;(t=this.$mapContainer)===null||t===void 0||(n=t.parentNode)===null||n===void 0||n.removeChild(this.$mapContainer),delete window.initAMap;var r=document.getElementById(VP);r&&document.head.removeChild(r),this.map.destroy()}},{key:"getMapContainer",value:function(){return this.$mapContainer}},{key:"onCameraChanged",value:function(t){this.cameraChangedCallback=t}},{key:"handleAfterMapChange",value:function(){this.emit("mapAfterFrameChange")}},{key:"creatMapContainer",value:function(t){var n=t;typeof t=="string"&&(n=document.getElementById(t));var r=document.createElement("div");return r.style.cssText+=`
       position: absolute;
       top: 0;
       height: 100%;
       width: 100%;
     `,r.id="l7_amap_div"+ZP++,n.appendChild(r),r}}]),e}(),oS=Ds(u0.prototype,"configService",[tS],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),sS=Ds(u0.prototype,"config",[rS],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),uS=Ds(u0.prototype,"coordinateSystemService",[nS],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),lS=Ds(u0.prototype,"eventEmitter",[iS],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),u0))||aS),WP=function(){function e(){(0,Ur.Z)(this,e),(0,He.Z)(this,"projectionMatrix",no()),(0,He.Z)(this,"viewMatrix",no()),(0,He.Z)(this,"viewProjectionMatrix",no()),(0,He.Z)(this,"ViewProjectionMatrixUncentered",no()),(0,He.Z)(this,"viewUncenteredMatrix",no())}return(0,Jr.Z)(e,[{key:"syncWithMapCamera",value:function(t){var n=t.zoom,r=n===void 0?1:n,o=t.center,u=o===void 0?[0,0]:o,f=t.offsetOrigin,g=f===void 0?[0,0]:f,x=t.cameraPosition,I=x===void 0?[0,0,0]:x,P=t.up,G=P===void 0?[0,1,0]:P,$=t.lookAt,Ee=$===void 0?[0,0,0]:$,Se=t.aspect,Re=Se===void 0?1:Se,Ye=t.near,St=Ye===void 0?.1:Ye,vt=t.far,Ut=vt===void 0?1e3:vt,Kt=t.fov,Tr=Kt===void 0?45:Kt;this.zoom=r,this.center=u,Sd(this.projectionMatrix,Tr/180*Math.PI,Re,St,Ut);var on=lp.apply(v,(0,ie.Z)(I)),dn=lp.apply(v,(0,ie.Z)(Ee)),vn=lp.apply(v,(0,ie.Z)(G));jd(this.viewMatrix,on,dn,vn),this.viewUncenteredMatrix=Lp(this.viewMatrix),th(this.viewMatrix,this.viewMatrix,lp(-g[0],g[1],0)),Sp(this.viewProjectionMatrix,this.projectionMatrix,this.viewMatrix),Sp(this.ViewProjectionMatrixUncentered,this.projectionMatrix,this.viewMatrix)}},{key:"getZoom",value:function(){return this.zoom}},{key:"getZoomScale",value:function(){return 1048576}},{key:"getCenter",value:function(){var t=(0,Mr.Z)(this.center,2),n=t[0],r=t[1];return[n,r]}},{key:"getProjectionMatrix",value:function(){return this.projectionMatrix}},{key:"getModelMatrix",value:function(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}},{key:"getViewMatrix",value:function(){return this.viewMatrix}},{key:"getViewMatrixUncentered",value:function(){return this.viewUncenteredMatrix}},{key:"getViewProjectionMatrix",value:function(){return this.viewProjectionMatrix}},{key:"getViewProjectionMatrixUncentered",value:function(){return this.ViewProjectionMatrixUncentered}},{key:"getFocalDistance",value:function(){return 1}},{key:"projectFlat",value:function(t){var n=85.0511287798,r=Math.max(Math.min(n,t[1]),-n),o=256<<20,u=Math.PI/180,f=t[0]*u,g=r*u;g=Math.log(Math.tan(Math.PI/4+g/2));var x=.5/Math.PI,I=.5,P=-.5/Math.PI;return u=.5,f=o*(x*f+I)-215440491,g=-(o*(P*g+u)-106744817),[f,g]}}]),e}(),$P=["id","style","minZoom","maxZoom","token","mapInstance","plugin","version"],pS,hS;function XP(e){var i=YP();return function(){var n=(0,rr.Z)(e),r;if(i){var o=(0,rr.Z)(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return(0,jn.Z)(this,r)}}function YP(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function KP(e,i){var t=typeof my!="undefined"&&!!my&&typeof my.showToast=="function"&&my.isFRM!==!0,n=typeof wx!="undefined"&&wx!==null&&(typeof wx.request!="undefined"||typeof wx.miniProgram!="undefined");if(!(t||n)&&(i||(i=document),!!i)){var r=i.head||i.getElementsByTagName("head")[0];if(!r){r=i.createElement("head");var o=i.body||i.getElementsByTagName("body")[0];o?o.parentNode.insertBefore(r,o):i.documentElement.appendChild(r)}var u=i.createElement("style");return u.type="text/css",u.styleSheet?u.styleSheet.cssText=e:u.appendChild(i.createTextNode(e)),r.appendChild(u),u}}KP(`.amap-logo{
 display: none !important;
}
`);var dS=[108.92361,34.54083];window.forceWebGL=!0;var QP="ff533602d57df6f8ab3b0fea226ae52f",vS="2.0",Xk=!1,Yk=null,JP=(pS=(0,Ki.b2)(),pS(hS=function(e){(0,ui.Z)(t,e);var i=XP(t);function t(){var n;(0,Ur.Z)(this,t);for(var r=arguments.length,o=new Array(r),u=0;u<r;u++)o[u]=arguments[u];return n=i.call.apply(i,[this].concat(o)),(0,He.Z)((0,er.Z)(n),"version",Mc["GAODE2.x"]),(0,He.Z)((0,er.Z)(n),"handleViewChanged",function(f){var g=n.map.customCoords.getCameraParams(),x=g.fov,I=g.near,P=g.far,G=g.aspect,$=g.position,Ee=g.lookAt,Se=g.up;n.emit("mapchange");var Re=n.map.customCoords.getCenter();n.cameraChangedCallback&&(n.viewport.syncWithMapCamera({aspect:G,far:P,fov:x,cameraPosition:$,lookAt:Ee,up:Se,near:I,zoom:n.map.getZoom()-1,center:Re,offsetOrigin:[$[0],$[1]]}),n.coordinateSystemService.setCoordinateSystem(yh.P20_2),n.cameraChangedCallback(n.viewport))}),n}return(0,Jr.Z)(t,[{key:"setCustomCoordCenter",value:function(r){this.sceneCenter=r,this.sceneCenterMKT=Mo.apply(void 0,(0,ie.Z)(r))}},{key:"getCustomCoordCenter",value:function(){return this.sceneCenterMKT}},{key:"lngLatToCoordByLayer",value:function(r,o){var u=o||this.sceneCenter,f=Mo.apply(void 0,(0,ie.Z)(u)),g=this._sub(Mo(r[0],r[1]),f);return r[2]&&g.push(r[2]),g}},{key:"lngLatToCoordsByLayer",value:function(r,o){var u=this;return r.map(function(f){return typeof f[0]=="number"?u.lngLatToCoordByLayer(f,o):f.map(function(g){return u.lngLatToCoordByLayer(g,o)})})}},{key:"setCoordCenter",value:function(r){this.map.customCoords.setCenter(r||dS),this.setCustomCoordCenter(r||dS)}},{key:"lngLatToCoord",value:function(r){return this.sceneCenter||(this.map.customCoords.setCenter(r),this.setCustomCoordCenter(r)),this._sub(Mo(r[0],r[1]),this.sceneCenterMKT)}},{key:"lngLatToCoords",value:function(r){var o=this;return r.map(function(u){return typeof u[0]=="number"?o.lngLatToCoord(u):u.map(function(f){return o.lngLatToCoord(f)})})}},{key:"addMarkerContainer",value:function(){if(!!this.map){var r=this.map.getContainer();if(r!==null){var o=r.getElementsByClassName("amap-maps")[0];o.style.zIndex="auto",this.markerContainer=Ua("div","l7-marker-container2",o)}}}},{key:"updateView",value:function(r){}},{key:"getOverlayContainer",value:function(){}},{key:"getType",value:function(){return"amap2"}},{key:"getBounds",value:function(){var r=this.map.getBounds(),o=r.getNorthEast(),u=r.getSouthWest(),f=this.getCenter(),g=f.lng>o.getLng()||f.lng<u.getLng()?180-o.getLng():o.getLng(),x=f.lng<u.getLng()?u.getLng()-180:u.getLng();return[[x,u.getLat()],[g,o.getLat()]]}},{key:"getMinZoom",value:function(){var r=this.map.getZooms();return r[0]-1}},{key:"getMaxZoom",value:function(){var r=this.map.getZooms();return r[1]-1}},{key:"lngLatToContainer",value:function(r){var o=this.map.lngLatToContainer(r);return{x:o.getX(),y:o.getY()}}},{key:"getModelMatrix",value:function(r,o,u){var f=arguments.length>3&&arguments[3]!==void 0?arguments[3]:[1,1,1],g=this.map.customCoords.lngLatToCoord(r),x=no();return th(x,x,lp(g[0],g[1],o)),Ch(x,x,lp(f[0],f[1],f[2])),hh(x,x,u[0]),ad(x,x,u[1]),od(x,x,u[2]),x}},{key:"init",value:function(){var n=(0,An.Z)(Nt().mark(function o(){var u,f,g,x,I,P,G,$,Ee,Se,Re,Ye,St,vt,Ut,Kt,Tr,on,dn,vn,si,ai;return Nt().wrap(function(wa){for(;;)switch(wa.prev=wa.next){case 0:if(u=this.config,f=u.id,g=u.style,x=g===void 0?"light":g,I=u.minZoom,P=I===void 0?0:I,G=u.maxZoom,$=G===void 0?18:G,Ee=u.token,Se=Ee===void 0?QP:Ee,Re=u.mapInstance,Ye=u.plugin,St=Ye===void 0?[]:Ye,vt=u.version,Ut=vt===void 0?vS:vt,Kt=(0,Ns.Z)(u,$P),this.viewport=new WP,window.AMap||Re){wa.next=6;break}return St.push("Map3D"),wa.next=6,CP.load({key:Se,version:vS,plugins:St});case 6:Re?(this.map=Re,this.$mapContainer=this.map.getContainer(),on=this.map.getCenter(),(Tr=this.map.customCoords)===null||Tr===void 0||Tr.setCenter([on.lng,on.lat]),this.setCustomCoordCenter([on.lng,on.lat]),this.map.on("viewchange",this.handleViewChanged)):(this.$mapContainer=this.creatMapContainer(f),vn=(0,oe.Z)({mapStyle:this.getMapStyleValue(x),zooms:[P,$],viewMode:"3D"},Kt),vn.zoom&&(vn.zoom+=1),si=new AMap.Map(this.$mapContainer,vn),this.map=si,ai=si.getCenter(),(dn=this.map.customCoords)===null||dn===void 0||dn.setCenter([ai.lng,ai.lat]),this.setCustomCoordCenter([ai.lng,ai.lat]),si.on("viewchange",this.handleViewChanged)),this.initViewPort();case 8:case"end":return wa.stop()}},o,this)}));function r(){return n.apply(this,arguments)}return r}()},{key:"getMapContainer",value:function(){return this.$mapContainer}},{key:"onCameraChanged",value:function(r){this.cameraChangedCallback=r}},{key:"initViewPort",value:function(){var r,o=(r=this.map.customCoords)===null||r===void 0?void 0:r.getCameraParams(),u=o.fov,f=o.near,g=o.far,x=o.aspect,I=o.position,P=o.lookAt,G=o.up;this.emit("mapchange");var $=this.map.customCoords.getCenter(),Ee=this.map.getZoom();this.cameraChangedCallback&&(this.viewport.syncWithMapCamera({aspect:x,far:g,fov:u,cameraPosition:I,lookAt:P,near:f,up:G,zoom:Ee-1,center:$,offsetOrigin:[I[0],I[1]]}),this.coordinateSystemService.setCoordinateSystem(yh.P20_2),this.cameraChangedCallback(this.viewport))}},{key:"_sub",value:function(r,o){var u=[0,0];return u[0]=r[0]-o[0],u[1]=r[1]-o[1],u}}]),t}(HP))||hS);function qP(e){var i=e7();return function(){var n=(0,rr.Z)(e),r;if(i){var o=(0,rr.Z)(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return(0,jn.Z)(this,r)}}function e7(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var t7=function(e){(0,ui.Z)(t,e);var i=qP(t);function t(){return(0,Ur.Z)(this,t),i.apply(this,arguments)}return(0,Jr.Z)(t,[{key:"getServiceConstructor",value:function(){return JP}}]),t}(HE),r7=c(202),H0=c.n(r7),n7={light:"mapbox://styles/zcxduo/ck2ypyb1r3q9o1co1766dex29",dark:"mapbox://styles/zcxduo/ck241p6413s0b1cpayzldv7x7",normal:"mapbox://styles/mapbox/streets-v11",blank:{version:8,sources:{},layers:[{id:"background",type:"background",layout:{visibility:"none"}}]}},mS,gS,yS,_S,xS,bS,l0,ES,SS,wS,AS,CS={mapmove:"move",camerachange:"move",zoomchange:"zoom",dragging:"drag"},i7=12,a7=(mS=(0,Ki.b2)(),gS=(0,Ki.f3)(Ln.MapConfig),yS=(0,Ki.f3)(Ln.IGlobalConfigService),_S=(0,Ki.f3)(Ln.ICoordinateSystemService),xS=(0,Ki.f3)(Ln.IEventEmitter),mS(bS=(l0=function(){function e(){var i=this;(0,Ur.Z)(this,e),(0,He.Z)(this,"version",Mc.DEFUALT),(0,He.Z)(this,"simpleMapCoord",new WE),(0,He.Z)(this,"bgColor","rgba(0.0, 0.0, 0.0, 0.0)"),Bs(this,"config",ES,this),Bs(this,"configService",SS,this),Bs(this,"coordinateSystemService",wS,this),Bs(this,"eventEmitter",AS,this),(0,He.Z)(this,"handleCameraChanged",function(t){var n=i.map.getCenter(),r=n.lat,o=n.lng;i.emit("mapchange"),i.viewport.syncWithMapCamera({bearing:i.map.getBearing(),center:[o,r],viewportHeight:i.map.transform.height,pitch:i.map.getPitch(),viewportWidth:i.map.transform.width,zoom:i.map.getZoom(),cameraHeight:0}),i.updateCoordinateSystemService(),i.cameraChangedCallback(i.viewport)})}return(0,Jr.Z)(e,[{key:"setBgColor",value:function(t){this.bgColor=t}},{key:"addMarkerContainer",value:function(){var t=this.map.getCanvasContainer();this.markerContainer=Ua("div","l7-marker-container",t),this.markerContainer.setAttribute("tabindex","-1")}},{key:"getMarkerContainer",value:function(){return this.markerContainer}},{key:"getOverlayContainer",value:function(){}},{key:"on",value:function(t,n){Dg.indexOf(t)!==-1?this.eventEmitter.on(t,n):this.map.on(CS[t]||t,n)}},{key:"off",value:function(t,n){this.map.off(CS[t]||t,n),this.eventEmitter.off(t,n)}},{key:"getContainer",value:function(){return this.map.getContainer()}},{key:"getMapCanvasContainer",value:function(){return this.map.getCanvasContainer()}},{key:"getSize",value:function(){if(this.version===Mc.SIMPLE)return this.simpleMapCoord.getSize();var t=this.map.transform;return[t.width,t.height]}},{key:"getType",value:function(){return"default"}},{key:"getZoom",value:function(){return this.map.getZoom()}},{key:"setZoom",value:function(t){return this.map.setZoom(t)}},{key:"getCenter",value:function(){return this.map.getCenter()}},{key:"setCenter",value:function(t){this.map.setCenter(t)}},{key:"getPitch",value:function(){return this.map.getPitch()}},{key:"getRotation",value:function(){return this.map.getBearing()}},{key:"getBounds",value:function(){return this.map.getBounds().toArray()}},{key:"getMinZoom",value:function(){return this.map.getMinZoom()}},{key:"getMaxZoom",value:function(){return this.map.getMaxZoom()}},{key:"setRotation",value:function(t){this.map.setBearing(t)}},{key:"zoomIn",value:function(t,n){this.map.zoomIn(t,n)}},{key:"zoomOut",value:function(t,n){this.map.zoomOut(t,n)}},{key:"setPitch",value:function(t){return this.map.setPitch(t)}},{key:"panTo",value:function(t){this.map.panTo(t)}},{key:"panBy",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;this.panTo([t,n])}},{key:"fitBounds",value:function(t,n){this.map.fitBounds(t,n)}},{key:"setMaxZoom",value:function(t){this.map.setMaxZoom(t)}},{key:"setMinZoom",value:function(t){this.map.setMinZoom(t)}},{key:"setMapStatus",value:function(t){t.doubleClickZoom===!0&&this.map.doubleClickZoom.enable(),t.doubleClickZoom===!1&&this.map.doubleClickZoom.disable(),t.dragEnable===!1&&this.map.dragPan.disable(),t.dragEnable===!0&&this.map.dragPan.enable(),t.rotateEnable===!1&&this.map.dragRotate.disable(),t.dragEnable===!0&&this.map.dragRotate.enable(),t.keyboardEnable===!1&&this.map.keyboard.disable(),t.keyboardEnable===!0&&this.map.keyboard.enable(),t.zoomEnable===!1&&this.map.scrollZoom.disable(),t.zoomEnable===!0&&this.map.scrollZoom.enable()}},{key:"setZoomAndCenter",value:function(t,n){this.map.flyTo({zoom:t,center:n})}},{key:"setMapStyle",value:function(t){this.map.setStyle(this.getMapStyleValue(t))}},{key:"meterToCoord",value:function(t,n){return 1}},{key:"pixelToLngLat",value:function(t){return this.map.unproject(t)}},{key:"lngLatToPixel",value:function(t){return this.map.project(t)}},{key:"containerToLngLat",value:function(t){return this.map.unproject(t)}},{key:"lngLatToContainer",value:function(t){return this.map.project(t)}},{key:"getMapStyle",value:function(){try{var t,n=(t=this.map.getStyle().sprite)!==null&&t!==void 0?t:"";return/^mapbox:\/\/sprites\/zcxduo\/\w+\/\w+$/.test(n)?n==null?void 0:n.replace(/\/\w+$/,"").replace(/sprites/,"styles"):n}catch(r){return""}}},{key:"getMapStyleConfig",value:function(){return n7}},{key:"getMapStyleValue",value:function(t){var n;return(n=this.getMapStyleConfig()[t])!==null&&n!==void 0?n:t}},{key:"destroy",value:function(){this.eventEmitter.removeAllListeners(),this.map&&(this.map.remove(),this.$mapContainer=null)}},{key:"emit",value:function(t){for(var n,r=arguments.length,o=new Array(r>1?r-1:0),u=1;u<r;u++)o[u-1]=arguments[u];(n=this.eventEmitter).emit.apply(n,[t].concat(o))}},{key:"once",value:function(t){for(var n,r=arguments.length,o=new Array(r>1?r-1:0),u=1;u<r;u++)o[u-1]=arguments[u];(n=this.eventEmitter).once.apply(n,[t].concat(o))}},{key:"getMapContainer",value:function(){return this.$mapContainer}},{key:"exportMap",value:function(t){var n=this.map.getCanvas(),r=t==="jpg"?n==null?void 0:n.toDataURL("image/jpeg"):n==null?void 0:n.toDataURL("image/png");return r}},{key:"onCameraChanged",value:function(t){this.cameraChangedCallback=t}},{key:"creatMapContainer",value:function(t){var n=t;return typeof t=="string"&&(n=document.getElementById(t)),n}},{key:"updateView",value:function(t){this.emit("mapchange"),this.viewport.syncWithMapCamera({bearing:t.bearing,center:t.center,viewportHeight:t.viewportHeight,pitch:t.pitch,viewportWidth:t.viewportWidth,zoom:t.zoom,cameraHeight:0}),this.updateCoordinateSystemService(),this.cameraChangedCallback(this.viewport)}},{key:"updateCoordinateSystemService",value:function(){var t=this.config.offsetCoordinate,n=t===void 0?!0:t;this.viewport.getZoom()>i7&&n?this.coordinateSystemService.setCoordinateSystem(yh.LNGLAT_OFFSET):this.coordinateSystemService.setCoordinateSystem(yh.LNGLAT)}}]),e}(),ES=Ds(l0.prototype,"config",[gS],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),SS=Ds(l0.prototype,"configService",[yS],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),wS=Ds(l0.prototype,"coordinateSystemService",[_S],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),AS=Ds(l0.prototype,"eventEmitter",[xS],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),l0))||bS),o7=function(){function e(){(0,Ur.Z)(this,e)}return(0,Jr.Z)(e,[{key:"syncWithMapCamera",value:function(t){var n=t.center,r=t.zoom,o=t.pitch,u=t.bearing,f=t.viewportHeight,g=t.viewportWidth;this.viewport=new Py({width:g,height:f,longitude:n&&n[0],latitude:n&&n[1],zoom:r,pitch:o,bearing:u})}},{key:"getZoom",value:function(){return this.viewport.zoom}},{key:"getZoomScale",value:function(){return Math.pow(2,this.getZoom())}},{key:"getCenter",value:function(){return[this.viewport.longitude,this.viewport.latitude]}},{key:"getProjectionMatrix",value:function(){return this.viewport.projectionMatrix}},{key:"getModelMatrix",value:function(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}},{key:"getViewMatrix",value:function(){return this.viewport.viewMatrix}},{key:"getViewMatrixUncentered",value:function(){return this.viewport.viewMatrixUncentered}},{key:"getViewProjectionMatrix",value:function(){return this.viewport.viewProjectionMatrix}},{key:"getViewProjectionMatrixUncentered",value:function(){return this.viewport.viewProjectionMatrix}},{key:"getFocalDistance",value:function(){return 1}},{key:"projectFlat",value:function(t,n){return this.viewport.projectFlat(t,n)}}]),e}(),s7=["id","attributionControl","style","token","rotation","mapInstance"],TS,MS;function u7(e){var i=l7();return function(){var n=(0,rr.Z)(e),r;if(i){var o=(0,rr.Z)(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return(0,jn.Z)(this,r)}}function l7(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function c7(e,i){var t=typeof my!="undefined"&&!!my&&typeof my.showToast=="function"&&my.isFRM!==!0,n=typeof wx!="undefined"&&wx!==null&&(typeof wx.request!="undefined"||typeof wx.miniProgram!="undefined");if(!(t||n)&&(i||(i=document),!!i)){var r=i.head||i.getElementsByTagName("head")[0];if(!r){r=i.createElement("head");var o=i.body||i.getElementsByTagName("body")[0];o?o.parentNode.insertBefore(r,o):i.documentElement.appendChild(r)}var u=i.createElement("style");return u.type="text/css",u.styleSheet?u.styleSheet.cssText=e:u.appendChild(i.createTextNode(e)),r.appendChild(u),u}}c7(`.mapboxgl-map{font:12px/20px Helvetica Neue,Arial,Helvetica,sans-serif;overflow:hidden;position:relative;-webkit-tap-highlight-color:rgba(0,0,0,0)}.mapboxgl-canvas{position:absolute;left:0;top:0}.mapboxgl-map:-webkit-full-screen{width:100%;height:100%}.mapboxgl-canary{background-color:salmon}.mapboxgl-canvas-container.mapboxgl-interactive,.mapboxgl-ctrl-group button.mapboxgl-ctrl-compass{cursor:-webkit-grab;cursor:grab;-moz-user-select:none;-webkit-user-select:none;-ms-user-select:none;user-select:none}.mapboxgl-canvas-container.mapboxgl-interactive.mapboxgl-track-pointer{cursor:pointer}.mapboxgl-canvas-container.mapboxgl-interactive:active,.mapboxgl-ctrl-group button.mapboxgl-ctrl-compass:active{cursor:-webkit-grabbing;cursor:grabbing}.mapboxgl-canvas-container.mapboxgl-touch-zoom-rotate,.mapboxgl-canvas-container.mapboxgl-touch-zoom-rotate .mapboxgl-canvas{-ms-touch-action:pan-x pan-y;touch-action:pan-x pan-y}.mapboxgl-canvas-container.mapboxgl-touch-drag-pan,.mapboxgl-canvas-container.mapboxgl-touch-drag-pan .mapboxgl-canvas{-ms-touch-action:pinch-zoom;touch-action:pinch-zoom}.mapboxgl-canvas-container.mapboxgl-touch-zoom-rotate.mapboxgl-touch-drag-pan,.mapboxgl-canvas-container.mapboxgl-touch-zoom-rotate.mapboxgl-touch-drag-pan .mapboxgl-canvas{-ms-touch-action:none;touch-action:none}.mapboxgl-ctrl-bottom-left,.mapboxgl-ctrl-bottom-right,.mapboxgl-ctrl-top-left,.mapboxgl-ctrl-top-right{position:absolute;pointer-events:none;z-index:2}.mapboxgl-ctrl-top-left{top:0;left:0}.mapboxgl-ctrl-top-right{top:0;right:0}.mapboxgl-ctrl-bottom-left{bottom:0;left:0}.mapboxgl-ctrl-bottom-right{right:0;bottom:0}.mapboxgl-ctrl{clear:both;pointer-events:auto;-webkit-transform:translate(0);transform:translate(0)}.mapboxgl-ctrl-top-left .mapboxgl-ctrl{margin:10px 0 0 10px;float:left}.mapboxgl-ctrl-top-right .mapboxgl-ctrl{margin:10px 10px 0 0;float:right}.mapboxgl-ctrl-bottom-left .mapboxgl-ctrl{margin:0 0 10px 10px;float:left}.mapboxgl-ctrl-bottom-right .mapboxgl-ctrl{margin:0 10px 10px 0;float:right}.mapboxgl-ctrl-group{border-radius:4px;background:#fff}.mapboxgl-ctrl-group:not(:empty){-webkit-box-shadow:0 0 2px rgba(0,0,0,.1);box-shadow:0 0 0 2px rgba(0,0,0,.1)}@media (-ms-high-contrast:active){.mapboxgl-ctrl-group:not(:empty){-webkit-box-shadow:0 0 0 2px ButtonText;box-shadow:0 0 0 2px ButtonText}}.mapboxgl-ctrl-group button{width:29px;height:29px;display:block;padding:0;outline:none;border:0;-webkit-box-sizing:border-box;box-sizing:border-box;background-color:transparent;cursor:pointer}.mapboxgl-ctrl-group button+button{border-top:1px solid #ddd}.mapboxgl-ctrl button .mapboxgl-ctrl-icon{display:block;width:100%;height:100%;background-repeat:no-repeat;background-position:50%}@media (-ms-high-contrast:active){.mapboxgl-ctrl-icon{background-color:transparent}.mapboxgl-ctrl-group button+button{border-top:1px solid ButtonText}}.mapboxgl-ctrl button::-moz-focus-inner{border:0;padding:0}.mapboxgl-ctrl-attrib-button:focus,.mapboxgl-ctrl-group button:focus{-webkit-box-shadow:0 0 2px 2px #0096ff;box-shadow:0 0 2px 2px #0096ff}.mapboxgl-ctrl button:disabled{cursor:not-allowed}.mapboxgl-ctrl button:disabled .mapboxgl-ctrl-icon{opacity:.25}.mapboxgl-ctrl button:not(:disabled):hover{background-color:rgba(0,0,0,.05)}.mapboxgl-ctrl-group button:focus:focus-visible{-webkit-box-shadow:0 0 2px 2px #0096ff;box-shadow:0 0 2px 2px #0096ff}.mapboxgl-ctrl-group button:focus:not(:focus-visible){-webkit-box-shadow:none;box-shadow:none}.mapboxgl-ctrl-group button:focus:first-child{border-radius:4px 4px 0 0}.mapboxgl-ctrl-group button:focus:last-child{border-radius:0 0 4px 4px}.mapboxgl-ctrl-group button:focus:only-child{border-radius:inherit}.mapboxgl-ctrl button.mapboxgl-ctrl-zoom-out .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23333'%3E%3Cpath d='M10 13c-.75 0-1.5.75-1.5 1.5S9.25 16 10 16h9c.75 0 1.5-.75 1.5-1.5S19.75 13 19 13h-9z'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-zoom-in .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23333'%3E%3Cpath d='M14.5 8.5c-.75 0-1.5.75-1.5 1.5v3h-3c-.75 0-1.5.75-1.5 1.5S9.25 16 10 16h3v3c0 .75.75 1.5 1.5 1.5S16 19.75 16 19v-3h3c.75 0 1.5-.75 1.5-1.5S19.75 13 19 13h-3v-3c0-.75-.75-1.5-1.5-1.5z'/%3E%3C/svg%3E")}@media (-ms-high-contrast:active){.mapboxgl-ctrl button.mapboxgl-ctrl-zoom-out .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23fff'%3E%3Cpath d='M10 13c-.75 0-1.5.75-1.5 1.5S9.25 16 10 16h9c.75 0 1.5-.75 1.5-1.5S19.75 13 19 13h-9z'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-zoom-in .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23fff'%3E%3Cpath d='M14.5 8.5c-.75 0-1.5.75-1.5 1.5v3h-3c-.75 0-1.5.75-1.5 1.5S9.25 16 10 16h3v3c0 .75.75 1.5 1.5 1.5S16 19.75 16 19v-3h3c.75 0 1.5-.75 1.5-1.5S19.75 13 19 13h-3v-3c0-.75-.75-1.5-1.5-1.5z'/%3E%3C/svg%3E")}}@media (-ms-high-contrast:black-on-white){.mapboxgl-ctrl button.mapboxgl-ctrl-zoom-out .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M10 13c-.75 0-1.5.75-1.5 1.5S9.25 16 10 16h9c.75 0 1.5-.75 1.5-1.5S19.75 13 19 13h-9z'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-zoom-in .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M14.5 8.5c-.75 0-1.5.75-1.5 1.5v3h-3c-.75 0-1.5.75-1.5 1.5S9.25 16 10 16h3v3c0 .75.75 1.5 1.5 1.5S16 19.75 16 19v-3h3c.75 0 1.5-.75 1.5-1.5S19.75 13 19 13h-3v-3c0-.75-.75-1.5-1.5-1.5z'/%3E%3C/svg%3E")}}.mapboxgl-ctrl button.mapboxgl-ctrl-fullscreen .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23333'%3E%3Cpath d='M24 16v5.5c0 1.75-.75 2.5-2.5 2.5H16v-1l3-1.5-4-5.5 1-1 5.5 4 1.5-3h1zM6 16l1.5 3 5.5-4 1 1-4 5.5 3 1.5v1H7.5C5.75 24 5 23.25 5 21.5V16h1zm7-11v1l-3 1.5 4 5.5-1 1-5.5-4L6 13H5V7.5C5 5.75 5.75 5 7.5 5H13zm11 2.5c0-1.75-.75-2.5-2.5-2.5H16v1l3 1.5-4 5.5 1 1 5.5-4 1.5 3h1V7.5z'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-shrink .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M18.5 16c-1.75 0-2.5.75-2.5 2.5V24h1l1.5-3 5.5 4 1-1-4-5.5 3-1.5v-1h-5.5zM13 18.5c0-1.75-.75-2.5-2.5-2.5H5v1l3 1.5L4 24l1 1 5.5-4 1.5 3h1v-5.5zm3-8c0 1.75.75 2.5 2.5 2.5H24v-1l-3-1.5L25 5l-1-1-5.5 4L17 5h-1v5.5zM10.5 13c1.75 0 2.5-.75 2.5-2.5V5h-1l-1.5 3L5 4 4 5l4 5.5L5 12v1h5.5z'/%3E%3C/svg%3E")}@media (-ms-high-contrast:active){.mapboxgl-ctrl button.mapboxgl-ctrl-fullscreen .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23fff'%3E%3Cpath d='M24 16v5.5c0 1.75-.75 2.5-2.5 2.5H16v-1l3-1.5-4-5.5 1-1 5.5 4 1.5-3h1zM6 16l1.5 3 5.5-4 1 1-4 5.5 3 1.5v1H7.5C5.75 24 5 23.25 5 21.5V16h1zm7-11v1l-3 1.5 4 5.5-1 1-5.5-4L6 13H5V7.5C5 5.75 5.75 5 7.5 5H13zm11 2.5c0-1.75-.75-2.5-2.5-2.5H16v1l3 1.5-4 5.5 1 1 5.5-4 1.5 3h1V7.5z'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-shrink .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23fff'%3E%3Cpath d='M18.5 16c-1.75 0-2.5.75-2.5 2.5V24h1l1.5-3 5.5 4 1-1-4-5.5 3-1.5v-1h-5.5zM13 18.5c0-1.75-.75-2.5-2.5-2.5H5v1l3 1.5L4 24l1 1 5.5-4 1.5 3h1v-5.5zm3-8c0 1.75.75 2.5 2.5 2.5H24v-1l-3-1.5L25 5l-1-1-5.5 4L17 5h-1v5.5zM10.5 13c1.75 0 2.5-.75 2.5-2.5V5h-1l-1.5 3L5 4 4 5l4 5.5L5 12v1h5.5z'/%3E%3C/svg%3E")}}@media (-ms-high-contrast:black-on-white){.mapboxgl-ctrl button.mapboxgl-ctrl-fullscreen .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M24 16v5.5c0 1.75-.75 2.5-2.5 2.5H16v-1l3-1.5-4-5.5 1-1 5.5 4 1.5-3h1zM6 16l1.5 3 5.5-4 1 1-4 5.5 3 1.5v1H7.5C5.75 24 5 23.25 5 21.5V16h1zm7-11v1l-3 1.5 4 5.5-1 1-5.5-4L6 13H5V7.5C5 5.75 5.75 5 7.5 5H13zm11 2.5c0-1.75-.75-2.5-2.5-2.5H16v1l3 1.5-4 5.5 1 1 5.5-4 1.5 3h1V7.5z'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-shrink .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M18.5 16c-1.75 0-2.5.75-2.5 2.5V24h1l1.5-3 5.5 4 1-1-4-5.5 3-1.5v-1h-5.5zM13 18.5c0-1.75-.75-2.5-2.5-2.5H5v1l3 1.5L4 24l1 1 5.5-4 1.5 3h1v-5.5zm3-8c0 1.75.75 2.5 2.5 2.5H24v-1l-3-1.5L25 5l-1-1-5.5 4L17 5h-1v5.5zM10.5 13c1.75 0 2.5-.75 2.5-2.5V5h-1l-1.5 3L5 4 4 5l4 5.5L5 12v1h5.5z'/%3E%3C/svg%3E")}}.mapboxgl-ctrl button.mapboxgl-ctrl-compass .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23333'%3E%3Cpath d='M10.5 14l4-8 4 8h-8z'/%3E%3Cpath d='M10.5 16l4 8 4-8h-8z' fill='%23ccc'/%3E%3C/svg%3E")}@media (-ms-high-contrast:active){.mapboxgl-ctrl button.mapboxgl-ctrl-compass .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23fff'%3E%3Cpath d='M10.5 14l4-8 4 8h-8z'/%3E%3Cpath d='M10.5 16l4 8 4-8h-8z' fill='%23999'/%3E%3C/svg%3E")}}@media (-ms-high-contrast:black-on-white){.mapboxgl-ctrl button.mapboxgl-ctrl-compass .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M10.5 14l4-8 4 8h-8z'/%3E%3Cpath d='M10.5 16l4 8 4-8h-8z' fill='%23ccc'/%3E%3C/svg%3E")}}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23333'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate:disabled .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23aaa'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3Cpath d='M14 5l1 1-9 9-1-1 9-9z' fill='red'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-active .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%2333b5e5'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-active-error .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23e58978'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-background .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%2333b5e5'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-background-error .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23e54e33'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-waiting .mapboxgl-ctrl-icon{-webkit-animation:mapboxgl-spin 2s linear infinite;animation:mapboxgl-spin 2s linear infinite}@media (-ms-high-contrast:active){.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23fff'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate:disabled .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23999'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3Cpath d='M14 5l1 1-9 9-1-1 9-9z' fill='red'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-active .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%2333b5e5'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-active-error .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23e58978'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-background .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%2333b5e5'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-background-error .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23e54e33'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3C/svg%3E")}}@media (-ms-high-contrast:black-on-white){.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate:disabled .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23666'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3Cpath d='M14 5l1 1-9 9-1-1 9-9z' fill='red'/%3E%3C/svg%3E")}}@-webkit-keyframes mapboxgl-spin{0%{-webkit-transform:rotate(0deg)}to{-webkit-transform:rotate(1turn)}}@keyframes mapboxgl-spin{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}a.mapboxgl-ctrl-logo{width:88px;height:23px;margin:0 0 -4px -4px;display:block;background-repeat:no-repeat;cursor:pointer;overflow:hidden;background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='88' height='23' viewBox='0 0 88 23' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' fill-rule='evenodd'%3E%3Cdefs%3E%3Cpath id='a' d='M11.5 2.25c5.105 0 9.25 4.145 9.25 9.25s-4.145 9.25-9.25 9.25-9.25-4.145-9.25-9.25 4.145-9.25 9.25-9.25zM6.997 15.983c-.051-.338-.828-5.802 2.233-8.873a4.395 4.395 0 013.13-1.28c1.27 0 2.49.51 3.39 1.42.91.9 1.42 2.12 1.42 3.39 0 1.18-.449 2.301-1.28 3.13C12.72 16.93 7 16 7 16l-.003-.017zM15.3 10.5l-2 .8-.8 2-.8-2-2-.8 2-.8.8-2 .8 2 2 .8z'/%3E%3Cpath id='b' d='M50.63 8c.13 0 .23.1.23.23V9c.7-.76 1.7-1.18 2.73-1.18 2.17 0 3.95 1.85 3.95 4.17s-1.77 4.19-3.94 4.19c-1.04 0-2.03-.43-2.74-1.18v3.77c0 .13-.1.23-.23.23h-1.4c-.13 0-.23-.1-.23-.23V8.23c0-.12.1-.23.23-.23h1.4zm-3.86.01c.01 0 .01 0 .01-.01.13 0 .22.1.22.22v7.55c0 .12-.1.23-.23.23h-1.4c-.13 0-.23-.1-.23-.23V15c-.7.76-1.69 1.19-2.73 1.19-2.17 0-3.94-1.87-3.94-4.19 0-2.32 1.77-4.19 3.94-4.19 1.03 0 2.02.43 2.73 1.18v-.75c0-.12.1-.23.23-.23h1.4zm26.375-.19a4.24 4.24 0 00-4.16 3.29c-.13.59-.13 1.19 0 1.77a4.233 4.233 0 004.17 3.3c2.35 0 4.26-1.87 4.26-4.19 0-2.32-1.9-4.17-4.27-4.17zM60.63 5c.13 0 .23.1.23.23v3.76c.7-.76 1.7-1.18 2.73-1.18 1.88 0 3.45 1.4 3.84 3.28.13.59.13 1.2 0 1.8-.39 1.88-1.96 3.29-3.84 3.29-1.03 0-2.02-.43-2.73-1.18v.77c0 .12-.1.23-.23.23h-1.4c-.13 0-.23-.1-.23-.23V5.23c0-.12.1-.23.23-.23h1.4zm-34 11h-1.4c-.13 0-.23-.11-.23-.23V8.22c.01-.13.1-.22.23-.22h1.4c.13 0 .22.11.23.22v.68c.5-.68 1.3-1.09 2.16-1.1h.03c1.09 0 2.09.6 2.6 1.55.45-.95 1.4-1.55 2.44-1.56 1.62 0 2.93 1.25 2.9 2.78l.03 5.2c0 .13-.1.23-.23.23h-1.41c-.13 0-.23-.11-.23-.23v-4.59c0-.98-.74-1.71-1.62-1.71-.8 0-1.46.7-1.59 1.62l.01 4.68c0 .13-.11.23-.23.23h-1.41c-.13 0-.23-.11-.23-.23v-4.59c0-.98-.74-1.71-1.62-1.71-.85 0-1.54.79-1.6 1.8v4.5c0 .13-.1.23-.23.23zm53.615 0h-1.61c-.04 0-.08-.01-.12-.03-.09-.06-.13-.19-.06-.28l2.43-3.71-2.39-3.65a.213.213 0 01-.03-.12c0-.12.09-.21.21-.21h1.61c.13 0 .24.06.3.17l1.41 2.37 1.4-2.37a.34.34 0 01.3-.17h1.6c.04 0 .08.01.12.03.09.06.13.19.06.28l-2.37 3.65 2.43 3.7c0 .05.01.09.01.13 0 .12-.09.21-.21.21h-1.61c-.13 0-.24-.06-.3-.17l-1.44-2.42-1.44 2.42a.34.34 0 01-.3.17zm-7.12-1.49c-1.33 0-2.42-1.12-2.42-2.51 0-1.39 1.08-2.52 2.42-2.52 1.33 0 2.42 1.12 2.42 2.51 0 1.39-1.08 2.51-2.42 2.52zm-19.865 0c-1.32 0-2.39-1.11-2.42-2.48v-.07c.02-1.38 1.09-2.49 2.4-2.49 1.32 0 2.41 1.12 2.41 2.51 0 1.39-1.07 2.52-2.39 2.53zm-8.11-2.48c-.01 1.37-1.09 2.47-2.41 2.47s-2.42-1.12-2.42-2.51c0-1.39 1.08-2.52 2.4-2.52 1.33 0 2.39 1.11 2.41 2.48l.02.08zm18.12 2.47c-1.32 0-2.39-1.11-2.41-2.48v-.06c.02-1.38 1.09-2.48 2.41-2.48s2.42 1.12 2.42 2.51c0 1.39-1.09 2.51-2.42 2.51z'/%3E%3C/defs%3E%3Cmask id='c'%3E%3Crect width='100%25' height='100%25' fill='%23fff'/%3E%3Cuse xlink:href='%23a'/%3E%3Cuse xlink:href='%23b'/%3E%3C/mask%3E%3Cg opacity='.3' stroke='%23000' stroke-width='3'%3E%3Ccircle mask='url(%23c)' cx='11.5' cy='11.5' r='9.25'/%3E%3Cuse xlink:href='%23b' mask='url(%23c)'/%3E%3C/g%3E%3Cg opacity='.9' fill='%23fff'%3E%3Cuse xlink:href='%23a'/%3E%3Cuse xlink:href='%23b'/%3E%3C/g%3E%3C/svg%3E")}a.mapboxgl-ctrl-logo.mapboxgl-compact{width:23px}@media (-ms-high-contrast:active){a.mapboxgl-ctrl-logo{background-color:transparent;background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='88' height='23' viewBox='0 0 88 23' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' fill-rule='evenodd'%3E%3Cdefs%3E%3Cpath id='a' d='M11.5 2.25c5.105 0 9.25 4.145 9.25 9.25s-4.145 9.25-9.25 9.25-9.25-4.145-9.25-9.25 4.145-9.25 9.25-9.25zM6.997 15.983c-.051-.338-.828-5.802 2.233-8.873a4.395 4.395 0 013.13-1.28c1.27 0 2.49.51 3.39 1.42.91.9 1.42 2.12 1.42 3.39 0 1.18-.449 2.301-1.28 3.13C12.72 16.93 7 16 7 16l-.003-.017zM15.3 10.5l-2 .8-.8 2-.8-2-2-.8 2-.8.8-2 .8 2 2 .8z'/%3E%3Cpath id='b' d='M50.63 8c.13 0 .23.1.23.23V9c.7-.76 1.7-1.18 2.73-1.18 2.17 0 3.95 1.85 3.95 4.17s-1.77 4.19-3.94 4.19c-1.04 0-2.03-.43-2.74-1.18v3.77c0 .13-.1.23-.23.23h-1.4c-.13 0-.23-.1-.23-.23V8.23c0-.12.1-.23.23-.23h1.4zm-3.86.01c.01 0 .01 0 .01-.01.13 0 .22.1.22.22v7.55c0 .12-.1.23-.23.23h-1.4c-.13 0-.23-.1-.23-.23V15c-.7.76-1.69 1.19-2.73 1.19-2.17 0-3.94-1.87-3.94-4.19 0-2.32 1.77-4.19 3.94-4.19 1.03 0 2.02.43 2.73 1.18v-.75c0-.12.1-.23.23-.23h1.4zm26.375-.19a4.24 4.24 0 00-4.16 3.29c-.13.59-.13 1.19 0 1.77a4.233 4.233 0 004.17 3.3c2.35 0 4.26-1.87 4.26-4.19 0-2.32-1.9-4.17-4.27-4.17zM60.63 5c.13 0 .23.1.23.23v3.76c.7-.76 1.7-1.18 2.73-1.18 1.88 0 3.45 1.4 3.84 3.28.13.59.13 1.2 0 1.8-.39 1.88-1.96 3.29-3.84 3.29-1.03 0-2.02-.43-2.73-1.18v.77c0 .12-.1.23-.23.23h-1.4c-.13 0-.23-.1-.23-.23V5.23c0-.12.1-.23.23-.23h1.4zm-34 11h-1.4c-.13 0-.23-.11-.23-.23V8.22c.01-.13.1-.22.23-.22h1.4c.13 0 .22.11.23.22v.68c.5-.68 1.3-1.09 2.16-1.1h.03c1.09 0 2.09.6 2.6 1.55.45-.95 1.4-1.55 2.44-1.56 1.62 0 2.93 1.25 2.9 2.78l.03 5.2c0 .13-.1.23-.23.23h-1.41c-.13 0-.23-.11-.23-.23v-4.59c0-.98-.74-1.71-1.62-1.71-.8 0-1.46.7-1.59 1.62l.01 4.68c0 .13-.11.23-.23.23h-1.41c-.13 0-.23-.11-.23-.23v-4.59c0-.98-.74-1.71-1.62-1.71-.85 0-1.54.79-1.6 1.8v4.5c0 .13-.1.23-.23.23zm53.615 0h-1.61c-.04 0-.08-.01-.12-.03-.09-.06-.13-.19-.06-.28l2.43-3.71-2.39-3.65a.213.213 0 01-.03-.12c0-.12.09-.21.21-.21h1.61c.13 0 .24.06.3.17l1.41 2.37 1.4-2.37a.34.34 0 01.3-.17h1.6c.04 0 .08.01.12.03.09.06.13.19.06.28l-2.37 3.65 2.43 3.7c0 .05.01.09.01.13 0 .12-.09.21-.21.21h-1.61c-.13 0-.24-.06-.3-.17l-1.44-2.42-1.44 2.42a.34.34 0 01-.3.17zm-7.12-1.49c-1.33 0-2.42-1.12-2.42-2.51 0-1.39 1.08-2.52 2.42-2.52 1.33 0 2.42 1.12 2.42 2.51 0 1.39-1.08 2.51-2.42 2.52zm-19.865 0c-1.32 0-2.39-1.11-2.42-2.48v-.07c.02-1.38 1.09-2.49 2.4-2.49 1.32 0 2.41 1.12 2.41 2.51 0 1.39-1.07 2.52-2.39 2.53zm-8.11-2.48c-.01 1.37-1.09 2.47-2.41 2.47s-2.42-1.12-2.42-2.51c0-1.39 1.08-2.52 2.4-2.52 1.33 0 2.39 1.11 2.41 2.48l.02.08zm18.12 2.47c-1.32 0-2.39-1.11-2.41-2.48v-.06c.02-1.38 1.09-2.48 2.41-2.48s2.42 1.12 2.42 2.51c0 1.39-1.09 2.51-2.42 2.51z'/%3E%3C/defs%3E%3Cmask id='c'%3E%3Crect width='100%25' height='100%25' fill='%23fff'/%3E%3Cuse xlink:href='%23a'/%3E%3Cuse xlink:href='%23b'/%3E%3C/mask%3E%3Cg stroke='%23000' stroke-width='3'%3E%3Ccircle mask='url(%23c)' cx='11.5' cy='11.5' r='9.25'/%3E%3Cuse xlink:href='%23b' mask='url(%23c)'/%3E%3C/g%3E%3Cg fill='%23fff'%3E%3Cuse xlink:href='%23a'/%3E%3Cuse xlink:href='%23b'/%3E%3C/g%3E%3C/svg%3E")}}@media (-ms-high-contrast:black-on-white){a.mapboxgl-ctrl-logo{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='88' height='23' viewBox='0 0 88 23' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' fill-rule='evenodd'%3E%3Cdefs%3E%3Cpath id='a' d='M11.5 2.25c5.105 0 9.25 4.145 9.25 9.25s-4.145 9.25-9.25 9.25-9.25-4.145-9.25-9.25 4.145-9.25 9.25-9.25zM6.997 15.983c-.051-.338-.828-5.802 2.233-8.873a4.395 4.395 0 013.13-1.28c1.27 0 2.49.51 3.39 1.42.91.9 1.42 2.12 1.42 3.39 0 1.18-.449 2.301-1.28 3.13C12.72 16.93 7 16 7 16l-.003-.017zM15.3 10.5l-2 .8-.8 2-.8-2-2-.8 2-.8.8-2 .8 2 2 .8z'/%3E%3Cpath id='b' d='M50.63 8c.13 0 .23.1.23.23V9c.7-.76 1.7-1.18 2.73-1.18 2.17 0 3.95 1.85 3.95 4.17s-1.77 4.19-3.94 4.19c-1.04 0-2.03-.43-2.74-1.18v3.77c0 .13-.1.23-.23.23h-1.4c-.13 0-.23-.1-.23-.23V8.23c0-.12.1-.23.23-.23h1.4zm-3.86.01c.01 0 .01 0 .01-.01.13 0 .22.1.22.22v7.55c0 .12-.1.23-.23.23h-1.4c-.13 0-.23-.1-.23-.23V15c-.7.76-1.69 1.19-2.73 1.19-2.17 0-3.94-1.87-3.94-4.19 0-2.32 1.77-4.19 3.94-4.19 1.03 0 2.02.43 2.73 1.18v-.75c0-.12.1-.23.23-.23h1.4zm26.375-.19a4.24 4.24 0 00-4.16 3.29c-.13.59-.13 1.19 0 1.77a4.233 4.233 0 004.17 3.3c2.35 0 4.26-1.87 4.26-4.19 0-2.32-1.9-4.17-4.27-4.17zM60.63 5c.13 0 .23.1.23.23v3.76c.7-.76 1.7-1.18 2.73-1.18 1.88 0 3.45 1.4 3.84 3.28.13.59.13 1.2 0 1.8-.39 1.88-1.96 3.29-3.84 3.29-1.03 0-2.02-.43-2.73-1.18v.77c0 .12-.1.23-.23.23h-1.4c-.13 0-.23-.1-.23-.23V5.23c0-.12.1-.23.23-.23h1.4zm-34 11h-1.4c-.13 0-.23-.11-.23-.23V8.22c.01-.13.1-.22.23-.22h1.4c.13 0 .22.11.23.22v.68c.5-.68 1.3-1.09 2.16-1.1h.03c1.09 0 2.09.6 2.6 1.55.45-.95 1.4-1.55 2.44-1.56 1.62 0 2.93 1.25 2.9 2.78l.03 5.2c0 .13-.1.23-.23.23h-1.41c-.13 0-.23-.11-.23-.23v-4.59c0-.98-.74-1.71-1.62-1.71-.8 0-1.46.7-1.59 1.62l.01 4.68c0 .13-.11.23-.23.23h-1.41c-.13 0-.23-.11-.23-.23v-4.59c0-.98-.74-1.71-1.62-1.71-.85 0-1.54.79-1.6 1.8v4.5c0 .13-.1.23-.23.23zm53.615 0h-1.61c-.04 0-.08-.01-.12-.03-.09-.06-.13-.19-.06-.28l2.43-3.71-2.39-3.65a.213.213 0 01-.03-.12c0-.12.09-.21.21-.21h1.61c.13 0 .24.06.3.17l1.41 2.37 1.4-2.37a.34.34 0 01.3-.17h1.6c.04 0 .08.01.12.03.09.06.13.19.06.28l-2.37 3.65 2.43 3.7c0 .05.01.09.01.13 0 .12-.09.21-.21.21h-1.61c-.13 0-.24-.06-.3-.17l-1.44-2.42-1.44 2.42a.34.34 0 01-.3.17zm-7.12-1.49c-1.33 0-2.42-1.12-2.42-2.51 0-1.39 1.08-2.52 2.42-2.52 1.33 0 2.42 1.12 2.42 2.51 0 1.39-1.08 2.51-2.42 2.52zm-19.865 0c-1.32 0-2.39-1.11-2.42-2.48v-.07c.02-1.38 1.09-2.49 2.4-2.49 1.32 0 2.41 1.12 2.41 2.51 0 1.39-1.07 2.52-2.39 2.53zm-8.11-2.48c-.01 1.37-1.09 2.47-2.41 2.47s-2.42-1.12-2.42-2.51c0-1.39 1.08-2.52 2.4-2.52 1.33 0 2.39 1.11 2.41 2.48l.02.08zm18.12 2.47c-1.32 0-2.39-1.11-2.41-2.48v-.06c.02-1.38 1.09-2.48 2.41-2.48s2.42 1.12 2.42 2.51c0 1.39-1.09 2.51-2.42 2.51z'/%3E%3C/defs%3E%3Cmask id='c'%3E%3Crect width='100%25' height='100%25' fill='%23fff'/%3E%3Cuse xlink:href='%23a'/%3E%3Cuse xlink:href='%23b'/%3E%3C/mask%3E%3Cg stroke='%23fff' stroke-width='3' fill='%23fff'%3E%3Ccircle mask='url(%23c)' cx='11.5' cy='11.5' r='9.25'/%3E%3Cuse xlink:href='%23b' mask='url(%23c)'/%3E%3C/g%3E%3Cuse xlink:href='%23a'/%3E%3Cuse xlink:href='%23b'/%3E%3C/svg%3E")}}.mapboxgl-ctrl.mapboxgl-ctrl-attrib{padding:0 5px;background-color:hsla(0,0%,100%,.5);margin:0}@media screen{.mapboxgl-ctrl-attrib.mapboxgl-compact{min-height:20px;padding:2px 24px 2px 0;margin:10px;position:relative;background-color:#fff;border-radius:12px}.mapboxgl-ctrl-attrib.mapboxgl-compact-show{padding:2px 28px 2px 8px;visibility:visible}.mapboxgl-ctrl-bottom-left>.mapboxgl-ctrl-attrib.mapboxgl-compact-show,.mapboxgl-ctrl-top-left>.mapboxgl-ctrl-attrib.mapboxgl-compact-show{padding:2px 8px 2px 28px;border-radius:12px}.mapboxgl-ctrl-attrib.mapboxgl-compact .mapboxgl-ctrl-attrib-inner{display:none}.mapboxgl-ctrl-attrib-button{display:none;cursor:pointer;position:absolute;background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='24' height='24' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill-rule='evenodd'%3E%3Cpath d='M4 10a6 6 0 1012 0 6 6 0 10-12 0m5-3a1 1 0 102 0 1 1 0 10-2 0m0 3a1 1 0 112 0v3a1 1 0 11-2 0'/%3E%3C/svg%3E");background-color:hsla(0,0%,100%,.5);width:24px;height:24px;-webkit-box-sizing:border-box;box-sizing:border-box;border-radius:12px;outline:none;top:0;right:0;border:0}.mapboxgl-ctrl-bottom-left .mapboxgl-ctrl-attrib-button,.mapboxgl-ctrl-top-left .mapboxgl-ctrl-attrib-button{left:0}.mapboxgl-ctrl-attrib.mapboxgl-compact-show .mapboxgl-ctrl-attrib-inner,.mapboxgl-ctrl-attrib.mapboxgl-compact .mapboxgl-ctrl-attrib-button{display:block}.mapboxgl-ctrl-attrib.mapboxgl-compact-show .mapboxgl-ctrl-attrib-button{background-color:rgba(0,0,0,.05)}.mapboxgl-ctrl-bottom-right>.mapboxgl-ctrl-attrib.mapboxgl-compact:after{bottom:0;right:0}.mapboxgl-ctrl-top-right>.mapboxgl-ctrl-attrib.mapboxgl-compact:after{top:0;right:0}.mapboxgl-ctrl-top-left>.mapboxgl-ctrl-attrib.mapboxgl-compact:after{top:0;left:0}.mapboxgl-ctrl-bottom-left>.mapboxgl-ctrl-attrib.mapboxgl-compact:after{bottom:0;left:0}}@media screen and (-ms-high-contrast:active){.mapboxgl-ctrl-attrib.mapboxgl-compact:after{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='24' height='24' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill-rule='evenodd' fill='%23fff'%3E%3Cpath d='M4 10a6 6 0 1012 0 6 6 0 10-12 0m5-3a1 1 0 102 0 1 1 0 10-2 0m0 3a1 1 0 112 0v3a1 1 0 11-2 0'/%3E%3C/svg%3E")}}@media screen and (-ms-high-contrast:black-on-white){.mapboxgl-ctrl-attrib.mapboxgl-compact:after{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='24' height='24' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill-rule='evenodd'%3E%3Cpath d='M4 10a6 6 0 1012 0 6 6 0 10-12 0m5-3a1 1 0 102 0 1 1 0 10-2 0m0 3a1 1 0 112 0v3a1 1 0 11-2 0'/%3E%3C/svg%3E")}}.mapboxgl-ctrl-attrib a{color:rgba(0,0,0,.75);text-decoration:none}.mapboxgl-ctrl-attrib a:hover{color:inherit;text-decoration:underline}.mapboxgl-ctrl-attrib .mapbox-improve-map{font-weight:700;margin-left:2px}.mapboxgl-attrib-empty{display:none}.mapboxgl-ctrl-scale{background-color:hsla(0,0%,100%,.75);font-size:10px;border:2px solid #333;border-top:#333;padding:0 5px;color:#333;-webkit-box-sizing:border-box;box-sizing:border-box}.mapboxgl-popup{position:absolute;top:0;left:0;display:-webkit-box;display:-ms-flexbox;display:flex;will-change:transform;pointer-events:none}.mapboxgl-popup-anchor-top,.mapboxgl-popup-anchor-top-left,.mapboxgl-popup-anchor-top-right{-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column}.mapboxgl-popup-anchor-bottom,.mapboxgl-popup-anchor-bottom-left,.mapboxgl-popup-anchor-bottom-right{-webkit-box-orient:vertical;-webkit-box-direction:reverse;-ms-flex-direction:column-reverse;flex-direction:column-reverse}.mapboxgl-popup-anchor-left{-webkit-box-orient:horizontal;-webkit-box-direction:normal;-ms-flex-direction:row;flex-direction:row}.mapboxgl-popup-anchor-right{-webkit-box-orient:horizontal;-webkit-box-direction:reverse;-ms-flex-direction:row-reverse;flex-direction:row-reverse}.mapboxgl-popup-tip{width:0;height:0;border:10px solid transparent;z-index:1}.mapboxgl-popup-anchor-top .mapboxgl-popup-tip{-webkit-align-self:center;-ms-flex-item-align:center;align-self:center;border-top:none;border-bottom-color:#fff}.mapboxgl-popup-anchor-top-left .mapboxgl-popup-tip{-webkit-align-self:flex-start;-ms-flex-item-align:start;align-self:flex-start;border-top:none;border-left:none;border-bottom-color:#fff}.mapboxgl-popup-anchor-top-right .mapboxgl-popup-tip{-webkit-align-self:flex-end;-ms-flex-item-align:end;align-self:flex-end;border-top:none;border-right:none;border-bottom-color:#fff}.mapboxgl-popup-anchor-bottom .mapboxgl-popup-tip{-webkit-align-self:center;-ms-flex-item-align:center;align-self:center;border-bottom:none;border-top-color:#fff}.mapboxgl-popup-anchor-bottom-left .mapboxgl-popup-tip{-webkit-align-self:flex-start;-ms-flex-item-align:start;align-self:flex-start;border-bottom:none;border-left:none;border-top-color:#fff}.mapboxgl-popup-anchor-bottom-right .mapboxgl-popup-tip{-webkit-align-self:flex-end;-ms-flex-item-align:end;align-self:flex-end;border-bottom:none;border-right:none;border-top-color:#fff}.mapboxgl-popup-anchor-left .mapboxgl-popup-tip{-webkit-align-self:center;-ms-flex-item-align:center;align-self:center;border-left:none;border-right-color:#fff}.mapboxgl-popup-anchor-right .mapboxgl-popup-tip{-webkit-align-self:center;-ms-flex-item-align:center;align-self:center;border-right:none;border-left-color:#fff}.mapboxgl-popup-close-button{position:absolute;right:0;top:0;border:0;border-radius:0 3px 0 0;cursor:pointer;background-color:transparent}.mapboxgl-popup-close-button:hover{background-color:rgba(0,0,0,.05)}.mapboxgl-popup-content{position:relative;background:#fff;border-radius:3px;-webkit-box-shadow:0 1px 2px rgba(0,0,0,.1);box-shadow:0 1px 2px rgba(0,0,0,.1);padding:10px 10px 15px;pointer-events:auto}.mapboxgl-popup-anchor-top-left .mapboxgl-popup-content{border-top-left-radius:0}.mapboxgl-popup-anchor-top-right .mapboxgl-popup-content{border-top-right-radius:0}.mapboxgl-popup-anchor-bottom-left .mapboxgl-popup-content{border-bottom-left-radius:0}.mapboxgl-popup-anchor-bottom-right .mapboxgl-popup-content{border-bottom-right-radius:0}.mapboxgl-popup-track-pointer{display:none}.mapboxgl-popup-track-pointer *{pointer-events:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.mapboxgl-map:hover .mapboxgl-popup-track-pointer{display:-webkit-box;display:-ms-flexbox;display:flex}.mapboxgl-map:active .mapboxgl-popup-track-pointer{display:none}.mapboxgl-marker{position:absolute;top:0;left:0;will-change:transform}.mapboxgl-user-location-dot,.mapboxgl-user-location-dot:before{background-color:#1da1f2;width:15px;height:15px;border-radius:50%}.mapboxgl-user-location-dot:before{content:"";position:absolute;-webkit-animation:mapboxgl-user-location-dot-pulse 2s infinite;animation:mapboxgl-user-location-dot-pulse 2s infinite}.mapboxgl-user-location-dot:after{border-radius:50%;border:2px solid #fff;content:"";height:19px;left:-2px;position:absolute;top:-2px;width:19px;-webkit-box-sizing:border-box;box-sizing:border-box;-webkit-box-shadow:0 0 3px rgba(0,0,0,.35);box-shadow:0 0 3px rgba(0,0,0,.35)}@-webkit-keyframes mapboxgl-user-location-dot-pulse{0%{-webkit-transform:scale(1);opacity:1}70%{-webkit-transform:scale(3);opacity:0}to{-webkit-transform:scale(1);opacity:0}}@keyframes mapboxgl-user-location-dot-pulse{0%{-webkit-transform:scale(1);transform:scale(1);opacity:1}70%{-webkit-transform:scale(3);transform:scale(3);opacity:0}to{-webkit-transform:scale(1);transform:scale(1);opacity:0}}.mapboxgl-user-location-dot-stale{background-color:#aaa}.mapboxgl-user-location-dot-stale:after{display:none}.mapboxgl-user-location-accuracy-circle{background-color:rgba(29,161,242,.2);width:1px;height:1px;border-radius:100%}.mapboxgl-crosshair,.mapboxgl-crosshair .mapboxgl-interactive,.mapboxgl-crosshair .mapboxgl-interactive:active{cursor:crosshair}.mapboxgl-boxzoom{position:absolute;top:0;left:0;width:0;height:0;background:#fff;border:2px dotted #202020;opacity:.5}@media print{.mapbox-improve-map{display:none}}`),window.mapboxgl=H0();var f7=0,IS="101MlGsZ2AmmA&access_token=pk.eyJ1IjoiZXhhbXBsZXMiLCJhIjoiY2p0MG01MXRqMW45cjQzb2R6b2ptc3J4MSJ9.zA2W0IkI0c6KaAhJfk9bWg",p7=(TS=(0,Ki.b2)(),TS(MS=function(e){(0,ui.Z)(t,e);var i=u7(t);function t(){var n;(0,Ur.Z)(this,t);for(var r=arguments.length,o=new Array(r),u=0;u<r;u++)o[u]=arguments[u];return n=i.call.apply(i,[this].concat(o)),(0,He.Z)((0,er.Z)(n),"version",Mc.MAPBOX),n}return(0,Jr.Z)(t,[{key:"getType",value:function(){return"mapbox"}},{key:"lngLatToCoord",value:function(r){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{x:0,y:0,z:0},u=this.lngLatToMercator(r,0),f=u.x,g=u.y;return[f-o.x,g-o.y]}},{key:"lngLatToMercator",value:function(r,o){var u=window.mapboxgl.MercatorCoordinate.fromLngLat(r,o),f=u.x,g=f===void 0?0:f,x=u.y,I=x===void 0?0:x,P=u.z,G=P===void 0?0:P;return{x:g,y:I,z:G}}},{key:"getModelMatrix",value:function(r,o,u){var f=arguments.length>3&&arguments[3]!==void 0?arguments[3]:[1,1,1],g=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{x:0,y:0,z:0},x=window.mapboxgl.MercatorCoordinate.fromLngLat(r,o),I=x.meterInMercatorCoordinateUnits(),P=no();return th(P,P,lp(x.x-g.x,x.y-g.y,x.z||0-g.z)),Ch(P,P,lp(I*f[0],-I*f[1],I*f[2])),hh(P,P,u[0]),ad(P,P,u[1]),od(P,P,u[2]),P}},{key:"init",value:function(){var n=(0,An.Z)(Nt().mark(function o(){var u=this,f,g,x,I,P,G,$,Ee,Se,Re,Ye,St,vt;return Nt().wrap(function(Kt){for(;;)switch(Kt.prev=Kt.next){case 0:f=this.config,g=f.id,x=g===void 0?"map":g,I=f.attributionControl,P=I===void 0?!1:I,G=f.style,$=G===void 0?"light":G,Ee=f.token,Se=Ee===void 0?IS:Ee,Re=f.rotation,Ye=Re===void 0?0:Re,St=f.mapInstance,vt=(0,Ns.Z)(f,s7),this.viewport=new o7,!St&&!window.mapboxgl&&console.error(this.configService.getSceneWarninfo("SDK")),Se===IS&&$!=="blank"&&!window.mapboxgl.accessToken&&!St&&console.warn(this.configService.getSceneWarninfo("MapToken")),!St&&!window.mapboxgl.accessToken&&(window.mapboxgl.accessToken=Se),St?(this.map=St,this.$mapContainer=this.map.getContainer()):(this.$mapContainer=this.creatMapContainer(x),this.map=new window.mapboxgl.Map((0,oe.Z)({container:this.$mapContainer,style:this.getMapStyleValue($),attributionControl:P,bearing:Ye},vt))),this.map.on("load",function(){u.handleCameraChanged()}),this.map.on("move",this.handleCameraChanged),this.handleCameraChanged();case 9:case"end":return Kt.stop()}},o,this)}));function r(){return n.apply(this,arguments)}return r}()},{key:"destroy",value:function(){var r,o;(r=this.$mapContainer)===null||r===void 0||(o=r.parentNode)===null||o===void 0||o.removeChild(this.$mapContainer),this.eventEmitter.removeAllListeners(),this.map&&(this.map.remove(),this.$mapContainer=null)}},{key:"emit",value:function(r){for(var o,u=arguments.length,f=new Array(u>1?u-1:0),g=1;g<u;g++)f[g-1]=arguments[g];(o=this.eventEmitter).emit.apply(o,[r].concat(f))}},{key:"once",value:function(r){for(var o,u=arguments.length,f=new Array(u>1?u-1:0),g=1;g<u;g++)f[g-1]=arguments[g];(o=this.eventEmitter).once.apply(o,[r].concat(f))}},{key:"getMapContainer",value:function(){return this.$mapContainer}},{key:"meterToCoord",value:function(r,o){var u=new(H0()).LngLat(r[0],r[1]),f=new(H0()).LngLat(o[0],o[1]),g=u.distanceTo(f),x=H0().MercatorCoordinate.fromLngLat({lng:r[0],lat:r[1]}),I=H0().MercatorCoordinate.fromLngLat({lng:o[0],lat:o[1]}),P=x.x,G=x.y,$=I.x,Ee=I.y,Se=Math.sqrt(Math.pow(P-$,2)+Math.pow(G-Ee,2))*4194304*2;return Se/g}},{key:"exportMap",value:function(r){var o=this.map.getCanvas(),u=r==="jpg"?o==null?void 0:o.toDataURL("image/jpeg"):o==null?void 0:o.toDataURL("image/png");return u}},{key:"creatMapContainer",value:function(r){var o=r;typeof r=="string"&&(o=document.getElementById(r));var u=document.createElement("div");return u.style.cssText+=`
      position: absolute;
      top: 0;
      height: 100%;
      width: 100%;
    `,u.id="l7_mapbox_div"+f7++,o.appendChild(u),u}}]),t}(a7))||MS);function h7(e){var i=d7();return function(){var n=(0,rr.Z)(e),r;if(i){var o=(0,rr.Z)(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return(0,jn.Z)(this,r)}}function d7(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function v7(e,i){var t=typeof my!="undefined"&&!!my&&typeof my.showToast=="function"&&my.isFRM!==!0,n=typeof wx!="undefined"&&wx!==null&&(typeof wx.request!="undefined"||typeof wx.miniProgram!="undefined");if(!(t||n)&&(i||(i=document),!!i)){var r=i.head||i.getElementsByTagName("head")[0];if(!r){r=i.createElement("head");var o=i.body||i.getElementsByTagName("body")[0];o?o.parentNode.insertBefore(r,o):i.documentElement.appendChild(r)}var u=i.createElement("style");return u.type="text/css",u.styleSheet?u.styleSheet.cssText=e:u.appendChild(i.createTextNode(e)),r.appendChild(u),u}}v7(`.mapboxgl-ctrl-logo {
 display: none !important;
}
`);var m7=function(e){(0,ui.Z)(t,e);var i=h7(t);function t(){return(0,Ur.Z)(this,t),i.apply(this,arguments)}return(0,Jr.Z)(t,[{key:"getServiceConstructor",value:function(){return p7}}]),t}(HE),Kk="2.11.2"},6848:function(U,F,c){"use strict";c.d(F,{kG:function(){return Z}});function w(W){return Math.floor(Math.log(W)*Math.LOG10E)}function v(W,Y){if(typeof W.repeat=="function")return W.repeat(Y);for(var te=new Array(Y),le=0;le<te.length;le++)te[le]=W;return te.join("")}function l(W,Y,te,le){W.get(Y)||W.set(Y,Object.create(null));var be=W.get(Y);be[te]=le}function R(W,Y,te){for(var le=0,be=Object.keys(te);le<be.length;le++){var de=be[le];l(W,Y,de,te[de])}}function A(W,Y,te){return D(W,Y,te)[te]}function D(W,Y){for(var te=[],le=2;le<arguments.length;le++)te[le-2]=arguments[le];var be=W.get(Y);if(!be)throw new TypeError("".concat(Y," InternalSlot has not been initialized"));return te.reduce(function(de,pe){return de[pe]=be[pe],de},Object.create(null))}function k(W){return W.type==="literal"}function B(W,Y,te){var le=te.value;Object.defineProperty(W,Y,{configurable:!0,enumerable:!1,writable:!0,value:le})}var z=/-u(?:-[0-9a-z]{2,8})+/gi;function Z(W,Y,te){if(te===void 0&&(te=Error),!W)throw new te(Y)}},185:function(U,F,c){"use strict";c.d(F,{A:function(){return Y},Z:function(){return w}});function w(te,le){var be=le&&le.cache?le.cache:W,de=le&&le.serializer?le.serializer:z,pe=le&&le.strategy?le.strategy:D;return pe(te,{cache:be,serializer:de})}function v(te){return te==null||typeof te=="number"||typeof te=="boolean"}function l(te,le,be,de){var pe=v(de)?de:be(de),Oe=le.get(pe);return typeof Oe=="undefined"&&(Oe=te.call(this,de),le.set(pe,Oe)),Oe}function R(te,le,be){var de=Array.prototype.slice.call(arguments,3),pe=be(de),Oe=le.get(pe);return typeof Oe=="undefined"&&(Oe=te.apply(this,de),le.set(pe,Oe)),Oe}function A(te,le,be,de,pe){return be.bind(le,te,de,pe)}function D(te,le){var be=te.length===1?l:R;return A(te,this,be,le.cache.create(),le.serializer)}function k(te,le){return A(te,this,R,le.cache.create(),le.serializer)}function B(te,le){return A(te,this,l,le.cache.create(),le.serializer)}var z=function(){return JSON.stringify(arguments)};function Z(){this.cache=Object.create(null)}Z.prototype.get=function(te){return this.cache[te]},Z.prototype.set=function(te,le){this.cache[te]=le};var W={create:function(){return new Z}},Y={variadic:k,monadic:B}},23166:function(U,F,c){"use strict";c.d(F,{wD:function(){return l},VG:function(){return D},rp:function(){return B},Ii:function(){return be},O4:function(){return A},uf:function(){return k},Wh:function(){return le},Jo:function(){return W},yx:function(){return Y},Wi:function(){return Z},HI:function(){return te},pe:function(){return z},Qc:function(){return Hr}});var w=c(34254),v;(function(ce){ce[ce.EXPECT_ARGUMENT_CLOSING_BRACE=1]="EXPECT_ARGUMENT_CLOSING_BRACE",ce[ce.EMPTY_ARGUMENT=2]="EMPTY_ARGUMENT",ce[ce.MALFORMED_ARGUMENT=3]="MALFORMED_ARGUMENT",ce[ce.EXPECT_ARGUMENT_TYPE=4]="EXPECT_ARGUMENT_TYPE",ce[ce.INVALID_ARGUMENT_TYPE=5]="INVALID_ARGUMENT_TYPE",ce[ce.EXPECT_ARGUMENT_STYLE=6]="EXPECT_ARGUMENT_STYLE",ce[ce.INVALID_NUMBER_SKELETON=7]="INVALID_NUMBER_SKELETON",ce[ce.INVALID_DATE_TIME_SKELETON=8]="INVALID_DATE_TIME_SKELETON",ce[ce.EXPECT_NUMBER_SKELETON=9]="EXPECT_NUMBER_SKELETON",ce[ce.EXPECT_DATE_TIME_SKELETON=10]="EXPECT_DATE_TIME_SKELETON",ce[ce.UNCLOSED_QUOTE_IN_ARGUMENT_STYLE=11]="UNCLOSED_QUOTE_IN_ARGUMENT_STYLE",ce[ce.EXPECT_SELECT_ARGUMENT_OPTIONS=12]="EXPECT_SELECT_ARGUMENT_OPTIONS",ce[ce.EXPECT_PLURAL_ARGUMENT_OFFSET_VALUE=13]="EXPECT_PLURAL_ARGUMENT_OFFSET_VALUE",ce[ce.INVALID_PLURAL_ARGUMENT_OFFSET_VALUE=14]="INVALID_PLURAL_ARGUMENT_OFFSET_VALUE",ce[ce.EXPECT_SELECT_ARGUMENT_SELECTOR=15]="EXPECT_SELECT_ARGUMENT_SELECTOR",ce[ce.EXPECT_PLURAL_ARGUMENT_SELECTOR=16]="EXPECT_PLURAL_ARGUMENT_SELECTOR",ce[ce.EXPECT_SELECT_ARGUMENT_SELECTOR_FRAGMENT=17]="EXPECT_SELECT_ARGUMENT_SELECTOR_FRAGMENT",ce[ce.EXPECT_PLURAL_ARGUMENT_SELECTOR_FRAGMENT=18]="EXPECT_PLURAL_ARGUMENT_SELECTOR_FRAGMENT",ce[ce.INVALID_PLURAL_ARGUMENT_SELECTOR=19]="INVALID_PLURAL_ARGUMENT_SELECTOR",ce[ce.DUPLICATE_PLURAL_ARGUMENT_SELECTOR=20]="DUPLICATE_PLURAL_ARGUMENT_SELECTOR",ce[ce.DUPLICATE_SELECT_ARGUMENT_SELECTOR=21]="DUPLICATE_SELECT_ARGUMENT_SELECTOR",ce[ce.MISSING_OTHER_CLAUSE=22]="MISSING_OTHER_CLAUSE",ce[ce.INVALID_TAG=23]="INVALID_TAG",ce[ce.INVALID_TAG_NAME=25]="INVALID_TAG_NAME",ce[ce.UNMATCHED_CLOSING_TAG=26]="UNMATCHED_CLOSING_TAG",ce[ce.UNCLOSED_TAG=27]="UNCLOSED_TAG"})(v||(v={}));var l;(function(ce){ce[ce.literal=0]="literal",ce[ce.argument=1]="argument",ce[ce.number=2]="number",ce[ce.date=3]="date",ce[ce.time=4]="time",ce[ce.select=5]="select",ce[ce.plural=6]="plural",ce[ce.pound=7]="pound",ce[ce.tag=8]="tag"})(l||(l={}));var R;(function(ce){ce[ce.number=0]="number",ce[ce.dateTime=1]="dateTime"})(R||(R={}));function A(ce){return ce.type===l.literal}function D(ce){return ce.type===l.argument}function k(ce){return ce.type===l.number}function B(ce){return ce.type===l.date}function z(ce){return ce.type===l.time}function Z(ce){return ce.type===l.select}function W(ce){return ce.type===l.plural}function Y(ce){return ce.type===l.pound}function te(ce){return ce.type===l.tag}function le(ce){return!!(ce&&typeof ce=="object"&&ce.type===R.number)}function be(ce){return!!(ce&&typeof ce=="object"&&ce.type===R.dateTime)}function de(ce){return{type:l.literal,value:ce}}function pe(ce,xt){return{type:l.number,value:ce,style:xt}}var Oe=/[ \xA0\u1680\u2000-\u200A\u202F\u205F\u3000]/,xe=/[\t-\r \x85\u200E\u200F\u2028\u2029]/,Ve=/(?:[Eec]{1,6}|G{1,5}|[Qq]{1,5}|(?:[yYur]+|U{1,5})|[ML]{1,5}|d{1,2}|D{1,3}|F{1}|[abB]{1,5}|[hkHK]{1,2}|w{1,2}|W{1}|m{1,2}|s{1,2}|[zZOvVxX]{1,4})(?=([^']*'[^']*')*[^']*$)/g;function K(ce){var xt={};return ce.replace(Ve,function(Gt){var Ir=Gt.length;switch(Gt[0]){case"G":xt.era=Ir===4?"long":Ir===5?"narrow":"short";break;case"y":xt.year=Ir===2?"2-digit":"numeric";break;case"Y":case"u":case"U":case"r":throw new RangeError("`Y/u/U/r` (year) patterns are not supported, use `y` instead");case"q":case"Q":throw new RangeError("`q/Q` (quarter) patterns are not supported");case"M":case"L":xt.month=["numeric","2-digit","short","long","narrow"][Ir-1];break;case"w":case"W":throw new RangeError("`w/W` (week) patterns are not supported");case"d":xt.day=["numeric","2-digit"][Ir-1];break;case"D":case"F":case"g":throw new RangeError("`D/F/g` (day) patterns are not supported, use `d` instead");case"E":xt.weekday=Ir===4?"short":Ir===5?"narrow":"short";break;case"e":if(Ir<4)throw new RangeError("`e..eee` (weekday) patterns are not supported");xt.weekday=["short","long","narrow","short"][Ir-4];break;case"c":if(Ir<4)throw new RangeError("`c..ccc` (weekday) patterns are not supported");xt.weekday=["short","long","narrow","short"][Ir-4];break;case"a":xt.hour12=!0;break;case"b":case"B":throw new RangeError("`b/B` (period) patterns are not supported, use `a` instead");case"h":xt.hourCycle="h12",xt.hour=["numeric","2-digit"][Ir-1];break;case"H":xt.hourCycle="h23",xt.hour=["numeric","2-digit"][Ir-1];break;case"K":xt.hourCycle="h11",xt.hour=["numeric","2-digit"][Ir-1];break;case"k":xt.hourCycle="h24",xt.hour=["numeric","2-digit"][Ir-1];break;case"j":case"J":case"C":throw new RangeError("`j/J/C` (hour) patterns are not supported, use `h/H/K/k` instead");case"m":xt.minute=["numeric","2-digit"][Ir-1];break;case"s":xt.second=["numeric","2-digit"][Ir-1];break;case"S":case"A":throw new RangeError("`S/A` (second) patterns are not supported, use `s` instead");case"z":xt.timeZoneName=Ir<4?"short":"long";break;case"Z":case"O":case"v":case"V":case"X":case"x":throw new RangeError("`Z/O/v/V/X/x` (timeZone) patterns are not supported, use `z` instead")}return""}),xt}var ke=/[\t-\r \x85\u200E\u200F\u2028\u2029]/i;function we(ce){if(ce.length===0)throw new Error("Number skeleton cannot be empty");for(var xt=ce.split(ke).filter(function(gt){return gt.length>0}),Gt=[],Ir=0,nn=xt;Ir<nn.length;Ir++){var zi=nn[Ir],Ui=zi.split("/");if(Ui.length===0)throw new Error("Invalid number skeleton");for(var Pi=Ui[0],ka=Ui.slice(1),Ti=0,Ge=ka;Ti<Ge.length;Ti++){var et=Ge[Ti];if(et.length===0)throw new Error("Invalid number skeleton")}Gt.push({stem:Pi,options:ka})}return Gt}function Me(ce){return ce.replace(/^(.*?)-/,"")}var Xe=/^\.(?:(0+)(\*)?|(#+)|(0+)(#+))$/g,Ke=/^(@+)?(\+|#+)?[rs]?$/g,At=/(\*)(0+)|(#+)(0+)|(0+)/g,mt=/^(0+)$/;function ie(ce){var xt={};return ce[ce.length-1]==="r"?xt.roundingPriority="morePrecision":ce[ce.length-1]==="s"&&(xt.roundingPriority="lessPrecision"),ce.replace(Ke,function(Gt,Ir,nn){return typeof nn!="string"?(xt.minimumSignificantDigits=Ir.length,xt.maximumSignificantDigits=Ir.length):nn==="+"?xt.minimumSignificantDigits=Ir.length:Ir[0]==="#"?xt.maximumSignificantDigits=Ir.length:(xt.minimumSignificantDigits=Ir.length,xt.maximumSignificantDigits=Ir.length+(typeof nn=="string"?nn.length:0)),""}),xt}function oe(ce){switch(ce){case"sign-auto":return{signDisplay:"auto"};case"sign-accounting":case"()":return{currencySign:"accounting"};case"sign-always":case"+!":return{signDisplay:"always"};case"sign-accounting-always":case"()!":return{signDisplay:"always",currencySign:"accounting"};case"sign-except-zero":case"+?":return{signDisplay:"exceptZero"};case"sign-accounting-except-zero":case"()?":return{signDisplay:"exceptZero",currencySign:"accounting"};case"sign-never":case"+_":return{signDisplay:"never"}}}function he(ce){var xt;if(ce[0]==="E"&&ce[1]==="E"?(xt={notation:"engineering"},ce=ce.slice(2)):ce[0]==="E"&&(xt={notation:"scientific"},ce=ce.slice(1)),xt){var Gt=ce.slice(0,2);if(Gt==="+!"?(xt.signDisplay="always",ce=ce.slice(2)):Gt==="+?"&&(xt.signDisplay="exceptZero",ce=ce.slice(2)),!mt.test(ce))throw new Error("Malformed concise eng/scientific notation");xt.minimumIntegerDigits=ce.length}return xt}function ye(ce){var xt={},Gt=oe(ce);return Gt||xt}function se(ce){for(var xt={},Gt=0,Ir=ce;Gt<Ir.length;Gt++){var nn=Ir[Gt];switch(nn.stem){case"percent":case"%":xt.style="percent";continue;case"%x100":xt.style="percent",xt.scale=100;continue;case"currency":xt.style="currency",xt.currency=nn.options[0];continue;case"group-off":case",_":xt.useGrouping=!1;continue;case"precision-integer":case".":xt.maximumFractionDigits=0;continue;case"measure-unit":case"unit":xt.style="unit",xt.unit=Me(nn.options[0]);continue;case"compact-short":case"K":xt.notation="compact",xt.compactDisplay="short";continue;case"compact-long":case"KK":xt.notation="compact",xt.compactDisplay="long";continue;case"scientific":xt=(0,w.pi)((0,w.pi)((0,w.pi)({},xt),{notation:"scientific"}),nn.options.reduce(function(ka,Ti){return(0,w.pi)((0,w.pi)({},ka),ye(Ti))},{}));continue;case"engineering":xt=(0,w.pi)((0,w.pi)((0,w.pi)({},xt),{notation:"engineering"}),nn.options.reduce(function(ka,Ti){return(0,w.pi)((0,w.pi)({},ka),ye(Ti))},{}));continue;case"notation-simple":xt.notation="standard";continue;case"unit-width-narrow":xt.currencyDisplay="narrowSymbol",xt.unitDisplay="narrow";continue;case"unit-width-short":xt.currencyDisplay="code",xt.unitDisplay="short";continue;case"unit-width-full-name":xt.currencyDisplay="name",xt.unitDisplay="long";continue;case"unit-width-iso-code":xt.currencyDisplay="symbol";continue;case"scale":xt.scale=parseFloat(nn.options[0]);continue;case"integer-width":if(nn.options.length>1)throw new RangeError("integer-width stems only accept a single optional option");nn.options[0].replace(At,function(ka,Ti,Ge,et,gt,ht){if(Ti)xt.minimumIntegerDigits=Ge.length;else{if(et&&gt)throw new Error("We currently do not support maximum integer digits");if(ht)throw new Error("We currently do not support exact integer digits")}return""});continue}if(mt.test(nn.stem)){xt.minimumIntegerDigits=nn.stem.length;continue}if(Xe.test(nn.stem)){if(nn.options.length>1)throw new RangeError("Fraction-precision stems only accept a single optional option");nn.stem.replace(Xe,function(ka,Ti,Ge,et,gt,ht){return Ge==="*"?xt.minimumFractionDigits=Ti.length:et&&et[0]==="#"?xt.maximumFractionDigits=et.length:gt&&ht?(xt.minimumFractionDigits=gt.length,xt.maximumFractionDigits=gt.length+ht.length):(xt.minimumFractionDigits=Ti.length,xt.maximumFractionDigits=Ti.length),""});var zi=nn.options[0];zi==="w"?xt=(0,w.pi)((0,w.pi)({},xt),{trailingZeroDisplay:"stripIfInteger"}):zi&&(xt=(0,w.pi)((0,w.pi)({},xt),ie(zi)));continue}if(Ke.test(nn.stem)){xt=(0,w.pi)((0,w.pi)({},xt),ie(nn.stem));continue}var Ui=oe(nn.stem);Ui&&(xt=(0,w.pi)((0,w.pi)({},xt),Ui));var Pi=he(nn.stem);Pi&&(xt=(0,w.pi)((0,w.pi)({},xt),Pi))}return xt}var Ne={AX:["H"],BQ:["H"],CP:["H"],CZ:["H"],DK:["H"],FI:["H"],ID:["H"],IS:["H"],ML:["H"],NE:["H"],RU:["H"],SE:["H"],SJ:["H"],SK:["H"],AS:["h","H"],BT:["h","H"],DJ:["h","H"],ER:["h","H"],GH:["h","H"],IN:["h","H"],LS:["h","H"],PG:["h","H"],PW:["h","H"],SO:["h","H"],TO:["h","H"],VU:["h","H"],WS:["h","H"],"001":["H","h"],AL:["h","H","hB"],TD:["h","H","hB"],"ca-ES":["H","h","hB"],CF:["H","h","hB"],CM:["H","h","hB"],"fr-CA":["H","h","hB"],"gl-ES":["H","h","hB"],"it-CH":["H","h","hB"],"it-IT":["H","h","hB"],LU:["H","h","hB"],NP:["H","h","hB"],PF:["H","h","hB"],SC:["H","h","hB"],SM:["H","h","hB"],SN:["H","h","hB"],TF:["H","h","hB"],VA:["H","h","hB"],CY:["h","H","hb","hB"],GR:["h","H","hb","hB"],CO:["h","H","hB","hb"],DO:["h","H","hB","hb"],KP:["h","H","hB","hb"],KR:["h","H","hB","hb"],NA:["h","H","hB","hb"],PA:["h","H","hB","hb"],PR:["h","H","hB","hb"],VE:["h","H","hB","hb"],AC:["H","h","hb","hB"],AI:["H","h","hb","hB"],BW:["H","h","hb","hB"],BZ:["H","h","hb","hB"],CC:["H","h","hb","hB"],CK:["H","h","hb","hB"],CX:["H","h","hb","hB"],DG:["H","h","hb","hB"],FK:["H","h","hb","hB"],GB:["H","h","hb","hB"],GG:["H","h","hb","hB"],GI:["H","h","hb","hB"],IE:["H","h","hb","hB"],IM:["H","h","hb","hB"],IO:["H","h","hb","hB"],JE:["H","h","hb","hB"],LT:["H","h","hb","hB"],MK:["H","h","hb","hB"],MN:["H","h","hb","hB"],MS:["H","h","hb","hB"],NF:["H","h","hb","hB"],NG:["H","h","hb","hB"],NR:["H","h","hb","hB"],NU:["H","h","hb","hB"],PN:["H","h","hb","hB"],SH:["H","h","hb","hB"],SX:["H","h","hb","hB"],TA:["H","h","hb","hB"],ZA:["H","h","hb","hB"],"af-ZA":["H","h","hB","hb"],AR:["H","h","hB","hb"],CL:["H","h","hB","hb"],CR:["H","h","hB","hb"],CU:["H","h","hB","hb"],EA:["H","h","hB","hb"],"es-BO":["H","h","hB","hb"],"es-BR":["H","h","hB","hb"],"es-EC":["H","h","hB","hb"],"es-ES":["H","h","hB","hb"],"es-GQ":["H","h","hB","hb"],"es-PE":["H","h","hB","hb"],GT:["H","h","hB","hb"],HN:["H","h","hB","hb"],IC:["H","h","hB","hb"],KG:["H","h","hB","hb"],KM:["H","h","hB","hb"],LK:["H","h","hB","hb"],MA:["H","h","hB","hb"],MX:["H","h","hB","hb"],NI:["H","h","hB","hb"],PY:["H","h","hB","hb"],SV:["H","h","hB","hb"],UY:["H","h","hB","hb"],JP:["H","h","K"],AD:["H","hB"],AM:["H","hB"],AO:["H","hB"],AT:["H","hB"],AW:["H","hB"],BE:["H","hB"],BF:["H","hB"],BJ:["H","hB"],BL:["H","hB"],BR:["H","hB"],CG:["H","hB"],CI:["H","hB"],CV:["H","hB"],DE:["H","hB"],EE:["H","hB"],FR:["H","hB"],GA:["H","hB"],GF:["H","hB"],GN:["H","hB"],GP:["H","hB"],GW:["H","hB"],HR:["H","hB"],IL:["H","hB"],IT:["H","hB"],KZ:["H","hB"],MC:["H","hB"],MD:["H","hB"],MF:["H","hB"],MQ:["H","hB"],MZ:["H","hB"],NC:["H","hB"],NL:["H","hB"],PM:["H","hB"],PT:["H","hB"],RE:["H","hB"],RO:["H","hB"],SI:["H","hB"],SR:["H","hB"],ST:["H","hB"],TG:["H","hB"],TR:["H","hB"],WF:["H","hB"],YT:["H","hB"],BD:["h","hB","H"],PK:["h","hB","H"],AZ:["H","hB","h"],BA:["H","hB","h"],BG:["H","hB","h"],CH:["H","hB","h"],GE:["H","hB","h"],LI:["H","hB","h"],ME:["H","hB","h"],RS:["H","hB","h"],UA:["H","hB","h"],UZ:["H","hB","h"],XK:["H","hB","h"],AG:["h","hb","H","hB"],AU:["h","hb","H","hB"],BB:["h","hb","H","hB"],BM:["h","hb","H","hB"],BS:["h","hb","H","hB"],CA:["h","hb","H","hB"],DM:["h","hb","H","hB"],"en-001":["h","hb","H","hB"],FJ:["h","hb","H","hB"],FM:["h","hb","H","hB"],GD:["h","hb","H","hB"],GM:["h","hb","H","hB"],GU:["h","hb","H","hB"],GY:["h","hb","H","hB"],JM:["h","hb","H","hB"],KI:["h","hb","H","hB"],KN:["h","hb","H","hB"],KY:["h","hb","H","hB"],LC:["h","hb","H","hB"],LR:["h","hb","H","hB"],MH:["h","hb","H","hB"],MP:["h","hb","H","hB"],MW:["h","hb","H","hB"],NZ:["h","hb","H","hB"],SB:["h","hb","H","hB"],SG:["h","hb","H","hB"],SL:["h","hb","H","hB"],SS:["h","hb","H","hB"],SZ:["h","hb","H","hB"],TC:["h","hb","H","hB"],TT:["h","hb","H","hB"],UM:["h","hb","H","hB"],US:["h","hb","H","hB"],VC:["h","hb","H","hB"],VG:["h","hb","H","hB"],VI:["h","hb","H","hB"],ZM:["h","hb","H","hB"],BO:["H","hB","h","hb"],EC:["H","hB","h","hb"],ES:["H","hB","h","hb"],GQ:["H","hB","h","hb"],PE:["H","hB","h","hb"],AE:["h","hB","hb","H"],"ar-001":["h","hB","hb","H"],BH:["h","hB","hb","H"],DZ:["h","hB","hb","H"],EG:["h","hB","hb","H"],EH:["h","hB","hb","H"],HK:["h","hB","hb","H"],IQ:["h","hB","hb","H"],JO:["h","hB","hb","H"],KW:["h","hB","hb","H"],LB:["h","hB","hb","H"],LY:["h","hB","hb","H"],MO:["h","hB","hb","H"],MR:["h","hB","hb","H"],OM:["h","hB","hb","H"],PH:["h","hB","hb","H"],PS:["h","hB","hb","H"],QA:["h","hB","hb","H"],SA:["h","hB","hb","H"],SD:["h","hB","hb","H"],SY:["h","hB","hb","H"],TN:["h","hB","hb","H"],YE:["h","hB","hb","H"],AF:["H","hb","hB","h"],LA:["H","hb","hB","h"],CN:["H","hB","hb","h"],LV:["H","hB","hb","h"],TL:["H","hB","hb","h"],"zu-ZA":["H","hB","hb","h"],CD:["hB","H"],IR:["hB","H"],"hi-IN":["hB","h","H"],"kn-IN":["hB","h","H"],"ml-IN":["hB","h","H"],"te-IN":["hB","h","H"],KH:["hB","h","H","hb"],"ta-IN":["hB","h","hb","H"],BN:["hb","hB","h","H"],MY:["hb","hB","h","H"],ET:["hB","hb","h","H"],"gu-IN":["hB","hb","h","H"],"mr-IN":["hB","hb","h","H"],"pa-IN":["hB","hb","h","H"],TW:["hB","hb","h","H"],KE:["hB","hb","H","h"],MM:["hB","hb","H","h"],TZ:["hB","hb","H","h"],UG:["hB","hb","H","h"]};function st(ce,xt){for(var Gt="",Ir=0;Ir<ce.length;Ir++){var nn=ce.charAt(Ir);if(nn==="j"){for(var zi=0;Ir+1<ce.length&&ce.charAt(Ir+1)===nn;)zi++,Ir++;var Ui=1+(zi&1),Pi=zi<2?1:3+(zi>>1),ka="a",Ti=Fe(xt);for((Ti=="H"||Ti=="k")&&(Pi=0);Pi-- >0;)Gt+=ka;for(;Ui-- >0;)Gt=Ti+Gt}else nn==="J"?Gt+="H":Gt+=nn}return Gt}function Fe(ce){var xt=ce.hourCycle;if(xt===void 0&&ce.hourCycles&&ce.hourCycles.length&&(xt=ce.hourCycles[0]),xt)switch(xt){case"h24":return"k";case"h23":return"H";case"h12":return"h";case"h11":return"K";default:throw new Error("Invalid hourCycle")}var Gt=ce.language,Ir;Gt!=="root"&&(Ir=ce.maximize().region);var nn=Ne[Ir||""]||Ne[Gt||""]||Ne["".concat(Gt,"-001")]||Ne["001"];return nn[0]}var tt,Wt=new RegExp("^".concat(Oe.source,"*")),Pr=new RegExp("".concat(Oe.source,"*$"));function Qt(ce,xt){return{start:ce,end:xt}}var xr=!!String.prototype.startsWith,$r=!!String.fromCodePoint,Cr=!!Object.fromEntries,sn=!!String.prototype.codePointAt,ot=!!String.prototype.trimStart,_r=!!String.prototype.trimEnd,cr=!!Number.isSafeInteger,Vr=cr?Number.isSafeInteger:function(ce){return typeof ce=="number"&&isFinite(ce)&&Math.floor(ce)===ce&&Math.abs(ce)<=9007199254740991},Qn=!0;try{var mn=ne("([^\\p{White_Space}\\p{Pattern_Syntax}]*)","yu");Qn=((tt=mn.exec("a"))===null||tt===void 0?void 0:tt[0])==="a"}catch(ce){Qn=!1}var _n=xr?function(xt,Gt,Ir){return xt.startsWith(Gt,Ir)}:function(xt,Gt,Ir){return xt.slice(Ir,Ir+Gt.length)===Gt},Yr=$r?String.fromCodePoint:function(){for(var xt=[],Gt=0;Gt<arguments.length;Gt++)xt[Gt]=arguments[Gt];for(var Ir="",nn=xt.length,zi=0,Ui;nn>zi;){if(Ui=xt[zi++],Ui>1114111)throw RangeError(Ui+" is not a valid code point");Ir+=Ui<65536?String.fromCharCode(Ui):String.fromCharCode(((Ui-=65536)>>10)+55296,Ui%1024+56320)}return Ir},Fr=Cr?Object.fromEntries:function(xt){for(var Gt={},Ir=0,nn=xt;Ir<nn.length;Ir++){var zi=nn[Ir],Ui=zi[0],Pi=zi[1];Gt[Ui]=Pi}return Gt},kr=sn?function(xt,Gt){return xt.codePointAt(Gt)}:function(xt,Gt){var Ir=xt.length;if(!(Gt<0||Gt>=Ir)){var nn=xt.charCodeAt(Gt),zi;return nn<55296||nn>56319||Gt+1===Ir||(zi=xt.charCodeAt(Gt+1))<56320||zi>57343?nn:(nn-55296<<10)+(zi-56320)+65536}},ft=ot?function(xt){return xt.trimStart()}:function(xt){return xt.replace(Wt,"")},me=_r?function(xt){return xt.trimEnd()}:function(xt){return xt.replace(Pr,"")};function ne(ce,xt){return new RegExp(ce,xt)}var fe;if(Qn){var Q=ne("([^\\p{White_Space}\\p{Pattern_Syntax}]*)","yu");fe=function(xt,Gt){var Ir;Q.lastIndex=Gt;var nn=Q.exec(xt);return(Ir=nn[1])!==null&&Ir!==void 0?Ir:""}}else fe=function(xt,Gt){for(var Ir=[];;){var nn=kr(xt,Gt);if(nn===void 0||lt(nn)||qt(nn))break;Ir.push(nn),Gt+=nn>=65536?2:1}return Yr.apply(void 0,Ir)};var De=function(){function ce(xt,Gt){Gt===void 0&&(Gt={}),this.message=xt,this.position={offset:0,line:1,column:1},this.ignoreTag=!!Gt.ignoreTag,this.locale=Gt.locale,this.requiresOtherClause=!!Gt.requiresOtherClause,this.shouldParseSkeletons=!!Gt.shouldParseSkeletons}return ce.prototype.parse=function(){if(this.offset()!==0)throw Error("parser can only be used once");return this.parseMessage(0,"",!1)},ce.prototype.parseMessage=function(xt,Gt,Ir){for(var nn=[];!this.isEOF();){var zi=this.char();if(zi===123){var Ui=this.parseArgument(xt,Ir);if(Ui.err)return Ui;nn.push(Ui.val)}else{if(zi===125&&xt>0)break;if(zi===35&&(Gt==="plural"||Gt==="selectordinal")){var Pi=this.clonePosition();this.bump(),nn.push({type:l.pound,location:Qt(Pi,this.clonePosition())})}else if(zi===60&&!this.ignoreTag&&this.peek()===47){if(Ir)break;return this.error(v.UNMATCHED_CLOSING_TAG,Qt(this.clonePosition(),this.clonePosition()))}else if(zi===60&&!this.ignoreTag&&dt(this.peek()||0)){var Ui=this.parseTag(xt,Gt);if(Ui.err)return Ui;nn.push(Ui.val)}else{var Ui=this.parseLiteral(xt,Gt);if(Ui.err)return Ui;nn.push(Ui.val)}}}return{val:nn,err:null}},ce.prototype.parseTag=function(xt,Gt){var Ir=this.clonePosition();this.bump();var nn=this.parseTagName();if(this.bumpSpace(),this.bumpIf("/>"))return{val:{type:l.literal,value:"<".concat(nn,"/>"),location:Qt(Ir,this.clonePosition())},err:null};if(this.bumpIf(">")){var zi=this.parseMessage(xt+1,Gt,!0);if(zi.err)return zi;var Ui=zi.val,Pi=this.clonePosition();if(this.bumpIf("</")){if(this.isEOF()||!dt(this.char()))return this.error(v.INVALID_TAG,Qt(Pi,this.clonePosition()));var ka=this.clonePosition(),Ti=this.parseTagName();return nn!==Ti?this.error(v.UNMATCHED_CLOSING_TAG,Qt(ka,this.clonePosition())):(this.bumpSpace(),this.bumpIf(">")?{val:{type:l.tag,value:nn,children:Ui,location:Qt(Ir,this.clonePosition())},err:null}:this.error(v.INVALID_TAG,Qt(Pi,this.clonePosition())))}else return this.error(v.UNCLOSED_TAG,Qt(Ir,this.clonePosition()))}else return this.error(v.INVALID_TAG,Qt(Ir,this.clonePosition()))},ce.prototype.parseTagName=function(){var xt=this.offset();for(this.bump();!this.isEOF()&&it(this.char());)this.bump();return this.message.slice(xt,this.offset())},ce.prototype.parseLiteral=function(xt,Gt){for(var Ir=this.clonePosition(),nn="";;){var zi=this.tryParseQuote(Gt);if(zi){nn+=zi;continue}var Ui=this.tryParseUnquoted(xt,Gt);if(Ui){nn+=Ui;continue}var Pi=this.tryParseLeftAngleBracket();if(Pi){nn+=Pi;continue}break}var ka=Qt(Ir,this.clonePosition());return{val:{type:l.literal,value:nn,location:ka},err:null}},ce.prototype.tryParseLeftAngleBracket=function(){return!this.isEOF()&&this.char()===60&&(this.ignoreTag||!Jt(this.peek()||0))?(this.bump(),"<"):null},ce.prototype.tryParseQuote=function(xt){if(this.isEOF()||this.char()!==39)return null;switch(this.peek()){case 39:return this.bump(),this.bump(),"'";case 123:case 60:case 62:case 125:break;case 35:if(xt==="plural"||xt==="selectordinal")break;return null;default:return null}this.bump();var Gt=[this.char()];for(this.bump();!this.isEOF();){var Ir=this.char();if(Ir===39)if(this.peek()===39)Gt.push(39),this.bump();else{this.bump();break}else Gt.push(Ir);this.bump()}return Yr.apply(void 0,Gt)},ce.prototype.tryParseUnquoted=function(xt,Gt){if(this.isEOF())return null;var Ir=this.char();return Ir===60||Ir===123||Ir===35&&(Gt==="plural"||Gt==="selectordinal")||Ir===125&&xt>0?null:(this.bump(),Yr(Ir))},ce.prototype.parseArgument=function(xt,Gt){var Ir=this.clonePosition();if(this.bump(),this.bumpSpace(),this.isEOF())return this.error(v.EXPECT_ARGUMENT_CLOSING_BRACE,Qt(Ir,this.clonePosition()));if(this.char()===125)return this.bump(),this.error(v.EMPTY_ARGUMENT,Qt(Ir,this.clonePosition()));var nn=this.parseIdentifierIfPossible().value;if(!nn)return this.error(v.MALFORMED_ARGUMENT,Qt(Ir,this.clonePosition()));if(this.bumpSpace(),this.isEOF())return this.error(v.EXPECT_ARGUMENT_CLOSING_BRACE,Qt(Ir,this.clonePosition()));switch(this.char()){case 125:return this.bump(),{val:{type:l.argument,value:nn,location:Qt(Ir,this.clonePosition())},err:null};case 44:return this.bump(),this.bumpSpace(),this.isEOF()?this.error(v.EXPECT_ARGUMENT_CLOSING_BRACE,Qt(Ir,this.clonePosition())):this.parseArgumentOptions(xt,Gt,nn,Ir);default:return this.error(v.MALFORMED_ARGUMENT,Qt(Ir,this.clonePosition()))}},ce.prototype.parseIdentifierIfPossible=function(){var xt=this.clonePosition(),Gt=this.offset(),Ir=fe(this.message,Gt),nn=Gt+Ir.length;this.bumpTo(nn);var zi=this.clonePosition(),Ui=Qt(xt,zi);return{value:Ir,location:Ui}},ce.prototype.parseArgumentOptions=function(xt,Gt,Ir,nn){var zi,Ui=this.clonePosition(),Pi=this.parseIdentifierIfPossible().value,ka=this.clonePosition();switch(Pi){case"":return this.error(v.EXPECT_ARGUMENT_TYPE,Qt(Ui,ka));case"number":case"date":case"time":{this.bumpSpace();var Ti=null;if(this.bumpIf(",")){this.bumpSpace();var Ge=this.clonePosition(),et=this.parseSimpleArgStyleIfPossible();if(et.err)return et;var gt=me(et.val);if(gt.length===0)return this.error(v.EXPECT_ARGUMENT_STYLE,Qt(this.clonePosition(),this.clonePosition()));var ht=Qt(Ge,this.clonePosition());Ti={style:gt,styleLocation:ht}}var Et=this.tryParseArgumentClose(nn);if(Et.err)return Et;var Zt=Qt(nn,this.clonePosition());if(Ti&&_n(Ti==null?void 0:Ti.style,"::",0)){var sr=ft(Ti.style.slice(2));if(Pi==="number"){var et=this.parseNumberSkeletonFromString(sr,Ti.styleLocation);return et.err?et:{val:{type:l.number,value:Ir,location:Zt,style:et.val},err:null}}else{if(sr.length===0)return this.error(v.EXPECT_DATE_TIME_SKELETON,Zt);var bt=sr;this.locale&&(bt=st(sr,this.locale));var gt={type:R.dateTime,pattern:bt,location:Ti.styleLocation,parsedOptions:this.shouldParseSkeletons?K(bt):{}},Ft=Pi==="date"?l.date:l.time;return{val:{type:Ft,value:Ir,location:Zt,style:gt},err:null}}}return{val:{type:Pi==="number"?l.number:Pi==="date"?l.date:l.time,value:Ir,location:Zt,style:(zi=Ti==null?void 0:Ti.style)!==null&&zi!==void 0?zi:null},err:null}}case"plural":case"selectordinal":case"select":{var zr=this.clonePosition();if(this.bumpSpace(),!this.bumpIf(","))return this.error(v.EXPECT_SELECT_ARGUMENT_OPTIONS,Qt(zr,(0,w.pi)({},zr)));this.bumpSpace();var Jn=this.parseIdentifierIfPossible(),yn=0;if(Pi!=="select"&&Jn.value==="offset"){if(!this.bumpIf(":"))return this.error(v.EXPECT_PLURAL_ARGUMENT_OFFSET_VALUE,Qt(this.clonePosition(),this.clonePosition()));this.bumpSpace();var et=this.tryParseDecimalInteger(v.EXPECT_PLURAL_ARGUMENT_OFFSET_VALUE,v.INVALID_PLURAL_ARGUMENT_OFFSET_VALUE);if(et.err)return et;this.bumpSpace(),Jn=this.parseIdentifierIfPossible(),yn=et.val}var tn=this.tryParsePluralOrSelectOptions(xt,Pi,Gt,Jn);if(tn.err)return tn;var Et=this.tryParseArgumentClose(nn);if(Et.err)return Et;var ni=Qt(nn,this.clonePosition());return Pi==="select"?{val:{type:l.select,value:Ir,options:Fr(tn.val),location:ni},err:null}:{val:{type:l.plural,value:Ir,options:Fr(tn.val),offset:yn,pluralType:Pi==="plural"?"cardinal":"ordinal",location:ni},err:null}}default:return this.error(v.INVALID_ARGUMENT_TYPE,Qt(Ui,ka))}},ce.prototype.tryParseArgumentClose=function(xt){return this.isEOF()||this.char()!==125?this.error(v.EXPECT_ARGUMENT_CLOSING_BRACE,Qt(xt,this.clonePosition())):(this.bump(),{val:!0,err:null})},ce.prototype.parseSimpleArgStyleIfPossible=function(){for(var xt=0,Gt=this.clonePosition();!this.isEOF();){var Ir=this.char();switch(Ir){case 39:{this.bump();var nn=this.clonePosition();if(!this.bumpUntil("'"))return this.error(v.UNCLOSED_QUOTE_IN_ARGUMENT_STYLE,Qt(nn,this.clonePosition()));this.bump();break}case 123:{xt+=1,this.bump();break}case 125:{if(xt>0)xt-=1;else return{val:this.message.slice(Gt.offset,this.offset()),err:null};break}default:this.bump();break}}return{val:this.message.slice(Gt.offset,this.offset()),err:null}},ce.prototype.parseNumberSkeletonFromString=function(xt,Gt){var Ir=[];try{Ir=we(xt)}catch(nn){return this.error(v.INVALID_NUMBER_SKELETON,Gt)}return{val:{type:R.number,tokens:Ir,location:Gt,parsedOptions:this.shouldParseSkeletons?se(Ir):{}},err:null}},ce.prototype.tryParsePluralOrSelectOptions=function(xt,Gt,Ir,nn){for(var zi,Ui=!1,Pi=[],ka=new Set,Ti=nn.value,Ge=nn.location;;){if(Ti.length===0){var et=this.clonePosition();if(Gt!=="select"&&this.bumpIf("=")){var gt=this.tryParseDecimalInteger(v.EXPECT_PLURAL_ARGUMENT_SELECTOR,v.INVALID_PLURAL_ARGUMENT_SELECTOR);if(gt.err)return gt;Ge=Qt(et,this.clonePosition()),Ti=this.message.slice(et.offset,this.offset())}else break}if(ka.has(Ti))return this.error(Gt==="select"?v.DUPLICATE_SELECT_ARGUMENT_SELECTOR:v.DUPLICATE_PLURAL_ARGUMENT_SELECTOR,Ge);Ti==="other"&&(Ui=!0),this.bumpSpace();var ht=this.clonePosition();if(!this.bumpIf("{"))return this.error(Gt==="select"?v.EXPECT_SELECT_ARGUMENT_SELECTOR_FRAGMENT:v.EXPECT_PLURAL_ARGUMENT_SELECTOR_FRAGMENT,Qt(this.clonePosition(),this.clonePosition()));var Et=this.parseMessage(xt+1,Gt,Ir);if(Et.err)return Et;var Zt=this.tryParseArgumentClose(ht);if(Zt.err)return Zt;Pi.push([Ti,{value:Et.val,location:Qt(ht,this.clonePosition())}]),ka.add(Ti),this.bumpSpace(),zi=this.parseIdentifierIfPossible(),Ti=zi.value,Ge=zi.location}return Pi.length===0?this.error(Gt==="select"?v.EXPECT_SELECT_ARGUMENT_SELECTOR:v.EXPECT_PLURAL_ARGUMENT_SELECTOR,Qt(this.clonePosition(),this.clonePosition())):this.requiresOtherClause&&!Ui?this.error(v.MISSING_OTHER_CLAUSE,Qt(this.clonePosition(),this.clonePosition())):{val:Pi,err:null}},ce.prototype.tryParseDecimalInteger=function(xt,Gt){var Ir=1,nn=this.clonePosition();this.bumpIf("+")||this.bumpIf("-")&&(Ir=-1);for(var zi=!1,Ui=0;!this.isEOF();){var Pi=this.char();if(Pi>=48&&Pi<=57)zi=!0,Ui=Ui*10+(Pi-48),this.bump();else break}var ka=Qt(nn,this.clonePosition());return zi?(Ui*=Ir,Vr(Ui)?{val:Ui,err:null}:this.error(Gt,ka)):this.error(xt,ka)},ce.prototype.offset=function(){return this.position.offset},ce.prototype.isEOF=function(){return this.offset()===this.message.length},ce.prototype.clonePosition=function(){return{offset:this.position.offset,line:this.position.line,column:this.position.column}},ce.prototype.char=function(){var xt=this.position.offset;if(xt>=this.message.length)throw Error("out of bound");var Gt=kr(this.message,xt);if(Gt===void 0)throw Error("Offset ".concat(xt," is at invalid UTF-16 code unit boundary"));return Gt},ce.prototype.error=function(xt,Gt){return{val:null,err:{kind:xt,message:this.message,location:Gt}}},ce.prototype.bump=function(){if(!this.isEOF()){var xt=this.char();xt===10?(this.position.line+=1,this.position.column=1,this.position.offset+=1):(this.position.column+=1,this.position.offset+=xt<65536?1:2)}},ce.prototype.bumpIf=function(xt){if(_n(this.message,xt,this.offset())){for(var Gt=0;Gt<xt.length;Gt++)this.bump();return!0}return!1},ce.prototype.bumpUntil=function(xt){var Gt=this.offset(),Ir=this.message.indexOf(xt,Gt);return Ir>=0?(this.bumpTo(Ir),!0):(this.bumpTo(this.message.length),!1)},ce.prototype.bumpTo=function(xt){if(this.offset()>xt)throw Error("targetOffset ".concat(xt," must be greater than or equal to the current offset ").concat(this.offset()));for(xt=Math.min(xt,this.message.length);;){var Gt=this.offset();if(Gt===xt)break;if(Gt>xt)throw Error("targetOffset ".concat(xt," is at invalid UTF-16 code unit boundary"));if(this.bump(),this.isEOF())break}},ce.prototype.bumpSpace=function(){for(;!this.isEOF()&&lt(this.char());)this.bump()},ce.prototype.peek=function(){if(this.isEOF())return null;var xt=this.char(),Gt=this.offset(),Ir=this.message.charCodeAt(Gt+(xt>=65536?2:1));return Ir!=null?Ir:null},ce}();function dt(ce){return ce>=97&&ce<=122||ce>=65&&ce<=90}function Jt(ce){return dt(ce)||ce===47}function it(ce){return ce===45||ce===46||ce>=48&&ce<=57||ce===95||ce>=97&&ce<=122||ce>=65&&ce<=90||ce==183||ce>=192&&ce<=214||ce>=216&&ce<=246||ce>=248&&ce<=893||ce>=895&&ce<=8191||ce>=8204&&ce<=8205||ce>=8255&&ce<=8256||ce>=8304&&ce<=8591||ce>=11264&&ce<=12271||ce>=12289&&ce<=55295||ce>=63744&&ce<=64975||ce>=65008&&ce<=65533||ce>=65536&&ce<=983039}function lt(ce){return ce>=9&&ce<=13||ce===32||ce===133||ce>=8206&&ce<=8207||ce===8232||ce===8233}function qt(ce){return ce>=33&&ce<=35||ce===36||ce>=37&&ce<=39||ce===40||ce===41||ce===42||ce===43||ce===44||ce===45||ce>=46&&ce<=47||ce>=58&&ce<=59||ce>=60&&ce<=62||ce>=63&&ce<=64||ce===91||ce===92||ce===93||ce===94||ce===96||ce===123||ce===124||ce===125||ce===126||ce===161||ce>=162&&ce<=165||ce===166||ce===167||ce===169||ce===171||ce===172||ce===174||ce===176||ce===177||ce===182||ce===187||ce===191||ce===215||ce===247||ce>=8208&&ce<=8213||ce>=8214&&ce<=8215||ce===8216||ce===8217||ce===8218||ce>=8219&&ce<=8220||ce===8221||ce===8222||ce===8223||ce>=8224&&ce<=8231||ce>=8240&&ce<=8248||ce===8249||ce===8250||ce>=8251&&ce<=8254||ce>=8257&&ce<=8259||ce===8260||ce===8261||ce===8262||ce>=8263&&ce<=8273||ce===8274||ce===8275||ce>=8277&&ce<=8286||ce>=8592&&ce<=8596||ce>=8597&&ce<=8601||ce>=8602&&ce<=8603||ce>=8604&&ce<=8607||ce===8608||ce>=8609&&ce<=8610||ce===8611||ce>=8612&&ce<=8613||ce===8614||ce>=8615&&ce<=8621||ce===8622||ce>=8623&&ce<=8653||ce>=8654&&ce<=8655||ce>=8656&&ce<=8657||ce===8658||ce===8659||ce===8660||ce>=8661&&ce<=8691||ce>=8692&&ce<=8959||ce>=8960&&ce<=8967||ce===8968||ce===8969||ce===8970||ce===8971||ce>=8972&&ce<=8991||ce>=8992&&ce<=8993||ce>=8994&&ce<=9e3||ce===9001||ce===9002||ce>=9003&&ce<=9083||ce===9084||ce>=9085&&ce<=9114||ce>=9115&&ce<=9139||ce>=9140&&ce<=9179||ce>=9180&&ce<=9185||ce>=9186&&ce<=9254||ce>=9255&&ce<=9279||ce>=9280&&ce<=9290||ce>=9291&&ce<=9311||ce>=9472&&ce<=9654||ce===9655||ce>=9656&&ce<=9664||ce===9665||ce>=9666&&ce<=9719||ce>=9720&&ce<=9727||ce>=9728&&ce<=9838||ce===9839||ce>=9840&&ce<=10087||ce===10088||ce===10089||ce===10090||ce===10091||ce===10092||ce===10093||ce===10094||ce===10095||ce===10096||ce===10097||ce===10098||ce===10099||ce===10100||ce===10101||ce>=10132&&ce<=10175||ce>=10176&&ce<=10180||ce===10181||ce===10182||ce>=10183&&ce<=10213||ce===10214||ce===10215||ce===10216||ce===10217||ce===10218||ce===10219||ce===10220||ce===10221||ce===10222||ce===10223||ce>=10224&&ce<=10239||ce>=10240&&ce<=10495||ce>=10496&&ce<=10626||ce===10627||ce===10628||ce===10629||ce===10630||ce===10631||ce===10632||ce===10633||ce===10634||ce===10635||ce===10636||ce===10637||ce===10638||ce===10639||ce===10640||ce===10641||ce===10642||ce===10643||ce===10644||ce===10645||ce===10646||ce===10647||ce===10648||ce>=10649&&ce<=10711||ce===10712||ce===10713||ce===10714||ce===10715||ce>=10716&&ce<=10747||ce===10748||ce===10749||ce>=10750&&ce<=11007||ce>=11008&&ce<=11055||ce>=11056&&ce<=11076||ce>=11077&&ce<=11078||ce>=11079&&ce<=11084||ce>=11085&&ce<=11123||ce>=11124&&ce<=11125||ce>=11126&&ce<=11157||ce===11158||ce>=11159&&ce<=11263||ce>=11776&&ce<=11777||ce===11778||ce===11779||ce===11780||ce===11781||ce>=11782&&ce<=11784||ce===11785||ce===11786||ce===11787||ce===11788||ce===11789||ce>=11790&&ce<=11798||ce===11799||ce>=11800&&ce<=11801||ce===11802||ce===11803||ce===11804||ce===11805||ce>=11806&&ce<=11807||ce===11808||ce===11809||ce===11810||ce===11811||ce===11812||ce===11813||ce===11814||ce===11815||ce===11816||ce===11817||ce>=11818&&ce<=11822||ce===11823||ce>=11824&&ce<=11833||ce>=11834&&ce<=11835||ce>=11836&&ce<=11839||ce===11840||ce===11841||ce===11842||ce>=11843&&ce<=11855||ce>=11856&&ce<=11857||ce===11858||ce>=11859&&ce<=11903||ce>=12289&&ce<=12291||ce===12296||ce===12297||ce===12298||ce===12299||ce===12300||ce===12301||ce===12302||ce===12303||ce===12304||ce===12305||ce>=12306&&ce<=12307||ce===12308||ce===12309||ce===12310||ce===12311||ce===12312||ce===12313||ce===12314||ce===12315||ce===12316||ce===12317||ce>=12318&&ce<=12319||ce===12320||ce===12336||ce===64830||ce===64831||ce>=65093&&ce<=65094}function pr(ce){ce.forEach(function(xt){if(delete xt.location,Z(xt)||W(xt))for(var Gt in xt.options)delete xt.options[Gt].location,pr(xt.options[Gt].value);else k(xt)&&le(xt.style)||(B(xt)||z(xt))&&be(xt.style)?delete xt.style.location:te(xt)&&pr(xt.children)})}function Hr(ce,xt){xt===void 0&&(xt={}),xt=(0,w.pi)({shouldParseSkeletons:!0,requiresOtherClause:!0},xt);var Gt=new De(ce,xt).parse();if(Gt.err){var Ir=SyntaxError(v[Gt.err.kind]);throw Ir.location=Gt.err.location,Ir.originalMessage=Gt.err.message,Ir}return xt!=null&&xt.captureLocation||pr(Gt.val),Gt.val}var Xr=null},28872:function(U,F,c){"use strict";c.d(F,{$6:function(){return z},OV:function(){return A},Qe:function(){return k},Rw:function(){return l},X9:function(){return B},bc:function(){return v},gb:function(){return D},wI:function(){return R}});var w=c(34254),v;(function(Z){Z.FORMAT_ERROR="FORMAT_ERROR",Z.UNSUPPORTED_FORMATTER="UNSUPPORTED_FORMATTER",Z.INVALID_CONFIG="INVALID_CONFIG",Z.MISSING_DATA="MISSING_DATA",Z.MISSING_TRANSLATION="MISSING_TRANSLATION"})(v||(v={}));var l=function(Z){(0,w.ZT)(W,Z);function W(Y,te,le){var be=this,de=le?le instanceof Error?le:new Error(String(le)):void 0;return be=Z.call(this,"[@formatjs/intl Error ".concat(Y,"] ").concat(te,`
`).concat(de?`
`.concat(de.message,`
`).concat(de.stack):""))||this,be.code=Y,typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(be,W),be}return W}(Error),R=function(Z){(0,w.ZT)(W,Z);function W(Y,te){return Z.call(this,v.UNSUPPORTED_FORMATTER,Y,te)||this}return W}(l),A=function(Z){(0,w.ZT)(W,Z);function W(Y,te){return Z.call(this,v.INVALID_CONFIG,Y,te)||this}return W}(l),D=function(Z){(0,w.ZT)(W,Z);function W(Y,te){return Z.call(this,v.MISSING_DATA,Y,te)||this}return W}(l),k=function(Z){(0,w.ZT)(W,Z);function W(Y,te,le){return Z.call(this,v.FORMAT_ERROR,"".concat(Y,`
Locale: `).concat(te,`
`),le)||this}return W}(l),B=function(Z){(0,w.ZT)(W,Z);function W(Y,te,le,be){var de=Z.call(this,"".concat(Y,`
MessageID: `).concat(le==null?void 0:le.id,`
Default Message: `).concat(le==null?void 0:le.defaultMessage,`
Description: `).concat(le==null?void 0:le.description,`
`),te,be)||this;return de.descriptor=le,de}return W}(k),z=function(Z){(0,w.ZT)(W,Z);function W(Y,te){var le=Z.call(this,v.MISSING_TRANSLATION,'Missing message: "'.concat(Y.id,'" for locale "').concat(te,'", using ').concat(Y.defaultMessage?"default message (".concat(typeof Y.defaultMessage=="string"?Y.defaultMessage:Y.defaultMessage.map(function(be){var de;return(de=be.value)!==null&&de!==void 0?de:JSON.stringify(be)}).join(),")"):"id"," as fallback."))||this;return le.descriptor=Y,le}return W}(l)},5734:function(U,F,c){"use strict";c.d(F,{L6:function(){return A},Sn:function(){return z},TB:function(){return Y},Z0:function(){return B},ax:function(){return W}});var w=c(34254),v=c(78157),l=c(185),R=c(28872);function A(te,le,be){return be===void 0&&(be={}),le.reduce(function(de,pe){return pe in te?de[pe]=te[pe]:pe in be&&(de[pe]=be[pe]),de},{})}var D=function(te){},k=function(te){},B={formats:{},messages:{},timeZone:void 0,defaultLocale:"en",defaultFormats:{},fallbackOnEmptyString:!0,onError:D,onWarn:k};function z(){return{dateTime:{},number:{},message:{},relativeTime:{},pluralRules:{},list:{},displayNames:{}}}function Z(te){return{create:function(){return{get:function(le){return te[le]},set:function(le,be){te[le]=be}}}}}function W(te){te===void 0&&(te=z());var le=Intl.RelativeTimeFormat,be=Intl.ListFormat,de=Intl.DisplayNames,pe=(0,l.Z)(function(){for(var Ve,K=[],ke=0;ke<arguments.length;ke++)K[ke]=arguments[ke];return new((Ve=Intl.DateTimeFormat).bind.apply(Ve,(0,w.ev)([void 0],K,!1)))},{cache:Z(te.dateTime),strategy:l.A.variadic}),Oe=(0,l.Z)(function(){for(var Ve,K=[],ke=0;ke<arguments.length;ke++)K[ke]=arguments[ke];return new((Ve=Intl.NumberFormat).bind.apply(Ve,(0,w.ev)([void 0],K,!1)))},{cache:Z(te.number),strategy:l.A.variadic}),xe=(0,l.Z)(function(){for(var Ve,K=[],ke=0;ke<arguments.length;ke++)K[ke]=arguments[ke];return new((Ve=Intl.PluralRules).bind.apply(Ve,(0,w.ev)([void 0],K,!1)))},{cache:Z(te.pluralRules),strategy:l.A.variadic});return{getDateTimeFormat:pe,getNumberFormat:Oe,getMessageFormat:(0,l.Z)(function(Ve,K,ke,we){return new v.C(Ve,K,ke,(0,w.pi)({formatters:{getNumberFormat:Oe,getDateTimeFormat:pe,getPluralRules:xe}},we||{}))},{cache:Z(te.message),strategy:l.A.variadic}),getRelativeTimeFormat:(0,l.Z)(function(){for(var Ve=[],K=0;K<arguments.length;K++)Ve[K]=arguments[K];return new(le.bind.apply(le,(0,w.ev)([void 0],Ve,!1)))},{cache:Z(te.relativeTime),strategy:l.A.variadic}),getPluralRules:xe,getListFormat:(0,l.Z)(function(){for(var Ve=[],K=0;K<arguments.length;K++)Ve[K]=arguments[K];return new(be.bind.apply(be,(0,w.ev)([void 0],Ve,!1)))},{cache:Z(te.list),strategy:l.A.variadic}),getDisplayNames:(0,l.Z)(function(){for(var Ve=[],K=0;K<arguments.length;K++)Ve[K]=arguments[K];return new(de.bind.apply(de,(0,w.ev)([void 0],Ve,!1)))},{cache:Z(te.displayNames),strategy:l.A.variadic})}}function Y(te,le,be,de){var pe=te&&te[le],Oe;if(pe&&(Oe=pe[be]),Oe)return Oe;de(new R.wI("No ".concat(le," format named: ").concat(be)))}},47903:function(U){U.exports=F;function F(v,l){var R=v&&v.type,A;if(R==="FeatureCollection")for(A=0;A<v.features.length;A++)F(v.features[A],l);else if(R==="GeometryCollection")for(A=0;A<v.geometries.length;A++)F(v.geometries[A],l);else if(R==="Feature")F(v.geometry,l);else if(R==="Polygon")c(v.coordinates,l);else if(R==="MultiPolygon")for(A=0;A<v.coordinates.length;A++)c(v.coordinates[A],l);return v}function c(v,l){if(v.length!==0){w(v[0],l);for(var R=1;R<v.length;R++)w(v[R],!l)}}function w(v,l){for(var R=0,A=0,D=0,k=v.length,B=k-1;D<k;B=D++){var z=(v[D][0]-v[B][0])*(v[B][1]+v[D][1]),Z=R+z;A+=Math.abs(R)>=Math.abs(z)?R-Z+z:z-Z+R,R=Z}R+A>=0!=!!l&&v.reverse()}},96542:function(U){"use strict";U.exports=F;function F(c,w){this.x=c,this.y=w}F.prototype={clone:function(){return new F(this.x,this.y)},add:function(c){return this.clone()._add(c)},sub:function(c){return this.clone()._sub(c)},multByPoint:function(c){return this.clone()._multByPoint(c)},divByPoint:function(c){return this.clone()._divByPoint(c)},mult:function(c){return this.clone()._mult(c)},div:function(c){return this.clone()._div(c)},rotate:function(c){return this.clone()._rotate(c)},rotateAround:function(c,w){return this.clone()._rotateAround(c,w)},matMult:function(c){return this.clone()._matMult(c)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(c){return this.x===c.x&&this.y===c.y},dist:function(c){return Math.sqrt(this.distSqr(c))},distSqr:function(c){var w=c.x-this.x,v=c.y-this.y;return w*w+v*v},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(c){return Math.atan2(this.y-c.y,this.x-c.x)},angleWith:function(c){return this.angleWithSep(c.x,c.y)},angleWithSep:function(c,w){return Math.atan2(this.x*w-this.y*c,this.x*c+this.y*w)},_matMult:function(c){var w=c[0]*this.x+c[1]*this.y,v=c[2]*this.x+c[3]*this.y;return this.x=w,this.y=v,this},_add:function(c){return this.x+=c.x,this.y+=c.y,this},_sub:function(c){return this.x-=c.x,this.y-=c.y,this},_mult:function(c){return this.x*=c,this.y*=c,this},_div:function(c){return this.x/=c,this.y/=c,this},_multByPoint:function(c){return this.x*=c.x,this.y*=c.y,this},_divByPoint:function(c){return this.x/=c.x,this.y/=c.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var c=this.y;return this.y=this.x,this.x=-c,this},_rotate:function(c){var w=Math.cos(c),v=Math.sin(c),l=w*this.x-v*this.y,R=v*this.x+w*this.y;return this.x=l,this.y=R,this},_rotateAround:function(c,w){var v=Math.cos(c),l=Math.sin(c),R=w.x+v*(this.x-w.x)-l*(this.y-w.y),A=w.y+l*(this.x-w.x)+v*(this.y-w.y);return this.x=R,this.y=A,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},F.convert=function(c){return c instanceof F?c:Array.isArray(c)?new F(c[0],c[1]):c}},99996:function(U,F,c){U.exports.VectorTile=c(14253),c(35752),c(143)},14253:function(U,F,c){"use strict";var w=c(143);U.exports=v;function v(R,A){this.layers=R.readFields(l,{},A)}function l(R,A,D){if(R===3){var k=new w(D,D.readVarint()+D.pos);k.length&&(A[k.name]=k)}}},35752:function(U,F,c){"use strict";var w=c(96542);U.exports=v;function v(k,B,z,Z,W){this.properties={},this.extent=z,this.type=0,this._pbf=k,this._geometry=-1,this._keys=Z,this._values=W,k.readFields(l,this,B)}function l(k,B,z){k==1?B.id=z.readVarint():k==2?R(z,B):k==3?B.type=z.readVarint():k==4&&(B._geometry=z.pos)}function R(k,B){for(var z=k.readVarint()+k.pos;k.pos<z;){var Z=B._keys[k.readVarint()],W=B._values[k.readVarint()];B.properties[Z]=W}}v.types=["Unknown","Point","LineString","Polygon"],v.prototype.loadGeometry=function(){var k=this._pbf;k.pos=this._geometry;for(var B=k.readVarint()+k.pos,z=1,Z=0,W=0,Y=0,te=[],le;k.pos<B;){if(Z<=0){var be=k.readVarint();z=be&7,Z=be>>3}if(Z--,z===1||z===2)W+=k.readSVarint(),Y+=k.readSVarint(),z===1&&(le&&te.push(le),le=[]),le.push(new w(W,Y));else if(z===7)le&&le.push(le[0].clone());else throw new Error("unknown command "+z)}return le&&te.push(le),te},v.prototype.bbox=function(){var k=this._pbf;k.pos=this._geometry;for(var B=k.readVarint()+k.pos,z=1,Z=0,W=0,Y=0,te=1/0,le=-1/0,be=1/0,de=-1/0;k.pos<B;){if(Z<=0){var pe=k.readVarint();z=pe&7,Z=pe>>3}if(Z--,z===1||z===2)W+=k.readSVarint(),Y+=k.readSVarint(),W<te&&(te=W),W>le&&(le=W),Y<be&&(be=Y),Y>de&&(de=Y);else if(z!==7)throw new Error("unknown command "+z)}return[te,be,le,de]},v.prototype.toGeoJSON=function(k,B,z){var Z=this.extent*Math.pow(2,z),W=this.extent*k,Y=this.extent*B,te=this.loadGeometry(),le=v.types[this.type],be,de;function pe(Ve){for(var K=0;K<Ve.length;K++){var ke=Ve[K],we=180-(ke.y+Y)*360/Z;Ve[K]=[(ke.x+W)*360/Z-180,360/Math.PI*Math.atan(Math.exp(we*Math.PI/180))-90]}}switch(this.type){case 1:var Oe=[];for(be=0;be<te.length;be++)Oe[be]=te[be][0];te=Oe,pe(te);break;case 2:for(be=0;be<te.length;be++)pe(te[be]);break;case 3:for(te=A(te),be=0;be<te.length;be++)for(de=0;de<te[be].length;de++)pe(te[be][de]);break}te.length===1?te=te[0]:le="Multi"+le;var xe={type:"Feature",geometry:{type:le,coordinates:te},properties:this.properties};return"id"in this&&(xe.id=this.id),xe};function A(k){var B=k.length;if(B<=1)return[k];for(var z=[],Z,W,Y=0;Y<B;Y++){var te=D(k[Y]);te!==0&&(W===void 0&&(W=te<0),W===te<0?(Z&&z.push(Z),Z=[k[Y]]):Z.push(k[Y]))}return Z&&z.push(Z),z}function D(k){for(var B=0,z=0,Z=k.length,W=Z-1,Y,te;z<Z;W=z++)Y=k[z],te=k[W],B+=(te.x-Y.x)*(Y.y+te.y);return B}},143:function(U,F,c){"use strict";var w=c(35752);U.exports=v;function v(A,D){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=A,this._keys=[],this._values=[],this._features=[],A.readFields(l,this,D),this.length=this._features.length}function l(A,D,k){A===15?D.version=k.readVarint():A===1?D.name=k.readString():A===5?D.extent=k.readVarint():A===2?D._features.push(k.pos):A===3?D._keys.push(k.readString()):A===4&&D._values.push(R(k))}function R(A){for(var D=null,k=A.readVarint()+A.pos;A.pos<k;){var B=A.readVarint()>>3;D=B===1?A.readString():B===2?A.readFloat():B===3?A.readDouble():B===4?A.readVarint64():B===5?A.readVarint():B===6?A.readSVarint():B===7?A.readBoolean():null}return D}v.prototype.feature=function(A){if(A<0||A>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[A];var D=this._pbf.readVarint()+this._pbf.pos;return new w(this._pbf,D,this.extent,this._keys,this._values)}},20679:function(U,F,c){"use strict";c.d(F,{f:function(){return B},m:function(){return D}});var w=c(69946),v=c.n(w),l=c(30279),R=c.n(l),A=c(18280),D,k="/";function B(W){var Y;return W.type==="hash"?Y=(0,A.q_)():W.type==="memory"?Y=(0,A.PP)(W):Y=(0,A.lX)(),W.basename&&(k=W.basename),D=R()(R()({},Y),{},{push:function(le,be){Y.push(z(le,Y),be)},replace:function(le,be){Y.replace(z(le,Y),be)},get location(){return Y.location},get action(){return Y.action}}),Y}function z(W,Y){if(typeof W=="string")return"".concat(Z(k)).concat(W);if(v()(W)==="object"){var te=Y.location.pathname;return R()(R()({},W),{},{pathname:W.pathname?"".concat(Z(k)).concat(W.pathname):te})}else throw new Error("Unexpected to: ".concat(W))}function Z(W){return W.slice(-1)==="/"?W.slice(0,-1):W}},55566:function(U,F,c){"use strict";c.d(F,{Dl:function(){return xe},dY:function(){return ot},_H:function(){return Z},ql:function(){return w.ql},rU:function(){return w.rU},OL:function(){return w.OL},m8:function(){return w.m8},fp:function(){return w.fp},il:function(){return me},Sc:function(){return sr},Ov:function(){return w.Ov},yh:function(){return bo},YB:function(){return D},bU:function(){return Ft.b},TH:function(){return w.TH},OK:function(){return fa},pC:function(){return w.pC},UO:function(){return w.UO},Qt:function(){return w.Qt},eL:function(){return Ur},lr:function(){return w.lr},tx:function(){return Xs},WF:function(){return Y.W},OO:function(){return $u}});var w=c(65425),v=c(34254),l=c(50959),R=c(20266),A=c(37759);function D(){var qe=l.useContext(R._y);return(0,A.lq)(qe),qe}function k(qe,Bt){var ge=qe.values,je=(0,v._T)(qe,["values"]),wt=Bt.values,nr=(0,v._T)(Bt,["values"]);return(0,A.wU)(wt,ge)&&(0,A.wU)(je,nr)}function B(qe){var Bt=D(),ge=Bt.formatMessage,je=Bt.textComponent,wt=je===void 0?l.Fragment:je,nr=qe.id,en=qe.description,Dn=qe.defaultMessage,Ai=qe.values,na=qe.children,Aa=qe.tagName,Ta=Aa===void 0?wt:Aa,Wa=qe.ignoreTag,Co={id:nr,description:en,defaultMessage:Dn},lo=ge(Co,Ai,{ignoreTag:Wa});return typeof na=="function"?na(Array.isArray(lo)?lo:[lo]):Ta?l.createElement(Ta,null,l.Children.toArray(lo)):l.createElement(l.Fragment,null,lo)}B.displayName="FormattedMessage";var z=l.memo(B,k);z.displayName="MemoizedFormattedMessage";var Z=z,W=c(89758),Y=c(97477),te=c(1743),le=c(35753),be=c(58935),de=c(60481);function pe(){return pe=Object.assign?Object.assign.bind():function(qe){for(var Bt=1;Bt<arguments.length;Bt++){var ge=arguments[Bt];for(var je in ge)Object.prototype.hasOwnProperty.call(ge,je)&&(qe[je]=ge[je])}return qe},pe.apply(this,arguments)}var Oe=function(Bt){return l.createElement(de.ErrorBoundary,{fallbackRender:function(je){var wt=je.error;return l.createElement(le.Z,{type:"error"},l.createElement("p",null,l.createElement("strong",null,wt.message||"This demo has been crashed.")),wt.stack&&l.createElement("p",null,l.createElement("details",{open:!0},l.createElement("summary",null,"Error stack"),l.createElement("pre",null,wt.stack))))}},Bt.children)},xe=function(Bt){var ge=(0,Y.W)(),je=ge.demos,wt=(0,w.Ov)(),nr=wt.basename,en=je[Bt.demo.id],Dn=en.component,Ai=en.asset;return Bt.demo.inline?l.createElement(Oe,null,(0,l.createElement)(Dn)):l.createElement(be.Z,pe({asset:Ai,demoUrl:Bt.previewerProps.demoUrl||"".concat(nr).concat(te.SP_ROUTE_PREFIX,"demos/").concat(Bt.demo.id)},Bt.previewerProps),Bt.previewerProps.iframe?null:l.createElement(Oe,null,(0,l.createElement)(Dn)))};function Ve(){return Ve=Object.assign?Object.assign.bind():function(qe){for(var Bt=1;Bt<arguments.length;Bt++){var ge=arguments[Bt];for(var je in ge)Object.prototype.hasOwnProperty.call(ge,je)&&(qe[je]=ge[je])}return qe},Ve.apply(this,arguments)}function K(qe,Bt){return Ke(qe)||Xe(qe,Bt)||we(qe,Bt)||ke()}function ke(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function we(qe,Bt){if(!!qe){if(typeof qe=="string")return Me(qe,Bt);var ge=Object.prototype.toString.call(qe).slice(8,-1);if(ge==="Object"&&qe.constructor&&(ge=qe.constructor.name),ge==="Map"||ge==="Set")return Array.from(qe);if(ge==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(ge))return Me(qe,Bt)}}function Me(qe,Bt){(Bt==null||Bt>qe.length)&&(Bt=qe.length);for(var ge=0,je=new Array(Bt);ge<Bt;ge++)je[ge]=qe[ge];return je}function Xe(qe,Bt){var ge=qe==null?null:typeof Symbol!="undefined"&&qe[Symbol.iterator]||qe["@@iterator"];if(ge!=null){var je=[],wt=!0,nr=!1,en,Dn;try{for(ge=ge.call(qe);!(wt=(en=ge.next()).done)&&(je.push(en.value),!(Bt&&je.length===Bt));wt=!0);}catch(Ai){nr=!0,Dn=Ai}finally{try{!wt&&ge.return!=null&&ge.return()}finally{if(nr)throw Dn}}return je}}function Ke(qe){if(Array.isArray(qe))return qe}var At=function(Bt){var ge=useRouteMeta(),je=ge.frontmatter,wt=useCallback(function(na,Aa){var Ta,Wa=[];if((Ta=na.demo)!==null&&Ta!==void 0&&Ta.cols&&na.demo.cols>1&&(typeof window=="undefined"||window.innerWidth>1024)){for(var Co=0;Co<Aa.length;Co+=na.demo.cols)Aa.slice(Co,Co+na.demo.cols).forEach(function(lo,Vo){var gs;(gs=Wa[Vo])!==null&&gs!==void 0||(Wa[Vo]=[]),Wa[Vo].push(lo)});return Wa}else Wa.push(Aa);return Wa},[]),nr=useState(function(){return wt(je,Bt.items)}),en=K(nr,2),Dn=en[0],Ai=en[1];return useEffect(function(){var na=function(){return Ai(wt(je,Bt.items))};return window.addEventListener("resize",na),function(){return window.removeEventListener("resize",na)}},[]),React.createElement("div",{style:{display:"flex",margin:-8},"data-dumi-demo-grid":!0},Dn.map(function(na,Aa){return React.createElement("section",{style:{flex:1,padding:8,width:0},key:String(Aa)},na.map(function(Ta){return React.createElement(DumiDemo,Ve({key:Ta.demo.id},Ta))}))}))},mt=function(Bt){var ge=Bt.tabs,je=Bt.tabKey,wt=Bt.onChange,nr=D();return Boolean(ge==null?void 0:ge.length)?l.createElement("ul",{className:"dumi-default-content-tabs"},l.createElement("li",{onClick:function(){return wt()},"data-active":!je||void 0},l.createElement("button",{type:"button"},nr.formatMessage({id:"content.tabs.default"}))),ge.map(function(en){return l.createElement("li",{key:en.key,onClick:function(){return wt(en)},"data-active":je===en.key||void 0},l.createElement("button",{type:"button"},en.meta.frontmatter.title))})):null},ie=mt;function oe(qe,Bt){return st(qe)||Ne(qe,Bt)||ye(qe,Bt)||he()}function he(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ye(qe,Bt){if(!!qe){if(typeof qe=="string")return se(qe,Bt);var ge=Object.prototype.toString.call(qe).slice(8,-1);if(ge==="Object"&&qe.constructor&&(ge=qe.constructor.name),ge==="Map"||ge==="Set")return Array.from(qe);if(ge==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(ge))return se(qe,Bt)}}function se(qe,Bt){(Bt==null||Bt>qe.length)&&(Bt=qe.length);for(var ge=0,je=new Array(Bt);ge<Bt;ge++)je[ge]=qe[ge];return je}function Ne(qe,Bt){var ge=qe==null?null:typeof Symbol!="undefined"&&qe[Symbol.iterator]||qe["@@iterator"];if(ge!=null){var je=[],wt=!0,nr=!1,en,Dn;try{for(ge=ge.call(qe);!(wt=(en=ge.next()).done)&&(je.push(en.value),!(Bt&&je.length===Bt));wt=!0);}catch(Ai){nr=!0,Dn=Ai}finally{try{!wt&&ge.return!=null&&ge.return()}finally{if(nr)throw Dn}}return je}}function st(qe){if(Array.isArray(qe))return qe}var Fe="tab",tt=function(){var Bt=(0,w.TH)(),ge=Bt.pathname,je=(0,w.lr)(),wt=oe(je,1),nr=wt[0],en=(0,l.useCallback)(function(Dn){Dn?nr.set(Fe,Dn):nr.delete(Fe),w.m8.push({pathname:ge,search:nr.toString()})},[nr]);return[nr.get(Fe),en]},Wt=function(){var Bt,ge=useRouteMeta(),je=ge.tabs,wt=tt(),nr=oe(wt,1),en=nr[0];return je==null||(Bt=je.find(function(Dn){var Ai=Dn.key;return en===Ai}))===null||Bt===void 0?void 0:Bt.meta};function Pr(qe,Bt){return sn(qe)||Cr(qe,Bt)||xr(qe,Bt)||Qt()}function Qt(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function xr(qe,Bt){if(!!qe){if(typeof qe=="string")return $r(qe,Bt);var ge=Object.prototype.toString.call(qe).slice(8,-1);if(ge==="Object"&&qe.constructor&&(ge=qe.constructor.name),ge==="Map"||ge==="Set")return Array.from(qe);if(ge==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(ge))return $r(qe,Bt)}}function $r(qe,Bt){(Bt==null||Bt>qe.length)&&(Bt=qe.length);for(var ge=0,je=new Array(Bt);ge<Bt;ge++)je[ge]=qe[ge];return je}function Cr(qe,Bt){var ge=qe==null?null:typeof Symbol!="undefined"&&qe[Symbol.iterator]||qe["@@iterator"];if(ge!=null){var je=[],wt=!0,nr=!1,en,Dn;try{for(ge=ge.call(qe);!(wt=(en=ge.next()).done)&&(je.push(en.value),!(Bt&&je.length===Bt));wt=!0);}catch(Ai){nr=!0,Dn=Ai}finally{try{!wt&&ge.return!=null&&ge.return()}finally{if(nr)throw Dn}}return je}}function sn(qe){if(Array.isArray(qe))return qe}var ot=function(Bt){var ge=Ur(),je=ge.tabs,wt=tt(),nr=Pr(wt,2),en=nr[0],Dn=nr[1],Ai=(0,l.useState)(function(){return je==null?void 0:je.find(function(lo){var Vo=lo.key;return Vo===en})}),na=Pr(Ai,2),Aa=na[0],Ta=na[1],Wa=(0,Y.W)(),Co=Wa.setLoading;return(0,l.useEffect)(function(){Co(!1)},[]),l.createElement(l.Fragment,null,l.createElement(ie,{tabs:je,tabKey:en,onChange:function(Vo){Ta(Vo),Dn(Vo==null?void 0:Vo.key)}}),Aa?l.createElement(Aa.components.default):Bt.children)},_r=c(71401),cr=c(74810);function Vr(qe,Bt){return Fr(qe)||Yr(qe,Bt)||mn(qe,Bt)||Qn()}function Qn(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function mn(qe,Bt){if(!!qe){if(typeof qe=="string")return _n(qe,Bt);var ge=Object.prototype.toString.call(qe).slice(8,-1);if(ge==="Object"&&qe.constructor&&(ge=qe.constructor.name),ge==="Map"||ge==="Set")return Array.from(qe);if(ge==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(ge))return _n(qe,Bt)}}function _n(qe,Bt){(Bt==null||Bt>qe.length)&&(Bt=qe.length);for(var ge=0,je=new Array(Bt);ge<Bt;ge++)je[ge]=qe[ge];return je}function Yr(qe,Bt){var ge=qe==null?null:typeof Symbol!="undefined"&&qe[Symbol.iterator]||qe["@@iterator"];if(ge!=null){var je=[],wt=!0,nr=!1,en,Dn;try{for(ge=ge.call(qe);!(wt=(en=ge.next()).done)&&(je.push(en.value),!(Bt&&je.length===Bt));wt=!0);}catch(Ai){nr=!0,Dn=Ai}finally{try{!wt&&ge.return!=null&&ge.return()}finally{if(nr)throw Dn}}return je}}function Fr(qe){if(Array.isArray(qe))return qe}var kr="https://codesandbox.io/api/v1/sandboxes/define";function ft(qe){var Bt,ge,je,wt,nr,en=Boolean((Bt=qe.asset.dependencies)===null||Bt===void 0?void 0:Bt["index.tsx"]),Dn=en?".tsx":".jsx",Ai={},na={},Aa="index".concat(Dn);return Object.entries(qe.asset.dependencies).forEach(function(Ta){var Wa=Vr(Ta,2),Co=Wa[0],lo=Wa[1],Vo=lo.type,gs=lo.value;Vo==="NPM"?na[Co]=gs:Ai[Co===Aa?"App".concat(Dn):Co]={content:gs,isBinary:!1}}),(je=na[ge="react"])!==null&&je!==void 0||(na[ge]="latest"),(nr=na[wt="react-dom"])!==null&&nr!==void 0||(na[wt]=na.react),Ai["sandbox.config.json"]={content:JSON.stringify({template:en?"create-react-app-typescript":"create-react-app"},null,2),isBinary:!1},Ai["package.json"]={content:JSON.stringify({name:qe.title,description:qe.description||"An auto-generated demo by dumi",main:Aa,dependencies:na,devDependencies:en?{typescript:"^4"}:{}},null,2),isBinary:!1},Ai["index.html"]={content:'<div style="margin: 16px;" id="root"></div>',isBinary:!1},Ai[Aa]={content:(0,cr.AM)(na.react),isBinary:!1},(0,_r.Z)({files:Ai})}var me=function(Bt,ge){var je,wt=document.createElement("form"),nr=document.createElement("input"),en=ft(Bt);wt.method="POST",wt.target="_blank",wt.style.display="none",wt.action=(ge==null?void 0:ge.api)||kr,wt.appendChild(nr),wt.setAttribute("data-demo",((je=Bt.assets)===null||je===void 0?void 0:je.id)||""),nr.name="parameters",nr.value=en,document.body.appendChild(wt),wt.submit(),wt.remove()},ne=["angular-cli","create-react-app","html","javascript","node","polymer","typescript","vue"],fe={clickToLoad:function(qe){return De("ctl",qe)},devToolsHeight:function(qe){return dt("devtoolsheight",qe)},forceEmbedLayout:function(qe){return De("embed",qe)},hideDevTools:function(qe){return De("hidedevtools",qe)},hideExplorer:function(qe){return De("hideExplorer",qe)},hideNavigation:function(qe){return De("hideNavigation",qe)},showSidebar:function(qe){return function(Bt,ge){return typeof ge=="boolean"?"showSidebar="+(ge?"1":"0"):""}(0,qe)},openFile:function(qe){return function(Bt,ge){return(Array.isArray(ge)?ge:[ge]).filter(function(je){return typeof je=="string"&&je.trim()!==""}).map(function(je){return"file="+encodeURIComponent(je.trim())})}(0,qe).join("&")},terminalHeight:function(qe){return dt("terminalHeight",qe)},theme:function(qe){return Jt("theme",["light","dark"],qe)},view:function(qe){return Jt("view",["preview","editor"],qe)}};function Q(qe){qe===void 0&&(qe={});var Bt=Object.entries(qe).map(function(ge){var je=ge[0],wt=ge[1];return wt!=null&&fe.hasOwnProperty(je)?fe[je](wt):""}).filter(Boolean);return Bt.length?"?"+Bt.join("&"):""}function De(qe,Bt){return Bt===!0?qe+"=1":""}function dt(qe,Bt){return typeof Bt=="number"&&Bt>=0&&Bt<=100?qe+"="+Math.round(Bt):""}function Jt(qe,Bt,ge){return typeof ge=="string"&&Bt.includes(ge)?qe+"="+ge:""}function it(){return Math.random().toString(36).slice(2,6)+Math.random().toString(36).slice(2,6)}function lt(qe,Bt){return""+pr(Bt)+qe+Q(Bt)}function qt(qe,Bt){var ge={forceEmbedLayout:!0};return Bt&&typeof Bt=="object"&&Object.assign(ge,Bt),""+pr(ge)+qe+Q(ge)}function pr(qe){return qe===void 0&&(qe={}),typeof qe.origin=="string"?qe.origin:"https://stackblitz.com"}function Hr(qe,Bt,ge){if(!Bt||!qe||!qe.parentNode)throw new Error("Invalid Element");qe.id&&(Bt.id=qe.id),qe.className&&(Bt.className=qe.className),function(je,wt){wt&&typeof wt=="object"&&(Object.hasOwnProperty.call(wt,"height")&&(je.height=""+wt.height),Object.hasOwnProperty.call(wt,"width")&&(je.width=""+wt.width)),je.height||(je.height="300"),je.width||je.setAttribute("style","width:100%;")}(Bt,ge),qe.parentNode.replaceChild(Bt,qe)}function Xr(qe){if(typeof qe=="string"){var Bt=document.getElementById(qe);if(!Bt)throw new Error("Could not find element with id '"+qe+"'");return Bt}if(qe instanceof HTMLElement)return qe;throw new Error("Invalid element: "+qe)}function ce(qe){return qe&&qe.newWindow===!1?"_self":"_blank"}function xt(){return xt=Object.assign||function(qe){for(var Bt=1;Bt<arguments.length;Bt++){var ge=arguments[Bt];for(var je in ge)Object.prototype.hasOwnProperty.call(ge,je)&&(qe[je]=ge[je])}return qe},xt.apply(this,arguments)}var Gt=function(){function qe(ge){this.port=void 0,this.pending={},this.port=ge,this.port.onmessage=this.messageListener.bind(this)}var Bt=qe.prototype;return Bt.request=function(ge){var je=this,wt=ge.type,nr=ge.payload,en=it();return new Promise(function(Dn,Ai){je.pending[en]={resolve:Dn,reject:Ai},je.port.postMessage({type:wt,payload:xt({},nr,{__reqid:en})})})},Bt.messageListener=function(ge){var je;if(typeof((je=ge.data.payload)==null?void 0:je.__reqid)=="string"){var wt=ge.data,nr=wt.type,en=wt.payload,Dn=en.__reqid,Ai=en.__error;this.pending[Dn]&&(en.__success?this.pending[Dn].resolve(function(na){var Aa=xt({},na);return delete Aa.__reqid,delete Aa.__success,delete Aa.__error,Object.keys(Aa).length?Aa:null}(en)):this.pending[Dn].reject(Ai?nr+": "+Ai:nr),delete this.pending[Dn])}},qe}(),Ir=function(){function qe(ge,je){var wt=this;this._rdc=void 0,this.editor={openFile:function(nr){return wt._rdc.request({type:"SDK_OPEN_FILE",payload:{path:nr}})},setCurrentFile:function(nr){return wt._rdc.request({type:"SDK_SET_CURRENT_FILE",payload:{path:nr}})},setTheme:function(nr){return wt._rdc.request({type:"SDK_SET_UI_THEME",payload:{theme:nr}})},setView:function(nr){return wt._rdc.request({type:"SDK_SET_UI_VIEW",payload:{view:nr}})},showSidebar:function(nr){return nr===void 0&&(nr=!0),wt._rdc.request({type:"SDK_TOGGLE_SIDEBAR",payload:{visible:nr}})}},this.preview={origin:"",getUrl:function(){return wt._rdc.request({type:"SDK_GET_PREVIEW_URL",payload:{}}).then(function(nr){var en;return(en=nr==null?void 0:nr.url)!=null?en:null})},setUrl:function(nr){if(nr===void 0&&(nr="/"),typeof nr!="string"||!nr.startsWith("/"))throw new Error("Invalid argument: expected a path starting with '/', got '"+nr+"'");return wt._rdc.request({type:"SDK_SET_PREVIEW_URL",payload:{path:nr}})}},this._rdc=new Gt(ge),Object.defineProperty(this.preview,"origin",{value:typeof je.previewOrigin=="string"?je.previewOrigin:null,writable:!1})}var Bt=qe.prototype;return Bt.applyFsDiff=function(ge){var je=function(wt){return wt!==null&&typeof wt=="object"};if(!je(ge)||!je(ge.create))throw new Error("Invalid diff object: expected diff.create to be an object.");if(!Array.isArray(ge.destroy))throw new Error("Invalid diff object: expected diff.create to be an array.");return this._rdc.request({type:"SDK_APPLY_FS_DIFF",payload:ge})},Bt.getDependencies=function(){return this._rdc.request({type:"SDK_GET_DEPS_SNAPSHOT",payload:{}})},Bt.getFsSnapshot=function(){return this._rdc.request({type:"SDK_GET_FS_SNAPSHOT",payload:{}})},qe}(),nn=[],zi=function(qe){var Bt=this;this.element=void 0,this.id=void 0,this.pending=void 0,this.vm=void 0,this.id=it(),this.element=qe,this.pending=new Promise(function(ge,je){var wt=function(na){var Aa=na.data;(Aa==null?void 0:Aa.action)==="SDK_INIT_SUCCESS"&&Aa.id===Bt.id&&(Bt.vm=new Ir(na.ports[0],Aa.payload),ge(Bt.vm),en())},nr=function(){var na;(na=Bt.element.contentWindow)==null||na.postMessage({action:"SDK_INIT",id:Bt.id},"*")};function en(){window.clearInterval(Ai),window.removeEventListener("message",wt)}window.addEventListener("message",wt),nr();var Dn=0,Ai=window.setInterval(function(){if(Bt.vm)en();else{if(Dn>=20)return en(),je("Timeout: Unable to establish a connection with the StackBlitz VM"),void nn.forEach(function(na,Aa){na.id===Bt.id&&nn.splice(Aa,1)});Dn++,nr()}},500)}),nn.push(this)};function Ui(qe,Bt){var ge=document.createElement("input");return ge.type="hidden",ge.name=qe,ge.value=Bt,ge}function Pi(qe){if(!ne.includes(qe.template)){var Bt=ne.map(function(wt){return"'"+wt+"'"}).join(", ");console.warn("Unsupported project.template: must be one of "+Bt)}var ge=qe.template==="node",je=document.createElement("form");return je.method="POST",je.setAttribute("style","display:none!important;"),je.appendChild(Ui("project[title]",qe.title)),je.appendChild(Ui("project[description]",qe.description)),je.appendChild(Ui("project[template]",qe.template)),qe.dependencies&&(ge?console.warn("Invalid project.dependencies: dependencies must be provided as a 'package.json' file when using the 'node' template."):je.appendChild(Ui("project[dependencies]",JSON.stringify(qe.dependencies)))),qe.settings&&je.appendChild(Ui("project[settings]",JSON.stringify(qe.settings))),Object.keys(qe.files).forEach(function(wt){typeof qe.files[wt]=="string"&&je.appendChild(Ui("project[files]["+wt+"]",qe.files[wt]))}),je}function ka(qe){var Bt,ge,je,wt;return qe!=null&&qe.contentWindow?(wt=(ge=qe)instanceof Element?"element":"id",(Bt=(je=nn.find(function(nr){return nr[wt]===ge}))!=null?je:null)!=null?Bt:new zi(qe)).pending:Promise.reject("Provided element is not an iframe.")}var Ti={connect:ka,embedGithubProject:function(qe,Bt,ge){var je=Xr(qe),wt=document.createElement("iframe");return wt.src=qt("/github/"+Bt,ge),Hr(je,wt,ge),ka(wt)},embedProject:function(qe,Bt,ge){var je,wt=Xr(qe),nr=function(Dn,Ai){var na=Pi(Dn);return na.action=qt("/run",Ai),na.id="sb","<html><head><title></title></head><body>"+na.outerHTML+"<script>document.getElementById('"+na.id+"').submit();<\/script></body></html>"}(Bt,ge),en=document.createElement("iframe");return Hr(wt,en,ge),(je=en.contentDocument)==null||je.write(nr),ka(en)},embedProjectId:function(qe,Bt,ge){var je=Xr(qe),wt=document.createElement("iframe");return wt.src=qt("/edit/"+Bt,ge),Hr(je,wt,ge),ka(wt)},openGithubProject:function(qe,Bt){var ge=lt("/github/"+qe,Bt),je=ce(Bt);window.open(ge,je)},openProject:function(qe,Bt){(function(ge,je){var wt=Pi(ge);wt.action=lt("/run",je),wt.target=ce(je),document.body.appendChild(wt),wt.submit(),document.body.removeChild(wt)})(qe,Bt)},openProjectId:function(qe,Bt){var ge=lt("/edit/"+qe,Bt),je=ce(Bt);window.open(ge,je)}};function Ge(qe,Bt){return Zt(qe)||Et(qe,Bt)||gt(qe,Bt)||et()}function et(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function gt(qe,Bt){if(!!qe){if(typeof qe=="string")return ht(qe,Bt);var ge=Object.prototype.toString.call(qe).slice(8,-1);if(ge==="Object"&&qe.constructor&&(ge=qe.constructor.name),ge==="Map"||ge==="Set")return Array.from(qe);if(ge==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(ge))return ht(qe,Bt)}}function ht(qe,Bt){(Bt==null||Bt>qe.length)&&(Bt=qe.length);for(var ge=0,je=new Array(Bt);ge<Bt;ge++)je[ge]=qe[ge];return je}function Et(qe,Bt){var ge=qe==null?null:typeof Symbol!="undefined"&&qe[Symbol.iterator]||qe["@@iterator"];if(ge!=null){var je=[],wt=!0,nr=!1,en,Dn;try{for(ge=ge.call(qe);!(wt=(en=ge.next()).done)&&(je.push(en.value),!(Bt&&je.length===Bt));wt=!0);}catch(Ai){nr=!0,Dn=Ai}finally{try{!wt&&ge.return!=null&&ge.return()}finally{if(nr)throw Dn}}return je}}function Zt(qe){if(Array.isArray(qe))return qe}var sr=function(Bt){var ge,je,wt,nr,en,Dn=Boolean((ge=Bt.asset.dependencies)===null||ge===void 0?void 0:ge["index.tsx"]),Ai=Dn?".tsx":".jsx",na={},Aa="index".concat(Ai),Ta={"index.html":'<div style="margin: 16px;" id="root"></div>'},Wa={title:Bt.title||"",description:Bt.description||"An auto-generated demo by dumi",template:"create-react-app",files:{}};Object.entries(Bt.asset.dependencies).forEach(function(Co){var lo=Ge(Co,2),Vo=lo[0],gs=lo[1],su=gs.type,Zu=gs.value;su==="NPM"?na[Vo]=Zu:Ta[Vo===Aa?"App".concat(Ai):Vo]=Zu}),(wt=na[je="react"])!==null&&wt!==void 0||(na[je]="latest"),(en=na[nr="react-dom"])!==null&&en!==void 0||(na[nr]=na.react),Ta["package.json"]=JSON.stringify({name:Bt.title,description:Bt.description||"An auto-generated demo by dumi",dependencies:na,devDependencies:Dn?{typescript:"^4"}:{}},null,2),Ta[Aa]=(0,cr.AM)(na.react),Wa.files=Ta,Ti.openProject(Wa)},bt=function(){var Bt=useSiteData(),ge=Bt.components;return{components:ge}},Ft=c(20975);function zr(qe,Bt){return ta(qe)||ni(qe,Bt)||yn(qe,Bt)||Jn()}function Jn(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function yn(qe,Bt){if(!!qe){if(typeof qe=="string")return tn(qe,Bt);var ge=Object.prototype.toString.call(qe).slice(8,-1);if(ge==="Object"&&qe.constructor&&(ge=qe.constructor.name),ge==="Map"||ge==="Set")return Array.from(qe);if(ge==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(ge))return tn(qe,Bt)}}function tn(qe,Bt){(Bt==null||Bt>qe.length)&&(Bt=qe.length);for(var ge=0,je=new Array(Bt);ge<Bt;ge++)je[ge]=qe[ge];return je}function ni(qe,Bt){var ge=qe==null?null:typeof Symbol!="undefined"&&qe[Symbol.iterator]||qe["@@iterator"];if(ge!=null){var je=[],wt=!0,nr=!1,en,Dn;try{for(ge=ge.call(qe);!(wt=(en=ge.next()).done)&&(je.push(en.value),!(Bt&&je.length===Bt));wt=!0);}catch(Ai){nr=!0,Dn=Ai}finally{try{!wt&&ge.return!=null&&ge.return()}finally{if(nr)throw Dn}}return je}}function ta(qe){if(Array.isArray(qe))return qe}var fa=function(){var Bt=(0,cr.RX)(),ge=(0,Y.W)(),je=ge.themeConfig,wt=bo(),nr=(0,cr.M7)(),en=(0,l.useState)(function(){if(je.nav)return je.nav;var na=Object.entries(wt).map(function(Aa){var Ta=zr(Aa,2),Wa=Ta[0],Co=Ta[1],lo=Object.values(Bt).reduce(function(Vo,gs){return gs.path.startsWith(Wa.slice(1))&&(0,cr.qu)(Vo,"nav",gs.meta.frontmatter),Vo},{});return{title:lo.title||Co[0].title||Co[0].children[0].title,order:lo.order||0,link:Co[0].children[0].link,activePath:Wa}});return na.sort(nr)}),Dn=zr(en,1),Ai=Dn[0];return Ai};function Mr(qe,Bt){return ua(qe)||xo(qe,Bt)||Zi(qe,Bt)||Wr()}function Wr(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Zi(qe,Bt){if(!!qe){if(typeof qe=="string")return Wi(qe,Bt);var ge=Object.prototype.toString.call(qe).slice(8,-1);if(ge==="Object"&&qe.constructor&&(ge=qe.constructor.name),ge==="Map"||ge==="Set")return Array.from(qe);if(ge==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(ge))return Wi(qe,Bt)}}function Wi(qe,Bt){(Bt==null||Bt>qe.length)&&(Bt=qe.length);for(var ge=0,je=new Array(Bt);ge<Bt;ge++)je[ge]=qe[ge];return je}function xo(qe,Bt){var ge=qe==null?null:typeof Symbol!="undefined"&&qe[Symbol.iterator]||qe["@@iterator"];if(ge!=null){var je=[],wt=!0,nr=!1,en,Dn;try{for(ge=ge.call(qe);!(wt=(en=ge.next()).done)&&(je.push(en.value),!(Bt&&je.length===Bt));wt=!0);}catch(Ai){nr=!0,Dn=Ai}finally{try{!wt&&ge.return!=null&&ge.return()}finally{if(nr)throw Dn}}return je}}function ua(qe){if(Array.isArray(qe))return qe}var Ur=function(){var Bt=(0,w.Qt)(),ge=Bt.route,je=(0,w.TH)(),wt=je.pathname,nr=(0,w.Ov)(),en=nr.clientRoutes,Dn=(0,l.useCallback)(function(){var Wa;if(ge.path===wt&&!("isLayout"in ge))Wa=ge.meta;else{var Co,lo,Vo=(Co=(0,w.fp)(en,wt))===null||Co===void 0?void 0:Co.pop();Wa=Vo==null||(lo=Vo.route)===null||lo===void 0?void 0:lo.meta}return Wa||{frontmatter:{},toc:[],texts:[]}},[en.length,wt]),Ai=(0,l.useState)(Dn),na=Mr(Ai,2),Aa=na[0],Ta=na[1];return(0,cr.LI)(function(){Ta(Dn)},[en.length,wt]),Aa};function Jr(qe,Bt){var ge=Object.keys(qe);if(Object.getOwnPropertySymbols){var je=Object.getOwnPropertySymbols(qe);Bt&&(je=je.filter(function(wt){return Object.getOwnPropertyDescriptor(qe,wt).enumerable})),ge.push.apply(ge,je)}return ge}function Eo(qe){for(var Bt=1;Bt<arguments.length;Bt++){var ge=arguments[Bt]!=null?arguments[Bt]:{};Bt%2?Jr(Object(ge),!0).forEach(function(je){Fo(qe,je,ge[je])}):Object.getOwnPropertyDescriptors?Object.defineProperties(qe,Object.getOwnPropertyDescriptors(ge)):Jr(Object(ge)).forEach(function(je){Object.defineProperty(qe,je,Object.getOwnPropertyDescriptor(ge,je))})}return qe}function Fo(qe,Bt,ge){return Bt in qe?Object.defineProperty(qe,Bt,{value:ge,enumerable:!0,configurable:!0,writable:!0}):qe[Bt]=ge,qe}function So(qe,Bt){var ge=typeof Symbol!="undefined"&&qe[Symbol.iterator]||qe["@@iterator"];if(!ge){if(Array.isArray(qe)||(ge=ps(qe))||Bt&&qe&&typeof qe.length=="number"){ge&&(qe=ge);var je=0,wt=function(){};return{s:wt,n:function(){return je>=qe.length?{done:!0}:{done:!1,value:qe[je++]}},e:function(na){throw na},f:wt}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var nr=!0,en=!1,Dn;return{s:function(){ge=ge.call(qe)},n:function(){var na=ge.next();return nr=na.done,na},e:function(na){en=!0,Dn=na},f:function(){try{!nr&&ge.return!=null&&ge.return()}finally{if(en)throw Dn}}}}function Xa(qe){return ui(qe)||No(qe)||ps(qe)||Ko()}function Ko(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function No(qe){if(typeof Symbol!="undefined"&&qe[Symbol.iterator]!=null||qe["@@iterator"]!=null)return Array.from(qe)}function ui(qe){if(Array.isArray(qe))return er(qe)}function jn(qe,Bt){return Es(qe)||$s(qe,Bt)||ps(qe,Bt)||rr()}function rr(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ps(qe,Bt){if(!!qe){if(typeof qe=="string")return er(qe,Bt);var ge=Object.prototype.toString.call(qe).slice(8,-1);if(ge==="Object"&&qe.constructor&&(ge=qe.constructor.name),ge==="Map"||ge==="Set")return Array.from(qe);if(ge==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(ge))return er(qe,Bt)}}function er(qe,Bt){(Bt==null||Bt>qe.length)&&(Bt=qe.length);for(var ge=0,je=new Array(Bt);ge<Bt;ge++)je[ge]=qe[ge];return je}function $s(qe,Bt){var ge=qe==null?null:typeof Symbol!="undefined"&&qe[Symbol.iterator]||qe["@@iterator"];if(ge!=null){var je=[],wt=!0,nr=!1,en,Dn;try{for(ge=ge.call(qe);!(wt=(en=ge.next()).done)&&(je.push(en.value),!(Bt&&je.length===Bt));wt=!0);}catch(Ai){nr=!0,Dn=Ai}finally{try{!wt&&ge.return!=null&&ge.return()}finally{if(nr)throw Dn}}return je}}function Es(qe){if(Array.isArray(qe))return qe}var Os="$default-group-title",xu=function(Bt,ge){return"base"in ge?Bt.replace(ge.base.slice(1),"").replace(/^\//,""):Bt},bo=function(){var Bt=(0,Ft.b)(),ge=(0,cr.RX)(),je=(0,Y.W)(),wt=je.themeConfig,nr=(0,cr.M7)(),en=(0,l.useState)(function(){var na=Object.values(ge).reduce(function(Ta,Wa){var Co=xu(Wa.path,Bt);if(Co&&Wa.meta){var lo,Vo,gs,su="/".concat(Wa.path.replace(/\/[^/]+$/,"")),Zu=(0,cr.qu)({order:0},"group",Wa.meta.frontmatter),Ss=Zu.title,Us=Zu.order,ys=Ss||Os;(lo=Ta[su])!==null&&lo!==void 0||(Ta[su]={}),Ta[su][ys]={title:Ss,order:((Vo=Ta[su][ys])===null||Vo===void 0?void 0:Vo.order)||Us,children:[].concat(Xa(((gs=Ta[su][ys])===null||gs===void 0?void 0:gs.children)||[]),[{title:Wa.meta.frontmatter.title,link:"/".concat(Wa.path),order:Wa.meta.frontmatter.order||0,frontmatter:Wa.meta.frontmatter}])}}return Ta},{}),Aa=Object.entries(na).reduce(function(Ta,Wa){var Co=jn(Wa,2),lo=Co[0],Vo=Co[1];return Ta[lo]=Object.values(Vo).sort(nr),Ta[lo].forEach(function(gs){return gs.children.sort(nr)}),Ta},{});return Object.assign(Aa,wt.sidebar)}),Dn=jn(en,1),Ai=Dn[0];return Ai};function ic(qe){var Bt={order:0,title:""},ge=So(qe),je;try{for(ge.s();!(je=ge.n()).done;){var wt=je.value,nr=So(wt.children),en;try{for(nr.s();!(en=nr.n()).done;){var Dn=en.value;"frontmatter"in Dn&&pickRouteSortMeta(Bt,"nav",Dn.frontmatter)}}catch(Ai){nr.e(Ai)}finally{nr.f()}}}catch(Ai){ge.e(Ai)}finally{ge.f()}return Bt}var Ru=function(){var Bt=bo(),ge=useRouteDataComparer(),je=useState(function(){var en=Object.entries(Bt).sort(function(Dn,Ai){return Ai[0].split("/").length-Dn[0].split("/").length}).reduce(function(Dn,Ai){var na=jn(Ai,2),Aa=na[0],Ta=na[1],Wa=Aa.replace(/\/[^/]+$/,"");if(Wa){var Co;if((Co=Dn[Wa])!==null&&Co!==void 0||(Dn[Wa]=Eo({path:Wa,children:Bt[Wa]||[]},ic(Bt[Wa]||[]))),Dn[Aa])Dn[Aa].children.sort(ge),Dn[Wa].children.push(Dn[Aa]),delete Dn[Aa];else{var lo;(lo=Dn[Wa].children).push.apply(lo,Xa(Ta))}}else Ta.sort(ge),Dn[Aa]=Eo({path:Aa,children:Ta},ic(Ta));return Dn},{});return Object.values(en)}),wt=jn(je,1),nr=wt[0];return nr},Xs=function(){var Bt=(0,Ft.b)(),ge=bo(),je=(0,w.TH)(),wt=je.pathname,nr=xu(wt.slice(1),Bt),en=nr?wt.replace(/(\/[^/]+)(\/[^/]+\/?)$/,"$1"):wt;return en?ge[en]:[]},Ys='"use strict";(()=>{var P=Object.create;var k=Object.defineProperty;var z=Object.getOwnPropertyDescriptor;var D=Object.getOwnPropertyNames,R=Object.getOwnPropertySymbols,B=Object.getPrototypeOf,E=Object.prototype.hasOwnProperty,L=Object.prototype.propertyIsEnumerable;var O=(i,e,n)=>e in i?k(i,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):i[e]=n,I=(i,e)=>{for(var n in e||(e={}))E.call(e,n)&&O(i,n,e[n]);if(R)for(var n of R(e))L.call(e,n)&&O(i,n,e[n]);return i};var N=(i,e)=>()=>(e||i((e={exports:{}}).exports,e),e.exports);var F=(i,e,n,u)=>{if(e&&typeof e=="object"||typeof e=="function")for(let r of D(e))!E.call(i,r)&&r!==n&&k(i,r,{get:()=>e[r],enumerable:!(u=z(e,r))||u.enumerable});return i};var W=(i,e,n)=>(n=i!=null?P(B(i)):{},F(e||!i||!i.__esModule?k(n,"default",{value:i,enumerable:!0}):n,i));var j=N((K,w)=>{w.exports=function(i){var e={};function n(u){if(e[u])return e[u].exports;var r=e[u]={exports:{},id:u,loaded:!1};return i[u].call(r.exports,r,r.exports,n),r.loaded=!0,r.exports}return n.m=i,n.c=e,n.p="",n(0)}([function(i,e,n){i.exports=n(1)},function(i,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var u=n(2);Object.defineProperty(e,"combineChunks",{enumerable:!0,get:function(){return u.combineChunks}}),Object.defineProperty(e,"fillInChunks",{enumerable:!0,get:function(){return u.fillInChunks}}),Object.defineProperty(e,"findAll",{enumerable:!0,get:function(){return u.findAll}}),Object.defineProperty(e,"findChunks",{enumerable:!0,get:function(){return u.findChunks}})},function(i,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=e.findAll=function(t){var g=t.autoEscape,c=t.caseSensitive,f=c===void 0?!1:c,d=t.findChunks,o=d===void 0?r:d,h=t.sanitize,v=t.searchWords,T=t.textToHighlight;return l({chunksToHighlight:u({chunks:o({autoEscape:g,caseSensitive:f,sanitize:h,searchWords:v,textToHighlight:T})}),totalLength:T?T.length:0})},u=e.combineChunks=function(t){var g=t.chunks;return g=g.sort(function(c,f){return c.start-f.start}).reduce(function(c,f){if(c.length===0)return[f];var d=c.pop();if(f.start<=d.end){var o=Math.max(d.end,f.end);c.push({highlight:!1,start:d.start,end:o})}else c.push(d,f);return c},[]),g},r=function(t){var g=t.autoEscape,c=t.caseSensitive,f=t.sanitize,d=f===void 0?p:f,o=t.searchWords,h=t.textToHighlight;return h=d(h),o.filter(function(v){return v}).reduce(function(v,T){T=d(T),g&&(T=a(T));for(var m=new RegExp(T,c?"g":"gi"),y=void 0;y=m.exec(h);){var S=y.index,$=m.lastIndex;$>S&&v.push({highlight:!1,start:S,end:$}),y.index===m.lastIndex&&m.lastIndex++}return v},[])};e.findChunks=r;var l=e.fillInChunks=function(t){var g=t.chunksToHighlight,c=t.totalLength,f=[],d=function(v,T,m){T-v>0&&f.push({start:v,end:T,highlight:m})};if(g.length===0)d(0,c,!1);else{var o=0;g.forEach(function(h){d(o,h.start,!1),d(h.start,h.end,!0),o=h.end}),d(o,c,!1)}return f};function p(s){return s}function a(s){return s.replace(/[\\-\\[\\]\\/\\{\\}\\(\\)\\*\\+\\?\\.\\\\\\^\\$\\|]/g,"\\\\$&")}}])});var C=W(j()),H="tab";function M(i,e,n,u,r){let l=r!==void 0,p=u.reduce((a,s)=>(s.tocIndex===r&&(a[s.paraId]=(a[s.paraId]||"").concat(s.value)),a),[]).filter(Boolean);return Boolean(p.length)||l?{rawTitle:i,title:e,link:n,paragraphs:u.reduce((a,s)=>{var t,g;return s.tocIndex===r&&((g=a[t=s.paraId])!=null||(a[t]=""),a[s.paraId]+=s.value),a},[]).filter(Boolean)}:null}function x(i){return[i.title,i.subtitle].filter(Boolean).join(" ")}function _(i,e,n){let u=[],r=Object.values(e).reduce((l,p)=>{var a,s;return p.asset&&((s=l[a=p.routeId])!=null||(l[a]=[]),l[p.routeId].push(p)),l},{});return Object.values(i).forEach(l=>{var p;if("meta"in l&&!("isLayout"in l)){let a=l.meta,s=l.path.replace(/^([^/])/,"/$1")||"/",t=n.find(o=>s===o.link||s.startsWith(`${o.activePath}/`)),g=(r[l.id]||[]).map(o=>{var h;return(h=o.asset)==null?void 0:h.id}),c=M("",x(a.frontmatter),s,a.texts),f=a.toc.reduce((o,h,v)=>(!g.includes(h.id)&&h.depth>1&&o.push(M(h.title,`${x(a.frontmatter)} - ${h.title}`,`${s}#${h.id}`,a.texts,v)),o),[]),d=(a.tabs||[]).reduce((o,{key:h,meta:v})=>{let T=M("",`${x(a.frontmatter)} - ${v.frontmatter.title}`,`${s}?${H}=${h}`,v.texts);return T&&o.push(T),o.push(...v.toc.map((m,y)=>M(m.title,`${x(a.frontmatter)} - ${v.frontmatter.title} - ${m.title}`,`${s}?${H}=${h}#${m.id}`,v.texts,y))),o},[]);u.push({navTitle:t==null?void 0:t.title,navOrder:t?n.indexOf(t):1/0,title:x(a.frontmatter),link:s,sections:[...c?[c]:[],...f,...d],demos:((p=r[l.id])==null?void 0:p.map(o=>({link:`${s}#${o.asset.id}`,rawTitle:o.asset.title||"",title:o.asset.title||x(a.frontmatter),description:o.asset.description||"",keywords:o.asset.keywords||[]})))||[]})}}),u}function b(i="",e,n=1){let u=(0,C.findAll)({textToHighlight:i,searchWords:e,autoEscape:!0}),r={};return[u.map(({start:l,end:p,highlight:a},s)=>{let t={text:i.slice(l,p)};return s===0&&!a&&u.length>1&&t.text.length>20&&(t.text=`...${t.text.slice(-20)}`),a&&(t.highlighted=!0,r[e.find(g=>t.text.includes(g))]=n),t}),r]}function Y(i,e){let n=e.split(" "),u=new RegExp(e.replace(/[.*+?^${}()|[\\]\\\\]/g,"\\\\$&").replace(" ","|"),"gi"),r={};return i.forEach(l=>{var a,s;let p=[];if(l.sections.forEach(t=>{for(let g of t.paragraphs)if(u.test(g)){let[c,f]=b(t.title,n,10),[d,o]=b(g,n);p.push({type:"content",link:t.link,priority:Object.values(I(I({},o),f)).reduce((h,v)=>h+v,0),highlightTitleTexts:c,highlightTexts:d});return}if(u.test(t.rawTitle)){let[g,c]=b(t.title,n,10);p.push({type:"title",link:t.link,priority:Object.values(c).reduce((f,d)=>f+d,0),highlightTitleTexts:g,highlightTexts:b(t.paragraphs[0]||"",n)[0]})}}),l.demos.forEach(t=>{if(u.test(t.rawTitle)||u.test(t.description)){let[g,c]=b(t.title,n,10),[f,d]=b(t.description,n);p.push({type:"demo",link:t.link,priority:Object.values(I(I({},d),c)).reduce((o,h)=>o+h,0),highlightTitleTexts:g,highlightTexts:f})}}),u.test(l.title)){let[t,g]=b(l.title,n,100);p.push({type:"page",link:l.link,priority:Object.values(g).reduce((c,f)=>c+f,0),highlightTitleTexts:t,highlightTexts:b(((a=l.sections[0])==null?void 0:a.paragraphs[0])||"",n)[0]})}if(p.length){let t=l.navTitle||"$ROOT";(s=r[t])!=null||(r[t]={title:l.navTitle,priority:l.navOrder*1e3,hints:[]}),r[t].hints.push(...p)}}),Object.values(r).forEach(({hints:l})=>{l.sort((p,a)=>a.priority-p.priority)}),Object.values(r).sort((l,p)=>p.priority-l.priority)}var A;self.onmessage=({data:i})=>{switch(i.action){case"generate-metadata":A=_(i.args.routes,i.args.demos,i.args.nav);break;case"get-search-result":self.postMessage(Y(A,i.args.keywords));break;default:}};})();\n';function rs(qe,Bt){var ge=Object.keys(qe);if(Object.getOwnPropertySymbols){var je=Object.getOwnPropertySymbols(qe);Bt&&(je=je.filter(function(wt){return Object.getOwnPropertyDescriptor(qe,wt).enumerable})),ge.push.apply(ge,je)}return ge}function au(qe){for(var Bt=1;Bt<arguments.length;Bt++){var ge=arguments[Bt]!=null?arguments[Bt]:{};Bt%2?rs(Object(ge),!0).forEach(function(je){Tu(qe,je,ge[je])}):Object.getOwnPropertyDescriptors?Object.defineProperties(qe,Object.getOwnPropertyDescriptors(ge)):rs(Object(ge)).forEach(function(je){Object.defineProperty(qe,je,Object.getOwnPropertyDescriptor(ge,je))})}return qe}function Tu(qe,Bt,ge){return Bt in qe?Object.defineProperty(qe,Bt,{value:ge,enumerable:!0,configurable:!0,writable:!0}):qe[Bt]=ge,qe}function Cl(qe,Bt){return Pu(qe)||nu(qe,Bt)||ou(qe,Bt)||hu()}function hu(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ou(qe,Bt){if(!!qe){if(typeof qe=="string")return ss(qe,Bt);var ge=Object.prototype.toString.call(qe).slice(8,-1);if(ge==="Object"&&qe.constructor&&(ge=qe.constructor.name),ge==="Map"||ge==="Set")return Array.from(qe);if(ge==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(ge))return ss(qe,Bt)}}function ss(qe,Bt){(Bt==null||Bt>qe.length)&&(Bt=qe.length);for(var ge=0,je=new Array(Bt);ge<Bt;ge++)je[ge]=qe[ge];return je}function nu(qe,Bt){var ge=qe==null?null:typeof Symbol!="undefined"&&qe[Symbol.iterator]||qe["@@iterator"];if(ge!=null){var je=[],wt=!0,nr=!1,en,Dn;try{for(ge=ge.call(qe);!(wt=(en=ge.next()).done)&&(je.push(en.value),!(Bt&&je.length===Bt));wt=!0);}catch(Ai){nr=!0,Dn=Ai}finally{try{!wt&&ge.return!=null&&ge.return()}finally{if(nr)throw Dn}}return je}}function Pu(qe){if(Array.isArray(qe))return qe}var Ks;typeof window!="undefined"&&(Ks=new Worker(URL.createObjectURL(new Blob([Ys],{type:"application/javascript"}))));var $u=function(){var Bt=(0,l.useRef)(),ge=(0,cr.RX)(),je=(0,Y.W)(),wt=je.demos,nr=(0,l.useState)(!1),en=Cl(nr,2),Dn=en[0],Ai=en[1],na=(0,l.useState)(""),Aa=Cl(na,2),Ta=Aa[0],Wa=Aa[1],Co=fa(),lo=(0,l.useState)([]),Vo=Cl(lo,2),gs=Vo[0],su=Vo[1],Zu=(0,l.useCallback)(function(Ss){Ai(!0),Wa(Ss)},[]);return(0,l.useEffect)(function(){Ks.onmessage=function(Ss){su(Ss.data),Ai(!1)}},[]),(0,l.useEffect)(function(){var Ss=Object.entries(wt).reduce(function(Us,ys){var Oo=Cl(ys,2),qo=Oo[0],Rc=Oo[1],Hl=Rc.asset,sf=Rc.routeId;return au(au({},Us),{},Tu({},qo,{asset:Hl,routeId:sf}))},{});Ks.postMessage({action:"generate-metadata",args:{routes:JSON.parse(JSON.stringify(ge)),nav:Co,demos:Ss}})},[ge,wt,Co]),(0,l.useEffect)(function(){var Ss=Ta.trim();Ss?(clearTimeout(Bt.current),Bt.current=window.setTimeout(function(){Ks.postMessage({action:"get-search-result",args:{keywords:Ss}})},200)):su([])},[Ta]),{keywords:Ta,setKeywords:Zu,result:gs,loading:Dn}}},58626:function(U,F,c){"use strict";c.d(F,{k:function(){return w},s:function(){return v}});var w=[{id:"zh-CN",name:"\u4E2D\u6587",base:"/"}],v={"en-US":{a:"A","header.search.placeholder":"Type keywords...","previewer.actions.code.expand":"Show Code","previewer.actions.code.shrink":"Hide Code","previewer.actions.codesandbox":"Open in CodeSandbox","previewer.actions.codepen":"Open in CodePen (Not implemented)","previewer.actions.stackblitz":"Open in StackBlitz","previewer.actions.separate":"Open in separate page","404.title":"PAGE NOT FOUND","404.back":"Back to homepage","api.component.name":"Name","api.component.description":"Description","api.component.type":"Type","api.component.default":"Default","api.component.required":"(required)","api.component.loading":"Properties definition is resolving, wait a moment...","api.component.not.found":"Properties definition not found for {id} component","content.tabs.default":"Doc","search.not.found":"No content was found","layout.sidebar.btn":"Sidebar"},"zh-CN":{a:"\u563F","header.search.placeholder":"\u8F93\u5165\u5173\u952E\u5B57\u641C\u7D22...","previewer.actions.code.expand":"\u5C55\u5F00\u4EE3\u7801","previewer.actions.code.shrink":"\u6536\u8D77\u4EE3\u7801","previewer.actions.codesandbox":"\u5728 CodeSandbox \u4E2D\u6253\u5F00","previewer.actions.codepen":"\u5728 CodePen \u4E2D\u6253\u5F00\uFF08\u672A\u5B9E\u73B0\uFF09","previewer.actions.stackblitz":"\u5728 StackBlitz \u4E2D\u6253\u5F00","previewer.actions.separate":"\u5728\u72EC\u7ACB\u9875\u9762\u4E2D\u6253\u5F00","404.title":"\u9875\u9762\u672A\u627E\u5230","404.back":"\u8FD4\u56DE\u9996\u9875","api.component.name":"\u5C5E\u6027\u540D","api.component.description":"\u63CF\u8FF0","api.component.type":"\u7C7B\u578B","api.component.default":"\u9ED8\u8BA4\u503C","api.component.required":"(\u5FC5\u9009)","api.component.loading":"\u5C5E\u6027\u5B9A\u4E49\u6B63\u5728\u89E3\u6790\u4E2D\uFF0C\u7A0D\u7B49\u7247\u523B...","api.component.not.found":"\u672A\u627E\u5230 {id} \u7EC4\u4EF6\u7684\u5C5E\u6027\u5B9A\u4E49","content.tabs.default":"\u6587\u6863","search.not.found":"\u672A\u627E\u5230\u76F8\u5173\u5185\u5BB9","layout.sidebar.btn":"\u4FA7\u8FB9\u83DC\u5355"}}},87826:function(U,F,c){"use strict";c.d(F,{wx:function(){return xr},DE:function(){return sn},C3:function(){return Cr},eA:function(){return $r}});var w=c(46686),v=c.n(w),l=c(50959),R={},A={title:"\u524D\u7AEF\u56F0\u5883\u5206\u6790",toc:"menu",filename:"docs/frontend/opensource.md",description:"\u4E1A\u5185(\u8682\u8681)\u5DF2\u7ECF\u6709\u5927\u91CF\u89E3\u51B3\u5404\u79CD\u53EF\u89C6\u5316\u573A\u666F\u7684\u5F00\u6E90\u5E93, \u4E0D\u6D89 A, \u516C\u53F8\u65E0\u4EBA\u5173\u6CE8, \u65E0\u4EBA\u5F15\u5165"},D=[{id:"\u524D\u7AEF\u56F0\u5883\u5206\u6790",depth:1,title:"\u524D\u7AEF\u56F0\u5883\u5206\u6790"},{id:"\u5206\u7C7B",depth:2,title:"\u5206\u7C7B"},{id:"gis",depth:2,title:"Gis"}],k=[{value:"\u4E1A\u5185(\u8682\u8681)\u5DF2\u7ECF\u6709\u5927\u91CF\u89E3\u51B3\u5404\u79CD\u53EF\u89C6\u5316\u573A\u666F\u7684\u5F00\u6E90\u5E93, \u4E0D\u6D89 A, \u516C\u53F8\u65E0\u4EBA\u5173\u6CE8, \u65E0\u4EBA\u5F15\u5165",paraId:0,tocIndex:0},{value:"\u524D\u7AEF\u4E1A\u52A1\u573A\u666F\u9700\u8981\u5927\u91CF\u65B0\u7684\u8BBE\u8BA1, \u5185\u90E8\u7EC4\u4EF6\u8FDC\u8FDC\u4E0D\u80FD\u6EE1\u8DB3, \u6765\u81EA\u5F00\u6E90\u7684\u6B66\u5668\u5E93\u50A8\u5907\u5B8C\u5168\u4E0D\u591F",paraId:1,tocIndex:0},{value:`
\u5185\u90E8\u7EC4\u4EF6\u6587\u6863\u7F3A\u4E4F\u8BBE\u8BA1\u7EF4\u62A4\uFF0Capi \u4F20\u53C2\u4F9D\u8D56\u53E3\u53E3\u76F8\u4F20\uFF0C\u53D8\u91CF\u7C7B\u578B\u4F9D\u8D56\u5728\u7EBF\u8C03\u8BD5`,paraId:1,tocIndex:0},{value:`
SE \u4E0D\u6E05\u695A\u54EA\u4E9B\u7EC4\u4EF6\u5177\u5907\uFF0C \u54EA\u4E9B\u4E0D\u5177\u5907\uFF0C \u81EA\u7814\u96BE\u5EA6`,paraId:1,tocIndex:0},{value:`antv
`,paraId:2},{value:`L7 - \u5730\u7406\u53EF\u89C6\u5316
`,paraId:2},{value:"mapbox for \u56FD\u9645, gaode for \u56FD\u5185",paraId:2},{value:"\u5404\u7C7B\u70AB\u9177\u6548\u679C",paraId:2},{value:"\u5168\u7403\u573A\u666F - mapbox + osm \u74E6\u7247",paraId:2},{value:"\u4E2D\u56FD\u533A\u573A\u666F - \u9AD8\u5FB7",paraId:2}],B={},z={title:"Typescript",toc:"menu",filename:"docs/typescript/index.md"},Z=[{id:"\u7F16\u8F91\u5BF9\u8C61\u6570\u7EC4\u5E76\u8FD4\u56DE",depth:2,title:"\u7F16\u8F91\u5BF9\u8C61\u6570\u7EC4\u5E76\u8FD4\u56DE"}],W=[{value:`type TableDto = {
  a: string;
  b: string;
  c: number;
};

function editTable(
  data: Record<string, any>,
  key: string,
  index: number,
  newVal: string,
) {
  data[index][key] = newVal;
  // \u5982\u679C\u662Freact, \u9700\u8981lodash cloneDeep
  return data;
}

const tableData: TableDto[] = [
  {
    a: '12',
    b: '13',
    c: 1,
  },
];

const ret = editTable(tableData, 'a', 0, '123213');

console.log(ret);
`,paraId:0}],Y={},te={title:"React",toc:"menu",filename:"docs/frontend/react.md",description:"UmiJS - \u63D2\u4EF6\u5316\u7684\u4F01\u4E1A\u7EA7\u524D\u7AEF\u5E94\u7528\u6846\u67B6"},le=[{id:"\u6846\u67B6",depth:2,title:"\u6846\u67B6"},{id:"\u7EC4\u4EF6\u5E93",depth:2,title:"\u7EC4\u4EF6\u5E93"},{id:"hook",depth:2,title:"hook"},{id:"\u4E00\u4F53\u5316",depth:2,title:"\u4E00\u4F53\u5316"}],be=[{value:"UmiJS - \u63D2\u4EF6\u5316\u7684\u4F01\u4E1A\u7EA7\u524D\u7AEF\u5E94\u7528\u6846\u67B6",paraId:0,tocIndex:0},{value:"\u7EC4\u4EF6\u603B\u89C8 - Ant Design",paraId:1,tocIndex:1},{value:"ahooks - React Hooks Library - ahooks 3.0",paraId:2,tocIndex:2},{value:"Remix - Build Better Websites",paraId:3,tocIndex:3},{value:"\u4ECB\u7ECD | Midway",paraId:3,tocIndex:3}],de={},pe={title:"Go",toc:"menu",filename:"docs/go/index.md",description:"\u300A\u8DDF\u714E\u9C7C\u5B66 Go\u300B\u524D\u8A00 | Go \u8BED\u8A00\u7F16\u7A0B\u4E4B\u65C5| Go \u8BED\u8A00\u8BBE\u8BA1\u54F2\u5B66| Go \u8BED\u8A00\u8FDB\u9636\u4E4B\u65C5"},Oe=[{id:"\u57FA\u7840",depth:2,title:"\u57FA\u7840"},{id:"\u8FDB\u9636",depth:2,title:"\u8FDB\u9636"}],xe=[{value:"\u300A\u8DDF\u714E\u9C7C\u5B66 Go\u300B",paraId:0,tocIndex:0},{value:"\u524D\u8A00 | Go \u8BED\u8A00\u7F16\u7A0B\u4E4B\u65C5",paraId:0,tocIndex:0},{value:"| Go \u8BED\u8A00\u8BBE\u8BA1\u54F2\u5B66",paraId:0,tocIndex:0},{value:"| Go \u8BED\u8A00\u8FDB\u9636\u4E4B\u65C5",paraId:0,tocIndex:0},{value:"Go \u53EA\u4F1A if err != nil\uFF1F\u8FD9\u662F\u4E0D\u5BF9\u7684\uFF0C\u5206\u4EAB\u8FD9\u4E9B\u4F18\u96C5\u7684\u5904\u7406\u59FF\u52BF\u7ED9\u4F60\uFF01",paraId:1,tocIndex:1},{value:"Go \u9519\u8BEF\u5904\u7406\u65B0\u601D\u8DEF\uFF1F\u7528\u5DE6\u4FA7\u51FD\u6570\u548C\u8868\u8FBE\u5F0F",paraId:1,tocIndex:1},{value:"\u5148\u7779\u4E3A\u5FEB\uFF0CGo2 Error \u7684\u6323\u624E\u4E4B\u8DEF",paraId:1,tocIndex:1},{value:"Go \u5341\u5E74\u4E86\uFF0C\u7EC8\u4E8E\u60F3\u8D77\u8981\u7EDF\u4E00 log \u5E93\u4E86\uFF01 - \u6398\u91D1",paraId:1,tocIndex:1},{value:"Go1.20 \u4E2D\u4E24\u4E2A\u5173\u4E8E Time \u7684\u66F4\u65B0\uFF0C\u7EC8\u4E8E\u4E0D\u7528\u80CC 2006-01-02 15:04:05 \u4E86\uFF01 - \u6398\u91D1",paraId:1,tocIndex:1},{value:"\u6253\u8138\u4E86\u5144\u5F1F\u4EEC\uFF0CGo1.20 arena \u6765\u4E86\uFF01 - \u6398\u91D1",paraId:1,tocIndex:1}],Ve={},K={title:"Docs",toc:"menu",filename:"docs/index.md",hero:{title:"library",description:null,actions:[{text:"Hello",link:"/"},{text:"World",link:"/"}]},features:[{title:"Hello",emoji:"\u{1F48E}",description:"Put hello description here"},{title:"World",emoji:"\u{1F308}",description:"Put world description here"},{title:"!",emoji:"\u{1F680}",description:"Put ! description here"}],description:"dumi2-template"},ke=[],we=[{value:"dumi2-template",paraId:0}],Me,Xe={"foo-demo-0":{component:function(){Me={value:!0};var ot=c(37016);return function(){return l.createElement(ot.Foo,{title:"Hello dumi!"})}}(),asset:{type:"BLOCK",id:"foo-demo-0",refAtomIds:["Foo"],dependencies:{"index.tsx":{type:"FILE",value:`import { Foo } from 'dumi2-template';

export default () => <Foo title="Hello dumi!" />`},"dumi2-template":{type:"NPM",value:"0.0.1"}}}}},Ke={title:"Foo",toc:"menu",filename:"src/Foo/index.md",atomId:"Foo",description:"This is an example component."},At=[{id:"foo",depth:1,title:"Foo"}],mt=[{value:"This is an example component.",paraId:0,tocIndex:0}],ie={},oe={title:"\u53EF\u89C6\u5316\u7EC4\u4EF6",toc:"menu",filename:"src/index.md"},he=[{id:"\u53EF\u89C6\u5316\u7EC4\u4EF6",depth:1,title:"\u53EF\u89C6\u5316\u7EC4\u4EF6"}],ye=[],se={"nextmap-demo-simpleexample":{component:l.lazy(function(){return c.e(345).then(c.bind(c,65939))}),asset:{type:"BLOCK",id:"nextmap-demo-simpleexample",refAtomIds:["NextMap"],dependencies:{"index.tsx":{type:"FILE",value:c(49085).Z},"dumi2-template":{type:"NPM",value:"0.0.1"},react:{type:"NPM",value:"18.2.0"},"../fitBounds.ts":{type:"FILE",value:c(12511).Z},"../drawText.ts":{type:"FILE",value:c(72435).Z},"@antv/l7":{type:"NPM",value:"2.11.2"}}}},"nextmap-demo-threedbar":{component:l.lazy(function(){return c.e(345).then(c.bind(c,55832))}),asset:{type:"BLOCK",id:"nextmap-demo-threedbar",refAtomIds:["NextMap"],dependencies:{"index.tsx":{type:"FILE",value:c(71104).Z},"dumi2-template":{type:"NPM",value:"0.0.1"},react:{type:"NPM",value:"18.2.0"},"../draw3DBar.ts":{type:"FILE",value:c(6481).Z},"@antv/l7":{type:"NPM",value:"2.11.2"}}}}},Ne={title:"Gis",toc:"menu",filename:"src/NextMap/index.md",atomId:"NextMap",description:"\u57FA\u4E8E antv l7"},st=[{id:"gis",depth:1,title:"Gis"},{id:"\u586B\u5145\u56FE",depth:2,title:"\u586B\u5145\u56FE"},{id:"3d-\u67F1\u72B6\u56FE",depth:2,title:"3D \u67F1\u72B6\u56FE"}],Fe=[{value:"\u57FA\u4E8E ",paraId:0,tocIndex:0},{value:"antv l7",paraId:0,tocIndex:0}],tt={},Wt={title:"Next Topo",toc:"menu",filename:"src/NextTopo/index.md",atomId:"NextTopo"},Pr=[],Qt=[],xr=null,$r={},Cr={"docs/frontend/opensource":{frontmatter:A,toc:D,texts:k,demos:R},"docs/typescript/index":{frontmatter:z,toc:Z,texts:W,demos:B},"docs/frontend/react":{frontmatter:te,toc:le,texts:be,demos:Y},"docs/go/index":{frontmatter:pe,toc:Oe,texts:xe,demos:de},"docs/index":{frontmatter:K,toc:ke,texts:we,demos:Ve},"components/Foo/index":{frontmatter:Ke,toc:At,texts:mt,demos:Xe},"components/index":{frontmatter:oe,toc:he,texts:ye,demos:ie},"components/NextMap/index":{frontmatter:Ne,toc:st,texts:Fe,demos:se},"components/NextTopo/index":{frontmatter:Wt,toc:Pr,texts:Qt,demos:tt}},sn=Object.entries(Cr).reduce(function(ot,_r){var cr=v()(_r,2),Vr=cr[0],Qn=cr[1];return Object.values(Qn.demos).forEach(function(mn){mn.routeId=Vr}),Object.assign(ot,Qn.demos),delete Qn.demos,ot},{})},65425:function(U,F,c){"use strict";c.d(F,{Ac:function(){return Cr},ql:function(){return we.ql},rU:function(){return ke},OL:function(){return le},Q$:function(){return sn},m8:function(){return ot.m},fp:function(){return v.fp},Ov:function(){return Ve.Ov},TH:function(){return v.TH},pC:function(){return v.pC},UO:function(){return v.UO},Qt:function(){return Me.Q},lr:function(){return de}});var w=c(50959),v=c(44492),l=c(18280);function R(){return R=Object.assign||function(me){for(var ne=1;ne<arguments.length;ne++){var fe=arguments[ne];for(var Q in fe)Object.prototype.hasOwnProperty.call(fe,Q)&&(me[Q]=fe[Q])}return me},R.apply(this,arguments)}function A(me,ne){if(me==null)return{};var fe={},Q=Object.keys(me),De,dt;for(dt=0;dt<Q.length;dt++)De=Q[dt],!(ne.indexOf(De)>=0)&&(fe[De]=me[De]);return fe}const D=["onClick","reloadDocument","replace","state","target","to"],k=["aria-current","caseSensitive","className","end","style","to","children"];function B(me,ne){if(!me){typeof console!="undefined"&&console.warn(ne);try{throw new Error(ne)}catch(fe){}}}function z(me){let{basename:ne,children:fe,window:Q}=me,De=useRef();De.current==null&&(De.current=createBrowserHistory({window:Q}));let dt=De.current,[Jt,it]=useState({action:dt.action,location:dt.location});return useLayoutEffect(()=>dt.listen(it),[dt]),createElement(Router,{basename:ne,children:fe,location:Jt.location,navigationType:Jt.action,navigator:dt})}function Z(me){let{basename:ne,children:fe,window:Q}=me,De=useRef();De.current==null&&(De.current=createHashHistory({window:Q}));let dt=De.current,[Jt,it]=useState({action:dt.action,location:dt.location});return useLayoutEffect(()=>dt.listen(it),[dt]),createElement(Router,{basename:ne,children:fe,location:Jt.location,navigationType:Jt.action,navigator:dt})}function W(me){let{basename:ne,children:fe,history:Q}=me;const[De,dt]=useState({action:Q.action,location:Q.location});return useLayoutEffect(()=>Q.listen(dt),[Q]),createElement(Router,{basename:ne,children:fe,location:De.location,navigationType:De.action,navigator:Q})}function Y(me){return!!(me.metaKey||me.altKey||me.ctrlKey||me.shiftKey)}const te=(0,w.forwardRef)(function(ne,fe){let{onClick:Q,reloadDocument:De,replace:dt=!1,state:Jt,target:it,to:lt}=ne,qt=A(ne,D),pr=(0,v.oQ)(lt),Hr=be(lt,{replace:dt,state:Jt,target:it});function Xr(ce){Q&&Q(ce),!ce.defaultPrevented&&!De&&Hr(ce)}return(0,w.createElement)("a",R({},qt,{href:pr,onClick:Xr,ref:fe,target:it}))}),le=(0,w.forwardRef)(function(ne,fe){let{"aria-current":Q="page",caseSensitive:De=!1,className:dt="",end:Jt=!1,style:it,to:lt,children:qt}=ne,pr=A(ne,k),Hr=(0,v.TH)(),Xr=(0,v.WU)(lt),ce=Hr.pathname,xt=Xr.pathname;De||(ce=ce.toLowerCase(),xt=xt.toLowerCase());let Gt=ce===xt||!Jt&&ce.startsWith(xt)&&ce.charAt(xt.length)==="/",Ir=Gt?Q:void 0,nn;typeof dt=="function"?nn=dt({isActive:Gt}):nn=[dt,Gt?"active":null].filter(Boolean).join(" ");let zi=typeof it=="function"?it({isActive:Gt}):it;return(0,w.createElement)(te,R({},pr,{"aria-current":Ir,className:nn,ref:fe,style:zi,to:lt}),typeof qt=="function"?qt({isActive:Gt}):qt)});function be(me,ne){let{target:fe,replace:Q,state:De}=ne===void 0?{}:ne,dt=(0,v.s0)(),Jt=(0,v.TH)(),it=(0,v.WU)(me);return(0,w.useCallback)(lt=>{if(lt.button===0&&(!fe||fe==="_self")&&!Y(lt)){lt.preventDefault();let qt=!!Q||(0,l.Ep)(Jt)===(0,l.Ep)(it);dt(me,{replace:qt,state:De})}},[Jt,dt,it,Q,De,fe,me])}function de(me){let ne=(0,w.useRef)(pe(me)),fe=(0,v.TH)(),Q=(0,w.useMemo)(()=>{let Jt=pe(fe.search);for(let it of ne.current.keys())Jt.has(it)||ne.current.getAll(it).forEach(lt=>{Jt.append(it,lt)});return Jt},[fe.search]),De=(0,v.s0)(),dt=(0,w.useCallback)((Jt,it)=>{De("?"+pe(Jt),it)},[De]);return[Q,dt]}function pe(me){return me===void 0&&(me=""),new URLSearchParams(typeof me=="string"||Array.isArray(me)||me instanceof URLSearchParams?me:Object.keys(me).reduce((ne,fe)=>{let Q=me[fe];return ne.concat(Array.isArray(Q)?Q.map(De=>[fe,De]):[[fe,Q]])},[]))}var Oe=c(62081),xe=c(18112),Ve=c(19188),K=["prefetch"];function ke(me){var ne=me.prefetch,fe=(0,xe.Z)(me,K),Q=(0,Ve.Ov)(),De=typeof me.to=="string"?me.to:me.to.pathname;return w.createElement(te,(0,Oe.Z)({onMouseEnter:function(){var Jt;return ne&&De&&((Jt=Q.preloadRoute)===null||Jt===void 0?void 0:Jt.call(Q,De))}},fe),me.children)}var we=c(87593),Me=c(26342);function Xe(me){return Xe=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(ne){return typeof ne}:function(ne){return ne&&typeof Symbol=="function"&&ne.constructor===Symbol&&ne!==Symbol.prototype?"symbol":typeof ne},Xe(me)}function Ke(){"use strict";Ke=function(){return me};var me={},ne=Object.prototype,fe=ne.hasOwnProperty,Q=typeof Symbol=="function"?Symbol:{},De=Q.iterator||"@@iterator",dt=Q.asyncIterator||"@@asyncIterator",Jt=Q.toStringTag||"@@toStringTag";function it(ht,Et,Zt){return Object.defineProperty(ht,Et,{value:Zt,enumerable:!0,configurable:!0,writable:!0}),ht[Et]}try{it({},"")}catch(ht){it=function(Zt,sr,bt){return Zt[sr]=bt}}function lt(ht,Et,Zt,sr){var bt=Et&&Et.prototype instanceof Hr?Et:Hr,Ft=Object.create(bt.prototype),zr=new Ge(sr||[]);return Ft._invoke=function(Jn,yn,tn){var ni="suspendedStart";return function(ta,fa){if(ni==="executing")throw new Error("Generator is already running");if(ni==="completed"){if(ta==="throw")throw fa;return gt()}for(tn.method=ta,tn.arg=fa;;){var Mr=tn.delegate;if(Mr){var Wr=Pi(Mr,tn);if(Wr){if(Wr===pr)continue;return Wr}}if(tn.method==="next")tn.sent=tn._sent=tn.arg;else if(tn.method==="throw"){if(ni==="suspendedStart")throw ni="completed",tn.arg;tn.dispatchException(tn.arg)}else tn.method==="return"&&tn.abrupt("return",tn.arg);ni="executing";var Zi=qt(Jn,yn,tn);if(Zi.type==="normal"){if(ni=tn.done?"completed":"suspendedYield",Zi.arg===pr)continue;return{value:Zi.arg,done:tn.done}}Zi.type==="throw"&&(ni="completed",tn.method="throw",tn.arg=Zi.arg)}}}(ht,Zt,zr),Ft}function qt(ht,Et,Zt){try{return{type:"normal",arg:ht.call(Et,Zt)}}catch(sr){return{type:"throw",arg:sr}}}me.wrap=lt;var pr={};function Hr(){}function Xr(){}function ce(){}var xt={};it(xt,De,function(){return this});var Gt=Object.getPrototypeOf,Ir=Gt&&Gt(Gt(et([])));Ir&&Ir!==ne&&fe.call(Ir,De)&&(xt=Ir);var nn=ce.prototype=Hr.prototype=Object.create(xt);function zi(ht){["next","throw","return"].forEach(function(Et){it(ht,Et,function(Zt){return this._invoke(Et,Zt)})})}function Ui(ht,Et){function Zt(bt,Ft,zr,Jn){var yn=qt(ht[bt],ht,Ft);if(yn.type!=="throw"){var tn=yn.arg,ni=tn.value;return ni&&Xe(ni)=="object"&&fe.call(ni,"__await")?Et.resolve(ni.__await).then(function(ta){Zt("next",ta,zr,Jn)},function(ta){Zt("throw",ta,zr,Jn)}):Et.resolve(ni).then(function(ta){tn.value=ta,zr(tn)},function(ta){return Zt("throw",ta,zr,Jn)})}Jn(yn.arg)}var sr;this._invoke=function(bt,Ft){function zr(){return new Et(function(Jn,yn){Zt(bt,Ft,Jn,yn)})}return sr=sr?sr.then(zr,zr):zr()}}function Pi(ht,Et){var Zt=ht.iterator[Et.method];if(Zt===void 0){if(Et.delegate=null,Et.method==="throw"){if(ht.iterator.return&&(Et.method="return",Et.arg=void 0,Pi(ht,Et),Et.method==="throw"))return pr;Et.method="throw",Et.arg=new TypeError("The iterator does not provide a 'throw' method")}return pr}var sr=qt(Zt,ht.iterator,Et.arg);if(sr.type==="throw")return Et.method="throw",Et.arg=sr.arg,Et.delegate=null,pr;var bt=sr.arg;return bt?bt.done?(Et[ht.resultName]=bt.value,Et.next=ht.nextLoc,Et.method!=="return"&&(Et.method="next",Et.arg=void 0),Et.delegate=null,pr):bt:(Et.method="throw",Et.arg=new TypeError("iterator result is not an object"),Et.delegate=null,pr)}function ka(ht){var Et={tryLoc:ht[0]};1 in ht&&(Et.catchLoc=ht[1]),2 in ht&&(Et.finallyLoc=ht[2],Et.afterLoc=ht[3]),this.tryEntries.push(Et)}function Ti(ht){var Et=ht.completion||{};Et.type="normal",delete Et.arg,ht.completion=Et}function Ge(ht){this.tryEntries=[{tryLoc:"root"}],ht.forEach(ka,this),this.reset(!0)}function et(ht){if(ht){var Et=ht[De];if(Et)return Et.call(ht);if(typeof ht.next=="function")return ht;if(!isNaN(ht.length)){var Zt=-1,sr=function bt(){for(;++Zt<ht.length;)if(fe.call(ht,Zt))return bt.value=ht[Zt],bt.done=!1,bt;return bt.value=void 0,bt.done=!0,bt};return sr.next=sr}}return{next:gt}}function gt(){return{value:void 0,done:!0}}return Xr.prototype=ce,it(nn,"constructor",ce),it(ce,"constructor",Xr),Xr.displayName=it(ce,Jt,"GeneratorFunction"),me.isGeneratorFunction=function(ht){var Et=typeof ht=="function"&&ht.constructor;return!!Et&&(Et===Xr||(Et.displayName||Et.name)==="GeneratorFunction")},me.mark=function(ht){return Object.setPrototypeOf?Object.setPrototypeOf(ht,ce):(ht.__proto__=ce,it(ht,Jt,"GeneratorFunction")),ht.prototype=Object.create(nn),ht},me.awrap=function(ht){return{__await:ht}},zi(Ui.prototype),it(Ui.prototype,dt,function(){return this}),me.AsyncIterator=Ui,me.async=function(ht,Et,Zt,sr,bt){bt===void 0&&(bt=Promise);var Ft=new Ui(lt(ht,Et,Zt,sr),bt);return me.isGeneratorFunction(Et)?Ft:Ft.next().then(function(zr){return zr.done?zr.value:Ft.next()})},zi(nn),it(nn,Jt,"Generator"),it(nn,De,function(){return this}),it(nn,"toString",function(){return"[object Generator]"}),me.keys=function(ht){var Et=[];for(var Zt in ht)Et.push(Zt);return Et.reverse(),function sr(){for(;Et.length;){var bt=Et.pop();if(bt in ht)return sr.value=bt,sr.done=!1,sr}return sr.done=!0,sr}},me.values=et,Ge.prototype={constructor:Ge,reset:function(Et){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(Ti),!Et)for(var Zt in this)Zt.charAt(0)==="t"&&fe.call(this,Zt)&&!isNaN(+Zt.slice(1))&&(this[Zt]=void 0)},stop:function(){this.done=!0;var Et=this.tryEntries[0].completion;if(Et.type==="throw")throw Et.arg;return this.rval},dispatchException:function(Et){if(this.done)throw Et;var Zt=this;function sr(tn,ni){return zr.type="throw",zr.arg=Et,Zt.next=tn,ni&&(Zt.method="next",Zt.arg=void 0),!!ni}for(var bt=this.tryEntries.length-1;bt>=0;--bt){var Ft=this.tryEntries[bt],zr=Ft.completion;if(Ft.tryLoc==="root")return sr("end");if(Ft.tryLoc<=this.prev){var Jn=fe.call(Ft,"catchLoc"),yn=fe.call(Ft,"finallyLoc");if(Jn&&yn){if(this.prev<Ft.catchLoc)return sr(Ft.catchLoc,!0);if(this.prev<Ft.finallyLoc)return sr(Ft.finallyLoc)}else if(Jn){if(this.prev<Ft.catchLoc)return sr(Ft.catchLoc,!0)}else{if(!yn)throw new Error("try statement without catch or finally");if(this.prev<Ft.finallyLoc)return sr(Ft.finallyLoc)}}}},abrupt:function(Et,Zt){for(var sr=this.tryEntries.length-1;sr>=0;--sr){var bt=this.tryEntries[sr];if(bt.tryLoc<=this.prev&&fe.call(bt,"finallyLoc")&&this.prev<bt.finallyLoc){var Ft=bt;break}}Ft&&(Et==="break"||Et==="continue")&&Ft.tryLoc<=Zt&&Zt<=Ft.finallyLoc&&(Ft=null);var zr=Ft?Ft.completion:{};return zr.type=Et,zr.arg=Zt,Ft?(this.method="next",this.next=Ft.finallyLoc,pr):this.complete(zr)},complete:function(Et,Zt){if(Et.type==="throw")throw Et.arg;return Et.type==="break"||Et.type==="continue"?this.next=Et.arg:Et.type==="return"?(this.rval=this.arg=Et.arg,this.method="return",this.next="end"):Et.type==="normal"&&Zt&&(this.next=Zt),pr},finish:function(Et){for(var Zt=this.tryEntries.length-1;Zt>=0;--Zt){var sr=this.tryEntries[Zt];if(sr.finallyLoc===Et)return this.complete(sr.completion,sr.afterLoc),Ti(sr),pr}},catch:function(Et){for(var Zt=this.tryEntries.length-1;Zt>=0;--Zt){var sr=this.tryEntries[Zt];if(sr.tryLoc===Et){var bt=sr.completion;if(bt.type==="throw"){var Ft=bt.arg;Ti(sr)}return Ft}}throw new Error("illegal catch attempt")},delegateYield:function(Et,Zt,sr){return this.delegate={iterator:et(Et),resultName:Zt,nextLoc:sr},this.method==="next"&&(this.arg=void 0),pr}},me}var At=c(84045);function mt(me,ne,fe,Q,De,dt,Jt){try{var it=me[dt](Jt),lt=it.value}catch(qt){fe(qt);return}it.done?ne(lt):Promise.resolve(lt).then(Q,De)}function ie(me){return function(){var ne=this,fe=arguments;return new Promise(function(Q,De){var dt=me.apply(ne,fe);function Jt(lt){mt(dt,Q,De,Jt,it,"next",lt)}function it(lt){mt(dt,Q,De,Jt,it,"throw",lt)}Jt(void 0)})}}var oe=c(71120),he=c(98930);function ye(me){if(typeof Symbol!="undefined"&&me[Symbol.iterator]!=null||me["@@iterator"]!=null)return Array.from(me)}var se=c(83726),Ne=c(30048);function st(me){return(0,he.Z)(me)||ye(me)||(0,se.Z)(me)||(0,Ne.Z)()}function Fe(me,ne){if(!(me instanceof ne))throw new TypeError("Cannot call a class as a function")}function tt(me,ne){for(var fe=0;fe<ne.length;fe++){var Q=ne[fe];Q.enumerable=Q.enumerable||!1,Q.configurable=!0,"value"in Q&&(Q.writable=!0),Object.defineProperty(me,Q.key,Q)}}function Wt(me,ne,fe){return ne&&tt(me.prototype,ne),fe&&tt(me,fe),Object.defineProperty(me,"prototype",{writable:!1}),me}var Pr=c(82269);function Qt(me,ne){if(!me)throw new Error(ne)}function xr(me){var ne=me.fns,fe=me.args;if(ne.length===1)return ne[0];var Q=ne.pop();return ne.reduce(function(De,dt){return function(){return dt(De,fe)}},Q)}function $r(me){return!!me&&Xe(me)==="object"&&typeof me.then=="function"}var Cr;(function(me){me.compose="compose",me.modify="modify",me.event="event"})(Cr||(Cr={}));var sn=function(){function me(ne){Fe(this,me),(0,Pr.Z)(this,"opts",void 0),(0,Pr.Z)(this,"hooks",{}),this.opts=ne}return Wt(me,[{key:"register",value:function(fe){var Q=this;Qt(fe.apply,"plugin register failed, apply must supplied"),Object.keys(fe.apply).forEach(function(De){Qt(Q.opts.validKeys.indexOf(De)>-1,"register failed, invalid key ".concat(De," ").concat(fe.path?"from plugin ".concat(fe.path):"",".")),Q.hooks[De]=(Q.hooks[De]||[]).concat(fe.apply[De])})}},{key:"getHooks",value:function(fe){var Q=fe.split("."),De=st(Q),dt=De[0],Jt=De.slice(1),it=this.hooks[dt]||[];return Jt.length&&(it=it.map(function(lt){try{var qt=lt,pr=(0,oe.Z)(Jt),Hr;try{for(pr.s();!(Hr=pr.n()).done;){var Xr=Hr.value;qt=qt[Xr]}}catch(ce){pr.e(ce)}finally{pr.f()}return qt}catch(ce){return null}}).filter(Boolean)),it}},{key:"applyPlugins",value:function(fe){var Q=fe.key,De=fe.type,dt=fe.initialValue,Jt=fe.args,it=fe.async,lt=this.getHooks(Q)||[];switch(Jt&&Qt(Xe(Jt)==="object","applyPlugins failed, args must be plain object."),it&&Qt(De===Cr.modify||De===Cr.event,"async only works with modify and event type."),De){case Cr.modify:return it?lt.reduce(function(){var qt=ie(Ke().mark(function pr(Hr,Xr){var ce;return Ke().wrap(function(Gt){for(;;)switch(Gt.prev=Gt.next){case 0:if(Qt(typeof Xr=="function"||Xe(Xr)==="object"||$r(Xr),"applyPlugins failed, all hooks for key ".concat(Q," must be function, plain object or Promise.")),!$r(Hr)){Gt.next=5;break}return Gt.next=4,Hr;case 4:Hr=Gt.sent;case 5:if(typeof Xr!="function"){Gt.next=16;break}if(ce=Xr(Hr,Jt),!$r(ce)){Gt.next=13;break}return Gt.next=10,ce;case 10:return Gt.abrupt("return",Gt.sent);case 13:return Gt.abrupt("return",ce);case 14:Gt.next=21;break;case 16:if(!$r(Xr)){Gt.next=20;break}return Gt.next=19,Xr;case 19:Xr=Gt.sent;case 20:return Gt.abrupt("return",(0,At.Z)((0,At.Z)({},Hr),Xr));case 21:case"end":return Gt.stop()}},pr)}));return function(pr,Hr){return qt.apply(this,arguments)}}(),$r(dt)?dt:Promise.resolve(dt)):lt.reduce(function(qt,pr){return Qt(typeof pr=="function"||Xe(pr)==="object","applyPlugins failed, all hooks for key ".concat(Q," must be function or plain object.")),typeof pr=="function"?pr(qt,Jt):(0,At.Z)((0,At.Z)({},qt),pr)},dt);case Cr.event:return ie(Ke().mark(function qt(){var pr,Hr,Xr,ce;return Ke().wrap(function(Gt){for(;;)switch(Gt.prev=Gt.next){case 0:pr=(0,oe.Z)(lt),Gt.prev=1,pr.s();case 3:if((Hr=pr.n()).done){Gt.next=12;break}if(Xr=Hr.value,Qt(typeof Xr=="function","applyPlugins failed, all hooks for key ".concat(Q," must be function.")),ce=Xr(Jt),!(it&&$r(ce))){Gt.next=10;break}return Gt.next=10,ce;case 10:Gt.next=3;break;case 12:Gt.next=17;break;case 14:Gt.prev=14,Gt.t0=Gt.catch(1),pr.e(Gt.t0);case 17:return Gt.prev=17,pr.f(),Gt.finish(17);case 20:case"end":return Gt.stop()}},qt,null,[[1,14,17,20]])}))();case Cr.compose:return function(){return xr({fns:lt.concat(dt),args:Jt})()}}}}],[{key:"create",value:function(fe){var Q=new me({validKeys:fe.validKeys});return fe.plugins.forEach(function(De){Q.register(De)}),Q}}]),me}(),ot=c(20679),_r=c(69946),cr=c.n(_r),Vr=globalThis.console,Qn=0,mn=0;function _n(me,ne){if(!1)var fe}function Yr(me){return JSON.stringify(me,null,2)}function Fr(me){var ne=me.length>1?me.map(kr).join(" "):me[0];return cr()(ne)==="object"?"".concat(Yr(ne)):ne.toString()}function kr(me){return cr()(me)==="object"?"".concat(JSON.stringify(me)):me.toString()}var ft={log:function(){for(var ne=arguments.length,fe=new Array(ne),Q=0;Q<ne;Q++)fe[Q]=arguments[Q];_n("log",Fr(fe))},info:function(){for(var ne=arguments.length,fe=new Array(ne),Q=0;Q<ne;Q++)fe[Q]=arguments[Q];_n("info",Fr(fe))},warn:function(){for(var ne=arguments.length,fe=new Array(ne),Q=0;Q<ne;Q++)fe[Q]=arguments[Q];_n("warn",Fr(fe))},error:function(){for(var ne=arguments.length,fe=new Array(ne),Q=0;Q<ne;Q++)fe[Q]=arguments[Q];_n("error",Fr(fe))},group:function(){mn++},groupCollapsed:function(){mn++},groupEnd:function(){mn&&--mn},clear:function(){_n("clear")},trace:function(){Vr.trace.apply(Vr,arguments)},profile:function(){Vr.profile.apply(Vr,arguments)},profileEnd:function(){Vr.profileEnd.apply(Vr,arguments)}}},37016:function(U,F,c){"use strict";c.r(F),c.d(F,{Foo:function(){return k},NextMap:function(){return z}});var w=c(46686),v=c.n(w),l=function(W,Y){return W+Y},R=c(50959),A=c(11527),D=function(){var W=(0,R.useState)(1),Y=v()(W,2),te=Y[0],le=Y[1],be=(0,R.useState)(1),de=v()(be,2),pe=de[0],Oe=de[1];return(0,A.jsxs)("div",{children:[(0,A.jsxs)("label",{htmlFor:"a",children:["a",(0,A.jsx)("input",{type:"text",value:te,onChange:function(Ve){return le(parseInt(Ve.target.value))}})]}),(0,A.jsxs)("label",{htmlFor:"b",children:["b",(0,A.jsx)("input",{type:"text",value:pe,onChange:function(Ve){return Oe(parseInt(Ve.target.value))}})]}),(0,A.jsx)("h4",{children:l(te,pe)})]})},k=D,B=c(84827);function z(Z){var W=Z.id,Y=Z.config,te=Z.isChina,le=te===void 0?!1:te,be=Z.onLoad;return(0,R.useEffect)(function(){var de=new B.xs({id:W,map:le?new B.lg(Y):new B.pc(Y)});return de.on("loaded",function(){be==null||be(de)}),function(){de.destroy()}},[]),(0,A.jsx)("div",{style:{minHeight:500,justifyContent:"center",position:"relative"},id:W})}},89758:function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";var dumi__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(55566),react__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(50959);function ownKeys(U,F){var c=Object.keys(U);if(Object.getOwnPropertySymbols){var w=Object.getOwnPropertySymbols(U);F&&(w=w.filter(function(v){return Object.getOwnPropertyDescriptor(U,v).enumerable})),c.push.apply(c,w)}return c}function _objectSpread(U){for(var F=1;F<arguments.length;F++){var c=arguments[F]!=null?arguments[F]:{};F%2?ownKeys(Object(c),!0).forEach(function(w){_defineProperty(U,w,c[w])}):Object.getOwnPropertyDescriptors?Object.defineProperties(U,Object.getOwnPropertyDescriptors(c)):ownKeys(Object(c)).forEach(function(w){Object.defineProperty(U,w,Object.getOwnPropertyDescriptor(c,w))})}return U}function _defineProperty(U,F,c){return F in U?Object.defineProperty(U,F,{value:c,enumerable:!0,configurable:!0,writable:!0}):U[F]=c,U}function _slicedToArray(U,F){return _arrayWithHoles(U)||_iterableToArrayLimit(U,F)||_unsupportedIterableToArray(U,F)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _unsupportedIterableToArray(U,F){if(!!U){if(typeof U=="string")return _arrayLikeToArray(U,F);var c=Object.prototype.toString.call(U).slice(8,-1);if(c==="Object"&&U.constructor&&(c=U.constructor.name),c==="Map"||c==="Set")return Array.from(U);if(c==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(c))return _arrayLikeToArray(U,F)}}function _arrayLikeToArray(U,F){(F==null||F>U.length)&&(F=U.length);for(var c=0,w=new Array(F);c<F;c++)w[c]=U[c];return w}function _iterableToArrayLimit(U,F){var c=U==null?null:typeof Symbol!="undefined"&&U[Symbol.iterator]||U["@@iterator"];if(c!=null){var w=[],v=!0,l=!1,R,A;try{for(c=c.call(U);!(v=(R=c.next()).done)&&(w.push(R.value),!(F&&w.length===F));v=!0);}catch(D){l=!0,A=D}finally{try{!v&&c.return!=null&&c.return()}finally{if(l)throw A}}return w}}function _arrayWithHoles(U){if(Array.isArray(U))return U}function _typeof(U){return _typeof=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(F){return typeof F}:function(F){return F&&typeof Symbol=="function"&&F.constructor===Symbol&&F!==Symbol.prototype?"symbol":typeof F},_typeof(U)}function builtInProcessor(entity,entryExports){var mod;switch(entity.$$__type){case"function":return eval(entity.$$__body.sourceCode);case"element":return mod=entity.$$__body.componentName.split(".").reduce(function(U,F){return U[F]},entryExports),mod===void 0?entity.$$__body.componentName:"_InternalPanelDoNotUseOrYouWillBeFired"in mod?mod._InternalPanelDoNotUseOrYouWillBeFired:mod}}function deepReplace(U,F){return Array.isArray(U)?U.map(function(c){return deepReplace(c,F)}):_typeof(U)==="object"&&(U==null?void 0:U.$$__type)==="element"?translatePresetToReact(U.$$__body,F):_typeof(U)==="object"&&Object.prototype.toString.call(U)==="[object Object]"?Object.entries(U).reduce(function(c,w){var v=_slicedToArray(w,2),l=v[0],R=v[1];return _objectSpread(_objectSpread({},c),{},_defineProperty({},l,deepReplace(R,F)))},{}):U}function translatePresetToReact(U,F){var c=U.props,w=U.size,v=F({$$__type:"element",$$__body:U});return React.createElement(v,deepReplace(_objectSpread(_objectSpread({},c),{},{style:_objectSpread(_objectSpread({},c.style),w)}),F))}var AtomRenderer=function U(F){var c=useSiteData(),w=c.entryExports;switch(F.type){case"COMPONENT":return translatePresetToReact(F.value,function(v){return builtInProcessor(v,w)});default:return React.createElement(React.Fragment,null,F.type," atom is not supported.")}}},97477:function(U,F,c){"use strict";c.d(F,{D:function(){return v},W:function(){return l}});var w=c(50959),v=(0,w.createContext)({pkg:{},entryExports:{},demos:{},components:{},locales:[],themeConfig:{},loading:!1,setLoading:function(){}}),l=function(){return(0,w.useContext)(v)}},20975:function(U,F,c){"use strict";c.d(F,{b:function(){return z}});var w=c(55566),v=c(50959);function l(Z,W){return B(Z)||k(Z,W)||A(Z,W)||R()}function R(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function A(Z,W){if(!!Z){if(typeof Z=="string")return D(Z,W);var Y=Object.prototype.toString.call(Z).slice(8,-1);if(Y==="Object"&&Z.constructor&&(Y=Z.constructor.name),Y==="Map"||Y==="Set")return Array.from(Z);if(Y==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Y))return D(Z,W)}}function D(Z,W){(W==null||W>Z.length)&&(W=Z.length);for(var Y=0,te=new Array(W);Y<W;Y++)te[Y]=Z[Y];return te}function k(Z,W){var Y=Z==null?null:typeof Symbol!="undefined"&&Z[Symbol.iterator]||Z["@@iterator"];if(Y!=null){var te=[],le=!0,be=!1,de,pe;try{for(Y=Y.call(Z);!(le=(de=Y.next()).done)&&(te.push(de.value),!(W&&te.length===W));le=!0);}catch(Oe){be=!0,pe=Oe}finally{try{!le&&Y.return!=null&&Y.return()}finally{if(be)throw pe}}return te}}function B(Z){if(Array.isArray(Z))return Z}var z=function(){var W=(0,w.YB)(),Y=(0,w.WF)(),te=Y.locales,le=(0,v.useState)(function(){return te.find(function(pe){var Oe=pe.id;return Oe===W.locale})}),be=l(le,1),de=be[0];return de}},74810:function(U,F,c){"use strict";c.d(F,{AM:function(){return Y},LI:function(){return te},M7:function(){return le},RX:function(){return W},qu:function(){return be}});var w=c(55566),v=c(50959),l=c(20975);function R(de){return R=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(pe){return typeof pe}:function(pe){return pe&&typeof Symbol=="function"&&pe.constructor===Symbol&&pe!==Symbol.prototype?"symbol":typeof pe},R(de)}function A(de,pe){return Z(de)||z(de,pe)||k(de,pe)||D()}function D(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function k(de,pe){if(!!de){if(typeof de=="string")return B(de,pe);var Oe=Object.prototype.toString.call(de).slice(8,-1);if(Oe==="Object"&&de.constructor&&(Oe=de.constructor.name),Oe==="Map"||Oe==="Set")return Array.from(de);if(Oe==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Oe))return B(de,pe)}}function B(de,pe){(pe==null||pe>de.length)&&(pe=de.length);for(var Oe=0,xe=new Array(pe);Oe<pe;Oe++)xe[Oe]=de[Oe];return xe}function z(de,pe){var Oe=de==null?null:typeof Symbol!="undefined"&&de[Symbol.iterator]||de["@@iterator"];if(Oe!=null){var xe=[],Ve=!0,K=!1,ke,we;try{for(Oe=Oe.call(de);!(Ve=(ke=Oe.next()).done)&&(xe.push(ke.value),!(pe&&xe.length===pe));Ve=!0);}catch(Me){K=!0,we=Me}finally{try{!Ve&&Oe.return!=null&&Oe.return()}finally{if(K)throw we}}return xe}}function Z(de){if(Array.isArray(de))return de}var W=function(){var pe=(0,w.YB)(),Oe=(0,w.Ov)(),xe=Oe.routes,Ve=(0,w.WF)(),K=Ve.locales,ke=(0,v.useState)(function(){var Xe=K.slice().reverse();return Object.values(xe).reduce(function(Ke,At){var mt=Xe.find(function(ie){return"suffix"in ie?At.path.endsWith(ie.suffix):At.path.startsWith(ie.base.slice(1))});return At.parentId==="DocLayout"&&mt.id===pe.locale&&(Ke[At.id]=At),Ke},{})}),we=A(ke,1),Me=we[0];return Me},Y=function(pe){var Oe=`/**
 * This is an auto-generated demo by dumi
 * if you think it is not working as expected,
 * please report the issue at
 * https://github.com/umijs/dumi/issues
 */`;return pe.startsWith("18.")||pe==="latest"?"".concat(Oe,`

import React from 'react';
import { createRoot } from "react-dom/client";
import App from "./App";

const rootElement = document.getElementById("root");
const root = createRoot(rootElement);

root.render(<App />);`):"".concat(Oe,`

import React from 'react';
import ReactDOM from 'react-dom';
import App from './App';

ReactDOM.render(
  <App />,
  document.getElementById('root'),
);`)},te=typeof window!="undefined"?v.useLayoutEffect:v.useEffect,le=function(){var pe=(0,l.b)();return(0,v.useCallback)(function(Oe,xe){return("order"in Oe&&"order"in xe?Oe.order-xe.order:0)||("link"in Oe&&"link"in xe?Oe.link.split("/").length-xe.link.split("/").length:0)||("path"in Oe&&"path"in xe?Oe.path.split("/").length-xe.path.split("/").length:0)||(Oe.title?Oe.title.localeCompare(xe.title||"",pe.id):-1)},[])},be=function(pe,Oe,xe){var Ve,K=xe[Oe];switch(R(K)){case"object":pe.title=K.title||pe.title,pe.order=(Ve=K.order)!==null&&Ve!==void 0?Ve:pe.order;break;case"string":pe.title=K||pe.title;break;default:}return pe}},19188:function(U,F,c){"use strict";c.d(F,{Il:function(){return v},Ov:function(){return l}});var w=c(50959),v=w.createContext({});function l(){return w.useContext(v)}function R(){var D=useRouteData(),k=l();return{data:k.serverLoaderData[D.route.id]}}function A(){var D=useRouteData(),k=l();return{data:k.clientLoaderData[D.route.id]}}},26342:function(U,F,c){"use strict";c.d(F,{Q:function(){return l},X:function(){return v}});var w=c(50959),v=w.createContext(void 0);function l(){return w.useContext(v)}},84875:function(U,F){var c,w;(function(){"use strict";var v={}.hasOwnProperty,l="[native code]";function R(){for(var A=[],D=0;D<arguments.length;D++){var k=arguments[D];if(!!k){var B=typeof k;if(B==="string"||B==="number")A.push(k);else if(Array.isArray(k)){if(k.length){var z=R.apply(null,k);z&&A.push(z)}}else if(B==="object"){if(k.toString!==Object.prototype.toString&&!k.toString.toString().includes("[native code]")){A.push(k.toString());continue}for(var Z in k)v.call(k,Z)&&k[Z]&&A.push(Z)}}}return A.join(" ")}U.exports?(R.default=R,U.exports=R):(c=[],w=function(){return R}.apply(F,c),w!==void 0&&(U.exports=w))})()},14978:function(U,F,c){"use strict";Object.defineProperty(F,"__esModule",{value:!0}),F.getParameters=void 0;var w=c(1605);function v(R){return w.compressToBase64(R).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}function l(R){return v(JSON.stringify(R))}F.getParameters=l},71401:function(U,F,c){"use strict";var w;w=!0,F.Z=void 0;var v=c(14978);F.Z=v.getParameters},874:function(U,F,c){"use strict";var w=c(16935),v={"text/plain":"Text","text/html":"Url",default:"Text"},l="Copy to clipboard: #{key}, Enter";function R(D){var k=(/mac os x/i.test(navigator.userAgent)?"\u2318":"Ctrl")+"+C";return D.replace(/#{\s*key\s*}/g,k)}function A(D,k){var B,z,Z,W,Y,te,le=!1;k||(k={}),B=k.debug||!1;try{Z=w(),W=document.createRange(),Y=document.getSelection(),te=document.createElement("span"),te.textContent=D,te.ariaHidden="true",te.style.all="unset",te.style.position="fixed",te.style.top=0,te.style.clip="rect(0, 0, 0, 0)",te.style.whiteSpace="pre",te.style.webkitUserSelect="text",te.style.MozUserSelect="text",te.style.msUserSelect="text",te.style.userSelect="text",te.addEventListener("copy",function(de){if(de.stopPropagation(),k.format)if(de.preventDefault(),typeof de.clipboardData=="undefined"){B&&console.warn("unable to use e.clipboardData"),B&&console.warn("trying IE specific stuff"),window.clipboardData.clearData();var pe=v[k.format]||v.default;window.clipboardData.setData(pe,D)}else de.clipboardData.clearData(),de.clipboardData.setData(k.format,D);k.onCopy&&(de.preventDefault(),k.onCopy(de.clipboardData))}),document.body.appendChild(te),W.selectNodeContents(te),Y.addRange(W);var be=document.execCommand("copy");if(!be)throw new Error("copy command was unsuccessful");le=!0}catch(de){B&&console.error("unable to copy using execCommand: ",de),B&&console.warn("trying IE specific stuff");try{window.clipboardData.setData(k.format||"text",D),k.onCopy&&k.onCopy(window.clipboardData),le=!0}catch(pe){B&&console.error("unable to copy using clipboardData: ",pe),B&&console.error("falling back to prompt"),z=R("message"in k?k.message:l),window.prompt(z,D)}}finally{Y&&(typeof Y.removeRange=="function"?Y.removeRange(W):Y.removeAllRanges()),te&&document.body.removeChild(te),Z()}return le}U.exports=A},28613:function(U,F,c){var w=c(21751),v=c(9808),l=c(54423),R=w.TypeError;U.exports=function(A){if(v(A))return A;throw R(l(A)+" is not a function")}},14623:function(U,F,c){var w=c(21751),v=c(80586),l=c(54423),R=w.TypeError;U.exports=function(A){if(v(A))return A;throw R(l(A)+" is not a constructor")}},14772:function(U,F,c){var w=c(21751),v=c(9808),l=w.String,R=w.TypeError;U.exports=function(A){if(typeof A=="object"||v(A))return A;throw R("Can't set "+l(A)+" as a prototype")}},48300:function(U,F,c){var w=c(22353),v=c(60724),l=c(23251),R=w("unscopables"),A=Array.prototype;A[R]==null&&l.f(A,R,{configurable:!0,value:v(null)}),U.exports=function(D){A[R][D]=!0}},66572:function(U,F,c){var w=c(21751),v=c(61309),l=w.TypeError;U.exports=function(R,A){if(v(A,R))return R;throw l("Incorrect invocation")}},23611:function(U,F,c){var w=c(21751),v=c(62726),l=w.String,R=w.TypeError;U.exports=function(A){if(v(A))return A;throw R(l(A)+" is not an object")}},61413:function(U){U.exports=typeof ArrayBuffer!="undefined"&&typeof DataView!="undefined"},1811:function(U,F,c){var w=c(19844);U.exports=w(function(){if(typeof ArrayBuffer=="function"){var v=new ArrayBuffer(8);Object.isExtensible(v)&&Object.defineProperty(v,"a",{value:8})}})},80713:function(U,F,c){"use strict";var w=c(61413),v=c(30582),l=c(21751),R=c(9808),A=c(62726),D=c(16216),k=c(81987),B=c(54423),z=c(81312),Z=c(29448),W=c(23251).f,Y=c(61309),te=c(37993),le=c(960),be=c(22353),de=c(92924),pe=l.Int8Array,Oe=pe&&pe.prototype,xe=l.Uint8ClampedArray,Ve=xe&&xe.prototype,K=pe&&te(pe),ke=Oe&&te(Oe),we=Object.prototype,Me=l.TypeError,Xe=be("toStringTag"),Ke=de("TYPED_ARRAY_TAG"),At=de("TYPED_ARRAY_CONSTRUCTOR"),mt=w&&!!le&&k(l.opera)!=="Opera",ie=!1,oe,he,ye,se={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8},Ne={BigInt64Array:8,BigUint64Array:8},st=function($r){if(!A($r))return!1;var Cr=k($r);return Cr==="DataView"||D(se,Cr)||D(Ne,Cr)},Fe=function(xr){if(!A(xr))return!1;var $r=k(xr);return D(se,$r)||D(Ne,$r)},tt=function(xr){if(Fe(xr))return xr;throw Me("Target is not a typed array")},Wt=function(xr){if(R(xr)&&(!le||Y(K,xr)))return xr;throw Me(B(xr)+" is not a typed array constructor")},Pr=function(xr,$r,Cr,sn){if(!!v){if(Cr)for(var ot in se){var _r=l[ot];if(_r&&D(_r.prototype,xr))try{delete _r.prototype[xr]}catch(cr){try{_r.prototype[xr]=$r}catch(Vr){}}}(!ke[xr]||Cr)&&Z(ke,xr,Cr?$r:mt&&Oe[xr]||$r,sn)}},Qt=function(xr,$r,Cr){var sn,ot;if(!!v){if(le){if(Cr){for(sn in se)if(ot=l[sn],ot&&D(ot,xr))try{delete ot[xr]}catch(_r){}}if(!K[xr]||Cr)try{return Z(K,xr,Cr?$r:mt&&K[xr]||$r)}catch(_r){}else return}for(sn in se)ot=l[sn],ot&&(!ot[xr]||Cr)&&Z(ot,xr,$r)}};for(oe in se)he=l[oe],ye=he&&he.prototype,ye?z(ye,At,he):mt=!1;for(oe in Ne)he=l[oe],ye=he&&he.prototype,ye&&z(ye,At,he);if((!mt||!R(K)||K===Function.prototype)&&(K=function(){throw Me("Incorrect invocation")},mt))for(oe in se)l[oe]&&le(l[oe],K);if((!mt||!ke||ke===we)&&(ke=K.prototype,mt))for(oe in se)l[oe]&&le(l[oe].prototype,ke);if(mt&&te(Ve)!==ke&&le(Ve,ke),v&&!D(ke,Xe)){ie=!0,W(ke,Xe,{get:function(){return A(this)?this[Ke]:void 0}});for(oe in se)l[oe]&&z(l[oe],Ke,oe)}U.exports={NATIVE_ARRAY_BUFFER_VIEWS:mt,TYPED_ARRAY_CONSTRUCTOR:At,TYPED_ARRAY_TAG:ie&&Ke,aTypedArray:tt,aTypedArrayConstructor:Wt,exportTypedArrayMethod:Pr,exportTypedArrayStaticMethod:Qt,isView:st,isTypedArray:Fe,TypedArray:K,TypedArrayPrototype:ke}},22645:function(U,F,c){"use strict";var w=c(65976),v=c(27491),l=c(80586),R=c(50314),A=c(38470),D=c(63596),k=c(96099),B=c(51379),z=c(24251),Z=c(22353),W=c(82095),Y=c(36426).toArray,te=Z("asyncIterator"),le=B("Array").values;U.exports=function(de){var pe=this,Oe=arguments.length,xe=Oe>1?arguments[1]:void 0,Ve=Oe>2?arguments[2]:void 0;return new(z("Promise"))(function(K){var ke=v(de);xe!==void 0&&(xe=w(xe,Ve));var we=k(ke,te),Me=we?void 0:D(ke)||le,Xe=l(pe)?new pe:[],Ke=we?R(ke,we):new W(A(ke,Me));K(Y(Ke,xe,Xe))})}},34557:function(U,F,c){var w=c(2352);U.exports=function(v,l){for(var R=0,A=w(l),D=new v(A);A>R;)D[R]=l[R++];return D}},38836:function(U,F,c){var w=c(21751),v=c(65976),l=c(96236),R=c(84117),A=c(27491),D=c(33066),k=c(2352),B=c(60724),z=c(34557),Z=w.Array,W=l([].push);U.exports=function(Y,te,le,be){for(var de=A(Y),pe=R(de),Oe=v(te,le),xe=B(null),Ve=k(pe),K=0,ke,we,Me;Ve>K;K++)Me=pe[K],we=D(Oe(Me,K,de)),we in xe?W(xe[we],Me):xe[we]=[Me];if(be&&(ke=be(de),ke!==Z))for(we in xe)xe[we]=z(ke,xe[we]);return xe}},11032:function(U,F,c){var w=c(69345),v=c(82140),l=c(2352),R=function(A){return function(D,k,B){var z=w(D),Z=l(z),W=v(B,Z),Y;if(A&&k!=k){for(;Z>W;)if(Y=z[W++],Y!=Y)return!0}else for(;Z>W;W++)if((A||W in z)&&z[W]===k)return A||W||0;return!A&&-1}};U.exports={includes:R(!0),indexOf:R(!1)}},59622:function(U,F,c){var w=c(65976),v=c(84117),l=c(27491),R=c(2352),A=function(D){var k=D==1;return function(B,z,Z){for(var W=l(B),Y=v(W),te=w(z,Z),le=R(Y),be,de;le-- >0;)if(be=Y[le],de=te(be,le,W),de)switch(D){case 0:return be;case 1:return le}return k?-1:void 0}};U.exports={findLast:A(0),findLastIndex:A(1)}},58897:function(U,F,c){var w=c(65976),v=c(96236),l=c(84117),R=c(27491),A=c(2352),D=c(44465),k=v([].push),B=function(z){var Z=z==1,W=z==2,Y=z==3,te=z==4,le=z==6,be=z==7,de=z==5||le;return function(pe,Oe,xe,Ve){for(var K=R(pe),ke=l(K),we=w(Oe,xe),Me=A(ke),Xe=0,Ke=Ve||D,At=Z?Ke(pe,Me):W||be?Ke(pe,0):void 0,mt,ie;Me>Xe;Xe++)if((de||Xe in ke)&&(mt=ke[Xe],ie=we(mt,Xe,K),z))if(Z)At[Xe]=ie;else if(ie)switch(z){case 3:return!0;case 5:return mt;case 6:return Xe;case 2:k(At,mt)}else switch(z){case 4:return!1;case 7:k(At,mt)}return le?-1:Y||te?te:At}};U.exports={forEach:B(0),map:B(1),filter:B(2),some:B(3),every:B(4),find:B(5),findIndex:B(6),filterReject:B(7)}},28343:function(U,F,c){"use strict";var w=c(19844);U.exports=function(v,l){var R=[][v];return!!R&&w(function(){R.call(null,l||function(){return 1},1)})}},9794:function(U,F,c){var w=c(21751),v=c(28613),l=c(27491),R=c(84117),A=c(2352),D=w.TypeError,k=function(B){return function(z,Z,W,Y){v(Z);var te=l(z),le=R(te),be=A(te),de=B?be-1:0,pe=B?-1:1;if(W<2)for(;;){if(de in le){Y=le[de],de+=pe;break}if(de+=pe,B?de<0:be<=de)throw D("Reduce of empty array with no initial value")}for(;B?de>=0:be>de;de+=pe)de in le&&(Y=Z(Y,le[de],de,te));return Y}};U.exports={left:k(!1),right:k(!0)}},93556:function(U,F,c){var w=c(21751),v=c(82140),l=c(2352),R=c(65831),A=w.Array,D=Math.max;U.exports=function(k,B,z){for(var Z=l(k),W=v(B,Z),Y=v(z===void 0?Z:z,Z),te=A(D(Y-W,0)),le=0;W<Y;W++,le++)R(te,le,k[W]);return te.length=le,te}},79508:function(U,F,c){var w=c(96236);U.exports=w([].slice)},2593:function(U,F,c){var w=c(21751),v=c(27360),l=c(80586),R=c(62726),A=c(22353),D=A("species"),k=w.Array;U.exports=function(B){var z;return v(B)&&(z=B.constructor,l(z)&&(z===k||v(z.prototype))?z=void 0:R(z)&&(z=z[D],z===null&&(z=void 0))),z===void 0?k:z}},44465:function(U,F,c){var w=c(2593);U.exports=function(v,l){return new(w(v))(l===0?0:l)}},58170:function(U,F,c){var w=c(2352);U.exports=function(v,l){for(var R=w(v),A=new l(R),D=0;D<R;D++)A[D]=v[R-D-1];return A}},96817:function(U,F,c){var w=c(2352),v=c(82140),l=c(35617),R=TypeError,A=Math.max,D=Math.min,k=9007199254740991;U.exports=function(B,z,Z){var W=Z[0],Y=Z[1],te=w(B),le=v(W,te),be=Z.length,de=0,pe,Oe,xe,Ve;if(be===0?pe=Oe=0:be===1?(pe=0,Oe=te-le):(pe=be-2,Oe=D(A(l(Y),0),te-le)),xe=te+pe-Oe,xe>k)throw R("Maximum allowed length exceeded");for(Ve=new z(xe);de<le;de++)Ve[de]=B[de];for(;de<le+pe;de++)Ve[de]=Z[de-le+2];for(;de<xe;de++)Ve[de]=B[de+Oe-pe];return Ve}},74087:function(U,F,c){"use strict";var w=c(24251),v=c(96236),l=c(28613),R=c(2352),A=c(27491),D=c(44465),k=w("Map"),B=k.prototype,z=v(B.forEach),Z=v(B.has),W=v(B.set),Y=v([].push);U.exports=function(le){var be=A(this),de=R(be),pe=D(be,0),Oe=new k,xe=le!=null?l(le):function(we){return we},Ve,K,ke;for(Ve=0;Ve<de;Ve++)K=be[Ve],ke=xe(K),Z(Oe,ke)||W(Oe,ke,K);return z(Oe,function(we){Y(pe,we)}),pe}},59465:function(U,F,c){var w=c(21751),v=c(2352),l=c(35617),R=w.RangeError;U.exports=function(A,D,k,B){var z=v(A),Z=l(k),W=Z<0?z+Z:Z;if(W>=z||W<0)throw R("Incorrect index");for(var Y=new D(z),te=0;te<z;te++)Y[te]=te===W?B:A[te];return Y}},82095:function(U,F,c){"use strict";var w=c(63094),v=c(23611),l=c(60724),R=c(96099),A=c(8640),D=c(37925),k=c(24251),B=c(44069),z=k("Promise"),Z="AsyncFromSyncIterator",W=D.set,Y=D.getterFor(Z),te=function(be,de,pe){var Oe=be.done;z.resolve(be.value).then(function(xe){de({done:Oe,value:xe})},pe)},le=function(de){W(this,{type:Z,iterator:v(de),next:de.next})};le.prototype=A(l(B),{next:function(de){var pe=Y(this),Oe=!!arguments.length;return new z(function(xe,Ve){var K=v(w(pe.next,pe.iterator,Oe?[de]:[]));te(K,xe,Ve)})},return:function(be){var de=Y(this).iterator,pe=!!arguments.length;return new z(function(Oe,xe){var Ve=R(de,"return");if(Ve===void 0)return Oe({done:!0,value:be});var K=v(w(Ve,de,pe?[be]:[]));te(K,Oe,xe)})},throw:function(be){var de=Y(this).iterator,pe=!!arguments.length;return new z(function(Oe,xe){var Ve=R(de,"throw");if(Ve===void 0)return xe(be);var K=v(w(Ve,de,pe?[be]:[]));te(K,Oe,xe)})}}),U.exports=le},73248:function(U,F,c){"use strict";var w=c(707),v=c(28613),l=c(23611),R=c(60724),A=c(81312),D=c(8640),k=c(22353),B=c(37925),z=c(24251),Z=c(96099),W=c(44069),Y=z("Promise"),te="AsyncIteratorProxy",le=B.set,be=B.getterFor(te),de=k("toStringTag");U.exports=function(pe,Oe){var xe=function(K){K.type=te,K.next=v(K.iterator.next),K.done=!1,K.ignoreArgument=!Oe,le(this,K)};return xe.prototype=D(R(W),{next:function(K){var ke=this,we=!!arguments.length;return new Y(function(Me){var Xe=be(ke),Ke=we?[Xe.ignoreArgument?void 0:K]:Oe?[]:[void 0];Xe.ignoreArgument=!1,Me(Xe.done?{done:!0,value:void 0}:l(w(pe,Xe,Y,Ke)))})},return:function(Ve){var K=this;return new Y(function(ke,we){var Me=be(K),Xe=Me.iterator;Me.done=!0;var Ke=Z(Xe,"return");if(Ke===void 0)return ke({done:!0,value:Ve});Y.resolve(w(Ke,Xe,Ve)).then(function(At){l(At),ke({done:!0,value:Ve})},we)})},throw:function(Ve){var K=this;return new Y(function(ke,we){var Me=be(K),Xe=Me.iterator;Me.done=!0;var Ke=Z(Xe,"throw");if(Ke===void 0)return we(Ve);ke(w(Ke,Xe,Ve))})}}),Oe||A(xe.prototype,de,"Generator"),xe}},36426:function(U,F,c){"use strict";var w=c(21751),v=c(707),l=c(28613),R=c(23611),A=c(24251),D=c(96099),k=9007199254740991,B=w.TypeError,z=function(Z){var W=Z==0,Y=Z==1,te=Z==2,le=Z==3;return function(be,de,pe){R(be);var Oe=A("Promise"),xe=l(be.next),Ve=0,K=de!==void 0;return(K||!W)&&l(de),new Oe(function(ke,we){var Me=function(At,mt){try{var ie=D(be,"return");if(ie)return Oe.resolve(v(ie,be)).then(function(){At(mt)},function(oe){we(oe)})}catch(oe){return we(oe)}At(mt)},Xe=function(At){Me(we,At)},Ke=function(){try{if(W&&Ve>k&&K)throw B("The allowed number of iterations has been exceeded");Oe.resolve(R(v(xe,be))).then(function(At){try{if(R(At).done)W?(pe.length=Ve,ke(pe)):ke(le?!1:te||void 0);else{var mt=At.value;K?Oe.resolve(W?de(mt,Ve):de(mt)).then(function(ie){Y?Ke():te?ie?Ke():Me(ke,!1):W?(pe[Ve++]=ie,Ke()):ie?Me(ke,le||mt):Ke()},Xe):(pe[Ve++]=mt,Ke())}}catch(ie){Xe(ie)}},Xe)}catch(At){Xe(At)}};Ke()})}};U.exports={toArray:z(0),forEach:z(1),every:z(2),some:z(3),find:z(4)}},44069:function(U,F,c){var w=c(21751),v=c(62553),l=c(9808),R=c(60724),A=c(37993),D=c(29448),k=c(22353),B=c(55675),z="USE_FUNCTION_CONSTRUCTOR",Z=k("asyncIterator"),W=w.AsyncIterator,Y=v.AsyncIteratorPrototype,te,le;if(Y)te=Y;else if(l(W))te=W.prototype;else if(v[z]||w[z])try{le=A(A(A(Function("return async function*(){}()")()))),A(le)===Object.prototype&&(te=le)}catch(be){}te?B&&(te=R(te)):te={},l(te[Z])||D(te,Z,function(){return this}),U.exports=te},21769:function(U,F,c){var w=c(23611),v=c(59670);U.exports=function(l,R,A,D){try{return D?R(w(A)[0],A[1]):R(A)}catch(k){v(l,"throw",k)}}},52580:function(U,F,c){var w=c(22353),v=w("iterator"),l=!1;try{var R=0,A={next:function(){return{done:!!R++}},return:function(){l=!0}};A[v]=function(){return this},Array.from(A,function(){throw 2})}catch(D){}U.exports=function(D,k){if(!k&&!l)return!1;var B=!1;try{var z={};z[v]=function(){return{next:function(){return{done:B=!0}}}},D(z)}catch(Z){}return B}},32290:function(U,F,c){var w=c(96236),v=w({}.toString),l=w("".slice);U.exports=function(R){return l(v(R),8,-1)}},81987:function(U,F,c){var w=c(21751),v=c(8589),l=c(9808),R=c(32290),A=c(22353),D=A("toStringTag"),k=w.Object,B=R(function(){return arguments}())=="Arguments",z=function(Z,W){try{return Z[W]}catch(Y){}};U.exports=v?R:function(Z){var W,Y,te;return Z===void 0?"Undefined":Z===null?"Null":typeof(Y=z(W=k(Z),D))=="string"?Y:B?R(W):(te=R(W))=="Object"&&l(W.callee)?"Arguments":te}},17094:function(U,F,c){var w=c(96236),v=Error,l=w("".replace),R=function(k){return String(v(k).stack)}("zxcasd"),A=/\n\s*at [^:]*:[^\n]*/,D=A.test(R);U.exports=function(k,B){if(D&&typeof k=="string"&&!v.prepareStackTrace)for(;B--;)k=l(k,A,"");return k}},95582:function(U,F,c){"use strict";var w=c(707),v=c(28613),l=c(23611);U.exports=function(){for(var A=l(this),D=v(A.add),k=0,B=arguments.length;k<B;k++)w(D,A,arguments[k]);return A}},46828:function(U,F,c){"use strict";var w=c(707),v=c(28613),l=c(23611);U.exports=function(){for(var A=l(this),D=v(A.delete),k=!0,B,z=0,Z=arguments.length;z<Z;z++)B=w(D,A,arguments[z]),k=k&&B;return!!k}},8600:function(U,F,c){"use strict";var w=c(65976),v=c(707),l=c(28613),R=c(14623),A=c(52132),D=[].push;U.exports=function(B){var z=arguments.length,Z=z>1?arguments[1]:void 0,W,Y,te,le;return R(this),W=Z!==void 0,W&&l(Z),B==null?new this:(Y=[],W?(te=0,le=w(Z,z>2?arguments[2]:void 0),A(B,function(be){v(D,Y,le(be,te++))})):A(B,D,{that:Y}),new this(Y))}},34663:function(U,F,c){"use strict";var w=c(79508);U.exports=function(){return new this(w(arguments))}},72010:function(U,F,c){"use strict";var w=c(23251).f,v=c(60724),l=c(8640),R=c(65976),A=c(66572),D=c(52132),k=c(66848),B=c(82991),z=c(30582),Z=c(92767).fastKey,W=c(37925),Y=W.set,te=W.getterFor;U.exports={getConstructor:function(le,be,de,pe){var Oe=le(function(we,Me){A(we,xe),Y(we,{type:be,index:v(null),first:void 0,last:void 0,size:0}),z||(we.size=0),Me!=null&&D(Me,we[pe],{that:we,AS_ENTRIES:de})}),xe=Oe.prototype,Ve=te(be),K=function(we,Me,Xe){var Ke=Ve(we),At=ke(we,Me),mt,ie;return At?At.value=Xe:(Ke.last=At={index:ie=Z(Me,!0),key:Me,value:Xe,previous:mt=Ke.last,next:void 0,removed:!1},Ke.first||(Ke.first=At),mt&&(mt.next=At),z?Ke.size++:we.size++,ie!=="F"&&(Ke.index[ie]=At)),we},ke=function(we,Me){var Xe=Ve(we),Ke=Z(Me),At;if(Ke!=="F")return Xe.index[Ke];for(At=Xe.first;At;At=At.next)if(At.key==Me)return At};return l(xe,{clear:function(){for(var Me=this,Xe=Ve(Me),Ke=Xe.index,At=Xe.first;At;)At.removed=!0,At.previous&&(At.previous=At.previous.next=void 0),delete Ke[At.index],At=At.next;Xe.first=Xe.last=void 0,z?Xe.size=0:Me.size=0},delete:function(we){var Me=this,Xe=Ve(Me),Ke=ke(Me,we);if(Ke){var At=Ke.next,mt=Ke.previous;delete Xe.index[Ke.index],Ke.removed=!0,mt&&(mt.next=At),At&&(At.previous=mt),Xe.first==Ke&&(Xe.first=At),Xe.last==Ke&&(Xe.last=mt),z?Xe.size--:Me.size--}return!!Ke},forEach:function(Me){for(var Xe=Ve(this),Ke=R(Me,arguments.length>1?arguments[1]:void 0),At;At=At?At.next:Xe.first;)for(Ke(At.value,At.key,this);At&&At.removed;)At=At.previous},has:function(Me){return!!ke(this,Me)}}),l(xe,de?{get:function(Me){var Xe=ke(this,Me);return Xe&&Xe.value},set:function(Me,Xe){return K(this,Me===0?0:Me,Xe)}}:{add:function(Me){return K(this,Me=Me===0?0:Me,Me)}}),z&&w(xe,"size",{get:function(){return Ve(this).size}}),Oe},setStrong:function(le,be,de){var pe=be+" Iterator",Oe=te(be),xe=te(pe);k(le,be,function(Ve,K){Y(this,{type:pe,target:Ve,state:Oe(Ve),kind:K,last:void 0})},function(){for(var Ve=xe(this),K=Ve.kind,ke=Ve.last;ke&&ke.removed;)ke=ke.previous;return!Ve.target||!(Ve.last=ke=ke?ke.next:Ve.state.first)?(Ve.target=void 0,{value:void 0,done:!0}):K=="keys"?{value:ke.key,done:!1}:K=="values"?{value:ke.value,done:!1}:{value:[ke.key,ke.value],done:!1}},de?"entries":"values",!de,!0),B(be)}}},3623:function(U,F,c){"use strict";var w=c(96236),v=c(8640),l=c(92767).getWeakData,R=c(23611),A=c(62726),D=c(66572),k=c(52132),B=c(58897),z=c(16216),Z=c(37925),W=Z.set,Y=Z.getterFor,te=B.find,le=B.findIndex,be=w([].splice),de=0,pe=function(Ve){return Ve.frozen||(Ve.frozen=new Oe)},Oe=function(){this.entries=[]},xe=function(Ve,K){return te(Ve.entries,function(ke){return ke[0]===K})};Oe.prototype={get:function(Ve){var K=xe(this,Ve);if(K)return K[1]},has:function(Ve){return!!xe(this,Ve)},set:function(Ve,K){var ke=xe(this,Ve);ke?ke[1]=K:this.entries.push([Ve,K])},delete:function(Ve){var K=le(this.entries,function(ke){return ke[0]===Ve});return~K&&be(this.entries,K,1),!!~K}},U.exports={getConstructor:function(Ve,K,ke,we){var Me=Ve(function(mt,ie){D(mt,Xe),W(mt,{type:K,id:de++,frozen:void 0}),ie!=null&&k(ie,mt[we],{that:mt,AS_ENTRIES:ke})}),Xe=Me.prototype,Ke=Y(K),At=function(mt,ie,oe){var he=Ke(mt),ye=l(R(ie),!0);return ye===!0?pe(he).set(ie,oe):ye[he.id]=oe,mt};return v(Xe,{delete:function(mt){var ie=Ke(this);if(!A(mt))return!1;var oe=l(mt);return oe===!0?pe(ie).delete(mt):oe&&z(oe,ie.id)&&delete oe[ie.id]},has:function(ie){var oe=Ke(this);if(!A(ie))return!1;var he=l(ie);return he===!0?pe(oe).has(ie):he&&z(he,oe.id)}}),v(Xe,ke?{get:function(ie){var oe=Ke(this);if(A(ie)){var he=l(ie);return he===!0?pe(oe).get(ie):he?he[oe.id]:void 0}},set:function(ie,oe){return At(this,ie,oe)}}:{add:function(ie){return At(this,ie,!0)}}),Me}}},81720:function(U,F,c){"use strict";var w=c(99010),v=c(21751),l=c(96236),R=c(92035),A=c(29448),D=c(92767),k=c(52132),B=c(66572),z=c(9808),Z=c(62726),W=c(19844),Y=c(52580),te=c(34623),le=c(77290);U.exports=function(be,de,pe){var Oe=be.indexOf("Map")!==-1,xe=be.indexOf("Weak")!==-1,Ve=Oe?"set":"add",K=v[be],ke=K&&K.prototype,we=K,Me={},Xe=function(ye){var se=l(ke[ye]);A(ke,ye,ye=="add"?function(st){return se(this,st===0?0:st),this}:ye=="delete"?function(Ne){return xe&&!Z(Ne)?!1:se(this,Ne===0?0:Ne)}:ye=="get"?function(st){return xe&&!Z(st)?void 0:se(this,st===0?0:st)}:ye=="has"?function(st){return xe&&!Z(st)?!1:se(this,st===0?0:st)}:function(st,Fe){return se(this,st===0?0:st,Fe),this})},Ke=R(be,!z(K)||!(xe||ke.forEach&&!W(function(){new K().entries().next()})));if(Ke)we=pe.getConstructor(de,be,Oe,Ve),D.enable();else if(R(be,!0)){var At=new we,mt=At[Ve](xe?{}:-0,1)!=At,ie=W(function(){At.has(1)}),oe=Y(function(ye){new K(ye)}),he=!xe&&W(function(){for(var ye=new K,se=5;se--;)ye[Ve](se,se);return!ye.has(-0)});oe||(we=de(function(ye,se){B(ye,ke);var Ne=le(new K,ye,we);return se!=null&&k(se,Ne[Ve],{that:Ne,AS_ENTRIES:Oe}),Ne}),we.prototype=ke,ke.constructor=we),(ie||he)&&(Xe("delete"),Xe("has"),Oe&&Xe("get")),(he||mt)&&Xe(Ve),xe&&ke.clear&&delete ke.clear}return Me[be]=we,w({global:!0,forced:we!=K},Me),te(we,be),xe||pe.setStrong(we,be,Oe),we}},5044:function(U,F,c){c(70843),c(19551);var w=c(21751),v=c(24251),l=c(60724),R=c(62726),A=w.Object,D=w.TypeError,k=v("Map"),B=v("WeakMap"),z=function(){this.object=null,this.symbol=null,this.primitives=null,this.objectsByIndex=l(null)};z.prototype.get=function(W,Y){return this[W]||(this[W]=Y())},z.prototype.next=function(W,Y,te){var le=te?this.objectsByIndex[W]||(this.objectsByIndex[W]=new B):this.primitives||(this.primitives=new k),be=le.get(Y);return be||le.set(Y,be=new z),be};var Z=new z;U.exports=function(){var W=Z,Y=arguments.length,te,le;for(te=0;te<Y;te++)R(le=arguments[te])&&(W=W.next(te,le,!0));if(this===A&&W===Z)throw D("Composite keys must contain a non-primitive component");for(te=0;te<Y;te++)R(le=arguments[te])||(W=W.next(te,le,!1));return W}},11517:function(U,F,c){var w=c(16216),v=c(33996),l=c(55025),R=c(23251);U.exports=function(A,D,k){for(var B=v(D),z=R.f,Z=l.f,W=0;W<B.length;W++){var Y=B[W];!w(A,Y)&&!(k&&w(k,Y))&&z(A,Y,Z(D,Y))}}},29097:function(U,F,c){var w=c(19844);U.exports=!w(function(){function v(){}return v.prototype.constructor=null,Object.getPrototypeOf(new v)!==v.prototype})},25257:function(U,F,c){"use strict";var w=c(63316).IteratorPrototype,v=c(60724),l=c(38830),R=c(34623),A=c(51064),D=function(){return this};U.exports=function(k,B,z,Z){var W=B+" Iterator";return k.prototype=v(w,{next:l(+!Z,z)}),R(k,W,!1,!0),A[W]=D,k}},81312:function(U,F,c){var w=c(30582),v=c(23251),l=c(38830);U.exports=w?function(R,A,D){return v.f(R,A,l(1,D))}:function(R,A,D){return R[A]=D,R}},38830:function(U){U.exports=function(F,c){return{enumerable:!(F&1),configurable:!(F&2),writable:!(F&4),value:c}}},65831:function(U,F,c){"use strict";var w=c(33066),v=c(23251),l=c(38830);U.exports=function(R,A,D){var k=w(A);k in R?v.f(R,k,l(0,D)):R[k]=D}},29217:function(U,F,c){var w=c(36680),v=c(23251);U.exports=function(l,R,A){return A.get&&w(A.get,R,{getter:!0}),A.set&&w(A.set,R,{setter:!0}),v.f(l,R,A)}},29448:function(U,F,c){var w=c(21751),v=c(9808),l=c(81312),R=c(36680),A=c(45070);U.exports=function(D,k,B,z){var Z=z?!!z.unsafe:!1,W=z?!!z.enumerable:!1,Y=z?!!z.noTargetGet:!1,te=z&&z.name!==void 0?z.name:k;return v(B)&&R(B,te,z),D===w?(W?D[k]=B:A(k,B),D):(Z?!Y&&D[k]&&(W=!0):delete D[k],W?D[k]=B:l(D,k,B),D)}},8640:function(U,F,c){var w=c(29448);U.exports=function(v,l,R){for(var A in l)w(v,A,l[A],R);return v}},66848:function(U,F,c){"use strict";var w=c(99010),v=c(707),l=c(55675),R=c(38960),A=c(9808),D=c(25257),k=c(37993),B=c(960),z=c(34623),Z=c(81312),W=c(29448),Y=c(22353),te=c(51064),le=c(63316),be=R.PROPER,de=R.CONFIGURABLE,pe=le.IteratorPrototype,Oe=le.BUGGY_SAFARI_ITERATORS,xe=Y("iterator"),Ve="keys",K="values",ke="entries",we=function(){return this};U.exports=function(Me,Xe,Ke,At,mt,ie,oe){D(Ke,Xe,At);var he=function(xr){if(xr===mt&&Fe)return Fe;if(!Oe&&xr in Ne)return Ne[xr];switch(xr){case Ve:return function(){return new Ke(this,xr)};case K:return function(){return new Ke(this,xr)};case ke:return function(){return new Ke(this,xr)}}return function(){return new Ke(this)}},ye=Xe+" Iterator",se=!1,Ne=Me.prototype,st=Ne[xe]||Ne["@@iterator"]||mt&&Ne[mt],Fe=!Oe&&st||he(mt),tt=Xe=="Array"&&Ne.entries||st,Wt,Pr,Qt;if(tt&&(Wt=k(tt.call(new Me)),Wt!==Object.prototype&&Wt.next&&(!l&&k(Wt)!==pe&&(B?B(Wt,pe):A(Wt[xe])||W(Wt,xe,we)),z(Wt,ye,!0,!0),l&&(te[ye]=we))),be&&mt==K&&st&&st.name!==K&&(!l&&de?Z(Ne,"name",K):(se=!0,Fe=function(){return v(st,this)})),mt)if(Pr={values:he(K),keys:ie?Fe:he(Ve),entries:he(ke)},oe)for(Qt in Pr)(Oe||se||!(Qt in Ne))&&W(Ne,Qt,Pr[Qt]);else w({target:Xe,proto:!0,forced:Oe||se},Pr);return(!l||oe)&&Ne[xe]!==Fe&&W(Ne,xe,Fe,{name:mt}),te[Xe]=Fe,Pr}},54212:function(U,F,c){var w=c(90761),v=c(16216),l=c(85132),R=c(23251).f;U.exports=function(A){var D=w.Symbol||(w.Symbol={});v(D,A)||R(D,A,{value:l.f(A)})}},30582:function(U,F,c){var w=c(19844);U.exports=!w(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!=7})},66675:function(U,F,c){var w=c(21751),v=c(62726),l=w.document,R=v(l)&&v(l.createElement);U.exports=function(A){return R?l.createElement(A):{}}},81597:function(U){U.exports={IndexSizeError:{s:"INDEX_SIZE_ERR",c:1,m:1},DOMStringSizeError:{s:"DOMSTRING_SIZE_ERR",c:2,m:0},HierarchyRequestError:{s:"HIERARCHY_REQUEST_ERR",c:3,m:1},WrongDocumentError:{s:"WRONG_DOCUMENT_ERR",c:4,m:1},InvalidCharacterError:{s:"INVALID_CHARACTER_ERR",c:5,m:1},NoDataAllowedError:{s:"NO_DATA_ALLOWED_ERR",c:6,m:0},NoModificationAllowedError:{s:"NO_MODIFICATION_ALLOWED_ERR",c:7,m:1},NotFoundError:{s:"NOT_FOUND_ERR",c:8,m:1},NotSupportedError:{s:"NOT_SUPPORTED_ERR",c:9,m:1},InUseAttributeError:{s:"INUSE_ATTRIBUTE_ERR",c:10,m:1},InvalidStateError:{s:"INVALID_STATE_ERR",c:11,m:1},SyntaxError:{s:"SYNTAX_ERR",c:12,m:1},InvalidModificationError:{s:"INVALID_MODIFICATION_ERR",c:13,m:1},NamespaceError:{s:"NAMESPACE_ERR",c:14,m:1},InvalidAccessError:{s:"INVALID_ACCESS_ERR",c:15,m:1},ValidationError:{s:"VALIDATION_ERR",c:16,m:0},TypeMismatchError:{s:"TYPE_MISMATCH_ERR",c:17,m:1},SecurityError:{s:"SECURITY_ERR",c:18,m:1},NetworkError:{s:"NETWORK_ERR",c:19,m:1},AbortError:{s:"ABORT_ERR",c:20,m:1},URLMismatchError:{s:"URL_MISMATCH_ERR",c:21,m:1},QuotaExceededError:{s:"QUOTA_EXCEEDED_ERR",c:22,m:1},TimeoutError:{s:"TIMEOUT_ERR",c:23,m:1},InvalidNodeTypeError:{s:"INVALID_NODE_TYPE_ERR",c:24,m:1},DataCloneError:{s:"DATA_CLONE_ERR",c:25,m:1}}},12017:function(U,F,c){var w=c(14626);U.exports=/(?:ipad|iphone|ipod).*applewebkit/i.test(w)},65409:function(U,F,c){var w=c(32290),v=c(21751);U.exports=w(v.process)=="process"},14626:function(U,F,c){var w=c(24251);U.exports=w("navigator","userAgent")||""},27268:function(U,F,c){var w=c(21751),v=c(14626),l=w.process,R=w.Deno,A=l&&l.versions||R&&R.version,D=A&&A.v8,k,B;D&&(k=D.split("."),B=k[0]>0&&k[0]<4?1:+(k[0]+k[1])),!B&&v&&(k=v.match(/Edge\/(\d+)/),(!k||k[1]>=74)&&(k=v.match(/Chrome\/(\d+)/),k&&(B=+k[1]))),U.exports=B},51379:function(U,F,c){var w=c(21751);U.exports=function(v){return w[v].prototype}},19574:function(U){U.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},25381:function(U,F,c){var w=c(19844),v=c(38830);U.exports=!w(function(){var l=Error("a");return"stack"in l?(Object.defineProperty(l,"stack",v(1,7)),l.stack!==7):!0})},99010:function(U,F,c){var w=c(21751),v=c(55025).f,l=c(81312),R=c(29448),A=c(45070),D=c(11517),k=c(92035);U.exports=function(B,z){var Z=B.target,W=B.global,Y=B.stat,te,le,be,de,pe,Oe;if(W?le=w:Y?le=w[Z]||A(Z,{}):le=(w[Z]||{}).prototype,le)for(be in z){if(pe=z[be],B.noTargetGet?(Oe=v(le,be),de=Oe&&Oe.value):de=le[be],te=k(W?be:Z+(Y?".":"#")+be,B.forced),!te&&de!==void 0){if(typeof pe==typeof de)continue;D(pe,de)}(B.sham||de&&de.sham)&&l(pe,"sham",!0),R(le,be,pe,B)}}},19844:function(U){U.exports=function(F){try{return!!F()}catch(c){return!0}}},93477:function(U,F,c){var w=c(19844);U.exports=!w(function(){return Object.isExtensible(Object.preventExtensions({}))})},63094:function(U,F,c){var w=c(78613),v=Function.prototype,l=v.apply,R=v.call;U.exports=typeof Reflect=="object"&&Reflect.apply||(w?R.bind(l):function(){return R.apply(l,arguments)})},65976:function(U,F,c){var w=c(96236),v=c(28613),l=c(78613),R=w(w.bind);U.exports=function(A,D){return v(A),D===void 0?A:l?R(A,D):function(){return A.apply(D,arguments)}}},78613:function(U,F,c){var w=c(19844);U.exports=!w(function(){var v=function(){}.bind();return typeof v!="function"||v.hasOwnProperty("prototype")})},707:function(U,F,c){var w=c(78613),v=Function.prototype.call;U.exports=w?v.bind(v):function(){return v.apply(v,arguments)}},38960:function(U,F,c){var w=c(30582),v=c(16216),l=Function.prototype,R=w&&Object.getOwnPropertyDescriptor,A=v(l,"name"),D=A&&function(){}.name==="something",k=A&&(!w||w&&R(l,"name").configurable);U.exports={EXISTS:A,PROPER:D,CONFIGURABLE:k}},96236:function(U,F,c){var w=c(78613),v=Function.prototype,l=v.bind,R=v.call,A=w&&l.bind(R,R);U.exports=w?function(D){return D&&A(D)}:function(D){return D&&function(){return R.apply(D,arguments)}}},50314:function(U,F,c){var w=c(707),v=c(82095),l=c(23611),R=c(38470),A=c(96099),D=c(22353),k=D("asyncIterator");U.exports=function(B,z){var Z=arguments.length<2?A(B,k):z;return Z?l(w(Z,B)):new v(R(B))}},24251:function(U,F,c){var w=c(21751),v=c(9808),l=function(R){return v(R)?R:void 0};U.exports=function(R,A){return arguments.length<2?l(w[R]):w[R]&&w[R][A]}},63596:function(U,F,c){var w=c(81987),v=c(96099),l=c(51064),R=c(22353),A=R("iterator");U.exports=function(D){if(D!=null)return v(D,A)||v(D,"@@iterator")||l[w(D)]}},38470:function(U,F,c){var w=c(21751),v=c(707),l=c(28613),R=c(23611),A=c(54423),D=c(63596),k=w.TypeError;U.exports=function(B,z){var Z=arguments.length<2?D(B):z;if(l(Z))return R(v(Z,B));throw k(A(B)+" is not iterable")}},1080:function(U,F,c){var w=c(707);U.exports=function(v){return w(Map.prototype.entries,v)}},96099:function(U,F,c){var w=c(28613);U.exports=function(v,l){var R=v[l];return R==null?void 0:w(R)}},13795:function(U,F,c){var w=c(707);U.exports=function(v){return w(Set.prototype.values,v)}},45435:function(U,F,c){var w=c(96236),v=c(27491),l=Math.floor,R=w("".charAt),A=w("".replace),D=w("".slice),k=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,B=/\$([$&'`]|\d{1,2})/g;U.exports=function(z,Z,W,Y,te,le){var be=W+z.length,de=Y.length,pe=B;return te!==void 0&&(te=v(te),pe=k),A(le,pe,function(Oe,xe){var Ve;switch(R(xe,0)){case"$":return"$";case"&":return z;case"`":return D(Z,0,W);case"'":return D(Z,be);case"<":Ve=te[D(xe,1,-1)];break;default:var K=+xe;if(K===0)return Oe;if(K>de){var ke=l(K/10);return ke===0?Oe:ke<=de?Y[ke-1]===void 0?R(xe,1):Y[ke-1]+R(xe,1):Oe}Ve=Y[K-1]}return Ve===void 0?"":Ve})}},21751:function(U,F,c){var w=function(v){return v&&v.Math==Math&&v};U.exports=w(typeof globalThis=="object"&&globalThis)||w(typeof window=="object"&&window)||w(typeof self=="object"&&self)||w(typeof c.g=="object"&&c.g)||function(){return this}()||Function("return this")()},16216:function(U,F,c){var w=c(96236),v=c(27491),l=w({}.hasOwnProperty);U.exports=Object.hasOwn||function(A,D){return l(v(A),D)}},9443:function(U){U.exports={}},23433:function(U,F,c){var w=c(21751);U.exports=function(v,l){var R=w.console;R&&R.error&&(arguments.length==1?R.error(v):R.error(v,l))}},25588:function(U,F,c){var w=c(24251);U.exports=w("document","documentElement")},84981:function(U,F,c){var w=c(30582),v=c(19844),l=c(66675);U.exports=!w&&!v(function(){return Object.defineProperty(l("div"),"a",{get:function(){return 7}}).a!=7})},84117:function(U,F,c){var w=c(21751),v=c(96236),l=c(19844),R=c(32290),A=w.Object,D=v("".split);U.exports=l(function(){return!A("z").propertyIsEnumerable(0)})?function(k){return R(k)=="String"?D(k,""):A(k)}:A},77290:function(U,F,c){var w=c(9808),v=c(62726),l=c(960);U.exports=function(R,A,D){var k,B;return l&&w(k=A.constructor)&&k!==D&&v(B=k.prototype)&&B!==D.prototype&&l(R,B),R}},7382:function(U,F,c){var w=c(96236),v=c(9808),l=c(62553),R=w(Function.toString);v(l.inspectSource)||(l.inspectSource=function(A){return R(A)}),U.exports=l.inspectSource},78082:function(U,F,c){var w=c(62726),v=c(81312);U.exports=function(l,R){w(R)&&"cause"in R&&v(l,"cause",R.cause)}},92767:function(U,F,c){var w=c(99010),v=c(96236),l=c(9443),R=c(62726),A=c(16216),D=c(23251).f,k=c(37856),B=c(55855),z=c(87331),Z=c(92924),W=c(93477),Y=!1,te=Z("meta"),le=0,be=function(K){D(K,te,{value:{objectID:"O"+le++,weakData:{}}})},de=function(K,ke){if(!R(K))return typeof K=="symbol"?K:(typeof K=="string"?"S":"P")+K;if(!A(K,te)){if(!z(K))return"F";if(!ke)return"E";be(K)}return K[te].objectID},pe=function(K,ke){if(!A(K,te)){if(!z(K))return!0;if(!ke)return!1;be(K)}return K[te].weakData},Oe=function(K){return W&&Y&&z(K)&&!A(K,te)&&be(K),K},xe=function(){Ve.enable=function(){},Y=!0;var K=k.f,ke=v([].splice),we={};we[te]=1,K(we).length&&(k.f=function(Me){for(var Xe=K(Me),Ke=0,At=Xe.length;Ke<At;Ke++)if(Xe[Ke]===te){ke(Xe,Ke,1);break}return Xe},w({target:"Object",stat:!0,forced:!0},{getOwnPropertyNames:B.f}))},Ve=U.exports={enable:xe,fastKey:de,getWeakData:pe,onFreeze:Oe};l[te]=!0},37925:function(U,F,c){var w=c(66391),v=c(21751),l=c(96236),R=c(62726),A=c(81312),D=c(16216),k=c(62553),B=c(34402),z=c(9443),Z="Object already initialized",W=v.TypeError,Y=v.WeakMap,te,le,be,de=function(we){return be(we)?le(we):te(we,{})},pe=function(we){return function(Me){var Xe;if(!R(Me)||(Xe=le(Me)).type!==we)throw W("Incompatible receiver, "+we+" required");return Xe}};if(w||k.state){var Oe=k.state||(k.state=new Y),xe=l(Oe.get),Ve=l(Oe.has),K=l(Oe.set);te=function(we,Me){if(Ve(Oe,we))throw new W(Z);return Me.facade=we,K(Oe,we,Me),Me},le=function(we){return xe(Oe,we)||{}},be=function(we){return Ve(Oe,we)}}else{var ke=B("state");z[ke]=!0,te=function(we,Me){if(D(we,ke))throw new W(Z);return Me.facade=we,A(we,ke,Me),Me},le=function(we){return D(we,ke)?we[ke]:{}},be=function(we){return D(we,ke)}}U.exports={set:te,get:le,has:be,enforce:de,getterFor:pe}},56197:function(U,F,c){var w=c(22353),v=c(51064),l=w("iterator"),R=Array.prototype;U.exports=function(A){return A!==void 0&&(v.Array===A||R[l]===A)}},27360:function(U,F,c){var w=c(32290);U.exports=Array.isArray||function(l){return w(l)=="Array"}},9808:function(U){U.exports=function(F){return typeof F=="function"}},80586:function(U,F,c){var w=c(96236),v=c(19844),l=c(9808),R=c(81987),A=c(24251),D=c(7382),k=function(){},B=[],z=A("Reflect","construct"),Z=/^\s*(?:class|function)\b/,W=w(Z.exec),Y=!Z.exec(k),te=function(de){if(!l(de))return!1;try{return z(k,B,de),!0}catch(pe){return!1}},le=function(de){if(!l(de))return!1;switch(R(de)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return Y||!!W(Z,D(de))}catch(pe){return!0}};le.sham=!0,U.exports=!z||v(function(){var be;return te(te.call)||!te(Object)||!te(function(){be=!0})||be})?le:te},92035:function(U,F,c){var w=c(19844),v=c(9808),l=/#|\.prototype\./,R=function(z,Z){var W=D[A(z)];return W==B?!0:W==k?!1:v(Z)?w(Z):!!Z},A=R.normalize=function(z){return String(z).replace(l,".").toLowerCase()},D=R.data={},k=R.NATIVE="N",B=R.POLYFILL="P";U.exports=R},62726:function(U,F,c){var w=c(9808);U.exports=function(v){return typeof v=="object"?v!==null:w(v)}},55675:function(U){U.exports=!1},28363:function(U,F,c){var w=c(62726),v=c(32290),l=c(22353),R=l("match");U.exports=function(A){var D;return w(A)&&((D=A[R])!==void 0?!!D:v(A)=="RegExp")}},85961:function(U,F,c){var w=c(21751),v=c(24251),l=c(9808),R=c(61309),A=c(36834),D=w.Object;U.exports=A?function(k){return typeof k=="symbol"}:function(k){var B=v("Symbol");return l(B)&&R(B.prototype,D(k))}},52132:function(U,F,c){var w=c(21751),v=c(65976),l=c(707),R=c(23611),A=c(54423),D=c(56197),k=c(2352),B=c(61309),z=c(38470),Z=c(63596),W=c(59670),Y=w.TypeError,te=function(be,de){this.stopped=be,this.result=de},le=te.prototype;U.exports=function(be,de,pe){var Oe=pe&&pe.that,xe=!!(pe&&pe.AS_ENTRIES),Ve=!!(pe&&pe.IS_ITERATOR),K=!!(pe&&pe.INTERRUPTED),ke=v(de,Oe),we,Me,Xe,Ke,At,mt,ie,oe=function(ye){return we&&W(we,"normal",ye),new te(!0,ye)},he=function(ye){return xe?(R(ye),K?ke(ye[0],ye[1],oe):ke(ye[0],ye[1])):K?ke(ye,oe):ke(ye)};if(Ve)we=be;else{if(Me=Z(be),!Me)throw Y(A(be)+" is not iterable");if(D(Me)){for(Xe=0,Ke=k(be);Ke>Xe;Xe++)if(At=he(be[Xe]),At&&B(le,At))return At;return new te(!1)}we=z(be,Me)}for(mt=we.next;!(ie=l(mt,we)).done;){try{At=he(ie.value)}catch(ye){W(we,"throw",ye)}if(typeof At=="object"&&At&&B(le,At))return At}return new te(!1)}},59670:function(U,F,c){var w=c(707),v=c(23611),l=c(96099);U.exports=function(R,A,D){var k,B;v(R);try{if(k=l(R,"return"),!k){if(A==="throw")throw D;return D}k=w(k,R)}catch(z){B=!0,k=z}if(A==="throw")throw D;if(B)throw k;return v(k),D}},92178:function(U,F,c){"use strict";var w=c(707),v=c(28613),l=c(23611),R=c(60724),A=c(81312),D=c(8640),k=c(22353),B=c(37925),z=c(96099),Z=c(63316).IteratorPrototype,W="IteratorProxy",Y=B.set,te=B.getterFor(W),le=k("toStringTag");U.exports=function(be,de){var pe=function(xe){xe.type=W,xe.next=v(xe.iterator.next),xe.done=!1,xe.ignoreArg=!de,Y(this,xe)};return pe.prototype=D(R(Z),{next:function(xe){var Ve=te(this),K=arguments.length?[Ve.ignoreArg?void 0:xe]:de?[]:[void 0];Ve.ignoreArg=!1;var ke=Ve.done?void 0:w(be,Ve,K);return{done:Ve.done,value:ke}},return:function(Oe){var xe=te(this),Ve=xe.iterator;xe.done=!0;var K=z(Ve,"return");return{done:!0,value:K?l(w(K,Ve,Oe)).value:Oe}},throw:function(Oe){var xe=te(this),Ve=xe.iterator;xe.done=!0;var K=z(Ve,"throw");if(K)return w(K,Ve,Oe);throw Oe}}),de||A(pe.prototype,le,"Generator"),pe}},63316:function(U,F,c){"use strict";var w=c(19844),v=c(9808),l=c(60724),R=c(37993),A=c(29448),D=c(22353),k=c(55675),B=D("iterator"),z=!1,Z,W,Y;[].keys&&(Y=[].keys(),"next"in Y?(W=R(R(Y)),W!==Object.prototype&&(Z=W)):z=!0);var te=Z==null||w(function(){var le={};return Z[B].call(le)!==le});te?Z={}:k&&(Z=l(Z)),v(Z[B])||A(Z,B,function(){return this}),U.exports={IteratorPrototype:Z,BUGGY_SAFARI_ITERATORS:z}},51064:function(U){U.exports={}},2352:function(U,F,c){var w=c(58907);U.exports=function(v){return w(v.length)}},36680:function(U,F,c){var w=c(19844),v=c(9808),l=c(16216),R=c(23251).f,A=c(38960).CONFIGURABLE,D=c(7382),k=c(37925),B=k.enforce,z=k.get,Z=!w(function(){return R(function(){},"length",{value:8}).length!==8}),W=String(String).split("String"),Y=U.exports=function(te,le,be){String(le).slice(0,7)==="Symbol("&&(le="["+String(le).replace(/^Symbol\(([^)]*)\)/,"$1")+"]"),be&&be.getter&&(le="get "+le),be&&be.setter&&(le="set "+le),(!l(te,"name")||A&&te.name!==le)&&R(te,"name",{value:le,configurable:!0}),Z&&be&&l(be,"arity")&&te.length!==be.arity&&R(te,"length",{value:be.arity});var de=B(te);return l(de,"source")||(de.source=W.join(typeof le=="string"?le:"")),te};Function.prototype.toString=Y(function(){return v(this)&&z(this).source||D(this)},"toString")},37988:function(U,F,c){"use strict";var w=c(707),v=c(28613),l=c(23611);U.exports=function(A,D){var k=l(this),B=v(k.get),z=v(k.has),Z=v(k.set),W=w(z,k,A)&&"update"in D?D.update(w(B,k,A),A,k):D.insert(A,k);return w(Z,k,A,W),W}},51173:function(U,F,c){"use strict";var w=c(21751),v=c(707),l=c(28613),R=c(9808),A=c(23611),D=w.TypeError;U.exports=function(B,z){var Z=A(this),W=l(Z.get),Y=l(Z.has),te=l(Z.set),le=arguments.length>2?arguments[2]:void 0,be;if(!R(z)&&!R(le))throw D("At least one callback required");return v(Y,Z,B)?(be=v(W,Z,B),R(z)&&(be=z(be),v(te,Z,B,be))):R(le)&&(be=le(),v(te,Z,B,be)),be}},6428:function(U,F,c){var w=c(90038),v=Math.abs,l=Math.pow,R=l(2,-52),A=l(2,-23),D=l(2,127)*(2-A),k=l(2,-126),B=function(z){return z+1/R-1/R};U.exports=Math.fround||function(Z){var W=v(Z),Y=w(Z),te,le;return W<k?Y*B(W/k/A)*k*A:(te=(1+A/R)*W,le=te-(te-W),le>D||le!=le?Y*(1/0):Y*le)}},6794:function(U){U.exports=Math.scale||function(c,w,v,l,R){var A=+c,D=+w,k=+v,B=+l,z=+R;return A!=A||D!=D||k!=k||B!=B||z!=z?NaN:A===1/0||A===-1/0?A:(A-D)*(z-B)/(k-D)+B}},90038:function(U){U.exports=Math.sign||function(c){return(c=+c)==0||c!=c?c:c<0?-1:1}},75019:function(U,F,c){var w=c(27268),v=c(19844);U.exports=!!Object.getOwnPropertySymbols&&!v(function(){var l=Symbol();return!String(l)||!(Object(l)instanceof Symbol)||!Symbol.sham&&w&&w<41})},66391:function(U,F,c){var w=c(21751),v=c(9808),l=c(7382),R=w.WeakMap;U.exports=v(R)&&/native code/.test(l(R))},96063:function(U,F,c){"use strict";var w=c(28613),v=function(l){var R,A;this.promise=new l(function(D,k){if(R!==void 0||A!==void 0)throw TypeError("Bad Promise constructor");R=D,A=k}),this.resolve=w(R),this.reject=w(A)};U.exports.f=function(l){return new v(l)}},32850:function(U,F,c){var w=c(24782);U.exports=function(v,l){return v===void 0?arguments.length<2?"":l:w(v)}},69536:function(U,F,c){var w=c(21751),v=w.isFinite;U.exports=Number.isFinite||function(R){return typeof R=="number"&&v(R)}},75725:function(U,F,c){var w=c(21751),v=c(19844),l=c(96236),R=c(24782),A=c(68488).trim,D=c(14184),k=w.parseInt,B=w.Symbol,z=B&&B.iterator,Z=/^[+-]?0x/i,W=l(Z.exec),Y=k(D+"08")!==8||k(D+"0x16")!==22||z&&!v(function(){k(Object(z))});U.exports=Y?function(le,be){var de=A(R(le));return k(de,be>>>0||(W(Z,de)?16:10))}:k},44405:function(U,F,c){"use strict";var w=c(21751),v=c(37925),l=c(25257),R=c(62726),A=c(18362).f,D=c(30582),k="Incorrect Number.range arguments",B="NumericRangeIterator",z=v.set,Z=v.getterFor(B),W=w.RangeError,Y=w.TypeError,te=l(function(de,pe,Oe,xe,Ve,K){if(typeof de!=xe||pe!==1/0&&pe!==-1/0&&typeof pe!=xe)throw new Y(k);if(de===1/0||de===-1/0)throw new W(k);var ke=pe>de,we=!1,Me;if(Oe===void 0)Me=void 0;else if(R(Oe))Me=Oe.step,we=!!Oe.inclusive;else if(typeof Oe==xe)Me=Oe;else throw new Y(k);if(Me==null&&(Me=ke?K:-K),typeof Me!=xe)throw new Y(k);if(Me===1/0||Me===-1/0||Me===Ve&&de!==pe)throw new W(k);var Xe=de!=de||pe!=pe||Me!=Me||pe>de!=Me>Ve;z(this,{type:B,start:de,end:pe,step:Me,inclusiveEnd:we,hitsEnd:Xe,currentCount:Ve,zero:Ve}),D||(this.start=de,this.end=pe,this.step=Me,this.inclusive=we)},B,function(){var de=Z(this);if(de.hitsEnd)return{value:void 0,done:!0};var pe=de.start,Oe=de.end,xe=de.step,Ve=pe+xe*de.currentCount++;Ve===Oe&&(de.hitsEnd=!0);var K=de.inclusiveEnd,ke;return Oe>pe?ke=K?Ve>Oe:Ve>=Oe:ke=K?Oe>Ve:Oe>=Ve,ke?{value:void 0,done:de.hitsEnd=!0}:{value:Ve,done:!1}}),le=function(be){return{get:be,set:function(){},configurable:!0,enumerable:!1}};D&&A(te.prototype,{start:le(function(){return Z(this).start}),end:le(function(){return Z(this).end}),inclusive:le(function(){return Z(this).inclusiveEnd}),step:le(function(){return Z(this).step})}),U.exports=te},60724:function(U,F,c){var w=c(23611),v=c(18362),l=c(19574),R=c(9443),A=c(25588),D=c(66675),k=c(34402),B=">",z="<",Z="prototype",W="script",Y=k("IE_PROTO"),te=function(){},le=function(xe){return z+W+B+xe+z+"/"+W+B},be=function(xe){xe.write(le("")),xe.close();var Ve=xe.parentWindow.Object;return xe=null,Ve},de=function(){var xe=D("iframe"),Ve="java"+W+":",K;return xe.style.display="none",A.appendChild(xe),xe.src=String(Ve),K=xe.contentWindow.document,K.open(),K.write(le("document.F=Object")),K.close(),K.F},pe,Oe=function(){try{pe=new ActiveXObject("htmlfile")}catch(Ve){}Oe=typeof document!="undefined"?document.domain&&pe?be(pe):de():be(pe);for(var xe=l.length;xe--;)delete Oe[Z][l[xe]];return Oe()};R[Y]=!0,U.exports=Object.create||function(Ve,K){var ke;return Ve!==null?(te[Z]=w(Ve),ke=new te,te[Z]=null,ke[Y]=Ve):ke=Oe(),K===void 0?ke:v.f(ke,K)}},18362:function(U,F,c){var w=c(30582),v=c(62336),l=c(23251),R=c(23611),A=c(69345),D=c(15814);F.f=w&&!v?Object.defineProperties:function(B,z){R(B);for(var Z=A(z),W=D(z),Y=W.length,te=0,le;Y>te;)l.f(B,le=W[te++],Z[le]);return B}},23251:function(U,F,c){var w=c(21751),v=c(30582),l=c(84981),R=c(62336),A=c(23611),D=c(33066),k=w.TypeError,B=Object.defineProperty,z=Object.getOwnPropertyDescriptor,Z="enumerable",W="configurable",Y="writable";F.f=v?R?function(le,be,de){if(A(le),be=D(be),A(de),typeof le=="function"&&be==="prototype"&&"value"in de&&Y in de&&!de[Y]){var pe=z(le,be);pe&&pe[Y]&&(le[be]=de.value,de={configurable:W in de?de[W]:pe[W],enumerable:Z in de?de[Z]:pe[Z],writable:!1})}return B(le,be,de)}:B:function(le,be,de){if(A(le),be=D(be),A(de),l)try{return B(le,be,de)}catch(pe){}if("get"in de||"set"in de)throw k("Accessors not supported");return"value"in de&&(le[be]=de.value),le}},55025:function(U,F,c){var w=c(30582),v=c(707),l=c(20201),R=c(38830),A=c(69345),D=c(33066),k=c(16216),B=c(84981),z=Object.getOwnPropertyDescriptor;F.f=w?z:function(W,Y){if(W=A(W),Y=D(Y),B)try{return z(W,Y)}catch(te){}if(k(W,Y))return R(!v(l.f,W,Y),W[Y])}},55855:function(U,F,c){var w=c(32290),v=c(69345),l=c(37856).f,R=c(93556),A=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],D=function(k){try{return l(k)}catch(B){return R(A)}};U.exports.f=function(B){return A&&w(B)=="Window"?D(B):l(v(B))}},37856:function(U,F,c){var w=c(7954),v=c(19574),l=v.concat("length","prototype");F.f=Object.getOwnPropertyNames||function(A){return w(A,l)}},37050:function(U,F){F.f=Object.getOwnPropertySymbols},37993:function(U,F,c){var w=c(21751),v=c(16216),l=c(9808),R=c(27491),A=c(34402),D=c(29097),k=A("IE_PROTO"),B=w.Object,z=B.prototype;U.exports=D?B.getPrototypeOf:function(Z){var W=R(Z);if(v(W,k))return W[k];var Y=W.constructor;return l(Y)&&W instanceof Y?Y.prototype:W instanceof B?z:null}},87331:function(U,F,c){var w=c(19844),v=c(62726),l=c(32290),R=c(1811),A=Object.isExtensible,D=w(function(){A(1)});U.exports=D||R?function(B){return!v(B)||R&&l(B)=="ArrayBuffer"?!1:A?A(B):!0}:A},61309:function(U,F,c){var w=c(96236);U.exports=w({}.isPrototypeOf)},69538:function(U,F,c){"use strict";var w=c(37925),v=c(25257),l=c(16216),R=c(15814),A=c(27491),D="Object Iterator",k=w.set,B=w.getterFor(D);U.exports=v(function(Z,W){var Y=A(Z);k(this,{type:D,mode:W,object:Y,keys:R(Y),index:0})},"Object",function(){for(var Z=B(this),W=Z.keys;;){if(W===null||Z.index>=W.length)return Z.object=Z.keys=null,{value:void 0,done:!0};var Y=W[Z.index++],te=Z.object;if(!!l(te,Y)){switch(Z.mode){case"keys":return{value:Y,done:!1};case"values":return{value:te[Y],done:!1}}return{value:[Y,te[Y]],done:!1}}}})},7954:function(U,F,c){var w=c(96236),v=c(16216),l=c(69345),R=c(11032).indexOf,A=c(9443),D=w([].push);U.exports=function(k,B){var z=l(k),Z=0,W=[],Y;for(Y in z)!v(A,Y)&&v(z,Y)&&D(W,Y);for(;B.length>Z;)v(z,Y=B[Z++])&&(~R(W,Y)||D(W,Y));return W}},15814:function(U,F,c){var w=c(7954),v=c(19574);U.exports=Object.keys||function(R){return w(R,v)}},20201:function(U,F){"use strict";var c={}.propertyIsEnumerable,w=Object.getOwnPropertyDescriptor,v=w&&!c.call({1:2},1);F.f=v?function(R){var A=w(this,R);return!!A&&A.enumerable}:c},960:function(U,F,c){var w=c(96236),v=c(23611),l=c(14772);U.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var R=!1,A={},D;try{D=w(Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set),D(A,[]),R=A instanceof Array}catch(k){}return function(B,z){return v(B),l(z),R?D(B,z):B.__proto__=z,B}}():void 0)},21405:function(U,F,c){var w=c(21751),v=c(9808),l=c(22353),R=l("observable"),A=w.Observable,D=A&&A.prototype;U.exports=!v(A)||!v(A.from)||!v(A.of)||!v(D.subscribe)||!v(D[R])},78924:function(U,F,c){var w=c(21751),v=c(707),l=c(9808),R=c(62726),A=w.TypeError;U.exports=function(D,k){var B,z;if(k==="string"&&l(B=D.toString)&&!R(z=v(B,D))||l(B=D.valueOf)&&!R(z=v(B,D))||k!=="string"&&l(B=D.toString)&&!R(z=v(B,D)))return z;throw A("Can't convert object to primitive value")}},33996:function(U,F,c){var w=c(24251),v=c(96236),l=c(37856),R=c(37050),A=c(23611),D=v([].concat);U.exports=w("Reflect","ownKeys")||function(B){var z=l.f(A(B)),Z=R.f;return Z?D(z,Z(B)):z}},90761:function(U,F,c){var w=c(21751);U.exports=w},11639:function(U){U.exports=function(F){try{return{error:!1,value:F()}}catch(c){return{error:!0,value:c}}}},68063:function(U,F,c){var w=c(23251).f;U.exports=function(v,l,R){R in v||w(v,R,{configurable:!0,get:function(){return l[R]},set:function(A){l[R]=A}})}},46694:function(U,F,c){c(70843),c(19551);var w=c(24251),v=c(96236),l=c(69698),R=w("Map"),A=w("WeakMap"),D=v([].push),k=l("metadata"),B=k.store||(k.store=new A),z=function(be,de,pe){var Oe=B.get(be);if(!Oe){if(!pe)return;B.set(be,Oe=new R)}var xe=Oe.get(de);if(!xe){if(!pe)return;Oe.set(de,xe=new R)}return xe},Z=function(be,de,pe){var Oe=z(de,pe,!1);return Oe===void 0?!1:Oe.has(be)},W=function(be,de,pe){var Oe=z(de,pe,!1);return Oe===void 0?void 0:Oe.get(be)},Y=function(be,de,pe,Oe){z(pe,Oe,!0).set(be,de)},te=function(be,de){var pe=z(be,de,!1),Oe=[];return pe&&pe.forEach(function(xe,Ve){D(Oe,Ve)}),Oe},le=function(be){return be===void 0||typeof be=="symbol"?be:String(be)};U.exports={store:B,getMap:z,has:Z,get:W,set:Y,keys:te,toKey:le}},85682:function(U,F,c){"use strict";var w=c(23611);U.exports=function(){var v=w(this),l="";return v.hasIndices&&(l+="d"),v.global&&(l+="g"),v.ignoreCase&&(l+="i"),v.multiline&&(l+="m"),v.dotAll&&(l+="s"),v.unicode&&(l+="u"),v.sticky&&(l+="y"),l}},97160:function(U,F,c){var w=c(707),v=c(16216),l=c(61309),R=c(85682),A=RegExp.prototype;U.exports=function(D){var k=D.flags;return k===void 0&&!("flags"in A)&&!v(D,"flags")&&l(A,D)?w(R,D):k}},74834:function(U,F,c){var w=c(21751),v=w.TypeError;U.exports=function(l){if(l==null)throw v("Can't call method on "+l);return l}},4915:function(U){U.exports=function(F,c){return F===c||F!=F&&c!=c}},45070:function(U,F,c){var w=c(21751),v=Object.defineProperty;U.exports=function(l,R){try{v(w,l,{value:R,configurable:!0,writable:!0})}catch(A){w[l]=R}return R}},82991:function(U,F,c){"use strict";var w=c(24251),v=c(23251),l=c(22353),R=c(30582),A=l("species");U.exports=function(D){var k=w(D),B=v.f;R&&k&&!k[A]&&B(k,A,{configurable:!0,get:function(){return this}})}},34623:function(U,F,c){var w=c(23251).f,v=c(16216),l=c(22353),R=l("toStringTag");U.exports=function(A,D,k){A&&!k&&(A=A.prototype),A&&!v(A,R)&&w(A,R,{configurable:!0,value:D})}},34402:function(U,F,c){var w=c(69698),v=c(92924),l=w("keys");U.exports=function(R){return l[R]||(l[R]=v(R))}},62553:function(U,F,c){var w=c(21751),v=c(45070),l="__core-js_shared__",R=w[l]||v(l,{});U.exports=R},69698:function(U,F,c){var w=c(55675),v=c(62553);(U.exports=function(l,R){return v[l]||(v[l]=R!==void 0?R:{})})("versions",[]).push({version:"3.22.4",mode:w?"pure":"global",copyright:"\xA9 2014-2022 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.22.4/LICENSE",source:"https://github.com/zloirock/core-js"})},86927:function(U,F,c){var w=c(23611),v=c(14623),l=c(22353),R=l("species");U.exports=function(A,D){var k=w(A).constructor,B;return k===void 0||(B=w(k)[R])==null?D:v(B)}},68138:function(U,F,c){var w=c(96236),v=c(35617),l=c(24782),R=c(74834),A=w("".charAt),D=w("".charCodeAt),k=w("".slice),B=function(z){return function(Z,W){var Y=l(R(Z)),te=v(W),le=Y.length,be,de;return te<0||te>=le?z?"":void 0:(be=D(Y,te),be<55296||be>56319||te+1===le||(de=D(Y,te+1))<56320||de>57343?z?A(Y,te):be:z?k(Y,te,te+2):(be-55296<<10)+(de-56320)+65536)}};U.exports={codeAt:B(!1),charAt:B(!0)}},68488:function(U,F,c){var w=c(96236),v=c(74834),l=c(24782),R=c(14184),A=w("".replace),D="["+R+"]",k=RegExp("^"+D+D+"*"),B=RegExp(D+D+"*$"),z=function(Z){return function(W){var Y=l(v(W));return Z&1&&(Y=A(Y,k,"")),Z&2&&(Y=A(Y,B,"")),Y}};U.exports={start:z(1),end:z(2),trim:z(3)}},50409:function(U,F,c){var w=c(21751),v=c(63094),l=c(65976),R=c(9808),A=c(16216),D=c(19844),k=c(25588),B=c(79508),z=c(66675),Z=c(36861),W=c(12017),Y=c(65409),te=w.setImmediate,le=w.clearImmediate,be=w.process,de=w.Dispatch,pe=w.Function,Oe=w.MessageChannel,xe=w.String,Ve=0,K={},ke="onreadystatechange",we,Me,Xe,Ke;try{we=w.location}catch(he){}var At=function(he){if(A(K,he)){var ye=K[he];delete K[he],ye()}},mt=function(he){return function(){At(he)}},ie=function(he){At(he.data)},oe=function(he){w.postMessage(xe(he),we.protocol+"//"+we.host)};(!te||!le)&&(te=function(ye){Z(arguments.length,1);var se=R(ye)?ye:pe(ye),Ne=B(arguments,1);return K[++Ve]=function(){v(se,void 0,Ne)},Me(Ve),Ve},le=function(ye){delete K[ye]},Y?Me=function(he){be.nextTick(mt(he))}:de&&de.now?Me=function(he){de.now(mt(he))}:Oe&&!W?(Xe=new Oe,Ke=Xe.port2,Xe.port1.onmessage=ie,Me=l(Ke.postMessage,Ke)):w.addEventListener&&R(w.postMessage)&&!w.importScripts&&we&&we.protocol!=="file:"&&!D(oe)?(Me=oe,w.addEventListener("message",ie,!1)):ke in z("script")?Me=function(he){k.appendChild(z("script"))[ke]=function(){k.removeChild(this),At(he)}}:Me=function(he){setTimeout(mt(he),0)}),U.exports={set:te,clear:le}},82140:function(U,F,c){var w=c(35617),v=Math.max,l=Math.min;U.exports=function(R,A){var D=w(R);return D<0?v(D+A,0):l(D,A)}},69345:function(U,F,c){var w=c(84117),v=c(74834);U.exports=function(l){return w(v(l))}},35617:function(U){var F=Math.ceil,c=Math.floor;U.exports=function(w){var v=+w;return v!==v||v===0?0:(v>0?c:F)(v)}},58907:function(U,F,c){var w=c(35617),v=Math.min;U.exports=function(l){return l>0?v(w(l),9007199254740991):0}},27491:function(U,F,c){var w=c(21751),v=c(74834),l=w.Object;U.exports=function(R){return l(v(R))}},53349:function(U,F,c){var w=c(21751),v=c(20200),l=w.RangeError;U.exports=function(R,A){var D=v(R);if(D%A)throw l("Wrong offset");return D}},20200:function(U,F,c){var w=c(21751),v=c(35617),l=w.RangeError;U.exports=function(R){var A=v(R);if(A<0)throw l("The argument can't be less than 0");return A}},52025:function(U,F,c){var w=c(21751),v=c(707),l=c(62726),R=c(85961),A=c(96099),D=c(78924),k=c(22353),B=w.TypeError,z=k("toPrimitive");U.exports=function(Z,W){if(!l(Z)||R(Z))return Z;var Y=A(Z,z),te;if(Y){if(W===void 0&&(W="default"),te=v(Y,Z,W),!l(te)||R(te))return te;throw B("Can't convert object to primitive value")}return W===void 0&&(W="number"),D(Z,W)}},33066:function(U,F,c){var w=c(52025),v=c(85961);U.exports=function(l){var R=w(l,"string");return v(R)?R:R+""}},8589:function(U,F,c){var w=c(22353),v=w("toStringTag"),l={};l[v]="z",U.exports=String(l)==="[object z]"},24782:function(U,F,c){var w=c(21751),v=c(81987),l=w.String;U.exports=function(R){if(v(R)==="Symbol")throw TypeError("Cannot convert a Symbol value to a string");return l(R)}},54423:function(U,F,c){var w=c(21751),v=w.String;U.exports=function(l){try{return v(l)}catch(R){return"Object"}}},13149:function(U,F,c){var w=c(34557),v=c(16886);U.exports=function(l,R){return w(v(l),R)}},16886:function(U,F,c){var w=c(80713),v=c(86927),l=w.TYPED_ARRAY_CONSTRUCTOR,R=w.aTypedArrayConstructor;U.exports=function(A){return R(v(A,A[l]))}},92924:function(U,F,c){var w=c(96236),v=0,l=Math.random(),R=w(1 .toString);U.exports=function(A){return"Symbol("+(A===void 0?"":A)+")_"+R(++v+l,36)}},36834:function(U,F,c){var w=c(75019);U.exports=w&&!Symbol.sham&&typeof Symbol.iterator=="symbol"},62336:function(U,F,c){var w=c(30582),v=c(19844);U.exports=w&&v(function(){return Object.defineProperty(function(){},"prototype",{value:42,writable:!1}).prototype!=42})},36861:function(U,F,c){var w=c(21751),v=w.TypeError;U.exports=function(l,R){if(l<R)throw v("Not enough arguments");return l}},85132:function(U,F,c){var w=c(22353);F.f=w},22353:function(U,F,c){var w=c(21751),v=c(69698),l=c(16216),R=c(92924),A=c(75019),D=c(36834),k=v("wks"),B=w.Symbol,z=B&&B.for,Z=D?B:B&&B.withoutSetter||R;U.exports=function(W){if(!l(k,W)||!(A||typeof k[W]=="string")){var Y="Symbol."+W;A&&l(B,W)?k[W]=B[W]:D&&z?k[W]=z(Y):k[W]=Z(Y)}return k[W]}},14184:function(U){U.exports=`	
\v\f\r \xA0\u1680\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029\uFEFF`},74866:function(U,F,c){"use strict";var w=c(24251),v=c(16216),l=c(81312),R=c(61309),A=c(960),D=c(11517),k=c(68063),B=c(77290),z=c(32850),Z=c(78082),W=c(17094),Y=c(25381),te=c(30582),le=c(55675);U.exports=function(be,de,pe,Oe){var xe="stackTraceLimit",Ve=Oe?2:1,K=be.split("."),ke=K[K.length-1],we=w.apply(null,K);if(!!we){var Me=we.prototype;if(!le&&v(Me,"cause")&&delete Me.cause,!pe)return we;var Xe=w("Error"),Ke=de(function(At,mt){var ie=z(Oe?mt:At,void 0),oe=Oe?new we(At):new we;return ie!==void 0&&l(oe,"message",ie),Y&&l(oe,"stack",W(oe.stack,2)),this&&R(Me,this)&&B(oe,this,Ke),arguments.length>Ve&&Z(oe,arguments[Ve]),oe});if(Ke.prototype=Me,ke!=="Error"?A?A(Ke,Xe):D(Ke,Xe,{name:!0}):te&&xe in we&&(k(Ke,we,xe),k(Ke,we,"prepareStackTrace")),D(Ke,we),!le)try{Me.name!==ke&&l(Me,"name",ke),Me.constructor=Ke}catch(At){}return Ke}}},22426:function(U,F,c){var w=c(99010),v=c(24251),l=c(63094),R=c(19844),A=c(74866),D="AggregateError",k=v(D),B=!R(function(){return k([1]).errors[0]!==1})&&R(function(){return k([1],D,{cause:7}).cause!==7});w({global:!0,arity:2,forced:B},{AggregateError:A(D,function(z){return function(W,Y){return l(z,this,arguments)}},B,!0)})},15768:function(U,F,c){"use strict";var w=c(99010),v=c(21751),l=c(61309),R=c(37993),A=c(960),D=c(11517),k=c(60724),B=c(81312),z=c(38830),Z=c(17094),W=c(78082),Y=c(52132),te=c(32850),le=c(22353),be=c(25381),de=le("toStringTag"),pe=v.Error,Oe=[].push,xe=function(ke,we){var Me=arguments.length>2?arguments[2]:void 0,Xe=l(Ve,this),Ke;A?Ke=A(new pe,Xe?R(this):Ve):(Ke=Xe?this:k(Ve),B(Ke,de,"Error")),we!==void 0&&B(Ke,"message",te(we)),be&&B(Ke,"stack",Z(Ke.stack,1)),W(Ke,Me);var At=[];return Y(ke,Oe,{that:At}),B(Ke,"errors",At),Ke};A?A(xe,pe):D(xe,pe,{name:!0});var Ve=xe.prototype=k(pe.prototype,{constructor:z(1,xe),message:z(1,""),name:z(1,"AggregateError")});w({global:!0},{AggregateError:xe})},27008:function(U,F,c){c(15768)},49573:function(U,F,c){"use strict";var w=c(99010),v=c(27491),l=c(2352),R=c(35617),A=c(48300);w({target:"Array",proto:!0},{at:function(k){var B=v(this),z=l(B),Z=R(k),W=Z>=0?Z:z+Z;return W<0||W>=z?void 0:B[W]}}),A("at")},19567:function(U,F,c){"use strict";var w=c(99010),v=c(9794).right,l=c(28343),R=c(27268),A=c(65409),D=l("reduceRight"),k=!A&&R>79&&R<83;w({target:"Array",proto:!0,forced:!D||k},{reduceRight:function(z){return v(this,z,arguments.length,arguments.length>1?arguments[1]:void 0)}})},92459:function(U,F,c){"use strict";var w=c(99010),v=c(9794).left,l=c(28343),R=c(27268),A=c(65409),D=l("reduce"),k=!A&&R>79&&R<83;w({target:"Array",proto:!0,forced:!D||k},{reduce:function(z){var Z=arguments.length;return v(this,z,Z,Z>1?arguments[1]:void 0)}})},37554:function(U,F,c){var w=c(99010),v=c(21751),l=c(63094),R=c(74866),A="WebAssembly",D=v[A],k=Error("e",{cause:7}).cause!==7,B=function(Z,W){var Y={};Y[Z]=R(Z,W,k),w({global:!0,arity:1,forced:k},Y)},z=function(Z,W){if(D&&D[Z]){var Y={};Y[Z]=R(A+"."+Z,W,k),w({target:A,stat:!0,arity:1,forced:k},Y)}};B("Error",function(Z){return function(Y){return l(Z,this,arguments)}}),B("EvalError",function(Z){return function(Y){return l(Z,this,arguments)}}),B("RangeError",function(Z){return function(Y){return l(Z,this,arguments)}}),B("ReferenceError",function(Z){return function(Y){return l(Z,this,arguments)}}),B("SyntaxError",function(Z){return function(Y){return l(Z,this,arguments)}}),B("TypeError",function(Z){return function(Y){return l(Z,this,arguments)}}),B("URIError",function(Z){return function(Y){return l(Z,this,arguments)}}),z("CompileError",function(Z){return function(Y){return l(Z,this,arguments)}}),z("LinkError",function(Z){return function(Y){return l(Z,this,arguments)}}),z("RuntimeError",function(Z){return function(Y){return l(Z,this,arguments)}})},93539:function(U,F,c){"use strict";var w=c(81720),v=c(72010);w("Map",function(l){return function(){return l(this,arguments.length?arguments[0]:void 0)}},v)},70843:function(U,F,c){c(93539)},53964:function(U,F,c){var w=c(99010),v=c(16216);w({target:"Object",stat:!0},{hasOwn:v})},98192:function(U,F,c){"use strict";var w=c(99010),v=c(707),l=c(28613),R=c(24251),A=c(96063),D=c(11639),k=c(52132),B="No one promise resolved";w({target:"Promise",stat:!0},{any:function(Z){var W=this,Y=R("AggregateError"),te=A.f(W),le=te.resolve,be=te.reject,de=D(function(){var pe=l(W.resolve),Oe=[],xe=0,Ve=1,K=!1;k(Z,function(ke){var we=xe++,Me=!1;Ve++,v(pe,W,ke).then(function(Xe){Me||K||(K=!0,le(Xe))},function(Xe){Me||K||(Me=!0,Oe[we]=Xe,--Ve||be(new Y(Oe,B)))})}),--Ve||be(new Y(Oe,B))});return de.error&&be(de.value),te.promise}})},19278:function(U,F,c){var w=c(99010),v=c(21751),l=c(34623);w({global:!0},{Reflect:{}}),l(v.Reflect,"Reflect",!0)},21591:function(U,F,c){var w=c(30582),v=c(29217),l=c(85682),R=c(19844),A=RegExp.prototype,D=w&&R(function(){return Object.getOwnPropertyDescriptor(A,"flags").get.call({dotAll:!0,sticky:!0})!=="sy"});D&&v(A,"flags",{configurable:!0,get:l})},29396:function(U,F,c){"use strict";var w=c(99010),v=c(96236),l=c(74834),R=c(35617),A=c(24782),D=c(19844),k=v("".charAt),B=D(function(){return"\u{20BB7}".at(-2)!=="\uD842"});w({target:"String",proto:!0,forced:B},{at:function(Z){var W=A(l(this)),Y=W.length,te=R(Z),le=te>=0?te:Y+te;return le<0||le>=Y?void 0:k(W,le)}})},90236:function(U,F,c){"use strict";var w=c(99010),v=c(21751),l=c(707),R=c(96236),A=c(74834),D=c(9808),k=c(28363),B=c(24782),z=c(96099),Z=c(97160),W=c(45435),Y=c(22353),te=c(55675),le=Y("replace"),be=v.TypeError,de=R("".indexOf),pe=R("".replace),Oe=R("".slice),xe=Math.max,Ve=function(K,ke,we){return we>K.length?-1:ke===""?we:de(K,ke,we)};w({target:"String",proto:!0},{replaceAll:function(ke,we){var Me=A(this),Xe,Ke,At,mt,ie,oe,he,ye,se,Ne=0,st=0,Fe="";if(ke!=null){if(Xe=k(ke),Xe&&(Ke=B(A(Z(ke))),!~de(Ke,"g")))throw be("`.replaceAll` does not allow non-global regexes");if(At=z(ke,le),At)return l(At,ke,Me,we);if(te&&Xe)return pe(B(Me),ke,we)}for(mt=B(Me),ie=B(ke),oe=D(we),oe||(we=B(we)),he=ie.length,ye=xe(1,he),Ne=Ve(mt,ie,0);Ne!==-1;)se=oe?B(we(ie,Ne,mt)):W(ie,mt,Ne,[],void 0,we),Fe+=Oe(mt,st,Ne)+se,st=Ne+he,Ne=Ve(mt,ie,Ne+ye);return st<mt.length&&(Fe+=Oe(mt,st)),Fe}})},5741:function(U,F,c){"use strict";var w=c(80713),v=c(2352),l=c(35617),R=w.aTypedArray,A=w.exportTypedArrayMethod;A("at",function(k){var B=R(this),z=v(B),Z=l(k),W=Z>=0?Z:z+Z;return W<0||W>=z?void 0:B[W]})},19202:function(U,F,c){"use strict";var w=c(21751),v=c(707),l=c(80713),R=c(2352),A=c(53349),D=c(27491),k=c(19844),B=w.RangeError,z=w.Int8Array,Z=z&&z.prototype,W=Z&&Z.set,Y=l.aTypedArray,te=l.exportTypedArrayMethod,le=!k(function(){var de=new Uint8ClampedArray(2);return v(W,de,{length:1,0:3},1),de[1]!==3}),be=le&&l.NATIVE_ARRAY_BUFFER_VIEWS&&k(function(){var de=new z(2);return de.set(1),de.set("2",1),de[0]!==0||de[1]!==2});te("set",function(pe){Y(this);var Oe=A(arguments.length>1?arguments[1]:void 0,1),xe=D(pe);if(le)return v(W,this,xe,Oe);var Ve=this.length,K=R(xe),ke=0;if(K+Oe>Ve)throw B("Wrong length");for(;ke<K;)this[Oe+ke]=xe[ke++]},!le||be)},23526:function(U,F,c){"use strict";var w=c(21751),v=c(96236),l=c(8640),R=c(92767),A=c(81720),D=c(3623),k=c(62726),B=c(87331),z=c(37925).enforce,Z=c(66391),W=!w.ActiveXObject&&"ActiveXObject"in w,Y,te=function(Ve){return function(){return Ve(this,arguments.length?arguments[0]:void 0)}},le=A("WeakMap",te,D);if(Z&&W){Y=D.getConstructor(te,"WeakMap",!0),R.enable();var be=le.prototype,de=v(be.delete),pe=v(be.has),Oe=v(be.get),xe=v(be.set);l(be,{delete:function(Ve){if(k(Ve)&&!B(Ve)){var K=z(this);return K.frozen||(K.frozen=new Y),de(this,Ve)||K.frozen.delete(Ve)}return de(this,Ve)},has:function(K){if(k(K)&&!B(K)){var ke=z(this);return ke.frozen||(ke.frozen=new Y),pe(this,K)||ke.frozen.has(K)}return pe(this,K)},get:function(K){if(k(K)&&!B(K)){var ke=z(this);return ke.frozen||(ke.frozen=new Y),pe(this,K)?Oe(this,K):ke.frozen.get(K)}return Oe(this,K)},set:function(K,ke){if(k(K)&&!B(K)){var we=z(this);we.frozen||(we.frozen=new Y),pe(this,K)?xe(this,K,ke):we.frozen.set(K,ke)}else xe(this,K,ke);return this}})}},19551:function(U,F,c){c(23526)},24079:function(U,F,c){"use strict";var w=c(99010),v=c(58897).filterReject,l=c(48300);w({target:"Array",proto:!0,forced:!0},{filterOut:function(A){return v(this,A,arguments.length>1?arguments[1]:void 0)}}),l("filterOut")},59860:function(U,F,c){"use strict";var w=c(99010),v=c(58897).filterReject,l=c(48300);w({target:"Array",proto:!0,forced:!0},{filterReject:function(A){return v(this,A,arguments.length>1?arguments[1]:void 0)}}),l("filterReject")},32490:function(U,F,c){"use strict";var w=c(99010),v=c(59622).findLastIndex,l=c(48300);w({target:"Array",proto:!0},{findLastIndex:function(A){return v(this,A,arguments.length>1?arguments[1]:void 0)}}),l("findLastIndex")},66074:function(U,F,c){"use strict";var w=c(99010),v=c(59622).findLast,l=c(48300);w({target:"Array",proto:!0},{findLast:function(A){return v(this,A,arguments.length>1?arguments[1]:void 0)}}),l("findLast")},25641:function(U,F,c){var w=c(99010),v=c(22645);w({target:"Array",stat:!0,forced:!0},{fromAsync:v})},67829:function(U,F,c){"use strict";var w=c(99010),v=c(24251),l=c(65976),R=c(96236),A=c(84117),D=c(27491),k=c(2352),B=c(28343),z=c(48300),Z=v("Map"),W=Z.prototype,Y=R(W.get),te=R(W.has),le=R(W.set),be=R([].push);w({target:"Array",proto:!0,forced:!B("groupByToMap")},{groupByToMap:function(pe){for(var Oe=D(this),xe=A(Oe),Ve=l(pe,arguments.length>1?arguments[1]:void 0),K=new Z,ke=k(xe),we=0,Me,Xe;ke>we;we++)Xe=xe[we],Me=Ve(Xe,we,Oe),te(K,Me)?be(Y(K,Me),Xe):le(K,Me,[Xe]);return K}}),z("groupByToMap")},84037:function(U,F,c){"use strict";var w=c(99010),v=c(38836),l=c(28343),R=c(48300);w({target:"Array",proto:!0,forced:!l("groupBy")},{groupBy:function(D){var k=arguments.length>1?arguments[1]:void 0;return v(this,D,k)}}),R("groupBy")},62580:function(U,F,c){var w=c(99010),v=c(27360),l=Object.isFrozen,R=function(A,D){if(!l||!v(A)||!l(A))return!1;for(var k=0,B=A.length,z;k<B;)if(z=A[k++],!(typeof z=="string"||D&&typeof z=="undefined"))return!1;return B!==0};w({target:"Array",stat:!0,sham:!0,forced:!0},{isTemplateObject:function(D){if(!R(D,!0))return!1;var k=D.raw;return k.length===D.length&&R(k,!1)}})},72324:function(U,F,c){"use strict";var w=c(30582),v=c(48300),l=c(27491),R=c(2352),A=c(29217);w&&(A(Array.prototype,"lastIndex",{configurable:!0,get:function(){var k=l(this),B=R(k);return B==0?0:B-1}}),v("lastIndex"))},62942:function(U,F,c){"use strict";var w=c(30582),v=c(48300),l=c(27491),R=c(2352),A=c(29217);w&&(A(Array.prototype,"lastItem",{configurable:!0,get:function(){var k=l(this),B=R(k);return B==0?void 0:k[B-1]},set:function(k){var B=l(this),z=R(B);return B[z==0?0:z-1]=k}}),v("lastItem"))},5063:function(U,F,c){"use strict";var w=c(99010),v=c(21751),l=c(58170),R=c(69345),A=c(48300),D=v.Array;w({target:"Array",proto:!0},{toReversed:function(){return l(R(this),D)}}),A("toReversed")},28403:function(U,F,c){"use strict";var w=c(99010),v=c(21751),l=c(96236),R=c(28613),A=c(69345),D=c(34557),k=c(51379),B=c(48300),z=v.Array,Z=l(k("Array").sort);w({target:"Array",proto:!0},{toSorted:function(Y){Y!==void 0&&R(Y);var te=A(this),le=D(z,te);return Z(le,Y)}}),B("toSorted")},97487:function(U,F,c){"use strict";var w=c(99010),v=c(21751),l=c(69345),R=c(79508),A=c(96817),D=c(48300),k=v.Array;w({target:"Array",proto:!0,arity:2},{toSpliced:function(z,Z){return A(l(this),k,R(arguments))}}),D("toSpliced")},19772:function(U,F,c){"use strict";var w=c(99010),v=c(48300),l=c(74087);w({target:"Array",proto:!0,forced:!0},{uniqueBy:l}),v("uniqueBy")},41618:function(U,F,c){"use strict";var w=c(99010),v=c(21751),l=c(59465),R=c(69345),A=v.Array;w({target:"Array",proto:!0},{with:function(D,k){return l(R(this),A,D,k)}})},96323:function(U,F,c){"use strict";var w=c(99010),v=c(63094),l=c(23611),R=c(73248),A=R(function(D,k){var B=this,z=B.iterator;return D.resolve(l(v(B.next,z,k))).then(function(Z){return l(Z).done?(B.done=!0,{done:!0,value:void 0}):{done:!1,value:[B.index++,Z.value]}})});w({target:"AsyncIterator",proto:!0,real:!0,forced:!0},{asIndexedPairs:function(){return new A({iterator:l(this),index:0})}})},67147:function(U,F,c){"use strict";var w=c(99010),v=c(66572),l=c(81312),R=c(16216),A=c(22353),D=c(44069),k=c(55675),B=A("toStringTag"),z=function(){v(this,D)};z.prototype=D,R(D,B)||l(D,B,"AsyncIterator"),(k||!R(D,"constructor")||D.constructor===Object)&&l(D,"constructor",z),w({global:!0,forced:k},{AsyncIterator:z})},59324:function(U,F,c){"use strict";var w=c(99010),v=c(63094),l=c(23611),R=c(20200),A=c(73248),D=A(function(k,B){var z=this;return new k(function(Z,W){var Y=function(){try{k.resolve(l(v(z.next,z.iterator,z.remaining?[]:B))).then(function(te){try{l(te).done?(z.done=!0,Z({done:!0,value:void 0})):z.remaining?(z.remaining--,Y()):Z({done:!1,value:te.value})}catch(le){W(le)}},W)}catch(te){W(te)}};Y()})});w({target:"AsyncIterator",proto:!0,real:!0,forced:!0},{drop:function(B){return new D({iterator:l(this),remaining:R(B)})}})},37718:function(U,F,c){"use strict";var w=c(99010),v=c(36426).every;w({target:"AsyncIterator",proto:!0,real:!0,forced:!0},{every:function(R){return v(this,R)}})},13175:function(U,F,c){"use strict";var w=c(99010),v=c(63094),l=c(28613),R=c(23611),A=c(73248),D=A(function(k,B){var z=this,Z=z.filterer;return new k(function(W,Y){var te=function(){try{k.resolve(R(v(z.next,z.iterator,B))).then(function(le){try{if(R(le).done)z.done=!0,W({done:!0,value:void 0});else{var be=le.value;k.resolve(Z(be)).then(function(de){de?W({done:!1,value:be}):te()},Y)}}catch(de){Y(de)}},Y)}catch(le){Y(le)}};te()})});w({target:"AsyncIterator",proto:!0,real:!0,forced:!0},{filter:function(B){return new D({iterator:R(this),filterer:l(B)})}})},38727:function(U,F,c){"use strict";var w=c(99010),v=c(36426).find;w({target:"AsyncIterator",proto:!0,real:!0,forced:!0},{find:function(R){return v(this,R)}})},49462:function(U,F,c){"use strict";var w=c(99010),v=c(707),l=c(28613),R=c(23611),A=c(73248),D=c(50314),k=A(function(B){var z=this,Z=z.mapper,W;return new B(function(Y,te){var le=function(){try{B.resolve(R(v(z.next,z.iterator))).then(function(de){try{R(de).done?(z.done=!0,Y({done:!0,value:void 0})):B.resolve(Z(de.value)).then(function(pe){try{return z.innerIterator=W=D(pe),z.innerNext=l(W.next),be()}catch(Oe){te(Oe)}},te)}catch(pe){te(pe)}},te)}catch(de){te(de)}},be=function(){if(W=z.innerIterator)try{B.resolve(R(v(z.innerNext,W))).then(function(de){try{R(de).done?(z.innerIterator=z.innerNext=null,le()):Y({done:!1,value:de.value})}catch(pe){te(pe)}},te)}catch(de){te(de)}else le()};be()})});w({target:"AsyncIterator",proto:!0,real:!0,forced:!0},{flatMap:function(z){return new k({iterator:R(this),mapper:l(z),innerIterator:null,innerNext:null})}})},3791:function(U,F,c){"use strict";var w=c(99010),v=c(36426).forEach;w({target:"AsyncIterator",proto:!0,real:!0,forced:!0},{forEach:function(R){return v(this,R)}})},3214:function(U,F,c){var w=c(99010),v=c(63094),l=c(23611),R=c(27491),A=c(61309),D=c(44069),k=c(73248),B=c(50314),z=c(38470),Z=c(63596),W=c(96099),Y=c(22353),te=c(82095),le=Y("asyncIterator"),be=k(function(de,pe){return l(v(this.next,this.iterator,pe))},!0);w({target:"AsyncIterator",stat:!0,forced:!0},{from:function(pe){var Oe=R(pe),xe=W(Oe,le),Ve;return xe&&(Ve=B(Oe,xe),A(D,Ve))?Ve:Ve===void 0&&(xe=Z(Oe),xe)?new te(z(Oe,xe)):new be({iterator:Ve!==void 0?Ve:Oe})}})},84095:function(U,F,c){"use strict";var w=c(99010),v=c(63094),l=c(28613),R=c(23611),A=c(73248),D=A(function(k,B){var z=this,Z=z.mapper;return k.resolve(R(v(z.next,z.iterator,B))).then(function(W){return R(W).done?(z.done=!0,{done:!0,value:void 0}):k.resolve(Z(W.value)).then(function(Y){return{done:!1,value:Y}})})});w({target:"AsyncIterator",proto:!0,real:!0,forced:!0},{map:function(B){return new D({iterator:R(this),mapper:l(B)})}})},11228:function(U,F,c){"use strict";var w=c(99010),v=c(21751),l=c(707),R=c(28613),A=c(23611),D=c(24251),k=D("Promise"),B=v.TypeError;w({target:"AsyncIterator",proto:!0,real:!0,forced:!0},{reduce:function(Z){var W=A(this),Y=R(W.next),te=arguments.length<2,le=te?void 0:arguments[1];return R(Z),new k(function(be,de){var pe=function(){try{k.resolve(A(l(Y,W))).then(function(Oe){try{if(A(Oe).done)te?de(B("Reduce of empty iterator with no initial value")):be(le);else{var xe=Oe.value;te?(te=!1,le=xe,pe()):k.resolve(Z(le,xe)).then(function(Ve){le=Ve,pe()},de)}}catch(Ve){de(Ve)}},de)}catch(Oe){de(Oe)}};pe()})}})},38338:function(U,F,c){"use strict";var w=c(99010),v=c(36426).some;w({target:"AsyncIterator",proto:!0,real:!0,forced:!0},{some:function(R){return v(this,R)}})},72164:function(U,F,c){"use strict";var w=c(99010),v=c(63094),l=c(707),R=c(23611),A=c(20200),D=c(73248),k=D(function(B,z){var Z=this.iterator,W,Y;return this.remaining--?v(this.next,Z,z):(Y={done:!0,value:void 0},this.done=!0,W=Z.return,W!==void 0?B.resolve(l(W,Z)).then(function(){return Y}):Y)});w({target:"AsyncIterator",proto:!0,real:!0,forced:!0},{take:function(z){return new k({iterator:R(this),remaining:A(z)})}})},55627:function(U,F,c){"use strict";var w=c(99010),v=c(36426).toArray;w({target:"AsyncIterator",proto:!0,real:!0,forced:!0},{toArray:function(){return v(this,void 0,[])}})},4870:function(U,F,c){"use strict";var w=c(99010),v=c(44405);typeof BigInt=="function"&&w({target:"BigInt",stat:!0,forced:!0},{range:function(R,A,D){return new v(R,A,D,"bigint",BigInt(0),BigInt(1))}})},52806:function(U,F,c){var w=c(99010),v=c(21751),l=c(63094),R=c(5044),A=c(24251),D=c(60724),k=v.Object,B=function(){var z=A("Object","freeze");return z?z(D(null)):D(null)};w({global:!0,forced:!0},{compositeKey:function(){return l(R,k,arguments).get("object",B)}})},12278:function(U,F,c){var w=c(99010),v=c(5044),l=c(24251),R=c(63094);w({global:!0,forced:!0},{compositeSymbol:function(){return arguments.length==1&&typeof arguments[0]=="string"?l("Symbol").for(arguments[0]):R(v,null,arguments).get("symbol",l("Symbol"))}})},26996:function(U,F,c){var w=c(99010),v=c(96236),l=c(9808),R=c(7382),A=c(16216),D=c(30582),k=Object.getOwnPropertyDescriptor,B=/^\s*class\b/,z=v(B.exec),Z=function(W){try{if(!D||!z(B,R(W)))return!1}catch(te){}var Y=k(W,"prototype");return!!Y&&A(Y,"writable")&&!Y.writable};w({target:"Function",stat:!0,sham:!0,forced:!0},{isCallable:function(Y){return l(Y)&&!Z(Y)}})},61433:function(U,F,c){var w=c(99010),v=c(80586);w({target:"Function",stat:!0,forced:!0},{isConstructor:v})},84615:function(U,F,c){var w=c(99010),v=c(96236),l=c(28613);w({target:"Function",proto:!0,forced:!0},{unThis:function(){return v(l(this))}})},54854:function(U,F,c){"use strict";var w=c(99010),v=c(63094),l=c(23611),R=c(92178),A=R(function(D){var k=l(v(this.next,this.iterator,D)),B=this.done=!!k.done;if(!B)return[this.index++,k.value]});w({target:"Iterator",proto:!0,real:!0,forced:!0},{asIndexedPairs:function(){return new A({iterator:l(this),index:0})}})},18545:function(U,F,c){"use strict";var w=c(99010),v=c(21751),l=c(66572),R=c(9808),A=c(81312),D=c(19844),k=c(16216),B=c(22353),z=c(63316).IteratorPrototype,Z=c(55675),W=B("toStringTag"),Y=v.Iterator,te=Z||!R(Y)||Y.prototype!==z||!D(function(){Y({})}),le=function(){l(this,z)};k(z,W)||A(z,W,"Iterator"),(te||!k(z,"constructor")||z.constructor===Object)&&A(z,"constructor",le),le.prototype=z,w({global:!0,forced:te},{Iterator:le})},45102:function(U,F,c){"use strict";var w=c(99010),v=c(63094),l=c(707),R=c(23611),A=c(20200),D=c(92178),k=D(function(B){for(var z=this.iterator,Z=this.next,W,Y;this.remaining;)if(this.remaining--,W=R(l(Z,z)),Y=this.done=!!W.done,Y)return;if(W=R(v(Z,z,B)),Y=this.done=!!W.done,!Y)return W.value});w({target:"Iterator",proto:!0,real:!0,forced:!0},{drop:function(z){return new k({iterator:R(this),remaining:A(z)})}})},39110:function(U,F,c){"use strict";var w=c(99010),v=c(52132),l=c(28613),R=c(23611);w({target:"Iterator",proto:!0,real:!0,forced:!0},{every:function(D){return R(this),l(D),!v(this,function(k,B){if(!D(k))return B()},{IS_ITERATOR:!0,INTERRUPTED:!0}).stopped}})},81845:function(U,F,c){"use strict";var w=c(99010),v=c(63094),l=c(28613),R=c(23611),A=c(92178),D=c(21769),k=A(function(B){for(var z=this.iterator,Z=this.filterer,W=this.next,Y,te,le;;){if(Y=R(v(W,z,B)),te=this.done=!!Y.done,te)return;if(le=Y.value,D(z,Z,le))return le}});w({target:"Iterator",proto:!0,real:!0,forced:!0},{filter:function(z){return new k({iterator:R(this),filterer:l(z)})}})},9117:function(U,F,c){"use strict";var w=c(99010),v=c(52132),l=c(28613),R=c(23611);w({target:"Iterator",proto:!0,real:!0,forced:!0},{find:function(D){return R(this),l(D),v(this,function(k,B){if(D(k))return B(k)},{IS_ITERATOR:!0,INTERRUPTED:!0}).result}})},90180:function(U,F,c){"use strict";var w=c(99010),v=c(21751),l=c(707),R=c(28613),A=c(23611),D=c(63596),k=c(92178),B=c(59670),z=v.TypeError,Z=k(function(){for(var W=this.iterator,Y=this.mapper,te,le,be,de;;)try{if(de=this.innerIterator){if(te=A(l(this.innerNext,de)),!te.done)return te.value;this.innerIterator=this.innerNext=null}if(te=A(l(this.next,W)),this.done=!!te.done)return;if(le=Y(te.value),be=D(le),!be)throw z(".flatMap callback should return an iterable object");this.innerIterator=de=A(l(be,le)),this.innerNext=R(de.next)}catch(pe){B(W,"throw",pe)}});w({target:"Iterator",proto:!0,real:!0,forced:!0},{flatMap:function(Y){return new Z({iterator:A(this),mapper:R(Y),innerIterator:null,innerNext:null})}})},46833:function(U,F,c){"use strict";var w=c(99010),v=c(52132),l=c(23611);w({target:"Iterator",proto:!0,real:!0,forced:!0},{forEach:function(A){v(l(this),A,{IS_ITERATOR:!0})}})},12014:function(U,F,c){var w=c(99010),v=c(63094),l=c(23611),R=c(27491),A=c(61309),D=c(63316).IteratorPrototype,k=c(92178),B=c(38470),z=c(63596),Z=k(function(W){var Y=l(v(this.next,this.iterator,W)),te=this.done=!!Y.done;if(!te)return Y.value},!0);w({target:"Iterator",stat:!0,forced:!0},{from:function(Y){var te=R(Y),le=z(te),be;if(le){if(be=B(te,le),A(D,be))return be}else be=te;return new Z({iterator:be})}})},29018:function(U,F,c){"use strict";var w=c(99010),v=c(63094),l=c(28613),R=c(23611),A=c(92178),D=c(21769),k=A(function(B){var z=this.iterator,Z=R(v(this.next,z,B)),W=this.done=!!Z.done;if(!W)return D(z,this.mapper,Z.value)});w({target:"Iterator",proto:!0,real:!0,forced:!0},{map:function(z){return new k({iterator:R(this),mapper:l(z)})}})},59466:function(U,F,c){"use strict";var w=c(99010),v=c(21751),l=c(52132),R=c(28613),A=c(23611),D=v.TypeError;w({target:"Iterator",proto:!0,real:!0,forced:!0},{reduce:function(B){A(this),R(B);var z=arguments.length<2,Z=z?void 0:arguments[1];if(l(this,function(W){z?(z=!1,Z=W):Z=B(Z,W)},{IS_ITERATOR:!0}),z)throw D("Reduce of empty iterator with no initial value");return Z}})},69557:function(U,F,c){"use strict";var w=c(99010),v=c(52132),l=c(28613),R=c(23611);w({target:"Iterator",proto:!0,real:!0,forced:!0},{some:function(D){return R(this),l(D),v(this,function(k,B){if(D(k))return B()},{IS_ITERATOR:!0,INTERRUPTED:!0}).stopped}})},88999:function(U,F,c){"use strict";var w=c(99010),v=c(63094),l=c(23611),R=c(20200),A=c(92178),D=c(59670),k=A(function(B){var z=this.iterator;if(!this.remaining--)return this.done=!0,D(z,"normal",void 0);var Z=l(v(this.next,z,B)),W=this.done=!!Z.done;if(!W)return Z.value});w({target:"Iterator",proto:!0,real:!0,forced:!0},{take:function(z){return new k({iterator:l(this),remaining:R(z)})}})},4342:function(U,F,c){"use strict";var w=c(99010),v=c(52132),l=c(23611),R=[].push;w({target:"Iterator",proto:!0,real:!0,forced:!0},{toArray:function(){var D=[];return v(l(this),R,{that:D,IS_ITERATOR:!0}),D}})},75085:function(U,F,c){"use strict";var w=c(99010),v=c(82095);w({target:"Iterator",proto:!0,real:!0,forced:!0},{toAsync:function(){return new v(this)}})},97824:function(U,F,c){"use strict";var w=c(99010),v=c(46828);w({target:"Map",proto:!0,real:!0,forced:!0},{deleteAll:v})},80309:function(U,F,c){"use strict";var w=c(99010),v=c(37988);w({target:"Map",proto:!0,real:!0,forced:!0},{emplace:v})},16812:function(U,F,c){"use strict";var w=c(99010),v=c(23611),l=c(65976),R=c(1080),A=c(52132);w({target:"Map",proto:!0,real:!0,forced:!0},{every:function(k){var B=v(this),z=R(B),Z=l(k,arguments.length>1?arguments[1]:void 0);return!A(z,function(W,Y,te){if(!Z(Y,W,B))return te()},{AS_ENTRIES:!0,IS_ITERATOR:!0,INTERRUPTED:!0}).stopped}})},25037:function(U,F,c){"use strict";var w=c(99010),v=c(24251),l=c(65976),R=c(707),A=c(28613),D=c(23611),k=c(86927),B=c(1080),z=c(52132);w({target:"Map",proto:!0,real:!0,forced:!0},{filter:function(W){var Y=D(this),te=B(Y),le=l(W,arguments.length>1?arguments[1]:void 0),be=new(k(Y,v("Map"))),de=A(be.set);return z(te,function(pe,Oe){le(Oe,pe,Y)&&R(de,be,pe,Oe)},{AS_ENTRIES:!0,IS_ITERATOR:!0}),be}})},95733:function(U,F,c){"use strict";var w=c(99010),v=c(23611),l=c(65976),R=c(1080),A=c(52132);w({target:"Map",proto:!0,real:!0,forced:!0},{findKey:function(k){var B=v(this),z=R(B),Z=l(k,arguments.length>1?arguments[1]:void 0);return A(z,function(W,Y,te){if(Z(Y,W,B))return te(W)},{AS_ENTRIES:!0,IS_ITERATOR:!0,INTERRUPTED:!0}).result}})},52003:function(U,F,c){"use strict";var w=c(99010),v=c(23611),l=c(65976),R=c(1080),A=c(52132);w({target:"Map",proto:!0,real:!0,forced:!0},{find:function(k){var B=v(this),z=R(B),Z=l(k,arguments.length>1?arguments[1]:void 0);return A(z,function(W,Y,te){if(Z(Y,W,B))return te(Y)},{AS_ENTRIES:!0,IS_ITERATOR:!0,INTERRUPTED:!0}).result}})},30242:function(U,F,c){var w=c(99010),v=c(8600);w({target:"Map",stat:!0,forced:!0},{from:v})},16990:function(U,F,c){"use strict";var w=c(99010),v=c(707),l=c(96236),R=c(28613),A=c(38470),D=c(52132),k=l([].push);w({target:"Map",stat:!0,forced:!0},{groupBy:function(z,Z){R(Z);var W=A(z),Y=new this,te=R(Y.has),le=R(Y.get),be=R(Y.set);return D(W,function(de){var pe=Z(de);v(te,Y,pe)?k(v(le,Y,pe),de):v(be,Y,pe,[de])},{IS_ITERATOR:!0}),Y}})},11365:function(U,F,c){"use strict";var w=c(99010),v=c(23611),l=c(1080),R=c(4915),A=c(52132);w({target:"Map",proto:!0,real:!0,forced:!0},{includes:function(k){return A(l(v(this)),function(B,z,Z){if(R(z,k))return Z()},{AS_ENTRIES:!0,IS_ITERATOR:!0,INTERRUPTED:!0}).stopped}})},21136:function(U,F,c){"use strict";var w=c(99010),v=c(707),l=c(52132),R=c(28613);w({target:"Map",stat:!0,forced:!0},{keyBy:function(D,k){var B=new this;R(k);var z=R(B.set);return l(D,function(Z){v(z,B,k(Z),Z)}),B}})},12242:function(U,F,c){"use strict";var w=c(99010),v=c(23611),l=c(1080),R=c(52132);w({target:"Map",proto:!0,real:!0,forced:!0},{keyOf:function(D){return R(l(v(this)),function(k,B,z){if(B===D)return z(k)},{AS_ENTRIES:!0,IS_ITERATOR:!0,INTERRUPTED:!0}).result}})},47829:function(U,F,c){"use strict";var w=c(99010),v=c(24251),l=c(65976),R=c(707),A=c(28613),D=c(23611),k=c(86927),B=c(1080),z=c(52132);w({target:"Map",proto:!0,real:!0,forced:!0},{mapKeys:function(W){var Y=D(this),te=B(Y),le=l(W,arguments.length>1?arguments[1]:void 0),be=new(k(Y,v("Map"))),de=A(be.set);return z(te,function(pe,Oe){R(de,be,le(Oe,pe,Y),Oe)},{AS_ENTRIES:!0,IS_ITERATOR:!0}),be}})},62720:function(U,F,c){"use strict";var w=c(99010),v=c(24251),l=c(65976),R=c(707),A=c(28613),D=c(23611),k=c(86927),B=c(1080),z=c(52132);w({target:"Map",proto:!0,real:!0,forced:!0},{mapValues:function(W){var Y=D(this),te=B(Y),le=l(W,arguments.length>1?arguments[1]:void 0),be=new(k(Y,v("Map"))),de=A(be.set);return z(te,function(pe,Oe){R(de,be,pe,le(Oe,pe,Y))},{AS_ENTRIES:!0,IS_ITERATOR:!0}),be}})},83897:function(U,F,c){"use strict";var w=c(99010),v=c(28613),l=c(23611),R=c(52132);w({target:"Map",proto:!0,real:!0,arity:1,forced:!0},{merge:function(D){for(var k=l(this),B=v(k.set),z=arguments.length,Z=0;Z<z;)R(arguments[Z++],B,{that:k,AS_ENTRIES:!0});return k}})},62444:function(U,F,c){var w=c(99010),v=c(34663);w({target:"Map",stat:!0,forced:!0},{of:v})},14541:function(U,F,c){"use strict";var w=c(99010),v=c(21751),l=c(23611),R=c(28613),A=c(1080),D=c(52132),k=v.TypeError;w({target:"Map",proto:!0,real:!0,forced:!0},{reduce:function(z){var Z=l(this),W=A(Z),Y=arguments.length<2,te=Y?void 0:arguments[1];if(R(z),D(W,function(le,be){Y?(Y=!1,te=be):te=z(te,be,le,Z)},{AS_ENTRIES:!0,IS_ITERATOR:!0}),Y)throw k("Reduce of empty map with no initial value");return te}})},36548:function(U,F,c){"use strict";var w=c(99010),v=c(23611),l=c(65976),R=c(1080),A=c(52132);w({target:"Map",proto:!0,real:!0,forced:!0},{some:function(k){var B=v(this),z=R(B),Z=l(k,arguments.length>1?arguments[1]:void 0);return A(z,function(W,Y,te){if(Z(Y,W,B))return te()},{AS_ENTRIES:!0,IS_ITERATOR:!0,INTERRUPTED:!0}).stopped}})},9177:function(U,F,c){"use strict";var w=c(99010),v=c(51173);w({target:"Map",proto:!0,real:!0,name:"upsert",forced:!0},{updateOrInsert:v})},23770:function(U,F,c){"use strict";var w=c(99010),v=c(21751),l=c(707),R=c(23611),A=c(28613),D=v.TypeError;w({target:"Map",proto:!0,real:!0,forced:!0},{update:function(B,z){var Z=R(this),W=A(Z.get),Y=A(Z.has),te=A(Z.set),le=arguments.length;A(z);var be=l(Y,Z,B);if(!be&&le<3)throw D("Updating absent value");var de=be?l(W,Z,B):A(le>2?arguments[2]:void 0)(B,Z);return l(te,Z,B,z(de,B,Z)),Z}})},75932:function(U,F,c){"use strict";var w=c(99010),v=c(51173);w({target:"Map",proto:!0,real:!0,forced:!0},{upsert:v})},46398:function(U,F,c){var w=c(99010),v=Math.min,l=Math.max;w({target:"Math",stat:!0,forced:!0},{clamp:function(A,D,k){return v(k,l(D,A))}})},62304:function(U,F,c){var w=c(99010);w({target:"Math",stat:!0,forced:!0},{DEG_PER_RAD:Math.PI/180})},80994:function(U,F,c){var w=c(99010),v=180/Math.PI;w({target:"Math",stat:!0,forced:!0},{degrees:function(R){return R*v}})},34187:function(U,F,c){var w=c(99010),v=c(6794),l=c(6428);w({target:"Math",stat:!0,forced:!0},{fscale:function(A,D,k,B,z){return l(v(A,D,k,B,z))}})},79563:function(U,F,c){var w=c(99010);w({target:"Math",stat:!0,forced:!0},{iaddh:function(l,R,A,D){var k=l>>>0,B=R>>>0,z=A>>>0;return B+(D>>>0)+((k&z|(k|z)&~(k+z>>>0))>>>31)|0}})},81765:function(U,F,c){var w=c(99010);w({target:"Math",stat:!0,forced:!0},{imulh:function(l,R){var A=65535,D=+l,k=+R,B=D&A,z=k&A,Z=D>>16,W=k>>16,Y=(Z*z>>>0)+(B*z>>>16);return Z*W+(Y>>16)+((B*W>>>0)+(Y&A)>>16)}})},84729:function(U,F,c){var w=c(99010);w({target:"Math",stat:!0,forced:!0},{isubh:function(l,R,A,D){var k=l>>>0,B=R>>>0,z=A>>>0;return B-(D>>>0)-((~k&z|~(k^z)&k-z>>>0)>>>31)|0}})},14931:function(U,F,c){var w=c(99010);w({target:"Math",stat:!0,forced:!0},{RAD_PER_DEG:180/Math.PI})},43716:function(U,F,c){var w=c(99010),v=Math.PI/180;w({target:"Math",stat:!0,forced:!0},{radians:function(R){return R*v}})},81514:function(U,F,c){var w=c(99010),v=c(6794);w({target:"Math",stat:!0,forced:!0},{scale:v})},65556:function(U,F,c){var w=c(99010),v=c(21751),l=c(23611),R=c(69536),A=c(25257),D=c(37925),k="Seeded Random",B=k+" Generator",z='Math.seededPRNG() argument should have a "seed" field with a finite value.',Z=D.set,W=D.getterFor(B),Y=v.TypeError,te=A(function(be){Z(this,{type:B,seed:be%2147483647})},k,function(){var be=W(this),de=be.seed=(be.seed*1103515245+12345)%2147483647;return{value:(de&1073741823)/1073741823,done:!1}});w({target:"Math",stat:!0,forced:!0},{seededPRNG:function(be){var de=l(be).seed;if(!R(de))throw Y(z);return new te(de)}})},67649:function(U,F,c){var w=c(99010);w({target:"Math",stat:!0,forced:!0},{signbit:function(l){return(l=+l)==l&&l==0?1/l==-1/0:l<0}})},77904:function(U,F,c){var w=c(99010);w({target:"Math",stat:!0,forced:!0},{umulh:function(l,R){var A=65535,D=+l,k=+R,B=D&A,z=k&A,Z=D>>>16,W=k>>>16,Y=(Z*z>>>0)+(B*z>>>16);return Z*W+(Y>>>16)+((B*W>>>0)+(Y&A)>>>16)}})},53823:function(U,F,c){"use strict";var w=c(99010),v=c(21751),l=c(96236),R=c(35617),A=c(75725),D="Invalid number representation",k="Invalid radix",B=v.RangeError,z=v.SyntaxError,Z=v.TypeError,W=/^[\da-z]+$/,Y=l("".charAt),te=l(W.exec),le=l(1 .toString),be=l("".slice);w({target:"Number",stat:!0,forced:!0},{fromString:function(pe,Oe){var xe=1,Ve,K;if(typeof pe!="string")throw Z(D);if(!pe.length||Y(pe,0)=="-"&&(xe=-1,pe=be(pe,1),!pe.length))throw z(D);if(Ve=Oe===void 0?10:R(Oe),Ve<2||Ve>36)throw B(k);if(!te(W,pe)||le(K=A(pe,Ve),Ve)!==pe)throw z(D);return xe*K}})},86934:function(U,F,c){"use strict";var w=c(99010),v=c(44405);w({target:"Number",stat:!0,forced:!0},{range:function(R,A,D){return new v(R,A,D,"number",0,1)}})},52093:function(U,F,c){"use strict";var w=c(99010),v=c(69538);w({target:"Object",stat:!0,forced:!0},{iterateEntries:function(R){return new v(R,"entries")}})},35153:function(U,F,c){"use strict";var w=c(99010),v=c(69538);w({target:"Object",stat:!0,forced:!0},{iterateKeys:function(R){return new v(R,"keys")}})},62721:function(U,F,c){"use strict";var w=c(99010),v=c(69538);w({target:"Object",stat:!0,forced:!0},{iterateValues:function(R){return new v(R,"values")}})},79653:function(U,F,c){"use strict";var w=c(99010),v=c(707),l=c(30582),R=c(82991),A=c(28613),D=c(9808),k=c(23611),B=c(62726),z=c(66572),Z=c(96099),W=c(29448),Y=c(8640),te=c(29217),le=c(23433),be=c(22353),de=c(37925),pe=c(21405),Oe=be("observable"),xe="Observable",Ve="Subscription",K="SubscriptionObserver",ke=de.getterFor,we=de.set,Me=ke(xe),Xe=ke(Ve),Ke=ke(K),At=function(ye){this.observer=k(ye),this.cleanup=void 0,this.subscriptionObserver=void 0};At.prototype={type:Ve,clean:function(){var ye=this.cleanup;if(ye){this.cleanup=void 0;try{ye()}catch(se){le(se)}}},close:function(){if(!l){var ye=this.facade,se=this.subscriptionObserver;ye.closed=!0,se&&(se.closed=!0)}this.observer=void 0},isClosed:function(){return this.observer===void 0}};var mt=function(ye,se){var Ne=we(this,new At(ye)),st;l||(this.closed=!1);try{(st=Z(ye,"start"))&&v(st,ye,this)}catch(Pr){le(Pr)}if(!Ne.isClosed()){var Fe=Ne.subscriptionObserver=new ie(Ne);try{var tt=se(Fe),Wt=tt;tt!=null&&(Ne.cleanup=D(tt.unsubscribe)?function(){Wt.unsubscribe()}:A(tt))}catch(Pr){Fe.error(Pr);return}Ne.isClosed()&&Ne.clean()}};mt.prototype=Y({},{unsubscribe:function(){var se=Xe(this);se.isClosed()||(se.close(),se.clean())}}),l&&te(mt.prototype,"closed",{configurable:!0,get:function(){return Xe(this).isClosed()}});var ie=function(ye){we(this,{type:K,subscriptionState:ye}),l||(this.closed=!1)};ie.prototype=Y({},{next:function(se){var Ne=Ke(this).subscriptionState;if(!Ne.isClosed()){var st=Ne.observer;try{var Fe=Z(st,"next");Fe&&v(Fe,st,se)}catch(tt){le(tt)}}},error:function(se){var Ne=Ke(this).subscriptionState;if(!Ne.isClosed()){var st=Ne.observer;Ne.close();try{var Fe=Z(st,"error");Fe?v(Fe,st,se):le(se)}catch(tt){le(tt)}Ne.clean()}},complete:function(){var se=Ke(this).subscriptionState;if(!se.isClosed()){var Ne=se.observer;se.close();try{var st=Z(Ne,"complete");st&&v(st,Ne)}catch(Fe){le(Fe)}se.clean()}}}),l&&te(ie.prototype,"closed",{configurable:!0,get:function(){return Ke(this).subscriptionState.isClosed()}});var oe=function(se){z(this,he),we(this,{type:xe,subscriber:A(se)})},he=oe.prototype;Y(he,{subscribe:function(se){var Ne=arguments.length;return new mt(D(se)?{next:se,error:Ne>1?arguments[1]:void 0,complete:Ne>2?arguments[2]:void 0}:B(se)?se:{},Me(this).subscriber)}}),W(he,Oe,function(){return this}),w({global:!0,forced:pe},{Observable:oe}),R(xe)},53130:function(U,F,c){"use strict";var w=c(99010),v=c(24251),l=c(707),R=c(23611),A=c(80586),D=c(38470),k=c(96099),B=c(52132),z=c(22353),Z=c(21405),W=z("observable");w({target:"Observable",stat:!0,forced:Z},{from:function(te){var le=A(this)?this:v("Observable"),be=k(R(te),W);if(be){var de=R(l(be,te));return de.constructor===le?de:new le(function(Oe){return de.subscribe(Oe)})}var pe=D(te);return new le(function(Oe){B(pe,function(xe,Ve){if(Oe.next(xe),Oe.closed)return Ve()},{IS_ITERATOR:!0,INTERRUPTED:!0}),Oe.complete()})}})},23231:function(U,F,c){c(79653),c(53130),c(62313)},62313:function(U,F,c){"use strict";var w=c(99010),v=c(24251),l=c(80586),R=c(21405),A=v("Array");w({target:"Observable",stat:!0,forced:R},{of:function(){for(var k=l(this)?this:v("Observable"),B=arguments.length,z=A(B),Z=0;Z<B;)z[Z]=arguments[Z++];return new k(function(W){for(var Y=0;Y<B;Y++)if(W.next(z[Y]),W.closed)return;W.complete()})}})},76177:function(U,F,c){"use strict";var w=c(99010),v=c(96063),l=c(11639);w({target:"Promise",stat:!0,forced:!0},{try:function(R){var A=v.f(this),D=l(R);return(D.error?A.reject:A.resolve)(D.value),A.promise}})},23293:function(U,F,c){var w=c(99010),v=c(46694),l=c(23611),R=v.toKey,A=v.set;w({target:"Reflect",stat:!0},{defineMetadata:function(k,B,z){var Z=arguments.length<4?void 0:R(arguments[3]);A(k,B,l(z),Z)}})},20888:function(U,F,c){var w=c(99010),v=c(46694),l=c(23611),R=v.toKey,A=v.getMap,D=v.store;w({target:"Reflect",stat:!0},{deleteMetadata:function(B,z){var Z=arguments.length<3?void 0:R(arguments[2]),W=A(l(z),Z,!1);if(W===void 0||!W.delete(B))return!1;if(W.size)return!0;var Y=D.get(z);return Y.delete(Z),!!Y.size||D.delete(z)}})},46147:function(U,F,c){var w=c(99010),v=c(96236),l=c(46694),R=c(23611),A=c(37993),D=c(74087),k=v(D),B=v([].concat),z=l.keys,Z=l.toKey,W=function(Y,te){var le=z(Y,te),be=A(Y);if(be===null)return le;var de=W(be,te);return de.length?le.length?k(B(le,de)):de:le};w({target:"Reflect",stat:!0},{getMetadataKeys:function(te){var le=arguments.length<2?void 0:Z(arguments[1]);return W(R(te),le)}})},11930:function(U,F,c){var w=c(99010),v=c(46694),l=c(23611),R=c(37993),A=v.has,D=v.get,k=v.toKey,B=function(z,Z,W){var Y=A(z,Z,W);if(Y)return D(z,Z,W);var te=R(Z);return te!==null?B(z,te,W):void 0};w({target:"Reflect",stat:!0},{getMetadata:function(Z,W){var Y=arguments.length<3?void 0:k(arguments[2]);return B(Z,l(W),Y)}})},74684:function(U,F,c){var w=c(99010),v=c(46694),l=c(23611),R=v.keys,A=v.toKey;w({target:"Reflect",stat:!0},{getOwnMetadataKeys:function(k){var B=arguments.length<2?void 0:A(arguments[1]);return R(l(k),B)}})},612:function(U,F,c){var w=c(99010),v=c(46694),l=c(23611),R=v.get,A=v.toKey;w({target:"Reflect",stat:!0},{getOwnMetadata:function(k,B){var z=arguments.length<3?void 0:A(arguments[2]);return R(k,l(B),z)}})},98606:function(U,F,c){var w=c(99010),v=c(46694),l=c(23611),R=c(37993),A=v.has,D=v.toKey,k=function(B,z,Z){var W=A(B,z,Z);if(W)return!0;var Y=R(z);return Y!==null?k(B,Y,Z):!1};w({target:"Reflect",stat:!0},{hasMetadata:function(z,Z){var W=arguments.length<3?void 0:D(arguments[2]);return k(z,l(Z),W)}})},56409:function(U,F,c){var w=c(99010),v=c(46694),l=c(23611),R=v.has,A=v.toKey;w({target:"Reflect",stat:!0},{hasOwnMetadata:function(k,B){var z=arguments.length<3?void 0:A(arguments[2]);return R(k,l(B),z)}})},86103:function(U,F,c){var w=c(99010),v=c(46694),l=c(23611),R=v.toKey,A=v.set;w({target:"Reflect",stat:!0},{metadata:function(k,B){return function(Z,W){A(k,B,l(Z),R(W))}}})},61633:function(U,F,c){"use strict";var w=c(99010),v=c(95582);w({target:"Set",proto:!0,real:!0,forced:!0},{addAll:v})},6009:function(U,F,c){"use strict";var w=c(99010),v=c(46828);w({target:"Set",proto:!0,real:!0,forced:!0},{deleteAll:v})},15493:function(U,F,c){"use strict";var w=c(99010),v=c(24251),l=c(707),R=c(28613),A=c(23611),D=c(86927),k=c(52132);w({target:"Set",proto:!0,real:!0,forced:!0},{difference:function(z){var Z=A(this),W=new(D(Z,v("Set")))(Z),Y=R(W.delete);return k(z,function(te){l(Y,W,te)}),W}})},15856:function(U,F,c){"use strict";var w=c(99010),v=c(23611),l=c(65976),R=c(13795),A=c(52132);w({target:"Set",proto:!0,real:!0,forced:!0},{every:function(k){var B=v(this),z=R(B),Z=l(k,arguments.length>1?arguments[1]:void 0);return!A(z,function(W,Y){if(!Z(W,W,B))return Y()},{IS_ITERATOR:!0,INTERRUPTED:!0}).stopped}})},51659:function(U,F,c){"use strict";var w=c(99010),v=c(24251),l=c(707),R=c(28613),A=c(23611),D=c(65976),k=c(86927),B=c(13795),z=c(52132);w({target:"Set",proto:!0,real:!0,forced:!0},{filter:function(W){var Y=A(this),te=B(Y),le=D(W,arguments.length>1?arguments[1]:void 0),be=new(k(Y,v("Set"))),de=R(be.add);return z(te,function(pe){le(pe,pe,Y)&&l(de,be,pe)},{IS_ITERATOR:!0}),be}})},75084:function(U,F,c){"use strict";var w=c(99010),v=c(23611),l=c(65976),R=c(13795),A=c(52132);w({target:"Set",proto:!0,real:!0,forced:!0},{find:function(k){var B=v(this),z=R(B),Z=l(k,arguments.length>1?arguments[1]:void 0);return A(z,function(W,Y){if(Z(W,W,B))return Y(W)},{IS_ITERATOR:!0,INTERRUPTED:!0}).result}})},27682:function(U,F,c){var w=c(99010),v=c(8600);w({target:"Set",stat:!0,forced:!0},{from:v})},13069:function(U,F,c){"use strict";var w=c(99010),v=c(24251),l=c(707),R=c(28613),A=c(23611),D=c(86927),k=c(52132);w({target:"Set",proto:!0,real:!0,forced:!0},{intersection:function(z){var Z=A(this),W=new(D(Z,v("Set"))),Y=R(Z.has),te=R(W.add);return k(z,function(le){l(Y,Z,le)&&l(te,W,le)}),W}})},28884:function(U,F,c){"use strict";var w=c(99010),v=c(707),l=c(28613),R=c(23611),A=c(52132);w({target:"Set",proto:!0,real:!0,forced:!0},{isDisjointFrom:function(k){var B=R(this),z=l(B.has);return!A(k,function(Z,W){if(v(z,B,Z)===!0)return W()},{INTERRUPTED:!0}).stopped}})},12819:function(U,F,c){"use strict";var w=c(99010),v=c(24251),l=c(707),R=c(28613),A=c(9808),D=c(23611),k=c(38470),B=c(52132);w({target:"Set",proto:!0,real:!0,forced:!0},{isSubsetOf:function(Z){var W=k(this),Y=D(Z),te=Y.has;return A(te)||(Y=new(v("Set"))(Z),te=R(Y.has)),!B(W,function(le,be){if(l(te,Y,le)===!1)return be()},{IS_ITERATOR:!0,INTERRUPTED:!0}).stopped}})},88695:function(U,F,c){"use strict";var w=c(99010),v=c(707),l=c(28613),R=c(23611),A=c(52132);w({target:"Set",proto:!0,real:!0,forced:!0},{isSupersetOf:function(k){var B=R(this),z=l(B.has);return!A(k,function(Z,W){if(v(z,B,Z)===!1)return W()},{INTERRUPTED:!0}).stopped}})},50561:function(U,F,c){"use strict";var w=c(99010),v=c(96236),l=c(23611),R=c(24782),A=c(13795),D=c(52132),k=v([].join),B=[].push;w({target:"Set",proto:!0,real:!0,forced:!0},{join:function(Z){var W=l(this),Y=A(W),te=Z===void 0?",":R(Z),le=[];return D(Y,B,{that:le,IS_ITERATOR:!0}),k(le,te)}})},97733:function(U,F,c){"use strict";var w=c(99010),v=c(24251),l=c(65976),R=c(707),A=c(28613),D=c(23611),k=c(86927),B=c(13795),z=c(52132);w({target:"Set",proto:!0,real:!0,forced:!0},{map:function(W){var Y=D(this),te=B(Y),le=l(W,arguments.length>1?arguments[1]:void 0),be=new(k(Y,v("Set"))),de=A(be.add);return z(te,function(pe){R(de,be,le(pe,pe,Y))},{IS_ITERATOR:!0}),be}})},28376:function(U,F,c){var w=c(99010),v=c(34663);w({target:"Set",stat:!0,forced:!0},{of:v})},35381:function(U,F,c){"use strict";var w=c(99010),v=c(21751),l=c(28613),R=c(23611),A=c(13795),D=c(52132),k=v.TypeError;w({target:"Set",proto:!0,real:!0,forced:!0},{reduce:function(z){var Z=R(this),W=A(Z),Y=arguments.length<2,te=Y?void 0:arguments[1];if(l(z),D(W,function(le){Y?(Y=!1,te=le):te=z(te,le,le,Z)},{IS_ITERATOR:!0}),Y)throw k("Reduce of empty set with no initial value");return te}})},38895:function(U,F,c){"use strict";var w=c(99010),v=c(23611),l=c(65976),R=c(13795),A=c(52132);w({target:"Set",proto:!0,real:!0,forced:!0},{some:function(k){var B=v(this),z=R(B),Z=l(k,arguments.length>1?arguments[1]:void 0);return A(z,function(W,Y){if(Z(W,W,B))return Y()},{IS_ITERATOR:!0,INTERRUPTED:!0}).stopped}})},2962:function(U,F,c){"use strict";var w=c(99010),v=c(24251),l=c(707),R=c(28613),A=c(23611),D=c(86927),k=c(52132);w({target:"Set",proto:!0,real:!0,forced:!0},{symmetricDifference:function(z){var Z=A(this),W=new(D(Z,v("Set")))(Z),Y=R(W.delete),te=R(W.add);return k(z,function(le){l(Y,W,le)||l(te,W,le)}),W}})},12116:function(U,F,c){"use strict";var w=c(99010),v=c(24251),l=c(28613),R=c(23611),A=c(86927),D=c(52132);w({target:"Set",proto:!0,real:!0,forced:!0},{union:function(B){var z=R(this),Z=new(A(z,v("Set")))(z);return D(B,l(Z.add),{that:Z}),Z}})},12282:function(U,F,c){"use strict";var w=c(99010),v=c(68138).charAt,l=c(74834),R=c(35617),A=c(24782);w({target:"String",proto:!0,forced:!0},{at:function(k){var B=A(l(this)),z=B.length,Z=R(k),W=Z>=0?Z:z+Z;return W<0||W>=z?void 0:v(B,W)}})},31113:function(U,F,c){"use strict";var w=c(99010),v=c(25257),l=c(74834),R=c(24782),A=c(37925),D=c(68138),k=D.codeAt,B=D.charAt,z="String Iterator",Z=A.set,W=A.getterFor(z),Y=v(function(le){Z(this,{type:z,string:le,index:0})},"String",function(){var le=W(this),be=le.string,de=le.index,pe;return de>=be.length?{value:void 0,done:!0}:(pe=B(be,de),le.index+=pe.length,{value:{codePoint:k(pe,0),position:de},done:!1})});w({target:"String",proto:!0,forced:!0},{codePoints:function(){return new Y(R(l(this)))}})},78497:function(U,F,c){var w=c(99010),v=c(21751),l=c(96236),R=c(69345),A=c(24782),D=c(2352),k=v.TypeError,B=Array.prototype,z=l(B.push),Z=l(B.join);w({target:"String",stat:!0,forced:!0},{cooked:function(Y){for(var te=R(Y),le=D(te),be=arguments.length,de=[],pe=0;le>pe;){var Oe=te[pe++];if(Oe===void 0)throw k("Incorrect template");if(z(de,A(Oe)),pe===le)return Z(de,"");pe<be&&z(de,A(arguments[pe]))}}})},59579:function(U,F,c){var w=c(54212);w("asyncDispose")},13749:function(U,F,c){var w=c(54212);w("dispose")},91837:function(U,F,c){var w=c(54212);w("matcher")},65217:function(U,F,c){var w=c(54212);w("metadata")},62328:function(U,F,c){var w=c(54212);w("observable")},29190:function(U,F,c){var w=c(54212);w("patternMatch")},24216:function(U,F,c){var w=c(54212);w("replaceAll")},71490:function(U,F,c){"use strict";var w=c(80713),v=c(58897).filterReject,l=c(13149),R=w.aTypedArray,A=w.exportTypedArrayMethod;A("filterOut",function(k){var B=v(R(this),k,arguments.length>1?arguments[1]:void 0);return l(this,B)},!0)},6144:function(U,F,c){"use strict";var w=c(80713),v=c(58897).filterReject,l=c(13149),R=w.aTypedArray,A=w.exportTypedArrayMethod;A("filterReject",function(k){var B=v(R(this),k,arguments.length>1?arguments[1]:void 0);return l(this,B)},!0)},87138:function(U,F,c){"use strict";var w=c(80713),v=c(59622).findLastIndex,l=w.aTypedArray,R=w.exportTypedArrayMethod;R("findLastIndex",function(D){return v(l(this),D,arguments.length>1?arguments[1]:void 0)})},24890:function(U,F,c){"use strict";var w=c(80713),v=c(59622).findLast,l=w.aTypedArray,R=w.exportTypedArrayMethod;R("findLast",function(D){return v(l(this),D,arguments.length>1?arguments[1]:void 0)})},74202:function(U,F,c){"use strict";var w=c(24251),v=c(14623),l=c(22645),R=c(80713),A=c(34557),D=R.aTypedArrayConstructor,k=R.exportTypedArrayStaticMethod;k("fromAsync",function(z){var Z=this,W=arguments.length,Y=W>1?arguments[1]:void 0,te=W>2?arguments[2]:void 0;return new(w("Promise"))(function(le){v(Z),le(l(z,Y,te))}).then(function(le){return A(D(Z),le)})},!0)},35332:function(U,F,c){"use strict";var w=c(80713),v=c(38836),l=c(16886),R=w.aTypedArray,A=w.exportTypedArrayMethod;A("groupBy",function(k){var B=arguments.length>1?arguments[1]:void 0;return v(R(this),k,B,l)},!0)},25751:function(U,F,c){"use strict";var w=c(58170),v=c(80713),l=v.aTypedArray,R=v.exportTypedArrayMethod,A=v.TYPED_ARRAY_CONSTRUCTOR;R("toReversed",function(){return w(l(this),this[A])})},11605:function(U,F,c){"use strict";var w=c(80713),v=c(96236),l=c(28613),R=c(34557),A=w.aTypedArray,D=w.exportTypedArrayMethod,k=w.TYPED_ARRAY_CONSTRUCTOR,B=v(w.TypedArrayPrototype.sort);D("toSorted",function(Z){Z!==void 0&&l(Z);var W=A(this),Y=R(W[k],W);return B(Y,Z)})},18791:function(U,F,c){"use strict";var w=c(80713),v=c(79508),l=c(96817),R=w.aTypedArray,A=w.exportTypedArrayMethod,D=w.TYPED_ARRAY_CONSTRUCTOR;A("toSpliced",function(B,z){return l(R(this),this[D],v(arguments))},{arity:2})},91112:function(U,F,c){"use strict";var w=c(96236),v=c(80713),l=c(74087),R=c(13149),A=v.aTypedArray,D=v.exportTypedArrayMethod,k=w(l);D("uniqueBy",function(z){return R(this,k(A(this),z))},!0)},68440:function(U,F,c){"use strict";var w=c(59465),v=c(80713),l=v.aTypedArray,R=v.exportTypedArrayMethod,A=v.TYPED_ARRAY_CONSTRUCTOR;R("with",function(D,k){return w(l(this),this[A],D,k)})},60347:function(U,F,c){"use strict";var w=c(99010),v=c(46828);w({target:"WeakMap",proto:!0,real:!0,forced:!0},{deleteAll:v})},42910:function(U,F,c){"use strict";var w=c(99010),v=c(37988);w({target:"WeakMap",proto:!0,real:!0,forced:!0},{emplace:v})},99889:function(U,F,c){var w=c(99010),v=c(8600);w({target:"WeakMap",stat:!0,forced:!0},{from:v})},21351:function(U,F,c){var w=c(99010),v=c(34663);w({target:"WeakMap",stat:!0,forced:!0},{of:v})},75873:function(U,F,c){"use strict";var w=c(99010),v=c(51173);w({target:"WeakMap",proto:!0,real:!0,forced:!0},{upsert:v})},66421:function(U,F,c){"use strict";var w=c(99010),v=c(95582);w({target:"WeakSet",proto:!0,real:!0,forced:!0},{addAll:v})},13467:function(U,F,c){"use strict";var w=c(99010),v=c(46828);w({target:"WeakSet",proto:!0,real:!0,forced:!0},{deleteAll:v})},57728:function(U,F,c){var w=c(99010),v=c(8600);w({target:"WeakSet",stat:!0,forced:!0},{from:v})},812:function(U,F,c){var w=c(99010),v=c(34663);w({target:"WeakSet",stat:!0,forced:!0},{of:v})},61509:function(U,F,c){var w=c(99010),v=c(21751),l=c(50409).clear;w({global:!0,bind:!0,enumerable:!0,forced:v.clearImmediate!==l},{clearImmediate:l})},64807:function(U,F,c){"use strict";var w=c(99010),v=c(24251),l=c(38830),R=c(23251).f,A=c(16216),D=c(66572),k=c(77290),B=c(32850),z=c(81597),Z=c(17094),W=c(55675),Y="DOMException",te=v("Error"),le=v(Y),be=function(){D(this,de);var Ke=arguments.length,At=B(Ke<1?void 0:arguments[0]),mt=B(Ke<2?void 0:arguments[1],"Error"),ie=new le(At,mt),oe=te(At);return oe.name=Y,R(ie,"stack",l(1,Z(oe.stack,1))),k(ie,this,be),ie},de=be.prototype=le.prototype,pe="stack"in te(Y),Oe="stack"in new le(1,2),xe=pe&&!Oe;w({global:!0,forced:W||xe},{DOMException:xe?be:le});var Ve=v(Y),K=Ve.prototype;if(K.constructor!==Ve){W||R(K,"constructor",l(1,Ve));for(var ke in z)if(A(z,ke)){var we=z[ke],Me=we.s;A(Ve,Me)||R(Ve,Me,l(6,we.c))}}},26408:function(U,F,c){c(61509),c(56308)},56308:function(U,F,c){var w=c(99010),v=c(21751),l=c(50409).set;w({global:!0,bind:!0,enumerable:!0,forced:v.setImmediate!==l},{setImmediate:l})},97051:function(U,F,c){var w=c(55675),v=c(99010),l=c(21751),R=c(24251),A=c(96236),D=c(19844),k=c(92924),B=c(9808),z=c(80586),Z=c(62726),W=c(85961),Y=c(52132),te=c(23611),le=c(81987),be=c(16216),de=c(65831),pe=c(81312),Oe=c(2352),xe=c(36861),Ve=c(97160),K=c(25381),ke=l.Object,we=l.Date,Me=l.Error,Xe=l.EvalError,Ke=l.RangeError,At=l.ReferenceError,mt=l.SyntaxError,ie=l.TypeError,oe=l.URIError,he=l.PerformanceMark,ye=l.WebAssembly,se=ye&&ye.CompileError||Me,Ne=ye&&ye.LinkError||Me,st=ye&&ye.RuntimeError||Me,Fe=R("DOMException"),tt=R("Set"),Wt=R("Map"),Pr=Wt.prototype,Qt=A(Pr.has),xr=A(Pr.get),$r=A(Pr.set),Cr=A(tt.prototype.add),sn=R("Object","keys"),ot=A([].push),_r=A((!0).valueOf),cr=A(1 .valueOf),Vr=A("".valueOf),Qn=A(we.prototype.getTime),mn=k("structuredClone"),_n="DataCloneError",Yr="Transferring",Fr=function(lt){return!D(function(){var qt=new l.Set([7]),pr=lt(qt),Hr=lt(ke(7));return pr==qt||!pr.has(7)||typeof Hr!="object"||Hr!=7})&&lt},kr=function(lt){return!D(function(){var qt=lt(new l.AggregateError([1],mn,{cause:3}));return qt.name!="AggregateError"||qt.errors[0]!=1||qt.message!=mn||qt.cause!=3})&&lt},ft=l.structuredClone,me=w||!kr(ft),ne=!ft&&Fr(function(lt){return new he(mn,{detail:lt}).detail}),fe=Fr(ft)||ne,Q=function(lt){throw new Fe("Uncloneable type: "+lt,_n)},De=function(lt,qt){throw new Fe((qt||"Cloning")+" of "+lt+" cannot be properly polyfilled in this engine",_n)},dt=function(lt,qt){if(W(lt)&&Q("Symbol"),!Z(lt))return lt;if(qt){if(Qt(qt,lt))return xr(qt,lt)}else qt=new Wt;var pr=le(lt),Hr=!1,Xr,ce,xt,Gt,Ir,nn,zi,Ui,Pi,ka;switch(pr){case"Array":xt=[],Hr=!0;break;case"Object":xt={},Hr=!0;break;case"Map":xt=new Wt,Hr=!0;break;case"Set":xt=new tt,Hr=!0;break;case"RegExp":xt=new RegExp(lt.source,Ve(lt));break;case"Error":switch(ce=lt.name,ce){case"AggregateError":xt=R("AggregateError")([]);break;case"EvalError":xt=Xe();break;case"RangeError":xt=Ke();break;case"ReferenceError":xt=At();break;case"SyntaxError":xt=mt();break;case"TypeError":xt=ie();break;case"URIError":xt=oe();break;case"CompileError":xt=se();break;case"LinkError":xt=Ne();break;case"RuntimeError":xt=st();break;default:xt=Me()}Hr=!0;break;case"DOMException":xt=new Fe(lt.message,lt.name),Hr=!0;break;case"DataView":case"Int8Array":case"Uint8Array":case"Uint8ClampedArray":case"Int16Array":case"Uint16Array":case"Int32Array":case"Uint32Array":case"Float32Array":case"Float64Array":case"BigInt64Array":case"BigUint64Array":Xr=l[pr],Z(Xr)||De(pr),xt=new Xr(dt(lt.buffer,qt),lt.byteOffset,pr==="DataView"?lt.byteLength:lt.length);break;case"DOMQuad":try{xt=new DOMQuad(dt(lt.p1,qt),dt(lt.p2,qt),dt(lt.p3,qt),dt(lt.p4,qt))}catch(Ti){fe?xt=fe(lt):De(pr)}break;case"FileList":if(Xr=l.DataTransfer,z(Xr)){for(Gt=new Xr,Ir=0,nn=Oe(lt);Ir<nn;Ir++)Gt.items.add(dt(lt[Ir],qt));xt=Gt.files}else fe?xt=fe(lt):De(pr);break;case"ImageData":try{xt=new ImageData(dt(lt.data,qt),lt.width,lt.height,{colorSpace:lt.colorSpace})}catch(Ti){fe?xt=fe(lt):De(pr)}break;default:if(fe)xt=fe(lt);else switch(pr){case"BigInt":xt=ke(lt.valueOf());break;case"Boolean":xt=ke(_r(lt));break;case"Number":xt=ke(cr(lt));break;case"String":xt=ke(Vr(lt));break;case"Date":xt=new we(Qn(lt));break;case"ArrayBuffer":Xr=l.DataView,!Xr&&typeof lt.slice!="function"&&De(pr);try{if(typeof lt.slice=="function")xt=lt.slice(0);else for(nn=lt.byteLength,xt=new ArrayBuffer(nn),Pi=new Xr(lt),ka=new Xr(xt),Ir=0;Ir<nn;Ir++)ka.setUint8(Ir,Pi.getUint8(Ir))}catch(Ti){throw new Fe("ArrayBuffer is detached",_n)}break;case"SharedArrayBuffer":xt=lt;break;case"Blob":try{xt=lt.slice(0,lt.size,lt.type)}catch(Ti){De(pr)}break;case"DOMPoint":case"DOMPointReadOnly":Xr=l[pr];try{xt=Xr.fromPoint?Xr.fromPoint(lt):new Xr(lt.x,lt.y,lt.z,lt.w)}catch(Ti){De(pr)}break;case"DOMRect":case"DOMRectReadOnly":Xr=l[pr];try{xt=Xr.fromRect?Xr.fromRect(lt):new Xr(lt.x,lt.y,lt.width,lt.height)}catch(Ti){De(pr)}break;case"DOMMatrix":case"DOMMatrixReadOnly":Xr=l[pr];try{xt=Xr.fromMatrix?Xr.fromMatrix(lt):new Xr(lt)}catch(Ti){De(pr)}break;case"AudioData":case"VideoFrame":B(lt.clone)||De(pr);try{xt=lt.clone()}catch(Ti){Q(pr)}break;case"File":try{xt=new File([lt],lt.name,lt)}catch(Ti){De(pr)}break;case"CryptoKey":case"GPUCompilationMessage":case"GPUCompilationInfo":case"ImageBitmap":case"RTCCertificate":case"WebAssembly.Module":De(pr);default:Q(pr)}}if($r(qt,lt,xt),Hr)switch(pr){case"Array":case"Object":for(zi=sn(lt),Ir=0,nn=Oe(zi);Ir<nn;Ir++)Ui=zi[Ir],de(xt,Ui,dt(lt[Ui],qt));break;case"Map":lt.forEach(function(Ti,Ge){$r(xt,dt(Ge,qt),dt(Ti,qt))});break;case"Set":lt.forEach(function(Ti){Cr(xt,dt(Ti,qt))});break;case"Error":pe(xt,"message",dt(lt.message,qt)),be(lt,"cause")&&pe(xt,"cause",dt(lt.cause,qt)),ce=="AggregateError"&&(xt.errors=dt(lt.errors,qt));case"DOMException":K&&pe(xt,"stack",dt(lt.stack,qt))}return xt},Jt=ft&&!D(function(){var lt=new ArrayBuffer(8),qt=ft(lt,{transfer:[lt]});return lt.byteLength!=0||qt.byteLength!=8}),it=function(lt,qt){if(!Z(lt))throw ie("Transfer option cannot be converted to a sequence");var pr=[];Y(lt,function(Pi){ot(pr,te(Pi))});var Hr=0,Xr=Oe(pr),ce,xt,Gt,Ir,nn,zi,Ui;if(Jt)for(Ir=ft(pr,{transfer:pr});Hr<Xr;)$r(qt,pr[Hr],Ir[Hr++]);else for(;Hr<Xr;){if(ce=pr[Hr++],Qt(qt,ce))throw new Fe("Duplicate transferable",_n);switch(xt=le(ce),xt){case"ImageBitmap":Gt=l.OffscreenCanvas,z(Gt)||De(xt,Yr);try{zi=new Gt(ce.width,ce.height),Ui=zi.getContext("bitmaprenderer"),Ui.transferFromImageBitmap(ce),nn=zi.transferToImageBitmap()}catch(Pi){}break;case"AudioData":case"VideoFrame":(!B(ce.clone)||!B(ce.close))&&De(xt,Yr);try{nn=ce.clone(),ce.close()}catch(Pi){}break;case"ArrayBuffer":case"MessagePort":case"OffscreenCanvas":case"ReadableStream":case"TransformStream":case"WritableStream":De(xt,Yr)}if(nn===void 0)throw new Fe("This object cannot be transferred: "+xt,_n);$r(qt,ce,nn)}};v({global:!0,enumerable:!0,sham:!Jt,forced:me},{structuredClone:function(qt){var pr=xe(arguments.length,1)>1&&arguments[1]!=null?te(arguments[1]):void 0,Hr=pr?pr.transfer:void 0,Xr;return Hr!==void 0&&(Xr=new Wt,it(Hr,Xr)),dt(qt,Xr)}})},17417:function(U){"use strict";var F=function(pe){return c(pe)&&!w(pe)};function c(de){return!!de&&typeof de=="object"}function w(de){var pe=Object.prototype.toString.call(de);return pe==="[object RegExp]"||pe==="[object Date]"||R(de)}var v=typeof Symbol=="function"&&Symbol.for,l=v?Symbol.for("react.element"):60103;function R(de){return de.$$typeof===l}function A(de){return Array.isArray(de)?[]:{}}function D(de,pe){return pe.clone!==!1&&pe.isMergeableObject(de)?le(A(de),de,pe):de}function k(de,pe,Oe){return de.concat(pe).map(function(xe){return D(xe,Oe)})}function B(de,pe){if(!pe.customMerge)return le;var Oe=pe.customMerge(de);return typeof Oe=="function"?Oe:le}function z(de){return Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(de).filter(function(pe){return de.propertyIsEnumerable(pe)}):[]}function Z(de){return Object.keys(de).concat(z(de))}function W(de,pe){try{return pe in de}catch(Oe){return!1}}function Y(de,pe){return W(de,pe)&&!(Object.hasOwnProperty.call(de,pe)&&Object.propertyIsEnumerable.call(de,pe))}function te(de,pe,Oe){var xe={};return Oe.isMergeableObject(de)&&Z(de).forEach(function(Ve){xe[Ve]=D(de[Ve],Oe)}),Z(pe).forEach(function(Ve){Y(de,Ve)||(W(de,Ve)&&Oe.isMergeableObject(pe[Ve])?xe[Ve]=B(Ve,Oe)(de[Ve],pe[Ve],Oe):xe[Ve]=D(pe[Ve],Oe))}),xe}function le(de,pe,Oe){Oe=Oe||{},Oe.arrayMerge=Oe.arrayMerge||k,Oe.isMergeableObject=Oe.isMergeableObject||F,Oe.cloneUnlessOtherwiseSpecified=D;var xe=Array.isArray(pe),Ve=Array.isArray(de),K=xe===Ve;return K?xe?Oe.arrayMerge(de,pe,Oe):te(de,pe,Oe):D(pe,Oe)}le.all=function(pe,Oe){if(!Array.isArray(pe))throw new Error("first argument should be an array");return pe.reduce(function(xe,Ve){return le(xe,Ve,Oe)},{})};var be=le;U.exports=be},1743:function(U){var F=Object.defineProperty,c=Object.getOwnPropertyDescriptor,w=Object.getOwnPropertyNames,v=Object.prototype.hasOwnProperty,l=(be,de)=>{for(var pe in de)F(be,pe,{get:de[pe],enumerable:!0})},R=(be,de,pe,Oe)=>{if(de&&typeof de=="object"||typeof de=="function")for(let xe of w(de))!v.call(be,xe)&&xe!==pe&&F(be,xe,{get:()=>de[xe],enumerable:!(Oe=c(de,xe))||Oe.enumerable});return be},A=be=>R(F({},"__esModule",{value:!0}),be),D={};l(D,{CLIENT_DEPS:()=>te,LOCAL_DUMI_DIR:()=>k,LOCAL_PAGES_DIR:()=>z,LOCAL_THEME_DIR:()=>B,PICKED_PKG_FIELDS:()=>Y,SP_ROUTE_PREFIX:()=>W,THEME_PREFIX:()=>Z,USELESS_TMP_FILES:()=>le}),U.exports=A(D);var k=".dumi",B=`${k}/theme`,z=`${k}/pages`,Z="dumi-theme-",W="~",Y={name:"",description:"",version:"",license:"",repository:"",author:"",authors:""},te=["@ant-design/icons-svg","@makotot/ghostui","deepmerge","lodash.throttle","prism-react-renderer","prismjs","rc-tabs","react-copy-to-clipboard","react-intl"],le=["tsconfig.json","typings.d.ts"]},35753:function(U,F,c){"use strict";c.d(F,{Z:function(){return $r}});var w=c(50959),v=Object.defineProperty,l=Object.getOwnPropertySymbols,R=Object.prototype.hasOwnProperty,A=Object.prototype.propertyIsEnumerable,D=(Cr,sn,ot)=>sn in Cr?v(Cr,sn,{enumerable:!0,configurable:!0,writable:!0,value:ot}):Cr[sn]=ot,k=(Cr,sn)=>{for(var ot in sn||(sn={}))R.call(sn,ot)&&D(Cr,ot,sn[ot]);if(l)for(var ot of l(sn))A.call(sn,ot)&&D(Cr,ot,sn[ot]);return Cr};const B=Cr=>w.createElement("svg",k({viewBox:"64 64 896 896"},Cr),w.createElement("path",{d:"M699 353h-46.9c-10.2 0-19.9 4.9-25.9 13.3L469 584.3l-71.2-98.8c-6-8.3-15.6-13.3-25.9-13.3H325c-6.5 0-10.3 7.4-6.5 12.7l124.6 172.8a31.8 31.8 0 0 0 51.7 0l210.6-292c3.9-5.3.1-12.7-6.4-12.7z"}),w.createElement("path",{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}));var z="data:image/svg+xml;base64,PHN2ZyB2aWV3Qm94PSI2NCA2NCA4OTYgODk2Ij48cGF0aCBkPSJNNjk5IDM1M2gtNDYuOWMtMTAuMiAwLTE5LjkgNC45LTI1LjkgMTMuM0w0NjkgNTg0LjNsLTcxLjItOTguOGMtNi04LjMtMTUuNi0xMy4zLTI1LjktMTMuM0gzMjVjLTYuNSAwLTEwLjMgNy40LTYuNSAxMi43bDEyNC42IDE3Mi44YTMxLjggMzEuOCAwIDAgMCA1MS43IDBsMjEwLjYtMjkyYzMuOS01LjMuMS0xMi43LTYuNC0xMi43eiIvPjxwYXRoIGQ9Ik01MTIgNjRDMjY0LjYgNjQgNjQgMjY0LjYgNjQgNTEyczIwMC42IDQ0OCA0NDggNDQ4IDQ0OC0yMDAuNiA0NDgtNDQ4Uzc1OS40IDY0IDUxMiA2NHptMCA4MjBjLTIwNS40IDAtMzcyLTE2Ni42LTM3Mi0zNzJzMTY2LjYtMzcyIDM3Mi0zNzIgMzcyIDE2Ni42IDM3MiAzNzItMTY2LjYgMzcyLTM3MiAzNzJ6Ii8+PC9zdmc+",Z=Object.defineProperty,W=Object.getOwnPropertySymbols,Y=Object.prototype.hasOwnProperty,te=Object.prototype.propertyIsEnumerable,le=(Cr,sn,ot)=>sn in Cr?Z(Cr,sn,{enumerable:!0,configurable:!0,writable:!0,value:ot}):Cr[sn]=ot,be=(Cr,sn)=>{for(var ot in sn||(sn={}))Y.call(sn,ot)&&le(Cr,ot,sn[ot]);if(W)for(var ot of W(sn))te.call(sn,ot)&&le(Cr,ot,sn[ot]);return Cr};const de=Cr=>w.createElement("svg",be({viewBox:"64 64 896 896"},Cr),w.createElement("path",{d:"M685.4 354.8c0-4.4-3.6-8-8-8l-66 .3L512 465.6l-99.3-118.4-66.1-.3c-4.4 0-8 3.5-8 8 0 1.9.7 3.7 1.9 5.2l130.1 155L340.5 670a8.32 8.32 0 0 0-1.9 5.2c0 4.4 3.6 8 8 8l66.1-.3L512 564.4l99.3 118.4 66 .3c4.4 0 8-3.5 8-8 0-1.9-.7-3.7-1.9-5.2L553.5 515l130.1-155c1.2-1.4 1.8-3.3 1.8-5.2z"}),w.createElement("path",{d:"M512 65C264.6 65 64 265.6 64 513s200.6 448 448 448 448-200.6 448-448S759.4 65 512 65zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}));var pe="data:image/svg+xml;base64,PHN2ZyB2aWV3Qm94PSI2NCA2NCA4OTYgODk2Ij48cGF0aCBkPSJNNjg1LjQgMzU0LjhjMC00LjQtMy42LTgtOC04bC02NiAuM0w1MTIgNDY1LjZsLTk5LjMtMTE4LjQtNjYuMS0uM2MtNC40IDAtOCAzLjUtOCA4IDAgMS45LjcgMy43IDEuOSA1LjJsMTMwLjEgMTU1TDM0MC41IDY3MGE4LjMyIDguMzIgMCAwIDAtMS45IDUuMmMwIDQuNCAzLjYgOCA4IDhsNjYuMS0uM0w1MTIgNTY0LjRsOTkuMyAxMTguNCA2NiAuM2M0LjQgMCA4LTMuNSA4LTggMC0xLjktLjctMy43LTEuOS01LjJMNTUzLjUgNTE1bDEzMC4xLTE1NWMxLjItMS40IDEuOC0zLjMgMS44LTUuMnoiLz48cGF0aCBkPSJNNTEyIDY1QzI2NC42IDY1IDY0IDI2NS42IDY0IDUxM3MyMDAuNiA0NDggNDQ4IDQ0OCA0NDgtMjAwLjYgNDQ4LTQ0OFM3NTkuNCA2NSA1MTIgNjV6bTAgODIwYy0yMDUuNCAwLTM3Mi0xNjYuNi0zNzItMzcyczE2Ni42LTM3MiAzNzItMzcyIDM3MiAxNjYuNiAzNzIgMzcyLTE2Ni42IDM3Mi0zNzIgMzcyeiIvPjwvc3ZnPg==",Oe=Object.defineProperty,xe=Object.getOwnPropertySymbols,Ve=Object.prototype.hasOwnProperty,K=Object.prototype.propertyIsEnumerable,ke=(Cr,sn,ot)=>sn in Cr?Oe(Cr,sn,{enumerable:!0,configurable:!0,writable:!0,value:ot}):Cr[sn]=ot,we=(Cr,sn)=>{for(var ot in sn||(sn={}))Ve.call(sn,ot)&&ke(Cr,ot,sn[ot]);if(xe)for(var ot of xe(sn))K.call(sn,ot)&&ke(Cr,ot,sn[ot]);return Cr};const Me=Cr=>w.createElement("svg",we({viewBox:"64 64 896 896"},Cr),w.createElement("path",{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}),w.createElement("path",{d:"M464 336a48 48 0 1 0 96 0 48 48 0 1 0-96 0zm72 112h-48c-4.4 0-8 3.6-8 8v272c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V456c0-4.4-3.6-8-8-8z"}));var Xe="data:image/svg+xml;base64,PHN2ZyB2aWV3Qm94PSI2NCA2NCA4OTYgODk2Ij48cGF0aCBkPSJNNTEyIDY0QzI2NC42IDY0IDY0IDI2NC42IDY0IDUxMnMyMDAuNiA0NDggNDQ4IDQ0OCA0NDgtMjAwLjYgNDQ4LTQ0OFM3NTkuNCA2NCA1MTIgNjR6bTAgODIwYy0yMDUuNCAwLTM3Mi0xNjYuNi0zNzItMzcyczE2Ni42LTM3MiAzNzItMzcyIDM3MiAxNjYuNiAzNzIgMzcyLTE2Ni42IDM3Mi0zNzIgMzcyeiIvPjxwYXRoIGQ9Ik00NjQgMzM2YTQ4IDQ4IDAgMSAwIDk2IDAgNDggNDggMCAxIDAtOTYgMHptNzIgMTEyaC00OGMtNC40IDAtOCAzLjYtOCA4djI3MmMwIDQuNCAzLjYgOCA4IDhoNDhjNC40IDAgOC0zLjYgOC04VjQ1NmMwLTQuNC0zLjYtOC04LTh6Ii8+PC9zdmc+",Ke=Object.defineProperty,At=Object.getOwnPropertySymbols,mt=Object.prototype.hasOwnProperty,ie=Object.prototype.propertyIsEnumerable,oe=(Cr,sn,ot)=>sn in Cr?Ke(Cr,sn,{enumerable:!0,configurable:!0,writable:!0,value:ot}):Cr[sn]=ot,he=(Cr,sn)=>{for(var ot in sn||(sn={}))mt.call(sn,ot)&&oe(Cr,ot,sn[ot]);if(At)for(var ot of At(sn))ie.call(sn,ot)&&oe(Cr,ot,sn[ot]);return Cr};const ye=Cr=>w.createElement("svg",he({viewBox:"64 64 896 896"},Cr),w.createElement("path",{d:"M464 720a48 48 0 1 0 96 0 48 48 0 1 0-96 0zm16-304v184c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V416c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8zm475.7 440-416-720c-6.2-10.7-16.9-16-27.7-16s-21.6 5.3-27.7 16l-416 720C56 877.4 71.4 904 96 904h832c24.6 0 40-26.6 27.7-48zm-783.5-27.9L512 239.9l339.8 588.2H172.2z"}));var se="data:image/svg+xml;base64,PHN2ZyB2aWV3Qm94PSI2NCA2NCA4OTYgODk2Ij48cGF0aCBkPSJNNDY0IDcyMGE0OCA0OCAwIDEgMCA5NiAwIDQ4IDQ4IDAgMSAwLTk2IDB6bTE2LTMwNHYxODRjMCA0LjQgMy42IDggOCA4aDQ4YzQuNCAwIDgtMy42IDgtOFY0MTZjMC00LjQtMy42LTgtOC04aC00OGMtNC40IDAtOCAzLjYtOCA4em00NzUuNyA0NDAtNDE2LTcyMGMtNi4yLTEwLjctMTYuOS0xNi0yNy43LTE2cy0yMS42IDUuMy0yNy43IDE2bC00MTYgNzIwQzU2IDg3Ny40IDcxLjQgOTA0IDk2IDkwNGg4MzJjMjQuNiAwIDQwLTI2LjYgMjcuNy00OHptLTc4My41LTI3LjlMNTEyIDIzOS45bDMzOS44IDU4OC4ySDE3Mi4yeiIvPjwvc3ZnPg==";function Ne(Cr,sn){return Pr(Cr)||Wt(Cr,sn)||Fe(Cr,sn)||st()}function st(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Fe(Cr,sn){if(!!Cr){if(typeof Cr=="string")return tt(Cr,sn);var ot=Object.prototype.toString.call(Cr).slice(8,-1);if(ot==="Object"&&Cr.constructor&&(ot=Cr.constructor.name),ot==="Map"||ot==="Set")return Array.from(Cr);if(ot==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(ot))return tt(Cr,sn)}}function tt(Cr,sn){(sn==null||sn>Cr.length)&&(sn=Cr.length);for(var ot=0,_r=new Array(sn);ot<sn;ot++)_r[ot]=Cr[ot];return _r}function Wt(Cr,sn){var ot=Cr==null?null:typeof Symbol!="undefined"&&Cr[Symbol.iterator]||Cr["@@iterator"];if(ot!=null){var _r=[],cr=!0,Vr=!1,Qn,mn;try{for(ot=ot.call(Cr);!(cr=(Qn=ot.next()).done)&&(_r.push(Qn.value),!(sn&&_r.length===sn));cr=!0);}catch(_n){Vr=!0,mn=_n}finally{try{!cr&&ot.return!=null&&ot.return()}finally{if(Vr)throw mn}}return _r}}function Pr(Cr){if(Array.isArray(Cr))return Cr}var Qt={info:Me,warning:ye,success:B,error:de},xr=function(sn){var ot=(0,w.useState)(function(){return Qt[sn.type]}),_r=Ne(ot,1),cr=_r[0];return w.createElement("div",{className:"dumi-default-container markdown","data-type":sn.type},w.createElement(cr,null),w.createElement("h4",null,sn.title||sn.type.toUpperCase()),w.createElement("section",null,sn.children))},$r=xr},58935:function(U,F,c){"use strict";c.d(F,{Z:function(){return Ep}});var w=c(55566),v=c(50959),l=Object.defineProperty,R=Object.getOwnPropertySymbols,A=Object.prototype.hasOwnProperty,D=Object.prototype.propertyIsEnumerable,k=(H,ue,_e)=>ue in H?l(H,ue,{enumerable:!0,configurable:!0,writable:!0,value:_e}):H[ue]=_e,B=(H,ue)=>{for(var _e in ue||(ue={}))A.call(ue,_e)&&k(H,_e,ue[_e]);if(R)for(var _e of R(ue))D.call(ue,_e)&&k(H,_e,ue[_e]);return H};const z=H=>v.createElement("svg",B({viewBox:"64 64 896 896"},H),v.createElement("path",{d:"m709.6 210 .4-.2h.2L512 96 313.9 209.8h-.2l.7.3L151.5 304v416L512 928l360.5-208V304l-162.9-94zM482.7 843.6 339.6 761V621.4L210 547.8V372.9l272.7 157.3v313.4zM238.2 321.5l134.7-77.8 138.9 79.7 139.1-79.9 135.2 78-273.9 158-274-158zM814 548.3l-128.8 73.1v139.1l-143.9 83V530.4L814 373.1v175.2z"}));var Z="data:image/svg+xml;base64,PHN2ZyB2aWV3Qm94PSI2NCA2NCA4OTYgODk2Ij48cGF0aCBkPSJtNzA5LjYgMjEwIC40LS4yaC4yTDUxMiA5NiAzMTMuOSAyMDkuOGgtLjJsLjcuM0wxNTEuNSAzMDR2NDE2TDUxMiA5MjhsMzYwLjUtMjA4VjMwNGwtMTYyLjktOTR6TTQ4Mi43IDg0My42IDMzOS42IDc2MVY2MjEuNEwyMTAgNTQ3LjhWMzcyLjlsMjcyLjcgMTU3LjN2MzEzLjR6TTIzOC4yIDMyMS41bDEzNC43LTc3LjggMTM4LjkgNzkuNyAxMzkuMS03OS45IDEzNS4yIDc4LTI3My45IDE1OC0yNzQtMTU4ek04MTQgNTQ4LjNsLTEyOC44IDczLjF2MTM5LjFsLTE0My45IDgzVjUzMC40TDgxNCAzNzMuMXYxNzUuMnoiLz48L3N2Zz4=",W=Object.defineProperty,Y=Object.getOwnPropertySymbols,te=Object.prototype.hasOwnProperty,le=Object.prototype.propertyIsEnumerable,be=(H,ue,_e)=>ue in H?W(H,ue,{enumerable:!0,configurable:!0,writable:!0,value:_e}):H[ue]=_e,de=(H,ue)=>{for(var _e in ue||(ue={}))te.call(ue,_e)&&be(H,_e,ue[_e]);if(Y)for(var _e of Y(ue))le.call(ue,_e)&&be(H,_e,ue[_e]);return H};const pe=H=>v.createElement("svg",de({viewBox:"64 64 896 896"},H),v.createElement("path",{d:"M848 359.3H627.7L825.8 109c4.1-5.3.4-13-6.3-13H436c-2.8 0-5.5 1.5-6.9 4L170 547.5c-3.1 5.3.7 12 6.9 12h174.4l-89.4 357.6c-1.9 7.8 7.5 13.3 13.3 7.7L853.5 373c5.2-4.9 1.7-13.7-5.5-13.7zM378.2 732.5l60.3-241H281.1l189.6-327.4h224.6L487 427.4h211L378.2 732.5z"}));var Oe="data:image/svg+xml;base64,PHN2ZyB2aWV3Qm94PSI2NCA2NCA4OTYgODk2Ij48cGF0aCBkPSJNODQ4IDM1OS4zSDYyNy43TDgyNS44IDEwOWM0LjEtNS4zLjQtMTMtNi4zLTEzSDQzNmMtMi44IDAtNS41IDEuNS02LjkgNEwxNzAgNTQ3LjVjLTMuMSA1LjMuNyAxMiA2LjkgMTJoMTc0LjRsLTg5LjQgMzU3LjZjLTEuOSA3LjggNy41IDEzLjMgMTMuMyA3LjdMODUzLjUgMzczYzUuMi00LjkgMS43LTEzLjctNS41LTEzLjd6TTM3OC4yIDczMi41bDYwLjMtMjQxSDI4MS4xbDE4OS42LTMyNy40aDIyNC42TDQ4NyA0MjcuNGgyMTFMMzc4LjIgNzMyLjV6Ii8+PC9zdmc+",xe=c(28920),Ve=function(){return v.createElement(v.Fragment,null)},K=Ve,ke=c(24250),we=c(67519),Me=c(87643),Xe=c(6961),Ke=c(10082),At=c(91458),mt=c(84875),ie=c.n(mt),oe=function(){if(typeof navigator=="undefined"||typeof window=="undefined")return!1;var H=navigator.userAgent||navigator.vendor||window.opera;return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(H)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw-(n|u)|c55\/|capi|ccwa|cdm-|cell|chtm|cldc|cmd-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc-s|devi|dica|dmob|do(c|p)o|ds(12|-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(-|_)|g1 u|g560|gene|gf-5|g-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd-(m|p|t)|hei-|hi(pt|ta)|hp( i|ip)|hs-c|ht(c(-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i-(20|go|ma)|i230|iac( |-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|-[a-w])|libw|lynx|m1-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|-([1-8]|c))|phil|pire|pl(ay|uc)|pn-2|po(ck|rt|se)|prox|psio|pt-g|qa-a|qc(07|12|21|32|60|-[2-7]|i-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h-|oo|p-)|sdk\/|se(c(-|0|1)|47|mc|nd|ri)|sgh-|shar|sie(-|m)|sk-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h-|v-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl-|tdg-|tel(i|m)|tim-|t-mo|to(pl|sh)|ts(70|m-|m3|m5)|tx-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas-|your|zeto|zte-/i.test(H==null?void 0:H.substr(0,4))};function he(H){var ue=v.useRef();ue.current=H;var _e=v.useCallback(function(){for(var Be,rt=arguments.length,at=new Array(rt),Ue=0;Ue<rt;Ue++)at[Ue]=arguments[Ue];return(Be=ue.current)===null||Be===void 0?void 0:Be.call.apply(Be,[ue].concat(at))},[]);return _e}function ye(){return!!(typeof window!="undefined"&&window.document&&window.document.createElement)}var se=ye()?v.useLayoutEffect:v.useEffect,Ne=se,st=function(ue,_e){var Be=v.useRef(!0);se(function(){if(!Be.current)return ue()},_e),se(function(){return Be.current=!1,function(){Be.current=!0}},[])};function Fe(H){var ue=v.useRef(!1),_e=v.useState(H),Be=(0,Xe.Z)(_e,2),rt=Be[0],at=Be[1];v.useEffect(function(){return ue.current=!1,function(){ue.current=!0}},[]);function Ue(Xt,Ot){Ot&&ue.current||at(Xt)}return[rt,Ue]}var tt;(function(H){H[H.INNER=0]="INNER",H[H.PROP=1]="PROP"})(tt||(tt={}));function Wt(H){return H!==void 0}function Pr(H,ue){var _e=ue||{},Be=_e.defaultValue,rt=_e.value,at=_e.onChange,Ue=_e.postState,Xt=Fe(function(){var Bi=void 0,ki;return Wt(rt)?(Bi=rt,ki=tt.PROP):Wt(Be)?(Bi=typeof Be=="function"?Be():Be,ki=tt.PROP):(Bi=typeof H=="function"?H():H,ki=tt.INNER),[Bi,ki,Bi]}),Ot=(0,Xe.Z)(Xt,2),vr=Ot[0],xn=Ot[1],Pn=Wt(rt)?rt:vr[0],ti=Ue?Ue(Pn):Pn;st(function(){xn(function(Bi){var ki=(0,Xe.Z)(Bi,1),Gi=ki[0];return[rt,tt.PROP,Gi]})},[rt]);var Yn=v.useRef(),On=he(function(Bi,ki){xn(function(Gi){var Di=(0,Xe.Z)(Gi,3),Fi=Di[0],bi=Di[1],qi=Di[2],di=typeof Bi=="function"?Bi(Fi):Bi;if(di===Fi)return Gi;var ba=bi===tt.INNER&&Yn.current!==qi?qi:Fi;return[di,tt.INNER,ba]},ki)}),Ni=he(at);return Ne(function(){var Bi=(0,Xe.Z)(vr,3),ki=Bi[0],Gi=Bi[1],Di=Bi[2];ki!==Di&&Gi===tt.INNER&&(Ni(ki,Di),Yn.current=Di)},[vr]),[ti,On]}var Qt=c(10422);function xr(H){return H instanceof HTMLElement?H:Qt.findDOMNode(H)}var $r=c(56237);function Cr(H,ue,_e){var Be=v.useRef({});return(!("value"in Be.current)||_e(Be.current.condition,ue))&&(Be.current.value=H(),Be.current.condition=ue),Be.current.value}function sn(H,ue){typeof H=="function"?H(ue):(0,Ke.Z)(H)==="object"&&H&&"current"in H&&(H.current=ue)}function ot(){for(var H=arguments.length,ue=new Array(H),_e=0;_e<H;_e++)ue[_e]=arguments[_e];var Be=ue.filter(function(rt){return rt});return Be.length<=1?Be[0]:function(rt){ue.forEach(function(at){sn(at,rt)})}}function _r(){for(var H=arguments.length,ue=new Array(H),_e=0;_e<H;_e++)ue[_e]=arguments[_e];return useMemo(function(){return ot.apply(void 0,ue)},ue,function(Be,rt){return Be.length===rt.length&&Be.every(function(at,Ue){return at===rt[Ue]})})}function cr(H){var ue,_e,Be=(0,$r.isMemo)(H)?H.type.type:H.type;return!(typeof Be=="function"&&!(!((ue=Be.prototype)===null||ue===void 0)&&ue.render)||typeof H=="function"&&!(!((_e=H.prototype)===null||_e===void 0)&&_e.render))}function Vr(H,ue){var _e={};return _e[H.toLowerCase()]=ue.toLowerCase(),_e["Webkit".concat(H)]="webkit".concat(ue),_e["Moz".concat(H)]="moz".concat(ue),_e["ms".concat(H)]="MS".concat(ue),_e["O".concat(H)]="o".concat(ue.toLowerCase()),_e}function Qn(H,ue){var _e={animationend:Vr("Animation","AnimationEnd"),transitionend:Vr("Transition","TransitionEnd")};return H&&("AnimationEvent"in ue||delete _e.animationend.animation,"TransitionEvent"in ue||delete _e.transitionend.transition),_e}var mn=Qn(ye(),typeof window!="undefined"?window:{}),_n={};if(ye()){var Yr=document.createElement("div");_n=Yr.style}var Fr={};function kr(H){if(Fr[H])return Fr[H];var ue=mn[H];if(ue)for(var _e=Object.keys(ue),Be=_e.length,rt=0;rt<Be;rt+=1){var at=_e[rt];if(Object.prototype.hasOwnProperty.call(ue,at)&&at in _n)return Fr[H]=ue[at],Fr[H]}return""}var ft=kr("animationend"),me=kr("transitionend"),ne=!!(ft&&me),fe=ft||"animationend",Q=me||"transitionend";function De(H,ue){if(!H)return null;if((0,Ke.Z)(H)==="object"){var _e=ue.replace(/-\w/g,function(Be){return Be[1].toUpperCase()});return H[_e]}return"".concat(H,"-").concat(ue)}var dt="none",Jt="appear",it="enter",lt="leave",qt="none",pr="prepare",Hr="start",Xr="active",ce="end",xt=function(ue){return+setTimeout(ue,16)},Gt=function(ue){return clearTimeout(ue)};typeof window!="undefined"&&"requestAnimationFrame"in window&&(xt=function(ue){return window.requestAnimationFrame(ue)},Gt=function(ue){return window.cancelAnimationFrame(ue)});var Ir=0,nn=new Map;function zi(H){nn.delete(H)}var Ui=function(ue){var _e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;Ir+=1;var Be=Ir;function rt(at){if(at===0)zi(Be),ue();else{var Ue=xt(function(){rt(at-1)});nn.set(Be,Ue)}}return rt(_e),Be};Ui.cancel=function(H){var ue=nn.get(H);return zi(ue),Gt(ue)};var Pi=Ui,ka=function(){var H=v.useRef(null);function ue(){Pi.cancel(H.current)}function _e(Be){var rt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:2;ue();var at=Pi(function(){rt<=1?Be({isCanceled:function(){return at!==H.current}}):_e(Be,rt-1)});H.current=at}return v.useEffect(function(){return function(){ue()}},[]),[_e,ue]},Ti=ye()?v.useLayoutEffect:v.useEffect,Ge=Ti,et=[pr,Hr,Xr,ce],gt=!1,ht=!0;function Et(H){return H===Xr||H===ce}var Zt=function(H,ue){var _e=Fe(qt),Be=(0,Xe.Z)(_e,2),rt=Be[0],at=Be[1],Ue=ka(),Xt=(0,Xe.Z)(Ue,2),Ot=Xt[0],vr=Xt[1];function xn(){at(pr,!0)}return Ge(function(){if(rt!==qt&&rt!==ce){var Pn=et.indexOf(rt),ti=et[Pn+1],Yn=ue(rt);Yn===gt?at(ti,!0):Ot(function(On){function Ni(){On.isCanceled()||at(ti,!0)}Yn===!0?Ni():Promise.resolve(Yn).then(Ni)})}},[H,rt]),v.useEffect(function(){return function(){vr()}},[]),[xn,rt]},sr=function(H){var ue=(0,v.useRef)(),_e=(0,v.useRef)(H);_e.current=H;var Be=v.useCallback(function(Ue){_e.current(Ue)},[]);function rt(Ue){Ue&&(Ue.removeEventListener(Q,Be),Ue.removeEventListener(fe,Be))}function at(Ue){ue.current&&ue.current!==Ue&&rt(ue.current),Ue&&Ue!==ue.current&&(Ue.addEventListener(Q,Be),Ue.addEventListener(fe,Be),ue.current=Ue)}return v.useEffect(function(){return function(){rt(ue.current)}},[]),[at,rt]};function bt(H,ue,_e,Be){var rt=Be.motionEnter,at=rt===void 0?!0:rt,Ue=Be.motionAppear,Xt=Ue===void 0?!0:Ue,Ot=Be.motionLeave,vr=Ot===void 0?!0:Ot,xn=Be.motionDeadline,Pn=Be.motionLeaveImmediately,ti=Be.onAppearPrepare,Yn=Be.onEnterPrepare,On=Be.onLeavePrepare,Ni=Be.onAppearStart,Bi=Be.onEnterStart,ki=Be.onLeaveStart,Gi=Be.onAppearActive,Di=Be.onEnterActive,Fi=Be.onLeaveActive,bi=Be.onAppearEnd,qi=Be.onEnterEnd,di=Be.onLeaveEnd,ba=Be.onVisibleChanged,_a=Fe(),Ya=(0,Xe.Z)(_a,2),Te=Ya[0],Qe=Ya[1],pt=Fe(dt),Vt=(0,Xe.Z)(pt,2),Sr=Vt[0],dr=Vt[1],Ar=Fe(null),hn=(0,Xe.Z)(Ar,2),Tn=hn[0],Hn=hn[1],Bn=(0,v.useRef)(!1),bn=(0,v.useRef)(null);function En(){return _e()}var Mn=(0,v.useRef)(!1);function Un(mi){var qn=En();if(!(mi&&!mi.deadline&&mi.target!==qn)){var Ii=Mn.current,_i;Sr===Jt&&Ii?_i=bi==null?void 0:bi(qn,mi):Sr===it&&Ii?_i=qi==null?void 0:qi(qn,mi):Sr===lt&&Ii&&(_i=di==null?void 0:di(qn,mi)),Sr!==dt&&Ii&&_i!==!1&&(dr(dt,!0),Hn(null,!0))}}var Nr=sr(Un),Er=(0,Xe.Z)(Nr,1),oi=Er[0],wi=v.useMemo(function(){var mi,qn,Ii;switch(Sr){case Jt:return mi={},(0,we.Z)(mi,pr,ti),(0,we.Z)(mi,Hr,Ni),(0,we.Z)(mi,Xr,Gi),mi;case it:return qn={},(0,we.Z)(qn,pr,Yn),(0,we.Z)(qn,Hr,Bi),(0,we.Z)(qn,Xr,Di),qn;case lt:return Ii={},(0,we.Z)(Ii,pr,On),(0,we.Z)(Ii,Hr,ki),(0,we.Z)(Ii,Xr,Fi),Ii;default:return{}}},[Sr]),Wn=Zt(Sr,function(mi){if(mi===pr){var qn=wi[pr];return qn?qn(En()):gt}if(Xi in wi){var Ii;Hn(((Ii=wi[Xi])===null||Ii===void 0?void 0:Ii.call(wi,En(),null))||null)}return Xi===Xr&&(oi(En()),xn>0&&(clearTimeout(bn.current),bn.current=setTimeout(function(){Un({deadline:!0})},xn))),ht}),ci=(0,Xe.Z)(Wn,2),Mi=ci[0],Xi=ci[1],Rn=Et(Xi);Mn.current=Rn,Ge(function(){Qe(ue);var mi=Bn.current;if(Bn.current=!0,!!H){var qn;!mi&&ue&&Xt&&(qn=Jt),mi&&ue&&at&&(qn=it),(mi&&!ue&&vr||!mi&&Pn&&!ue&&vr)&&(qn=lt),qn&&(dr(qn),Mi())}},[ue]),(0,v.useEffect)(function(){(Sr===Jt&&!Xt||Sr===it&&!at||Sr===lt&&!vr)&&dr(dt)},[Xt,at,vr]),(0,v.useEffect)(function(){return function(){Bn.current=!1,clearTimeout(bn.current)}},[]);var kn=v.useRef(!1);(0,v.useEffect)(function(){Te&&(kn.current=!0),Te!==void 0&&Sr===dt&&((kn.current||Te)&&(ba==null||ba(Te)),kn.current=!0)},[Te,Sr]);var Si=Tn;return wi[pr]&&Xi===Hr&&(Si=(0,Me.Z)({transition:"none"},Si)),[Sr,Xi,Si,Te!=null?Te:ue]}var Ft=c(85665),zr=c(58966),Jn=c(29848),yn=c(28276),tn=c(4878),ni=c(85412);function ta(H){var ue=(0,tn.Z)();return function(){var Be=(0,yn.Z)(H),rt;if(ue){var at=(0,yn.Z)(this).constructor;rt=Reflect.construct(Be,arguments,at)}else rt=Be.apply(this,arguments);return(0,ni.Z)(this,rt)}}var fa=function(H){(0,Jn.Z)(_e,H);var ue=ta(_e);function _e(){return(0,Ft.Z)(this,_e),ue.apply(this,arguments)}return(0,zr.Z)(_e,[{key:"render",value:function(){return this.props.children}}]),_e}(v.Component),Mr=fa;function Wr(H){var ue=H;(0,Ke.Z)(H)==="object"&&(ue=H.transitionSupport);function _e(rt){return!!(rt.motionName&&ue)}var Be=v.forwardRef(function(rt,at){var Ue=rt.visible,Xt=Ue===void 0?!0:Ue,Ot=rt.removeOnLeave,vr=Ot===void 0?!0:Ot,xn=rt.forceRender,Pn=rt.children,ti=rt.motionName,Yn=rt.leavedClassName,On=rt.eventProps,Ni=_e(rt),Bi=(0,v.useRef)(),ki=(0,v.useRef)();function Gi(){try{return Bi.current instanceof HTMLElement?Bi.current:xr(ki.current)}catch(Ar){return null}}var Di=bt(Ni,Xt,Gi,rt),Fi=(0,Xe.Z)(Di,4),bi=Fi[0],qi=Fi[1],di=Fi[2],ba=Fi[3],_a=v.useRef(ba);ba&&(_a.current=!0);var Ya=v.useCallback(function(Ar){Bi.current=Ar,sn(at,Ar)},[at]),Te,Qe=(0,Me.Z)((0,Me.Z)({},On),{},{visible:Xt});if(!Pn)Te=null;else if(bi===dt||!_e(rt))ba?Te=Pn((0,Me.Z)({},Qe),Ya):!vr&&_a.current?Te=Pn((0,Me.Z)((0,Me.Z)({},Qe),{},{className:Yn}),Ya):xn?Te=Pn((0,Me.Z)((0,Me.Z)({},Qe),{},{style:{display:"none"}}),Ya):Te=null;else{var pt,Vt;qi===pr?Vt="prepare":Et(qi)?Vt="active":qi===Hr&&(Vt="start"),Te=Pn((0,Me.Z)((0,Me.Z)({},Qe),{},{className:ie()(De(ti,bi),(pt={},(0,we.Z)(pt,De(ti,"".concat(bi,"-").concat(Vt)),Vt),(0,we.Z)(pt,ti,typeof ti=="string"),pt)),style:di}),Ya)}if(v.isValidElement(Te)&&cr(Te)){var Sr=Te,dr=Sr.ref;dr||(Te=v.cloneElement(Te,{ref:Ya}))}return v.createElement(Mr,{ref:ki},Te)});return Be.displayName="CSSMotion",Be}var Zi=Wr(ne),Wi="add",xo="keep",ua="remove",Ur="removed";function Jr(H){var ue;return H&&(0,Ke.Z)(H)==="object"&&"key"in H?ue=H:ue={key:H},(0,Me.Z)((0,Me.Z)({},ue),{},{key:String(ue.key)})}function Eo(){var H=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return H.map(Jr)}function Fo(){var H=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],ue=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],_e=[],Be=0,rt=ue.length,at=Eo(H),Ue=Eo(ue);at.forEach(function(vr){for(var xn=!1,Pn=Be;Pn<rt;Pn+=1){var ti=Ue[Pn];if(ti.key===vr.key){Be<Pn&&(_e=_e.concat(Ue.slice(Be,Pn).map(function(Yn){return(0,Me.Z)((0,Me.Z)({},Yn),{},{status:Wi})})),Be=Pn),_e.push((0,Me.Z)((0,Me.Z)({},ti),{},{status:xo})),Be+=1,xn=!0;break}}xn||_e.push((0,Me.Z)((0,Me.Z)({},vr),{},{status:ua}))}),Be<rt&&(_e=_e.concat(Ue.slice(Be).map(function(vr){return(0,Me.Z)((0,Me.Z)({},vr),{},{status:Wi})})));var Xt={};_e.forEach(function(vr){var xn=vr.key;Xt[xn]=(Xt[xn]||0)+1});var Ot=Object.keys(Xt).filter(function(vr){return Xt[vr]>1});return Ot.forEach(function(vr){_e=_e.filter(function(xn){var Pn=xn.key,ti=xn.status;return Pn!==vr||ti!==ua}),_e.forEach(function(xn){xn.key===vr&&(xn.status=xo)})}),_e}var So=["component","children","onVisibleChanged","onAllRemoved"],Xa=["status"],Ko=["eventProps","visible","children","motionName","motionAppear","motionEnter","motionLeave","motionLeaveImmediately","motionDeadline","removeOnLeave","leavedClassName","onAppearStart","onAppearActive","onAppearEnd","onEnterStart","onEnterActive","onEnterEnd","onLeaveStart","onLeaveActive","onLeaveEnd"];function No(H){var ue=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Zi,_e=function(Be){(0,Jn.Z)(at,Be);var rt=ta(at);function at(){var Ue;(0,Ft.Z)(this,at);for(var Xt=arguments.length,Ot=new Array(Xt),vr=0;vr<Xt;vr++)Ot[vr]=arguments[vr];return Ue=rt.call.apply(rt,[this].concat(Ot)),Ue.state={keyEntities:[]},Ue.removeKey=function(xn){var Pn=Ue.state.keyEntities,ti=Pn.map(function(Yn){return Yn.key!==xn?Yn:(0,Me.Z)((0,Me.Z)({},Yn),{},{status:Ur})});return Ue.setState({keyEntities:ti}),ti.filter(function(Yn){var On=Yn.status;return On!==Ur}).length},Ue}return(0,zr.Z)(at,[{key:"render",value:function(){var Xt=this,Ot=this.state.keyEntities,vr=this.props,xn=vr.component,Pn=vr.children,ti=vr.onVisibleChanged,Yn=vr.onAllRemoved,On=(0,At.Z)(vr,So),Ni=xn||v.Fragment,Bi={};return Ko.forEach(function(ki){Bi[ki]=On[ki],delete On[ki]}),delete On.keys,v.createElement(Ni,On,Ot.map(function(ki){var Gi=ki.status,Di=(0,At.Z)(ki,Xa),Fi=Gi===Wi||Gi===xo;return v.createElement(ue,(0,ke.Z)({},Bi,{key:Di.key,visible:Fi,eventProps:Di,onVisibleChanged:function(qi){if(ti==null||ti(qi,{key:Di.key}),!qi){var di=Xt.removeKey(Di.key);di===0&&Yn&&Yn()}}}),Pn)}))}}],[{key:"getDerivedStateFromProps",value:function(Xt,Ot){var vr=Xt.keys,xn=Ot.keyEntities,Pn=Eo(vr),ti=Fo(xn,Pn);return{keyEntities:ti.filter(function(Yn){var On=xn.find(function(Ni){var Bi=Ni.key;return Yn.key===Bi});return!(On&&On.status===Ur&&Yn.status===ua)})}}}]),at}(v.Component);return _e.defaultProps={component:"div"},_e}var ui=No(ne),jn=Zi,rr=(0,v.createContext)(null),ps=v.forwardRef(function(H,ue){var _e=H.prefixCls,Be=H.className,rt=H.style,at=H.id,Ue=H.active,Xt=H.tabKey,Ot=H.children;return v.createElement("div",{id:at&&"".concat(at,"-panel-").concat(Xt),role:"tabpanel",tabIndex:Ue?0:-1,"aria-labelledby":at&&"".concat(at,"-tab-").concat(Xt),"aria-hidden":!Ue,style:rt,className:ie()(_e,Ue&&"".concat(_e,"-active"),Be),ref:ue},Ot)}),er=ps,$s=["key","forceRender","style","className"];function Es(H){var ue=H.id,_e=H.activeKey,Be=H.animated,rt=H.tabPosition,at=H.destroyInactiveTabPane,Ue=v.useContext(rr),Xt=Ue.prefixCls,Ot=Ue.tabs,vr=Be.tabPane,xn="".concat(Xt,"-tabpane");return v.createElement("div",{className:ie()("".concat(Xt,"-content-holder"))},v.createElement("div",{className:ie()("".concat(Xt,"-content"),"".concat(Xt,"-content-").concat(rt),(0,we.Z)({},"".concat(Xt,"-content-animated"),vr))},Ot.map(function(Pn){var ti=Pn.key,Yn=Pn.forceRender,On=Pn.style,Ni=Pn.className,Bi=(0,At.Z)(Pn,$s),ki=ti===_e;return v.createElement(jn,(0,ke.Z)({key:ti,visible:ki,forceRender:Yn,removeOnLeave:!!at,leavedClassName:"".concat(xn,"-hidden")},Be.tabPaneMotion),function(Gi,Di){var Fi=Gi.style,bi=Gi.className;return v.createElement(er,(0,ke.Z)({},Bi,{prefixCls:xn,id:ue,tabKey:ti,animated:vr,active:ki,style:(0,Me.Z)((0,Me.Z)({},On),Fi),className:ie()(Ni,bi),ref:Di}))})})))}var Os=c(67442);function xu(H){var ue=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},_e=[];return v.Children.forEach(H,function(Be){Be==null&&!ue.keepEmpty||(Array.isArray(Be)?_e=_e.concat(xu(Be)):(0,$r.isFragment)(Be)&&Be.props?_e=_e.concat(xu(Be.props.children,ue)):_e.push(Be))}),_e}var bo={};function ic(H,ue){}function Ru(H,ue){}function Xs(){bo={}}function Ys(H,ue,_e){!ue&&!bo[_e]&&(H(!1,_e),bo[_e]=!0)}function rs(H,ue){Ys(ic,H,ue)}function au(H,ue){Ys(Ru,H,ue)}var Tu=rs,Cl=function(){if(typeof Map!="undefined")return Map;function H(ue,_e){var Be=-1;return ue.some(function(rt,at){return rt[0]===_e?(Be=at,!0):!1}),Be}return function(){function ue(){this.__entries__=[]}return Object.defineProperty(ue.prototype,"size",{get:function(){return this.__entries__.length},enumerable:!0,configurable:!0}),ue.prototype.get=function(_e){var Be=H(this.__entries__,_e),rt=this.__entries__[Be];return rt&&rt[1]},ue.prototype.set=function(_e,Be){var rt=H(this.__entries__,_e);~rt?this.__entries__[rt][1]=Be:this.__entries__.push([_e,Be])},ue.prototype.delete=function(_e){var Be=this.__entries__,rt=H(Be,_e);~rt&&Be.splice(rt,1)},ue.prototype.has=function(_e){return!!~H(this.__entries__,_e)},ue.prototype.clear=function(){this.__entries__.splice(0)},ue.prototype.forEach=function(_e,Be){Be===void 0&&(Be=null);for(var rt=0,at=this.__entries__;rt<at.length;rt++){var Ue=at[rt];_e.call(Be,Ue[1],Ue[0])}},ue}()}(),hu=typeof window!="undefined"&&typeof document!="undefined"&&window.document===document,ou=function(){return typeof c.g!="undefined"&&c.g.Math===Math?c.g:typeof self!="undefined"&&self.Math===Math?self:typeof window!="undefined"&&window.Math===Math?window:Function("return this")()}(),ss=function(){return typeof requestAnimationFrame=="function"?requestAnimationFrame.bind(ou):function(H){return setTimeout(function(){return H(Date.now())},1e3/60)}}(),nu=2;function Pu(H,ue){var _e=!1,Be=!1,rt=0;function at(){_e&&(_e=!1,H()),Be&&Xt()}function Ue(){ss(at)}function Xt(){var Ot=Date.now();if(_e){if(Ot-rt<nu)return;Be=!0}else _e=!0,Be=!1,setTimeout(Ue,ue);rt=Ot}return Xt}var Ks=20,$u=["top","right","bottom","left","width","height","size","weight"],qe=typeof MutationObserver!="undefined",Bt=function(){function H(){this.connected_=!1,this.mutationEventsAdded_=!1,this.mutationsObserver_=null,this.observers_=[],this.onTransitionEnd_=this.onTransitionEnd_.bind(this),this.refresh=Pu(this.refresh.bind(this),Ks)}return H.prototype.addObserver=function(ue){~this.observers_.indexOf(ue)||this.observers_.push(ue),this.connected_||this.connect_()},H.prototype.removeObserver=function(ue){var _e=this.observers_,Be=_e.indexOf(ue);~Be&&_e.splice(Be,1),!_e.length&&this.connected_&&this.disconnect_()},H.prototype.refresh=function(){var ue=this.updateObservers_();ue&&this.refresh()},H.prototype.updateObservers_=function(){var ue=this.observers_.filter(function(_e){return _e.gatherActive(),_e.hasActive()});return ue.forEach(function(_e){return _e.broadcastActive()}),ue.length>0},H.prototype.connect_=function(){!hu||this.connected_||(document.addEventListener("transitionend",this.onTransitionEnd_),window.addEventListener("resize",this.refresh),qe?(this.mutationsObserver_=new MutationObserver(this.refresh),this.mutationsObserver_.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})):(document.addEventListener("DOMSubtreeModified",this.refresh),this.mutationEventsAdded_=!0),this.connected_=!0)},H.prototype.disconnect_=function(){!hu||!this.connected_||(document.removeEventListener("transitionend",this.onTransitionEnd_),window.removeEventListener("resize",this.refresh),this.mutationsObserver_&&this.mutationsObserver_.disconnect(),this.mutationEventsAdded_&&document.removeEventListener("DOMSubtreeModified",this.refresh),this.mutationsObserver_=null,this.mutationEventsAdded_=!1,this.connected_=!1)},H.prototype.onTransitionEnd_=function(ue){var _e=ue.propertyName,Be=_e===void 0?"":_e,rt=$u.some(function(at){return!!~Be.indexOf(at)});rt&&this.refresh()},H.getInstance=function(){return this.instance_||(this.instance_=new H),this.instance_},H.instance_=null,H}(),ge=function(H,ue){for(var _e=0,Be=Object.keys(ue);_e<Be.length;_e++){var rt=Be[_e];Object.defineProperty(H,rt,{value:ue[rt],enumerable:!1,writable:!1,configurable:!0})}return H},je=function(H){var ue=H&&H.ownerDocument&&H.ownerDocument.defaultView;return ue||ou},wt=lo(0,0,0,0);function nr(H){return parseFloat(H)||0}function en(H){for(var ue=[],_e=1;_e<arguments.length;_e++)ue[_e-1]=arguments[_e];return ue.reduce(function(Be,rt){var at=H["border-"+rt+"-width"];return Be+nr(at)},0)}function Dn(H){for(var ue=["top","right","bottom","left"],_e={},Be=0,rt=ue;Be<rt.length;Be++){var at=rt[Be],Ue=H["padding-"+at];_e[at]=nr(Ue)}return _e}function Ai(H){var ue=H.getBBox();return lo(0,0,ue.width,ue.height)}function na(H){var ue=H.clientWidth,_e=H.clientHeight;if(!ue&&!_e)return wt;var Be=je(H).getComputedStyle(H),rt=Dn(Be),at=rt.left+rt.right,Ue=rt.top+rt.bottom,Xt=nr(Be.width),Ot=nr(Be.height);if(Be.boxSizing==="border-box"&&(Math.round(Xt+at)!==ue&&(Xt-=en(Be,"left","right")+at),Math.round(Ot+Ue)!==_e&&(Ot-=en(Be,"top","bottom")+Ue)),!Ta(H)){var vr=Math.round(Xt+at)-ue,xn=Math.round(Ot+Ue)-_e;Math.abs(vr)!==1&&(Xt-=vr),Math.abs(xn)!==1&&(Ot-=xn)}return lo(rt.left,rt.top,Xt,Ot)}var Aa=function(){return typeof SVGGraphicsElement!="undefined"?function(H){return H instanceof je(H).SVGGraphicsElement}:function(H){return H instanceof je(H).SVGElement&&typeof H.getBBox=="function"}}();function Ta(H){return H===je(H).document.documentElement}function Wa(H){return hu?Aa(H)?Ai(H):na(H):wt}function Co(H){var ue=H.x,_e=H.y,Be=H.width,rt=H.height,at=typeof DOMRectReadOnly!="undefined"?DOMRectReadOnly:Object,Ue=Object.create(at.prototype);return ge(Ue,{x:ue,y:_e,width:Be,height:rt,top:_e,right:ue+Be,bottom:rt+_e,left:ue}),Ue}function lo(H,ue,_e,Be){return{x:H,y:ue,width:_e,height:Be}}var Vo=function(){function H(ue){this.broadcastWidth=0,this.broadcastHeight=0,this.contentRect_=lo(0,0,0,0),this.target=ue}return H.prototype.isActive=function(){var ue=Wa(this.target);return this.contentRect_=ue,ue.width!==this.broadcastWidth||ue.height!==this.broadcastHeight},H.prototype.broadcastRect=function(){var ue=this.contentRect_;return this.broadcastWidth=ue.width,this.broadcastHeight=ue.height,ue},H}(),gs=function(){function H(ue,_e){var Be=Co(_e);ge(this,{target:ue,contentRect:Be})}return H}(),su=function(){function H(ue,_e,Be){if(this.activeObservations_=[],this.observations_=new Cl,typeof ue!="function")throw new TypeError("The callback provided as parameter 1 is not a function.");this.callback_=ue,this.controller_=_e,this.callbackCtx_=Be}return H.prototype.observe=function(ue){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if(!(typeof Element=="undefined"||!(Element instanceof Object))){if(!(ue instanceof je(ue).Element))throw new TypeError('parameter 1 is not of type "Element".');var _e=this.observations_;_e.has(ue)||(_e.set(ue,new Vo(ue)),this.controller_.addObserver(this),this.controller_.refresh())}},H.prototype.unobserve=function(ue){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if(!(typeof Element=="undefined"||!(Element instanceof Object))){if(!(ue instanceof je(ue).Element))throw new TypeError('parameter 1 is not of type "Element".');var _e=this.observations_;!_e.has(ue)||(_e.delete(ue),_e.size||this.controller_.removeObserver(this))}},H.prototype.disconnect=function(){this.clearActive(),this.observations_.clear(),this.controller_.removeObserver(this)},H.prototype.gatherActive=function(){var ue=this;this.clearActive(),this.observations_.forEach(function(_e){_e.isActive()&&ue.activeObservations_.push(_e)})},H.prototype.broadcastActive=function(){if(!!this.hasActive()){var ue=this.callbackCtx_,_e=this.activeObservations_.map(function(Be){return new gs(Be.target,Be.broadcastRect())});this.callback_.call(ue,_e,ue),this.clearActive()}},H.prototype.clearActive=function(){this.activeObservations_.splice(0)},H.prototype.hasActive=function(){return this.activeObservations_.length>0},H}(),Zu=typeof WeakMap!="undefined"?new WeakMap:new Cl,Ss=function(){function H(ue){if(!(this instanceof H))throw new TypeError("Cannot call a class as a function.");if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");var _e=Bt.getInstance(),Be=new su(ue,_e,this);Zu.set(this,Be)}return H}();["observe","unobserve","disconnect"].forEach(function(H){Ss.prototype[H]=function(){var ue;return(ue=Zu.get(this))[H].apply(ue,arguments)}});var Us=function(){return typeof ou.ResizeObserver!="undefined"?ou.ResizeObserver:Ss}(),ys=Us,Oo=new Map;function qo(H){H.forEach(function(ue){var _e,Be=ue.target;(_e=Oo.get(Be))===null||_e===void 0||_e.forEach(function(rt){return rt(Be)})})}var Rc=new ys(qo),Hl=null,sf=null;function Bf(H,ue){Oo.has(H)||(Oo.set(H,new Set),Rc.observe(H)),Oo.get(H).add(ue)}function zf(H,ue){Oo.has(H)&&(Oo.get(H).delete(ue),Oo.get(H).size||(Rc.unobserve(H),Oo.delete(H)))}var ac=function(H){(0,Jn.Z)(_e,H);var ue=ta(_e);function _e(){return(0,Ft.Z)(this,_e),ue.apply(this,arguments)}return(0,zr.Z)(_e,[{key:"render",value:function(){return this.props.children}}]),_e}(v.Component),dc=v.createContext(null);function O(H){var ue=H.children,_e=H.onBatchResize,Be=v.useRef(0),rt=v.useRef([]),at=v.useContext(dc),Ue=v.useCallback(function(Xt,Ot,vr){Be.current+=1;var xn=Be.current;rt.current.push({size:Xt,element:Ot,data:vr}),Promise.resolve().then(function(){xn===Be.current&&(_e==null||_e(rt.current),rt.current=[])}),at==null||at(Xt,Ot,vr)},[_e,at]);return v.createElement(dc.Provider,{value:Ue},ue)}function q(H){var ue=H.children,_e=H.disabled,Be=v.useRef(null),rt=v.useRef(null),at=v.useContext(dc),Ue=typeof ue=="function",Xt=Ue?ue(Be):ue,Ot=v.useRef({width:-1,height:-1,offsetWidth:-1,offsetHeight:-1}),vr=!Ue&&v.isValidElement(Xt)&&cr(Xt),xn=vr?Xt.ref:null,Pn=v.useMemo(function(){return ot(xn,Be)},[xn,Be]),ti=v.useRef(H);ti.current=H;var Yn=v.useCallback(function(On){var Ni=ti.current,Bi=Ni.onResize,ki=Ni.data,Gi=On.getBoundingClientRect(),Di=Gi.width,Fi=Gi.height,bi=On.offsetWidth,qi=On.offsetHeight,di=Math.floor(Di),ba=Math.floor(Fi);if(Ot.current.width!==di||Ot.current.height!==ba||Ot.current.offsetWidth!==bi||Ot.current.offsetHeight!==qi){var _a={width:di,height:ba,offsetWidth:bi,offsetHeight:qi};Ot.current=_a;var Ya=bi===Math.round(Di)?Di:bi,Te=qi===Math.round(Fi)?Fi:qi,Qe=(0,Me.Z)((0,Me.Z)({},_a),{},{offsetWidth:Ya,offsetHeight:Te});at==null||at(Qe,On,ki),Bi&&Promise.resolve().then(function(){Bi(Qe,On)})}},[]);return v.useEffect(function(){var On=xr(Be.current)||xr(rt.current);return On&&!_e&&Bf(On,Yn),function(){return zf(On,Yn)}},[Be.current,_e]),v.createElement(ac,{ref:rt},vr?v.cloneElement(Xt,{ref:Pn}):Xt)}var Le="rc-observer-key";function ve(H){var ue=H.children,_e=typeof ue=="function"?[ue]:xu(ue);return _e.map(function(Be,rt){var at=(Be==null?void 0:Be.key)||"".concat(Le,"-").concat(rt);return v.createElement(q,(0,ke.Z)({},H,{key:at}),Be)})}ve.Collection=O;var ct=ve;function Lt(H){var ue=(0,v.useRef)(),_e=(0,v.useRef)(!1);function Be(){for(var rt=arguments.length,at=new Array(rt),Ue=0;Ue<rt;Ue++)at[Ue]=arguments[Ue];_e.current||(Pi.cancel(ue.current),ue.current=Pi(function(){H.apply(void 0,at)}))}return(0,v.useEffect)(function(){return _e.current=!1,function(){_e.current=!0,Pi.cancel(ue.current)}},[]),Be}function hr(H){var ue=(0,v.useRef)([]),_e=(0,v.useState)({}),Be=(0,Xe.Z)(_e,2),rt=Be[1],at=(0,v.useRef)(typeof H=="function"?H():H),Ue=Lt(function(){var Ot=at.current;ue.current.forEach(function(vr){Ot=vr(Ot)}),ue.current=[],at.current=Ot,rt({})});function Xt(Ot){ue.current.push(Ot),Ue()}return[at.current,Xt]}var lr={MAC_ENTER:3,BACKSPACE:8,TAB:9,NUM_CENTER:12,ENTER:13,SHIFT:16,CTRL:17,ALT:18,PAUSE:19,CAPS_LOCK:20,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,PRINT_SCREEN:44,INSERT:45,DELETE:46,ZERO:48,ONE:49,TWO:50,THREE:51,FOUR:52,FIVE:53,SIX:54,SEVEN:55,EIGHT:56,NINE:57,QUESTION_MARK:63,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,META:91,WIN_KEY_RIGHT:92,CONTEXT_MENU:93,NUM_ZERO:96,NUM_ONE:97,NUM_TWO:98,NUM_THREE:99,NUM_FOUR:100,NUM_FIVE:101,NUM_SIX:102,NUM_SEVEN:103,NUM_EIGHT:104,NUM_NINE:105,NUM_MULTIPLY:106,NUM_PLUS:107,NUM_MINUS:109,NUM_PERIOD:110,NUM_DIVISION:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,NUMLOCK:144,SEMICOLON:186,DASH:189,EQUALS:187,COMMA:188,PERIOD:190,SLASH:191,APOSTROPHE:192,SINGLE_QUOTE:222,OPEN_SQUARE_BRACKET:219,BACKSLASH:220,CLOSE_SQUARE_BRACKET:221,WIN_KEY:224,MAC_FF_META:224,WIN_IME:229,isTextModifyingKeyEvent:function(ue){var _e=ue.keyCode;if(ue.altKey&&!ue.ctrlKey||ue.metaKey||_e>=lr.F1&&_e<=lr.F12)return!1;switch(_e){case lr.ALT:case lr.CAPS_LOCK:case lr.CONTEXT_MENU:case lr.CTRL:case lr.DOWN:case lr.END:case lr.ESC:case lr.HOME:case lr.INSERT:case lr.LEFT:case lr.MAC_FF_META:case lr.META:case lr.NUMLOCK:case lr.NUM_CENTER:case lr.PAGE_DOWN:case lr.PAGE_UP:case lr.PAUSE:case lr.PRINT_SCREEN:case lr.RIGHT:case lr.SHIFT:case lr.UP:case lr.WIN_KEY:case lr.WIN_KEY_RIGHT:return!1;default:return!0}},isCharacterKey:function(ue){if(ue>=lr.ZERO&&ue<=lr.NINE||ue>=lr.NUM_ZERO&&ue<=lr.NUM_MULTIPLY||ue>=lr.A&&ue<=lr.Z||window.navigator.userAgent.indexOf("WebKit")!==-1&&ue===0)return!0;switch(ue){case lr.SPACE:case lr.QUESTION_MARK:case lr.NUM_PLUS:case lr.NUM_MINUS:case lr.NUM_PERIOD:case lr.NUM_DIVISION:case lr.SEMICOLON:case lr.DASH:case lr.EQUALS:case lr.COMMA:case lr.PERIOD:case lr.SLASH:case lr.APOSTROPHE:case lr.SINGLE_QUOTE:case lr.OPEN_SQUARE_BRACKET:case lr.BACKSLASH:case lr.CLOSE_SQUARE_BRACKET:return!0;default:return!1}}},Gr=lr;function ii(H,ue){var _e,Be=H.prefixCls,rt=H.id,at=H.active,Ue=H.tab,Xt=Ue.key,Ot=Ue.label,vr=Ue.disabled,xn=Ue.closeIcon,Pn=H.closable,ti=H.renderWrapper,Yn=H.removeAriaLabel,On=H.editable,Ni=H.onClick,Bi=H.onRemove,ki=H.onFocus,Gi=H.style,Di="".concat(Be,"-tab");v.useEffect(function(){return Bi},[]);var Fi=On&&Pn!==!1&&!vr;function bi(ba){vr||Ni(ba)}function qi(ba){ba.preventDefault(),ba.stopPropagation(),On.onEdit("remove",{key:Xt,event:ba})}var di=v.createElement("div",{key:Xt,ref:ue,className:ie()(Di,(_e={},(0,we.Z)(_e,"".concat(Di,"-with-remove"),Fi),(0,we.Z)(_e,"".concat(Di,"-active"),at),(0,we.Z)(_e,"".concat(Di,"-disabled"),vr),_e)),style:Gi,onClick:bi},v.createElement("div",{role:"tab","aria-selected":at,id:rt&&"".concat(rt,"-tab-").concat(Xt),className:"".concat(Di,"-btn"),"aria-controls":rt&&"".concat(rt,"-panel-").concat(Xt),"aria-disabled":vr,tabIndex:vr?null:0,onClick:function(_a){_a.stopPropagation(),bi(_a)},onKeyDown:function(_a){[Gr.SPACE,Gr.ENTER].includes(_a.which)&&(_a.preventDefault(),bi(_a))},onFocus:ki},Ot),Fi&&v.createElement("button",{type:"button","aria-label":Yn||"remove",tabIndex:0,className:"".concat(Di,"-remove"),onClick:function(_a){_a.stopPropagation(),qi(_a)}},xn||On.removeIcon||"\xD7"));return ti?ti(di):di}var fi=v.forwardRef(ii),Na={width:0,height:0,left:0,top:0};function vo(H,ue,_e){return(0,v.useMemo)(function(){for(var Be,rt=new Map,at=ue.get((Be=H[0])===null||Be===void 0?void 0:Be.key)||Na,Ue=at.left+at.width,Xt=0;Xt<H.length;Xt+=1){var Ot=H[Xt].key,vr=ue.get(Ot);if(!vr){var xn;vr=ue.get((xn=H[Xt-1])===null||xn===void 0?void 0:xn.key)||Na}var Pn=rt.get(Ot)||(0,Me.Z)({},vr);Pn.right=Ue-Pn.left-Pn.width,rt.set(Ot,Pn)}return rt},[H.map(function(Be){return Be.key}).join("_"),ue,_e])}var Va={width:0,height:0,left:0,top:0,right:0};function ha(H,ue,_e,Be,rt){var at=rt.tabs,Ue=rt.tabPosition,Xt=rt.rtl,Ot,vr,xn;["top","bottom"].includes(Ue)?(Ot="width",vr=Xt?"right":"left",xn=Math.abs(ue.left)):(Ot="height",vr="top",xn=-ue.top);var Pn=ue[Ot],ti=_e[Ot],Yn=Be[Ot],On=Pn;return ti+Yn>Pn&&ti<Pn&&(On=Pn-Yn),(0,v.useMemo)(function(){if(!at.length)return[0,0];for(var Ni=at.length,Bi=Ni,ki=0;ki<Ni;ki+=1){var Gi=H.get(at[ki].key)||Va;if(Gi[vr]+Gi[Ot]>xn+On){Bi=ki-1;break}}for(var Di=0,Fi=Ni-1;Fi>=0;Fi-=1){var bi=H.get(at[Fi].key)||Va;if(bi[vr]<xn){Di=Fi+1;break}}return[Di,Bi]},[H,xn,On,Ue,at.map(function(Ni){return Ni.key}).join("_"),Xt])}var $o=c(50631),ms=c.n($o),To=["prefixCls","invalidate","item","renderItem","responsive","responsiveDisabled","registerSize","itemKey","className","style","children","display","order","component"],Qs=void 0;function Wl(H,ue){var _e=H.prefixCls,Be=H.invalidate,rt=H.item,at=H.renderItem,Ue=H.responsive,Xt=H.responsiveDisabled,Ot=H.registerSize,vr=H.itemKey,xn=H.className,Pn=H.style,ti=H.children,Yn=H.display,On=H.order,Ni=H.component,Bi=Ni===void 0?"div":Ni,ki=(0,At.Z)(H,To),Gi=Ue&&!Yn;function Di(ba){Ot(vr,ba)}v.useEffect(function(){return function(){Di(null)}},[]);var Fi=at&&rt!==Qs?at(rt):ti,bi;Be||(bi={opacity:Gi?0:1,height:Gi?0:Qs,overflowY:Gi?"hidden":Qs,order:Ue?On:Qs,pointerEvents:Gi?"none":Qs,position:Gi?"absolute":Qs});var qi={};Gi&&(qi["aria-hidden"]=!0);var di=v.createElement(Bi,(0,ke.Z)({className:ie()(!Be&&_e,xn),style:(0,Me.Z)((0,Me.Z)({},bi),Pn)},qi,ki,{ref:ue}),Fi);return Ue&&(di=v.createElement(ct,{onResize:function(_a){var Ya=_a.offsetWidth;Di(Ya)},disabled:Xt},di)),di}var Pc=v.forwardRef(Wl);Pc.displayName="Item";var Js=Pc;function Tl(){var H=Fe({}),ue=(0,Xe.Z)(H,2),_e=ue[1],Be=(0,v.useRef)([]),rt=0,at=0;function Ue(Xt){var Ot=rt;rt+=1,Be.current.length<Ot+1&&(Be.current[Ot]=Xt);var vr=Be.current[Ot];function xn(Pn){Be.current[Ot]=typeof Pn=="function"?Pn(Be.current[Ot]):Pn,Pi.cancel(at),at=Pi(function(){_e({},!0)})}return[vr,xn]}return Ue}var bf=["component"],Zc=["className"],vc=["className"],jc=function(ue,_e){var Be=v.useContext(Ju);if(!Be){var rt=ue.component,at=rt===void 0?"div":rt,Ue=(0,At.Z)(ue,bf);return v.createElement(at,(0,ke.Z)({},Ue,{ref:_e}))}var Xt=Be.className,Ot=(0,At.Z)(Be,Zc),vr=ue.className,xn=(0,At.Z)(ue,vc);return v.createElement(Ju.Provider,{value:null},v.createElement(Js,(0,ke.Z)({ref:_e,className:ie()(Xt,vr)},Ot,xn)))},bu=v.forwardRef(jc);bu.displayName="RawItem";var cp=bu,Yf=["prefixCls","data","renderItem","renderRawItem","itemKey","itemWidth","ssr","style","className","maxCount","renderRest","renderRawRest","suffix","component","itemComponent","onVisibleChange"],Ju=v.createContext(null),Vc="responsive",Gc="invalidate";function ju(H){return"+ ".concat(H.length," ...")}function fp(H,ue){var _e=H.prefixCls,Be=_e===void 0?"rc-overflow":_e,rt=H.data,at=rt===void 0?[]:rt,Ue=H.renderItem,Xt=H.renderRawItem,Ot=H.itemKey,vr=H.itemWidth,xn=vr===void 0?10:vr,Pn=H.ssr,ti=H.style,Yn=H.className,On=H.maxCount,Ni=H.renderRest,Bi=H.renderRawRest,ki=H.suffix,Gi=H.component,Di=Gi===void 0?"div":Gi,Fi=H.itemComponent,bi=H.onVisibleChange,qi=(0,At.Z)(H,Yf),di=Tl(),ba=Pn==="full",_a=di(null),Ya=(0,Xe.Z)(_a,2),Te=Ya[0],Qe=Ya[1],pt=Te||0,Vt=di(new Map),Sr=(0,Xe.Z)(Vt,2),dr=Sr[0],Ar=Sr[1],hn=di(0),Tn=(0,Xe.Z)(hn,2),Hn=Tn[0],Bn=Tn[1],bn=di(0),En=(0,Xe.Z)(bn,2),Mn=En[0],Un=En[1],Nr=di(0),Er=(0,Xe.Z)(Nr,2),oi=Er[0],wi=Er[1],Wn=(0,v.useState)(null),ci=(0,Xe.Z)(Wn,2),Mi=ci[0],Xi=ci[1],Rn=(0,v.useState)(null),kn=(0,Xe.Z)(Rn,2),Si=kn[0],mi=kn[1],qn=v.useMemo(function(){return Si===null&&ba?Number.MAX_SAFE_INTEGER:Si||0},[Si,Te]),Ii=(0,v.useState)(!1),_i=(0,Xe.Z)(Ii,2),ao=_i[0],La=_i[1],Qi="".concat(Be,"-item"),aa=Math.max(Hn,Mn),Fa=On===Vc,$a=at.length&&Fa,oo=On===Gc,is=$a||typeof On=="number"&&at.length>On,Yo=(0,v.useMemo)(function(){var jo=at;return $a?Te===null&&ba?jo=at:jo=at.slice(0,Math.min(at.length,pt/xn)):typeof On=="number"&&(jo=at.slice(0,On)),jo},[at,xn,Te,On,$a]),Po=(0,v.useMemo)(function(){return $a?at.slice(qn+1):at.slice(Yo.length)},[at,Yo,$a,qn]),js=(0,v.useCallback)(function(jo,Dt){var an;return typeof Ot=="function"?Ot(jo):(an=Ot&&(jo==null?void 0:jo[Ot]))!==null&&an!==void 0?an:Dt},[Ot]),Uo=(0,v.useCallback)(Ue||function(jo){return jo},[Ue]);function cs(jo,Dt,an){Si===jo&&(Dt===void 0||Dt===Mi)||(mi(jo),an||(La(jo<at.length-1),bi==null||bi(jo)),Dt!==void 0&&Xi(Dt))}function Vs(jo,Dt){Qe(Dt.clientWidth)}function Ls(jo,Dt){Ar(function(an){var un=new Map(an);return Dt===null?un.delete(jo):un.set(jo,Dt),un})}function Zo(jo,Dt){Un(Dt),Bn(Mn)}function Io(jo,Dt){wi(Dt)}function Go(jo){return dr.get(js(Yo[jo],jo))}Ne(function(){if(pt&&aa&&Yo){var jo=oi,Dt=Yo.length,an=Dt-1;if(!Dt){cs(0,null);return}for(var un=0;un<Dt;un+=1){var oa=Go(un);if(ba&&(oa=oa||0),oa===void 0){cs(un-1,void 0,!0);break}if(jo+=oa,an===0&&jo<=pt||un===an-1&&jo+Go(an)<=pt){cs(an,null);break}else if(jo+aa>pt){cs(un-1,jo-oa-oi+Mn);break}}ki&&Go(0)+oi>pt&&Xi(null)}},[pt,dr,Mn,oi,js,Yo]);var Za=ao&&!!Po.length,as={};Mi!==null&&$a&&(as={position:"absolute",left:Mi,top:0});var so={prefixCls:Qi,responsive:$a,component:Fi,invalidate:oo},iu=Xt?function(jo,Dt){var an=js(jo,Dt);return v.createElement(Ju.Provider,{key:an,value:(0,Me.Z)((0,Me.Z)({},so),{},{order:Dt,item:jo,itemKey:an,registerSize:Ls,display:Dt<=qn})},Xt(jo,Dt))}:function(jo,Dt){var an=js(jo,Dt);return v.createElement(Js,(0,ke.Z)({},so,{order:Dt,key:an,item:jo,renderItem:Uo,itemKey:an,registerSize:Ls,display:Dt<=qn}))},Oa,ko={order:Za?qn:Number.MAX_SAFE_INTEGER,className:"".concat(Qi,"-rest"),registerSize:Zo,display:Za};if(Bi)Bi&&(Oa=v.createElement(Ju.Provider,{value:(0,Me.Z)((0,Me.Z)({},so),ko)},Bi(Po)));else{var Xo=Ni||ju;Oa=v.createElement(Js,(0,ke.Z)({},so,ko),typeof Xo=="function"?Xo(Po):Xo)}var Hs=v.createElement(Di,(0,ke.Z)({className:ie()(!oo&&Be,Yn),style:ti,ref:ue},qi),Yo.map(iu),is?Oa:null,ki&&v.createElement(Js,(0,ke.Z)({},so,{responsive:Fa,responsiveDisabled:!$a,order:qn,className:"".concat(Qi,"-suffix"),registerSize:Io,display:!0,style:as}),ki));return Fa&&(Hs=v.createElement(ct,{onResize:Vs,disabled:!$a},Hs)),Hs}var $l=v.forwardRef(fp);$l.displayName="Overflow",$l.Item=cp,$l.RESPONSIVE=Vc,$l.INVALIDATE=Gc;var Rs=$l,Ml=Rs;function Ef(H,ue){var _e=(0,Me.Z)({},H);return Array.isArray(ue)&&ue.forEach(function(Be){delete _e[Be]}),_e}var Hc=["children","locked"],Xl=v.createContext(null);function ah(H,ue){var _e=(0,Me.Z)({},H);return Object.keys(ue).forEach(function(Be){var rt=ue[Be];rt!==void 0&&(_e[Be]=rt)}),_e}function Kf(H){var ue=H.children,_e=H.locked,Be=(0,At.Z)(H,Hc),rt=v.useContext(Xl),at=Cr(function(){return ah(rt,Be)},[rt,Be],function(Ue,Xt){return!_e&&(Ue[0]!==Xt[0]||!ms()(Ue[1],Xt[1]))});return v.createElement(Xl.Provider,{value:at},ue)}function Ll(H,ue,_e,Be){var rt=v.useContext(Xl),at=rt.activeKey,Ue=rt.onActive,Xt=rt.onInactive,Ot={active:at===H};return ue||(Ot.onMouseEnter=function(vr){_e==null||_e({key:H,domEvent:vr}),Ue(H)},Ot.onMouseLeave=function(vr){Be==null||Be({key:H,domEvent:vr}),Xt(H)}),Ot}var Wc=["item"];function uu(H){var ue=H.item,_e=(0,At.Z)(H,Wc);return Object.defineProperty(_e,"item",{get:function(){return Tu(!1,"`info.item` is deprecated since we will move to function component that not provides React Node instance in future."),ue}}),_e}function hs(H){var ue=H.icon,_e=H.props,Be=H.children,rt;return typeof ue=="function"?rt=v.createElement(ue,(0,Me.Z)({},_e)):rt=ue,rt||Be||null}function kc(H){var ue=v.useContext(Xl),_e=ue.mode,Be=ue.rtl,rt=ue.inlineIndent;if(_e!=="inline")return null;var at=H;return Be?{paddingRight:at*rt}:{paddingLeft:at*rt}}var oc=[],uf=v.createContext(null);function mc(){return v.useContext(uf)}var ds=v.createContext(oc);function sc(H){var ue=v.useContext(ds);return v.useMemo(function(){return H!==void 0?[].concat((0,Os.Z)(ue),[H]):ue},[ue,H])}var vl=v.createContext(null),pp=v.createContext(null);function Lc(H,ue){return H===void 0?null:"".concat(H,"-").concat(ue)}function uc(H){var ue=v.useContext(pp);return Lc(ue,H)}var Qf=v.createContext({}),Yl=Qf,Dc=["title","attribute","elementRef"],Jf=["style","className","eventKey","warnKey","disabled","itemIcon","children","role","onMouseEnter","onMouseLeave","onClick","onKeyDown","onFocus"],gc=["active"],$c=function(H){(0,Jn.Z)(_e,H);var ue=ta(_e);function _e(){return(0,Ft.Z)(this,_e),ue.apply(this,arguments)}return(0,zr.Z)(_e,[{key:"render",value:function(){var rt=this.props,at=rt.title,Ue=rt.attribute,Xt=rt.elementRef,Ot=(0,At.Z)(rt,Dc),vr=Ef(Ot,["eventKey"]);return Tu(!Ue,"`attribute` of Menu.Item is deprecated. Please pass attribute directly."),v.createElement(Ml.Item,(0,ke.Z)({},Ue,{title:typeof at=="string"?at:void 0},vr,{ref:Xt}))}}]),_e}(v.Component),Fc=function(ue){var _e,Be=ue.style,rt=ue.className,at=ue.eventKey,Ue=ue.warnKey,Xt=ue.disabled,Ot=ue.itemIcon,vr=ue.children,xn=ue.role,Pn=ue.onMouseEnter,ti=ue.onMouseLeave,Yn=ue.onClick,On=ue.onKeyDown,Ni=ue.onFocus,Bi=(0,At.Z)(ue,Jf),ki=uc(at),Gi=v.useContext(Xl),Di=Gi.prefixCls,Fi=Gi.onItemClick,bi=Gi.disabled,qi=Gi.overflowDisabled,di=Gi.itemIcon,ba=Gi.selectedKeys,_a=Gi.onActive,Ya=v.useContext(Yl),Te=Ya._internalRenderMenuItem,Qe="".concat(Di,"-item"),pt=v.useRef(),Vt=v.useRef(),Sr=bi||Xt,dr=sc(at),Ar=function(Wn){return{key:at,keyPath:(0,Os.Z)(dr).reverse(),item:pt.current,domEvent:Wn}},hn=Ot||di,Tn=Ll(at,Sr,Pn,ti),Hn=Tn.active,Bn=(0,At.Z)(Tn,gc),bn=ba.includes(at),En=kc(dr.length),Mn=function(Wn){if(!Sr){var ci=Ar(Wn);Yn==null||Yn(uu(ci)),Fi(ci)}},Un=function(Wn){if(On==null||On(Wn),Wn.which===Gr.ENTER){var ci=Ar(Wn);Yn==null||Yn(uu(ci)),Fi(ci)}},Nr=function(Wn){_a(at),Ni==null||Ni(Wn)},Er={};ue.role==="option"&&(Er["aria-selected"]=bn);var oi=v.createElement($c,(0,ke.Z)({ref:pt,elementRef:Vt,role:xn===null?"none":xn||"menuitem",tabIndex:Xt?null:-1,"data-menu-id":qi&&ki?null:ki},Bi,Bn,Er,{component:"li","aria-disabled":Xt,style:(0,Me.Z)((0,Me.Z)({},En),Be),className:ie()(Qe,(_e={},(0,we.Z)(_e,"".concat(Qe,"-active"),Hn),(0,we.Z)(_e,"".concat(Qe,"-selected"),bn),(0,we.Z)(_e,"".concat(Qe,"-disabled"),Sr),_e),rt),onClick:Mn,onKeyDown:Un,onFocus:Nr}),vr,v.createElement(hs,{props:(0,Me.Z)((0,Me.Z)({},ue),{},{isSelected:bn}),icon:hn}));return Te&&(oi=Te(oi,ue,{selected:bn})),oi};function Kl(H){var ue=H.eventKey,_e=mc(),Be=sc(ue);return v.useEffect(function(){if(_e)return _e.registerPath(ue,Be),function(){_e.unregisterPath(ue,Be)}},[Be]),_e?null:v.createElement(Fc,H)}var Ql=Kl,Uf=["label","children","key","type"];function qf(H,ue){return xu(H).map(function(_e,Be){if(v.isValidElement(_e)){var rt,at,Ue=_e.key,Xt=(rt=(at=_e.props)===null||at===void 0?void 0:at.eventKey)!==null&&rt!==void 0?rt:Ue,Ot=Xt==null;Ot&&(Xt="tmp_key-".concat([].concat((0,Os.Z)(ue),[Be]).join("-")));var vr={key:Xt,eventKey:Xt};return v.cloneElement(_e,vr)}return _e})}function ep(H){return(H||[]).map(function(ue,_e){if(ue&&(0,Ke.Z)(ue)==="object"){var Be=ue.label,rt=ue.children,at=ue.key,Ue=ue.type,Xt=(0,At.Z)(ue,Uf),Ot=at!=null?at:"tmp-".concat(_e);return rt||Ue==="group"?Ue==="group"?v.createElement(Ap,(0,ke.Z)({key:Ot},Xt,{title:Be}),ep(rt)):v.createElement(vu,(0,ke.Z)({key:Ot},Xt,{title:Be}),ep(rt)):Ue==="divider"?v.createElement(op,(0,ke.Z)({key:Ot},Xt)):v.createElement(Ql,(0,ke.Z)({key:Ot},Xt),Be)}return null}).filter(function(ue){return ue})}function qu(H,ue,_e){var Be=H;return ue&&(Be=ep(ue)),qf(Be,_e)}function Zf(H){var ue=v.useRef(H);ue.current=H;var _e=v.useCallback(function(){for(var Be,rt=arguments.length,at=new Array(rt),Ue=0;Ue<rt;Ue++)at[Ue]=arguments[Ue];return(Be=ue.current)===null||Be===void 0?void 0:Be.call.apply(Be,[ue].concat(at))},[]);return H?_e:void 0}var vs=["className","children"],Kr=function(ue,_e){var Be=ue.className,rt=ue.children,at=(0,At.Z)(ue,vs),Ue=v.useContext(Xl),Xt=Ue.prefixCls,Ot=Ue.mode,vr=Ue.rtl;return v.createElement("ul",(0,ke.Z)({className:ie()(Xt,vr&&"".concat(Xt,"-rtl"),"".concat(Xt,"-sub"),"".concat(Xt,"-").concat(Ot==="inline"?"inline":"vertical"),Be)},at,{"data-menu-list":!0,ref:_e}),rt)},vi=v.forwardRef(Kr);vi.displayName="SubMenuList";var ei=vi,xi=c(46102);function da(H,ue){if(!H)return!1;if(H.contains)return H.contains(ue);for(var _e=ue;_e;){if(_e===H)return!0;_e=_e.parentNode}return!1}function uo(H,ue,_e,Be){var rt=Qt.unstable_batchedUpdates?function(Ue){Qt.unstable_batchedUpdates(_e,Ue)}:_e;return H.addEventListener&&H.addEventListener(ue,rt,Be),{remove:function(){H.removeEventListener&&H.removeEventListener(ue,rt,Be)}}}var Ua=(0,v.forwardRef)(function(H,ue){var _e=H.didUpdate,Be=H.getContainer,rt=H.children,at=(0,v.useRef)(),Ue=(0,v.useRef)();(0,v.useImperativeHandle)(ue,function(){return{}});var Xt=(0,v.useRef)(!1);return!Xt.current&&ye()&&(Ue.current=Be(),at.current=Ue.current.parentNode,Xt.current=!0),(0,v.useEffect)(function(){_e==null||_e(H)}),(0,v.useEffect)(function(){return Ue.current.parentNode===null&&at.current!==null&&at.current.appendChild(Ue.current),function(){var Ot,vr;(Ot=Ue.current)===null||Ot===void 0||(vr=Ot.parentNode)===null||vr===void 0||vr.removeChild(Ue.current)}},[]),Ue.current?Qt.createPortal(rt,Ue.current):null}),ns=Ua;function Vu(H,ue,_e){return _e?H[0]===ue[0]:H[0]===ue[0]&&H[1]===ue[1]}function lc(H,ue,_e){var Be=H[ue]||{};return(0,Me.Z)((0,Me.Z)({},Be),_e)}function yc(H,ue,_e,Be){for(var rt=_e.points,at=Object.keys(H),Ue=0;Ue<at.length;Ue+=1){var Xt=at[Ue];if(Vu(H[Xt].points,rt,Be))return"".concat(ue,"-placement-").concat(Xt)}return""}function tp(H){var ue=H.prefixCls,_e=H.motion,Be=H.animation,rt=H.transitionName;return _e||(Be?{motionName:"".concat(ue,"-").concat(Be)}:rt?{motionName:rt}:null)}function _c(H){var ue=H.prefixCls,_e=H.visible,Be=H.zIndex,rt=H.mask,at=H.maskMotion,Ue=H.maskAnimation,Xt=H.maskTransitionName;if(!rt)return null;var Ot={};return(at||Xt||Ue)&&(Ot=(0,Me.Z)({motionAppear:!0},tp({motion:at,prefixCls:ue,transitionName:Xt,animation:Ue}))),v.createElement(jn,(0,ke.Z)({},Ot,{visible:_e,removeOnLeave:!0}),function(vr){var xn=vr.className;return v.createElement("div",{style:{zIndex:Be},className:ie()("".concat(ue,"-mask"),xn)})})}var Jl=function(H){if(!H)return!1;if(H instanceof HTMLElement&&H.offsetParent)return!0;if(H instanceof SVGGraphicsElement&&H.getBBox){var ue=H.getBBox(),_e=ue.width,Be=ue.height;if(_e||Be)return!0}if(H instanceof HTMLElement&&H.getBoundingClientRect){var rt=H.getBoundingClientRect(),at=rt.width,Ue=rt.height;if(at||Ue)return!0}return!1};function ml(H,ue){var _e=Object.keys(H);if(Object.getOwnPropertySymbols){var Be=Object.getOwnPropertySymbols(H);ue&&(Be=Be.filter(function(rt){return Object.getOwnPropertyDescriptor(H,rt).enumerable})),_e.push.apply(_e,Be)}return _e}function lu(H){for(var ue=1;ue<arguments.length;ue++){var _e=arguments[ue]!=null?arguments[ue]:{};ue%2?ml(Object(_e),!0).forEach(function(Be){jf(H,Be,_e[Be])}):Object.getOwnPropertyDescriptors?Object.defineProperties(H,Object.getOwnPropertyDescriptors(_e)):ml(Object(_e)).forEach(function(Be){Object.defineProperty(H,Be,Object.getOwnPropertyDescriptor(_e,Be))})}return H}function _s(H){return _s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(ue){return typeof ue}:function(ue){return ue&&typeof Symbol=="function"&&ue.constructor===Symbol&&ue!==Symbol.prototype?"symbol":typeof ue},_s(H)}function jf(H,ue,_e){return ue in H?Object.defineProperty(H,ue,{value:_e,enumerable:!0,configurable:!0,writable:!0}):H[ue]=_e,H}var qs,ji={Webkit:"-webkit-",Moz:"-moz-",ms:"-ms-",O:"-o-"};function Gs(){if(qs!==void 0)return qs;qs="";var H=document.createElement("p").style,ue="Transform";for(var _e in ji)_e+ue in H&&(qs=_e);return qs}function ql(){return Gs()?"".concat(Gs(),"TransitionProperty"):"transitionProperty"}function Xc(){return Gs()?"".concat(Gs(),"Transform"):"transform"}function Il(H,ue){var _e=ql();_e&&(H.style[_e]=ue,_e!=="transitionProperty"&&(H.style.transitionProperty=ue))}function ku(H,ue){var _e=Xc();_e&&(H.style[_e]=ue,_e!=="transform"&&(H.style.transform=ue))}function ec(H){return H.style.transitionProperty||H.style[ql()]}function ia(H){var ue=window.getComputedStyle(H,null),_e=ue.getPropertyValue("transform")||ue.getPropertyValue(Xc());if(_e&&_e!=="none"){var Be=_e.replace(/[^0-9\-.,]/g,"").split(",");return{x:parseFloat(Be[12]||Be[4],0),y:parseFloat(Be[13]||Be[5],0)}}return{x:0,y:0}}var lf=/matrix\((.*)\)/,xc=/matrix3d\((.*)\)/;function cc(H,ue){var _e=window.getComputedStyle(H,null),Be=_e.getPropertyValue("transform")||_e.getPropertyValue(Xc());if(Be&&Be!=="none"){var rt,at=Be.match(lf);if(at)at=at[1],rt=at.split(",").map(function(Xt){return parseFloat(Xt,10)}),rt[4]=ue.x,rt[5]=ue.y,ku(H,"matrix(".concat(rt.join(","),")"));else{var Ue=Be.match(xc)[1];rt=Ue.split(",").map(function(Xt){return parseFloat(Xt,10)}),rt[12]=ue.x,rt[13]=ue.y,ku(H,"matrix3d(".concat(rt.join(","),")"))}}else ku(H,"translateX(".concat(ue.x,"px) translateY(").concat(ue.y,"px) translateZ(0)"))}var Ps=/[\-+]?(?:\d*\.|)\d+(?:[eE][\-+]?\d+|)/.source,ol;function Yc(H){var ue=H.style.display;H.style.display="none",H.offsetHeight,H.style.display=ue}function Eu(H,ue,_e){var Be=_e;if(_s(ue)==="object"){for(var rt in ue)ue.hasOwnProperty(rt)&&Eu(H,rt,ue[rt]);return}if(typeof Be!="undefined"){typeof Be=="number"&&(Be="".concat(Be,"px")),H.style[ue]=Be;return}return ol(H,ue)}function el(H){var ue,_e,Be,rt=H.ownerDocument,at=rt.body,Ue=rt&&rt.documentElement;return ue=H.getBoundingClientRect(),_e=Math.floor(ue.left),Be=Math.floor(ue.top),_e-=Ue.clientLeft||at.clientLeft||0,Be-=Ue.clientTop||at.clientTop||0,{left:_e,top:Be}}function bc(H,ue){var _e=H["page".concat(ue?"Y":"X","Offset")],Be="scroll".concat(ue?"Top":"Left");if(typeof _e!="number"){var rt=H.document;_e=rt.documentElement[Be],typeof _e!="number"&&(_e=rt.body[Be])}return _e}function Vf(H){return bc(H)}function qr(H){return bc(H,!0)}function ri(H){var ue=el(H),_e=H.ownerDocument,Be=_e.defaultView||_e.parentWindow;return ue.left+=Vf(Be),ue.top+=qr(Be),ue}function Kn(H){return H!=null&&H==H.window}function Vn(H){return Kn(H)?H.document:H.nodeType===9?H:H.ownerDocument}function Ri(H,ue,_e){var Be=_e,rt="",at=Vn(H);return Be=Be||at.defaultView.getComputedStyle(H,null),Be&&(rt=Be.getPropertyValue(ue)||Be[ue]),rt}var li=new RegExp("^(".concat(Ps,")(?!px)[a-z%]+$"),"i"),ga=/^(top|right|bottom|left)$/,Ka="currentStyle",Ma="runtimeStyle",Bo="left",As="px";function Su(H,ue){var _e=H[Ka]&&H[Ka][ue];if(li.test(_e)&&!ga.test(ue)){var Be=H.style,rt=Be[Bo],at=H[Ma][Bo];H[Ma][Bo]=H[Ka][Bo],Be[Bo]=ue==="fontSize"?"1em":_e||0,_e=Be.pixelLeft+As,Be[Bo]=rt,H[Ma][Bo]=at}return _e===""?"auto":_e}typeof window!="undefined"&&(ol=window.getComputedStyle?Ri:Su);function cu(H,ue){return H==="left"?ue.useCssRight?"right":H:ue.useCssBottom?"bottom":H}function tl(H){if(H==="left")return"right";if(H==="right")return"left";if(H==="top")return"bottom";if(H==="bottom")return"top"}function Pa(H,ue,_e){Eu(H,"position")==="static"&&(H.style.position="relative");var Be=-999,rt=-999,at=cu("left",_e),Ue=cu("top",_e),Xt=tl(at),Ot=tl(Ue);at!=="left"&&(Be=999),Ue!=="top"&&(rt=999);var vr="",xn=ri(H);("left"in ue||"top"in ue)&&(vr=ec(H)||"",Il(H,"none")),"left"in ue&&(H.style[Xt]="",H.style[at]="".concat(Be,"px")),"top"in ue&&(H.style[Ot]="",H.style[Ue]="".concat(rt,"px")),Yc(H);var Pn=ri(H),ti={};for(var Yn in ue)if(ue.hasOwnProperty(Yn)){var On=cu(Yn,_e),Ni=Yn==="left"?Be:rt,Bi=xn[Yn]-Pn[Yn];On===Yn?ti[On]=Ni+Bi:ti[On]=Ni-Bi}Eu(H,ti),Yc(H),("left"in ue||"top"in ue)&&Il(H,vr);var ki={};for(var Gi in ue)if(ue.hasOwnProperty(Gi)){var Di=cu(Gi,_e),Fi=ue[Gi]-xn[Gi];Gi===Di?ki[Di]=ti[Di]+Fi:ki[Di]=ti[Di]-Fi}Eu(H,ki)}function la(H,ue){var _e=ri(H),Be=ia(H),rt={x:Be.x,y:Be.y};"left"in ue&&(rt.x=Be.x+ue.left-_e.left),"top"in ue&&(rt.y=Be.y+ue.top-_e.top),cc(H,rt)}function sl(H,ue,_e){if(_e.ignoreShake){var Be=ri(H),rt=Be.left.toFixed(0),at=Be.top.toFixed(0),Ue=ue.left.toFixed(0),Xt=ue.top.toFixed(0);if(rt===Ue&&at===Xt)return}_e.useCssRight||_e.useCssBottom?Pa(H,ue,_e):_e.useCssTransform&&Xc()in document.body.style?la(H,ue):Pa(H,ue,_e)}function us(H,ue){for(var _e=0;_e<H.length;_e++)ue(H[_e])}function wu(H){return ol(H,"boxSizing")==="border-box"}var Zs=["margin","border","padding"],ul=-1,Ec=2,cf=1,ws=0;function Qo(H,ue,_e){var Be={},rt=H.style,at;for(at in ue)ue.hasOwnProperty(at)&&(Be[at]=rt[at],rt[at]=ue[at]);_e.call(H);for(at in ue)ue.hasOwnProperty(at)&&(rt[at]=Be[at])}function ff(H,ue,_e){var Be=0,rt,at,Ue;for(at=0;at<ue.length;at++)if(rt=ue[at],rt)for(Ue=0;Ue<_e.length;Ue++){var Xt=void 0;rt==="border"?Xt="".concat(rt).concat(_e[Ue],"Width"):Xt=rt+_e[Ue],Be+=parseFloat(ol(H,Xt))||0}return Be}var Du={getParent:function(ue){var _e=ue;do _e.nodeType===11&&_e.host?_e=_e.host:_e=_e.parentNode;while(_e&&_e.nodeType!==1&&_e.nodeType!==9);return _e}};us(["Width","Height"],function(H){Du["doc".concat(H)]=function(ue){var _e=ue.document;return Math.max(_e.documentElement["scroll".concat(H)],_e.body["scroll".concat(H)],Du["viewport".concat(H)](_e))},Du["viewport".concat(H)]=function(ue){var _e="client".concat(H),Be=ue.document,rt=Be.body,at=Be.documentElement,Ue=at[_e];return Be.compatMode==="CSS1Compat"&&Ue||rt&&rt[_e]||Ue}});function du(H,ue,_e){var Be=_e;if(Kn(H))return ue==="width"?Du.viewportWidth(H):Du.viewportHeight(H);if(H.nodeType===9)return ue==="width"?Du.docWidth(H):Du.docHeight(H);var rt=ue==="width"?["Left","Right"]:["Top","Bottom"],at=Math.floor(ue==="width"?H.getBoundingClientRect().width:H.getBoundingClientRect().height),Ue=wu(H),Xt=0;(at==null||at<=0)&&(at=void 0,Xt=ol(H,ue),(Xt==null||Number(Xt)<0)&&(Xt=H.style[ue]||0),Xt=Math.floor(parseFloat(Xt))||0),Be===void 0&&(Be=Ue?cf:ul);var Ot=at!==void 0||Ue,vr=at||Xt;return Be===ul?Ot?vr-ff(H,["border","padding"],rt):Xt:Ot?Be===cf?vr:vr+(Be===Ec?-ff(H,["border"],rt):ff(H,["margin"],rt)):Xt+ff(H,Zs.slice(Be),rt)}var ll={position:"absolute",visibility:"hidden",display:"block"};function eu(){for(var H=arguments.length,ue=new Array(H),_e=0;_e<H;_e++)ue[_e]=arguments[_e];var Be,rt=ue[0];return rt.offsetWidth!==0?Be=du.apply(void 0,ue):Qo(rt,ll,function(){Be=du.apply(void 0,ue)}),Be}us(["width","height"],function(H){var ue=H.charAt(0).toUpperCase()+H.slice(1);Du["outer".concat(ue)]=function(Be,rt){return Be&&eu(Be,H,rt?ws:cf)};var _e=H==="width"?["Left","Right"]:["Top","Bottom"];Du[H]=function(Be,rt){var at=rt;if(at!==void 0){if(Be){var Ue=wu(Be);return Ue&&(at+=ff(Be,["padding","border"],_e)),Eu(Be,H,at)}return}return Be&&eu(Be,H,ul)}});function Rt(H,ue){for(var _e in ue)ue.hasOwnProperty(_e)&&(H[_e]=ue[_e]);return H}var mo={getWindow:function(ue){if(ue&&ue.document&&ue.setTimeout)return ue;var _e=ue.ownerDocument||ue;return _e.defaultView||_e.parentWindow},getDocument:Vn,offset:function(ue,_e,Be){if(typeof _e!="undefined")sl(ue,_e,Be||{});else return ri(ue)},isWindow:Kn,each:us,css:Eu,clone:function(ue){var _e,Be={};for(_e in ue)ue.hasOwnProperty(_e)&&(Be[_e]=ue[_e]);var rt=ue.overflow;if(rt)for(_e in ue)ue.hasOwnProperty(_e)&&(Be.overflow[_e]=ue.overflow[_e]);return Be},mix:Rt,getWindowScrollLeft:function(ue){return Vf(ue)},getWindowScrollTop:function(ue){return qr(ue)},merge:function(){for(var ue={},_e=0;_e<arguments.length;_e++)mo.mix(ue,_e<0||arguments.length<=_e?void 0:arguments[_e]);return ue},viewportWidth:0,viewportHeight:0};Rt(mo,Du);var xs=mo.getParent;function tu(H){if(mo.isWindow(H)||H.nodeType===9)return null;var ue=mo.getDocument(H),_e=ue.body,Be,rt=mo.css(H,"position"),at=rt==="fixed"||rt==="absolute";if(!at)return H.nodeName.toLowerCase()==="html"?null:xs(H);for(Be=xs(H);Be&&Be!==_e&&Be.nodeType!==9;Be=xs(Be))if(rt=mo.css(Be,"position"),rt!=="static")return Be;return null}var Mo=mo.getParent;function rp(H){if(mo.isWindow(H)||H.nodeType===9)return!1;var ue=mo.getDocument(H),_e=ue.body,Be=null;for(Be=Mo(H);Be&&Be!==_e&&Be!==ue;Be=Mo(Be)){var rt=mo.css(Be,"position");if(rt==="fixed")return!0}return!1}function pf(H,ue){for(var _e={left:0,right:1/0,top:0,bottom:1/0},Be=tu(H),rt=mo.getDocument(H),at=rt.defaultView||rt.parentWindow,Ue=rt.body,Xt=rt.documentElement;Be;){if((navigator.userAgent.indexOf("MSIE")===-1||Be.clientWidth!==0)&&Be!==Ue&&Be!==Xt&&mo.css(Be,"overflow")!=="visible"){var Ot=mo.offset(Be);Ot.left+=Be.clientLeft,Ot.top+=Be.clientTop,_e.top=Math.max(_e.top,Ot.top),_e.right=Math.min(_e.right,Ot.left+Be.clientWidth),_e.bottom=Math.min(_e.bottom,Ot.top+Be.clientHeight),_e.left=Math.max(_e.left,Ot.left)}else if(Be===Ue||Be===Xt)break;Be=tu(Be)}var vr=null;if(!mo.isWindow(H)&&H.nodeType!==9){vr=H.style.position;var xn=mo.css(H,"position");xn==="absolute"&&(H.style.position="fixed")}var Pn=mo.getWindowScrollLeft(at),ti=mo.getWindowScrollTop(at),Yn=mo.viewportWidth(at),On=mo.viewportHeight(at),Ni=Xt.scrollWidth,Bi=Xt.scrollHeight,ki=window.getComputedStyle(Ue);if(ki.overflowX==="hidden"&&(Ni=at.innerWidth),ki.overflowY==="hidden"&&(Bi=at.innerHeight),H.style&&(H.style.position=vr),ue||rp(H))_e.left=Math.max(_e.left,Pn),_e.top=Math.max(_e.top,ti),_e.right=Math.min(_e.right,Pn+Yn),_e.bottom=Math.min(_e.bottom,ti+On);else{var Gi=Math.max(Ni,Pn+Yn);_e.right=Math.min(_e.right,Gi);var Di=Math.max(Bi,ti+On);_e.bottom=Math.min(_e.bottom,Di)}return _e.top>=0&&_e.left>=0&&_e.bottom>_e.top&&_e.right>_e.left?_e:null}function np(H,ue,_e,Be){var rt=mo.clone(H),at={width:ue.width,height:ue.height};return Be.adjustX&&rt.left<_e.left&&(rt.left=_e.left),Be.resizeWidth&&rt.left>=_e.left&&rt.left+at.width>_e.right&&(at.width-=rt.left+at.width-_e.right),Be.adjustX&&rt.left+at.width>_e.right&&(rt.left=Math.max(_e.right-at.width,_e.left)),Be.adjustY&&rt.top<_e.top&&(rt.top=_e.top),Be.resizeHeight&&rt.top>=_e.top&&rt.top+at.height>_e.bottom&&(at.height-=rt.top+at.height-_e.bottom),Be.adjustY&&rt.top+at.height>_e.bottom&&(rt.top=Math.max(_e.bottom-at.height,_e.top)),mo.mix(rt,at)}function cl(H){var ue,_e,Be;if(!mo.isWindow(H)&&H.nodeType!==9)ue=mo.offset(H),_e=mo.outerWidth(H),Be=mo.outerHeight(H);else{var rt=mo.getWindow(H);ue={left:mo.getWindowScrollLeft(rt),top:mo.getWindowScrollTop(rt)},_e=mo.viewportWidth(rt),Be=mo.viewportHeight(rt)}return ue.width=_e,ue.height=Be,ue}function Dl(H,ue){var _e=ue.charAt(0),Be=ue.charAt(1),rt=H.width,at=H.height,Ue=H.left,Xt=H.top;return _e==="c"?Xt+=at/2:_e==="b"&&(Xt+=at),Be==="c"?Ue+=rt/2:Be==="r"&&(Ue+=rt),{left:Ue,top:Xt}}function Cs(H,ue,_e,Be,rt){var at=Dl(ue,_e[1]),Ue=Dl(H,_e[0]),Xt=[Ue.left-at.left,Ue.top-at.top];return{left:Math.round(H.left-Xt[0]+Be[0]-rt[0]),top:Math.round(H.top-Xt[1]+Be[1]-rt[1])}}function fu(H,ue,_e){return H.left<_e.left||H.left+ue.width>_e.right}function Zl(H,ue,_e){return H.top<_e.top||H.top+ue.height>_e.bottom}function Mu(H,ue,_e){return H.left>_e.right||H.left+ue.width<_e.left}function Fu(H,ue,_e){return H.top>_e.bottom||H.top+ue.height<_e.top}function Nc(H,ue,_e){var Be=[];return mo.each(H,function(rt){Be.push(rt.replace(ue,function(at){return _e[at]}))}),Be}function hf(H,ue){return H[ue]=-H[ue],H}function Ol(H,ue){var _e;return/%$/.test(H)?_e=parseInt(H.substring(0,H.length-1),10)/100*ue:_e=parseInt(H,10),_e||0}function d(H,ue){H[0]=Ol(H[0],ue.width),H[1]=Ol(H[1],ue.height)}function _(H,ue,_e,Be){var rt=_e.points,at=_e.offset||[0,0],Ue=_e.targetOffset||[0,0],Xt=_e.overflow,Ot=_e.source||H;at=[].concat(at),Ue=[].concat(Ue),Xt=Xt||{};var vr={},xn=0,Pn=!!(Xt&&Xt.alwaysByViewport),ti=pf(Ot,Pn),Yn=cl(Ot);d(at,Yn),d(Ue,ue);var On=Cs(Yn,ue,rt,at,Ue),Ni=mo.merge(Yn,On);if(ti&&(Xt.adjustX||Xt.adjustY)&&Be){if(Xt.adjustX&&fu(On,Yn,ti)){var Bi=Nc(rt,/[lr]/gi,{l:"r",r:"l"}),ki=hf(at,0),Gi=hf(Ue,0),Di=Cs(Yn,ue,Bi,ki,Gi);Mu(Di,Yn,ti)||(xn=1,rt=Bi,at=ki,Ue=Gi)}if(Xt.adjustY&&Zl(On,Yn,ti)){var Fi=Nc(rt,/[tb]/gi,{t:"b",b:"t"}),bi=hf(at,1),qi=hf(Ue,1),di=Cs(Yn,ue,Fi,bi,qi);Fu(di,Yn,ti)||(xn=1,rt=Fi,at=bi,Ue=qi)}xn&&(On=Cs(Yn,ue,rt,at,Ue),mo.mix(Ni,On));var ba=fu(On,Yn,ti),_a=Zl(On,Yn,ti);if(ba||_a){var Ya=rt;ba&&(Ya=Nc(rt,/[lr]/gi,{l:"r",r:"l"})),_a&&(Ya=Nc(rt,/[tb]/gi,{t:"b",b:"t"})),rt=Ya,at=_e.offset||[0,0],Ue=_e.targetOffset||[0,0]}vr.adjustX=Xt.adjustX&&ba,vr.adjustY=Xt.adjustY&&_a,(vr.adjustX||vr.adjustY)&&(Ni=np(On,Yn,ti,vr))}return Ni.width!==Yn.width&&mo.css(Ot,"width",mo.width(Ot)+Ni.width-Yn.width),Ni.height!==Yn.height&&mo.css(Ot,"height",mo.height(Ot)+Ni.height-Yn.height),mo.offset(Ot,{left:Ni.left,top:Ni.top},{useCssRight:_e.useCssRight,useCssBottom:_e.useCssBottom,useCssTransform:_e.useCssTransform,ignoreShake:_e.ignoreShake}),{points:rt,offset:at,targetOffset:Ue,overflow:vr}}function m(H,ue){var _e=pf(H,ue),Be=cl(H);return!_e||Be.left+Be.width<=_e.left||Be.top+Be.height<=_e.top||Be.left>=_e.right||Be.top>=_e.bottom}function S(H,ue,_e){var Be=_e.target||ue,rt=cl(Be),at=!m(Be,_e.overflow&&_e.overflow.alwaysByViewport);return _(H,rt,_e,at)}S.__getOffsetParent=tu,S.__getVisibleRectForElement=pf;function N(H,ue,_e){var Be,rt,at=mo.getDocument(H),Ue=at.defaultView||at.parentWindow,Xt=mo.getWindowScrollLeft(Ue),Ot=mo.getWindowScrollTop(Ue),vr=mo.viewportWidth(Ue),xn=mo.viewportHeight(Ue);"pageX"in ue?Be=ue.pageX:Be=Xt+ue.clientX,"pageY"in ue?rt=ue.pageY:rt=Ot+ue.clientY;var Pn={left:Be,top:rt,width:0,height:0},ti=Be>=0&&Be<=Xt+vr&&rt>=0&&rt<=Ot+xn,Yn=[_e.points[0],"cc"];return _(H,Pn,lu(lu({},_e),{},{points:Yn}),ti)}var X=null,ee=c(31223),Ae=c.n(ee);function Ze(H,ue){return H===ue?!0:!H||!ue?!1:"pageX"in ue&&"pageY"in ue?H.pageX===ue.pageX&&H.pageY===ue.pageY:"clientX"in ue&&"clientY"in ue?H.clientX===ue.clientX&&H.clientY===ue.clientY:!1}function nt(H,ue){H!==document.activeElement&&da(ue,H)&&typeof H.focus=="function"&&H.focus()}function Ct(H,ue){var _e=null,Be=null;function rt(Ue){var Xt=(0,Xe.Z)(Ue,1),Ot=Xt[0].target;if(!!document.documentElement.contains(Ot)){var vr=Ot.getBoundingClientRect(),xn=vr.width,Pn=vr.height,ti=Math.floor(xn),Yn=Math.floor(Pn);(_e!==ti||Be!==Yn)&&Promise.resolve().then(function(){ue({width:ti,height:Yn})}),_e=ti,Be=Yn}}var at=new ys(rt);return H&&at.observe(H),function(){at.disconnect()}}var Tt=function(H,ue){var _e=v.useRef(!1),Be=v.useRef(null);function rt(){window.clearTimeout(Be.current)}function at(Ue){if(rt(),!_e.current||Ue===!0){if(H()===!1)return;_e.current=!0,Be.current=window.setTimeout(function(){_e.current=!1},ue)}else Be.current=window.setTimeout(function(){_e.current=!1,at()},ue)}return[at,function(){_e.current=!1,rt()}]};function Pt(H){return typeof H!="function"?null:H()}function tr(H){return(0,Ke.Z)(H)!=="object"||!H?null:H}var or=function(ue,_e){var Be=ue.children,rt=ue.disabled,at=ue.target,Ue=ue.align,Xt=ue.onAlign,Ot=ue.monitorWindowResize,vr=ue.monitorBufferTime,xn=vr===void 0?0:vr,Pn=v.useRef({}),ti=v.useRef(),Yn=v.Children.only(Be),On=v.useRef({});On.current.disabled=rt,On.current.target=at,On.current.align=Ue,On.current.onAlign=Xt;var Ni=Tt(function(){var qi=On.current,di=qi.disabled,ba=qi.target,_a=qi.align,Ya=qi.onAlign;if(!di&&ba){var Te=ti.current,Qe,pt=Pt(ba),Vt=tr(ba);Pn.current.element=pt,Pn.current.point=Vt,Pn.current.align=_a;var Sr=document,dr=Sr.activeElement;return pt&&Jl(pt)?Qe=S(Te,pt,_a):Vt&&(Qe=N(Te,Vt,_a)),nt(dr,Te),Ya&&Qe&&Ya(Te,Qe),!0}return!1},xn),Bi=(0,Xe.Z)(Ni,2),ki=Bi[0],Gi=Bi[1],Di=v.useRef({cancel:function(){}}),Fi=v.useRef({cancel:function(){}});v.useEffect(function(){var qi=Pt(at),di=tr(at);ti.current!==Fi.current.element&&(Fi.current.cancel(),Fi.current.element=ti.current,Fi.current.cancel=Ct(ti.current,ki)),(Pn.current.element!==qi||!Ze(Pn.current.point,di)||!Ae()(Pn.current.align,Ue))&&(ki(),Di.current.element!==qi&&(Di.current.cancel(),Di.current.element=qi,Di.current.cancel=Ct(qi,ki)))}),v.useEffect(function(){rt?Gi():ki()},[rt]);var bi=v.useRef(null);return v.useEffect(function(){Ot?bi.current||(bi.current=uo(window,"resize",ki)):bi.current&&(bi.current.remove(),bi.current=null)},[Ot]),v.useEffect(function(){return function(){Di.current.cancel(),Fi.current.cancel(),bi.current&&bi.current.remove(),Gi()}},[]),v.useImperativeHandle(_e,function(){return{forceAlign:function(){return ki(!0)}}}),v.isValidElement(Yn)&&(Yn=v.cloneElement(Yn,{ref:ot(Yn.ref,ti)})),Yn},gr=v.forwardRef(or);gr.displayName="Align";var Yt=gr,br=Yt;function Lr(){"use strict";Lr=function(){return H};var H={},ue=Object.prototype,_e=ue.hasOwnProperty,Be=Object.defineProperty||function(Qe,pt,Vt){Qe[pt]=Vt.value},rt=typeof Symbol=="function"?Symbol:{},at=rt.iterator||"@@iterator",Ue=rt.asyncIterator||"@@asyncIterator",Xt=rt.toStringTag||"@@toStringTag";function Ot(Qe,pt,Vt){return Object.defineProperty(Qe,pt,{value:Vt,enumerable:!0,configurable:!0,writable:!0}),Qe[pt]}try{Ot({},"")}catch(Qe){Ot=function(Vt,Sr,dr){return Vt[Sr]=dr}}function vr(Qe,pt,Vt,Sr){var dr=pt&&pt.prototype instanceof ti?pt:ti,Ar=Object.create(dr.prototype),hn=new _a(Sr||[]);return Be(Ar,"_invoke",{value:bi(Qe,Vt,hn)}),Ar}function xn(Qe,pt,Vt){try{return{type:"normal",arg:Qe.call(pt,Vt)}}catch(Sr){return{type:"throw",arg:Sr}}}H.wrap=vr;var Pn={};function ti(){}function Yn(){}function On(){}var Ni={};Ot(Ni,at,function(){return this});var Bi=Object.getPrototypeOf,ki=Bi&&Bi(Bi(Ya([])));ki&&ki!==ue&&_e.call(ki,at)&&(Ni=ki);var Gi=On.prototype=ti.prototype=Object.create(Ni);function Di(Qe){["next","throw","return"].forEach(function(pt){Ot(Qe,pt,function(Vt){return this._invoke(pt,Vt)})})}function Fi(Qe,pt){function Vt(dr,Ar,hn,Tn){var Hn=xn(Qe[dr],Qe,Ar);if(Hn.type!=="throw"){var Bn=Hn.arg,bn=Bn.value;return bn&&(0,Ke.Z)(bn)=="object"&&_e.call(bn,"__await")?pt.resolve(bn.__await).then(function(En){Vt("next",En,hn,Tn)},function(En){Vt("throw",En,hn,Tn)}):pt.resolve(bn).then(function(En){Bn.value=En,hn(Bn)},function(En){return Vt("throw",En,hn,Tn)})}Tn(Hn.arg)}var Sr;Be(this,"_invoke",{value:function(Ar,hn){function Tn(){return new pt(function(Hn,Bn){Vt(Ar,hn,Hn,Bn)})}return Sr=Sr?Sr.then(Tn,Tn):Tn()}})}function bi(Qe,pt,Vt){var Sr="suspendedStart";return function(dr,Ar){if(Sr==="executing")throw new Error("Generator is already running");if(Sr==="completed"){if(dr==="throw")throw Ar;return Te()}for(Vt.method=dr,Vt.arg=Ar;;){var hn=Vt.delegate;if(hn){var Tn=qi(hn,Vt);if(Tn){if(Tn===Pn)continue;return Tn}}if(Vt.method==="next")Vt.sent=Vt._sent=Vt.arg;else if(Vt.method==="throw"){if(Sr==="suspendedStart")throw Sr="completed",Vt.arg;Vt.dispatchException(Vt.arg)}else Vt.method==="return"&&Vt.abrupt("return",Vt.arg);Sr="executing";var Hn=xn(Qe,pt,Vt);if(Hn.type==="normal"){if(Sr=Vt.done?"completed":"suspendedYield",Hn.arg===Pn)continue;return{value:Hn.arg,done:Vt.done}}Hn.type==="throw"&&(Sr="completed",Vt.method="throw",Vt.arg=Hn.arg)}}}function qi(Qe,pt){var Vt=Qe.iterator[pt.method];if(Vt===void 0){if(pt.delegate=null,pt.method==="throw"){if(Qe.iterator.return&&(pt.method="return",pt.arg=void 0,qi(Qe,pt),pt.method==="throw"))return Pn;pt.method="throw",pt.arg=new TypeError("The iterator does not provide a 'throw' method")}return Pn}var Sr=xn(Vt,Qe.iterator,pt.arg);if(Sr.type==="throw")return pt.method="throw",pt.arg=Sr.arg,pt.delegate=null,Pn;var dr=Sr.arg;return dr?dr.done?(pt[Qe.resultName]=dr.value,pt.next=Qe.nextLoc,pt.method!=="return"&&(pt.method="next",pt.arg=void 0),pt.delegate=null,Pn):dr:(pt.method="throw",pt.arg=new TypeError("iterator result is not an object"),pt.delegate=null,Pn)}function di(Qe){var pt={tryLoc:Qe[0]};1 in Qe&&(pt.catchLoc=Qe[1]),2 in Qe&&(pt.finallyLoc=Qe[2],pt.afterLoc=Qe[3]),this.tryEntries.push(pt)}function ba(Qe){var pt=Qe.completion||{};pt.type="normal",delete pt.arg,Qe.completion=pt}function _a(Qe){this.tryEntries=[{tryLoc:"root"}],Qe.forEach(di,this),this.reset(!0)}function Ya(Qe){if(Qe){var pt=Qe[at];if(pt)return pt.call(Qe);if(typeof Qe.next=="function")return Qe;if(!isNaN(Qe.length)){var Vt=-1,Sr=function dr(){for(;++Vt<Qe.length;)if(_e.call(Qe,Vt))return dr.value=Qe[Vt],dr.done=!1,dr;return dr.value=void 0,dr.done=!0,dr};return Sr.next=Sr}}return{next:Te}}function Te(){return{value:void 0,done:!0}}return Yn.prototype=On,Be(Gi,"constructor",{value:On,configurable:!0}),Be(On,"constructor",{value:Yn,configurable:!0}),Yn.displayName=Ot(On,Xt,"GeneratorFunction"),H.isGeneratorFunction=function(Qe){var pt=typeof Qe=="function"&&Qe.constructor;return!!pt&&(pt===Yn||(pt.displayName||pt.name)==="GeneratorFunction")},H.mark=function(Qe){return Object.setPrototypeOf?Object.setPrototypeOf(Qe,On):(Qe.__proto__=On,Ot(Qe,Xt,"GeneratorFunction")),Qe.prototype=Object.create(Gi),Qe},H.awrap=function(Qe){return{__await:Qe}},Di(Fi.prototype),Ot(Fi.prototype,Ue,function(){return this}),H.AsyncIterator=Fi,H.async=function(Qe,pt,Vt,Sr,dr){dr===void 0&&(dr=Promise);var Ar=new Fi(vr(Qe,pt,Vt,Sr),dr);return H.isGeneratorFunction(pt)?Ar:Ar.next().then(function(hn){return hn.done?hn.value:Ar.next()})},Di(Gi),Ot(Gi,Xt,"Generator"),Ot(Gi,at,function(){return this}),Ot(Gi,"toString",function(){return"[object Generator]"}),H.keys=function(Qe){var pt=Object(Qe),Vt=[];for(var Sr in pt)Vt.push(Sr);return Vt.reverse(),function dr(){for(;Vt.length;){var Ar=Vt.pop();if(Ar in pt)return dr.value=Ar,dr.done=!1,dr}return dr.done=!0,dr}},H.values=Ya,_a.prototype={constructor:_a,reset:function(pt){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(ba),!pt)for(var Vt in this)Vt.charAt(0)==="t"&&_e.call(this,Vt)&&!isNaN(+Vt.slice(1))&&(this[Vt]=void 0)},stop:function(){this.done=!0;var pt=this.tryEntries[0].completion;if(pt.type==="throw")throw pt.arg;return this.rval},dispatchException:function(pt){if(this.done)throw pt;var Vt=this;function Sr(Bn,bn){return hn.type="throw",hn.arg=pt,Vt.next=Bn,bn&&(Vt.method="next",Vt.arg=void 0),!!bn}for(var dr=this.tryEntries.length-1;dr>=0;--dr){var Ar=this.tryEntries[dr],hn=Ar.completion;if(Ar.tryLoc==="root")return Sr("end");if(Ar.tryLoc<=this.prev){var Tn=_e.call(Ar,"catchLoc"),Hn=_e.call(Ar,"finallyLoc");if(Tn&&Hn){if(this.prev<Ar.catchLoc)return Sr(Ar.catchLoc,!0);if(this.prev<Ar.finallyLoc)return Sr(Ar.finallyLoc)}else if(Tn){if(this.prev<Ar.catchLoc)return Sr(Ar.catchLoc,!0)}else{if(!Hn)throw new Error("try statement without catch or finally");if(this.prev<Ar.finallyLoc)return Sr(Ar.finallyLoc)}}}},abrupt:function(pt,Vt){for(var Sr=this.tryEntries.length-1;Sr>=0;--Sr){var dr=this.tryEntries[Sr];if(dr.tryLoc<=this.prev&&_e.call(dr,"finallyLoc")&&this.prev<dr.finallyLoc){var Ar=dr;break}}Ar&&(pt==="break"||pt==="continue")&&Ar.tryLoc<=Vt&&Vt<=Ar.finallyLoc&&(Ar=null);var hn=Ar?Ar.completion:{};return hn.type=pt,hn.arg=Vt,Ar?(this.method="next",this.next=Ar.finallyLoc,Pn):this.complete(hn)},complete:function(pt,Vt){if(pt.type==="throw")throw pt.arg;return pt.type==="break"||pt.type==="continue"?this.next=pt.arg:pt.type==="return"?(this.rval=this.arg=pt.arg,this.method="return",this.next="end"):pt.type==="normal"&&Vt&&(this.next=Vt),Pn},finish:function(pt){for(var Vt=this.tryEntries.length-1;Vt>=0;--Vt){var Sr=this.tryEntries[Vt];if(Sr.finallyLoc===pt)return this.complete(Sr.completion,Sr.afterLoc),ba(Sr),Pn}},catch:function(pt){for(var Vt=this.tryEntries.length-1;Vt>=0;--Vt){var Sr=this.tryEntries[Vt];if(Sr.tryLoc===pt){var dr=Sr.completion;if(dr.type==="throw"){var Ar=dr.arg;ba(Sr)}return Ar}}throw new Error("illegal catch attempt")},delegateYield:function(pt,Vt,Sr){return this.delegate={iterator:Ya(pt),resultName:Vt,nextLoc:Sr},this.method==="next"&&(this.arg=void 0),Pn}},H}var pn=c(17374),zn=["measure","alignPre","align",null,"motion"],Nn=function(H,ue){var _e=Fe(null),Be=(0,Xe.Z)(_e,2),rt=Be[0],at=Be[1],Ue=(0,v.useRef)();function Xt(xn){at(xn,!0)}function Ot(){Pi.cancel(Ue.current)}function vr(xn){Ot(),Ue.current=Pi(function(){Xt(function(Pn){switch(rt){case"align":return"motion";case"motion":return"stable";default:}return Pn}),xn==null||xn()})}return(0,v.useEffect)(function(){Xt("measure")},[H]),(0,v.useEffect)(function(){switch(rt){case"measure":ue();break;default:}rt&&(Ue.current=Pi((0,pn.Z)(Lr().mark(function xn(){var Pn,ti;return Lr().wrap(function(On){for(;;)switch(On.prev=On.next){case 0:Pn=zn.indexOf(rt),ti=zn[Pn+1],ti&&Pn!==-1&&Xt(ti);case 3:case"end":return On.stop()}},xn)}))))},[rt]),(0,v.useEffect)(function(){return function(){Ot()}},[]),[rt,vr]},Xn=function(H){var ue=v.useState({width:0,height:0}),_e=(0,Xe.Z)(ue,2),Be=_e[0],rt=_e[1];function at(Xt){rt({width:Xt.offsetWidth,height:Xt.offsetHeight})}var Ue=v.useMemo(function(){var Xt={};if(H){var Ot=Be.width,vr=Be.height;H.indexOf("height")!==-1&&vr?Xt.height=vr:H.indexOf("minHeight")!==-1&&vr&&(Xt.minHeight=vr),H.indexOf("width")!==-1&&Ot?Xt.width=Ot:H.indexOf("minWidth")!==-1&&Ot&&(Xt.minWidth=Ot)}return Xt},[H,Be]);return[Ue,at]},yi=v.forwardRef(function(H,ue){var _e=H.visible,Be=H.prefixCls,rt=H.className,at=H.style,Ue=H.children,Xt=H.zIndex,Ot=H.stretch,vr=H.destroyPopupOnHide,xn=H.forceRender,Pn=H.align,ti=H.point,Yn=H.getRootDomNode,On=H.getClassNameFromAlign,Ni=H.onAlign,Bi=H.onMouseEnter,ki=H.onMouseLeave,Gi=H.onMouseDown,Di=H.onTouchStart,Fi=H.onClick,bi=(0,v.useRef)(),qi=(0,v.useRef)(),di=(0,v.useState)(),ba=(0,Xe.Z)(di,2),_a=ba[0],Ya=ba[1],Te=Xn(Ot),Qe=(0,Xe.Z)(Te,2),pt=Qe[0],Vt=Qe[1];function Sr(){Ot&&Vt(Yn())}var dr=Nn(_e,Sr),Ar=(0,Xe.Z)(dr,2),hn=Ar[0],Tn=Ar[1],Hn=(0,v.useState)(0),Bn=(0,Xe.Z)(Hn,2),bn=Bn[0],En=Bn[1],Mn=(0,v.useRef)();Ne(function(){hn==="alignPre"&&En(0)},[hn]);function Un(){return ti||Yn}function Nr(){var Xi;(Xi=bi.current)===null||Xi===void 0||Xi.forceAlign()}function Er(Xi,Rn){var kn=On(Rn);_a!==kn&&Ya(kn),En(function(Si){return Si+1}),hn==="align"&&(Ni==null||Ni(Xi,Rn))}Ne(function(){hn==="align"&&(bn<3?Nr():Tn(function(){var Xi;(Xi=Mn.current)===null||Xi===void 0||Xi.call(Mn)}))},[bn]);var oi=(0,Me.Z)({},tp(H));["onAppearEnd","onEnterEnd","onLeaveEnd"].forEach(function(Xi){var Rn=oi[Xi];oi[Xi]=function(kn,Si){return Tn(),Rn==null?void 0:Rn(kn,Si)}});function wi(){return new Promise(function(Xi){Mn.current=Xi})}v.useEffect(function(){!oi.motionName&&hn==="motion"&&Tn()},[oi.motionName,hn]),v.useImperativeHandle(ue,function(){return{forceAlign:Nr,getElement:function(){return qi.current}}});var Wn=(0,Me.Z)((0,Me.Z)({},pt),{},{zIndex:Xt,opacity:hn==="motion"||hn==="stable"||!_e?void 0:0,pointerEvents:!_e&&hn!=="stable"?"none":void 0},at),ci=!0;Pn!=null&&Pn.points&&(hn==="align"||hn==="stable")&&(ci=!1);var Mi=Ue;return v.Children.count(Ue)>1&&(Mi=v.createElement("div",{className:"".concat(Be,"-content")},Ue)),v.createElement(jn,(0,ke.Z)({visible:_e,ref:qi,leavedClassName:"".concat(Be,"-hidden")},oi,{onAppearPrepare:wi,onEnterPrepare:wi,removeOnLeave:vr,forceRender:xn}),function(Xi,Rn){var kn=Xi.className,Si=Xi.style,mi=ie()(Be,rt,_a,kn);return v.createElement(br,{target:Un(),key:"popup",ref:bi,monitorWindowResize:!0,disabled:ci,align:Pn,onAlign:Er},v.createElement("div",{ref:Rn,className:mi,onMouseEnter:Bi,onMouseLeave:ki,onMouseDownCapture:Gi,onTouchStartCapture:Di,onClick:Fi,style:(0,Me.Z)((0,Me.Z)({},Si),Wn)},Mi))})});yi.displayName="PopupInner";var Li=yi,Ei=v.forwardRef(function(H,ue){var _e=H.prefixCls,Be=H.visible,rt=H.zIndex,at=H.children,Ue=H.mobile;Ue=Ue===void 0?{}:Ue;var Xt=Ue.popupClassName,Ot=Ue.popupStyle,vr=Ue.popupMotion,xn=vr===void 0?{}:vr,Pn=Ue.popupRender,ti=H.onClick,Yn=v.useRef();v.useImperativeHandle(ue,function(){return{forceAlign:function(){},getElement:function(){return Yn.current}}});var On=(0,Me.Z)({zIndex:rt},Ot),Ni=at;return v.Children.count(at)>1&&(Ni=v.createElement("div",{className:"".concat(_e,"-content")},at)),Pn&&(Ni=Pn(Ni)),v.createElement(jn,(0,ke.Z)({visible:Be,ref:Yn,removeOnLeave:!0},xn),function(Bi,ki){var Gi=Bi.className,Di=Bi.style,Fi=ie()(_e,Xt,Gi);return v.createElement("div",{ref:ki,className:Fi,onClick:ti,style:(0,Me.Z)((0,Me.Z)({},Di),On)},Ni)})});Ei.displayName="MobilePopupInner";var Vi=Ei,Ea=["visible","mobile"],Qa=v.forwardRef(function(H,ue){var _e=H.visible,Be=H.mobile,rt=(0,At.Z)(H,Ea),at=(0,v.useState)(_e),Ue=(0,Xe.Z)(at,2),Xt=Ue[0],Ot=Ue[1],vr=(0,v.useState)(!1),xn=(0,Xe.Z)(vr,2),Pn=xn[0],ti=xn[1],Yn=(0,Me.Z)((0,Me.Z)({},rt),{},{visible:Xt});(0,v.useEffect)(function(){Ot(_e),_e&&Be&&ti(oe())},[_e,Be]);var On=Pn?v.createElement(Vi,(0,ke.Z)({},Yn,{mobile:Be,ref:ue})):v.createElement(Li,(0,ke.Z)({},Yn,{ref:ue}));return v.createElement("div",null,v.createElement(_c,Yn),On)});Qa.displayName="Popup";var Ga=Qa,io=v.createContext(null),ya=io;function yo(){}function _o(){return""}function po(H){return H?H.ownerDocument:window.document}var Ha=["onClick","onMouseDown","onTouchStart","onMouseEnter","onMouseLeave","onFocus","onBlur","onContextMenu"];function Ro(H){var ue=function(_e){(0,Jn.Z)(rt,_e);var Be=ta(rt);function rt(at){var Ue;(0,Ft.Z)(this,rt),Ue=Be.call(this,at),(0,we.Z)((0,xi.Z)(Ue),"popupRef",v.createRef()),(0,we.Z)((0,xi.Z)(Ue),"triggerRef",v.createRef()),(0,we.Z)((0,xi.Z)(Ue),"portalContainer",void 0),(0,we.Z)((0,xi.Z)(Ue),"attachId",void 0),(0,we.Z)((0,xi.Z)(Ue),"clickOutsideHandler",void 0),(0,we.Z)((0,xi.Z)(Ue),"touchOutsideHandler",void 0),(0,we.Z)((0,xi.Z)(Ue),"contextMenuOutsideHandler1",void 0),(0,we.Z)((0,xi.Z)(Ue),"contextMenuOutsideHandler2",void 0),(0,we.Z)((0,xi.Z)(Ue),"mouseDownTimeout",void 0),(0,we.Z)((0,xi.Z)(Ue),"focusTime",void 0),(0,we.Z)((0,xi.Z)(Ue),"preClickTime",void 0),(0,we.Z)((0,xi.Z)(Ue),"preTouchTime",void 0),(0,we.Z)((0,xi.Z)(Ue),"delayTimer",void 0),(0,we.Z)((0,xi.Z)(Ue),"hasPopupMouseDown",void 0),(0,we.Z)((0,xi.Z)(Ue),"onMouseEnter",function(Ot){var vr=Ue.props.mouseEnterDelay;Ue.fireEvents("onMouseEnter",Ot),Ue.delaySetPopupVisible(!0,vr,vr?null:Ot)}),(0,we.Z)((0,xi.Z)(Ue),"onMouseMove",function(Ot){Ue.fireEvents("onMouseMove",Ot),Ue.setPoint(Ot)}),(0,we.Z)((0,xi.Z)(Ue),"onMouseLeave",function(Ot){Ue.fireEvents("onMouseLeave",Ot),Ue.delaySetPopupVisible(!1,Ue.props.mouseLeaveDelay)}),(0,we.Z)((0,xi.Z)(Ue),"onPopupMouseEnter",function(){Ue.clearDelayTimer()}),(0,we.Z)((0,xi.Z)(Ue),"onPopupMouseLeave",function(Ot){var vr;Ot.relatedTarget&&!Ot.relatedTarget.setTimeout&&da((vr=Ue.popupRef.current)===null||vr===void 0?void 0:vr.getElement(),Ot.relatedTarget)||Ue.delaySetPopupVisible(!1,Ue.props.mouseLeaveDelay)}),(0,we.Z)((0,xi.Z)(Ue),"onFocus",function(Ot){Ue.fireEvents("onFocus",Ot),Ue.clearDelayTimer(),Ue.isFocusToShow()&&(Ue.focusTime=Date.now(),Ue.delaySetPopupVisible(!0,Ue.props.focusDelay))}),(0,we.Z)((0,xi.Z)(Ue),"onMouseDown",function(Ot){Ue.fireEvents("onMouseDown",Ot),Ue.preClickTime=Date.now()}),(0,we.Z)((0,xi.Z)(Ue),"onTouchStart",function(Ot){Ue.fireEvents("onTouchStart",Ot),Ue.preTouchTime=Date.now()}),(0,we.Z)((0,xi.Z)(Ue),"onBlur",function(Ot){Ue.fireEvents("onBlur",Ot),Ue.clearDelayTimer(),Ue.isBlurToHide()&&Ue.delaySetPopupVisible(!1,Ue.props.blurDelay)}),(0,we.Z)((0,xi.Z)(Ue),"onContextMenu",function(Ot){Ot.preventDefault(),Ue.fireEvents("onContextMenu",Ot),Ue.setPopupVisible(!0,Ot)}),(0,we.Z)((0,xi.Z)(Ue),"onContextMenuClose",function(){Ue.isContextMenuToShow()&&Ue.close()}),(0,we.Z)((0,xi.Z)(Ue),"onClick",function(Ot){if(Ue.fireEvents("onClick",Ot),Ue.focusTime){var vr;if(Ue.preClickTime&&Ue.preTouchTime?vr=Math.min(Ue.preClickTime,Ue.preTouchTime):Ue.preClickTime?vr=Ue.preClickTime:Ue.preTouchTime&&(vr=Ue.preTouchTime),Math.abs(vr-Ue.focusTime)<20)return;Ue.focusTime=0}Ue.preClickTime=0,Ue.preTouchTime=0,Ue.isClickToShow()&&(Ue.isClickToHide()||Ue.isBlurToHide())&&Ot&&Ot.preventDefault&&Ot.preventDefault();var xn=!Ue.state.popupVisible;(Ue.isClickToHide()&&!xn||xn&&Ue.isClickToShow())&&Ue.setPopupVisible(!Ue.state.popupVisible,Ot)}),(0,we.Z)((0,xi.Z)(Ue),"onPopupMouseDown",function(){if(Ue.hasPopupMouseDown=!0,clearTimeout(Ue.mouseDownTimeout),Ue.mouseDownTimeout=window.setTimeout(function(){Ue.hasPopupMouseDown=!1},0),Ue.context){var Ot;(Ot=Ue.context).onPopupMouseDown.apply(Ot,arguments)}}),(0,we.Z)((0,xi.Z)(Ue),"onDocumentClick",function(Ot){if(!(Ue.props.mask&&!Ue.props.maskClosable)){var vr=Ot.target,xn=Ue.getRootDomNode(),Pn=Ue.getPopupDomNode();(!da(xn,vr)||Ue.isContextMenuOnly())&&!da(Pn,vr)&&!Ue.hasPopupMouseDown&&Ue.close()}}),(0,we.Z)((0,xi.Z)(Ue),"getRootDomNode",function(){var Ot=Ue.props.getTriggerDOMNode;if(Ot)return Ot(Ue.triggerRef.current);try{var vr=xr(Ue.triggerRef.current);if(vr)return vr}catch(xn){}return Qt.findDOMNode((0,xi.Z)(Ue))}),(0,we.Z)((0,xi.Z)(Ue),"getPopupClassNameFromAlign",function(Ot){var vr=[],xn=Ue.props,Pn=xn.popupPlacement,ti=xn.builtinPlacements,Yn=xn.prefixCls,On=xn.alignPoint,Ni=xn.getPopupClassNameFromAlign;return Pn&&ti&&vr.push(yc(ti,Yn,Ot,On)),Ni&&vr.push(Ni(Ot)),vr.join(" ")}),(0,we.Z)((0,xi.Z)(Ue),"getComponent",function(){var Ot=Ue.props,vr=Ot.prefixCls,xn=Ot.destroyPopupOnHide,Pn=Ot.popupClassName,ti=Ot.onPopupAlign,Yn=Ot.popupMotion,On=Ot.popupAnimation,Ni=Ot.popupTransitionName,Bi=Ot.popupStyle,ki=Ot.mask,Gi=Ot.maskAnimation,Di=Ot.maskTransitionName,Fi=Ot.maskMotion,bi=Ot.zIndex,qi=Ot.popup,di=Ot.stretch,ba=Ot.alignPoint,_a=Ot.mobile,Ya=Ot.forceRender,Te=Ot.onPopupClick,Qe=Ue.state,pt=Qe.popupVisible,Vt=Qe.point,Sr=Ue.getPopupAlign(),dr={};return Ue.isMouseEnterToShow()&&(dr.onMouseEnter=Ue.onPopupMouseEnter),Ue.isMouseLeaveToHide()&&(dr.onMouseLeave=Ue.onPopupMouseLeave),dr.onMouseDown=Ue.onPopupMouseDown,dr.onTouchStart=Ue.onPopupMouseDown,v.createElement(Ga,(0,ke.Z)({prefixCls:vr,destroyPopupOnHide:xn,visible:pt,point:ba&&Vt,className:Pn,align:Sr,onAlign:ti,animation:On,getClassNameFromAlign:Ue.getPopupClassNameFromAlign},dr,{stretch:di,getRootDomNode:Ue.getRootDomNode,style:Bi,mask:ki,zIndex:bi,transitionName:Ni,maskAnimation:Gi,maskTransitionName:Di,maskMotion:Fi,ref:Ue.popupRef,motion:Yn,mobile:_a,forceRender:Ya,onClick:Te}),typeof qi=="function"?qi():qi)}),(0,we.Z)((0,xi.Z)(Ue),"attachParent",function(Ot){Pi.cancel(Ue.attachId);var vr=Ue.props,xn=vr.getPopupContainer,Pn=vr.getDocument,ti=Ue.getRootDomNode(),Yn;xn?(ti||xn.length===0)&&(Yn=xn(ti)):Yn=Pn(Ue.getRootDomNode()).body,Yn?Yn.appendChild(Ot):Ue.attachId=Pi(function(){Ue.attachParent(Ot)})}),(0,we.Z)((0,xi.Z)(Ue),"getContainer",function(){if(!Ue.portalContainer){var Ot=Ue.props.getDocument,vr=Ot(Ue.getRootDomNode()).createElement("div");vr.style.position="absolute",vr.style.top="0",vr.style.left="0",vr.style.width="100%",Ue.portalContainer=vr}return Ue.attachParent(Ue.portalContainer),Ue.portalContainer}),(0,we.Z)((0,xi.Z)(Ue),"setPoint",function(Ot){var vr=Ue.props.alignPoint;!vr||!Ot||Ue.setState({point:{pageX:Ot.pageX,pageY:Ot.pageY}})}),(0,we.Z)((0,xi.Z)(Ue),"handlePortalUpdate",function(){Ue.state.prevPopupVisible!==Ue.state.popupVisible&&Ue.props.afterPopupVisibleChange(Ue.state.popupVisible)}),(0,we.Z)((0,xi.Z)(Ue),"triggerContextValue",{onPopupMouseDown:Ue.onPopupMouseDown});var Xt;return"popupVisible"in at?Xt=!!at.popupVisible:Xt=!!at.defaultPopupVisible,Ue.state={prevPopupVisible:Xt,popupVisible:Xt},Ha.forEach(function(Ot){Ue["fire".concat(Ot)]=function(vr){Ue.fireEvents(Ot,vr)}}),Ue}return(0,zr.Z)(rt,[{key:"componentDidMount",value:function(){this.componentDidUpdate()}},{key:"componentDidUpdate",value:function(){var Ue=this.props,Xt=this.state;if(Xt.popupVisible){var Ot;!this.clickOutsideHandler&&(this.isClickToHide()||this.isContextMenuToShow())&&(Ot=Ue.getDocument(this.getRootDomNode()),this.clickOutsideHandler=uo(Ot,"mousedown",this.onDocumentClick)),this.touchOutsideHandler||(Ot=Ot||Ue.getDocument(this.getRootDomNode()),this.touchOutsideHandler=uo(Ot,"touchstart",this.onDocumentClick)),!this.contextMenuOutsideHandler1&&this.isContextMenuToShow()&&(Ot=Ot||Ue.getDocument(this.getRootDomNode()),this.contextMenuOutsideHandler1=uo(Ot,"scroll",this.onContextMenuClose)),!this.contextMenuOutsideHandler2&&this.isContextMenuToShow()&&(this.contextMenuOutsideHandler2=uo(window,"blur",this.onContextMenuClose));return}this.clearOutsideHandler()}},{key:"componentWillUnmount",value:function(){this.clearDelayTimer(),this.clearOutsideHandler(),clearTimeout(this.mouseDownTimeout),Pi.cancel(this.attachId)}},{key:"getPopupDomNode",value:function(){var Ue;return((Ue=this.popupRef.current)===null||Ue===void 0?void 0:Ue.getElement())||null}},{key:"getPopupAlign",value:function(){var Ue=this.props,Xt=Ue.popupPlacement,Ot=Ue.popupAlign,vr=Ue.builtinPlacements;return Xt&&vr?lc(vr,Xt,Ot):Ot}},{key:"setPopupVisible",value:function(Ue,Xt){var Ot=this.props.alignPoint,vr=this.state.popupVisible;this.clearDelayTimer(),vr!==Ue&&("popupVisible"in this.props||this.setState({popupVisible:Ue,prevPopupVisible:vr}),this.props.onPopupVisibleChange(Ue)),Ot&&Xt&&Ue&&this.setPoint(Xt)}},{key:"delaySetPopupVisible",value:function(Ue,Xt,Ot){var vr=this,xn=Xt*1e3;if(this.clearDelayTimer(),xn){var Pn=Ot?{pageX:Ot.pageX,pageY:Ot.pageY}:null;this.delayTimer=window.setTimeout(function(){vr.setPopupVisible(Ue,Pn),vr.clearDelayTimer()},xn)}else this.setPopupVisible(Ue,Ot)}},{key:"clearDelayTimer",value:function(){this.delayTimer&&(clearTimeout(this.delayTimer),this.delayTimer=null)}},{key:"clearOutsideHandler",value:function(){this.clickOutsideHandler&&(this.clickOutsideHandler.remove(),this.clickOutsideHandler=null),this.contextMenuOutsideHandler1&&(this.contextMenuOutsideHandler1.remove(),this.contextMenuOutsideHandler1=null),this.contextMenuOutsideHandler2&&(this.contextMenuOutsideHandler2.remove(),this.contextMenuOutsideHandler2=null),this.touchOutsideHandler&&(this.touchOutsideHandler.remove(),this.touchOutsideHandler=null)}},{key:"createTwoChains",value:function(Ue){var Xt=this.props.children.props,Ot=this.props;return Xt[Ue]&&Ot[Ue]?this["fire".concat(Ue)]:Xt[Ue]||Ot[Ue]}},{key:"isClickToShow",value:function(){var Ue=this.props,Xt=Ue.action,Ot=Ue.showAction;return Xt.indexOf("click")!==-1||Ot.indexOf("click")!==-1}},{key:"isContextMenuOnly",value:function(){var Ue=this.props.action;return Ue==="contextMenu"||Ue.length===1&&Ue[0]==="contextMenu"}},{key:"isContextMenuToShow",value:function(){var Ue=this.props,Xt=Ue.action,Ot=Ue.showAction;return Xt.indexOf("contextMenu")!==-1||Ot.indexOf("contextMenu")!==-1}},{key:"isClickToHide",value:function(){var Ue=this.props,Xt=Ue.action,Ot=Ue.hideAction;return Xt.indexOf("click")!==-1||Ot.indexOf("click")!==-1}},{key:"isMouseEnterToShow",value:function(){var Ue=this.props,Xt=Ue.action,Ot=Ue.showAction;return Xt.indexOf("hover")!==-1||Ot.indexOf("mouseEnter")!==-1}},{key:"isMouseLeaveToHide",value:function(){var Ue=this.props,Xt=Ue.action,Ot=Ue.hideAction;return Xt.indexOf("hover")!==-1||Ot.indexOf("mouseLeave")!==-1}},{key:"isFocusToShow",value:function(){var Ue=this.props,Xt=Ue.action,Ot=Ue.showAction;return Xt.indexOf("focus")!==-1||Ot.indexOf("focus")!==-1}},{key:"isBlurToHide",value:function(){var Ue=this.props,Xt=Ue.action,Ot=Ue.hideAction;return Xt.indexOf("focus")!==-1||Ot.indexOf("blur")!==-1}},{key:"forcePopupAlign",value:function(){if(this.state.popupVisible){var Ue;(Ue=this.popupRef.current)===null||Ue===void 0||Ue.forceAlign()}}},{key:"fireEvents",value:function(Ue,Xt){var Ot=this.props.children.props[Ue];Ot&&Ot(Xt);var vr=this.props[Ue];vr&&vr(Xt)}},{key:"close",value:function(){this.setPopupVisible(!1)}},{key:"render",value:function(){var Ue=this.state.popupVisible,Xt=this.props,Ot=Xt.children,vr=Xt.forceRender,xn=Xt.alignPoint,Pn=Xt.className,ti=Xt.autoDestroy,Yn=v.Children.only(Ot),On={key:"trigger"};this.isContextMenuToShow()?On.onContextMenu=this.onContextMenu:On.onContextMenu=this.createTwoChains("onContextMenu"),this.isClickToHide()||this.isClickToShow()?(On.onClick=this.onClick,On.onMouseDown=this.onMouseDown,On.onTouchStart=this.onTouchStart):(On.onClick=this.createTwoChains("onClick"),On.onMouseDown=this.createTwoChains("onMouseDown"),On.onTouchStart=this.createTwoChains("onTouchStart")),this.isMouseEnterToShow()?(On.onMouseEnter=this.onMouseEnter,xn&&(On.onMouseMove=this.onMouseMove)):On.onMouseEnter=this.createTwoChains("onMouseEnter"),this.isMouseLeaveToHide()?On.onMouseLeave=this.onMouseLeave:On.onMouseLeave=this.createTwoChains("onMouseLeave"),this.isFocusToShow()||this.isBlurToHide()?(On.onFocus=this.onFocus,On.onBlur=this.onBlur):(On.onFocus=this.createTwoChains("onFocus"),On.onBlur=this.createTwoChains("onBlur"));var Ni=ie()(Yn&&Yn.props&&Yn.props.className,Pn);Ni&&(On.className=Ni);var Bi=(0,Me.Z)({},On);cr(Yn)&&(Bi.ref=ot(this.triggerRef,Yn.ref));var ki=v.cloneElement(Yn,Bi),Gi;return(Ue||this.popupRef.current||vr)&&(Gi=v.createElement(H,{key:"portal",getContainer:this.getContainer,didUpdate:this.handlePortalUpdate},this.getComponent())),!Ue&&ti&&(Gi=null),v.createElement(ya.Provider,{value:this.triggerContextValue},ki,Gi)}}],[{key:"getDerivedStateFromProps",value:function(Ue,Xt){var Ot=Ue.popupVisible,vr={};return Ot!==void 0&&Xt.popupVisible!==Ot&&(vr.popupVisible=Ot,vr.prevPopupVisible=Xt.popupVisible),vr}}]),rt}(v.Component);return(0,we.Z)(ue,"contextType",ya),(0,we.Z)(ue,"defaultProps",{prefixCls:"rc-trigger-popup",getPopupClassNameFromAlign:_o,getDocument:po,onPopupVisibleChange:yo,afterPopupVisibleChange:yo,onPopupAlign:yo,popupClassName:"",mouseEnterDelay:0,mouseLeaveDelay:.1,focusDelay:0,blurDelay:.15,popupStyle:{},destroyPopupOnHide:!1,popupAlign:{},defaultPopupVisible:!1,mask:!1,maskClosable:!0,action:[],showAction:[],hideAction:[],autoDestroy:!1}),ue}var eo=Ro(ns),Ia={adjustX:1,adjustY:1},Gu={topLeft:{points:["bl","tl"],overflow:Ia,offset:[0,-7]},bottomLeft:{points:["tl","bl"],overflow:Ia,offset:[0,7]},leftTop:{points:["tr","tl"],overflow:Ia,offset:[-4,0]},rightTop:{points:["tl","tr"],overflow:Ia,offset:[4,0]}},co={topLeft:{points:["bl","tl"],overflow:Ia,offset:[0,-7]},bottomLeft:{points:["tl","bl"],overflow:Ia,offset:[0,7]},rightTop:{points:["tr","tl"],overflow:Ia,offset:[-4,0]},leftTop:{points:["tl","tr"],overflow:Ia,offset:[4,0]}},es=null;function ru(H,ue,_e){if(ue)return ue;if(_e)return _e[H]||_e.other}var pu={horizontal:"bottomLeft",vertical:"rightTop","vertical-left":"rightTop","vertical-right":"leftTop"};function Ts(H){var ue=H.prefixCls,_e=H.visible,Be=H.children,rt=H.popup,at=H.popupClassName,Ue=H.popupOffset,Xt=H.disabled,Ot=H.mode,vr=H.onVisibleChange,xn=v.useContext(Xl),Pn=xn.getPopupContainer,ti=xn.rtl,Yn=xn.subMenuOpenDelay,On=xn.subMenuCloseDelay,Ni=xn.builtinPlacements,Bi=xn.triggerSubMenuAction,ki=xn.forceSubMenuRender,Gi=xn.rootClassName,Di=xn.motion,Fi=xn.defaultMotions,bi=v.useState(!1),qi=(0,Xe.Z)(bi,2),di=qi[0],ba=qi[1],_a=ti?(0,Me.Z)((0,Me.Z)({},co),Ni):(0,Me.Z)((0,Me.Z)({},Gu),Ni),Ya=pu[Ot],Te=ru(Ot,Di,Fi),Qe=(0,Me.Z)((0,Me.Z)({},Te),{},{leavedClassName:"".concat(ue,"-hidden"),removeOnLeave:!1,motionAppear:!0}),pt=v.useRef();return v.useEffect(function(){return pt.current=Pi(function(){ba(_e)}),function(){Pi.cancel(pt.current)}},[_e]),v.createElement(eo,{prefixCls:ue,popupClassName:ie()("".concat(ue,"-popup"),(0,we.Z)({},"".concat(ue,"-rtl"),ti),at,Gi),stretch:Ot==="horizontal"?"minWidth":null,getPopupContainer:Pn,builtinPlacements:_a,popupPlacement:Ya,popupVisible:di,popup:rt,popupAlign:Ue&&{offset:Ue},action:Xt?[]:[Bi],mouseEnterDelay:Yn,mouseLeaveDelay:On,onPopupVisibleChange:vr,forceRender:ki,popupMotion:Qe},Be)}function rl(H){var ue=H.id,_e=H.open,Be=H.keyPath,rt=H.children,at="inline",Ue=v.useContext(Xl),Xt=Ue.prefixCls,Ot=Ue.forceSubMenuRender,vr=Ue.motion,xn=Ue.defaultMotions,Pn=Ue.mode,ti=v.useRef(!1);ti.current=Pn===at;var Yn=v.useState(!ti.current),On=(0,Xe.Z)(Yn,2),Ni=On[0],Bi=On[1],ki=ti.current?_e:!1;v.useEffect(function(){ti.current&&Bi(!1)},[Pn]);var Gi=(0,Me.Z)({},ru(at,vr,xn));Be.length>1&&(Gi.motionAppear=!1);var Di=Gi.onVisibleChanged;return Gi.onVisibleChanged=function(Fi){return!ti.current&&!Fi&&Bi(!0),Di==null?void 0:Di(Fi)},Ni?null:v.createElement(Kf,{mode:at,locked:!ti.current},v.createElement(jn,(0,ke.Z)({visible:ki},Gi,{forceRender:Ot,removeOnLeave:!1,leavedClassName:"".concat(Xt,"-hidden")}),function(Fi){var bi=Fi.className,qi=Fi.style;return v.createElement(ei,{id:ue,className:bi,style:qi},rt)}))}var Nu=["style","className","title","eventKey","warnKey","disabled","internalPopupClose","children","itemIcon","expandIcon","popupClassName","popupOffset","onClick","onMouseEnter","onMouseLeave","onTitleClick","onTitleMouseEnter","onTitleMouseLeave"],zo=["active"],An=function(ue){var _e,Be=ue.style,rt=ue.className,at=ue.title,Ue=ue.eventKey,Xt=ue.warnKey,Ot=ue.disabled,vr=ue.internalPopupClose,xn=ue.children,Pn=ue.itemIcon,ti=ue.expandIcon,Yn=ue.popupClassName,On=ue.popupOffset,Ni=ue.onClick,Bi=ue.onMouseEnter,ki=ue.onMouseLeave,Gi=ue.onTitleClick,Di=ue.onTitleMouseEnter,Fi=ue.onTitleMouseLeave,bi=(0,At.Z)(ue,Nu),qi=uc(Ue),di=v.useContext(Xl),ba=di.prefixCls,_a=di.mode,Ya=di.openKeys,Te=di.disabled,Qe=di.overflowDisabled,pt=di.activeKey,Vt=di.selectedKeys,Sr=di.itemIcon,dr=di.expandIcon,Ar=di.onItemClick,hn=di.onOpenChange,Tn=di.onActive,Hn=v.useContext(Yl),Bn=Hn._internalRenderSubMenuItem,bn=v.useContext(vl),En=bn.isSubPathKey,Mn=sc(),Un="".concat(ba,"-submenu"),Nr=Te||Ot,Er=v.useRef(),oi=v.useRef(),wi=Pn||Sr,Wn=ti||dr,ci=Ya.includes(Ue),Mi=!Qe&&ci,Xi=En(Vt,Ue),Rn=Ll(Ue,Nr,Di,Fi),kn=Rn.active,Si=(0,At.Z)(Rn,zo),mi=v.useState(!1),qn=(0,Xe.Z)(mi,2),Ii=qn[0],_i=qn[1],ao=function(Zo){Nr||_i(Zo)},La=function(Zo){ao(!0),Bi==null||Bi({key:Ue,domEvent:Zo})},Qi=function(Zo){ao(!1),ki==null||ki({key:Ue,domEvent:Zo})},aa=v.useMemo(function(){return kn||(_a!=="inline"?Ii||En([pt],Ue):!1)},[_a,kn,pt,Ii,Ue,En]),Fa=kc(Mn.length),$a=function(Zo){Nr||(Gi==null||Gi({key:Ue,domEvent:Zo}),_a==="inline"&&hn(Ue,!ci))},oo=Zf(function(Ls){Ni==null||Ni(uu(Ls)),Ar(Ls)}),is=function(Zo){_a!=="inline"&&hn(Ue,Zo)},Yo=function(){Tn(Ue)},Po=qi&&"".concat(qi,"-popup"),js=v.createElement("div",(0,ke.Z)({role:"menuitem",style:Fa,className:"".concat(Un,"-title"),tabIndex:Nr?null:-1,ref:Er,title:typeof at=="string"?at:null,"data-menu-id":Qe&&qi?null:qi,"aria-expanded":Mi,"aria-haspopup":!0,"aria-controls":Po,"aria-disabled":Nr,onClick:$a,onFocus:Yo},Si),at,v.createElement(hs,{icon:_a!=="horizontal"?Wn:null,props:(0,Me.Z)((0,Me.Z)({},ue),{},{isOpen:Mi,isSubMenu:!0})},v.createElement("i",{className:"".concat(Un,"-arrow")}))),Uo=v.useRef(_a);if(_a!=="inline"&&(Uo.current=Mn.length>1?"vertical":_a),!Qe){var cs=Uo.current;js=v.createElement(Ts,{mode:cs,prefixCls:Un,visible:!vr&&Mi&&_a!=="inline",popupClassName:Yn,popupOffset:On,popup:v.createElement(Kf,{mode:cs==="horizontal"?"vertical":cs},v.createElement(ei,{id:Po,ref:oi},xn)),disabled:Nr,onVisibleChange:is},js)}var Vs=v.createElement(Ml.Item,(0,ke.Z)({role:"none"},bi,{component:"li",style:Be,className:ie()(Un,"".concat(Un,"-").concat(_a),rt,(_e={},(0,we.Z)(_e,"".concat(Un,"-open"),Mi),(0,we.Z)(_e,"".concat(Un,"-active"),aa),(0,we.Z)(_e,"".concat(Un,"-selected"),Xi),(0,we.Z)(_e,"".concat(Un,"-disabled"),Nr),_e)),onMouseEnter:La,onMouseLeave:Qi}),js,!Qe&&v.createElement(rl,{id:Po,open:Mi,keyPath:Mn},xn));return Bn&&(Vs=Bn(Vs,ue,{selected:Xi,active:aa,open:Mi,disabled:Nr})),v.createElement(Kf,{onItemClick:oo,mode:_a==="horizontal"?"vertical":_a,itemIcon:wi,expandIcon:Wn},Vs)};function vu(H){var ue=H.eventKey,_e=H.children,Be=sc(ue),rt=qf(_e,Be),at=mc();v.useEffect(function(){if(at)return at.registerPath(ue,Be),function(){at.unregisterPath(ue,Be)}},[Be]);var Ue;return at?Ue=rt:Ue=v.createElement(An,H,rt),v.createElement(ds.Provider,{value:Be},Ue)}function Nt(H){var ue=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(Jl(H)){var _e=H.nodeName.toLowerCase(),Be=["input","select","textarea","button"].includes(_e)||H.isContentEditable||_e==="a"&&!!H.getAttribute("href"),rt=H.getAttribute("tabindex"),at=Number(rt),Ue=null;return rt&&!Number.isNaN(at)?Ue=at:Be&&Ue===null&&(Ue=0),Be&&H.disabled&&(Ue=null),Ue!==null&&(Ue>=0||ue&&Ue<0)}return!1}function gl(H){var ue=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,_e=(0,Os.Z)(H.querySelectorAll("*")).filter(function(Be){return Nt(Be,ue)});return Nt(H,ue)&&_e.unshift(H),_e}var Xu=null;function Sf(){Xu=document.activeElement}function ip(){Xu=null}function Kc(){if(Xu)try{Xu.focus()}catch(H){}}function fl(H,ue){if(ue.keyCode===9){var _e=gl(H),Be=_e[ue.shiftKey?0:_e.length-1],rt=Be===document.activeElement||H===document.activeElement;if(rt){var at=_e[ue.shiftKey?_e.length-1:0];at.focus(),ue.preventDefault()}}}var Qc=Gr.LEFT,Sc=Gr.RIGHT,Lu=Gr.UP,Fl=Gr.DOWN,fc=Gr.ENTER,Jc=Gr.ESC,ts=Gr.HOME,pl=Gr.END,Rl=[Lu,Fl,Qc,Sc];function qc(H,ue,_e,Be){var rt,at,Ue,Xt,Ot="prev",vr="next",xn="children",Pn="parent";if(H==="inline"&&Be===fc)return{inlineTrigger:!0};var ti=(rt={},(0,we.Z)(rt,Lu,Ot),(0,we.Z)(rt,Fl,vr),rt),Yn=(at={},(0,we.Z)(at,Qc,_e?vr:Ot),(0,we.Z)(at,Sc,_e?Ot:vr),(0,we.Z)(at,Fl,xn),(0,we.Z)(at,fc,xn),at),On=(Ue={},(0,we.Z)(Ue,Lu,Ot),(0,we.Z)(Ue,Fl,vr),(0,we.Z)(Ue,fc,xn),(0,we.Z)(Ue,Jc,Pn),(0,we.Z)(Ue,Qc,_e?xn:Pn),(0,we.Z)(Ue,Sc,_e?Pn:xn),Ue),Ni={inline:ti,horizontal:Yn,vertical:On,inlineSub:ti,horizontalSub:On,verticalSub:On},Bi=(Xt=Ni["".concat(H).concat(ue?"":"Sub")])===null||Xt===void 0?void 0:Xt[Be];switch(Bi){case Ot:return{offset:-1,sibling:!0};case vr:return{offset:1,sibling:!0};case Pn:return{offset:-1,sibling:!1};case xn:return{offset:1,sibling:!1};default:return null}}function ap(H){for(var ue=H;ue;){if(ue.getAttribute("data-menu-list"))return ue;ue=ue.parentElement}return null}function ef(H,ue){for(var _e=H||document.activeElement;_e;){if(ue.has(_e))return _e;_e=_e.parentElement}return null}function wf(H,ue){var _e=gl(H,!0);return _e.filter(function(Be){return ue.has(Be)})}function tc(H,ue,_e){var Be=arguments.length>3&&arguments[3]!==void 0?arguments[3]:1;if(!H)return null;var rt=wf(H,ue),at=rt.length,Ue=rt.findIndex(function(Xt){return _e===Xt});return Be<0?Ue===-1?Ue=at-1:Ue-=1:Be>0&&(Ue+=1),Ue=(Ue+at)%at,rt[Ue]}function tf(H,ue,_e,Be,rt,at,Ue,Xt,Ot,vr){var xn=v.useRef(),Pn=v.useRef();Pn.current=ue;var ti=function(){Pi.cancel(xn.current)};return v.useEffect(function(){return function(){ti()}},[]),function(Yn){var On=Yn.which;if([].concat(Rl,[fc,Jc,ts,pl]).includes(On)){var Ni,Bi,ki,Gi=function(){Ni=new Set,Bi=new Map,ki=new Map;var Sr=at();return Sr.forEach(function(dr){var Ar=document.querySelector("[data-menu-id='".concat(Lc(Be,dr),"']"));Ar&&(Ni.add(Ar),ki.set(Ar,dr),Bi.set(dr,Ar))}),Ni};Gi();var Di=Bi.get(ue),Fi=ef(Di,Ni),bi=ki.get(Fi),qi=qc(H,Ue(bi,!0).length===1,_e,On);if(!qi&&On!==ts&&On!==pl)return;(Rl.includes(On)||[ts,pl].includes(On))&&Yn.preventDefault();var di=function(Sr){if(Sr){var dr=Sr,Ar=Sr.querySelector("a");Ar!=null&&Ar.getAttribute("href")&&(dr=Ar);var hn=ki.get(Sr);Xt(hn),ti(),xn.current=Pi(function(){Pn.current===hn&&dr.focus()})}};if([ts,pl].includes(On)||qi.sibling||!Fi){var ba;!Fi||H==="inline"?ba=rt.current:ba=ap(Fi);var _a,Ya=wf(ba,Ni);On===ts?_a=Ya[0]:On===pl?_a=Ya[Ya.length-1]:_a=tc(ba,Ni,Fi,qi.offset),di(_a)}else if(qi.inlineTrigger)Ot(bi);else if(qi.offset>0)Ot(bi,!0),ti(),xn.current=Pi(function(){Gi();var Vt=Fi.getAttribute("aria-controls"),Sr=document.getElementById(Vt),dr=tc(Sr,Ni);di(dr)},5);else if(qi.offset<0){var Te=Ue(bi,!0),Qe=Te[Te.length-2],pt=Bi.get(Qe);Ot(Qe,!1),di(pt)}}vr==null||vr(Yn)}}var Pl=Math.random().toFixed(5).toString().slice(2),rf=0;function Af(H){var ue=Pr(H,{value:H}),_e=(0,Xe.Z)(ue,2),Be=_e[0],rt=_e[1];return v.useEffect(function(){rf+=1;var at="".concat(Pl,"-").concat(rf);rt("rc-menu-uuid-".concat(at))},[]),Be}function Yu(H){Promise.resolve().then(H)}var mu="__RC_UTIL_PATH_SPLIT__",nf=function(ue){return ue.join(mu)},Cf=function(ue){return ue.split(mu)},wp="rc-menu-more";function Gf(){var H=v.useState({}),ue=(0,Xe.Z)(H,2),_e=ue[1],Be=(0,v.useRef)(new Map),rt=(0,v.useRef)(new Map),at=v.useState([]),Ue=(0,Xe.Z)(at,2),Xt=Ue[0],Ot=Ue[1],vr=(0,v.useRef)(0),xn=(0,v.useRef)(!1),Pn=function(){xn.current||_e({})},ti=(0,v.useCallback)(function(Di,Fi){var bi=nf(Fi);rt.current.set(bi,Di),Be.current.set(Di,bi),vr.current+=1;var qi=vr.current;Yu(function(){qi===vr.current&&Pn()})},[]),Yn=(0,v.useCallback)(function(Di,Fi){var bi=nf(Fi);rt.current.delete(bi),Be.current.delete(Di)},[]),On=(0,v.useCallback)(function(Di){Ot(Di)},[]),Ni=(0,v.useCallback)(function(Di,Fi){var bi=Be.current.get(Di)||"",qi=Cf(bi);return Fi&&Xt.includes(qi[0])&&qi.unshift(wp),qi},[Xt]),Bi=(0,v.useCallback)(function(Di,Fi){return Di.some(function(bi){var qi=Ni(bi,!0);return qi.includes(Fi)})},[Ni]),ki=function(){var Fi=(0,Os.Z)(Be.current.keys());return Xt.length&&Fi.push(wp),Fi},Gi=(0,v.useCallback)(function(Di){var Fi="".concat(Be.current.get(Di)).concat(mu),bi=new Set;return(0,Os.Z)(rt.current.keys()).forEach(function(qi){qi.startsWith(Fi)&&bi.add(rt.current.get(qi))}),bi},[]);return v.useEffect(function(){return function(){xn.current=!0}},[]),{registerPath:ti,unregisterPath:Yn,refreshOverflowKeys:On,isSubPathKey:Bi,getKeyPath:Ni,getKeys:ki,getSubPathKeys:Gi}}var zp=["prefixCls","rootClassName","style","className","tabIndex","items","children","direction","id","mode","inlineCollapsed","disabled","disabledOverflow","subMenuOpenDelay","subMenuCloseDelay","forceSubMenuRender","defaultOpenKeys","openKeys","activeKey","defaultActiveFirst","selectable","multiple","defaultSelectedKeys","selectedKeys","onSelect","onDeselect","inlineIndent","motion","defaultMotions","triggerSubMenuAction","builtinPlacements","itemIcon","expandIcon","overflowedIndicator","overflowedIndicatorPopupClassName","getPopupContainer","onClick","onOpenChange","onKeyDown","openAnimation","openTransitionName","_internalRenderMenuItem","_internalRenderSubMenuItem"],Tf=[],ks=v.forwardRef(function(H,ue){var _e,Be,rt=H.prefixCls,at=rt===void 0?"rc-menu":rt,Ue=H.rootClassName,Xt=H.style,Ot=H.className,vr=H.tabIndex,xn=vr===void 0?0:vr,Pn=H.items,ti=H.children,Yn=H.direction,On=H.id,Ni=H.mode,Bi=Ni===void 0?"vertical":Ni,ki=H.inlineCollapsed,Gi=H.disabled,Di=H.disabledOverflow,Fi=H.subMenuOpenDelay,bi=Fi===void 0?.1:Fi,qi=H.subMenuCloseDelay,di=qi===void 0?.1:qi,ba=H.forceSubMenuRender,_a=H.defaultOpenKeys,Ya=H.openKeys,Te=H.activeKey,Qe=H.defaultActiveFirst,pt=H.selectable,Vt=pt===void 0?!0:pt,Sr=H.multiple,dr=Sr===void 0?!1:Sr,Ar=H.defaultSelectedKeys,hn=H.selectedKeys,Tn=H.onSelect,Hn=H.onDeselect,Bn=H.inlineIndent,bn=Bn===void 0?24:Bn,En=H.motion,Mn=H.defaultMotions,Un=H.triggerSubMenuAction,Nr=Un===void 0?"hover":Un,Er=H.builtinPlacements,oi=H.itemIcon,wi=H.expandIcon,Wn=H.overflowedIndicator,ci=Wn===void 0?"...":Wn,Mi=H.overflowedIndicatorPopupClassName,Xi=H.getPopupContainer,Rn=H.onClick,kn=H.onOpenChange,Si=H.onKeyDown,mi=H.openAnimation,qn=H.openTransitionName,Ii=H._internalRenderMenuItem,_i=H._internalRenderSubMenuItem,ao=(0,At.Z)(H,zp),La=v.useMemo(function(){return qu(ti,Pn,Tf)},[ti,Pn]),Qi=v.useState(!1),aa=(0,Xe.Z)(Qi,2),Fa=aa[0],$a=aa[1],oo=v.useRef(),is=Af(On),Yo=Yn==="rtl",Po=v.useMemo(function(){return(Bi==="inline"||Bi==="vertical")&&ki?["vertical",ki]:[Bi,!1]},[Bi,ki]),js=(0,Xe.Z)(Po,2),Uo=js[0],cs=js[1],Vs=v.useState(0),Ls=(0,Xe.Z)(Vs,2),Zo=Ls[0],Io=Ls[1],Go=Zo>=La.length-1||Uo!=="horizontal"||Di,Za=Pr(_a,{value:Ya,postState:function(Ja){return Ja||Tf}}),as=(0,Xe.Z)(Za,2),so=as[0],iu=as[1],Oa=function(Ja){iu(Ja),kn==null||kn(Ja)},ko=v.useState(so),Xo=(0,Xe.Z)(ko,2),Hs=Xo[0],jo=Xo[1],Dt=Uo==="inline",an=v.useRef(!1);v.useEffect(function(){Dt&&jo(so)},[so]),v.useEffect(function(){!an.current||(Dt?iu(Hs):Oa(Tf))},[Dt]),v.useEffect(function(){return an.current=!0,function(){an.current=!1}},[]);var un=Gf(),oa=un.registerPath,Do=un.unregisterPath,Ht=un.refreshOverflowKeys,Mt=un.isSubPathKey,yr=un.getKeyPath,Zr=un.getKeys,Sn=un.getSubPathKeys,Or=v.useMemo(function(){return{registerPath:oa,unregisterPath:Do}},[oa,Do]),ir=v.useMemo(function(){return{isSubPathKey:Mt}},[Mt]);v.useEffect(function(){Ht(Go?Tf:La.slice(Zo+1).map(function(Lo){return Lo.key}))},[Zo,Go]);var Br=Pr(Te||Qe&&((_e=La[0])===null||_e===void 0?void 0:_e.key),{value:Te}),kt=(0,Xe.Z)(Br,2),fr=kt[0],jt=kt[1],rn=Zf(function(Lo){jt(Lo)}),jr=Zf(function(){jt(void 0)});(0,v.useImperativeHandle)(ue,function(){return{list:oo.current,focus:function(Ja){var Cu,Uu=fr!=null?fr:(Cu=La.find(function(Cc){return!Cc.props.disabled}))===null||Cu===void 0?void 0:Cu.key;if(Uu){var dl,Nl,mf;(dl=oo.current)===null||dl===void 0||(Nl=dl.querySelector("li[data-menu-id='".concat(Lc(is,Uu),"']")))===null||Nl===void 0||(mf=Nl.focus)===null||mf===void 0||mf.call(Nl,Ja)}}}});var Cn=Pr(Ar||[],{value:hn,postState:function(Ja){return Array.isArray(Ja)?Ja:Ja==null?Tf:[Ja]}}),Ci=(0,Xe.Z)(Cn,2),Oi=Ci[0],sa=Ci[1],$i=function(Ja){if(Vt){var Cu=Ja.key,Uu=Oi.includes(Cu),dl;dr?Uu?dl=Oi.filter(function(mf){return mf!==Cu}):dl=[].concat((0,Os.Z)(Oi),[Cu]):dl=[Cu],sa(dl);var Nl=(0,Me.Z)((0,Me.Z)({},Ja),{},{selectedKeys:dl});Uu?Hn==null||Hn(Nl):Tn==null||Tn(Nl)}!dr&&so.length&&Uo!=="inline"&&Oa(Tf)},xa=Zf(function(Lo){Rn==null||Rn(uu(Lo)),$i(Lo)}),va=Zf(function(Lo,Ja){var Cu=so.filter(function(dl){return dl!==Lo});if(Ja)Cu.push(Lo);else if(Uo!=="inline"){var Uu=Sn(Lo);Cu=Cu.filter(function(dl){return!Uu.has(dl)})}ms()(so,Cu)||Oa(Cu)}),Ca=Zf(Xi),pa=function(Ja,Cu){var Uu=Cu!=null?Cu:!so.includes(Ja);va(Ja,Uu)},Sa=tf(Uo,fr,Yo,is,oo,Zr,yr,jt,pa,Si);v.useEffect(function(){$a(!0)},[]);var to=v.useMemo(function(){return{_internalRenderMenuItem:Ii,_internalRenderSubMenuItem:_i}},[Ii,_i]),Is=Uo!=="horizontal"||Di?La:La.map(function(Lo,Ja){return v.createElement(Kf,{key:Lo.key,overflowDisabled:Ja>Zo},Lo)}),_l=v.createElement(Ml,(0,ke.Z)({id:On,ref:oo,prefixCls:"".concat(at,"-overflow"),component:"ul",itemComponent:Ql,className:ie()(at,"".concat(at,"-root"),"".concat(at,"-").concat(Uo),Ot,(Be={},(0,we.Z)(Be,"".concat(at,"-inline-collapsed"),cs),(0,we.Z)(Be,"".concat(at,"-rtl"),Yo),Be),Ue),dir:Yn,style:Xt,role:"menu",tabIndex:xn,data:Is,renderRawItem:function(Ja){return Ja},renderRawRest:function(Ja){var Cu=Ja.length,Uu=Cu?La.slice(-Cu):null;return v.createElement(vu,{eventKey:wp,title:ci,disabled:Go,internalPopupClose:Cu===0,popupClassName:Mi},Uu)},maxCount:Uo!=="horizontal"||Di?Ml.INVALIDATE:Ml.RESPONSIVE,ssr:"full","data-menu-list":!0,onVisibleChange:function(Ja){Io(Ja)},onKeyDown:Sa},ao));return v.createElement(Yl.Provider,{value:to},v.createElement(pp.Provider,{value:is},v.createElement(Kf,{prefixCls:at,rootClassName:Ue,mode:Uo,openKeys:so,rtl:Yo,disabled:Gi,motion:Fa?En:null,defaultMotions:Fa?Mn:null,activeKey:fr,onActive:rn,onInactive:jr,selectedKeys:Oi,inlineIndent:bn,subMenuOpenDelay:bi,subMenuCloseDelay:di,forceSubMenuRender:ba,builtinPlacements:Er,triggerSubMenuAction:Nr,getPopupContainer:Ca,itemIcon:oi,expandIcon:wi,onItemClick:xa,onOpenChange:va},v.createElement(vl.Provider,{value:ir},_l),v.createElement("div",{style:{display:"none"},"aria-hidden":!0},v.createElement(uf.Provider,{value:Or},La)))))}),Mf=ks,Yp=["className","title","eventKey","children"],Up=["children"],Jo=function(ue){var _e=ue.className,Be=ue.title,rt=ue.eventKey,at=ue.children,Ue=(0,At.Z)(ue,Yp),Xt=v.useContext(Xl),Ot=Xt.prefixCls,vr="".concat(Ot,"-item-group");return v.createElement("li",(0,ke.Z)({},Ue,{onClick:function(Pn){return Pn.stopPropagation()},className:ie()(vr,_e)}),v.createElement("div",{className:"".concat(vr,"-title"),title:typeof Be=="string"?Be:void 0},Be),v.createElement("ul",{className:"".concat(vr,"-list")},at))};function Ap(H){var ue=H.children,_e=(0,At.Z)(H,Up),Be=sc(_e.eventKey),rt=qf(ue,Be),at=mc();return at?rt:v.createElement(Jo,Ef(_e,["warnKey"]),rt)}function op(H){var ue=H.className,_e=H.style,Be=v.useContext(Xl),rt=Be.prefixCls,at=mc();return at?null:v.createElement("li",{className:ie()("".concat(rt,"-item-divider"),ue),style:_e})}var gu=Mf;gu.Item=Ql,gu.SubMenu=vu,gu.ItemGroup=Ap,gu.Divider=op;var nl=gu,il={adjustX:1,adjustY:1},hp=[0,0],wc={topLeft:{points:["bl","tl"],overflow:il,offset:[0,-4],targetOffset:hp},topCenter:{points:["bc","tc"],overflow:il,offset:[0,-4],targetOffset:hp},topRight:{points:["br","tr"],overflow:il,offset:[0,-4],targetOffset:hp},bottomLeft:{points:["tl","bl"],overflow:il,offset:[0,4],targetOffset:hp},bottomCenter:{points:["tc","bc"],overflow:il,offset:[0,4],targetOffset:hp},bottomRight:{points:["tr","br"],overflow:il,offset:[0,4],targetOffset:hp}},Zp=wc,jp=Gr.ESC,rc=Gr.TAB;function dp(H){var ue=H.visible,_e=H.setTriggerVisible,Be=H.triggerRef,rt=H.onVisibleChange,at=H.autoFocus,Ue=v.useRef(!1),Xt=function(){if(ue&&Be.current){var Pn,ti,Yn,On;(Pn=Be.current)===null||Pn===void 0||(ti=Pn.triggerRef)===null||ti===void 0||(Yn=ti.current)===null||Yn===void 0||(On=Yn.focus)===null||On===void 0||On.call(Yn),_e(!1),typeof rt=="function"&&rt(!1)}},Ot=function(){var Pn,ti,Yn,On,Ni=gl((Pn=Be.current)===null||Pn===void 0||(ti=Pn.popupRef)===null||ti===void 0||(Yn=ti.current)===null||Yn===void 0||(On=Yn.getElement)===null||On===void 0?void 0:On.call(Yn)),Bi=Ni[0];return Bi!=null&&Bi.focus?(Bi.focus(),Ue.current=!0,!0):!1},vr=function(Pn){switch(Pn.keyCode){case jp:Xt();break;case rc:{var ti=!1;Ue.current||(ti=Ot()),ti?Pn.preventDefault():Xt();break}}};v.useEffect(function(){return ue?(window.addEventListener("keydown",vr),at&&Pi(Ot,3),function(){window.removeEventListener("keydown",vr),Ue.current=!1}):function(){Ue.current=!1}},[ue])}var oh=["arrow","prefixCls","transitionName","animation","align","placement","placements","getPopupContainer","showAction","hideAction","overlayClassName","overlayStyle","visible","trigger","autoFocus"];function Ms(H,ue){var _e=H.arrow,Be=_e===void 0?!1:_e,rt=H.prefixCls,at=rt===void 0?"rc-dropdown":rt,Ue=H.transitionName,Xt=H.animation,Ot=H.align,vr=H.placement,xn=vr===void 0?"bottomLeft":vr,Pn=H.placements,ti=Pn===void 0?Zp:Pn,Yn=H.getPopupContainer,On=H.showAction,Ni=H.hideAction,Bi=H.overlayClassName,ki=H.overlayStyle,Gi=H.visible,Di=H.trigger,Fi=Di===void 0?["hover"]:Di,bi=H.autoFocus,qi=(0,At.Z)(H,oh),di=v.useState(),ba=(0,Xe.Z)(di,2),_a=ba[0],Ya=ba[1],Te="visible"in H?Gi:_a,Qe=v.useRef(null);v.useImperativeHandle(ue,function(){return Qe.current}),dp({visible:Te,setTriggerVisible:Ya,triggerRef:Qe,onVisibleChange:H.onVisibleChange,autoFocus:bi});var pt=function(){var En=H.overlay,Mn;return typeof En=="function"?Mn=En():Mn=En,Mn},Vt=function(En){var Mn=H.onOverlayClick;Ya(!1),Mn&&Mn(En)},Sr=function(En){var Mn=H.onVisibleChange;Ya(En),typeof Mn=="function"&&Mn(En)},dr=function(){var En=pt();return v.createElement(v.Fragment,null,Be&&v.createElement("div",{className:"".concat(at,"-arrow")}),En)},Ar=function(){var En=H.overlay;return typeof En=="function"?dr:dr()},hn=function(){var En=H.minOverlayWidthMatchTrigger,Mn=H.alignPoint;return"minOverlayWidthMatchTrigger"in H?En:!Mn},Tn=function(){var En=H.openClassName;return En!==void 0?En:"".concat(at,"-open")},Hn=function(){var En=H.children,Mn=En.props?En.props:{},Un=ie()(Mn.className,Tn());return Te&&En?v.cloneElement(En,{className:Un}):En},Bn=Ni;return!Bn&&Fi.indexOf("contextMenu")!==-1&&(Bn=["click"]),v.createElement(eo,(0,Me.Z)((0,Me.Z)({builtinPlacements:ti},qi),{},{prefixCls:at,ref:Qe,popupClassName:ie()(Bi,(0,we.Z)({},"".concat(at,"-show-arrow"),Be)),popupStyle:ki,action:Fi,showAction:On,hideAction:Bn||[],popupPlacement:xn,popupAlign:Ot,popupTransitionName:Ue,popupAnimation:Xt,popupVisible:Te,stretch:hn()?"minWidth":"",popup:Ar(),onPopupVisibleChange:Sr,onPopupClick:Vt,getPopupContainer:Yn}),Hn())}var kl=v.forwardRef(Ms),Bc=kl;function vp(H,ue){var _e=H.prefixCls,Be=H.editable,rt=H.locale,at=H.style;return!Be||Be.showAdd===!1?null:v.createElement("button",{ref:ue,type:"button",className:"".concat(_e,"-nav-add"),style:at,"aria-label":(rt==null?void 0:rt.addAriaLabel)||"Add tab",onClick:function(Xt){Be.onEdit("add",{event:Xt})}},Be.addIcon||"+")}var Hf=v.forwardRef(vp);function mp(H,ue){var _e=H.prefixCls,Be=H.id,rt=H.tabs,at=H.locale,Ue=H.mobile,Xt=H.moreIcon,Ot=Xt===void 0?"More":Xt,vr=H.moreTransitionName,xn=H.style,Pn=H.className,ti=H.editable,Yn=H.tabBarGutter,On=H.rtl,Ni=H.removeAriaLabel,Bi=H.onTabClick,ki=H.getPopupContainer,Gi=H.popupClassName,Di=(0,v.useState)(!1),Fi=(0,Xe.Z)(Di,2),bi=Fi[0],qi=Fi[1],di=(0,v.useState)(null),ba=(0,Xe.Z)(di,2),_a=ba[0],Ya=ba[1],Te="".concat(Be,"-more-popup"),Qe="".concat(_e,"-dropdown"),pt=_a!==null?"".concat(Te,"-").concat(_a):null,Vt=at==null?void 0:at.dropdownAriaLabel;function Sr(bn,En){bn.preventDefault(),bn.stopPropagation(),ti.onEdit("remove",{key:En,event:bn})}var dr=v.createElement(nl,{onClick:function(En){var Mn=En.key,Un=En.domEvent;Bi(Mn,Un),qi(!1)},prefixCls:"".concat(Qe,"-menu"),id:Te,tabIndex:-1,role:"listbox","aria-activedescendant":pt,selectedKeys:[_a],"aria-label":Vt!==void 0?Vt:"expanded dropdown"},rt.map(function(bn){var En=ti&&bn.closable!==!1&&!bn.disabled;return v.createElement(Ql,{key:bn.key,id:"".concat(Te,"-").concat(bn.key),role:"option","aria-controls":Be&&"".concat(Be,"-panel-").concat(bn.key),disabled:bn.disabled},v.createElement("span",null,bn.label),En&&v.createElement("button",{type:"button","aria-label":Ni||"remove",tabIndex:0,className:"".concat(Qe,"-menu-item-remove"),onClick:function(Un){Un.stopPropagation(),Sr(Un,bn.key)}},bn.closeIcon||ti.removeIcon||"\xD7"))}));function Ar(bn){for(var En=rt.filter(function(oi){return!oi.disabled}),Mn=En.findIndex(function(oi){return oi.key===_a})||0,Un=En.length,Nr=0;Nr<Un;Nr+=1){Mn=(Mn+bn+Un)%Un;var Er=En[Mn];if(!Er.disabled){Ya(Er.key);return}}}function hn(bn){var En=bn.which;if(!bi){[Gr.DOWN,Gr.SPACE,Gr.ENTER].includes(En)&&(qi(!0),bn.preventDefault());return}switch(En){case Gr.UP:Ar(-1),bn.preventDefault();break;case Gr.DOWN:Ar(1),bn.preventDefault();break;case Gr.ESC:qi(!1);break;case Gr.SPACE:case Gr.ENTER:_a!==null&&Bi(_a,bn);break}}(0,v.useEffect)(function(){var bn=document.getElementById(pt);bn&&bn.scrollIntoView&&bn.scrollIntoView(!1)},[_a]),(0,v.useEffect)(function(){bi||Ya(null)},[bi]);var Tn=(0,we.Z)({},On?"marginRight":"marginLeft",Yn);rt.length||(Tn.visibility="hidden",Tn.order=1);var Hn=ie()((0,we.Z)({},"".concat(Qe,"-rtl"),On)),Bn=Ue?null:v.createElement(Bc,{prefixCls:Qe,overlay:dr,trigger:["hover"],visible:rt.length?bi:!1,transitionName:vr,onVisibleChange:qi,overlayClassName:ie()(Hn,Gi),mouseEnterDelay:.1,mouseLeaveDelay:.1,getPopupContainer:ki},v.createElement("button",{type:"button",className:"".concat(_e,"-nav-more"),style:Tn,tabIndex:-1,"aria-hidden":"true","aria-haspopup":"listbox","aria-controls":Te,id:"".concat(Be,"-more"),"aria-expanded":bi,onKeyDown:hn},Ot));return v.createElement("div",{className:ie()("".concat(_e,"-nav-operations"),Pn),style:xn,ref:ue},Bn,v.createElement(Hf,{prefixCls:_e,locale:at,editable:ti}))}var gp=v.memo(v.forwardRef(mp),function(H,ue){return ue.tabMoving}),Vp=.1,If=.01,Of=20,af=Math.pow(.995,Of);function sh(H,ue){var _e=(0,v.useState)(),Be=(0,Xe.Z)(_e,2),rt=Be[0],at=Be[1],Ue=(0,v.useState)(0),Xt=(0,Xe.Z)(Ue,2),Ot=Xt[0],vr=Xt[1],xn=(0,v.useState)(0),Pn=(0,Xe.Z)(xn,2),ti=Pn[0],Yn=Pn[1],On=(0,v.useState)(),Ni=(0,Xe.Z)(On,2),Bi=Ni[0],ki=Ni[1],Gi=(0,v.useRef)();function Di(_a){var Ya=_a.touches[0],Te=Ya.screenX,Qe=Ya.screenY;at({x:Te,y:Qe}),window.clearInterval(Gi.current)}function Fi(_a){if(!!rt){_a.preventDefault();var Ya=_a.touches[0],Te=Ya.screenX,Qe=Ya.screenY;at({x:Te,y:Qe});var pt=Te-rt.x,Vt=Qe-rt.y;ue(pt,Vt);var Sr=Date.now();vr(Sr),Yn(Sr-Ot),ki({x:pt,y:Vt})}}function bi(){if(!!rt&&(at(null),ki(null),Bi)){var _a=Bi.x/ti,Ya=Bi.y/ti,Te=Math.abs(_a),Qe=Math.abs(Ya);if(Math.max(Te,Qe)<Vp)return;var pt=_a,Vt=Ya;Gi.current=window.setInterval(function(){if(Math.abs(pt)<If&&Math.abs(Vt)<If){window.clearInterval(Gi.current);return}pt*=af,Vt*=af,ue(pt*Of,Vt*Of)},Of)}}var qi=(0,v.useRef)();function di(_a){var Ya=_a.deltaX,Te=_a.deltaY,Qe=0,pt=Math.abs(Ya),Vt=Math.abs(Te);pt===Vt?Qe=qi.current==="x"?Ya:Te:pt>Vt?(Qe=Ya,qi.current="x"):(Qe=Te,qi.current="y"),ue(-Qe,-Qe)&&_a.preventDefault()}var ba=(0,v.useRef)(null);ba.current={onTouchStart:Di,onTouchMove:Fi,onTouchEnd:bi,onWheel:di},v.useEffect(function(){function _a(pt){ba.current.onTouchStart(pt)}function Ya(pt){ba.current.onTouchMove(pt)}function Te(pt){ba.current.onTouchEnd(pt)}function Qe(pt){ba.current.onWheel(pt)}return document.addEventListener("touchmove",Ya,{passive:!1}),document.addEventListener("touchend",Te,{passive:!1}),H.current.addEventListener("touchstart",_a,{passive:!1}),H.current.addEventListener("wheel",Qe),function(){document.removeEventListener("touchmove",Ya),document.removeEventListener("touchend",Te)}},[])}function zc(){var H=(0,v.useRef)(new Map);function ue(Be){return H.current.has(Be)||H.current.set(Be,v.createRef()),H.current.get(Be)}function _e(Be){H.current.delete(Be)}return[ue,_e]}function yp(H,ue){var _e=v.useRef(H),Be=v.useState({}),rt=(0,Xe.Z)(Be,2),at=rt[1];function Ue(Xt){var Ot=typeof Xt=="function"?Xt(_e.current):Xt;Ot!==_e.current&&ue(Ot,_e.current),_e.current=Ot,at({})}return[_e.current,Ue]}var df=function(ue){var _e=ue.position,Be=ue.prefixCls,rt=ue.extra;if(!rt)return null;var at,Ue={};return rt&&(0,Ke.Z)(rt)==="object"&&!v.isValidElement(rt)?Ue=rt:Ue.right=rt,_e==="right"&&(at=Ue.right),_e==="left"&&(at=Ue.left),at?v.createElement("div",{className:"".concat(Be,"-extra-content")},at):null};function _p(H,ue){var _e,Be=v.useContext(rr),rt=Be.prefixCls,at=Be.tabs,Ue=H.className,Xt=H.style,Ot=H.id,vr=H.animated,xn=H.activeKey,Pn=H.rtl,ti=H.extra,Yn=H.editable,On=H.locale,Ni=H.tabPosition,Bi=H.tabBarGutter,ki=H.children,Gi=H.onTabClick,Di=H.onTabScroll,Fi=(0,v.useRef)(),bi=(0,v.useRef)(),qi=(0,v.useRef)(),di=(0,v.useRef)(),ba=zc(),_a=(0,Xe.Z)(ba,2),Ya=_a[0],Te=_a[1],Qe=Ni==="top"||Ni==="bottom",pt=yp(0,function(jr,Cn){Qe&&Di&&Di({direction:jr>Cn?"left":"right"})}),Vt=(0,Xe.Z)(pt,2),Sr=Vt[0],dr=Vt[1],Ar=yp(0,function(jr,Cn){!Qe&&Di&&Di({direction:jr>Cn?"top":"bottom"})}),hn=(0,Xe.Z)(Ar,2),Tn=hn[0],Hn=hn[1],Bn=(0,v.useState)(0),bn=(0,Xe.Z)(Bn,2),En=bn[0],Mn=bn[1],Un=(0,v.useState)(0),Nr=(0,Xe.Z)(Un,2),Er=Nr[0],oi=Nr[1],wi=(0,v.useState)(null),Wn=(0,Xe.Z)(wi,2),ci=Wn[0],Mi=Wn[1],Xi=(0,v.useState)(null),Rn=(0,Xe.Z)(Xi,2),kn=Rn[0],Si=Rn[1],mi=(0,v.useState)(0),qn=(0,Xe.Z)(mi,2),Ii=qn[0],_i=qn[1],ao=(0,v.useState)(0),La=(0,Xe.Z)(ao,2),Qi=La[0],aa=La[1],Fa=hr(new Map),$a=(0,Xe.Z)(Fa,2),oo=$a[0],is=$a[1],Yo=vo(at,oo,En),Po="".concat(rt,"-nav-operations-hidden"),js=0,Uo=0;Qe?Pn?(js=0,Uo=Math.max(0,En-ci)):(js=Math.min(0,ci-En),Uo=0):(js=Math.min(0,kn-Er),Uo=0);function cs(jr){return jr<js?js:jr>Uo?Uo:jr}var Vs=(0,v.useRef)(),Ls=(0,v.useState)(),Zo=(0,Xe.Z)(Ls,2),Io=Zo[0],Go=Zo[1];function Za(){Go(Date.now())}function as(){window.clearTimeout(Vs.current)}sh(Fi,function(jr,Cn){function Ci(Oi,sa){Oi(function($i){var xa=cs($i+sa);return xa})}if(Qe){if(ci>=En)return!1;Ci(dr,jr)}else{if(kn>=Er)return!1;Ci(Hn,Cn)}return as(),Za(),!0}),(0,v.useEffect)(function(){return as(),Io&&(Vs.current=window.setTimeout(function(){Go(0)},100)),as},[Io]);function so(){var jr=arguments.length>0&&arguments[0]!==void 0?arguments[0]:xn,Cn=Yo.get(jr)||{width:0,height:0,left:0,right:0,top:0};if(Qe){var Ci=Sr;Pn?Cn.right<Sr?Ci=Cn.right:Cn.right+Cn.width>Sr+ci&&(Ci=Cn.right+Cn.width-ci):Cn.left<-Sr?Ci=-Cn.left:Cn.left+Cn.width>-Sr+ci&&(Ci=-(Cn.left+Cn.width-ci)),Hn(0),dr(cs(Ci))}else{var Oi=Tn;Cn.top<-Tn?Oi=-Cn.top:Cn.top+Cn.height>-Tn+kn&&(Oi=-(Cn.top+Cn.height-kn)),dr(0),Hn(cs(Oi))}}var iu=ha(Yo,{width:ci,height:kn,left:Sr,top:Tn},{width:En,height:Er},{width:Ii,height:Qi},(0,Me.Z)((0,Me.Z)({},H),{},{tabs:at})),Oa=(0,Xe.Z)(iu,2),ko=Oa[0],Xo=Oa[1],Hs={};Ni==="top"||Ni==="bottom"?Hs[Pn?"marginRight":"marginLeft"]=Bi:Hs.marginTop=Bi;var jo=at.map(function(jr,Cn){var Ci=jr.key;return v.createElement(fi,{id:Ot,prefixCls:rt,key:Ci,tab:jr,style:Cn===0?void 0:Hs,closable:jr.closable,editable:Yn,active:Ci===xn,renderWrapper:ki,removeAriaLabel:On==null?void 0:On.removeAriaLabel,ref:Ya(Ci),onClick:function(sa){Gi(Ci,sa)},onRemove:function(){Te(Ci)},onFocus:function(){so(Ci),Za(),Fi.current&&(Pn||(Fi.current.scrollLeft=0),Fi.current.scrollTop=0)}})}),Dt=Lt(function(){var jr,Cn,Ci,Oi,sa,$i,xa=((jr=Fi.current)===null||jr===void 0?void 0:jr.offsetWidth)||0,va=((Cn=Fi.current)===null||Cn===void 0?void 0:Cn.offsetHeight)||0,Ca=((Ci=di.current)===null||Ci===void 0?void 0:Ci.offsetWidth)||0,pa=((Oi=di.current)===null||Oi===void 0?void 0:Oi.offsetHeight)||0;Mi(xa),Si(va),_i(Ca),aa(pa);var Sa=(((sa=bi.current)===null||sa===void 0?void 0:sa.offsetWidth)||0)-Ca,to=((($i=bi.current)===null||$i===void 0?void 0:$i.offsetHeight)||0)-pa;Mn(Sa),oi(to),is(function(){var Is=new Map;return at.forEach(function(_l){var Lo=_l.key,Ja=Ya(Lo).current;Ja&&Is.set(Lo,{width:Ja.offsetWidth,height:Ja.offsetHeight,left:Ja.offsetLeft,top:Ja.offsetTop})}),Is})}),an=at.slice(0,ko),un=at.slice(Xo+1),oa=[].concat((0,Os.Z)(an),(0,Os.Z)(un)),Do=(0,v.useState)(),Ht=(0,Xe.Z)(Do,2),Mt=Ht[0],yr=Ht[1],Zr=Yo.get(xn),Sn=(0,v.useRef)();function Or(){Pi.cancel(Sn.current)}(0,v.useEffect)(function(){var jr={};return Zr&&(Qe?(Pn?jr.right=Zr.right:jr.left=Zr.left,jr.width=Zr.width):(jr.top=Zr.top,jr.height=Zr.height)),Or(),Sn.current=Pi(function(){yr(jr)}),Or},[Zr,Qe,Pn]),(0,v.useEffect)(function(){so()},[xn,Zr,Yo,Qe]),(0,v.useEffect)(function(){Dt()},[Pn,Bi,xn,at.map(function(jr){return jr.key}).join("_")]);var ir=!!oa.length,Br="".concat(rt,"-nav-wrap"),kt,fr,jt,rn;return Qe?Pn?(fr=Sr>0,kt=Sr+ci<En):(kt=Sr<0,fr=-Sr+ci<En):(jt=Tn<0,rn=-Tn+kn<Er),v.createElement("div",{ref:ue,role:"tablist",className:ie()("".concat(rt,"-nav"),Ue),style:Xt,onKeyDown:function(){Za()}},v.createElement(df,{position:"left",extra:ti,prefixCls:rt}),v.createElement(ct,{onResize:Dt},v.createElement("div",{className:ie()(Br,(_e={},(0,we.Z)(_e,"".concat(Br,"-ping-left"),kt),(0,we.Z)(_e,"".concat(Br,"-ping-right"),fr),(0,we.Z)(_e,"".concat(Br,"-ping-top"),jt),(0,we.Z)(_e,"".concat(Br,"-ping-bottom"),rn),_e)),ref:Fi},v.createElement(ct,{onResize:Dt},v.createElement("div",{ref:bi,className:"".concat(rt,"-nav-list"),style:{transform:"translate(".concat(Sr,"px, ").concat(Tn,"px)"),transition:Io?"none":void 0}},jo,v.createElement(Hf,{ref:di,prefixCls:rt,locale:On,editable:Yn,style:(0,Me.Z)((0,Me.Z)({},jo.length===0?void 0:Hs),{},{visibility:ir?"hidden":null})}),v.createElement("div",{className:ie()("".concat(rt,"-ink-bar"),(0,we.Z)({},"".concat(rt,"-ink-bar-animated"),vr.inkBar)),style:Mt}))))),v.createElement(gp,(0,ke.Z)({},H,{removeAriaLabel:On==null?void 0:On.removeAriaLabel,ref:qi,prefixCls:rt,tabs:oa,className:!ir&&Po,tabMoving:!!Io})),v.createElement(df,{position:"right",extra:ti,prefixCls:rt}))}var Rf=v.forwardRef(_p),xp=["renderTabBar"],hl=["label","key"];function He(H){var ue=H.renderTabBar,_e=(0,At.Z)(H,xp),Be=(0,v.useContext)(rr),rt=Be.tabs;if(ue){var at=(0,Me.Z)((0,Me.Z)({},_e),{},{panes:rt.map(function(Ue){var Xt=Ue.label,Ot=Ue.key,vr=(0,At.Z)(Ue,hl);return v.createElement(er,(0,ke.Z)({tab:Xt,key:Ot,tabKey:Ot},vr))})});return ue(at,Rf)}return v.createElement(Rf,_e)}function Au(){var H=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{inkBar:!0,tabPane:!1},ue;return H===!1?ue={inkBar:!1,tabPane:!1}:H===!0?ue={inkBar:!0,tabPane:!1}:ue=(0,Me.Z)({inkBar:!0},(0,Ke.Z)(H)==="object"?H:{}),ue.tabPaneMotion&&ue.tabPane===void 0&&(ue.tabPane=!0),!ue.tabPaneMotion&&ue.tabPane&&(ue.tabPane=!1),ue}var yl=["id","prefixCls","className","items","direction","activeKey","defaultActiveKey","editable","animated","tabPosition","tabBarGutter","tabBarStyle","tabBarExtraContent","locale","moreIcon","moreTransitionName","destroyInactiveTabPane","renderTabBar","onChange","onTabClick","onTabScroll","getPopupContainer","popupClassName"],bp=0;function Kp(H,ue){var _e,Be=H.id,rt=H.prefixCls,at=rt===void 0?"rc-tabs":rt,Ue=H.className,Xt=H.items,Ot=H.direction,vr=H.activeKey,xn=H.defaultActiveKey,Pn=H.editable,ti=H.animated,Yn=H.tabPosition,On=Yn===void 0?"top":Yn,Ni=H.tabBarGutter,Bi=H.tabBarStyle,ki=H.tabBarExtraContent,Gi=H.locale,Di=H.moreIcon,Fi=H.moreTransitionName,bi=H.destroyInactiveTabPane,qi=H.renderTabBar,di=H.onChange,ba=H.onTabClick,_a=H.onTabScroll,Ya=H.getPopupContainer,Te=H.popupClassName,Qe=(0,At.Z)(H,yl),pt=v.useMemo(function(){return(Xt||[]).filter(function(Si){return Si&&(0,Ke.Z)(Si)==="object"&&"key"in Si})},[Xt]),Vt=Ot==="rtl",Sr=Au(ti),dr=(0,v.useState)(!1),Ar=(0,Xe.Z)(dr,2),hn=Ar[0],Tn=Ar[1];(0,v.useEffect)(function(){Tn(oe())},[]);var Hn=Pr(function(){var Si;return(Si=pt[0])===null||Si===void 0?void 0:Si.key},{value:vr,defaultValue:xn}),Bn=(0,Xe.Z)(Hn,2),bn=Bn[0],En=Bn[1],Mn=(0,v.useState)(function(){return pt.findIndex(function(Si){return Si.key===bn})}),Un=(0,Xe.Z)(Mn,2),Nr=Un[0],Er=Un[1];(0,v.useEffect)(function(){var Si=pt.findIndex(function(qn){return qn.key===bn});if(Si===-1){var mi;Si=Math.max(0,Math.min(Nr,pt.length-1)),En((mi=pt[Si])===null||mi===void 0?void 0:mi.key)}Er(Si)},[pt.map(function(Si){return Si.key}).join("_"),bn,Nr]);var oi=Pr(null,{value:Be}),wi=(0,Xe.Z)(oi,2),Wn=wi[0],ci=wi[1];(0,v.useEffect)(function(){Be||(ci("rc-tabs-".concat(bp)),bp+=1)},[]);function Mi(Si,mi){ba==null||ba(Si,mi);var qn=Si!==bn;En(Si),qn&&(di==null||di(Si))}var Xi={id:Wn,activeKey:bn,animated:Sr,tabPosition:On,rtl:Vt,mobile:hn},Rn,kn=(0,Me.Z)((0,Me.Z)({},Xi),{},{editable:Pn,locale:Gi,moreIcon:Di,moreTransitionName:Fi,tabBarGutter:Ni,onTabClick:Mi,onTabScroll:_a,extra:ki,style:Bi,panes:null,getPopupContainer:Ya,popupClassName:Te});return v.createElement(rr.Provider,{value:{tabs:pt,prefixCls:at}},v.createElement("div",(0,ke.Z)({ref:ue,id:Be,className:ie()(at,"".concat(at,"-").concat(On),(_e={},(0,we.Z)(_e,"".concat(at,"-mobile"),hn),(0,we.Z)(_e,"".concat(at,"-editable"),Pn),(0,we.Z)(_e,"".concat(at,"-rtl"),Vt),_e),Ue)},Qe),Rn,v.createElement(He,(0,ke.Z)({},kn,{renderTabBar:qi})),v.createElement(Es,(0,ke.Z)({destroyInactiveTabPane:bi},Xi,{animated:Sr}))))}var Ku=v.forwardRef(Kp),Ac=Ku,kh=Ac;function ls(H,ue){return al(H)||Uc(H,ue)||Pf(H,ue)||uh()}function uh(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Pf(H,ue){if(!!H){if(typeof H=="string")return kf(H,ue);var _e=Object.prototype.toString.call(H).slice(8,-1);if(_e==="Object"&&H.constructor&&(_e=H.constructor.name),_e==="Map"||_e==="Set")return Array.from(H);if(_e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(_e))return kf(H,ue)}}function kf(H,ue){(ue==null||ue>H.length)&&(ue=H.length);for(var _e=0,Be=new Array(ue);_e<ue;_e++)Be[_e]=H[_e];return Be}function Uc(H,ue){var _e=H==null?null:typeof Symbol!="undefined"&&H[Symbol.iterator]||H["@@iterator"];if(_e!=null){var Be=[],rt=!0,at=!1,Ue,Xt;try{for(_e=_e.call(H);!(rt=(Ue=_e.next()).done)&&(Be.push(Ue.value),!(ue&&Be.length===ue));rt=!0);}catch(Ot){at=!0,Xt=Ot}finally{try{!rt&&_e.return!=null&&_e.return()}finally{if(at)throw Xt}}return Be}}function al(H){if(Array.isArray(H))return H}var Lf=function(){return v.createElement("svg",{viewBox:"0 0 200 117"},v.createElement("path",{d:"M59.688 2.578c-3.438-3.437-8.438-3.437-11.563 0L3.75 48.516c-5 5.937-5 14.062 0 19.062l44.063 45.938c1.562 1.562 4.062 2.5 5.937 2.5s4.063-.938 5.938-2.5c3.437-3.438 3.437-8.438 0-11.563l-42.5-43.437 42.5-44.063c3.437-3.437 3.437-8.437 0-11.875Zm135.937 45.938L151.25 2.578c-3.438-3.437-8.438-3.437-11.563 0-3.125 3.438-3.437 8.438 0 11.563l42.5 44.375-42.5 44.062c-3.437 3.438-3.437 8.438 0 11.563 1.563 1.562 3.438 2.5 5.938 2.5 2.5 0 4.063-.938 5.938-2.5l44.062-45.938c5.625-5.625 5.625-13.75 0-19.687Zm-75.938-45c-4.062-1.563-9.062.937-10.937 5l-34.063 95c-1.562 4.062.938 9.062 5 10.937.938 0 1.563.938 2.5.938 3.438 0 6.563-2.5 7.5-5.938l35-95.937c1.563-4.063-.937-9.063-5-10Z"}))},Wf=function(){return v.createElement("svg",{viewBox:"0 0 200 117"},v.createElement("path",{d:"M59.688 2.578c-3.438-3.437-8.438-3.437-11.563 0L3.75 48.516c-5 5.937-5 14.062 0 19.062l44.063 45.938c1.562 1.562 4.062 2.5 5.937 2.5s4.063-.938 5.938-2.5c3.437-3.438 3.437-8.438 0-11.563l-42.5-43.437 42.5-44.063c3.437-3.437 3.437-8.437 0-11.875Zm135.937 45.938L151.25 2.578c-3.438-3.437-8.438-3.437-11.563 0-3.125 3.438-3.437 8.438 0 11.563l42.5 44.375-42.5 44.062c-3.437 3.438-3.437 8.438 0 11.563 1.563 1.562 3.438 2.5 5.938 2.5 2.5 0 4.063-.938 5.938-2.5l44.062-45.938c5.625-5.625 5.625-13.75 0-19.687Z"}))},pc=function(){return v.createElement("svg",{viewBox:"0 0 1024 1024"},v.createElement("path",{d:"M853.333 469.333A42.667 42.667 0 0 0 810.667 512v256A42.667 42.667 0 0 1 768 810.667H256A42.667 42.667 0 0 1 213.333 768V256A42.667 42.667 0 0 1 256 213.333h256A42.667 42.667 0 0 0 512 128H256a128 128 0 0 0-128 128v512a128 128 0 0 0 128 128h512a128 128 0 0 0 128-128V512a42.667 42.667 0 0 0-42.667-42.667z"}),v.createElement("path",{d:"M682.667 213.333h67.413L481.707 481.28a42.667 42.667 0 0 0 0 60.587 42.667 42.667 0 0 0 60.586 0L810.667 273.92v67.413A42.667 42.667 0 0 0 853.333 384 42.667 42.667 0 0 0 896 341.333V170.667A42.667 42.667 0 0 0 853.333 128H682.667a42.667 42.667 0 0 0 0 85.333z"}))},Uh=function(ue){var _e,Be,rt,at,Ue=(0,w.YB)(),Xt=Object.entries(ue.asset.dependencies).filter(function(Gi){var Di=ls(Gi,2),Fi=Di[1].type;return Fi==="FILE"}),Ot=(0,v.useState)(0),vr=ls(Ot,2),xn=vr[0],Pn=vr[1],ti=(0,v.useState)(!1),Yn=ls(ti,2),On=Yn[0],Ni=Yn[1],Bi=Xt.length===1,ki=((_e=Xt[xn][0].match(/\.([^.]+)$/))===null||_e===void 0?void 0:_e[1])||"text";return v.createElement(v.Fragment,null,v.createElement("div",{className:"dumi-default-previewer-actions"},!((Be=ue.disabledActions)!==null&&Be!==void 0&&Be.includes("CSB"))&&v.createElement("button",{className:"dumi-default-previewer-action-btn",type:"button","data-dumi-tooltip":Ue.formatMessage({id:"previewer.actions.codesandbox"}),onClick:function(){return(0,w.il)(ue)}},v.createElement(z,null)),!((rt=ue.disabledActions)!==null&&rt!==void 0&&rt.includes("STACKBLITZ"))&&v.createElement("button",{className:"dumi-default-previewer-action-btn",type:"button","data-dumi-tooltip":Ue.formatMessage({id:"previewer.actions.stackblitz"}),onClick:function(){return(0,w.Sc)(ue)}},v.createElement(pe,null)),!((at=ue.disabledActions)!==null&&at!==void 0&&at.includes("EXTERNAL"))&&v.createElement("a",{target:"_blank",rel:"noreferrer",href:ue.demoUrl,className:"dumi-default-previewer-action-btn","data-dumi-tooltip":Ue.formatMessage({id:"previewer.actions.separate"})},v.createElement(pc,null)),v.createElement(K,ue),v.createElement("button",{className:"dumi-default-previewer-action-btn",type:"button",onClick:function(){return Ni(function(Di){return!Di})},"data-dumi-tooltip":Ue.formatMessage({id:"previewer.actions.code.".concat(On?"shrink":"expand")})},On?v.createElement(Wf,null):v.createElement(Lf,null))),On&&v.createElement(v.Fragment,null,v.createElement("div",{className:"dumi-default-previewer-sources"},!Bi&&v.createElement(kh,{className:"dumi-default-previewer-tabs",prefixCls:"dumi-default-tabs",moreIcon:"\xB7\xB7\xB7",defaultActiveKey:String(xn),onChange:function(Di){return Pn(Number(Di))},items:Xt.map(function(Gi,Di){var Fi=ls(Gi,1),bi=Fi[0];return{key:String(Di),label:bi}})})),v.createElement(xe.Z,{lang:ki},Xt[xn][1].value)))},Zh=Uh;function Df(H){return Df=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(ue){return typeof ue}:function(ue){return ue&&typeof Symbol=="function"&&ue.constructor===Symbol&&ue!==Symbol.prototype?"symbol":typeof ue},Df(H)}var vf=function(ue){var _e=(0,w.TH)(),Be=_e.hash,rt="#".concat(ue.asset.id);return v.createElement("div",{id:ue.asset.id,className:"dumi-default-previewer","data-debug":ue.debug,"data-active":Be===rt||void 0},v.createElement("div",{className:"dumi-default-previewer-demo",style:{background:ue.background},"data-compact":ue.compact||void 0,"data-transform":ue.transform||void 0,"data-iframe":ue.iframe||void 0},ue.iframe?v.createElement("iframe",{style:["string","number"].includes(Df(ue.iframe))?{height:Number(ue.iframe)}:{},src:ue.demoUrl}):ue.children),v.createElement("div",{className:"dumi-default-previewer-meta"},(ue.title||ue.debug)&&v.createElement("div",{className:"dumi-default-previewer-desc"},v.createElement("h5",null,v.createElement("a",{href:rt},ue.debug&&v.createElement("strong",null,"DEV ONLY"),ue.title)),ue.description&&v.createElement("div",{className:"markdown",dangerouslySetInnerHTML:{__html:ue.description}})),v.createElement(Zh,ue)))},Ep=vf},28920:function(U,F,c){"use strict";c.d(F,{Z:function(){return sn}});var w=c(50959),v=Object.defineProperty,l=Object.getOwnPropertySymbols,R=Object.prototype.hasOwnProperty,A=Object.prototype.propertyIsEnumerable,D=(ot,_r,cr)=>_r in ot?v(ot,_r,{enumerable:!0,configurable:!0,writable:!0,value:cr}):ot[_r]=cr,k=(ot,_r)=>{for(var cr in _r||(_r={}))R.call(_r,cr)&&D(ot,cr,_r[cr]);if(l)for(var cr of l(_r))A.call(_r,cr)&&D(ot,cr,_r[cr]);return ot};const B=ot=>w.createElement("svg",k({viewBox:"64 64 896 896"},ot),w.createElement("path",{d:"M912 190h-69.9c-9.8 0-19.1 4.5-25.1 12.2L404.7 724.5 207 474a32 32 0 0 0-25.1-12.2H112c-6.7 0-10.4 7.7-6.3 12.9l273.9 347c12.8 16.2 37.4 16.2 50.3 0l488.4-618.9c4.1-5.1.4-12.8-6.3-12.8z"}));var z="data:image/svg+xml;base64,PHN2ZyB2aWV3Qm94PSI2NCA2NCA4OTYgODk2Ij48cGF0aCBkPSJNOTEyIDE5MGgtNjkuOWMtOS44IDAtMTkuMSA0LjUtMjUuMSAxMi4yTDQwNC43IDcyNC41IDIwNyA0NzRhMzIgMzIgMCAwIDAtMjUuMS0xMi4ySDExMmMtNi43IDAtMTAuNCA3LjctNi4zIDEyLjlsMjczLjkgMzQ3YzEyLjggMTYuMiAzNy40IDE2LjIgNTAuMyAwbDQ4OC40LTYxOC45YzQuMS01LjEuNC0xMi44LTYuMy0xMi44eiIvPjwvc3ZnPg==",Z=Object.defineProperty,W=Object.getOwnPropertySymbols,Y=Object.prototype.hasOwnProperty,te=Object.prototype.propertyIsEnumerable,le=(ot,_r,cr)=>_r in ot?Z(ot,_r,{enumerable:!0,configurable:!0,writable:!0,value:cr}):ot[_r]=cr,be=(ot,_r)=>{for(var cr in _r||(_r={}))Y.call(_r,cr)&&le(ot,cr,_r[cr]);if(W)for(var cr of W(_r))te.call(_r,cr)&&le(ot,cr,_r[cr]);return ot};const de=ot=>w.createElement("svg",be({viewBox:"64 64 896 896"},ot),w.createElement("path",{d:"M832 64H296c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h496v688c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8V96c0-17.7-14.3-32-32-32zM704 192H192c-17.7 0-32 14.3-32 32v530.7c0 8.5 3.4 16.6 9.4 22.6l173.3 173.3c2.2 2.2 4.7 4 7.4 5.5v1.9h4.2c3.5 1.3 7.2 2 11 2H704c17.7 0 32-14.3 32-32V224c0-17.7-14.3-32-32-32zM350 856.2 263.9 770H350v86.2zM664 888H414V746c0-22.1-17.9-40-40-40H232V264h432v624z"}));var pe="data:image/svg+xml;base64,PHN2ZyB2aWV3Qm94PSI2NCA2NCA4OTYgODk2Ij48cGF0aCBkPSJNODMyIDY0SDI5NmMtNC40IDAtOCAzLjYtOCA4djU2YzAgNC40IDMuNiA4IDggOGg0OTZ2Njg4YzAgNC40IDMuNiA4IDggOGg1NmM0LjQgMCA4LTMuNiA4LThWOTZjMC0xNy43LTE0LjMtMzItMzItMzJ6TTcwNCAxOTJIMTkyYy0xNy43IDAtMzIgMTQuMy0zMiAzMnY1MzAuN2MwIDguNSAzLjQgMTYuNiA5LjQgMjIuNmwxNzMuMyAxNzMuM2MyLjIgMi4yIDQuNyA0IDcuNCA1LjV2MS45aDQuMmMzLjUgMS4zIDcuMiAyIDExIDJINzA0YzE3LjcgMCAzMi0xNC4zIDMyLTMyVjIyNGMwLTE3LjctMTQuMy0zMi0zMi0zMnpNMzUwIDg1Ni4yIDI2My45IDc3MEgzNTB2ODYuMnpNNjY0IDg4OEg0MTRWNzQ2YzAtMjIuMS0xNy45LTQwLTQwLTQwSDIzMlYyNjRoNDMydjYyNHoiLz48L3N2Zz4=";var Oe=function(){var ot=/(?:^|\s)lang(?:uage)?-([\w-]+)(?=\s|$)/i,_r=0,cr={},Vr={util:{encode:function me(ne){return ne instanceof Qn?new Qn(ne.type,me(ne.content),ne.alias):Array.isArray(ne)?ne.map(me):ne.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/\u00a0/g," ")},type:function(me){return Object.prototype.toString.call(me).slice(8,-1)},objId:function(me){return me.__id||Object.defineProperty(me,"__id",{value:++_r}),me.__id},clone:function me(ne,fe){fe=fe||{};var Q,De;switch(Vr.util.type(ne)){case"Object":if(De=Vr.util.objId(ne),fe[De])return fe[De];Q={},fe[De]=Q;for(var dt in ne)ne.hasOwnProperty(dt)&&(Q[dt]=me(ne[dt],fe));return Q;case"Array":return De=Vr.util.objId(ne),fe[De]?fe[De]:(Q=[],fe[De]=Q,ne.forEach(function(Jt,it){Q[it]=me(Jt,fe)}),Q);default:return ne}},getLanguage:function(me){for(;me;){var ne=ot.exec(me.className);if(ne)return ne[1].toLowerCase();me=me.parentElement}return"none"},setLanguage:function(me,ne){me.className=me.className.replace(RegExp(ot,"gi"),""),me.classList.add("language-"+ne)},isActive:function(me,ne,fe){for(var Q="no-"+ne;me;){var De=me.classList;if(De.contains(ne))return!0;if(De.contains(Q))return!1;me=me.parentElement}return!!fe}},languages:{plain:cr,plaintext:cr,text:cr,txt:cr,extend:function(me,ne){var fe=Vr.util.clone(Vr.languages[me]);for(var Q in ne)fe[Q]=ne[Q];return fe},insertBefore:function(me,ne,fe,Q){Q=Q||Vr.languages;var De=Q[me],dt={};for(var Jt in De)if(De.hasOwnProperty(Jt)){if(Jt==ne)for(var it in fe)fe.hasOwnProperty(it)&&(dt[it]=fe[it]);fe.hasOwnProperty(Jt)||(dt[Jt]=De[Jt])}var lt=Q[me];return Q[me]=dt,Vr.languages.DFS(Vr.languages,function(qt,pr){pr===lt&&qt!=me&&(this[qt]=dt)}),dt},DFS:function me(ne,fe,Q,De){De=De||{};var dt=Vr.util.objId;for(var Jt in ne)if(ne.hasOwnProperty(Jt)){fe.call(ne,Jt,ne[Jt],Q||Jt);var it=ne[Jt],lt=Vr.util.type(it);lt==="Object"&&!De[dt(it)]?(De[dt(it)]=!0,me(it,fe,null,De)):lt==="Array"&&!De[dt(it)]&&(De[dt(it)]=!0,me(it,fe,Jt,De))}}},plugins:{},highlight:function(me,ne,fe){var Q={code:me,grammar:ne,language:fe};return Vr.hooks.run("before-tokenize",Q),Q.tokens=Vr.tokenize(Q.code,Q.grammar),Vr.hooks.run("after-tokenize",Q),Qn.stringify(Vr.util.encode(Q.tokens),Q.language)},tokenize:function(me,ne){var fe=ne.rest;if(fe){for(var Q in fe)ne[Q]=fe[Q];delete ne.rest}var De=new Yr;return Fr(De,De.head,me),_n(me,De,ne,De.head,0),ft(De)},hooks:{all:{},add:function(me,ne){var fe=Vr.hooks.all;fe[me]=fe[me]||[],fe[me].push(ne)},run:function(me,ne){var fe=Vr.hooks.all[me];if(!(!fe||!fe.length))for(var Q=0,De;De=fe[Q++];)De(ne)}},Token:Qn};function Qn(me,ne,fe,Q){this.type=me,this.content=ne,this.alias=fe,this.length=(Q||"").length|0}Qn.stringify=function me(ne,fe){if(typeof ne=="string")return ne;if(Array.isArray(ne)){var Q="";return ne.forEach(function(lt){Q+=me(lt,fe)}),Q}var De={type:ne.type,content:me(ne.content,fe),tag:"span",classes:["token",ne.type],attributes:{},language:fe},dt=ne.alias;dt&&(Array.isArray(dt)?Array.prototype.push.apply(De.classes,dt):De.classes.push(dt)),Vr.hooks.run("wrap",De);var Jt="";for(var it in De.attributes)Jt+=" "+it+'="'+(De.attributes[it]||"").replace(/"/g,"&quot;")+'"';return"<"+De.tag+' class="'+De.classes.join(" ")+'"'+Jt+">"+De.content+"</"+De.tag+">"};function mn(me,ne,fe,Q){me.lastIndex=ne;var De=me.exec(fe);if(De&&Q&&De[1]){var dt=De[1].length;De.index+=dt,De[0]=De[0].slice(dt)}return De}function _n(me,ne,fe,Q,De,dt){for(var Jt in fe)if(!(!fe.hasOwnProperty(Jt)||!fe[Jt])){var it=fe[Jt];it=Array.isArray(it)?it:[it];for(var lt=0;lt<it.length;++lt){if(dt&&dt.cause==Jt+","+lt)return;var qt=it[lt],pr=qt.inside,Hr=!!qt.lookbehind,Xr=!!qt.greedy,ce=qt.alias;if(Xr&&!qt.pattern.global){var xt=qt.pattern.toString().match(/[imsuy]*$/)[0];qt.pattern=RegExp(qt.pattern.source,xt+"g")}for(var Gt=qt.pattern||qt,Ir=Q.next,nn=De;Ir!==ne.tail&&!(dt&&nn>=dt.reach);nn+=Ir.value.length,Ir=Ir.next){var zi=Ir.value;if(ne.length>me.length)return;if(!(zi instanceof Qn)){var Ui=1,Pi;if(Xr){if(Pi=mn(Gt,nn,me,Hr),!Pi||Pi.index>=me.length)break;var et=Pi.index,ka=Pi.index+Pi[0].length,Ti=nn;for(Ti+=Ir.value.length;et>=Ti;)Ir=Ir.next,Ti+=Ir.value.length;if(Ti-=Ir.value.length,nn=Ti,Ir.value instanceof Qn)continue;for(var Ge=Ir;Ge!==ne.tail&&(Ti<ka||typeof Ge.value=="string");Ge=Ge.next)Ui++,Ti+=Ge.value.length;Ui--,zi=me.slice(nn,Ti),Pi.index-=nn}else if(Pi=mn(Gt,0,zi,Hr),!Pi)continue;var et=Pi.index,gt=Pi[0],ht=zi.slice(0,et),Et=zi.slice(et+gt.length),Zt=nn+zi.length;dt&&Zt>dt.reach&&(dt.reach=Zt);var sr=Ir.prev;ht&&(sr=Fr(ne,sr,ht),nn+=ht.length),kr(ne,sr,Ui);var bt=new Qn(Jt,pr?Vr.tokenize(gt,pr):gt,ce,gt);if(Ir=Fr(ne,sr,bt),Et&&Fr(ne,Ir,Et),Ui>1){var Ft={cause:Jt+","+lt,reach:Zt};_n(me,ne,fe,Ir.prev,nn,Ft),dt&&Ft.reach>dt.reach&&(dt.reach=Ft.reach)}}}}}}function Yr(){var me={value:null,prev:null,next:null},ne={value:null,prev:me,next:null};me.next=ne,this.head=me,this.tail=ne,this.length=0}function Fr(me,ne,fe){var Q=ne.next,De={value:fe,prev:ne,next:Q};return ne.next=De,Q.prev=De,me.length++,De}function kr(me,ne,fe){for(var Q=ne.next,De=0;De<fe&&Q!==me.tail;De++)Q=Q.next;ne.next=Q,Q.prev=ne,me.length-=De}function ft(me){for(var ne=[],fe=me.head.next;fe!==me.tail;)ne.push(fe.value),fe=fe.next;return ne}return Vr}(),xe=Oe;Oe.default=Oe,xe.languages.markup={comment:{pattern:/<!--(?:(?!<!--)[\s\S])*?-->/,greedy:!0},prolog:{pattern:/<\?[\s\S]+?\?>/,greedy:!0},doctype:{pattern:/<!DOCTYPE(?:[^>"'[\]]|"[^"]*"|'[^']*')+(?:\[(?:[^<"'\]]|"[^"]*"|'[^']*'|<(?!!--)|<!--(?:[^-]|-(?!->))*-->)*\]\s*)?>/i,greedy:!0,inside:{"internal-subset":{pattern:/(^[^\[]*\[)[\s\S]+(?=\]>$)/,lookbehind:!0,greedy:!0,inside:null},string:{pattern:/"[^"]*"|'[^']*'/,greedy:!0},punctuation:/^<!|>$|[[\]]/,"doctype-tag":/^DOCTYPE/i,name:/[^\s<>'"]+/}},cdata:{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,greedy:!0},tag:{pattern:/<\/?(?!\d)[^\s>\/=$<%]+(?:\s(?:\s*[^\s>\/=]+(?:\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))|(?=[\s/>])))+)?\s*\/?>/,greedy:!0,inside:{tag:{pattern:/^<\/?[^\s>\/]+/,inside:{punctuation:/^<\/?/,namespace:/^[^\s>\/:]+:/}},"special-attr":[],"attr-value":{pattern:/=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+)/,inside:{punctuation:[{pattern:/^=/,alias:"attr-equals"},/"|'/]}},punctuation:/\/?>/,"attr-name":{pattern:/[^\s>\/]+/,inside:{namespace:/^[^\s>\/:]+:/}}}},entity:[{pattern:/&[\da-z]{1,8};/i,alias:"named-entity"},/&#x?[\da-f]{1,8};/i]},xe.languages.markup.tag.inside["attr-value"].inside.entity=xe.languages.markup.entity,xe.languages.markup.doctype.inside["internal-subset"].inside=xe.languages.markup,xe.hooks.add("wrap",function(ot){ot.type==="entity"&&(ot.attributes.title=ot.content.replace(/&amp;/,"&"))}),Object.defineProperty(xe.languages.markup.tag,"addInlined",{value:function(_r,cr){var Vr={};Vr["language-"+cr]={pattern:/(^<!\[CDATA\[)[\s\S]+?(?=\]\]>$)/i,lookbehind:!0,inside:xe.languages[cr]},Vr.cdata=/^<!\[CDATA\[|\]\]>$/i;var Qn={"included-cdata":{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,inside:Vr}};Qn["language-"+cr]={pattern:/[\s\S]+/,inside:xe.languages[cr]};var mn={};mn[_r]={pattern:RegExp(/(<__[^>]*>)(?:<!\[CDATA\[(?:[^\]]|\](?!\]>))*\]\]>|(?!<!\[CDATA\[)[\s\S])*?(?=<\/__>)/.source.replace(/__/g,function(){return _r}),"i"),lookbehind:!0,greedy:!0,inside:Qn},xe.languages.insertBefore("markup","cdata",mn)}}),Object.defineProperty(xe.languages.markup.tag,"addAttribute",{value:function(ot,_r){xe.languages.markup.tag.inside["special-attr"].push({pattern:RegExp(/(^|["'\s])/.source+"(?:"+ot+")"+/\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))/.source,"i"),lookbehind:!0,inside:{"attr-name":/^[^\s=]+/,"attr-value":{pattern:/=[\s\S]+/,inside:{value:{pattern:/(^=\s*(["']|(?!["'])))\S[\s\S]*(?=\2$)/,lookbehind:!0,alias:[_r,"language-"+_r],inside:xe.languages[_r]},punctuation:[{pattern:/^=/,alias:"attr-equals"},/"|'/]}}}})}}),xe.languages.html=xe.languages.markup,xe.languages.mathml=xe.languages.markup,xe.languages.svg=xe.languages.markup,xe.languages.xml=xe.languages.extend("markup",{}),xe.languages.ssml=xe.languages.xml,xe.languages.atom=xe.languages.xml,xe.languages.rss=xe.languages.xml,function(ot){var _r="\\b(?:BASH|BASHOPTS|BASH_ALIASES|BASH_ARGC|BASH_ARGV|BASH_CMDS|BASH_COMPLETION_COMPAT_DIR|BASH_LINENO|BASH_REMATCH|BASH_SOURCE|BASH_VERSINFO|BASH_VERSION|COLORTERM|COLUMNS|COMP_WORDBREAKS|DBUS_SESSION_BUS_ADDRESS|DEFAULTS_PATH|DESKTOP_SESSION|DIRSTACK|DISPLAY|EUID|GDMSESSION|GDM_LANG|GNOME_KEYRING_CONTROL|GNOME_KEYRING_PID|GPG_AGENT_INFO|GROUPS|HISTCONTROL|HISTFILE|HISTFILESIZE|HISTSIZE|HOME|HOSTNAME|HOSTTYPE|IFS|INSTANCE|JOB|LANG|LANGUAGE|LC_ADDRESS|LC_ALL|LC_IDENTIFICATION|LC_MEASUREMENT|LC_MONETARY|LC_NAME|LC_NUMERIC|LC_PAPER|LC_TELEPHONE|LC_TIME|LESSCLOSE|LESSOPEN|LINES|LOGNAME|LS_COLORS|MACHTYPE|MAILCHECK|MANDATORY_PATH|NO_AT_BRIDGE|OLDPWD|OPTERR|OPTIND|ORBIT_SOCKETDIR|OSTYPE|PAPERSIZE|PATH|PIPESTATUS|PPID|PS1|PS2|PS3|PS4|PWD|RANDOM|REPLY|SECONDS|SELINUX_INIT|SESSION|SESSIONTYPE|SESSION_MANAGER|SHELL|SHELLOPTS|SHLVL|SSH_AUTH_SOCK|TERM|UID|UPSTART_EVENTS|UPSTART_INSTANCE|UPSTART_JOB|UPSTART_SESSION|USER|WINDOWID|XAUTHORITY|XDG_CONFIG_DIRS|XDG_CURRENT_DESKTOP|XDG_DATA_DIRS|XDG_GREETER_DATA_DIR|XDG_MENU_PREFIX|XDG_RUNTIME_DIR|XDG_SEAT|XDG_SEAT_PATH|XDG_SESSION_DESKTOP|XDG_SESSION_ID|XDG_SESSION_PATH|XDG_SESSION_TYPE|XDG_VTNR|XMODIFIERS)\\b",cr={pattern:/(^(["']?)\w+\2)[ \t]+\S.*/,lookbehind:!0,alias:"punctuation",inside:null},Vr={bash:cr,environment:{pattern:RegExp("\\$"+_r),alias:"constant"},variable:[{pattern:/\$?\(\([\s\S]+?\)\)/,greedy:!0,inside:{variable:[{pattern:/(^\$\(\([\s\S]+)\)\)/,lookbehind:!0},/^\$\(\(/],number:/\b0x[\dA-Fa-f]+\b|(?:\b\d+(?:\.\d*)?|\B\.\d+)(?:[Ee]-?\d+)?/,operator:/--|\+\+|\*\*=?|<<=?|>>=?|&&|\|\||[=!+\-*/%<>^&|]=?|[?~:]/,punctuation:/\(\(?|\)\)?|,|;/}},{pattern:/\$\((?:\([^)]+\)|[^()])+\)|`[^`]+`/,greedy:!0,inside:{variable:/^\$\(|^`|\)$|`$/}},{pattern:/\$\{[^}]+\}/,greedy:!0,inside:{operator:/:[-=?+]?|[!\/]|##?|%%?|\^\^?|,,?/,punctuation:/[\[\]]/,environment:{pattern:RegExp("(\\{)"+_r),lookbehind:!0,alias:"constant"}}},/\$(?:\w+|[#?*!@$])/],entity:/\\(?:[abceEfnrtv\\"]|O?[0-7]{1,3}|U[0-9a-fA-F]{8}|u[0-9a-fA-F]{4}|x[0-9a-fA-F]{1,2})/};ot.languages.bash={shebang:{pattern:/^#!\s*\/.*/,alias:"important"},comment:{pattern:/(^|[^"{\\$])#.*/,lookbehind:!0},"function-name":[{pattern:/(\bfunction\s+)[\w-]+(?=(?:\s*\(?:\s*\))?\s*\{)/,lookbehind:!0,alias:"function"},{pattern:/\b[\w-]+(?=\s*\(\s*\)\s*\{)/,alias:"function"}],"for-or-select":{pattern:/(\b(?:for|select)\s+)\w+(?=\s+in\s)/,alias:"variable",lookbehind:!0},"assign-left":{pattern:/(^|[\s;|&]|[<>]\()\w+(?=\+?=)/,inside:{environment:{pattern:RegExp("(^|[\\s;|&]|[<>]\\()"+_r),lookbehind:!0,alias:"constant"}},alias:"variable",lookbehind:!0},string:[{pattern:/((?:^|[^<])<<-?\s*)(\w+)\s[\s\S]*?(?:\r?\n|\r)\2/,lookbehind:!0,greedy:!0,inside:Vr},{pattern:/((?:^|[^<])<<-?\s*)(["'])(\w+)\2\s[\s\S]*?(?:\r?\n|\r)\3/,lookbehind:!0,greedy:!0,inside:{bash:cr}},{pattern:/(^|[^\\](?:\\\\)*)"(?:\\[\s\S]|\$\([^)]+\)|\$(?!\()|`[^`]+`|[^"\\`$])*"/,lookbehind:!0,greedy:!0,inside:Vr},{pattern:/(^|[^$\\])'[^']*'/,lookbehind:!0,greedy:!0},{pattern:/\$'(?:[^'\\]|\\[\s\S])*'/,greedy:!0,inside:{entity:Vr.entity}}],environment:{pattern:RegExp("\\$?"+_r),alias:"constant"},variable:Vr.variable,function:{pattern:/(^|[\s;|&]|[<>]\()(?:add|apropos|apt|apt-cache|apt-get|aptitude|aspell|automysqlbackup|awk|basename|bash|bc|bconsole|bg|bzip2|cal|cat|cfdisk|chgrp|chkconfig|chmod|chown|chroot|cksum|clear|cmp|column|comm|composer|cp|cron|crontab|csplit|curl|cut|date|dc|dd|ddrescue|debootstrap|df|diff|diff3|dig|dir|dircolors|dirname|dirs|dmesg|docker|docker-compose|du|egrep|eject|env|ethtool|expand|expect|expr|fdformat|fdisk|fg|fgrep|file|find|fmt|fold|format|free|fsck|ftp|fuser|gawk|git|gparted|grep|groupadd|groupdel|groupmod|groups|grub-mkconfig|gzip|halt|head|hg|history|host|hostname|htop|iconv|id|ifconfig|ifdown|ifup|import|install|ip|jobs|join|kill|killall|less|link|ln|locate|logname|logrotate|look|lpc|lpr|lprint|lprintd|lprintq|lprm|ls|lsof|lynx|make|man|mc|mdadm|mkconfig|mkdir|mke2fs|mkfifo|mkfs|mkisofs|mknod|mkswap|mmv|more|most|mount|mtools|mtr|mutt|mv|nano|nc|netstat|nice|nl|node|nohup|notify-send|npm|nslookup|op|open|parted|passwd|paste|pathchk|ping|pkill|pnpm|podman|podman-compose|popd|pr|printcap|printenv|ps|pushd|pv|quota|quotacheck|quotactl|ram|rar|rcp|reboot|remsync|rename|renice|rev|rm|rmdir|rpm|rsync|scp|screen|sdiff|sed|sendmail|seq|service|sftp|sh|shellcheck|shuf|shutdown|sleep|slocate|sort|split|ssh|stat|strace|su|sudo|sum|suspend|swapon|sync|tac|tail|tar|tee|time|timeout|top|touch|tr|traceroute|tsort|tty|umount|uname|unexpand|uniq|units|unrar|unshar|unzip|update-grub|uptime|useradd|userdel|usermod|users|uudecode|uuencode|v|vcpkg|vdir|vi|vim|virsh|vmstat|wait|watch|wc|wget|whereis|which|who|whoami|write|xargs|xdg-open|yarn|yes|zenity|zip|zsh|zypper)(?=$|[)\s;|&])/,lookbehind:!0},keyword:{pattern:/(^|[\s;|&]|[<>]\()(?:case|do|done|elif|else|esac|fi|for|function|if|in|select|then|until|while)(?=$|[)\s;|&])/,lookbehind:!0},builtin:{pattern:/(^|[\s;|&]|[<>]\()(?:\.|:|alias|bind|break|builtin|caller|cd|command|continue|declare|echo|enable|eval|exec|exit|export|getopts|hash|help|let|local|logout|mapfile|printf|pwd|read|readarray|readonly|return|set|shift|shopt|source|test|times|trap|type|typeset|ulimit|umask|unalias|unset)(?=$|[)\s;|&])/,lookbehind:!0,alias:"class-name"},boolean:{pattern:/(^|[\s;|&]|[<>]\()(?:false|true)(?=$|[)\s;|&])/,lookbehind:!0},"file-descriptor":{pattern:/\B&\d\b/,alias:"important"},operator:{pattern:/\d?<>|>\||\+=|=[=~]?|!=?|<<[<-]?|[&\d]?>>|\d[<>]&?|[<>][&=]?|&[>&]?|\|[&|]?/,inside:{"file-descriptor":{pattern:/^\d/,alias:"important"}}},punctuation:/\$?\(\(?|\)\)?|\.\.|[{}[\];\\]/,number:{pattern:/(^|\s)(?:[1-9]\d*|0)(?:[.,]\d+)?\b/,lookbehind:!0}},cr.inside=ot.languages.bash;for(var Qn=["comment","function-name","for-or-select","assign-left","string","environment","function","keyword","builtin","boolean","file-descriptor","operator","punctuation","number"],mn=Vr.variable[1].inside,_n=0;_n<Qn.length;_n++)mn[Qn[_n]]=ot.languages.bash[Qn[_n]];ot.languages.shell=ot.languages.bash}(xe),xe.languages.clike={comment:[{pattern:/(^|[^\\])\/\*[\s\S]*?(?:\*\/|$)/,lookbehind:!0,greedy:!0},{pattern:/(^|[^\\:])\/\/.*/,lookbehind:!0,greedy:!0}],string:{pattern:/(["'])(?:\\(?:\r\n|[\s\S])|(?!\1)[^\\\r\n])*\1/,greedy:!0},"class-name":{pattern:/(\b(?:class|extends|implements|instanceof|interface|new|trait)\s+|\bcatch\s+\()[\w.\\]+/i,lookbehind:!0,inside:{punctuation:/[.\\]/}},keyword:/\b(?:break|catch|continue|do|else|finally|for|function|if|in|instanceof|new|null|return|throw|try|while)\b/,boolean:/\b(?:false|true)\b/,function:/\b\w+(?=\()/,number:/\b0x[\da-f]+\b|(?:\b\d+(?:\.\d*)?|\B\.\d+)(?:e[+-]?\d+)?/i,operator:/[<>]=?|[!=]=?=?|--?|\+\+?|&&?|\|\|?|[?*/~^%]/,punctuation:/[{}[\];(),.:]/},xe.languages.c=xe.languages.extend("clike",{comment:{pattern:/\/\/(?:[^\r\n\\]|\\(?:\r\n?|\n|(?![\r\n])))*|\/\*[\s\S]*?(?:\*\/|$)/,greedy:!0},string:{pattern:/"(?:\\(?:\r\n|[\s\S])|[^"\\\r\n])*"/,greedy:!0},"class-name":{pattern:/(\b(?:enum|struct)\s+(?:__attribute__\s*\(\([\s\S]*?\)\)\s*)?)\w+|\b[a-z]\w*_t\b/,lookbehind:!0},keyword:/\b(?:_Alignas|_Alignof|_Atomic|_Bool|_Complex|_Generic|_Imaginary|_Noreturn|_Static_assert|_Thread_local|__attribute__|asm|auto|break|case|char|const|continue|default|do|double|else|enum|extern|float|for|goto|if|inline|int|long|register|return|short|signed|sizeof|static|struct|switch|typedef|typeof|union|unsigned|void|volatile|while)\b/,function:/\b[a-z_]\w*(?=\s*\()/i,number:/(?:\b0x(?:[\da-f]+(?:\.[\da-f]*)?|\.[\da-f]+)(?:p[+-]?\d+)?|(?:\b\d+(?:\.\d*)?|\B\.\d+)(?:e[+-]?\d+)?)[ful]{0,4}/i,operator:/>>=?|<<=?|->|([-+&|:])\1|[?:~]|[-+*/%&|^!=<>]=?/}),xe.languages.insertBefore("c","string",{char:{pattern:/'(?:\\(?:\r\n|[\s\S])|[^'\\\r\n]){0,32}'/,greedy:!0}}),xe.languages.insertBefore("c","string",{macro:{pattern:/(^[\t ]*)#\s*[a-z](?:[^\r\n\\/]|\/(?!\*)|\/\*(?:[^*]|\*(?!\/))*\*\/|\\(?:\r\n|[\s\S]))*/im,lookbehind:!0,greedy:!0,alias:"property",inside:{string:[{pattern:/^(#\s*include\s*)<[^>]+>/,lookbehind:!0},xe.languages.c.string],char:xe.languages.c.char,comment:xe.languages.c.comment,"macro-name":[{pattern:/(^#\s*define\s+)\w+\b(?!\()/i,lookbehind:!0},{pattern:/(^#\s*define\s+)\w+\b(?=\()/i,lookbehind:!0,alias:"function"}],directive:{pattern:/^(#\s*)[a-z]+/,lookbehind:!0,alias:"keyword"},"directive-hash":/^#/,punctuation:/##|\\(?=[\r\n])/,expression:{pattern:/\S[\s\S]*/,inside:xe.languages.c}}}}),xe.languages.insertBefore("c","function",{constant:/\b(?:EOF|NULL|SEEK_CUR|SEEK_END|SEEK_SET|__DATE__|__FILE__|__LINE__|__TIMESTAMP__|__TIME__|__func__|stderr|stdin|stdout)\b/}),delete xe.languages.c.boolean,function(ot){var _r=/\b(?:alignas|alignof|asm|auto|bool|break|case|catch|char|char16_t|char32_t|char8_t|class|co_await|co_return|co_yield|compl|concept|const|const_cast|consteval|constexpr|constinit|continue|decltype|default|delete|do|double|dynamic_cast|else|enum|explicit|export|extern|final|float|for|friend|goto|if|import|inline|int|int16_t|int32_t|int64_t|int8_t|long|module|mutable|namespace|new|noexcept|nullptr|operator|override|private|protected|public|register|reinterpret_cast|requires|return|short|signed|sizeof|static|static_assert|static_cast|struct|switch|template|this|thread_local|throw|try|typedef|typeid|typename|uint16_t|uint32_t|uint64_t|uint8_t|union|unsigned|using|virtual|void|volatile|wchar_t|while)\b/,cr=/\b(?!<keyword>)\w+(?:\s*\.\s*\w+)*\b/.source.replace(/<keyword>/g,function(){return _r.source});ot.languages.cpp=ot.languages.extend("c",{"class-name":[{pattern:RegExp(/(\b(?:class|concept|enum|struct|typename)\s+)(?!<keyword>)\w+/.source.replace(/<keyword>/g,function(){return _r.source})),lookbehind:!0},/\b[A-Z]\w*(?=\s*::\s*\w+\s*\()/,/\b[A-Z_]\w*(?=\s*::\s*~\w+\s*\()/i,/\b\w+(?=\s*<(?:[^<>]|<(?:[^<>]|<[^<>]*>)*>)*>\s*::\s*\w+\s*\()/],keyword:_r,number:{pattern:/(?:\b0b[01']+|\b0x(?:[\da-f']+(?:\.[\da-f']*)?|\.[\da-f']+)(?:p[+-]?[\d']+)?|(?:\b[\d']+(?:\.[\d']*)?|\B\.[\d']+)(?:e[+-]?[\d']+)?)[ful]{0,4}/i,greedy:!0},operator:/>>=?|<<=?|->|--|\+\+|&&|\|\||[?:~]|<=>|[-+*/%&|^!=<>]=?|\b(?:and|and_eq|bitand|bitor|not|not_eq|or|or_eq|xor|xor_eq)\b/,boolean:/\b(?:false|true)\b/}),ot.languages.insertBefore("cpp","string",{module:{pattern:RegExp(/(\b(?:import|module)\s+)/.source+"(?:"+/"(?:\\(?:\r\n|[\s\S])|[^"\\\r\n])*"|<[^<>\r\n]*>/.source+"|"+/<mod-name>(?:\s*:\s*<mod-name>)?|:\s*<mod-name>/.source.replace(/<mod-name>/g,function(){return cr})+")"),lookbehind:!0,greedy:!0,inside:{string:/^[<"][\s\S]+/,operator:/:/,punctuation:/\./}},"raw-string":{pattern:/R"([^()\\ ]{0,16})\([\s\S]*?\)\1"/,alias:"string",greedy:!0}}),ot.languages.insertBefore("cpp","keyword",{"generic-function":{pattern:/\b(?!operator\b)[a-z_]\w*\s*<(?:[^<>]|<[^<>]*>)*>(?=\s*\()/i,inside:{function:/^\w+/,generic:{pattern:/<[\s\S]+/,alias:"class-name",inside:ot.languages.cpp}}}}),ot.languages.insertBefore("cpp","operator",{"double-colon":{pattern:/::/,alias:"punctuation"}}),ot.languages.insertBefore("cpp","class-name",{"base-clause":{pattern:/(\b(?:class|struct)\s+\w+\s*:\s*)[^;{}"'\s]+(?:\s+[^;{}"'\s]+)*(?=\s*[;{])/,lookbehind:!0,greedy:!0,inside:ot.languages.extend("cpp",{})}}),ot.languages.insertBefore("inside","double-colon",{"class-name":/\b[a-z_]\w*\b(?!\s*::)/i},ot.languages.cpp["base-clause"])}(xe),function(ot){var _r=/(?:"(?:\\(?:\r\n|[\s\S])|[^"\\\r\n])*"|'(?:\\(?:\r\n|[\s\S])|[^'\\\r\n])*')/;ot.languages.css={comment:/\/\*[\s\S]*?\*\//,atrule:{pattern:/@[\w-](?:[^;{\s]|\s+(?![\s{]))*(?:;|(?=\s*\{))/,inside:{rule:/^@[\w-]+/,"selector-function-argument":{pattern:/(\bselector\s*\(\s*(?![\s)]))(?:[^()\s]|\s+(?![\s)])|\((?:[^()]|\([^()]*\))*\))+(?=\s*\))/,lookbehind:!0,alias:"selector"},keyword:{pattern:/(^|[^\w-])(?:and|not|only|or)(?![\w-])/,lookbehind:!0}}},url:{pattern:RegExp("\\burl\\((?:"+_r.source+"|"+/(?:[^\\\r\n()"']|\\[\s\S])*/.source+")\\)","i"),greedy:!0,inside:{function:/^url/i,punctuation:/^\(|\)$/,string:{pattern:RegExp("^"+_r.source+"$"),alias:"url"}}},selector:{pattern:RegExp(`(^|[{}\\s])[^{}\\s](?:[^{};"'\\s]|\\s+(?![\\s{])|`+_r.source+")*(?=\\s*\\{)"),lookbehind:!0},string:{pattern:_r,greedy:!0},property:{pattern:/(^|[^-\w\xA0-\uFFFF])(?!\s)[-_a-z\xA0-\uFFFF](?:(?!\s)[-\w\xA0-\uFFFF])*(?=\s*:)/i,lookbehind:!0},important:/!important\b/i,function:{pattern:/(^|[^-a-z0-9])[-a-z0-9]+(?=\()/i,lookbehind:!0},punctuation:/[(){};:,]/},ot.languages.css.atrule.inside.rest=ot.languages.css;var cr=ot.languages.markup;cr&&(cr.tag.addInlined("style","css"),cr.tag.addAttribute("style","css"))}(xe),function(ot){var _r=/("|')(?:\\(?:\r\n|[\s\S])|(?!\1)[^\\\r\n])*\1/,cr;ot.languages.css.selector={pattern:ot.languages.css.selector.pattern,lookbehind:!0,inside:cr={"pseudo-element":/:(?:after|before|first-letter|first-line|selection)|::[-\w]+/,"pseudo-class":/:[-\w]+/,class:/\.[-\w]+/,id:/#[-\w]+/,attribute:{pattern:RegExp(`\\[(?:[^[\\]"']|`+_r.source+")*\\]"),greedy:!0,inside:{punctuation:/^\[|\]$/,"case-sensitivity":{pattern:/(\s)[si]$/i,lookbehind:!0,alias:"keyword"},namespace:{pattern:/^(\s*)(?:(?!\s)[-*\w\xA0-\uFFFF])*\|(?!=)/,lookbehind:!0,inside:{punctuation:/\|$/}},"attr-name":{pattern:/^(\s*)(?:(?!\s)[-\w\xA0-\uFFFF])+/,lookbehind:!0},"attr-value":[_r,{pattern:/(=\s*)(?:(?!\s)[-\w\xA0-\uFFFF])+(?=\s*$)/,lookbehind:!0}],operator:/[|~*^$]?=/}},"n-th":[{pattern:/(\(\s*)[+-]?\d*[\dn](?:\s*[+-]\s*\d+)?(?=\s*\))/,lookbehind:!0,inside:{number:/[\dn]+/,operator:/[+-]/}},{pattern:/(\(\s*)(?:even|odd)(?=\s*\))/i,lookbehind:!0}],combinator:/>|\+|~|\|\|/,punctuation:/[(),]/}},ot.languages.css.atrule.inside["selector-function-argument"].inside=cr,ot.languages.insertBefore("css","property",{variable:{pattern:/(^|[^-\w\xA0-\uFFFF])--(?!\s)[-_a-z\xA0-\uFFFF](?:(?!\s)[-\w\xA0-\uFFFF])*/i,lookbehind:!0}});var Vr={pattern:/(\b\d+)(?:%|[a-z]+(?![\w-]))/,lookbehind:!0},Qn={pattern:/(^|[^\w.-])-?(?:\d+(?:\.\d+)?|\.\d+)/,lookbehind:!0};ot.languages.insertBefore("css","function",{operator:{pattern:/(\s)[+\-*\/](?=\s)/,lookbehind:!0},hexcode:{pattern:/\B#[\da-f]{3,8}\b/i,alias:"color"},color:[{pattern:/(^|[^\w-])(?:AliceBlue|AntiqueWhite|Aqua|Aquamarine|Azure|Beige|Bisque|Black|BlanchedAlmond|Blue|BlueViolet|Brown|BurlyWood|CadetBlue|Chartreuse|Chocolate|Coral|CornflowerBlue|Cornsilk|Crimson|Cyan|DarkBlue|DarkCyan|DarkGoldenRod|DarkGr[ae]y|DarkGreen|DarkKhaki|DarkMagenta|DarkOliveGreen|DarkOrange|DarkOrchid|DarkRed|DarkSalmon|DarkSeaGreen|DarkSlateBlue|DarkSlateGr[ae]y|DarkTurquoise|DarkViolet|DeepPink|DeepSkyBlue|DimGr[ae]y|DodgerBlue|FireBrick|FloralWhite|ForestGreen|Fuchsia|Gainsboro|GhostWhite|Gold|GoldenRod|Gr[ae]y|Green|GreenYellow|HoneyDew|HotPink|IndianRed|Indigo|Ivory|Khaki|Lavender|LavenderBlush|LawnGreen|LemonChiffon|LightBlue|LightCoral|LightCyan|LightGoldenRodYellow|LightGr[ae]y|LightGreen|LightPink|LightSalmon|LightSeaGreen|LightSkyBlue|LightSlateGr[ae]y|LightSteelBlue|LightYellow|Lime|LimeGreen|Linen|Magenta|Maroon|MediumAquaMarine|MediumBlue|MediumOrchid|MediumPurple|MediumSeaGreen|MediumSlateBlue|MediumSpringGreen|MediumTurquoise|MediumVioletRed|MidnightBlue|MintCream|MistyRose|Moccasin|NavajoWhite|Navy|OldLace|Olive|OliveDrab|Orange|OrangeRed|Orchid|PaleGoldenRod|PaleGreen|PaleTurquoise|PaleVioletRed|PapayaWhip|PeachPuff|Peru|Pink|Plum|PowderBlue|Purple|Red|RosyBrown|RoyalBlue|SaddleBrown|Salmon|SandyBrown|SeaGreen|SeaShell|Sienna|Silver|SkyBlue|SlateBlue|SlateGr[ae]y|Snow|SpringGreen|SteelBlue|Tan|Teal|Thistle|Tomato|Transparent|Turquoise|Violet|Wheat|White|WhiteSmoke|Yellow|YellowGreen)(?![\w-])/i,lookbehind:!0},{pattern:/\b(?:hsl|rgb)\(\s*\d{1,3}\s*,\s*\d{1,3}%?\s*,\s*\d{1,3}%?\s*\)\B|\b(?:hsl|rgb)a\(\s*\d{1,3}\s*,\s*\d{1,3}%?\s*,\s*\d{1,3}%?\s*,\s*(?:0|0?\.\d+|1)\s*\)\B/i,inside:{unit:Vr,number:Qn,function:/[\w-]+(?=\()/,punctuation:/[(),]/}}],entity:/\\[\da-f]{1,8}/i,unit:Vr,number:Qn})}(xe),xe.languages.javascript=xe.languages.extend("clike",{"class-name":[xe.languages.clike["class-name"],{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$A-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\.(?:constructor|prototype))/,lookbehind:!0}],keyword:[{pattern:/((?:^|\})\s*)catch\b/,lookbehind:!0},{pattern:/(^|[^.]|\.\.\.\s*)\b(?:as|assert(?=\s*\{)|async(?=\s*(?:function\b|\(|[$\w\xA0-\uFFFF]|$))|await|break|case|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally(?=\s*(?:\{|$))|for|from(?=\s*(?:['"]|$))|function|(?:get|set)(?=\s*(?:[#\[$\w\xA0-\uFFFF]|$))|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)\b/,lookbehind:!0}],function:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*(?:\.\s*(?:apply|bind|call)\s*)?\()/,number:{pattern:RegExp(/(^|[^\w$])/.source+"(?:"+(/NaN|Infinity/.source+"|"+/0[bB][01]+(?:_[01]+)*n?/.source+"|"+/0[oO][0-7]+(?:_[0-7]+)*n?/.source+"|"+/0[xX][\dA-Fa-f]+(?:_[\dA-Fa-f]+)*n?/.source+"|"+/\d+(?:_\d+)*n/.source+"|"+/(?:\d+(?:_\d+)*(?:\.(?:\d+(?:_\d+)*)?)?|\.\d+(?:_\d+)*)(?:[Ee][+-]?\d+(?:_\d+)*)?/.source)+")"+/(?![\w$])/.source),lookbehind:!0},operator:/--|\+\+|\*\*=?|=>|&&=?|\|\|=?|[!=]==|<<=?|>>>?=?|[-+*/%&|^!=<>]=?|\.{3}|\?\?=?|\?\.?|[~:]/}),xe.languages.javascript["class-name"][0].pattern=/(\b(?:class|extends|implements|instanceof|interface|new)\s+)[\w.\\]+/,xe.languages.insertBefore("javascript","keyword",{regex:{pattern:/((?:^|[^$\w\xA0-\uFFFF."'\])\s]|\b(?:return|yield))\s*)\/(?:\[(?:[^\]\\\r\n]|\\.)*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}(?=(?:\s|\/\*(?:[^*]|\*(?!\/))*\*\/)*(?:$|[\r\n,.;:})\]]|\/\/))/,lookbehind:!0,greedy:!0,inside:{"regex-source":{pattern:/^(\/)[\s\S]+(?=\/[a-z]*$)/,lookbehind:!0,alias:"language-regex",inside:xe.languages.regex},"regex-delimiter":/^\/|\/$/,"regex-flags":/^[a-z]+$/}},"function-variable":{pattern:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*[=:]\s*(?:async\s*)?(?:\bfunction\b|(?:\((?:[^()]|\([^()]*\))*\)|(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)\s*=>))/,alias:"function"},parameter:[{pattern:/(function(?:\s+(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)?\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\))/,lookbehind:!0,inside:xe.languages.javascript},{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$a-z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*=>)/i,lookbehind:!0,inside:xe.languages.javascript},{pattern:/(\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*=>)/,lookbehind:!0,inside:xe.languages.javascript},{pattern:/((?:\b|\s|^)(?!(?:as|async|await|break|case|catch|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally|for|from|function|get|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|set|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)(?![$\w\xA0-\uFFFF]))(?:(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*\s*)\(\s*|\]\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*\{)/,lookbehind:!0,inside:xe.languages.javascript}],constant:/\b[A-Z](?:[A-Z_]|\dx?)*\b/}),xe.languages.insertBefore("javascript","string",{hashbang:{pattern:/^#!.*/,greedy:!0,alias:"comment"},"template-string":{pattern:/`(?:\\[\s\S]|\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}|(?!\$\{)[^\\`])*`/,greedy:!0,inside:{"template-punctuation":{pattern:/^`|`$/,alias:"string"},interpolation:{pattern:/((?:^|[^\\])(?:\\{2})*)\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}/,lookbehind:!0,inside:{"interpolation-punctuation":{pattern:/^\$\{|\}$/,alias:"punctuation"},rest:xe.languages.javascript}},string:/[\s\S]+/}},"string-property":{pattern:/((?:^|[,{])[ \t]*)(["'])(?:\\(?:\r\n|[\s\S])|(?!\2)[^\\\r\n])*\2(?=\s*:)/m,lookbehind:!0,greedy:!0,alias:"property"}}),xe.languages.insertBefore("javascript","operator",{"literal-property":{pattern:/((?:^|[,{])[ \t]*)(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*:)/m,lookbehind:!0,alias:"property"}}),xe.languages.markup&&(xe.languages.markup.tag.addInlined("script","javascript"),xe.languages.markup.tag.addAttribute(/on(?:abort|blur|change|click|composition(?:end|start|update)|dblclick|error|focus(?:in|out)?|key(?:down|up)|load|mouse(?:down|enter|leave|move|out|over|up)|reset|resize|scroll|select|slotchange|submit|unload|wheel)/.source,"javascript")),xe.languages.js=xe.languages.javascript,function(ot){var _r=/#(?!\{).+/,cr={pattern:/#\{[^}]+\}/,alias:"variable"};ot.languages.coffeescript=ot.languages.extend("javascript",{comment:_r,string:[{pattern:/'(?:\\[\s\S]|[^\\'])*'/,greedy:!0},{pattern:/"(?:\\[\s\S]|[^\\"])*"/,greedy:!0,inside:{interpolation:cr}}],keyword:/\b(?:and|break|by|catch|class|continue|debugger|delete|do|each|else|extend|extends|false|finally|for|if|in|instanceof|is|isnt|let|loop|namespace|new|no|not|null|of|off|on|or|own|return|super|switch|then|this|throw|true|try|typeof|undefined|unless|until|when|while|window|with|yes|yield)\b/,"class-member":{pattern:/@(?!\d)\w+/,alias:"variable"}}),ot.languages.insertBefore("coffeescript","comment",{"multiline-comment":{pattern:/###[\s\S]+?###/,alias:"comment"},"block-regex":{pattern:/\/{3}[\s\S]*?\/{3}/,alias:"regex",inside:{comment:_r,interpolation:cr}}}),ot.languages.insertBefore("coffeescript","string",{"inline-javascript":{pattern:/`(?:\\[\s\S]|[^\\`])*`/,inside:{delimiter:{pattern:/^`|`$/,alias:"punctuation"},script:{pattern:/[\s\S]+/,alias:"language-javascript",inside:ot.languages.javascript}}},"multiline-string":[{pattern:/'''[\s\S]*?'''/,greedy:!0,alias:"string"},{pattern:/"""[\s\S]*?"""/,greedy:!0,alias:"string",inside:{interpolation:cr}}]}),ot.languages.insertBefore("coffeescript","keyword",{property:/(?!\d)\w+(?=\s*:(?!:))/}),delete ot.languages.coffeescript["template-string"],ot.languages.coffee=ot.languages.coffeescript}(xe),function(ot){var _r=/[*&][^\s[\]{},]+/,cr=/!(?:<[\w\-%#;/?:@&=+$,.!~*'()[\]]+>|(?:[a-zA-Z\d-]*!)?[\w\-%#;/?:@&=+$.~*'()]+)?/,Vr="(?:"+cr.source+"(?:[ 	]+"+_r.source+")?|"+_r.source+"(?:[ 	]+"+cr.source+")?)",Qn=/(?:[^\s\x00-\x08\x0e-\x1f!"#%&'*,\-:>?@[\]`{|}\x7f-\x84\x86-\x9f\ud800-\udfff\ufffe\uffff]|[?:-]<PLAIN>)(?:[ \t]*(?:(?![#:])<PLAIN>|:<PLAIN>))*/.source.replace(/<PLAIN>/g,function(){return/[^\s\x00-\x08\x0e-\x1f,[\]{}\x7f-\x84\x86-\x9f\ud800-\udfff\ufffe\uffff]/.source}),mn=/"(?:[^"\\\r\n]|\\.)*"|'(?:[^'\\\r\n]|\\.)*'/.source;function _n(Yr,Fr){Fr=(Fr||"").replace(/m/g,"")+"m";var kr=/([:\-,[{]\s*(?:\s<<prop>>[ \t]+)?)(?:<<value>>)(?=[ \t]*(?:$|,|\]|\}|(?:[\r\n]\s*)?#))/.source.replace(/<<prop>>/g,function(){return Vr}).replace(/<<value>>/g,function(){return Yr});return RegExp(kr,Fr)}ot.languages.yaml={scalar:{pattern:RegExp(/([\-:]\s*(?:\s<<prop>>[ \t]+)?[|>])[ \t]*(?:((?:\r?\n|\r)[ \t]+)\S[^\r\n]*(?:\2[^\r\n]+)*)/.source.replace(/<<prop>>/g,function(){return Vr})),lookbehind:!0,alias:"string"},comment:/#.*/,key:{pattern:RegExp(/((?:^|[:\-,[{\r\n?])[ \t]*(?:<<prop>>[ \t]+)?)<<key>>(?=\s*:\s)/.source.replace(/<<prop>>/g,function(){return Vr}).replace(/<<key>>/g,function(){return"(?:"+Qn+"|"+mn+")"})),lookbehind:!0,greedy:!0,alias:"atrule"},directive:{pattern:/(^[ \t]*)%.+/m,lookbehind:!0,alias:"important"},datetime:{pattern:_n(/\d{4}-\d\d?-\d\d?(?:[tT]|[ \t]+)\d\d?:\d{2}:\d{2}(?:\.\d*)?(?:[ \t]*(?:Z|[-+]\d\d?(?::\d{2})?))?|\d{4}-\d{2}-\d{2}|\d\d?:\d{2}(?::\d{2}(?:\.\d*)?)?/.source),lookbehind:!0,alias:"number"},boolean:{pattern:_n(/false|true/.source,"i"),lookbehind:!0,alias:"important"},null:{pattern:_n(/null|~/.source,"i"),lookbehind:!0,alias:"important"},string:{pattern:_n(mn),lookbehind:!0,greedy:!0},number:{pattern:_n(/[+-]?(?:0x[\da-f]+|0o[0-7]+|(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?|\.inf|\.nan)/.source,"i"),lookbehind:!0},tag:cr,important:_r,punctuation:/---|[:[\]{}\-,|>?]|\.\.\./},ot.languages.yml=ot.languages.yaml}(xe),function(ot){var _r=/(?:\\.|[^\\\n\r]|(?:\n|\r\n?)(?![\r\n]))/.source;function cr(ft){return ft=ft.replace(/<inner>/g,function(){return _r}),RegExp(/((?:^|[^\\])(?:\\{2})*)/.source+"(?:"+ft+")")}var Vr=/(?:\\.|``(?:[^`\r\n]|`(?!`))+``|`[^`\r\n]+`|[^\\|\r\n`])+/.source,Qn=/\|?__(?:\|__)+\|?(?:(?:\n|\r\n?)|(?![\s\S]))/.source.replace(/__/g,function(){return Vr}),mn=/\|?[ \t]*:?-{3,}:?[ \t]*(?:\|[ \t]*:?-{3,}:?[ \t]*)+\|?(?:\n|\r\n?)/.source;ot.languages.markdown=ot.languages.extend("markup",{}),ot.languages.insertBefore("markdown","prolog",{"front-matter-block":{pattern:/(^(?:\s*[\r\n])?)---(?!.)[\s\S]*?[\r\n]---(?!.)/,lookbehind:!0,greedy:!0,inside:{punctuation:/^---|---$/,"front-matter":{pattern:/\S+(?:\s+\S+)*/,alias:["yaml","language-yaml"],inside:ot.languages.yaml}}},blockquote:{pattern:/^>(?:[\t ]*>)*/m,alias:"punctuation"},table:{pattern:RegExp("^"+Qn+mn+"(?:"+Qn+")*","m"),inside:{"table-data-rows":{pattern:RegExp("^("+Qn+mn+")(?:"+Qn+")*$"),lookbehind:!0,inside:{"table-data":{pattern:RegExp(Vr),inside:ot.languages.markdown},punctuation:/\|/}},"table-line":{pattern:RegExp("^("+Qn+")"+mn+"$"),lookbehind:!0,inside:{punctuation:/\||:?-{3,}:?/}},"table-header-row":{pattern:RegExp("^"+Qn+"$"),inside:{"table-header":{pattern:RegExp(Vr),alias:"important",inside:ot.languages.markdown},punctuation:/\|/}}}},code:[{pattern:/((?:^|\n)[ \t]*\n|(?:^|\r\n?)[ \t]*\r\n?)(?: {4}|\t).+(?:(?:\n|\r\n?)(?: {4}|\t).+)*/,lookbehind:!0,alias:"keyword"},{pattern:/^```[\s\S]*?^```$/m,greedy:!0,inside:{"code-block":{pattern:/^(```.*(?:\n|\r\n?))[\s\S]+?(?=(?:\n|\r\n?)^```$)/m,lookbehind:!0},"code-language":{pattern:/^(```).+/,lookbehind:!0},punctuation:/```/}}],title:[{pattern:/\S.*(?:\n|\r\n?)(?:==+|--+)(?=[ \t]*$)/m,alias:"important",inside:{punctuation:/==+$|--+$/}},{pattern:/(^\s*)#.+/m,lookbehind:!0,alias:"important",inside:{punctuation:/^#+|#+$/}}],hr:{pattern:/(^\s*)([*-])(?:[\t ]*\2){2,}(?=\s*$)/m,lookbehind:!0,alias:"punctuation"},list:{pattern:/(^\s*)(?:[*+-]|\d+\.)(?=[\t ].)/m,lookbehind:!0,alias:"punctuation"},"url-reference":{pattern:/!?\[[^\]]+\]:[\t ]+(?:\S+|<(?:\\.|[^>\\])+>)(?:[\t ]+(?:"(?:\\.|[^"\\])*"|'(?:\\.|[^'\\])*'|\((?:\\.|[^)\\])*\)))?/,inside:{variable:{pattern:/^(!?\[)[^\]]+/,lookbehind:!0},string:/(?:"(?:\\.|[^"\\])*"|'(?:\\.|[^'\\])*'|\((?:\\.|[^)\\])*\))$/,punctuation:/^[\[\]!:]|[<>]/},alias:"url"},bold:{pattern:cr(/\b__(?:(?!_)<inner>|_(?:(?!_)<inner>)+_)+__\b|\*\*(?:(?!\*)<inner>|\*(?:(?!\*)<inner>)+\*)+\*\*/.source),lookbehind:!0,greedy:!0,inside:{content:{pattern:/(^..)[\s\S]+(?=..$)/,lookbehind:!0,inside:{}},punctuation:/\*\*|__/}},italic:{pattern:cr(/\b_(?:(?!_)<inner>|__(?:(?!_)<inner>)+__)+_\b|\*(?:(?!\*)<inner>|\*\*(?:(?!\*)<inner>)+\*\*)+\*/.source),lookbehind:!0,greedy:!0,inside:{content:{pattern:/(^.)[\s\S]+(?=.$)/,lookbehind:!0,inside:{}},punctuation:/[*_]/}},strike:{pattern:cr(/(~~?)(?:(?!~)<inner>)+\2/.source),lookbehind:!0,greedy:!0,inside:{content:{pattern:/(^~~?)[\s\S]+(?=\1$)/,lookbehind:!0,inside:{}},punctuation:/~~?/}},"code-snippet":{pattern:/(^|[^\\`])(?:``[^`\r\n]+(?:`[^`\r\n]+)*``(?!`)|`[^`\r\n]+`(?!`))/,lookbehind:!0,greedy:!0,alias:["code","keyword"]},url:{pattern:cr(/!?\[(?:(?!\])<inner>)+\](?:\([^\s)]+(?:[\t ]+"(?:\\.|[^"\\])*")?\)|[ \t]?\[(?:(?!\])<inner>)+\])/.source),lookbehind:!0,greedy:!0,inside:{operator:/^!/,content:{pattern:/(^\[)[^\]]+(?=\])/,lookbehind:!0,inside:{}},variable:{pattern:/(^\][ \t]?\[)[^\]]+(?=\]$)/,lookbehind:!0},url:{pattern:/(^\]\()[^\s)]+/,lookbehind:!0},string:{pattern:/(^[ \t]+)"(?:\\.|[^"\\])*"(?=\)$)/,lookbehind:!0}}}}),["url","bold","italic","strike"].forEach(function(ft){["url","bold","italic","strike","code-snippet"].forEach(function(me){ft!==me&&(ot.languages.markdown[ft].inside.content.inside[me]=ot.languages.markdown[me])})}),ot.hooks.add("after-tokenize",function(ft){if(ft.language!=="markdown"&&ft.language!=="md")return;function me(ne){if(!(!ne||typeof ne=="string"))for(var fe=0,Q=ne.length;fe<Q;fe++){var De=ne[fe];if(De.type!=="code"){me(De.content);continue}var dt=De.content[1],Jt=De.content[3];if(dt&&Jt&&dt.type==="code-language"&&Jt.type==="code-block"&&typeof dt.content=="string"){var it=dt.content.replace(/\b#/g,"sharp").replace(/\b\+\+/g,"pp");it=(/[a-z][\w-]*/i.exec(it)||[""])[0].toLowerCase();var lt="language-"+it;Jt.alias?typeof Jt.alias=="string"?Jt.alias=[Jt.alias,lt]:Jt.alias.push(lt):Jt.alias=[lt]}}}me(ft.tokens)}),ot.hooks.add("wrap",function(ft){if(ft.type==="code-block"){for(var me="",ne=0,fe=ft.classes.length;ne<fe;ne++){var Q=ft.classes[ne],De=/language-(.+)/.exec(Q);if(De){me=De[1];break}}var dt=ot.languages[me];if(dt)ft.content=ot.highlight(kr(ft.content),dt,me);else if(me&&me!=="none"&&ot.plugins.autoloader){var Jt="md-"+new Date().valueOf()+"-"+Math.floor(Math.random()*1e16);ft.attributes.id=Jt,ot.plugins.autoloader.loadLanguages(me,function(){var it=document.getElementById(Jt);it&&(it.innerHTML=ot.highlight(it.textContent,ot.languages[me],me))})}}});var _n=RegExp(ot.languages.markup.tag.pattern.source,"gi"),Yr={amp:"&",lt:"<",gt:">",quot:'"'},Fr=String.fromCodePoint||String.fromCharCode;function kr(ft){var me=ft.replace(_n,"");return me=me.replace(/&(\w{1,8}|#x?[\da-f]{1,8});/gi,function(ne,fe){if(fe=fe.toLowerCase(),fe[0]==="#"){var Q;return fe[1]==="x"?Q=parseInt(fe.slice(2),16):Q=Number(fe.slice(1)),Fr(Q)}else{var De=Yr[fe];return De||ne}}),me}ot.languages.md=ot.languages.markdown}(xe),xe.languages.graphql={comment:/#.*/,description:{pattern:/(?:"""(?:[^"]|(?!""")")*"""|"(?:\\.|[^\\"\r\n])*")(?=\s*[a-z_])/i,greedy:!0,alias:"string",inside:{"language-markdown":{pattern:/(^"(?:"")?)(?!\1)[\s\S]+(?=\1$)/,lookbehind:!0,inside:xe.languages.markdown}}},string:{pattern:/"""(?:[^"]|(?!""")")*"""|"(?:\\.|[^\\"\r\n])*"/,greedy:!0},number:/(?:\B-|\b)\d+(?:\.\d+)?(?:e[+-]?\d+)?\b/i,boolean:/\b(?:false|true)\b/,variable:/\$[a-z_]\w*/i,directive:{pattern:/@[a-z_]\w*/i,alias:"function"},"attr-name":{pattern:/\b[a-z_]\w*(?=\s*(?:\((?:[^()"]|"(?:\\.|[^\\"\r\n])*")*\))?:)/i,greedy:!0},"atom-input":{pattern:/\b[A-Z]\w*Input\b/,alias:"class-name"},scalar:/\b(?:Boolean|Float|ID|Int|String)\b/,constant:/\b[A-Z][A-Z_\d]*\b/,"class-name":{pattern:/(\b(?:enum|implements|interface|on|scalar|type|union)\s+|&\s*|:\s*|\[)[A-Z_]\w*/,lookbehind:!0},fragment:{pattern:/(\bfragment\s+|\.{3}\s*(?!on\b))[a-zA-Z_]\w*/,lookbehind:!0,alias:"function"},"definition-mutation":{pattern:/(\bmutation\s+)[a-zA-Z_]\w*/,lookbehind:!0,alias:"function"},"definition-query":{pattern:/(\bquery\s+)[a-zA-Z_]\w*/,lookbehind:!0,alias:"function"},keyword:/\b(?:directive|enum|extend|fragment|implements|input|interface|mutation|on|query|repeatable|scalar|schema|subscription|type|union)\b/,operator:/[!=|&]|\.{3}/,"property-query":/\w+(?=\s*\()/,object:/\w+(?=\s*\{)/,punctuation:/[!(){}\[\]:=,]/,property:/\w+/},xe.hooks.add("after-tokenize",function(_r){if(_r.language!=="graphql")return;var cr=_r.tokens.filter(function(De){return typeof De!="string"&&De.type!=="comment"&&De.type!=="scalar"}),Vr=0;function Qn(De){return cr[Vr+De]}function mn(De,dt){dt=dt||0;for(var Jt=0;Jt<De.length;Jt++){var it=Qn(Jt+dt);if(!it||it.type!==De[Jt])return!1}return!0}function _n(De,dt){for(var Jt=1,it=Vr;it<cr.length;it++){var lt=cr[it],qt=lt.content;if(lt.type==="punctuation"&&typeof qt=="string"){if(De.test(qt))Jt++;else if(dt.test(qt)&&(Jt--,Jt===0))return it}}return-1}function Yr(De,dt){var Jt=De.alias;Jt?Array.isArray(Jt)||(De.alias=Jt=[Jt]):De.alias=Jt=[],Jt.push(dt)}for(;Vr<cr.length;){var Fr=cr[Vr++];if(Fr.type==="keyword"&&Fr.content==="mutation"){var kr=[];if(mn(["definition-mutation","punctuation"])&&Qn(1).content==="("){Vr+=2;var ft=_n(/^\($/,/^\)$/);if(ft===-1)continue;for(;Vr<ft;Vr++){var me=Qn(0);me.type==="variable"&&(Yr(me,"variable-input"),kr.push(me.content))}Vr=ft+1}if(mn(["punctuation","property-query"])&&Qn(0).content==="{"&&(Vr++,Yr(Qn(0),"property-mutation"),kr.length>0)){var ne=_n(/^\{$/,/^\}$/);if(ne===-1)continue;for(var fe=Vr;fe<ne;fe++){var Q=cr[fe];Q.type==="variable"&&kr.indexOf(Q.content)>=0&&Yr(Q,"variable-input")}}}}}),xe.languages.sql={comment:{pattern:/(^|[^\\])(?:\/\*[\s\S]*?\*\/|(?:--|\/\/|#).*)/,lookbehind:!0},variable:[{pattern:/@(["'`])(?:\\[\s\S]|(?!\1)[^\\])+\1/,greedy:!0},/@[\w.$]+/],string:{pattern:/(^|[^@\\])("|')(?:\\[\s\S]|(?!\2)[^\\]|\2\2)*\2/,greedy:!0,lookbehind:!0},identifier:{pattern:/(^|[^@\\])`(?:\\[\s\S]|[^`\\]|``)*`/,greedy:!0,lookbehind:!0,inside:{punctuation:/^`|`$/}},function:/\b(?:AVG|COUNT|FIRST|FORMAT|LAST|LCASE|LEN|MAX|MID|MIN|MOD|NOW|ROUND|SUM|UCASE)(?=\s*\()/i,keyword:/\b(?:ACTION|ADD|AFTER|ALGORITHM|ALL|ALTER|ANALYZE|ANY|APPLY|AS|ASC|AUTHORIZATION|AUTO_INCREMENT|BACKUP|BDB|BEGIN|BERKELEYDB|BIGINT|BINARY|BIT|BLOB|BOOL|BOOLEAN|BREAK|BROWSE|BTREE|BULK|BY|CALL|CASCADED?|CASE|CHAIN|CHAR(?:ACTER|SET)?|CHECK(?:POINT)?|CLOSE|CLUSTERED|COALESCE|COLLATE|COLUMNS?|COMMENT|COMMIT(?:TED)?|COMPUTE|CONNECT|CONSISTENT|CONSTRAINT|CONTAINS(?:TABLE)?|CONTINUE|CONVERT|CREATE|CROSS|CURRENT(?:_DATE|_TIME|_TIMESTAMP|_USER)?|CURSOR|CYCLE|DATA(?:BASES?)?|DATE(?:TIME)?|DAY|DBCC|DEALLOCATE|DEC|DECIMAL|DECLARE|DEFAULT|DEFINER|DELAYED|DELETE|DELIMITERS?|DENY|DESC|DESCRIBE|DETERMINISTIC|DISABLE|DISCARD|DISK|DISTINCT|DISTINCTROW|DISTRIBUTED|DO|DOUBLE|DROP|DUMMY|DUMP(?:FILE)?|DUPLICATE|ELSE(?:IF)?|ENABLE|ENCLOSED|END|ENGINE|ENUM|ERRLVL|ERRORS|ESCAPED?|EXCEPT|EXEC(?:UTE)?|EXISTS|EXIT|EXPLAIN|EXTENDED|FETCH|FIELDS|FILE|FILLFACTOR|FIRST|FIXED|FLOAT|FOLLOWING|FOR(?: EACH ROW)?|FORCE|FOREIGN|FREETEXT(?:TABLE)?|FROM|FULL|FUNCTION|GEOMETRY(?:COLLECTION)?|GLOBAL|GOTO|GRANT|GROUP|HANDLER|HASH|HAVING|HOLDLOCK|HOUR|IDENTITY(?:COL|_INSERT)?|IF|IGNORE|IMPORT|INDEX|INFILE|INNER|INNODB|INOUT|INSERT|INT|INTEGER|INTERSECT|INTERVAL|INTO|INVOKER|ISOLATION|ITERATE|JOIN|KEYS?|KILL|LANGUAGE|LAST|LEAVE|LEFT|LEVEL|LIMIT|LINENO|LINES|LINESTRING|LOAD|LOCAL|LOCK|LONG(?:BLOB|TEXT)|LOOP|MATCH(?:ED)?|MEDIUM(?:BLOB|INT|TEXT)|MERGE|MIDDLEINT|MINUTE|MODE|MODIFIES|MODIFY|MONTH|MULTI(?:LINESTRING|POINT|POLYGON)|NATIONAL|NATURAL|NCHAR|NEXT|NO|NONCLUSTERED|NULLIF|NUMERIC|OFF?|OFFSETS?|ON|OPEN(?:DATASOURCE|QUERY|ROWSET)?|OPTIMIZE|OPTION(?:ALLY)?|ORDER|OUT(?:ER|FILE)?|OVER|PARTIAL|PARTITION|PERCENT|PIVOT|PLAN|POINT|POLYGON|PRECEDING|PRECISION|PREPARE|PREV|PRIMARY|PRINT|PRIVILEGES|PROC(?:EDURE)?|PUBLIC|PURGE|QUICK|RAISERROR|READS?|REAL|RECONFIGURE|REFERENCES|RELEASE|RENAME|REPEAT(?:ABLE)?|REPLACE|REPLICATION|REQUIRE|RESIGNAL|RESTORE|RESTRICT|RETURN(?:ING|S)?|REVOKE|RIGHT|ROLLBACK|ROUTINE|ROW(?:COUNT|GUIDCOL|S)?|RTREE|RULE|SAVE(?:POINT)?|SCHEMA|SECOND|SELECT|SERIAL(?:IZABLE)?|SESSION(?:_USER)?|SET(?:USER)?|SHARE|SHOW|SHUTDOWN|SIMPLE|SMALLINT|SNAPSHOT|SOME|SONAME|SQL|START(?:ING)?|STATISTICS|STATUS|STRIPED|SYSTEM_USER|TABLES?|TABLESPACE|TEMP(?:ORARY|TABLE)?|TERMINATED|TEXT(?:SIZE)?|THEN|TIME(?:STAMP)?|TINY(?:BLOB|INT|TEXT)|TOP?|TRAN(?:SACTIONS?)?|TRIGGER|TRUNCATE|TSEQUAL|TYPES?|UNBOUNDED|UNCOMMITTED|UNDEFINED|UNION|UNIQUE|UNLOCK|UNPIVOT|UNSIGNED|UPDATE(?:TEXT)?|USAGE|USE|USER|USING|VALUES?|VAR(?:BINARY|CHAR|CHARACTER|YING)|VIEW|WAITFOR|WARNINGS|WHEN|WHERE|WHILE|WITH(?: ROLLUP|IN)?|WORK|WRITE(?:TEXT)?|YEAR)\b/i,boolean:/\b(?:FALSE|NULL|TRUE)\b/i,number:/\b0x[\da-f]+\b|\b\d+(?:\.\d*)?|\B\.\d+\b/i,operator:/[-+*\/=%^~]|&&?|\|\|?|!=?|<(?:=>?|<|>)?|>[>=]?|\b(?:AND|BETWEEN|DIV|ILIKE|IN|IS|LIKE|NOT|OR|REGEXP|RLIKE|SOUNDS LIKE|XOR)\b/i,punctuation:/[;[\]()`,.]/},function(ot){var _r=ot.languages.javascript["template-string"],cr=_r.pattern.source,Vr=_r.inside.interpolation,Qn=Vr.inside["interpolation-punctuation"],mn=Vr.pattern.source;function _n(fe,Q){if(!!ot.languages[fe])return{pattern:RegExp("((?:"+Q+")\\s*)"+cr),lookbehind:!0,greedy:!0,inside:{"template-punctuation":{pattern:/^`|`$/,alias:"string"},"embedded-code":{pattern:/[\s\S]+/,alias:fe}}}}ot.languages.javascript["template-string"]=[_n("css",/\b(?:styled(?:\([^)]*\))?(?:\s*\.\s*\w+(?:\([^)]*\))*)*|css(?:\s*\.\s*(?:global|resolve))?|createGlobalStyle|keyframes)/.source),_n("html",/\bhtml|\.\s*(?:inner|outer)HTML\s*\+?=/.source),_n("svg",/\bsvg/.source),_n("markdown",/\b(?:markdown|md)/.source),_n("graphql",/\b(?:gql|graphql(?:\s*\.\s*experimental)?)/.source),_n("sql",/\bsql/.source),_r].filter(Boolean);function Yr(fe,Q){return"___"+Q.toUpperCase()+"_"+fe+"___"}function Fr(fe,Q,De){var dt={code:fe,grammar:Q,language:De};return ot.hooks.run("before-tokenize",dt),dt.tokens=ot.tokenize(dt.code,dt.grammar),ot.hooks.run("after-tokenize",dt),dt.tokens}function kr(fe){var Q={};Q["interpolation-punctuation"]=Qn;var De=ot.tokenize(fe,Q);if(De.length===3){var dt=[1,1];dt.push.apply(dt,Fr(De[1],ot.languages.javascript,"javascript")),De.splice.apply(De,dt)}return new ot.Token("interpolation",De,Vr.alias,fe)}function ft(fe,Q,De){var dt=ot.tokenize(fe,{interpolation:{pattern:RegExp(mn),lookbehind:!0}}),Jt=0,it={},lt=dt.map(function(Xr){if(typeof Xr=="string")return Xr;for(var ce=Xr.content,xt;fe.indexOf(xt=Yr(Jt++,De))!==-1;);return it[xt]=ce,xt}).join(""),qt=Fr(lt,Q,De),pr=Object.keys(it);Jt=0;function Hr(Xr){for(var ce=0;ce<Xr.length;ce++){if(Jt>=pr.length)return;var xt=Xr[ce];if(typeof xt=="string"||typeof xt.content=="string"){var Gt=pr[Jt],Ir=typeof xt=="string"?xt:xt.content,nn=Ir.indexOf(Gt);if(nn!==-1){++Jt;var zi=Ir.substring(0,nn),Ui=kr(it[Gt]),Pi=Ir.substring(nn+Gt.length),ka=[];if(zi&&ka.push(zi),ka.push(Ui),Pi){var Ti=[Pi];Hr(Ti),ka.push.apply(ka,Ti)}typeof xt=="string"?(Xr.splice.apply(Xr,[ce,1].concat(ka)),ce+=ka.length-1):xt.content=ka}}else{var Ge=xt.content;Array.isArray(Ge)?Hr(Ge):Hr([Ge])}}}return Hr(qt),new ot.Token(De,qt,"language-"+De,fe)}var me={javascript:!0,js:!0,typescript:!0,ts:!0,jsx:!0,tsx:!0};ot.hooks.add("after-tokenize",function(fe){if(!(fe.language in me))return;function Q(De){for(var dt=0,Jt=De.length;dt<Jt;dt++){var it=De[dt];if(typeof it!="string"){var lt=it.content;if(!Array.isArray(lt)){typeof lt!="string"&&Q([lt]);continue}if(it.type==="template-string"){var qt=lt[1];if(lt.length===3&&typeof qt!="string"&&qt.type==="embedded-code"){var pr=ne(qt),Hr=qt.alias,Xr=Array.isArray(Hr)?Hr[0]:Hr,ce=ot.languages[Xr];if(!ce)continue;lt[1]=ft(pr,ce,Xr)}}else Q(lt)}}}Q(fe.tokens)});function ne(fe){return typeof fe=="string"?fe:Array.isArray(fe)?fe.map(ne).join(""):ne(fe.content)}}(xe),function(ot){ot.languages.typescript=ot.languages.extend("javascript",{"class-name":{pattern:/(\b(?:class|extends|implements|instanceof|interface|new|type)\s+)(?!keyof\b)(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?:\s*<(?:[^<>]|<(?:[^<>]|<[^<>]*>)*>)*>)?/,lookbehind:!0,greedy:!0,inside:null},builtin:/\b(?:Array|Function|Promise|any|boolean|console|never|number|string|symbol|unknown)\b/}),ot.languages.typescript.keyword.push(/\b(?:abstract|declare|is|keyof|readonly|require)\b/,/\b(?:asserts|infer|interface|module|namespace|type)\b(?=\s*(?:[{_$a-zA-Z\xA0-\uFFFF]|$))/,/\btype\b(?=\s*(?:[\{*]|$))/),delete ot.languages.typescript.parameter,delete ot.languages.typescript["literal-property"];var _r=ot.languages.extend("typescript",{});delete _r["class-name"],ot.languages.typescript["class-name"].inside=_r,ot.languages.insertBefore("typescript","function",{decorator:{pattern:/@[$\w\xA0-\uFFFF]+/,inside:{at:{pattern:/^@/,alias:"operator"},function:/^[\s\S]+/}},"generic-function":{pattern:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*\s*<(?:[^<>]|<(?:[^<>]|<[^<>]*>)*>)*>(?=\s*\()/,greedy:!0,inside:{function:/^#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*/,generic:{pattern:/<[\s\S]+/,alias:"class-name",inside:_r}}}}),ot.languages.ts=ot.languages.typescript}(xe),function(ot){ot.languages.insertBefore("javascript","function-variable",{"method-variable":{pattern:RegExp("(\\.\\s*)"+ot.languages.javascript["function-variable"].pattern.source),lookbehind:!0,alias:["function-variable","method","function","property-access"]}}),ot.languages.insertBefore("javascript","function",{method:{pattern:RegExp("(\\.\\s*)"+ot.languages.javascript.function.source),lookbehind:!0,alias:["function","property-access"]}}),ot.languages.insertBefore("javascript","constant",{"known-class-name":[{pattern:/\b(?:(?:Float(?:32|64)|(?:Int|Uint)(?:8|16|32)|Uint8Clamped)?Array|ArrayBuffer|BigInt|Boolean|DataView|Date|Error|Function|Intl|JSON|(?:Weak)?(?:Map|Set)|Math|Number|Object|Promise|Proxy|Reflect|RegExp|String|Symbol|WebAssembly)\b/,alias:"class-name"},{pattern:/\b(?:[A-Z]\w*)Error\b/,alias:"class-name"}]});function _r(Yr,Fr){return RegExp(Yr.replace(/<ID>/g,function(){return/(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*/.source}),Fr)}ot.languages.insertBefore("javascript","keyword",{imports:{pattern:_r(/(\bimport\b\s*)(?:<ID>(?:\s*,\s*(?:\*\s*as\s+<ID>|\{[^{}]*\}))?|\*\s*as\s+<ID>|\{[^{}]*\})(?=\s*\bfrom\b)/.source),lookbehind:!0,inside:ot.languages.javascript},exports:{pattern:_r(/(\bexport\b\s*)(?:\*(?:\s*as\s+<ID>)?(?=\s*\bfrom\b)|\{[^{}]*\})/.source),lookbehind:!0,inside:ot.languages.javascript}}),ot.languages.javascript.keyword.unshift({pattern:/\b(?:as|default|export|from|import)\b/,alias:"module"},{pattern:/\b(?:await|break|catch|continue|do|else|finally|for|if|return|switch|throw|try|while|yield)\b/,alias:"control-flow"},{pattern:/\bnull\b/,alias:["null","nil"]},{pattern:/\bundefined\b/,alias:"nil"}),ot.languages.insertBefore("javascript","operator",{spread:{pattern:/\.{3}/,alias:"operator"},arrow:{pattern:/=>/,alias:"operator"}}),ot.languages.insertBefore("javascript","punctuation",{"property-access":{pattern:_r(/(\.\s*)#?<ID>/.source),lookbehind:!0},"maybe-class-name":{pattern:/(^|[^$\w\xA0-\uFFFF])[A-Z][$\w\xA0-\uFFFF]+/,lookbehind:!0},dom:{pattern:/\b(?:document|(?:local|session)Storage|location|navigator|performance|window)\b/,alias:"variable"},console:{pattern:/\bconsole(?=\s*\.)/,alias:"class-name"}});for(var cr=["function","function-variable","method","method-variable","property-access"],Vr=0;Vr<cr.length;Vr++){var Qn=cr[Vr],mn=ot.languages.javascript[Qn];ot.util.type(mn)==="RegExp"&&(mn=ot.languages.javascript[Qn]={pattern:mn});var _n=mn.inside||{};mn.inside=_n,_n["maybe-class-name"]=/^[A-Z][\s\S]*/}}(xe),function(ot){var _r=ot.util.clone(ot.languages.javascript),cr=/(?:\s|\/\/.*(?!.)|\/\*(?:[^*]|\*(?!\/))\*\/)/.source,Vr=/(?:\{(?:\{(?:\{[^{}]*\}|[^{}])*\}|[^{}])*\})/.source,Qn=/(?:\{<S>*\.{3}(?:[^{}]|<BRACES>)*\})/.source;function mn(Fr,kr){return Fr=Fr.replace(/<S>/g,function(){return cr}).replace(/<BRACES>/g,function(){return Vr}).replace(/<SPREAD>/g,function(){return Qn}),RegExp(Fr,kr)}Qn=mn(Qn).source,ot.languages.jsx=ot.languages.extend("markup",_r),ot.languages.jsx.tag.pattern=mn(/<\/?(?:[\w.:-]+(?:<S>+(?:[\w.:$-]+(?:=(?:"(?:\\[\s\S]|[^\\"])*"|'(?:\\[\s\S]|[^\\'])*'|[^\s{'"/>=]+|<BRACES>))?|<SPREAD>))*<S>*\/?)?>/.source),ot.languages.jsx.tag.inside.tag.pattern=/^<\/?[^\s>\/]*/,ot.languages.jsx.tag.inside["attr-value"].pattern=/=(?!\{)(?:"(?:\\[\s\S]|[^\\"])*"|'(?:\\[\s\S]|[^\\'])*'|[^\s'">]+)/,ot.languages.jsx.tag.inside.tag.inside["class-name"]=/^[A-Z]\w*(?:\.[A-Z]\w*)*$/,ot.languages.jsx.tag.inside.comment=_r.comment,ot.languages.insertBefore("inside","attr-name",{spread:{pattern:mn(/<SPREAD>/.source),inside:ot.languages.jsx}},ot.languages.jsx.tag),ot.languages.insertBefore("inside","special-attr",{script:{pattern:mn(/=<BRACES>/.source),alias:"language-javascript",inside:{"script-punctuation":{pattern:/^=(?=\{)/,alias:"punctuation"},rest:ot.languages.jsx}}},ot.languages.jsx.tag);var _n=function(Fr){return Fr?typeof Fr=="string"?Fr:typeof Fr.content=="string"?Fr.content:Fr.content.map(_n).join(""):""},Yr=function(Fr){for(var kr=[],ft=0;ft<Fr.length;ft++){var me=Fr[ft],ne=!1;if(typeof me!="string"&&(me.type==="tag"&&me.content[0]&&me.content[0].type==="tag"?me.content[0].content[0].content==="</"?kr.length>0&&kr[kr.length-1].tagName===_n(me.content[0].content[1])&&kr.pop():me.content[me.content.length-1].content==="/>"||kr.push({tagName:_n(me.content[0].content[1]),openedBraces:0}):kr.length>0&&me.type==="punctuation"&&me.content==="{"?kr[kr.length-1].openedBraces++:kr.length>0&&kr[kr.length-1].openedBraces>0&&me.type==="punctuation"&&me.content==="}"?kr[kr.length-1].openedBraces--:ne=!0),(ne||typeof me=="string")&&kr.length>0&&kr[kr.length-1].openedBraces===0){var fe=_n(me);ft<Fr.length-1&&(typeof Fr[ft+1]=="string"||Fr[ft+1].type==="plain-text")&&(fe+=_n(Fr[ft+1]),Fr.splice(ft+1,1)),ft>0&&(typeof Fr[ft-1]=="string"||Fr[ft-1].type==="plain-text")&&(fe=_n(Fr[ft-1])+fe,Fr.splice(ft-1,1),ft--),Fr[ft]=new ot.Token("plain-text",fe,null,fe)}me.content&&typeof me.content!="string"&&Yr(me.content)}};ot.hooks.add("after-tokenize",function(Fr){Fr.language!=="jsx"&&Fr.language!=="tsx"||Yr(Fr.tokens)})}(xe),function(ot){ot.languages.diff={coord:[/^(?:\*{3}|-{3}|\+{3}).*$/m,/^@@.*@@$/m,/^\d.*$/m]};var _r={"deleted-sign":"-","deleted-arrow":"<","inserted-sign":"+","inserted-arrow":">",unchanged:" ",diff:"!"};Object.keys(_r).forEach(function(cr){var Vr=_r[cr],Qn=[];/^\w+$/.test(cr)||Qn.push(/\w+/.exec(cr)[0]),cr==="diff"&&Qn.push("bold"),ot.languages.diff[cr]={pattern:RegExp("^(?:["+Vr+`].*(?:\r
?|
|(?![\\s\\S])))+`,"m"),alias:Qn,inside:{line:{pattern:/(.)(?=[\s\S]).*(?:\r\n?|\n)?/,lookbehind:!0},prefix:{pattern:/[\s\S]/,alias:/\w+/.exec(cr)[0]}}}}),Object.defineProperty(ot.languages.diff,"PREFIXES",{value:_r})}(xe),xe.languages.git={comment:/^#.*/m,deleted:/^[-–].*/m,inserted:/^\+.*/m,string:/("|')(?:\\.|(?!\1)[^\\\r\n])*\1/,command:{pattern:/^.*\$ git .*$/m,inside:{parameter:/\s--?\w+/}},coord:/^@@.*@@$/m,"commit-sha1":/^commit \w{40}$/m},xe.languages.go=xe.languages.extend("clike",{string:{pattern:/(^|[^\\])"(?:\\.|[^"\\\r\n])*"|`[^`]*`/,lookbehind:!0,greedy:!0},keyword:/\b(?:break|case|chan|const|continue|default|defer|else|fallthrough|for|func|go(?:to)?|if|import|interface|map|package|range|return|select|struct|switch|type|var)\b/,boolean:/\b(?:_|false|iota|nil|true)\b/,number:[/\b0(?:b[01_]+|o[0-7_]+)i?\b/i,/\b0x(?:[a-f\d_]+(?:\.[a-f\d_]*)?|\.[a-f\d_]+)(?:p[+-]?\d+(?:_\d+)*)?i?(?!\w)/i,/(?:\b\d[\d_]*(?:\.[\d_]*)?|\B\.\d[\d_]*)(?:e[+-]?[\d_]+)?i?(?!\w)/i],operator:/[*\/%^!=]=?|\+[=+]?|-[=-]?|\|[=|]?|&(?:=|&|\^=?)?|>(?:>=?|=)?|<(?:<=?|=|-)?|:=|\.\.\./,builtin:/\b(?:append|bool|byte|cap|close|complex|complex(?:64|128)|copy|delete|error|float(?:32|64)|u?int(?:8|16|32|64)?|imag|len|make|new|panic|print(?:ln)?|real|recover|rune|string|uintptr)\b/}),xe.languages.insertBefore("go","string",{char:{pattern:/'(?:\\.|[^'\\\r\n]){0,10}'/,greedy:!0}}),delete xe.languages.go["class-name"],function(ot){function _r(cr,Vr){return"___"+cr.toUpperCase()+Vr+"___"}Object.defineProperties(ot.languages["markup-templating"]={},{buildPlaceholders:{value:function(cr,Vr,Qn,mn){if(cr.language===Vr){var _n=cr.tokenStack=[];cr.code=cr.code.replace(Qn,function(Yr){if(typeof mn=="function"&&!mn(Yr))return Yr;for(var Fr=_n.length,kr;cr.code.indexOf(kr=_r(Vr,Fr))!==-1;)++Fr;return _n[Fr]=Yr,kr}),cr.grammar=ot.languages.markup}}},tokenizePlaceholders:{value:function(cr,Vr){if(cr.language!==Vr||!cr.tokenStack)return;cr.grammar=ot.languages[Vr];var Qn=0,mn=Object.keys(cr.tokenStack);function _n(Yr){for(var Fr=0;Fr<Yr.length&&!(Qn>=mn.length);Fr++){var kr=Yr[Fr];if(typeof kr=="string"||kr.content&&typeof kr.content=="string"){var ft=mn[Qn],me=cr.tokenStack[ft],ne=typeof kr=="string"?kr:kr.content,fe=_r(Vr,ft),Q=ne.indexOf(fe);if(Q>-1){++Qn;var De=ne.substring(0,Q),dt=new ot.Token(Vr,ot.tokenize(me,cr.grammar),"language-"+Vr,me),Jt=ne.substring(Q+fe.length),it=[];De&&it.push.apply(it,_n([De])),it.push(dt),Jt&&it.push.apply(it,_n([Jt])),typeof kr=="string"?Yr.splice.apply(Yr,[Fr,1].concat(it)):kr.content=it}}else kr.content&&_n(kr.content)}return Yr}_n(cr.tokens)}}})}(xe),function(ot){ot.languages.handlebars={comment:/\{\{![\s\S]*?\}\}/,delimiter:{pattern:/^\{\{\{?|\}\}\}?$/,alias:"punctuation"},string:/(["'])(?:\\.|(?!\1)[^\\\r\n])*\1/,number:/\b0x[\dA-Fa-f]+\b|(?:\b\d+(?:\.\d*)?|\B\.\d+)(?:[Ee][+-]?\d+)?/,boolean:/\b(?:false|true)\b/,block:{pattern:/^(\s*(?:~\s*)?)[#\/]\S+?(?=\s*(?:~\s*)?$|\s)/,lookbehind:!0,alias:"keyword"},brackets:{pattern:/\[[^\]]+\]/,inside:{punctuation:/\[|\]/,variable:/[\s\S]+/}},punctuation:/[!"#%&':()*+,.\/;<=>@\[\\\]^`{|}~]/,variable:/[^!"#%&'()*+,\/;<=>@\[\\\]^`{|}~\s]+/},ot.hooks.add("before-tokenize",function(_r){var cr=/\{\{\{[\s\S]+?\}\}\}|\{\{[\s\S]+?\}\}/g;ot.languages["markup-templating"].buildPlaceholders(_r,"handlebars",cr)}),ot.hooks.add("after-tokenize",function(_r){ot.languages["markup-templating"].tokenizePlaceholders(_r,"handlebars")}),ot.languages.hbs=ot.languages.handlebars}(xe),xe.languages.json={property:{pattern:/(^|[^\\])"(?:\\.|[^\\"\r\n])*"(?=\s*:)/,lookbehind:!0,greedy:!0},string:{pattern:/(^|[^\\])"(?:\\.|[^\\"\r\n])*"(?!\s*:)/,lookbehind:!0,greedy:!0},comment:{pattern:/\/\/.*|\/\*[\s\S]*?(?:\*\/|$)/,greedy:!0},number:/-?\b\d+(?:\.\d+)?(?:e[+-]?\d+)?\b/i,punctuation:/[{}[\],]/,operator:/:/,boolean:/\b(?:false|true)\b/,null:{pattern:/\bnull\b/,alias:"keyword"}},xe.languages.webmanifest=xe.languages.json,xe.languages.less=xe.languages.extend("css",{comment:[/\/\*[\s\S]*?\*\//,{pattern:/(^|[^\\])\/\/.*/,lookbehind:!0}],atrule:{pattern:/@[\w-](?:\((?:[^(){}]|\([^(){}]*\))*\)|[^(){};\s]|\s+(?!\s))*?(?=\s*\{)/,inside:{punctuation:/[:()]/}},selector:{pattern:/(?:@\{[\w-]+\}|[^{};\s@])(?:@\{[\w-]+\}|\((?:[^(){}]|\([^(){}]*\))*\)|[^(){};@\s]|\s+(?!\s))*?(?=\s*\{)/,inside:{variable:/@+[\w-]+/}},property:/(?:@\{[\w-]+\}|[\w-])+(?:\+_?)?(?=\s*:)/,operator:/[+\-*\/]/}),xe.languages.insertBefore("less","property",{variable:[{pattern:/@[\w-]+\s*:/,inside:{punctuation:/:/}},/@@?[\w-]+/],"mixin-usage":{pattern:/([{;]\s*)[.#](?!\d)[\w-].*?(?=[(;])/,lookbehind:!0,alias:"function"}}),xe.languages.makefile={comment:{pattern:/(^|[^\\])#(?:\\(?:\r\n|[\s\S])|[^\\\r\n])*/,lookbehind:!0},string:{pattern:/(["'])(?:\\(?:\r\n|[\s\S])|(?!\1)[^\\\r\n])*\1/,greedy:!0},"builtin-target":{pattern:/\.[A-Z][^:#=\s]+(?=\s*:(?!=))/,alias:"builtin"},target:{pattern:/^(?:[^:=\s]|[ \t]+(?![\s:]))+(?=\s*:(?!=))/m,alias:"symbol",inside:{variable:/\$+(?:(?!\$)[^(){}:#=\s]+|(?=[({]))/}},variable:/\$+(?:(?!\$)[^(){}:#=\s]+|\([@*%<^+?][DF]\)|(?=[({]))/,keyword:/-include\b|\b(?:define|else|endef|endif|export|ifn?def|ifn?eq|include|override|private|sinclude|undefine|unexport|vpath)\b/,function:{pattern:/(\()(?:abspath|addsuffix|and|basename|call|dir|error|eval|file|filter(?:-out)?|findstring|firstword|flavor|foreach|guile|if|info|join|lastword|load|notdir|or|origin|patsubst|realpath|shell|sort|strip|subst|suffix|value|warning|wildcard|word(?:list|s)?)(?=[ \t])/,lookbehind:!0},operator:/(?:::|[?:+!])?=|[|@]/,punctuation:/[:;(){}]/},xe.languages.objectivec=xe.languages.extend("c",{string:{pattern:/@?"(?:\\(?:\r\n|[\s\S])|[^"\\\r\n])*"/,greedy:!0},keyword:/\b(?:asm|auto|break|case|char|const|continue|default|do|double|else|enum|extern|float|for|goto|if|in|inline|int|long|register|return|self|short|signed|sizeof|static|struct|super|switch|typedef|typeof|union|unsigned|void|volatile|while)\b|(?:@interface|@end|@implementation|@protocol|@class|@public|@protected|@private|@property|@try|@catch|@finally|@throw|@synthesize|@dynamic|@selector)\b/,operator:/-[->]?|\+\+?|!=?|<<?=?|>>?=?|==?|&&?|\|\|?|[~^%?*\/@]/}),delete xe.languages.objectivec["class-name"],xe.languages.objc=xe.languages.objectivec,xe.languages.ocaml={comment:{pattern:/\(\*[\s\S]*?\*\)/,greedy:!0},char:{pattern:/'(?:[^\\\r\n']|\\(?:.|[ox]?[0-9a-f]{1,3}))'/i,greedy:!0},string:[{pattern:/"(?:\\(?:[\s\S]|\r\n)|[^\\\r\n"])*"/,greedy:!0},{pattern:/\{([a-z_]*)\|[\s\S]*?\|\1\}/,greedy:!0}],number:[/\b(?:0b[01][01_]*|0o[0-7][0-7_]*)\b/i,/\b0x[a-f0-9][a-f0-9_]*(?:\.[a-f0-9_]*)?(?:p[+-]?\d[\d_]*)?(?!\w)/i,/\b\d[\d_]*(?:\.[\d_]*)?(?:e[+-]?\d[\d_]*)?(?!\w)/i],directive:{pattern:/\B#\w+/,alias:"property"},label:{pattern:/\B~\w+/,alias:"property"},"type-variable":{pattern:/\B'\w+/,alias:"function"},variant:{pattern:/`\w+/,alias:"symbol"},keyword:/\b(?:as|assert|begin|class|constraint|do|done|downto|else|end|exception|external|for|fun|function|functor|if|in|include|inherit|initializer|lazy|let|match|method|module|mutable|new|nonrec|object|of|open|private|rec|sig|struct|then|to|try|type|val|value|virtual|when|where|while|with)\b/,boolean:/\b(?:false|true)\b/,"operator-like-punctuation":{pattern:/\[[<>|]|[>|]\]|\{<|>\}/,alias:"punctuation"},operator:/\.[.~]|:[=>]|[=<>@^|&+\-*\/$%!?~][!$%&*+\-.\/:<=>?@^|~]*|\b(?:and|asr|land|lor|lsl|lsr|lxor|mod|or)\b/,punctuation:/;;|::|[(){}\[\].,:;#]|\b_\b/},xe.languages.python={comment:{pattern:/(^|[^\\])#.*/,lookbehind:!0,greedy:!0},"string-interpolation":{pattern:/(?:f|fr|rf)(?:("""|''')[\s\S]*?\1|("|')(?:\\.|(?!\2)[^\\\r\n])*\2)/i,greedy:!0,inside:{interpolation:{pattern:/((?:^|[^{])(?:\{\{)*)\{(?!\{)(?:[^{}]|\{(?!\{)(?:[^{}]|\{(?!\{)(?:[^{}])+\})+\})+\}/,lookbehind:!0,inside:{"format-spec":{pattern:/(:)[^:(){}]+(?=\}$)/,lookbehind:!0},"conversion-option":{pattern:/![sra](?=[:}]$)/,alias:"punctuation"},rest:null}},string:/[\s\S]+/}},"triple-quoted-string":{pattern:/(?:[rub]|br|rb)?("""|''')[\s\S]*?\1/i,greedy:!0,alias:"string"},string:{pattern:/(?:[rub]|br|rb)?("|')(?:\\.|(?!\1)[^\\\r\n])*\1/i,greedy:!0},function:{pattern:/((?:^|\s)def[ \t]+)[a-zA-Z_]\w*(?=\s*\()/g,lookbehind:!0},"class-name":{pattern:/(\bclass\s+)\w+/i,lookbehind:!0},decorator:{pattern:/(^[\t ]*)@\w+(?:\.\w+)*/m,lookbehind:!0,alias:["annotation","punctuation"],inside:{punctuation:/\./}},keyword:/\b(?:_(?=\s*:)|and|as|assert|async|await|break|case|class|continue|def|del|elif|else|except|exec|finally|for|from|global|if|import|in|is|lambda|match|nonlocal|not|or|pass|print|raise|return|try|while|with|yield)\b/,builtin:/\b(?:__import__|abs|all|any|apply|ascii|basestring|bin|bool|buffer|bytearray|bytes|callable|chr|classmethod|cmp|coerce|compile|complex|delattr|dict|dir|divmod|enumerate|eval|execfile|file|filter|float|format|frozenset|getattr|globals|hasattr|hash|help|hex|id|input|int|intern|isinstance|issubclass|iter|len|list|locals|long|map|max|memoryview|min|next|object|oct|open|ord|pow|property|range|raw_input|reduce|reload|repr|reversed|round|set|setattr|slice|sorted|staticmethod|str|sum|super|tuple|type|unichr|unicode|vars|xrange|zip)\b/,boolean:/\b(?:False|None|True)\b/,number:/\b0(?:b(?:_?[01])+|o(?:_?[0-7])+|x(?:_?[a-f0-9])+)\b|(?:\b\d+(?:_\d+)*(?:\.(?:\d+(?:_\d+)*)?)?|\B\.\d+(?:_\d+)*)(?:e[+-]?\d+(?:_\d+)*)?j?(?!\w)/i,operator:/[-+%=]=?|!=|:=|\*\*?=?|\/\/?=?|<[<=>]?|>[=>]?|[&|^~]/,punctuation:/[{}[\];(),.:]/},xe.languages.python["string-interpolation"].inside.interpolation.inside.rest=xe.languages.python,xe.languages.py=xe.languages.python,xe.languages.reason=xe.languages.extend("clike",{string:{pattern:/"(?:\\(?:\r\n|[\s\S])|[^\\\r\n"])*"/,greedy:!0},"class-name":/\b[A-Z]\w*/,keyword:/\b(?:and|as|assert|begin|class|constraint|do|done|downto|else|end|exception|external|for|fun|function|functor|if|in|include|inherit|initializer|lazy|let|method|module|mutable|new|nonrec|object|of|open|or|private|rec|sig|struct|switch|then|to|try|type|val|virtual|when|while|with)\b/,operator:/\.{3}|:[:=]|\|>|->|=(?:==?|>)?|<=?|>=?|[|^?'#!~`]|[+\-*\/]\.?|\b(?:asr|land|lor|lsl|lsr|lxor|mod)\b/}),xe.languages.insertBefore("reason","class-name",{char:{pattern:/'(?:\\x[\da-f]{2}|\\o[0-3][0-7][0-7]|\\\d{3}|\\.|[^'\\\r\n])'/,greedy:!0},constructor:/\b[A-Z]\w*\b(?!\s*\.)/,label:{pattern:/\b[a-z]\w*(?=::)/,alias:"symbol"}}),delete xe.languages.reason.function,function(ot){ot.languages.sass=ot.languages.extend("css",{comment:{pattern:/^([ \t]*)\/[\/*].*(?:(?:\r?\n|\r)\1[ \t].+)*/m,lookbehind:!0,greedy:!0}}),ot.languages.insertBefore("sass","atrule",{"atrule-line":{pattern:/^(?:[ \t]*)[@+=].+/m,greedy:!0,inside:{atrule:/(?:@[\w-]+|[+=])/}}}),delete ot.languages.sass.atrule;var _r=/\$[-\w]+|#\{\$[-\w]+\}/,cr=[/[+*\/%]|[=!]=|<=?|>=?|\b(?:and|not|or)\b/,{pattern:/(\s)-(?=\s)/,lookbehind:!0}];ot.languages.insertBefore("sass","property",{"variable-line":{pattern:/^[ \t]*\$.+/m,greedy:!0,inside:{punctuation:/:/,variable:_r,operator:cr}},"property-line":{pattern:/^[ \t]*(?:[^:\s]+ *:.*|:[^:\s].*)/m,greedy:!0,inside:{property:[/[^:\s]+(?=\s*:)/,{pattern:/(:)[^:\s]+/,lookbehind:!0}],punctuation:/:/,variable:_r,operator:cr,important:ot.languages.sass.important}}}),delete ot.languages.sass.property,delete ot.languages.sass.important,ot.languages.insertBefore("sass","punctuation",{selector:{pattern:/^([ \t]*)\S(?:,[^,\r\n]+|[^,\r\n]*)(?:,[^,\r\n]+)*(?:,(?:\r?\n|\r)\1[ \t]+\S(?:,[^,\r\n]+|[^,\r\n]*)(?:,[^,\r\n]+)*)*/m,lookbehind:!0,greedy:!0}})}(xe),xe.languages.scss=xe.languages.extend("css",{comment:{pattern:/(^|[^\\])(?:\/\*[\s\S]*?\*\/|\/\/.*)/,lookbehind:!0},atrule:{pattern:/@[\w-](?:\([^()]+\)|[^()\s]|\s+(?!\s))*?(?=\s+[{;])/,inside:{rule:/@[\w-]+/}},url:/(?:[-a-z]+-)?url(?=\()/i,selector:{pattern:/(?=\S)[^@;{}()]?(?:[^@;{}()\s]|\s+(?!\s)|#\{\$[-\w]+\})+(?=\s*\{(?:\}|\s|[^}][^:{}]*[:{][^}]))/,inside:{parent:{pattern:/&/,alias:"important"},placeholder:/%[-\w]+/,variable:/\$[-\w]+|#\{\$[-\w]+\}/}},property:{pattern:/(?:[-\w]|\$[-\w]|#\{\$[-\w]+\})+(?=\s*:)/,inside:{variable:/\$[-\w]+|#\{\$[-\w]+\}/}}}),xe.languages.insertBefore("scss","atrule",{keyword:[/@(?:content|debug|each|else(?: if)?|extend|for|forward|function|if|import|include|mixin|return|use|warn|while)\b/i,{pattern:/( )(?:from|through)(?= )/,lookbehind:!0}]}),xe.languages.insertBefore("scss","important",{variable:/\$[-\w]+|#\{\$[-\w]+\}/}),xe.languages.insertBefore("scss","function",{"module-modifier":{pattern:/\b(?:as|hide|show|with)\b/i,alias:"keyword"},placeholder:{pattern:/%[-\w]+/,alias:"selector"},statement:{pattern:/\B!(?:default|optional)\b/i,alias:"keyword"},boolean:/\b(?:false|true)\b/,null:{pattern:/\bnull\b/,alias:"keyword"},operator:{pattern:/(\s)(?:[-+*\/%]|[=!]=|<=?|>=?|and|not|or)(?=\s)/,lookbehind:!0}}),xe.languages.scss.atrule.inside.rest=xe.languages.scss,function(ot){var _r={pattern:/(\b\d+)(?:%|[a-z]+)/,lookbehind:!0},cr={pattern:/(^|[^\w.-])-?(?:\d+(?:\.\d+)?|\.\d+)/,lookbehind:!0},Vr={comment:{pattern:/(^|[^\\])(?:\/\*[\s\S]*?\*\/|\/\/.*)/,lookbehind:!0},url:{pattern:/\burl\((["']?).*?\1\)/i,greedy:!0},string:{pattern:/("|')(?:(?!\1)[^\\\r\n]|\\(?:\r\n|[\s\S]))*\1/,greedy:!0},interpolation:null,func:null,important:/\B!(?:important|optional)\b/i,keyword:{pattern:/(^|\s+)(?:(?:else|for|if|return|unless)(?=\s|$)|@[\w-]+)/,lookbehind:!0},hexcode:/#[\da-f]{3,6}/i,color:[/\b(?:AliceBlue|AntiqueWhite|Aqua|Aquamarine|Azure|Beige|Bisque|Black|BlanchedAlmond|Blue|BlueViolet|Brown|BurlyWood|CadetBlue|Chartreuse|Chocolate|Coral|CornflowerBlue|Cornsilk|Crimson|Cyan|DarkBlue|DarkCyan|DarkGoldenRod|DarkGr[ae]y|DarkGreen|DarkKhaki|DarkMagenta|DarkOliveGreen|DarkOrange|DarkOrchid|DarkRed|DarkSalmon|DarkSeaGreen|DarkSlateBlue|DarkSlateGr[ae]y|DarkTurquoise|DarkViolet|DeepPink|DeepSkyBlue|DimGr[ae]y|DodgerBlue|FireBrick|FloralWhite|ForestGreen|Fuchsia|Gainsboro|GhostWhite|Gold|GoldenRod|Gr[ae]y|Green|GreenYellow|HoneyDew|HotPink|IndianRed|Indigo|Ivory|Khaki|Lavender|LavenderBlush|LawnGreen|LemonChiffon|LightBlue|LightCoral|LightCyan|LightGoldenRodYellow|LightGr[ae]y|LightGreen|LightPink|LightSalmon|LightSeaGreen|LightSkyBlue|LightSlateGr[ae]y|LightSteelBlue|LightYellow|Lime|LimeGreen|Linen|Magenta|Maroon|MediumAquaMarine|MediumBlue|MediumOrchid|MediumPurple|MediumSeaGreen|MediumSlateBlue|MediumSpringGreen|MediumTurquoise|MediumVioletRed|MidnightBlue|MintCream|MistyRose|Moccasin|NavajoWhite|Navy|OldLace|Olive|OliveDrab|Orange|OrangeRed|Orchid|PaleGoldenRod|PaleGreen|PaleTurquoise|PaleVioletRed|PapayaWhip|PeachPuff|Peru|Pink|Plum|PowderBlue|Purple|Red|RosyBrown|RoyalBlue|SaddleBrown|Salmon|SandyBrown|SeaGreen|SeaShell|Sienna|Silver|SkyBlue|SlateBlue|SlateGr[ae]y|Snow|SpringGreen|SteelBlue|Tan|Teal|Thistle|Tomato|Transparent|Turquoise|Violet|Wheat|White|WhiteSmoke|Yellow|YellowGreen)\b/i,{pattern:/\b(?:hsl|rgb)\(\s*\d{1,3}\s*,\s*\d{1,3}%?\s*,\s*\d{1,3}%?\s*\)\B|\b(?:hsl|rgb)a\(\s*\d{1,3}\s*,\s*\d{1,3}%?\s*,\s*\d{1,3}%?\s*,\s*(?:0|0?\.\d+|1)\s*\)\B/i,inside:{unit:_r,number:cr,function:/[\w-]+(?=\()/,punctuation:/[(),]/}}],entity:/\\[\da-f]{1,8}/i,unit:_r,boolean:/\b(?:false|true)\b/,operator:[/~|[+!\/%<>?=]=?|[-:]=|\*[*=]?|\.{2,3}|&&|\|\||\B-\B|\b(?:and|in|is(?: a| defined| not|nt)?|not|or)\b/],number:cr,punctuation:/[{}()\[\];:,]/};Vr.interpolation={pattern:/\{[^\r\n}:]+\}/,alias:"variable",inside:{delimiter:{pattern:/^\{|\}$/,alias:"punctuation"},rest:Vr}},Vr.func={pattern:/[\w-]+\([^)]*\).*/,inside:{function:/^[^(]+/,rest:Vr}},ot.languages.stylus={"atrule-declaration":{pattern:/(^[ \t]*)@.+/m,lookbehind:!0,inside:{atrule:/^@[\w-]+/,rest:Vr}},"variable-declaration":{pattern:/(^[ \t]*)[\w$-]+\s*.?=[ \t]*(?:\{[^{}]*\}|\S.*|$)/m,lookbehind:!0,inside:{variable:/^\S+/,rest:Vr}},statement:{pattern:/(^[ \t]*)(?:else|for|if|return|unless)[ \t].+/m,lookbehind:!0,inside:{keyword:/^\S+/,rest:Vr}},"property-declaration":{pattern:/((?:^|\{)([ \t]*))(?:[\w-]|\{[^}\r\n]+\})+(?:\s*:\s*|[ \t]+)(?!\s)[^{\r\n]*(?:;|[^{\r\n,]$(?!(?:\r?\n|\r)(?:\{|\2[ \t])))/m,lookbehind:!0,inside:{property:{pattern:/^[^\s:]+/,inside:{interpolation:Vr.interpolation}},rest:Vr}},selector:{pattern:/(^[ \t]*)(?:(?=\S)(?:[^{}\r\n:()]|::?[\w-]+(?:\([^)\r\n]*\)|(?![\w-]))|\{[^}\r\n]+\})+)(?:(?:\r?\n|\r)(?:\1(?:(?=\S)(?:[^{}\r\n:()]|::?[\w-]+(?:\([^)\r\n]*\)|(?![\w-]))|\{[^}\r\n]+\})+)))*(?:,$|\{|(?=(?:\r?\n|\r)(?:\{|\1[ \t])))/m,lookbehind:!0,inside:{interpolation:Vr.interpolation,comment:Vr.comment,punctuation:/[{},]/}},func:Vr.func,string:Vr.string,comment:{pattern:/(^|[^\\])(?:\/\*[\s\S]*?\*\/|\/\/.*)/,lookbehind:!0,greedy:!0},interpolation:Vr.interpolation,punctuation:/[{}()\[\];:.]/}}(xe),function(ot){var _r=ot.util.clone(ot.languages.typescript);ot.languages.tsx=ot.languages.extend("jsx",_r),delete ot.languages.tsx.parameter,delete ot.languages.tsx["literal-property"];var cr=ot.languages.tsx.tag;cr.pattern=RegExp(/(^|[^\w$]|(?=<\/))/.source+"(?:"+cr.pattern.source+")",cr.pattern.flags),cr.lookbehind=!0}(xe),xe.languages.wasm={comment:[/\(;[\s\S]*?;\)/,{pattern:/;;.*/,greedy:!0}],string:{pattern:/"(?:\\[\s\S]|[^"\\])*"/,greedy:!0},keyword:[{pattern:/\b(?:align|offset)=/,inside:{operator:/=/}},{pattern:/\b(?:(?:f32|f64|i32|i64)(?:\.(?:abs|add|and|ceil|clz|const|convert_[su]\/i(?:32|64)|copysign|ctz|demote\/f64|div(?:_[su])?|eqz?|extend_[su]\/i32|floor|ge(?:_[su])?|gt(?:_[su])?|le(?:_[su])?|load(?:(?:8|16|32)_[su])?|lt(?:_[su])?|max|min|mul|neg?|nearest|or|popcnt|promote\/f32|reinterpret\/[fi](?:32|64)|rem_[su]|rot[lr]|shl|shr_[su]|sqrt|store(?:8|16|32)?|sub|trunc(?:_[su]\/f(?:32|64))?|wrap\/i64|xor))?|memory\.(?:grow|size))\b/,inside:{punctuation:/\./}},/\b(?:anyfunc|block|br(?:_if|_table)?|call(?:_indirect)?|data|drop|elem|else|end|export|func|get_(?:global|local)|global|if|import|local|loop|memory|module|mut|nop|offset|param|result|return|select|set_(?:global|local)|start|table|tee_local|then|type|unreachable)\b/],variable:/\$[\w!#$%&'*+\-./:<=>?@\\^`|~]+/,number:/[+-]?\b(?:\d(?:_?\d)*(?:\.\d(?:_?\d)*)?(?:[eE][+-]?\d(?:_?\d)*)?|0x[\da-fA-F](?:_?[\da-fA-F])*(?:\.[\da-fA-F](?:_?[\da-fA-D])*)?(?:[pP][+-]?\d(?:_?\d)*)?)\b|\binf\b|\bnan(?::0x[\da-fA-F](?:_?[\da-fA-D])*)?\b/,punctuation:/[()]/};var Ve=xe,K={plain:{backgroundColor:"#2a2734",color:"#9a86fd"},styles:[{types:["comment","prolog","doctype","cdata","punctuation"],style:{color:"#6c6783"}},{types:["namespace"],style:{opacity:.7}},{types:["tag","operator","number"],style:{color:"#e09142"}},{types:["property","function"],style:{color:"#9a86fd"}},{types:["tag-id","selector","atrule-id"],style:{color:"#eeebff"}},{types:["attr-name"],style:{color:"#c4b9fe"}},{types:["boolean","string","entity","url","attr-value","keyword","control","directive","unit","statement","regex","atrule","placeholder","variable"],style:{color:"#ffcc99"}},{types:["deleted"],style:{textDecorationLine:"line-through"}},{types:["inserted"],style:{textDecorationLine:"underline"}},{types:["italic"],style:{fontStyle:"italic"}},{types:["important","bold"],style:{fontWeight:"bold"}},{types:["important"],style:{color:"#c4b9fe"}}]},ke=K,we={Prism:Ve,theme:ke};function Me(ot,_r,cr){return _r in ot?Object.defineProperty(ot,_r,{value:cr,enumerable:!0,configurable:!0,writable:!0}):ot[_r]=cr,ot}function Xe(){return Xe=Object.assign||function(ot){for(var _r=1;_r<arguments.length;_r++){var cr=arguments[_r];for(var Vr in cr)Object.prototype.hasOwnProperty.call(cr,Vr)&&(ot[Vr]=cr[Vr])}return ot},Xe.apply(this,arguments)}var Ke=/\r\n|\r|\n/,At=function(ot){ot.length===0?ot.push({types:["plain"],content:`
`,empty:!0}):ot.length===1&&ot[0].content===""&&(ot[0].content=`
`,ot[0].empty=!0)},mt=function(ot,_r){var cr=ot.length;return cr>0&&ot[cr-1]===_r?ot:ot.concat(_r)},ie=function(ot){for(var _r=[[]],cr=[ot],Vr=[0],Qn=[ot.length],mn=0,_n=0,Yr=[],Fr=[Yr];_n>-1;){for(;(mn=Vr[_n]++)<Qn[_n];){var kr=void 0,ft=_r[_n],me=cr[_n],ne=me[mn];if(typeof ne=="string"?(ft=_n>0?ft:["plain"],kr=ne):(ft=mt(ft,ne.type),ne.alias&&(ft=mt(ft,ne.alias)),kr=ne.content),typeof kr!="string"){_n++,_r.push(ft),cr.push(kr),Vr.push(0),Qn.push(kr.length);continue}var fe=kr.split(Ke),Q=fe.length;Yr.push({types:ft,content:fe[0]});for(var De=1;De<Q;De++)At(Yr),Fr.push(Yr=[]),Yr.push({types:ft,content:fe[De]})}_n--,_r.pop(),cr.pop(),Vr.pop(),Qn.pop()}return At(Yr),Fr},oe=function(ot,_r){var cr=ot.plain,Vr=Object.create(null),Qn=ot.styles.reduce(function(mn,_n){var Yr=_n.languages,Fr=_n.style;return Yr&&!Yr.includes(_r)||_n.types.forEach(function(kr){var ft=Xe({},mn[kr],Fr);mn[kr]=ft}),mn},Vr);return Qn.root=cr,Qn.plain=Xe({},cr,{backgroundColor:null}),Qn};function he(ot,_r){var cr={};for(var Vr in ot)Object.prototype.hasOwnProperty.call(ot,Vr)&&_r.indexOf(Vr)===-1&&(cr[Vr]=ot[Vr]);return cr}var ye=function(ot){function _r(){for(var cr=this,Vr=[],Qn=arguments.length;Qn--;)Vr[Qn]=arguments[Qn];ot.apply(this,Vr),Me(this,"getThemeDict",function(mn){if(cr.themeDict!==void 0&&mn.theme===cr.prevTheme&&mn.language===cr.prevLanguage)return cr.themeDict;cr.prevTheme=mn.theme,cr.prevLanguage=mn.language;var _n=mn.theme?oe(mn.theme,mn.language):void 0;return cr.themeDict=_n}),Me(this,"getLineProps",function(mn){var _n=mn.key,Yr=mn.className,Fr=mn.style,kr=he(mn,["key","className","style","line"]),ft=kr,me=Xe({},ft,{className:"token-line",style:void 0,key:void 0}),ne=cr.getThemeDict(cr.props);return ne!==void 0&&(me.style=ne.plain),Fr!==void 0&&(me.style=me.style!==void 0?Xe({},me.style,Fr):Fr),_n!==void 0&&(me.key=_n),Yr&&(me.className+=" "+Yr),me}),Me(this,"getStyleForToken",function(mn){var _n=mn.types,Yr=mn.empty,Fr=_n.length,kr=cr.getThemeDict(cr.props);if(kr!==void 0){{if(Fr===1&&_n[0]==="plain")return Yr?{display:"inline-block"}:void 0;if(Fr===1&&!Yr)return kr[_n[0]]}var ft=Yr?{display:"inline-block"}:{},me=_n.map(function(ne){return kr[ne]});return Object.assign.apply(Object,[ft].concat(me))}}),Me(this,"getTokenProps",function(mn){var _n=mn.key,Yr=mn.className,Fr=mn.style,kr=mn.token,ft=he(mn,["key","className","style","token"]),me=ft,ne=Xe({},me,{className:"token "+kr.types.join(" "),children:kr.content,style:cr.getStyleForToken(kr),key:void 0});return Fr!==void 0&&(ne.style=ne.style!==void 0?Xe({},ne.style,Fr):Fr),_n!==void 0&&(ne.key=_n),Yr&&(ne.className+=" "+Yr),ne}),Me(this,"tokenize",function(mn,_n,Yr,Fr){var kr={code:_n,grammar:Yr,language:Fr,tokens:[]};mn.hooks.run("before-tokenize",kr);var ft=kr.tokens=mn.tokenize(kr.code,kr.grammar,kr.language);return mn.hooks.run("after-tokenize",kr),ft})}return ot&&(_r.__proto__=ot),_r.prototype=Object.create(ot&&ot.prototype),_r.prototype.constructor=_r,_r.prototype.render=function(){var Vr=this.props,Qn=Vr.Prism,mn=Vr.language,_n=Vr.code,Yr=Vr.children,Fr=this.getThemeDict(this.props),kr=Qn.languages[mn],ft=kr!==void 0?this.tokenize(Qn,_n,kr,mn):[_n],me=ie(ft);return Yr({tokens:me,className:"prism-code language-"+mn,style:Fr!==void 0?Fr.root:{},getLineProps:this.getLineProps,getTokenProps:this.getTokenProps})},_r}(w.Component),se=ye,Ne=c(90943);function st(){return st=Object.assign?Object.assign.bind():function(ot){for(var _r=1;_r<arguments.length;_r++){var cr=arguments[_r];for(var Vr in cr)Object.prototype.hasOwnProperty.call(cr,Vr)&&(ot[Vr]=cr[Vr])}return ot},st.apply(this,arguments)}function Fe(ot,_r){return xr(ot)||Qt(ot,_r)||Wt(ot,_r)||tt()}function tt(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Wt(ot,_r){if(!!ot){if(typeof ot=="string")return Pr(ot,_r);var cr=Object.prototype.toString.call(ot).slice(8,-1);if(cr==="Object"&&ot.constructor&&(cr=ot.constructor.name),cr==="Map"||cr==="Set")return Array.from(ot);if(cr==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(cr))return Pr(ot,_r)}}function Pr(ot,_r){(_r==null||_r>ot.length)&&(_r=ot.length);for(var cr=0,Vr=new Array(_r);cr<_r;cr++)Vr[cr]=ot[cr];return Vr}function Qt(ot,_r){var cr=ot==null?null:typeof Symbol!="undefined"&&ot[Symbol.iterator]||ot["@@iterator"];if(cr!=null){var Vr=[],Qn=!0,mn=!1,_n,Yr;try{for(cr=cr.call(ot);!(Qn=(_n=cr.next()).done)&&(Vr.push(_n.value),!(_r&&Vr.length===_r));Qn=!0);}catch(Fr){mn=!0,Yr=Fr}finally{try{!Qn&&cr.return!=null&&cr.return()}finally{if(mn)throw Yr}}return Vr}}function xr(ot){if(Array.isArray(ot))return ot}var $r={acss:"css",axml:"markup"},Cr=function(_r){var cr=_r.children,Vr=_r.lang,Qn=(0,w.useRef)(),mn=(0,w.useState)(!1),_n=Fe(mn,2),Yr=_n[0],Fr=_n[1];return w.createElement("div",{className:"dumi-default-source-code"},w.createElement(Ne.CopyToClipboard,{text:cr,onCopy:function(){Fr(!0),clearTimeout(Qn.current),Qn.current=window.setTimeout(function(){return Fr(!1)},2e3)}},w.createElement("button",{type:"button",className:"dumi-default-source-code-copy","data-copied":Yr||void 0},Yr?w.createElement(B,null):w.createElement(de,null))),w.createElement(se,st({},we,{code:cr.trim(),language:$r[Vr]||Vr,theme:void 0}),function(kr){var ft=kr.className,me=kr.style,ne=kr.tokens,fe=kr.getLineProps,Q=kr.getTokenProps;return w.createElement("pre",{className:ft,style:me},ne.map(function(De,dt){return w.createElement("div",st({key:String(dt)},fe({line:De,key:dt})),De.map(function(Jt,it){return w.createElement("span",st({key:String(dt)},Q({token:Jt,key:it})))}))}))}))},sn=Cr},75734:function(U){"use strict";U.exports=F,U.exports.default=F;function F(he,ye,se){se=se||2;var Ne=ye&&ye.length,st=Ne?ye[0]*se:he.length,Fe=c(he,0,st,se,!0),tt=[];if(!Fe||Fe.next===Fe.prev)return tt;var Wt,Pr,Qt,xr,$r,Cr,sn;if(Ne&&(Fe=k(he,ye,Fe,se)),he.length>80*se){Wt=Qt=he[0],Pr=xr=he[1];for(var ot=se;ot<st;ot+=se)$r=he[ot],Cr=he[ot+1],$r<Wt&&(Wt=$r),Cr<Pr&&(Pr=Cr),$r>Qt&&(Qt=$r),Cr>xr&&(xr=Cr);sn=Math.max(Qt-Wt,xr-Pr),sn=sn!==0?32767/sn:0}return v(Fe,tt,se,Wt,Pr,sn,0),tt}function c(he,ye,se,Ne,st){var Fe,tt;if(st===oe(he,ye,se,Ne)>0)for(Fe=ye;Fe<se;Fe+=Ne)tt=At(Fe,he[Fe],he[Fe+1],tt);else for(Fe=se-Ne;Fe>=ye;Fe-=Ne)tt=At(Fe,he[Fe],he[Fe+1],tt);return tt&&xe(tt,tt.next)&&(mt(tt),tt=tt.next),tt}function w(he,ye){if(!he)return he;ye||(ye=he);var se=he,Ne;do if(Ne=!1,!se.steiner&&(xe(se,se.next)||Oe(se.prev,se,se.next)===0)){if(mt(se),se=ye=se.prev,se===se.next)break;Ne=!0}else se=se.next;while(Ne||se!==ye);return ye}function v(he,ye,se,Ne,st,Fe,tt){if(!!he){!tt&&Fe&&Y(he,Ne,st,Fe);for(var Wt=he,Pr,Qt;he.prev!==he.next;){if(Pr=he.prev,Qt=he.next,Fe?R(he,Ne,st,Fe):l(he)){ye.push(Pr.i/se|0),ye.push(he.i/se|0),ye.push(Qt.i/se|0),mt(he),he=Qt.next,Wt=Qt.next;continue}if(he=Qt,he===Wt){tt?tt===1?(he=A(w(he),ye,se),v(he,ye,se,Ne,st,Fe,2)):tt===2&&D(he,ye,se,Ne,st,Fe):v(w(he),ye,se,Ne,st,Fe,1);break}}}}function l(he){var ye=he.prev,se=he,Ne=he.next;if(Oe(ye,se,Ne)>=0)return!1;for(var st=ye.x,Fe=se.x,tt=Ne.x,Wt=ye.y,Pr=se.y,Qt=Ne.y,xr=st<Fe?st<tt?st:tt:Fe<tt?Fe:tt,$r=Wt<Pr?Wt<Qt?Wt:Qt:Pr<Qt?Pr:Qt,Cr=st>Fe?st>tt?st:tt:Fe>tt?Fe:tt,sn=Wt>Pr?Wt>Qt?Wt:Qt:Pr>Qt?Pr:Qt,ot=Ne.next;ot!==ye;){if(ot.x>=xr&&ot.x<=Cr&&ot.y>=$r&&ot.y<=sn&&de(st,Wt,Fe,Pr,tt,Qt,ot.x,ot.y)&&Oe(ot.prev,ot,ot.next)>=0)return!1;ot=ot.next}return!0}function R(he,ye,se,Ne){var st=he.prev,Fe=he,tt=he.next;if(Oe(st,Fe,tt)>=0)return!1;for(var Wt=st.x,Pr=Fe.x,Qt=tt.x,xr=st.y,$r=Fe.y,Cr=tt.y,sn=Wt<Pr?Wt<Qt?Wt:Qt:Pr<Qt?Pr:Qt,ot=xr<$r?xr<Cr?xr:Cr:$r<Cr?$r:Cr,_r=Wt>Pr?Wt>Qt?Wt:Qt:Pr>Qt?Pr:Qt,cr=xr>$r?xr>Cr?xr:Cr:$r>Cr?$r:Cr,Vr=le(sn,ot,ye,se,Ne),Qn=le(_r,cr,ye,se,Ne),mn=he.prevZ,_n=he.nextZ;mn&&mn.z>=Vr&&_n&&_n.z<=Qn;){if(mn.x>=sn&&mn.x<=_r&&mn.y>=ot&&mn.y<=cr&&mn!==st&&mn!==tt&&de(Wt,xr,Pr,$r,Qt,Cr,mn.x,mn.y)&&Oe(mn.prev,mn,mn.next)>=0||(mn=mn.prevZ,_n.x>=sn&&_n.x<=_r&&_n.y>=ot&&_n.y<=cr&&_n!==st&&_n!==tt&&de(Wt,xr,Pr,$r,Qt,Cr,_n.x,_n.y)&&Oe(_n.prev,_n,_n.next)>=0))return!1;_n=_n.nextZ}for(;mn&&mn.z>=Vr;){if(mn.x>=sn&&mn.x<=_r&&mn.y>=ot&&mn.y<=cr&&mn!==st&&mn!==tt&&de(Wt,xr,Pr,$r,Qt,Cr,mn.x,mn.y)&&Oe(mn.prev,mn,mn.next)>=0)return!1;mn=mn.prevZ}for(;_n&&_n.z<=Qn;){if(_n.x>=sn&&_n.x<=_r&&_n.y>=ot&&_n.y<=cr&&_n!==st&&_n!==tt&&de(Wt,xr,Pr,$r,Qt,Cr,_n.x,_n.y)&&Oe(_n.prev,_n,_n.next)>=0)return!1;_n=_n.nextZ}return!0}function A(he,ye,se){var Ne=he;do{var st=Ne.prev,Fe=Ne.next.next;!xe(st,Fe)&&Ve(st,Ne,Ne.next,Fe)&&Me(st,Fe)&&Me(Fe,st)&&(ye.push(st.i/se|0),ye.push(Ne.i/se|0),ye.push(Fe.i/se|0),mt(Ne),mt(Ne.next),Ne=he=Fe),Ne=Ne.next}while(Ne!==he);return w(Ne)}function D(he,ye,se,Ne,st,Fe){var tt=he;do{for(var Wt=tt.next.next;Wt!==tt.prev;){if(tt.i!==Wt.i&&pe(tt,Wt)){var Pr=Ke(tt,Wt);tt=w(tt,tt.next),Pr=w(Pr,Pr.next),v(tt,ye,se,Ne,st,Fe,0),v(Pr,ye,se,Ne,st,Fe,0);return}Wt=Wt.next}tt=tt.next}while(tt!==he)}function k(he,ye,se,Ne){var st=[],Fe,tt,Wt,Pr,Qt;for(Fe=0,tt=ye.length;Fe<tt;Fe++)Wt=ye[Fe]*Ne,Pr=Fe<tt-1?ye[Fe+1]*Ne:he.length,Qt=c(he,Wt,Pr,Ne,!1),Qt===Qt.next&&(Qt.steiner=!0),st.push(be(Qt));for(st.sort(B),Fe=0;Fe<st.length;Fe++)se=z(st[Fe],se);return se}function B(he,ye){return he.x-ye.x}function z(he,ye){var se=Z(he,ye);if(!se)return ye;var Ne=Ke(se,he);return w(Ne,Ne.next),w(se,se.next)}function Z(he,ye){var se=ye,Ne=he.x,st=he.y,Fe=-1/0,tt;do{if(st<=se.y&&st>=se.next.y&&se.next.y!==se.y){var Wt=se.x+(st-se.y)*(se.next.x-se.x)/(se.next.y-se.y);if(Wt<=Ne&&Wt>Fe&&(Fe=Wt,tt=se.x<se.next.x?se:se.next,Wt===Ne))return tt}se=se.next}while(se!==ye);if(!tt)return null;var Pr=tt,Qt=tt.x,xr=tt.y,$r=1/0,Cr;se=tt;do Ne>=se.x&&se.x>=Qt&&Ne!==se.x&&de(st<xr?Ne:Fe,st,Qt,xr,st<xr?Fe:Ne,st,se.x,se.y)&&(Cr=Math.abs(st-se.y)/(Ne-se.x),Me(se,he)&&(Cr<$r||Cr===$r&&(se.x>tt.x||se.x===tt.x&&W(tt,se)))&&(tt=se,$r=Cr)),se=se.next;while(se!==Pr);return tt}function W(he,ye){return Oe(he.prev,he,ye.prev)<0&&Oe(ye.next,he,he.next)<0}function Y(he,ye,se,Ne){var st=he;do st.z===0&&(st.z=le(st.x,st.y,ye,se,Ne)),st.prevZ=st.prev,st.nextZ=st.next,st=st.next;while(st!==he);st.prevZ.nextZ=null,st.prevZ=null,te(st)}function te(he){var ye,se,Ne,st,Fe,tt,Wt,Pr,Qt=1;do{for(se=he,he=null,Fe=null,tt=0;se;){for(tt++,Ne=se,Wt=0,ye=0;ye<Qt&&(Wt++,Ne=Ne.nextZ,!!Ne);ye++);for(Pr=Qt;Wt>0||Pr>0&&Ne;)Wt!==0&&(Pr===0||!Ne||se.z<=Ne.z)?(st=se,se=se.nextZ,Wt--):(st=Ne,Ne=Ne.nextZ,Pr--),Fe?Fe.nextZ=st:he=st,st.prevZ=Fe,Fe=st;se=Ne}Fe.nextZ=null,Qt*=2}while(tt>1);return he}function le(he,ye,se,Ne,st){return he=(he-se)*st|0,ye=(ye-Ne)*st|0,he=(he|he<<8)&16711935,he=(he|he<<4)&252645135,he=(he|he<<2)&858993459,he=(he|he<<1)&1431655765,ye=(ye|ye<<8)&16711935,ye=(ye|ye<<4)&252645135,ye=(ye|ye<<2)&858993459,ye=(ye|ye<<1)&1431655765,he|ye<<1}function be(he){var ye=he,se=he;do(ye.x<se.x||ye.x===se.x&&ye.y<se.y)&&(se=ye),ye=ye.next;while(ye!==he);return se}function de(he,ye,se,Ne,st,Fe,tt,Wt){return(st-tt)*(ye-Wt)>=(he-tt)*(Fe-Wt)&&(he-tt)*(Ne-Wt)>=(se-tt)*(ye-Wt)&&(se-tt)*(Fe-Wt)>=(st-tt)*(Ne-Wt)}function pe(he,ye){return he.next.i!==ye.i&&he.prev.i!==ye.i&&!we(he,ye)&&(Me(he,ye)&&Me(ye,he)&&Xe(he,ye)&&(Oe(he.prev,he,ye.prev)||Oe(he,ye.prev,ye))||xe(he,ye)&&Oe(he.prev,he,he.next)>0&&Oe(ye.prev,ye,ye.next)>0)}function Oe(he,ye,se){return(ye.y-he.y)*(se.x-ye.x)-(ye.x-he.x)*(se.y-ye.y)}function xe(he,ye){return he.x===ye.x&&he.y===ye.y}function Ve(he,ye,se,Ne){var st=ke(Oe(he,ye,se)),Fe=ke(Oe(he,ye,Ne)),tt=ke(Oe(se,Ne,he)),Wt=ke(Oe(se,Ne,ye));return!!(st!==Fe&&tt!==Wt||st===0&&K(he,se,ye)||Fe===0&&K(he,Ne,ye)||tt===0&&K(se,he,Ne)||Wt===0&&K(se,ye,Ne))}function K(he,ye,se){return ye.x<=Math.max(he.x,se.x)&&ye.x>=Math.min(he.x,se.x)&&ye.y<=Math.max(he.y,se.y)&&ye.y>=Math.min(he.y,se.y)}function ke(he){return he>0?1:he<0?-1:0}function we(he,ye){var se=he;do{if(se.i!==he.i&&se.next.i!==he.i&&se.i!==ye.i&&se.next.i!==ye.i&&Ve(se,se.next,he,ye))return!0;se=se.next}while(se!==he);return!1}function Me(he,ye){return Oe(he.prev,he,he.next)<0?Oe(he,ye,he.next)>=0&&Oe(he,he.prev,ye)>=0:Oe(he,ye,he.prev)<0||Oe(he,he.next,ye)<0}function Xe(he,ye){var se=he,Ne=!1,st=(he.x+ye.x)/2,Fe=(he.y+ye.y)/2;do se.y>Fe!=se.next.y>Fe&&se.next.y!==se.y&&st<(se.next.x-se.x)*(Fe-se.y)/(se.next.y-se.y)+se.x&&(Ne=!Ne),se=se.next;while(se!==he);return Ne}function Ke(he,ye){var se=new ie(he.i,he.x,he.y),Ne=new ie(ye.i,ye.x,ye.y),st=he.next,Fe=ye.prev;return he.next=ye,ye.prev=he,se.next=st,st.prev=se,Ne.next=se,se.prev=Ne,Fe.next=Ne,Ne.prev=Fe,Ne}function At(he,ye,se,Ne){var st=new ie(he,ye,se);return Ne?(st.next=Ne.next,st.prev=Ne,Ne.next.prev=st,Ne.next=st):(st.prev=st,st.next=st),st}function mt(he){he.next.prev=he.prev,he.prev.next=he.next,he.prevZ&&(he.prevZ.nextZ=he.nextZ),he.nextZ&&(he.nextZ.prevZ=he.prevZ)}function ie(he,ye,se){this.i=he,this.x=ye,this.y=se,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}F.deviation=function(he,ye,se,Ne){var st=ye&&ye.length,Fe=st?ye[0]*se:he.length,tt=Math.abs(oe(he,0,Fe,se));if(st)for(var Wt=0,Pr=ye.length;Wt<Pr;Wt++){var Qt=ye[Wt]*se,xr=Wt<Pr-1?ye[Wt+1]*se:he.length;tt-=Math.abs(oe(he,Qt,xr,se))}var $r=0;for(Wt=0;Wt<Ne.length;Wt+=3){var Cr=Ne[Wt]*se,sn=Ne[Wt+1]*se,ot=Ne[Wt+2]*se;$r+=Math.abs((he[Cr]-he[ot])*(he[sn+1]-he[Cr+1])-(he[Cr]-he[sn])*(he[ot+1]-he[Cr+1]))}return tt===0&&$r===0?0:Math.abs(($r-tt)/tt)};function oe(he,ye,se,Ne){for(var st=0,Fe=ye,tt=se-Ne;Fe<se;Fe+=Ne)st+=(he[tt]-he[Fe])*(he[Fe+1]+he[tt+1]),tt=Fe;return st}F.flatten=function(he){for(var ye=he[0][0].length,se={vertices:[],holes:[],dimensions:ye},Ne=0,st=0;st<he.length;st++){for(var Fe=0;Fe<he[st].length;Fe++)for(var tt=0;tt<ye;tt++)se.vertices.push(he[st][Fe][tt]);st>0&&(Ne+=he[st-1].length,se.holes.push(Ne))}return se}},31204:function(U){function F(w){var v=w.target||w.srcElement;v.__resizeRAF__&&cancelAnimationFrame(v.__resizeRAF__),v.__resizeRAF__=requestAnimationFrame(function(){var l=v.__resizeTrigger__,R=l&&l.__resizeListeners__;R&&R.forEach(function(A){A.call(l,w)})})}var c=function(v,l){var R=this,A=R.document,D,k=A.attachEvent;typeof navigator!="undefined"&&(D=navigator.userAgent.match(/Trident/)||navigator.userAgent.match(/Edge/));function B(){this.contentDocument.defaultView.__resizeTrigger__=this.__resizeElement__,this.contentDocument.defaultView.addEventListener("resize",F)}if(!v.__resizeListeners__)if(v.__resizeListeners__=[],k)v.__resizeTrigger__=v,v.attachEvent("onresize",F);else{getComputedStyle(v).position==="static"&&(v.style.position="relative");var z=v.__resizeTrigger__=A.createElement("object");z.setAttribute("style","position: absolute; top: 0; left: 0; height: 100%; width: 100%; pointer-events: none; z-index: -1; opacity: 0;"),z.setAttribute("class","resize-sensor"),z.setAttribute("tabindex","-1"),z.setAttribute("title",""),z.__resizeElement__=v,z.onload=B,z.type="text/html",D&&v.appendChild(z),z.data="about:blank",D||v.appendChild(z)}v.__resizeListeners__.push(l)};U.exports=typeof window=="undefined"?c:c.bind(window),U.exports.unbind=function(w,v){var l=document.attachEvent,R=w.__resizeListeners__||[];if(v){var A=R.indexOf(v);A!==-1&&R.splice(A,1)}else R=w.__resizeListeners__=[];if(!R.length){if(l)w.detachEvent("onresize",F);else if(w.__resizeTrigger__){var D=w.__resizeTrigger__.contentDocument,k=D&&D.defaultView;k&&(k.removeEventListener("resize",F),delete k.__resizeTrigger__),w.__resizeTrigger__=!w.removeChild(w.__resizeTrigger__)}delete w.__resizeListeners__}}},11312:function(U){"use strict";var F=Object.prototype.hasOwnProperty,c="~";function w(){}Object.create&&(w.prototype=Object.create(null),new w().__proto__||(c=!1));function v(D,k,B){this.fn=D,this.context=k,this.once=B||!1}function l(D,k,B,z,Z){if(typeof B!="function")throw new TypeError("The listener must be a function");var W=new v(B,z||D,Z),Y=c?c+k:k;return D._events[Y]?D._events[Y].fn?D._events[Y]=[D._events[Y],W]:D._events[Y].push(W):(D._events[Y]=W,D._eventsCount++),D}function R(D,k){--D._eventsCount===0?D._events=new w:delete D._events[k]}function A(){this._events=new w,this._eventsCount=0}A.prototype.eventNames=function(){var k=[],B,z;if(this._eventsCount===0)return k;for(z in B=this._events)F.call(B,z)&&k.push(c?z.slice(1):z);return Object.getOwnPropertySymbols?k.concat(Object.getOwnPropertySymbols(B)):k},A.prototype.listeners=function(k){var B=c?c+k:k,z=this._events[B];if(!z)return[];if(z.fn)return[z.fn];for(var Z=0,W=z.length,Y=new Array(W);Z<W;Z++)Y[Z]=z[Z].fn;return Y},A.prototype.listenerCount=function(k){var B=c?c+k:k,z=this._events[B];return z?z.fn?1:z.length:0},A.prototype.emit=function(k,B,z,Z,W,Y){var te=c?c+k:k;if(!this._events[te])return!1;var le=this._events[te],be=arguments.length,de,pe;if(le.fn){switch(le.once&&this.removeListener(k,le.fn,void 0,!0),be){case 1:return le.fn.call(le.context),!0;case 2:return le.fn.call(le.context,B),!0;case 3:return le.fn.call(le.context,B,z),!0;case 4:return le.fn.call(le.context,B,z,Z),!0;case 5:return le.fn.call(le.context,B,z,Z,W),!0;case 6:return le.fn.call(le.context,B,z,Z,W,Y),!0}for(pe=1,de=new Array(be-1);pe<be;pe++)de[pe-1]=arguments[pe];le.fn.apply(le.context,de)}else{var Oe=le.length,xe;for(pe=0;pe<Oe;pe++)switch(le[pe].once&&this.removeListener(k,le[pe].fn,void 0,!0),be){case 1:le[pe].fn.call(le[pe].context);break;case 2:le[pe].fn.call(le[pe].context,B);break;case 3:le[pe].fn.call(le[pe].context,B,z);break;case 4:le[pe].fn.call(le[pe].context,B,z,Z);break;default:if(!de)for(xe=1,de=new Array(be-1);xe<be;xe++)de[xe-1]=arguments[xe];le[pe].fn.apply(le[pe].context,de)}}return!0},A.prototype.on=function(k,B,z){return l(this,k,B,z,!1)},A.prototype.once=function(k,B,z){return l(this,k,B,z,!0)},A.prototype.removeListener=function(k,B,z,Z){var W=c?c+k:k;if(!this._events[W])return this;if(!B)return R(this,W),this;var Y=this._events[W];if(Y.fn)Y.fn===B&&(!Z||Y.once)&&(!z||Y.context===z)&&R(this,W);else{for(var te=0,le=[],be=Y.length;te<be;te++)(Y[te].fn!==B||Z&&!Y[te].once||z&&Y[te].context!==z)&&le.push(Y[te]);le.length?this._events[W]=le.length===1?le[0]:le:R(this,W)}return this},A.prototype.removeAllListeners=function(k){var B;return k?(B=c?c+k:k,this._events[B]&&R(this,B)):(this._events=new w,this._eventsCount=0),this},A.prototype.off=A.prototype.removeListener,A.prototype.addListener=A.prototype.on,A.prefixed=c,A.EventEmitter=A,U.exports=A},18280:function(U,F,c){"use strict";c.d(F,{Ep:function(){return be},PP:function(){return Z},aU:function(){return v},cP:function(){return de},lX:function(){return B},q_:function(){return z}});var w=c(24250),v;(function(pe){pe.Pop="POP",pe.Push="PUSH",pe.Replace="REPLACE"})(v||(v={}));var l=function(pe){return pe};function R(pe,Oe){if(!pe){typeof console!="undefined"&&console.warn(Oe);try{throw new Error(Oe)}catch(xe){}}}var A="beforeunload",D="hashchange",k="popstate";function B(pe){pe===void 0&&(pe={});var Oe=pe,xe=Oe.window,Ve=xe===void 0?document.defaultView:xe,K=Ve.history;function ke(){var Qt=Ve.location,xr=Qt.pathname,$r=Qt.search,Cr=Qt.hash,sn=K.state||{};return[sn.idx,l({pathname:xr,search:$r,hash:Cr,state:sn.usr||null,key:sn.key||"default"})]}var we=null;function Me(){if(we)oe.call(we),we=null;else{var Qt=v.Pop,xr=ke(),$r=xr[0],Cr=xr[1];if(oe.length){if($r!=null){var sn=At-$r;sn&&(we={action:Qt,location:Cr,retry:function(){Wt(sn*-1)}},Wt(sn))}}else st(Qt)}}Ve.addEventListener(k,Me);var Xe=v.Pop,Ke=ke(),At=Ke[0],mt=Ke[1],ie=te(),oe=te();At==null&&(At=0,K.replaceState((0,w.Z)({},K.state,{idx:At}),""));function he(Qt){return typeof Qt=="string"?Qt:be(Qt)}function ye(Qt,xr){return xr===void 0&&(xr=null),l((0,w.Z)({pathname:mt.pathname,hash:"",search:""},typeof Qt=="string"?de(Qt):Qt,{state:xr,key:le()}))}function se(Qt,xr){return[{usr:Qt.state,key:Qt.key,idx:xr},he(Qt)]}function Ne(Qt,xr,$r){return!oe.length||(oe.call({action:Qt,location:xr,retry:$r}),!1)}function st(Qt){Xe=Qt;var xr=ke();At=xr[0],mt=xr[1],ie.call({action:Xe,location:mt})}function Fe(Qt,xr){var $r=v.Push,Cr=ye(Qt,xr);function sn(){Fe(Qt,xr)}if(Ne($r,Cr,sn)){var ot=se(Cr,At+1),_r=ot[0],cr=ot[1];try{K.pushState(_r,"",cr)}catch(Vr){Ve.location.assign(cr)}st($r)}}function tt(Qt,xr){var $r=v.Replace,Cr=ye(Qt,xr);function sn(){tt(Qt,xr)}if(Ne($r,Cr,sn)){var ot=se(Cr,At),_r=ot[0],cr=ot[1];K.replaceState(_r,"",cr),st($r)}}function Wt(Qt){K.go(Qt)}var Pr={get action(){return Xe},get location(){return mt},createHref:he,push:Fe,replace:tt,go:Wt,back:function(){Wt(-1)},forward:function(){Wt(1)},listen:function(xr){return ie.push(xr)},block:function(xr){var $r=oe.push(xr);return oe.length===1&&Ve.addEventListener(A,Y),function(){$r(),oe.length||Ve.removeEventListener(A,Y)}}};return Pr}function z(pe){pe===void 0&&(pe={});var Oe=pe,xe=Oe.window,Ve=xe===void 0?document.defaultView:xe,K=Ve.history;function ke(){var xr=de(Ve.location.hash.substr(1)),$r=xr.pathname,Cr=$r===void 0?"/":$r,sn=xr.search,ot=sn===void 0?"":sn,_r=xr.hash,cr=_r===void 0?"":_r,Vr=K.state||{};return[Vr.idx,l({pathname:Cr,search:ot,hash:cr,state:Vr.usr||null,key:Vr.key||"default"})]}var we=null;function Me(){if(we)oe.call(we),we=null;else{var xr=v.Pop,$r=ke(),Cr=$r[0],sn=$r[1];if(oe.length){if(Cr!=null){var ot=At-Cr;ot&&(we={action:xr,location:sn,retry:function(){Pr(ot*-1)}},Pr(ot))}}else Fe(xr)}}Ve.addEventListener(k,Me),Ve.addEventListener(D,function(){var xr=ke(),$r=xr[1];be($r)!==be(mt)&&Me()});var Xe=v.Pop,Ke=ke(),At=Ke[0],mt=Ke[1],ie=te(),oe=te();At==null&&(At=0,K.replaceState((0,w.Z)({},K.state,{idx:At}),""));function he(){var xr=document.querySelector("base"),$r="";if(xr&&xr.getAttribute("href")){var Cr=Ve.location.href,sn=Cr.indexOf("#");$r=sn===-1?Cr:Cr.slice(0,sn)}return $r}function ye(xr){return he()+"#"+(typeof xr=="string"?xr:be(xr))}function se(xr,$r){return $r===void 0&&($r=null),l((0,w.Z)({pathname:mt.pathname,hash:"",search:""},typeof xr=="string"?de(xr):xr,{state:$r,key:le()}))}function Ne(xr,$r){return[{usr:xr.state,key:xr.key,idx:$r},ye(xr)]}function st(xr,$r,Cr){return!oe.length||(oe.call({action:xr,location:$r,retry:Cr}),!1)}function Fe(xr){Xe=xr;var $r=ke();At=$r[0],mt=$r[1],ie.call({action:Xe,location:mt})}function tt(xr,$r){var Cr=v.Push,sn=se(xr,$r);function ot(){tt(xr,$r)}if(st(Cr,sn,ot)){var _r=Ne(sn,At+1),cr=_r[0],Vr=_r[1];try{K.pushState(cr,"",Vr)}catch(Qn){Ve.location.assign(Vr)}Fe(Cr)}}function Wt(xr,$r){var Cr=v.Replace,sn=se(xr,$r);function ot(){Wt(xr,$r)}if(st(Cr,sn,ot)){var _r=Ne(sn,At),cr=_r[0],Vr=_r[1];K.replaceState(cr,"",Vr),Fe(Cr)}}function Pr(xr){K.go(xr)}var Qt={get action(){return Xe},get location(){return mt},createHref:ye,push:tt,replace:Wt,go:Pr,back:function(){Pr(-1)},forward:function(){Pr(1)},listen:function($r){return ie.push($r)},block:function($r){var Cr=oe.push($r);return oe.length===1&&Ve.addEventListener(A,Y),function(){Cr(),oe.length||Ve.removeEventListener(A,Y)}}};return Qt}function Z(pe){pe===void 0&&(pe={});var Oe=pe,xe=Oe.initialEntries,Ve=xe===void 0?["/"]:xe,K=Oe.initialIndex,ke=Ve.map(function(Fe){var tt=l((0,w.Z)({pathname:"/",search:"",hash:"",state:null,key:le()},typeof Fe=="string"?de(Fe):Fe));return tt}),we=W(K==null?ke.length-1:K,0,ke.length-1),Me=v.Pop,Xe=ke[we],Ke=te(),At=te();function mt(Fe){return typeof Fe=="string"?Fe:be(Fe)}function ie(Fe,tt){return tt===void 0&&(tt=null),l((0,w.Z)({pathname:Xe.pathname,search:"",hash:""},typeof Fe=="string"?de(Fe):Fe,{state:tt,key:le()}))}function oe(Fe,tt,Wt){return!At.length||(At.call({action:Fe,location:tt,retry:Wt}),!1)}function he(Fe,tt){Me=Fe,Xe=tt,Ke.call({action:Me,location:Xe})}function ye(Fe,tt){var Wt=v.Push,Pr=ie(Fe,tt);function Qt(){ye(Fe,tt)}oe(Wt,Pr,Qt)&&(we+=1,ke.splice(we,ke.length,Pr),he(Wt,Pr))}function se(Fe,tt){var Wt=v.Replace,Pr=ie(Fe,tt);function Qt(){se(Fe,tt)}oe(Wt,Pr,Qt)&&(ke[we]=Pr,he(Wt,Pr))}function Ne(Fe){var tt=W(we+Fe,0,ke.length-1),Wt=v.Pop,Pr=ke[tt];function Qt(){Ne(Fe)}oe(Wt,Pr,Qt)&&(we=tt,he(Wt,Pr))}var st={get index(){return we},get action(){return Me},get location(){return Xe},createHref:mt,push:ye,replace:se,go:Ne,back:function(){Ne(-1)},forward:function(){Ne(1)},listen:function(tt){return Ke.push(tt)},block:function(tt){return At.push(tt)}};return st}function W(pe,Oe,xe){return Math.min(Math.max(pe,Oe),xe)}function Y(pe){pe.preventDefault(),pe.returnValue=""}function te(){var pe=[];return{get length(){return pe.length},push:function(xe){return pe.push(xe),function(){pe=pe.filter(function(Ve){return Ve!==xe})}},call:function(xe){pe.forEach(function(Ve){return Ve&&Ve(xe)})}}}function le(){return Math.random().toString(36).substr(2,8)}function be(pe){var Oe=pe.pathname,xe=Oe===void 0?"/":Oe,Ve=pe.search,K=Ve===void 0?"":Ve,ke=pe.hash,we=ke===void 0?"":ke;return K&&K!=="?"&&(xe+=K.charAt(0)==="?"?K:"?"+K),we&&we!=="#"&&(xe+=we.charAt(0)==="#"?we:"#"+we),xe}function de(pe){var Oe={};if(pe){var xe=pe.indexOf("#");xe>=0&&(Oe.hash=pe.substr(xe),pe=pe.substr(0,xe));var Ve=pe.indexOf("?");Ve>=0&&(Oe.search=pe.substr(Ve),pe=pe.substr(0,Ve)),pe&&(Oe.pathname=pe)}return Oe}},72535:function(U,F,c){"use strict";var w=c(56237),v={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},l={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},R={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},A={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},D={};D[w.ForwardRef]=R,D[w.Memo]=A;function k(be){return w.isMemo(be)?A:D[be.$$typeof]||v}var B=Object.defineProperty,z=Object.getOwnPropertyNames,Z=Object.getOwnPropertySymbols,W=Object.getOwnPropertyDescriptor,Y=Object.getPrototypeOf,te=Object.prototype;function le(be,de,pe){if(typeof de!="string"){if(te){var Oe=Y(de);Oe&&Oe!==te&&le(be,Oe,pe)}var xe=z(de);Z&&(xe=xe.concat(Z(de)));for(var Ve=k(be),K=k(de),ke=0;ke<xe.length;++ke){var we=xe[ke];if(!l[we]&&!(pe&&pe[we])&&!(K&&K[we])&&!(Ve&&Ve[we])){var Me=W(de,we);try{B(be,we,Me)}catch(Xe){}}}}return be}U.exports=le},30551:function(U,F){F.read=function(c,w,v,l,R){var A,D,k=R*8-l-1,B=(1<<k)-1,z=B>>1,Z=-7,W=v?R-1:0,Y=v?-1:1,te=c[w+W];for(W+=Y,A=te&(1<<-Z)-1,te>>=-Z,Z+=k;Z>0;A=A*256+c[w+W],W+=Y,Z-=8);for(D=A&(1<<-Z)-1,A>>=-Z,Z+=l;Z>0;D=D*256+c[w+W],W+=Y,Z-=8);if(A===0)A=1-z;else{if(A===B)return D?NaN:(te?-1:1)*(1/0);D=D+Math.pow(2,l),A=A-z}return(te?-1:1)*D*Math.pow(2,A-l)},F.write=function(c,w,v,l,R,A){var D,k,B,z=A*8-R-1,Z=(1<<z)-1,W=Z>>1,Y=R===23?Math.pow(2,-24)-Math.pow(2,-77):0,te=l?0:A-1,le=l?1:-1,be=w<0||w===0&&1/w<0?1:0;for(w=Math.abs(w),isNaN(w)||w===1/0?(k=isNaN(w)?1:0,D=Z):(D=Math.floor(Math.log(w)/Math.LN2),w*(B=Math.pow(2,-D))<1&&(D--,B*=2),D+W>=1?w+=Y/B:w+=Y*Math.pow(2,1-W),w*B>=2&&(D++,B/=2),D+W>=Z?(k=0,D=Z):D+W>=1?(k=(w*B-1)*Math.pow(2,R),D=D+W):(k=w*Math.pow(2,W-1)*Math.pow(2,R),D=0));R>=8;c[v+te]=k&255,te+=le,k/=256,R-=8);for(D=D<<R|k,z+=R;z>0;c[v+te]=D&255,te+=le,D/=256,z-=8);c[v+te-le]|=be*128}},78157:function(U,F,c){"use strict";c.d(F,{C:function(){return z}});var w=c(34254),v=c(23166),l=c(185),R=c(91078);function A(Z,W){return W?(0,w.pi)((0,w.pi)((0,w.pi)({},Z||{}),W||{}),Object.keys(Z).reduce(function(Y,te){return Y[te]=(0,w.pi)((0,w.pi)({},Z[te]),W[te]||{}),Y},{})):Z}function D(Z,W){return W?Object.keys(Z).reduce(function(Y,te){return Y[te]=A(Z[te],W[te]),Y},(0,w.pi)({},Z)):Z}function k(Z){return{create:function(){return{get:function(W){return Z[W]},set:function(W,Y){Z[W]=Y}}}}}function B(Z){return Z===void 0&&(Z={number:{},dateTime:{},pluralRules:{}}),{getNumberFormat:(0,l.Z)(function(){for(var W,Y=[],te=0;te<arguments.length;te++)Y[te]=arguments[te];return new((W=Intl.NumberFormat).bind.apply(W,(0,w.ev)([void 0],Y,!1)))},{cache:k(Z.number),strategy:l.A.variadic}),getDateTimeFormat:(0,l.Z)(function(){for(var W,Y=[],te=0;te<arguments.length;te++)Y[te]=arguments[te];return new((W=Intl.DateTimeFormat).bind.apply(W,(0,w.ev)([void 0],Y,!1)))},{cache:k(Z.dateTime),strategy:l.A.variadic}),getPluralRules:(0,l.Z)(function(){for(var W,Y=[],te=0;te<arguments.length;te++)Y[te]=arguments[te];return new((W=Intl.PluralRules).bind.apply(W,(0,w.ev)([void 0],Y,!1)))},{cache:k(Z.pluralRules),strategy:l.A.variadic})}}var z=function(){function Z(W,Y,te,le){Y===void 0&&(Y=Z.defaultLocale);var be=this;if(this.formatterCache={number:{},dateTime:{},pluralRules:{}},this.format=function(de){var pe=be.formatToParts(de);if(pe.length===1)return pe[0].value;var Oe=pe.reduce(function(xe,Ve){return!xe.length||Ve.type!==R.du.literal||typeof xe[xe.length-1]!="string"?xe.push(Ve.value):xe[xe.length-1]+=Ve.value,xe},[]);return Oe.length<=1?Oe[0]||"":Oe},this.formatToParts=function(de){return(0,R.FK)(be.ast,be.locales,be.formatters,be.formats,de,void 0,be.message)},this.resolvedOptions=function(){var de;return{locale:((de=be.resolvedLocale)===null||de===void 0?void 0:de.toString())||Intl.NumberFormat.supportedLocalesOf(be.locales)[0]}},this.getAst=function(){return be.ast},this.locales=Y,this.resolvedLocale=Z.resolveLocale(Y),typeof W=="string"){if(this.message=W,!Z.__parse)throw new TypeError("IntlMessageFormat.__parse must be set to process `message` of type `string`");this.ast=Z.__parse(W,{ignoreTag:le==null?void 0:le.ignoreTag,locale:this.resolvedLocale})}else this.ast=W;if(!Array.isArray(this.ast))throw new TypeError("A message must be provided as a String or AST.");this.formats=D(Z.formats,te),this.formatters=le&&le.formatters||B(this.formatterCache)}return Object.defineProperty(Z,"defaultLocale",{get:function(){return Z.memoizedDefaultLocale||(Z.memoizedDefaultLocale=new Intl.NumberFormat().resolvedOptions().locale),Z.memoizedDefaultLocale},enumerable:!1,configurable:!0}),Z.memoizedDefaultLocale=null,Z.resolveLocale=function(W){if(typeof Intl.Locale!="undefined"){var Y=Intl.NumberFormat.supportedLocalesOf(W);return Y.length>0?new Intl.Locale(Y[0]):new Intl.Locale(typeof W=="string"?W:W[0])}},Z.__parse=v.Qc,Z.formats={number:{integer:{maximumFractionDigits:0},currency:{style:"currency"},percent:{style:"percent"}},date:{short:{month:"numeric",day:"numeric",year:"2-digit"},medium:{month:"short",day:"numeric",year:"numeric"},long:{month:"long",day:"numeric",year:"numeric"},full:{weekday:"long",month:"long",day:"numeric",year:"numeric"}},time:{short:{hour:"numeric",minute:"numeric"},medium:{hour:"numeric",minute:"numeric",second:"numeric"},long:{hour:"numeric",minute:"numeric",second:"numeric",timeZoneName:"short"},full:{hour:"numeric",minute:"numeric",second:"numeric",timeZoneName:"short"}}},Z}()},57474:function(U,F,c){"use strict";c.d(F,{C8:function(){return R},HR:function(){return D},YR:function(){return A},jK:function(){return v},u_:function(){return l}});var w=c(34254),v;(function(k){k.MISSING_VALUE="MISSING_VALUE",k.INVALID_VALUE="INVALID_VALUE",k.MISSING_INTL_API="MISSING_INTL_API"})(v||(v={}));var l=function(k){(0,w.ZT)(B,k);function B(z,Z,W){var Y=k.call(this,z)||this;return Y.code=Z,Y.originalMessage=W,Y}return B.prototype.toString=function(){return"[formatjs Error: ".concat(this.code,"] ").concat(this.message)},B}(Error),R=function(k){(0,w.ZT)(B,k);function B(z,Z,W,Y){return k.call(this,'Invalid values for "'.concat(z,'": "').concat(Z,'". Options are "').concat(Object.keys(W).join('", "'),'"'),v.INVALID_VALUE,Y)||this}return B}(l),A=function(k){(0,w.ZT)(B,k);function B(z,Z,W){return k.call(this,'Value for "'.concat(z,'" must be of type ').concat(Z),v.INVALID_VALUE,W)||this}return B}(l),D=function(k){(0,w.ZT)(B,k);function B(z,Z){return k.call(this,'The intl string context variable "'.concat(z,'" was not provided to the string "').concat(Z,'"'),v.MISSING_VALUE,Z)||this}return B}(l)},91078:function(U,F,c){"use strict";c.d(F,{FK:function(){return D},Gt:function(){return A},du:function(){return l}});var w=c(23166),v=c(57474),l;(function(k){k[k.literal=0]="literal",k[k.object=1]="object"})(l||(l={}));function R(k){return k.length<2?k:k.reduce(function(B,z){var Z=B[B.length-1];return!Z||Z.type!==l.literal||z.type!==l.literal?B.push(z):Z.value+=z.value,B},[])}function A(k){return typeof k=="function"}function D(k,B,z,Z,W,Y,te){if(k.length===1&&(0,w.O4)(k[0]))return[{type:l.literal,value:k[0].value}];for(var le=[],be=0,de=k;be<de.length;be++){var pe=de[be];if((0,w.O4)(pe)){le.push({type:l.literal,value:pe.value});continue}if((0,w.yx)(pe)){typeof Y=="number"&&le.push({type:l.literal,value:z.getNumberFormat(B).format(Y)});continue}var Oe=pe.value;if(!(W&&Oe in W))throw new v.HR(Oe,te);var xe=W[Oe];if((0,w.VG)(pe)){(!xe||typeof xe=="string"||typeof xe=="number")&&(xe=typeof xe=="string"||typeof xe=="number"?String(xe):""),le.push({type:typeof xe=="string"?l.literal:l.object,value:xe});continue}if((0,w.rp)(pe)){var Ve=typeof pe.style=="string"?Z.date[pe.style]:(0,w.Ii)(pe.style)?pe.style.parsedOptions:void 0;le.push({type:l.literal,value:z.getDateTimeFormat(B,Ve).format(xe)});continue}if((0,w.pe)(pe)){var Ve=typeof pe.style=="string"?Z.time[pe.style]:(0,w.Ii)(pe.style)?pe.style.parsedOptions:Z.time.medium;le.push({type:l.literal,value:z.getDateTimeFormat(B,Ve).format(xe)});continue}if((0,w.uf)(pe)){var Ve=typeof pe.style=="string"?Z.number[pe.style]:(0,w.Wh)(pe.style)?pe.style.parsedOptions:void 0;Ve&&Ve.scale&&(xe=xe*(Ve.scale||1)),le.push({type:l.literal,value:z.getNumberFormat(B,Ve).format(xe)});continue}if((0,w.HI)(pe)){var K=pe.children,ke=pe.value,we=W[ke];if(!A(we))throw new v.YR(ke,"function",te);var Me=D(K,B,z,Z,W,Y),Xe=we(Me.map(function(mt){return mt.value}));Array.isArray(Xe)||(Xe=[Xe]),le.push.apply(le,Xe.map(function(mt){return{type:typeof mt=="string"?l.literal:l.object,value:mt}}))}if((0,w.Wi)(pe)){var Ke=pe.options[xe]||pe.options.other;if(!Ke)throw new v.C8(pe.value,xe,Object.keys(pe.options),te);le.push.apply(le,D(Ke.value,B,z,Z,W));continue}if((0,w.Jo)(pe)){var Ke=pe.options["=".concat(xe)];if(!Ke){if(!Intl.PluralRules)throw new v.u_(`Intl.PluralRules is not available in this environment.
Try polyfilling it using "@formatjs/intl-pluralrules"
`,v.jK.MISSING_INTL_API,te);var At=z.getPluralRules(B,{type:pe.pluralType}).select(xe-(pe.offset||0));Ke=pe.options[At]||pe.options.other}if(!Ke)throw new v.C8(pe.value,xe,Object.keys(pe.options),te);le.push.apply(le,D(Ke.value,B,z,Z,W,xe-(pe.offset||0)));continue}}return R(le)}},53670:function(U){"use strict";var F=function(c,w,v,l,R,A,D,k){if(!c){var B;if(w===void 0)B=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var z=[v,l,R,A,D,k],Z=0;B=new Error(w.replace(/%s/g,function(){return z[Z++]})),B.name="Invariant Violation"}throw B.framesToPop=1,B}};U.exports=F},84530:function(U,F){"use strict";Object.defineProperty(F,"__esModule",{value:!0});var c=Symbol.for("INJECTION");function w(D,k,B,z){function Z(){return z&&!Reflect.hasMetadata(c,this,k)&&Reflect.defineMetadata(c,B(),this,k),Reflect.hasMetadata(c,this,k)?Reflect.getMetadata(c,this,k):B()}function W(Y){Reflect.defineMetadata(c,Y,this,k)}Object.defineProperty(D,k,{configurable:!0,enumerable:!0,get:Z,set:W})}function v(D,k){return function(B){return function(z,Z){var W=function(){return D.get(B)};w(z,Z,W,k)}}}F.makePropertyInjectDecorator=v;function l(D,k){return function(B,z){return function(Z,W){var Y=function(){return D.getNamed(B,z)};w(Z,W,Y,k)}}}F.makePropertyInjectNamedDecorator=l;function R(D,k){return function(B,z,Z){return function(W,Y){var te=function(){return D.getTagged(B,z,Z)};w(W,Y,te,k)}}}F.makePropertyInjectTaggedDecorator=R;function A(D,k){return function(B){return function(z,Z){var W=function(){return D.getAll(B)};w(z,Z,W,k)}}}F.makePropertyMultiInjectDecorator=A},67754:function(U,F,c){"use strict";var w;w={value:!0};var v=c(84530);function l(R,A){A===void 0&&(A=!0);var D=v.makePropertyInjectDecorator(R,A),k=v.makePropertyInjectNamedDecorator(R,A),B=v.makePropertyInjectTaggedDecorator(R,A),z=v.makePropertyMultiInjectDecorator(R,A);return{lazyInject:D,lazyInjectNamed:k,lazyInjectTagged:B,lazyMultiInject:z}}F.Z=l},38362:function(U,F,c){"use strict";Object.defineProperty(F,"__esModule",{value:!0}),F.tagProperty=F.tagParameter=F.decorate=void 0;var w=c(81463),v=c(17597);function l(z,Z,W,Y){var te=v.TAGGED;A(te,z,Z,Y,W)}F.tagParameter=l;function R(z,Z,W){var Y=v.TAGGED_PROP;A(Y,z.constructor,Z,W)}F.tagProperty=R;function A(z,Z,W,Y,te){var le={},be=typeof te=="number",de=te!==void 0&&be?te.toString():W;if(be&&W!==void 0)throw new Error(w.INVALID_DECORATOR_OPERATION);Reflect.hasOwnMetadata(z,Z)&&(le=Reflect.getMetadata(z,Z));var pe=le[de];if(!Array.isArray(pe))pe=[];else for(var Oe=0,xe=pe;Oe<xe.length;Oe++){var Ve=xe[Oe];if(Ve.key===Y.key)throw new Error(w.DUPLICATED_METADATA+" "+Ve.key.toString())}pe.push(Y),le[de]=pe,Reflect.defineMetadata(z,le,Z)}function D(z,Z){Reflect.decorate(z,Z)}function k(z,Z){return function(W,Y){Z(W,Y,z)}}function B(z,Z,W){typeof W=="number"?D([k(W,z)],Z):typeof W=="string"?Reflect.decorate([z],Z,W):D([z],Z)}F.decorate=B},71791:function(U,F,c){"use strict";Object.defineProperty(F,"__esModule",{value:!0}),F.inject=F.LazyServiceIdentifer=void 0;var w=c(81463),v=c(17597),l=c(4957),R=c(38362),A=function(){function k(B){this._cb=B}return k.prototype.unwrap=function(){return this._cb()},k}();F.LazyServiceIdentifer=A;function D(k){return function(B,z,Z){if(k===void 0)throw new Error(w.UNDEFINED_INJECT_ANNOTATION(B.name));var W=new l.Metadata(v.INJECT_TAG,k);typeof Z=="number"?R.tagParameter(B,z,Z,W):R.tagProperty(B,z,W)}}F.inject=D},66733:function(U,F,c){"use strict";Object.defineProperty(F,"__esModule",{value:!0}),F.injectable=void 0;var w=c(81463),v=c(17597);function l(){return function(R){if(Reflect.hasOwnMetadata(v.PARAM_TYPES,R))throw new Error(w.DUPLICATED_INJECTABLE_DECORATOR);var A=Reflect.getMetadata(v.DESIGN_PARAM_TYPES,R)||[];return Reflect.defineMetadata(v.PARAM_TYPES,A,R),R}}F.injectable=l},33406:function(U,F,c){"use strict";Object.defineProperty(F,"__esModule",{value:!0}),F.multiInject=void 0;var w=c(17597),v=c(4957),l=c(38362);function R(A){return function(D,k,B){var z=new v.Metadata(w.MULTI_INJECT_TAG,A);typeof B=="number"?l.tagParameter(D,k,B,z):l.tagProperty(D,k,z)}}F.multiInject=R},23769:function(U,F,c){"use strict";Object.defineProperty(F,"__esModule",{value:!0}),F.named=void 0;var w=c(17597),v=c(4957),l=c(38362);function R(A){return function(D,k,B){var z=new v.Metadata(w.NAMED_TAG,A);typeof B=="number"?l.tagParameter(D,k,B,z):l.tagProperty(D,k,z)}}F.named=R},57758:function(U,F,c){"use strict";Object.defineProperty(F,"__esModule",{value:!0}),F.optional=void 0;var w=c(17597),v=c(4957),l=c(38362);function R(){return function(A,D,k){var B=new v.Metadata(w.OPTIONAL_TAG,!0);typeof k=="number"?l.tagParameter(A,D,k,B):l.tagProperty(A,D,B)}}F.optional=R},82935:function(U,F,c){"use strict";Object.defineProperty(F,"__esModule",{value:!0}),F.postConstruct=void 0;var w=c(81463),v=c(17597),l=c(4957);function R(){return function(A,D,k){var B=new l.Metadata(v.POST_CONSTRUCT,D);if(Reflect.hasOwnMetadata(v.POST_CONSTRUCT,A.constructor))throw new Error(w.MULTIPLE_POST_CONSTRUCT_METHODS);Reflect.defineMetadata(v.POST_CONSTRUCT,B,A.constructor)}}F.postConstruct=R},76316:function(U,F,c){"use strict";Object.defineProperty(F,"__esModule",{value:!0}),F.tagged=void 0;var w=c(4957),v=c(38362);function l(R,A){return function(D,k,B){var z=new w.Metadata(R,A);typeof B=="number"?v.tagParameter(D,k,B,z):v.tagProperty(D,k,z)}}F.tagged=l},26805:function(U,F,c){"use strict";Object.defineProperty(F,"__esModule",{value:!0}),F.targetName=void 0;var w=c(17597),v=c(4957),l=c(38362);function R(A){return function(D,k,B){var z=new v.Metadata(w.NAME_TAG,A);l.tagParameter(D,k,B,z)}}F.targetName=R},39868:function(U,F,c){"use strict";Object.defineProperty(F,"__esModule",{value:!0}),F.unmanaged=void 0;var w=c(17597),v=c(4957),l=c(38362);function R(){return function(A,D,k){var B=new v.Metadata(w.UNMANAGED_TAG,!0);l.tagParameter(A,D,k,B)}}F.unmanaged=R},55047:function(U,F,c){"use strict";Object.defineProperty(F,"__esModule",{value:!0}),F.Binding=void 0;var w=c(71297),v=c(92452),l=function(){function R(A,D){this.id=v.id(),this.activated=!1,this.serviceIdentifier=A,this.scope=D,this.type=w.BindingTypeEnum.Invalid,this.constraint=function(k){return!0},this.implementationType=null,this.cache=null,this.factory=null,this.provider=null,this.onActivation=null,this.dynamicValue=null}return R.prototype.clone=function(){var A=new R(this.serviceIdentifier,this.scope);return A.activated=A.scope===w.BindingScopeEnum.Singleton?this.activated:!1,A.implementationType=this.implementationType,A.dynamicValue=this.dynamicValue,A.scope=this.scope,A.type=this.type,A.factory=this.factory,A.provider=this.provider,A.constraint=this.constraint,A.onActivation=this.onActivation,A.cache=this.cache,A},R}();F.Binding=l},53837:function(U,F){"use strict";Object.defineProperty(F,"__esModule",{value:!0}),F.BindingCount=void 0;var c={MultipleBindingsAvailable:2,NoBindingsAvailable:0,OnlyOneBindingAvailable:1};F.BindingCount=c},81463:function(U,F){"use strict";Object.defineProperty(F,"__esModule",{value:!0}),F.STACK_OVERFLOW=F.CIRCULAR_DEPENDENCY_IN_FACTORY=F.POST_CONSTRUCT_ERROR=F.MULTIPLE_POST_CONSTRUCT_METHODS=F.CONTAINER_OPTIONS_INVALID_SKIP_BASE_CHECK=F.CONTAINER_OPTIONS_INVALID_AUTO_BIND_INJECTABLE=F.CONTAINER_OPTIONS_INVALID_DEFAULT_SCOPE=F.CONTAINER_OPTIONS_MUST_BE_AN_OBJECT=F.ARGUMENTS_LENGTH_MISMATCH=F.INVALID_DECORATOR_OPERATION=F.INVALID_TO_SELF_VALUE=F.INVALID_FUNCTION_BINDING=F.INVALID_MIDDLEWARE_RETURN=F.NO_MORE_SNAPSHOTS_AVAILABLE=F.INVALID_BINDING_TYPE=F.NOT_IMPLEMENTED=F.CIRCULAR_DEPENDENCY=F.UNDEFINED_INJECT_ANNOTATION=F.MISSING_INJECT_ANNOTATION=F.MISSING_INJECTABLE_ANNOTATION=F.NOT_REGISTERED=F.CANNOT_UNBIND=F.AMBIGUOUS_MATCH=F.KEY_NOT_FOUND=F.NULL_ARGUMENT=F.DUPLICATED_METADATA=F.DUPLICATED_INJECTABLE_DECORATOR=void 0,F.DUPLICATED_INJECTABLE_DECORATOR="Cannot apply @injectable decorator multiple times.",F.DUPLICATED_METADATA="Metadata key was used more than once in a parameter:",F.NULL_ARGUMENT="NULL argument",F.KEY_NOT_FOUND="Key Not Found",F.AMBIGUOUS_MATCH="Ambiguous match found for serviceIdentifier:",F.CANNOT_UNBIND="Could not unbind serviceIdentifier:",F.NOT_REGISTERED="No matching bindings found for serviceIdentifier:",F.MISSING_INJECTABLE_ANNOTATION="Missing required @injectable annotation in:",F.MISSING_INJECT_ANNOTATION="Missing required @inject or @multiInject annotation in:";var c=function(R){return"@inject called with undefined this could mean that the class "+R+" has a circular dependency problem. You can use a LazyServiceIdentifer to  overcome this limitation."};F.UNDEFINED_INJECT_ANNOTATION=c,F.CIRCULAR_DEPENDENCY="Circular dependency found:",F.NOT_IMPLEMENTED="Sorry, this feature is not fully implemented yet.",F.INVALID_BINDING_TYPE="Invalid binding type:",F.NO_MORE_SNAPSHOTS_AVAILABLE="No snapshot available to restore.",F.INVALID_MIDDLEWARE_RETURN="Invalid return type in middleware. Middleware must return!",F.INVALID_FUNCTION_BINDING="Value provided to function binding must be a function!",F.INVALID_TO_SELF_VALUE="The toSelf function can only be applied when a constructor is used as service identifier",F.INVALID_DECORATOR_OPERATION="The @inject @multiInject @tagged and @named decorators must be applied to the parameters of a class constructor or a class property.";var w=function(){for(var R=[],A=0;A<arguments.length;A++)R[A]=arguments[A];return"The number of constructor arguments in the derived class "+(R[0]+" must be >= than the number of constructor arguments of its base class.")};F.ARGUMENTS_LENGTH_MISMATCH=w,F.CONTAINER_OPTIONS_MUST_BE_AN_OBJECT="Invalid Container constructor argument. Container options must be an object.",F.CONTAINER_OPTIONS_INVALID_DEFAULT_SCOPE="Invalid Container option. Default scope must be a string ('singleton' or 'transient').",F.CONTAINER_OPTIONS_INVALID_AUTO_BIND_INJECTABLE="Invalid Container option. Auto bind injectable must be a boolean",F.CONTAINER_OPTIONS_INVALID_SKIP_BASE_CHECK="Invalid Container option. Skip base check must be a boolean",F.MULTIPLE_POST_CONSTRUCT_METHODS="Cannot apply @postConstruct decorator multiple times in the same class";var v=function(){for(var R=[],A=0;A<arguments.length;A++)R[A]=arguments[A];return"@postConstruct error in class "+R[0]+": "+R[1]};F.POST_CONSTRUCT_ERROR=v;var l=function(){for(var R=[],A=0;A<arguments.length;A++)R[A]=arguments[A];return"It looks like there is a circular dependency "+("in one of the '"+R[0]+"' bindings. Please investigate bindings with")+("service identifier '"+R[1]+"'.")};F.CIRCULAR_DEPENDENCY_IN_FACTORY=l,F.STACK_OVERFLOW="Maximum call stack size exceeded"},71297:function(U,F){"use strict";Object.defineProperty(F,"__esModule",{value:!0}),F.TargetTypeEnum=F.BindingTypeEnum=F.BindingScopeEnum=void 0;var c={Request:"Request",Singleton:"Singleton",Transient:"Transient"};F.BindingScopeEnum=c;var w={ConstantValue:"ConstantValue",Constructor:"Constructor",DynamicValue:"DynamicValue",Factory:"Factory",Function:"Function",Instance:"Instance",Invalid:"Invalid",Provider:"Provider"};F.BindingTypeEnum=w;var v={ClassProperty:"ClassProperty",ConstructorArgument:"ConstructorArgument",Variable:"Variable"};F.TargetTypeEnum=v},17597:function(U,F){"use strict";Object.defineProperty(F,"__esModule",{value:!0}),F.NON_CUSTOM_TAG_KEYS=F.POST_CONSTRUCT=F.DESIGN_PARAM_TYPES=F.PARAM_TYPES=F.TAGGED_PROP=F.TAGGED=F.MULTI_INJECT_TAG=F.INJECT_TAG=F.OPTIONAL_TAG=F.UNMANAGED_TAG=F.NAME_TAG=F.NAMED_TAG=void 0,F.NAMED_TAG="named",F.NAME_TAG="name",F.UNMANAGED_TAG="unmanaged",F.OPTIONAL_TAG="optional",F.INJECT_TAG="inject",F.MULTI_INJECT_TAG="multi_inject",F.TAGGED="inversify:tagged",F.TAGGED_PROP="inversify:tagged_props",F.PARAM_TYPES="inversify:paramtypes",F.DESIGN_PARAM_TYPES="design:paramtypes",F.POST_CONSTRUCT="post_construct";function c(){return[F.INJECT_TAG,F.MULTI_INJECT_TAG,F.NAME_TAG,F.UNMANAGED_TAG,F.NAMED_TAG,F.OPTIONAL_TAG]}F.NON_CUSTOM_TAG_KEYS=c()},27877:function(U,F,c){"use strict";var w=this&&this.__awaiter||function(pe,Oe,xe,Ve){function K(ke){return ke instanceof xe?ke:new xe(function(we){we(ke)})}return new(xe||(xe=Promise))(function(ke,we){function Me(At){try{Ke(Ve.next(At))}catch(mt){we(mt)}}function Xe(At){try{Ke(Ve.throw(At))}catch(mt){we(mt)}}function Ke(At){At.done?ke(At.value):K(At.value).then(Me,Xe)}Ke((Ve=Ve.apply(pe,Oe||[])).next())})},v=this&&this.__generator||function(pe,Oe){var xe={label:0,sent:function(){if(ke[0]&1)throw ke[1];return ke[1]},trys:[],ops:[]},Ve,K,ke,we;return we={next:Me(0),throw:Me(1),return:Me(2)},typeof Symbol=="function"&&(we[Symbol.iterator]=function(){return this}),we;function Me(Ke){return function(At){return Xe([Ke,At])}}function Xe(Ke){if(Ve)throw new TypeError("Generator is already executing.");for(;xe;)try{if(Ve=1,K&&(ke=Ke[0]&2?K.return:Ke[0]?K.throw||((ke=K.return)&&ke.call(K),0):K.next)&&!(ke=ke.call(K,Ke[1])).done)return ke;switch(K=0,ke&&(Ke=[Ke[0]&2,ke.value]),Ke[0]){case 0:case 1:ke=Ke;break;case 4:return xe.label++,{value:Ke[1],done:!1};case 5:xe.label++,K=Ke[1],Ke=[0];continue;case 7:Ke=xe.ops.pop(),xe.trys.pop();continue;default:if(ke=xe.trys,!(ke=ke.length>0&&ke[ke.length-1])&&(Ke[0]===6||Ke[0]===2)){xe=0;continue}if(Ke[0]===3&&(!ke||Ke[1]>ke[0]&&Ke[1]<ke[3])){xe.label=Ke[1];break}if(Ke[0]===6&&xe.label<ke[1]){xe.label=ke[1],ke=Ke;break}if(ke&&xe.label<ke[2]){xe.label=ke[2],xe.ops.push(Ke);break}ke[2]&&xe.ops.pop(),xe.trys.pop();continue}Ke=Oe.call(pe,xe)}catch(At){Ke=[6,At],K=0}finally{Ve=ke=0}if(Ke[0]&5)throw Ke[1];return{value:Ke[0]?Ke[1]:void 0,done:!0}}},l=this&&this.__spreadArray||function(pe,Oe){for(var xe=0,Ve=Oe.length,K=pe.length;xe<Ve;xe++,K++)pe[K]=Oe[xe];return pe};Object.defineProperty(F,"__esModule",{value:!0}),F.Container=void 0;var R=c(55047),A=c(81463),D=c(71297),k=c(17597),B=c(51288),z=c(14346),Z=c(50857),W=c(98e3),Y=c(92452),te=c(96783),le=c(527),be=c(7026),de=function(){function pe(Oe){this._appliedMiddleware=[];var xe=Oe||{};if(typeof xe!="object")throw new Error(""+A.CONTAINER_OPTIONS_MUST_BE_AN_OBJECT);if(xe.defaultScope===void 0)xe.defaultScope=D.BindingScopeEnum.Transient;else if(xe.defaultScope!==D.BindingScopeEnum.Singleton&&xe.defaultScope!==D.BindingScopeEnum.Transient&&xe.defaultScope!==D.BindingScopeEnum.Request)throw new Error(""+A.CONTAINER_OPTIONS_INVALID_DEFAULT_SCOPE);if(xe.autoBindInjectable===void 0)xe.autoBindInjectable=!1;else if(typeof xe.autoBindInjectable!="boolean")throw new Error(""+A.CONTAINER_OPTIONS_INVALID_AUTO_BIND_INJECTABLE);if(xe.skipBaseClassChecks===void 0)xe.skipBaseClassChecks=!1;else if(typeof xe.skipBaseClassChecks!="boolean")throw new Error(""+A.CONTAINER_OPTIONS_INVALID_SKIP_BASE_CHECK);this.options={autoBindInjectable:xe.autoBindInjectable,defaultScope:xe.defaultScope,skipBaseClassChecks:xe.skipBaseClassChecks},this.id=Y.id(),this._bindingDictionary=new be.Lookup,this._snapshots=[],this._middleware=null,this.parent=null,this._metadataReader=new B.MetadataReader}return pe.merge=function(Oe,xe){for(var Ve=[],K=2;K<arguments.length;K++)Ve[K-2]=arguments[K];var ke=new pe,we=l([Oe,xe],Ve).map(function(Ke){return z.getBindingDictionary(Ke)}),Me=z.getBindingDictionary(ke);function Xe(Ke,At){Ke.traverse(function(mt,ie){ie.forEach(function(oe){At.add(oe.serviceIdentifier,oe.clone())})})}return we.forEach(function(Ke){Xe(Ke,Me)}),ke},pe.prototype.load=function(){for(var Oe=[],xe=0;xe<arguments.length;xe++)Oe[xe]=arguments[xe];for(var Ve=this._getContainerModuleHelpersFactory(),K=0,ke=Oe;K<ke.length;K++){var we=ke[K],Me=Ve(we.id);we.registry(Me.bindFunction,Me.unbindFunction,Me.isboundFunction,Me.rebindFunction)}},pe.prototype.loadAsync=function(){for(var Oe=[],xe=0;xe<arguments.length;xe++)Oe[xe]=arguments[xe];return w(this,void 0,void 0,function(){var Ve,K,ke,we,Me;return v(this,function(Xe){switch(Xe.label){case 0:Ve=this._getContainerModuleHelpersFactory(),K=0,ke=Oe,Xe.label=1;case 1:return K<ke.length?(we=ke[K],Me=Ve(we.id),[4,we.registry(Me.bindFunction,Me.unbindFunction,Me.isboundFunction,Me.rebindFunction)]):[3,4];case 2:Xe.sent(),Xe.label=3;case 3:return K++,[3,1];case 4:return[2]}})})},pe.prototype.unload=function(){for(var Oe=this,xe=[],Ve=0;Ve<arguments.length;Ve++)xe[Ve]=arguments[Ve];var K=function(ke){return function(we){return we.moduleId===ke}};xe.forEach(function(ke){var we=K(ke.id);Oe._bindingDictionary.removeByCondition(we)})},pe.prototype.bind=function(Oe){var xe=this.options.defaultScope||D.BindingScopeEnum.Transient,Ve=new R.Binding(Oe,xe);return this._bindingDictionary.add(Oe,Ve),new W.BindingToSyntax(Ve)},pe.prototype.rebind=function(Oe){return this.unbind(Oe),this.bind(Oe)},pe.prototype.unbind=function(Oe){try{this._bindingDictionary.remove(Oe)}catch(xe){throw new Error(A.CANNOT_UNBIND+" "+te.getServiceIdentifierAsString(Oe))}},pe.prototype.unbindAll=function(){this._bindingDictionary=new be.Lookup},pe.prototype.isBound=function(Oe){var xe=this._bindingDictionary.hasKey(Oe);return!xe&&this.parent&&(xe=this.parent.isBound(Oe)),xe},pe.prototype.isBoundNamed=function(Oe,xe){return this.isBoundTagged(Oe,k.NAMED_TAG,xe)},pe.prototype.isBoundTagged=function(Oe,xe,Ve){var K=!1;if(this._bindingDictionary.hasKey(Oe)){var ke=this._bindingDictionary.get(Oe),we=z.createMockRequest(this,Oe,xe,Ve);K=ke.some(function(Me){return Me.constraint(we)})}return!K&&this.parent&&(K=this.parent.isBoundTagged(Oe,xe,Ve)),K},pe.prototype.snapshot=function(){this._snapshots.push(le.ContainerSnapshot.of(this._bindingDictionary.clone(),this._middleware))},pe.prototype.restore=function(){var Oe=this._snapshots.pop();if(Oe===void 0)throw new Error(A.NO_MORE_SNAPSHOTS_AVAILABLE);this._bindingDictionary=Oe.bindings,this._middleware=Oe.middleware},pe.prototype.createChild=function(Oe){var xe=new pe(Oe||this.options);return xe.parent=this,xe},pe.prototype.applyMiddleware=function(){for(var Oe=[],xe=0;xe<arguments.length;xe++)Oe[xe]=arguments[xe];this._appliedMiddleware=this._appliedMiddleware.concat(Oe);var Ve=this._middleware?this._middleware:this._planAndResolve();this._middleware=Oe.reduce(function(K,ke){return ke(K)},Ve)},pe.prototype.applyCustomMetadataReader=function(Oe){this._metadataReader=Oe},pe.prototype.get=function(Oe){return this._get(!1,!1,D.TargetTypeEnum.Variable,Oe)},pe.prototype.getTagged=function(Oe,xe,Ve){return this._get(!1,!1,D.TargetTypeEnum.Variable,Oe,xe,Ve)},pe.prototype.getNamed=function(Oe,xe){return this.getTagged(Oe,k.NAMED_TAG,xe)},pe.prototype.getAll=function(Oe){return this._get(!0,!0,D.TargetTypeEnum.Variable,Oe)},pe.prototype.getAllTagged=function(Oe,xe,Ve){return this._get(!1,!0,D.TargetTypeEnum.Variable,Oe,xe,Ve)},pe.prototype.getAllNamed=function(Oe,xe){return this.getAllTagged(Oe,k.NAMED_TAG,xe)},pe.prototype.resolve=function(Oe){var xe=this.createChild();return xe.bind(Oe).toSelf(),this._appliedMiddleware.forEach(function(Ve){xe.applyMiddleware(Ve)}),xe.get(Oe)},pe.prototype._getContainerModuleHelpersFactory=function(){var Oe=this,xe=function(Me,Xe){Me._binding.moduleId=Xe},Ve=function(Me){return function(Xe){var Ke=Oe.bind.bind(Oe),At=Ke(Xe);return xe(At,Me),At}},K=function(Me){return function(Xe){var Ke=Oe.unbind.bind(Oe);Ke(Xe)}},ke=function(Me){return function(Xe){var Ke=Oe.isBound.bind(Oe);return Ke(Xe)}},we=function(Me){return function(Xe){var Ke=Oe.rebind.bind(Oe),At=Ke(Xe);return xe(At,Me),At}};return function(Me){return{bindFunction:Ve(Me),isboundFunction:ke(Me),rebindFunction:we(Me),unbindFunction:K(Me)}}},pe.prototype._get=function(Oe,xe,Ve,K,ke,we){var Me=null,Xe={avoidConstraints:Oe,contextInterceptor:function(Ke){return Ke},isMultiInject:xe,key:ke,serviceIdentifier:K,targetType:Ve,value:we};if(this._middleware){if(Me=this._middleware(Xe),Me==null)throw new Error(A.INVALID_MIDDLEWARE_RETURN)}else Me=this._planAndResolve()(Xe);return Me},pe.prototype._planAndResolve=function(){var Oe=this;return function(xe){var Ve=z.plan(Oe._metadataReader,Oe,xe.isMultiInject,xe.targetType,xe.serviceIdentifier,xe.key,xe.value,xe.avoidConstraints);Ve=xe.contextInterceptor(Ve);var K=Z.resolve(Ve);return K}},pe}();F.Container=de},66440:function(U,F,c){"use strict";Object.defineProperty(F,"__esModule",{value:!0}),F.AsyncContainerModule=F.ContainerModule=void 0;var w=c(92452),v=function(){function R(A){this.id=w.id(),this.registry=A}return R}();F.ContainerModule=v;var l=function(){function R(A){this.id=w.id(),this.registry=A}return R}();F.AsyncContainerModule=l},527:function(U,F){"use strict";Object.defineProperty(F,"__esModule",{value:!0}),F.ContainerSnapshot=void 0;var c=function(){function w(){}return w.of=function(v,l){var R=new w;return R.bindings=v,R.middleware=l,R},w}();F.ContainerSnapshot=c},7026:function(U,F,c){"use strict";Object.defineProperty(F,"__esModule",{value:!0}),F.Lookup=void 0;var w=c(81463),v=function(){function l(){this._map=new Map}return l.prototype.getMap=function(){return this._map},l.prototype.add=function(R,A){if(R==null)throw new Error(w.NULL_ARGUMENT);if(A==null)throw new Error(w.NULL_ARGUMENT);var D=this._map.get(R);D!==void 0?(D.push(A),this._map.set(R,D)):this._map.set(R,[A])},l.prototype.get=function(R){if(R==null)throw new Error(w.NULL_ARGUMENT);var A=this._map.get(R);if(A!==void 0)return A;throw new Error(w.KEY_NOT_FOUND)},l.prototype.remove=function(R){if(R==null)throw new Error(w.NULL_ARGUMENT);if(!this._map.delete(R))throw new Error(w.KEY_NOT_FOUND)},l.prototype.removeByCondition=function(R){var A=this;this._map.forEach(function(D,k){var B=D.filter(function(z){return!R(z)});B.length>0?A._map.set(k,B):A._map.delete(k)})},l.prototype.hasKey=function(R){if(R==null)throw new Error(w.NULL_ARGUMENT);return this._map.has(R)},l.prototype.clone=function(){var R=new l;return this._map.forEach(function(A,D){A.forEach(function(k){return R.add(D,k.clone())})}),R},l.prototype.traverse=function(R){this._map.forEach(function(A,D){R(D,A)})},l}();F.Lookup=v},14156:function(U,F,c){"use strict";var w;w={value:!0},w=w=w=w=w=w=F.GW=w=w=F.zY=w=w=w=w=w=F.f3=w=w=F.b2=w=w=w=w=w=F.W2=w=void 0;var v=c(17597);w=v;var l=c(27877);Object.defineProperty(F,"W2",{enumerable:!0,get:function(){return l.Container}});var R=c(71297);w={enumerable:!0,get:function(){return R.BindingScopeEnum}},w={enumerable:!0,get:function(){return R.BindingTypeEnum}},w={enumerable:!0,get:function(){return R.TargetTypeEnum}};var A=c(66440);w={enumerable:!0,get:function(){return A.AsyncContainerModule}},w={enumerable:!0,get:function(){return A.ContainerModule}};var D=c(66733);Object.defineProperty(F,"b2",{enumerable:!0,get:function(){return D.injectable}});var k=c(76316);w={enumerable:!0,get:function(){return k.tagged}};var B=c(23769);w={enumerable:!0,get:function(){return B.named}};var z=c(71791);Object.defineProperty(F,"f3",{enumerable:!0,get:function(){return z.inject}}),w={enumerable:!0,get:function(){return z.LazyServiceIdentifer}};var Z=c(57758);w={enumerable:!0,get:function(){return Z.optional}};var W=c(39868);w={enumerable:!0,get:function(){return W.unmanaged}};var Y=c(33406);w={enumerable:!0,get:function(){return Y.multiInject}};var te=c(26805);w={enumerable:!0,get:function(){return te.targetName}};var le=c(82935);Object.defineProperty(F,"zY",{enumerable:!0,get:function(){return le.postConstruct}});var be=c(51288);w={enumerable:!0,get:function(){return be.MetadataReader}};var de=c(92452);w={enumerable:!0,get:function(){return de.id}};var pe=c(38362);Object.defineProperty(F,"GW",{enumerable:!0,get:function(){return pe.decorate}});var Oe=c(95093);w={enumerable:!0,get:function(){return Oe.traverseAncerstors}},w={enumerable:!0,get:function(){return Oe.taggedConstraint}},w={enumerable:!0,get:function(){return Oe.namedConstraint}},w={enumerable:!0,get:function(){return Oe.typeConstraint}};var xe=c(96783);w={enumerable:!0,get:function(){return xe.getServiceIdentifierAsString}};var Ve=c(6024);w={enumerable:!0,get:function(){return Ve.multiBindToService}}},68338:function(U,F,c){"use strict";Object.defineProperty(F,"__esModule",{value:!0}),F.Context=void 0;var w=c(92452),v=function(){function l(R){this.id=w.id(),this.container=R}return l.prototype.addPlan=function(R){this.plan=R},l.prototype.setCurrentRequest=function(R){this.currentRequest=R},l}();F.Context=v},4957:function(U,F,c){"use strict";Object.defineProperty(F,"__esModule",{value:!0}),F.Metadata=void 0;var w=c(17597),v=function(){function l(R,A){this.key=R,this.value=A}return l.prototype.toString=function(){return this.key===w.NAMED_TAG?"named: "+this.value.toString()+" ":"tagged: { key:"+this.key.toString()+", value: "+this.value+" }"},l}();F.Metadata=v},51288:function(U,F,c){"use strict";Object.defineProperty(F,"__esModule",{value:!0}),F.MetadataReader=void 0;var w=c(17597),v=function(){function l(){}return l.prototype.getConstructorMetadata=function(R){var A=Reflect.getMetadata(w.PARAM_TYPES,R),D=Reflect.getMetadata(w.TAGGED,R);return{compilerGeneratedMetadata:A,userGeneratedMetadata:D||{}}},l.prototype.getPropertiesMetadata=function(R){var A=Reflect.getMetadata(w.TAGGED_PROP,R)||[];return A},l}();F.MetadataReader=v},30515:function(U,F){"use strict";Object.defineProperty(F,"__esModule",{value:!0}),F.Plan=void 0;var c=function(){function w(v,l){this.parentContext=v,this.rootRequest=l}return w}();F.Plan=c},14346:function(U,F,c){"use strict";Object.defineProperty(F,"__esModule",{value:!0}),F.getBindingDictionary=F.createMockRequest=F.plan=void 0;var w=c(53837),v=c(81463),l=c(71297),R=c(17597),A=c(99438),D=c(96783),k=c(68338),B=c(4957),z=c(30515),Z=c(4793),W=c(39373),Y=c(90700);function te(K){return K._bindingDictionary}F.getBindingDictionary=te;function le(K,ke,we,Me,Xe,Ke){var At=K?R.MULTI_INJECT_TAG:R.INJECT_TAG,mt=new B.Metadata(At,we),ie=new Y.Target(ke,Me,we,mt);if(Xe!==void 0){var oe=new B.Metadata(Xe,Ke);ie.metadata.push(oe)}return ie}function be(K,ke,we,Me,Xe){var Ke=Oe(we.container,Xe.serviceIdentifier),At=[];return Ke.length===w.BindingCount.NoBindingsAvailable&&we.container.options.autoBindInjectable&&typeof Xe.serviceIdentifier=="function"&&K.getConstructorMetadata(Xe.serviceIdentifier).compilerGeneratedMetadata&&(we.container.bind(Xe.serviceIdentifier).toSelf(),Ke=Oe(we.container,Xe.serviceIdentifier)),ke?At=Ke:At=Ke.filter(function(mt){var ie=new W.Request(mt.serviceIdentifier,we,Me,mt,Xe);return mt.constraint(ie)}),de(Xe.serviceIdentifier,At,Xe,we.container),At}function de(K,ke,we,Me){switch(ke.length){case w.BindingCount.NoBindingsAvailable:if(we.isOptional())return ke;var Xe=D.getServiceIdentifierAsString(K),Ke=v.NOT_REGISTERED;throw Ke+=D.listMetadataForTarget(Xe,we),Ke+=D.listRegisteredBindingsForServiceIdentifier(Me,Xe,Oe),new Error(Ke);case w.BindingCount.OnlyOneBindingAvailable:if(!we.isArray())return ke;case w.BindingCount.MultipleBindingsAvailable:default:if(we.isArray())return ke;var Xe=D.getServiceIdentifierAsString(K),Ke=v.AMBIGUOUS_MATCH+" "+Xe;throw Ke+=D.listRegisteredBindingsForServiceIdentifier(Me,Xe,Oe),new Error(Ke)}}function pe(K,ke,we,Me,Xe,Ke){var At,mt;if(Xe===null){At=be(K,ke,Me,null,Ke),mt=new W.Request(we,Me,null,At,Ke);var ie=new z.Plan(Me,mt);Me.addPlan(ie)}else At=be(K,ke,Me,Xe,Ke),mt=Xe.addChildRequest(Ke.serviceIdentifier,At,Ke);At.forEach(function(oe){var he=null;if(Ke.isArray())he=mt.addChildRequest(oe.serviceIdentifier,oe,Ke);else{if(oe.cache)return;he=mt}if(oe.type===l.BindingTypeEnum.Instance&&oe.implementationType!==null){var ye=Z.getDependencies(K,oe.implementationType);if(!Me.container.options.skipBaseClassChecks){var se=Z.getBaseClassDependencyCount(K,oe.implementationType);if(ye.length<se){var Ne=v.ARGUMENTS_LENGTH_MISMATCH(Z.getFunctionName(oe.implementationType));throw new Error(Ne)}}ye.forEach(function(st){pe(K,!1,st.serviceIdentifier,Me,he,st)})}})}function Oe(K,ke){var we=[],Me=te(K);return Me.hasKey(ke)?we=Me.get(ke):K.parent!==null&&(we=Oe(K.parent,ke)),we}function xe(K,ke,we,Me,Xe,Ke,At,mt){mt===void 0&&(mt=!1);var ie=new k.Context(ke),oe=le(we,Me,Xe,"",Ke,At);try{return pe(K,mt,Xe,ie,null,oe),ie}catch(he){throw A.isStackOverflowExeption(he)&&ie.plan&&D.circularDependencyToException(ie.plan.rootRequest),he}}F.plan=xe;function Ve(K,ke,we,Me){var Xe=new Y.Target(l.TargetTypeEnum.Variable,"",ke,new B.Metadata(we,Me)),Ke=new k.Context(K),At=new W.Request(ke,Ke,null,[],Xe);return At}F.createMockRequest=Ve},41141:function(U,F){"use strict";Object.defineProperty(F,"__esModule",{value:!0}),F.QueryableString=void 0;var c=function(){function w(v){this.str=v}return w.prototype.startsWith=function(v){return this.str.indexOf(v)===0},w.prototype.endsWith=function(v){var l="",R=v.split("").reverse().join("");return l=this.str.split("").reverse().join(""),this.startsWith.call({str:l},R)},w.prototype.contains=function(v){return this.str.indexOf(v)!==-1},w.prototype.equals=function(v){return this.str===v},w.prototype.value=function(){return this.str},w}();F.QueryableString=c},4793:function(U,F,c){"use strict";var w=this&&this.__spreadArray||function(be,de){for(var pe=0,Oe=de.length,xe=be.length;pe<Oe;pe++,xe++)be[xe]=de[pe];return be};Object.defineProperty(F,"__esModule",{value:!0}),F.getFunctionName=F.getBaseClassDependencyCount=F.getDependencies=void 0;var v=c(71791),l=c(81463),R=c(71297),A=c(17597),D=c(96783);Object.defineProperty(F,"getFunctionName",{enumerable:!0,get:function(){return D.getFunctionName}});var k=c(90700);function B(be,de){var pe=D.getFunctionName(de),Oe=z(be,pe,de,!1);return Oe}F.getDependencies=B;function z(be,de,pe,Oe){var xe=be.getConstructorMetadata(pe),Ve=xe.compilerGeneratedMetadata;if(Ve===void 0){var K=l.MISSING_INJECTABLE_ANNOTATION+" "+de+".";throw new Error(K)}var ke=xe.userGeneratedMetadata,we=Object.keys(ke),Me=pe.length===0&&we.length>0,Xe=we.length>pe.length,Ke=Me||Xe?we.length:pe.length,At=W(Oe,de,Ve,ke,Ke),mt=Y(be,pe),ie=w(w([],At),mt);return ie}function Z(be,de,pe,Oe,xe){var Ve=xe[be.toString()]||[],K=le(Ve),ke=K.unmanaged!==!0,we=Oe[be],Me=K.inject||K.multiInject;if(we=Me||we,we instanceof v.LazyServiceIdentifer&&(we=we.unwrap()),ke){var Xe=we===Object,Ke=we===Function,At=we===void 0,mt=Xe||Ke||At;if(!de&&mt){var ie=l.MISSING_INJECT_ANNOTATION+" argument "+be+" in class "+pe+".";throw new Error(ie)}var oe=new k.Target(R.TargetTypeEnum.ConstructorArgument,K.targetName,we);return oe.metadata=Ve,oe}return null}function W(be,de,pe,Oe,xe){for(var Ve=[],K=0;K<xe;K++){var ke=K,we=Z(ke,be,de,pe,Oe);we!==null&&Ve.push(we)}return Ve}function Y(be,de){for(var pe=be.getPropertiesMetadata(de),Oe=[],xe=Object.keys(pe),Ve=0,K=xe;Ve<K.length;Ve++){var ke=K[Ve],we=pe[ke],Me=le(pe[ke]),Xe=Me.targetName||ke,Ke=Me.inject||Me.multiInject,At=new k.Target(R.TargetTypeEnum.ClassProperty,Xe,Ke);At.metadata=we,Oe.push(At)}var mt=Object.getPrototypeOf(de.prototype).constructor;if(mt!==Object){var ie=Y(be,mt);Oe=w(w([],Oe),ie)}return Oe}function te(be,de){var pe=Object.getPrototypeOf(de.prototype).constructor;if(pe!==Object){var Oe=D.getFunctionName(pe),xe=z(be,Oe,pe,!0),Ve=xe.map(function(we){return we.metadata.filter(function(Me){return Me.key===A.UNMANAGED_TAG})}),K=[].concat.apply([],Ve).length,ke=xe.length-K;return ke>0?ke:te(be,pe)}else return 0}F.getBaseClassDependencyCount=te;function le(be){var de={};return be.forEach(function(pe){de[pe.key.toString()]=pe.value}),{inject:de[A.INJECT_TAG],multiInject:de[A.MULTI_INJECT_TAG],targetName:de[A.NAME_TAG],unmanaged:de[A.UNMANAGED_TAG]}}},39373:function(U,F,c){"use strict";Object.defineProperty(F,"__esModule",{value:!0}),F.Request=void 0;var w=c(92452),v=function(){function l(R,A,D,k,B){this.id=w.id(),this.serviceIdentifier=R,this.parentContext=A,this.parentRequest=D,this.target=B,this.childRequests=[],this.bindings=Array.isArray(k)?k:[k],this.requestScope=D===null?new Map:null}return l.prototype.addChildRequest=function(R,A,D){var k=new l(R,this.parentContext,this,A,D);return this.childRequests.push(k),k},l}();F.Request=v},90700:function(U,F,c){"use strict";Object.defineProperty(F,"__esModule",{value:!0}),F.Target=void 0;var w=c(17597),v=c(92452),l=c(4957),R=c(41141),A=function(){function D(k,B,z,Z){this.id=v.id(),this.type=k,this.serviceIdentifier=z,this.name=new R.QueryableString(B||""),this.metadata=new Array;var W=null;typeof Z=="string"?W=new l.Metadata(w.NAMED_TAG,Z):Z instanceof l.Metadata&&(W=Z),W!==null&&this.metadata.push(W)}return D.prototype.hasTag=function(k){for(var B=0,z=this.metadata;B<z.length;B++){var Z=z[B];if(Z.key===k)return!0}return!1},D.prototype.isArray=function(){return this.hasTag(w.MULTI_INJECT_TAG)},D.prototype.matchesArray=function(k){return this.matchesTag(w.MULTI_INJECT_TAG)(k)},D.prototype.isNamed=function(){return this.hasTag(w.NAMED_TAG)},D.prototype.isTagged=function(){return this.metadata.some(function(k){return w.NON_CUSTOM_TAG_KEYS.every(function(B){return k.key!==B})})},D.prototype.isOptional=function(){return this.matchesTag(w.OPTIONAL_TAG)(!0)},D.prototype.getNamedTag=function(){return this.isNamed()?this.metadata.filter(function(k){return k.key===w.NAMED_TAG})[0]:null},D.prototype.getCustomTags=function(){return this.isTagged()?this.metadata.filter(function(k){return w.NON_CUSTOM_TAG_KEYS.every(function(B){return k.key!==B})}):null},D.prototype.matchesNamedTag=function(k){return this.matchesTag(w.NAMED_TAG)(k)},D.prototype.matchesTag=function(k){var B=this;return function(z){for(var Z=0,W=B.metadata;Z<W.length;Z++){var Y=W[Z];if(Y.key===k&&Y.value===z)return!0}return!1}},D}();F.Target=A},31831:function(U,F,c){"use strict";var w=this&&this.__spreadArray||function(z,Z){for(var W=0,Y=Z.length,te=z.length;W<Y;W++,te++)z[te]=Z[W];return z};Object.defineProperty(F,"__esModule",{value:!0}),F.resolveInstance=void 0;var v=c(81463),l=c(71297),R=c(17597);function A(z,Z,W){var Y=Z.filter(function(le){return le.target!==null&&le.target.type===l.TargetTypeEnum.ClassProperty}),te=Y.map(W);return Y.forEach(function(le,be){var de="";de=le.target.name.value();var pe=te[be];z[de]=pe}),z}function D(z,Z){return new(z.bind.apply(z,w([void 0],Z)))}function k(z,Z){if(Reflect.hasMetadata(R.POST_CONSTRUCT,z)){var W=Reflect.getMetadata(R.POST_CONSTRUCT,z);try{Z[W.value]()}catch(Y){throw new Error(v.POST_CONSTRUCT_ERROR(z.name,Y.message))}}}function B(z,Z,W){var Y=null;if(Z.length>0){var te=Z.filter(function(be){return be.target!==null&&be.target.type===l.TargetTypeEnum.ConstructorArgument}),le=te.map(W);Y=D(z,le),Y=A(Y,Z,W)}else Y=new z;return k(z,Y),Y}F.resolveInstance=B},50857:function(U,F,c){"use strict";Object.defineProperty(F,"__esModule",{value:!0}),F.resolve=void 0;var w=c(81463),v=c(71297),l=c(99438),R=c(96783),A=c(31831),D=function(z,Z,W){try{return W()}catch(Y){throw l.isStackOverflowExeption(Y)?new Error(w.CIRCULAR_DEPENDENCY_IN_FACTORY(z,Z.toString())):Y}},k=function(z){return function(Z){Z.parentContext.setCurrentRequest(Z);var W=Z.bindings,Y=Z.childRequests,te=Z.target&&Z.target.isArray(),le=!Z.parentRequest||!Z.parentRequest.target||!Z.target||!Z.parentRequest.target.matchesArray(Z.target.serviceIdentifier);if(te&&le)return Y.map(function(Ve){var K=k(z);return K(Ve)});var be=null;if(Z.target.isOptional()&&W.length===0)return;var de=W[0],pe=de.scope===v.BindingScopeEnum.Singleton,Oe=de.scope===v.BindingScopeEnum.Request;if(pe&&de.activated)return de.cache;if(Oe&&z!==null&&z.has(de.id))return z.get(de.id);if(de.type===v.BindingTypeEnum.ConstantValue)be=de.cache,de.activated=!0;else if(de.type===v.BindingTypeEnum.Function)be=de.cache,de.activated=!0;else if(de.type===v.BindingTypeEnum.Constructor)be=de.implementationType;else if(de.type===v.BindingTypeEnum.DynamicValue&&de.dynamicValue!==null)be=D("toDynamicValue",de.serviceIdentifier,function(){return de.dynamicValue(Z.parentContext)});else if(de.type===v.BindingTypeEnum.Factory&&de.factory!==null)be=D("toFactory",de.serviceIdentifier,function(){return de.factory(Z.parentContext)});else if(de.type===v.BindingTypeEnum.Provider&&de.provider!==null)be=D("toProvider",de.serviceIdentifier,function(){return de.provider(Z.parentContext)});else if(de.type===v.BindingTypeEnum.Instance&&de.implementationType!==null)be=A.resolveInstance(de.implementationType,Y,k(z));else{var xe=R.getServiceIdentifierAsString(Z.serviceIdentifier);throw new Error(w.INVALID_BINDING_TYPE+" "+xe)}return typeof de.onActivation=="function"&&(be=de.onActivation(Z.parentContext,be)),pe&&(de.cache=be,de.activated=!0),Oe&&z!==null&&!z.has(de.id)&&z.set(de.id,be),be}};function B(z){var Z=k(z.plan.rootRequest.requestScope);return Z(z.plan.rootRequest)}F.resolve=B},29664:function(U,F,c){"use strict";Object.defineProperty(F,"__esModule",{value:!0}),F.BindingInSyntax=void 0;var w=c(71297),v=c(62923),l=function(){function R(A){this._binding=A}return R.prototype.inRequestScope=function(){return this._binding.scope=w.BindingScopeEnum.Request,new v.BindingWhenOnSyntax(this._binding)},R.prototype.inSingletonScope=function(){return this._binding.scope=w.BindingScopeEnum.Singleton,new v.BindingWhenOnSyntax(this._binding)},R.prototype.inTransientScope=function(){return this._binding.scope=w.BindingScopeEnum.Transient,new v.BindingWhenOnSyntax(this._binding)},R}();F.BindingInSyntax=l},35268:function(U,F,c){"use strict";Object.defineProperty(F,"__esModule",{value:!0}),F.BindingInWhenOnSyntax=void 0;var w=c(29664),v=c(85370),l=c(76199),R=function(){function A(D){this._binding=D,this._bindingWhenSyntax=new l.BindingWhenSyntax(this._binding),this._bindingOnSyntax=new v.BindingOnSyntax(this._binding),this._bindingInSyntax=new w.BindingInSyntax(D)}return A.prototype.inRequestScope=function(){return this._bindingInSyntax.inRequestScope()},A.prototype.inSingletonScope=function(){return this._bindingInSyntax.inSingletonScope()},A.prototype.inTransientScope=function(){return this._bindingInSyntax.inTransientScope()},A.prototype.when=function(D){return this._bindingWhenSyntax.when(D)},A.prototype.whenTargetNamed=function(D){return this._bindingWhenSyntax.whenTargetNamed(D)},A.prototype.whenTargetIsDefault=function(){return this._bindingWhenSyntax.whenTargetIsDefault()},A.prototype.whenTargetTagged=function(D,k){return this._bindingWhenSyntax.whenTargetTagged(D,k)},A.prototype.whenInjectedInto=function(D){return this._bindingWhenSyntax.whenInjectedInto(D)},A.prototype.whenParentNamed=function(D){return this._bindingWhenSyntax.whenParentNamed(D)},A.prototype.whenParentTagged=function(D,k){return this._bindingWhenSyntax.whenParentTagged(D,k)},A.prototype.whenAnyAncestorIs=function(D){return this._bindingWhenSyntax.whenAnyAncestorIs(D)},A.prototype.whenNoAncestorIs=function(D){return this._bindingWhenSyntax.whenNoAncestorIs(D)},A.prototype.whenAnyAncestorNamed=function(D){return this._bindingWhenSyntax.whenAnyAncestorNamed(D)},A.prototype.whenAnyAncestorTagged=function(D,k){return this._bindingWhenSyntax.whenAnyAncestorTagged(D,k)},A.prototype.whenNoAncestorNamed=function(D){return this._bindingWhenSyntax.whenNoAncestorNamed(D)},A.prototype.whenNoAncestorTagged=function(D,k){return this._bindingWhenSyntax.whenNoAncestorTagged(D,k)},A.prototype.whenAnyAncestorMatches=function(D){return this._bindingWhenSyntax.whenAnyAncestorMatches(D)},A.prototype.whenNoAncestorMatches=function(D){return this._bindingWhenSyntax.whenNoAncestorMatches(D)},A.prototype.onActivation=function(D){return this._bindingOnSyntax.onActivation(D)},A}();F.BindingInWhenOnSyntax=R},85370:function(U,F,c){"use strict";Object.defineProperty(F,"__esModule",{value:!0}),F.BindingOnSyntax=void 0;var w=c(76199),v=function(){function l(R){this._binding=R}return l.prototype.onActivation=function(R){return this._binding.onActivation=R,new w.BindingWhenSyntax(this._binding)},l}();F.BindingOnSyntax=v},98e3:function(U,F,c){"use strict";Object.defineProperty(F,"__esModule",{value:!0}),F.BindingToSyntax=void 0;var w=c(81463),v=c(71297),l=c(35268),R=c(62923),A=function(){function D(k){this._binding=k}return D.prototype.to=function(k){return this._binding.type=v.BindingTypeEnum.Instance,this._binding.implementationType=k,new l.BindingInWhenOnSyntax(this._binding)},D.prototype.toSelf=function(){if(typeof this._binding.serviceIdentifier!="function")throw new Error(""+w.INVALID_TO_SELF_VALUE);var k=this._binding.serviceIdentifier;return this.to(k)},D.prototype.toConstantValue=function(k){return this._binding.type=v.BindingTypeEnum.ConstantValue,this._binding.cache=k,this._binding.dynamicValue=null,this._binding.implementationType=null,this._binding.scope=v.BindingScopeEnum.Singleton,new R.BindingWhenOnSyntax(this._binding)},D.prototype.toDynamicValue=function(k){return this._binding.type=v.BindingTypeEnum.DynamicValue,this._binding.cache=null,this._binding.dynamicValue=k,this._binding.implementationType=null,new l.BindingInWhenOnSyntax(this._binding)},D.prototype.toConstructor=function(k){return this._binding.type=v.BindingTypeEnum.Constructor,this._binding.implementationType=k,this._binding.scope=v.BindingScopeEnum.Singleton,new R.BindingWhenOnSyntax(this._binding)},D.prototype.toFactory=function(k){return this._binding.type=v.BindingTypeEnum.Factory,this._binding.factory=k,this._binding.scope=v.BindingScopeEnum.Singleton,new R.BindingWhenOnSyntax(this._binding)},D.prototype.toFunction=function(k){if(typeof k!="function")throw new Error(w.INVALID_FUNCTION_BINDING);var B=this.toConstantValue(k);return this._binding.type=v.BindingTypeEnum.Function,this._binding.scope=v.BindingScopeEnum.Singleton,B},D.prototype.toAutoFactory=function(k){return this._binding.type=v.BindingTypeEnum.Factory,this._binding.factory=function(B){var z=function(){return B.container.get(k)};return z},this._binding.scope=v.BindingScopeEnum.Singleton,new R.BindingWhenOnSyntax(this._binding)},D.prototype.toProvider=function(k){return this._binding.type=v.BindingTypeEnum.Provider,this._binding.provider=k,this._binding.scope=v.BindingScopeEnum.Singleton,new R.BindingWhenOnSyntax(this._binding)},D.prototype.toService=function(k){this.toDynamicValue(function(B){return B.container.get(k)})},D}();F.BindingToSyntax=A},62923:function(U,F,c){"use strict";Object.defineProperty(F,"__esModule",{value:!0}),F.BindingWhenOnSyntax=void 0;var w=c(85370),v=c(76199),l=function(){function R(A){this._binding=A,this._bindingWhenSyntax=new v.BindingWhenSyntax(this._binding),this._bindingOnSyntax=new w.BindingOnSyntax(this._binding)}return R.prototype.when=function(A){return this._bindingWhenSyntax.when(A)},R.prototype.whenTargetNamed=function(A){return this._bindingWhenSyntax.whenTargetNamed(A)},R.prototype.whenTargetIsDefault=function(){return this._bindingWhenSyntax.whenTargetIsDefault()},R.prototype.whenTargetTagged=function(A,D){return this._bindingWhenSyntax.whenTargetTagged(A,D)},R.prototype.whenInjectedInto=function(A){return this._bindingWhenSyntax.whenInjectedInto(A)},R.prototype.whenParentNamed=function(A){return this._bindingWhenSyntax.whenParentNamed(A)},R.prototype.whenParentTagged=function(A,D){return this._bindingWhenSyntax.whenParentTagged(A,D)},R.prototype.whenAnyAncestorIs=function(A){return this._bindingWhenSyntax.whenAnyAncestorIs(A)},R.prototype.whenNoAncestorIs=function(A){return this._bindingWhenSyntax.whenNoAncestorIs(A)},R.prototype.whenAnyAncestorNamed=function(A){return this._bindingWhenSyntax.whenAnyAncestorNamed(A)},R.prototype.whenAnyAncestorTagged=function(A,D){return this._bindingWhenSyntax.whenAnyAncestorTagged(A,D)},R.prototype.whenNoAncestorNamed=function(A){return this._bindingWhenSyntax.whenNoAncestorNamed(A)},R.prototype.whenNoAncestorTagged=function(A,D){return this._bindingWhenSyntax.whenNoAncestorTagged(A,D)},R.prototype.whenAnyAncestorMatches=function(A){return this._bindingWhenSyntax.whenAnyAncestorMatches(A)},R.prototype.whenNoAncestorMatches=function(A){return this._bindingWhenSyntax.whenNoAncestorMatches(A)},R.prototype.onActivation=function(A){return this._bindingOnSyntax.onActivation(A)},R}();F.BindingWhenOnSyntax=l},76199:function(U,F,c){"use strict";Object.defineProperty(F,"__esModule",{value:!0}),F.BindingWhenSyntax=void 0;var w=c(85370),v=c(95093),l=function(){function R(A){this._binding=A}return R.prototype.when=function(A){return this._binding.constraint=A,new w.BindingOnSyntax(this._binding)},R.prototype.whenTargetNamed=function(A){return this._binding.constraint=v.namedConstraint(A),new w.BindingOnSyntax(this._binding)},R.prototype.whenTargetIsDefault=function(){return this._binding.constraint=function(A){var D=A.target!==null&&!A.target.isNamed()&&!A.target.isTagged();return D},new w.BindingOnSyntax(this._binding)},R.prototype.whenTargetTagged=function(A,D){return this._binding.constraint=v.taggedConstraint(A)(D),new w.BindingOnSyntax(this._binding)},R.prototype.whenInjectedInto=function(A){return this._binding.constraint=function(D){return v.typeConstraint(A)(D.parentRequest)},new w.BindingOnSyntax(this._binding)},R.prototype.whenParentNamed=function(A){return this._binding.constraint=function(D){return v.namedConstraint(A)(D.parentRequest)},new w.BindingOnSyntax(this._binding)},R.prototype.whenParentTagged=function(A,D){return this._binding.constraint=function(k){return v.taggedConstraint(A)(D)(k.parentRequest)},new w.BindingOnSyntax(this._binding)},R.prototype.whenAnyAncestorIs=function(A){return this._binding.constraint=function(D){return v.traverseAncerstors(D,v.typeConstraint(A))},new w.BindingOnSyntax(this._binding)},R.prototype.whenNoAncestorIs=function(A){return this._binding.constraint=function(D){return!v.traverseAncerstors(D,v.typeConstraint(A))},new w.BindingOnSyntax(this._binding)},R.prototype.whenAnyAncestorNamed=function(A){return this._binding.constraint=function(D){return v.traverseAncerstors(D,v.namedConstraint(A))},new w.BindingOnSyntax(this._binding)},R.prototype.whenNoAncestorNamed=function(A){return this._binding.constraint=function(D){return!v.traverseAncerstors(D,v.namedConstraint(A))},new w.BindingOnSyntax(this._binding)},R.prototype.whenAnyAncestorTagged=function(A,D){return this._binding.constraint=function(k){return v.traverseAncerstors(k,v.taggedConstraint(A)(D))},new w.BindingOnSyntax(this._binding)},R.prototype.whenNoAncestorTagged=function(A,D){return this._binding.constraint=function(k){return!v.traverseAncerstors(k,v.taggedConstraint(A)(D))},new w.BindingOnSyntax(this._binding)},R.prototype.whenAnyAncestorMatches=function(A){return this._binding.constraint=function(D){return v.traverseAncerstors(D,A)},new w.BindingOnSyntax(this._binding)},R.prototype.whenNoAncestorMatches=function(A){return this._binding.constraint=function(D){return!v.traverseAncerstors(D,A)},new w.BindingOnSyntax(this._binding)},R}();F.BindingWhenSyntax=l},95093:function(U,F,c){"use strict";Object.defineProperty(F,"__esModule",{value:!0}),F.typeConstraint=F.namedConstraint=F.taggedConstraint=F.traverseAncerstors=void 0;var w=c(17597),v=c(4957),l=function(k,B){var z=k.parentRequest;return z!==null?B(z)?!0:l(z,B):!1};F.traverseAncerstors=l;var R=function(k){return function(B){var z=function(Z){return Z!==null&&Z.target!==null&&Z.target.matchesTag(k)(B)};return z.metaData=new v.Metadata(k,B),z}};F.taggedConstraint=R;var A=R(w.NAMED_TAG);F.namedConstraint=A;var D=function(k){return function(B){var z=null;if(B!==null)if(z=B.bindings[0],typeof k=="string"){var Z=z.serviceIdentifier;return Z===k}else{var W=B.bindings[0].implementationType;return k===W}return!1}};F.typeConstraint=D},6024:function(U,F){"use strict";Object.defineProperty(F,"__esModule",{value:!0}),F.multiBindToService=void 0;var c=function(w){return function(v){return function(){for(var l=[],R=0;R<arguments.length;R++)l[R]=arguments[R];return l.forEach(function(A){return w.bind(A).toService(v)})}}};F.multiBindToService=c},99438:function(U,F,c){"use strict";Object.defineProperty(F,"__esModule",{value:!0}),F.isStackOverflowExeption=void 0;var w=c(81463);function v(l){return l instanceof RangeError||l.message===w.STACK_OVERFLOW}F.isStackOverflowExeption=v},92452:function(U,F){"use strict";Object.defineProperty(F,"__esModule",{value:!0}),F.id=void 0;var c=0;function w(){return c++}F.id=w},96783:function(U,F,c){"use strict";Object.defineProperty(F,"__esModule",{value:!0}),F.circularDependencyToException=F.listMetadataForTarget=F.listRegisteredBindingsForServiceIdentifier=F.getServiceIdentifierAsString=F.getFunctionName=void 0;var w=c(81463);function v(z){if(typeof z=="function"){var Z=z;return Z.name}else{if(typeof z=="symbol")return z.toString();var Z=z;return Z}}F.getServiceIdentifierAsString=v;function l(z,Z,W){var Y="",te=W(z,Z);return te.length!==0&&(Y=`
Registered bindings:`,te.forEach(function(le){var be="Object";le.implementationType!==null&&(be=B(le.implementationType)),Y=Y+`
 `+be,le.constraint.metaData&&(Y=Y+" - "+le.constraint.metaData)})),Y}F.listRegisteredBindingsForServiceIdentifier=l;function R(z,Z){return z.parentRequest===null?!1:z.parentRequest.serviceIdentifier===Z?!0:R(z.parentRequest,Z)}function A(z){function Z(Y,te){te===void 0&&(te=[]);var le=v(Y.serviceIdentifier);return te.push(le),Y.parentRequest!==null?Z(Y.parentRequest,te):te}var W=Z(z);return W.reverse().join(" --> ")}function D(z){z.childRequests.forEach(function(Z){if(R(Z,Z.serviceIdentifier)){var W=A(Z);throw new Error(w.CIRCULAR_DEPENDENCY+" "+W)}else D(Z)})}F.circularDependencyToException=D;function k(z,Z){if(Z.isTagged()||Z.isNamed()){var W="",Y=Z.getNamedTag(),te=Z.getCustomTags();return Y!==null&&(W+=Y.toString()+`
`),te!==null&&te.forEach(function(le){W+=le.toString()+`
`})," "+z+`
 `+z+" - "+W}else return" "+z}F.listMetadataForTarget=k;function B(z){if(z.name)return z.name;var Z=z.toString(),W=Z.match(/^function\s*([^\s(]+)/);return W?W[1]:"Anonymous function: "+Z}F.getFunctionName=B},24195:function(U){"use strict";U.exports=c,U.exports.default=c;var F=1e20;function c(A,D,k,B,z,Z){this.fontSize=A||24,this.buffer=D===void 0?3:D,this.cutoff=B||.25,this.fontFamily=z||"sans-serif",this.fontWeight=Z||"normal",this.radius=k||8;var W=this.size=this.fontSize+this.buffer*2,Y=W+this.buffer*2,te=typeof my!="undefined"&&!!my&&typeof my.showToast=="function"&&my.isFRM!==!0;te?this.canvas=my.createOffscreenCanvas(W,W,"2d"):(this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=W),this.ctx=this.canvas.getContext("2d",{willReadFrequently:!0}),this.ctx.font=this.fontWeight+" "+this.fontSize+"px "+this.fontFamily,this.ctx.textAlign="left",this.ctx.fillStyle="black",this.gridOuter=new Float64Array(Y*Y),this.gridInner=new Float64Array(Y*Y),this.f=new Float64Array(Y),this.z=new Float64Array(Y+1),this.v=new Uint16Array(Y),this.useMetrics=this.ctx.measureText("A").actualBoundingBoxLeft!==void 0,te?this.middle=Math.round(W/2*1):this.middle=Math.round(W/2*(navigator.userAgent.indexOf("Gecko/")>=0?1.2:1))}function w(A,D,k,B,z,Z,W){Z.fill(F,0,D*k),W.fill(0,0,D*k);for(var Y=(D-B)/2,te=0;te<z;te++)for(var le=0;le<B;le++){var be=(te+Y)*D+le+Y,de=A.data[4*(te*B+le)+3]/255;if(de===1)Z[be]=0,W[be]=F;else if(de===0)Z[be]=F,W[be]=0;else{var pe=Math.max(0,.5-de),Oe=Math.max(0,de-.5);Z[be]=pe*pe,W[be]=Oe*Oe}}}function v(A,D,k,B,z,Z,W){for(var Y=0;Y<D*k;Y++){var te=Math.sqrt(B[Y])-Math.sqrt(z[Y]);A[Y]=Math.round(255-255*(te/Z+W))}}c.prototype._draw=function(A,D){var k=this.ctx.measureText(A),B=k.width,z=2*this.buffer,Z,W,Y,te,le,be,de,pe;D&&this.useMetrics?(le=Math.floor(k.actualBoundingBoxAscent),pe=this.buffer+Math.ceil(k.actualBoundingBoxAscent),be=this.buffer,de=this.buffer,W=Math.min(this.size,Math.ceil(k.actualBoundingBoxRight-k.actualBoundingBoxLeft)),te=Math.min(this.size-be,Math.ceil(k.actualBoundingBoxAscent+k.actualBoundingBoxDescent)),Z=W+z,Y=te+z,this.ctx.textBaseline="alphabetic"):(Z=W=this.size,Y=te=this.size,le=19*this.fontSize/24,be=de=0,pe=this.middle,this.ctx.textBaseline="middle");var Oe;W&&te&&(this.ctx.clearRect(de,be,W,te),this.ctx.fillText(A,this.buffer,pe),Oe=this.ctx.getImageData(de,be,W,te));var xe=new Uint8ClampedArray(Z*Y);return w(Oe,Z,Y,W,te,this.gridOuter,this.gridInner),l(this.gridOuter,Z,Y,this.f,this.v,this.z),l(this.gridInner,Z,Y,this.f,this.v,this.z),v(xe,Z,Y,this.gridOuter,this.gridInner,this.radius,this.cutoff),{data:xe,metrics:{width:W,height:te,sdfWidth:Z,sdfHeight:Y,top:le,left:0,advance:B}}},c.prototype.draw=function(A){return this._draw(A,!1).data},c.prototype.drawWithMetrics=function(A){return this._draw(A,!0)};function l(A,D,k,B,z,Z){for(var W=0;W<D;W++)R(A,W,D,k,B,z,Z);for(var Y=0;Y<k;Y++)R(A,Y*D,1,D,B,z,Z)}function R(A,D,k,B,z,Z,W){var Y,te,le,be;for(Z[0]=0,W[0]=-F,W[1]=F,Y=0;Y<B;Y++)z[Y]=A[D+Y*k];for(Y=1,te=0,le=0;Y<B;Y++){do be=Z[te],le=(z[Y]-z[be]+Y*Y-be*be)/(Y-be)/2;while(le<=W[te]&&--te>-1);te++,Z[te]=Y,W[te]=le,W[te+1]=F}for(Y=0,te=0;Y<B;Y++){for(;W[te+1]<Y;)te++;be=Z[te],A[D+Y*k]=z[be]+(Y-be)*(Y-be)}}},87984:function(U,F,c){"use strict";c.r(F),c.d(F,{Function:function(){return ac},Interpreter:function(){return Oo},default:function(){return dc},evaluate:function(){return zf},vm:function(){return w}});var w={};c.r(w),c.d(w,{Script:function(){return Bf},compileFunction:function(){return Rc},createContext:function(){return qo},runInContext:function(){return Hl},runInNewContext:function(){return sf}});var v={3:"abstract boolean byte char class double enum export extends final float goto implements import int interface long native package private protected public short static super synchronized throws transient volatile",5:"class enum extends super const export import",6:"enum",strict:"implements interface let package private protected public static yield",strictBind:"eval arguments"},l="break case catch continue debugger default do else finally for function if return switch throw try var while with null true false instanceof typeof void delete new in this",R={5:l,"5module":l+" export import",6:l+" const class extends export import super"},A=/^in(stanceof)?$/,D="\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u08A0-\u08B4\u08B6-\u08C7\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2118-\u211D\u2124\u2126\u2128\u212A-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309B-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\u9FFC\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA7BF\uA7C2-\uA7CA\uA7F5-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC",k="\u200C\u200D\xB7\u0300-\u036F\u0387\u0483-\u0487\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0610-\u061A\u064B-\u0669\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED\u06F0-\u06F9\u0711\u0730-\u074A\u07A6-\u07B0\u07C0-\u07C9\u07EB-\u07F3\u07FD\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u08D3-\u08E1\u08E3-\u0903\u093A-\u093C\u093E-\u094F\u0951-\u0957\u0962\u0963\u0966-\u096F\u0981-\u0983\u09BC\u09BE-\u09C4\u09C7\u09C8\u09CB-\u09CD\u09D7\u09E2\u09E3\u09E6-\u09EF\u09FE\u0A01-\u0A03\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A66-\u0A71\u0A75\u0A81-\u0A83\u0ABC\u0ABE-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AE2\u0AE3\u0AE6-\u0AEF\u0AFA-\u0AFF\u0B01-\u0B03\u0B3C\u0B3E-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B55-\u0B57\u0B62\u0B63\u0B66-\u0B6F\u0B82\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD7\u0BE6-\u0BEF\u0C00-\u0C04\u0C3E-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62\u0C63\u0C66-\u0C6F\u0C81-\u0C83\u0CBC\u0CBE-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CE2\u0CE3\u0CE6-\u0CEF\u0D00-\u0D03\u0D3B\u0D3C\u0D3E-\u0D44\u0D46-\u0D48\u0D4A-\u0D4D\u0D57\u0D62\u0D63\u0D66-\u0D6F\u0D81-\u0D83\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DE6-\u0DEF\u0DF2\u0DF3\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0E50-\u0E59\u0EB1\u0EB4-\u0EBC\u0EC8-\u0ECD\u0ED0-\u0ED9\u0F18\u0F19\u0F20-\u0F29\u0F35\u0F37\u0F39\u0F3E\u0F3F\u0F71-\u0F84\u0F86\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102B-\u103E\u1040-\u1049\u1056-\u1059\u105E-\u1060\u1062-\u1064\u1067-\u106D\u1071-\u1074\u1082-\u108D\u108F-\u109D\u135D-\u135F\u1369-\u1371\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17B4-\u17D3\u17DD\u17E0-\u17E9\u180B-\u180D\u1810-\u1819\u18A9\u1920-\u192B\u1930-\u193B\u1946-\u194F\u19D0-\u19DA\u1A17-\u1A1B\u1A55-\u1A5E\u1A60-\u1A7C\u1A7F-\u1A89\u1A90-\u1A99\u1AB0-\u1ABD\u1ABF\u1AC0\u1B00-\u1B04\u1B34-\u1B44\u1B50-\u1B59\u1B6B-\u1B73\u1B80-\u1B82\u1BA1-\u1BAD\u1BB0-\u1BB9\u1BE6-\u1BF3\u1C24-\u1C37\u1C40-\u1C49\u1C50-\u1C59\u1CD0-\u1CD2\u1CD4-\u1CE8\u1CED\u1CF4\u1CF7-\u1CF9\u1DC0-\u1DF9\u1DFB-\u1DFF\u203F\u2040\u2054\u20D0-\u20DC\u20E1\u20E5-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302F\u3099\u309A\uA620-\uA629\uA66F\uA674-\uA67D\uA69E\uA69F\uA6F0\uA6F1\uA802\uA806\uA80B\uA823-\uA827\uA82C\uA880\uA881\uA8B4-\uA8C5\uA8D0-\uA8D9\uA8E0-\uA8F1\uA8FF-\uA909\uA926-\uA92D\uA947-\uA953\uA980-\uA983\uA9B3-\uA9C0\uA9D0-\uA9D9\uA9E5\uA9F0-\uA9F9\uAA29-\uAA36\uAA43\uAA4C\uAA4D\uAA50-\uAA59\uAA7B-\uAA7D\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAEB-\uAAEF\uAAF5\uAAF6\uABE3-\uABEA\uABEC\uABED\uABF0-\uABF9\uFB1E\uFE00-\uFE0F\uFE20-\uFE2F\uFE33\uFE34\uFE4D-\uFE4F\uFF10-\uFF19\uFF3F",B=new RegExp("["+D+"]"),z=new RegExp("["+D+k+"]");D=k=null;var Z=[0,11,2,25,2,18,2,1,2,14,3,13,35,122,70,52,268,28,4,48,48,31,14,29,6,37,11,29,3,35,5,7,2,4,43,157,19,35,5,35,5,39,9,51,157,310,10,21,11,7,153,5,3,0,2,43,2,1,4,0,3,22,11,22,10,30,66,18,2,1,11,21,11,25,71,55,7,1,65,0,16,3,2,2,2,28,43,28,4,28,36,7,2,27,28,53,11,21,11,18,14,17,111,72,56,50,14,50,14,35,349,41,7,1,79,28,11,0,9,21,107,20,28,22,13,52,76,44,33,24,27,35,30,0,3,0,9,34,4,0,13,47,15,3,22,0,2,0,36,17,2,24,85,6,2,0,2,3,2,14,2,9,8,46,39,7,3,1,3,21,2,6,2,1,2,4,4,0,19,0,13,4,159,52,19,3,21,2,31,47,21,1,2,0,185,46,42,3,37,47,21,0,60,42,14,0,72,26,230,43,117,63,32,7,3,0,3,7,2,1,2,23,16,0,2,0,95,7,3,38,17,0,2,0,29,0,11,39,8,0,22,0,12,45,20,0,35,56,264,8,2,36,18,0,50,29,113,6,2,1,2,37,22,0,26,5,2,1,2,31,15,0,328,18,190,0,80,921,103,110,18,195,2749,1070,4050,582,8634,568,8,30,114,29,19,47,17,3,32,20,6,18,689,63,129,74,6,0,67,12,65,1,2,0,29,6135,9,1237,43,8,8952,286,50,2,18,3,9,395,2309,106,6,12,4,8,8,9,5991,84,2,70,2,1,3,0,3,1,3,3,2,11,2,0,2,6,2,64,2,3,3,7,2,6,2,27,2,3,2,4,2,0,4,6,2,339,3,24,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,7,2357,44,11,6,17,0,370,43,1301,196,60,67,8,0,1205,3,2,26,2,1,2,0,3,0,2,9,2,3,2,0,2,0,7,0,5,0,2,0,2,0,2,2,2,1,2,0,3,0,2,0,2,0,2,0,2,0,2,1,2,0,3,3,2,6,2,3,2,3,2,0,2,9,2,16,6,2,2,4,2,16,4421,42717,35,4148,12,221,3,5761,15,7472,3104,541,1507,4938],W=[509,0,227,0,150,4,294,9,1368,2,2,1,6,3,41,2,5,0,166,1,574,3,9,9,370,1,154,10,176,2,54,14,32,9,16,3,46,10,54,9,7,2,37,13,2,9,6,1,45,0,13,2,49,13,9,3,2,11,83,11,7,0,161,11,6,9,7,3,56,1,2,6,3,1,3,2,10,0,11,1,3,6,4,4,193,17,10,9,5,0,82,19,13,9,214,6,3,8,28,1,83,16,16,9,82,12,9,9,84,14,5,9,243,14,166,9,71,5,2,1,3,3,2,0,2,1,13,9,120,6,3,6,4,0,29,9,41,6,2,3,9,0,10,10,47,15,406,7,2,7,17,9,57,21,2,13,123,5,4,0,2,1,2,6,2,0,9,9,49,4,2,1,2,4,9,9,330,3,19306,9,135,4,60,6,26,9,1014,0,2,54,8,3,82,0,12,1,19628,1,5319,4,4,5,9,7,3,6,31,3,149,2,1418,49,513,54,5,49,9,0,15,0,23,4,2,14,1361,6,2,16,3,6,2,1,2,4,262,6,10,9,419,13,1495,6,110,6,6,9,4759,9,787719,239];function Y(O,q){for(var Le=65536,ve=0;ve<q.length;ve+=2){if(Le+=q[ve],Le>O)return!1;if(Le+=q[ve+1],Le>=O)return!0}}function te(O,q){return O<65?O===36:O<91?!0:O<97?O===95:O<123?!0:O<=65535?O>=170&&B.test(String.fromCharCode(O)):q===!1?!1:Y(O,Z)}function le(O,q){return O<48?O===36:O<58?!0:O<65?!1:O<91?!0:O<97?O===95:O<123?!0:O<=65535?O>=170&&z.test(String.fromCharCode(O)):q===!1?!1:Y(O,Z)||Y(O,W)}var be=function(q,Le){Le===void 0&&(Le={}),this.label=q,this.keyword=Le.keyword,this.beforeExpr=!!Le.beforeExpr,this.startsExpr=!!Le.startsExpr,this.isLoop=!!Le.isLoop,this.isAssign=!!Le.isAssign,this.prefix=!!Le.prefix,this.postfix=!!Le.postfix,this.binop=Le.binop||null,this.updateContext=null};function de(O,q){return new be(O,{beforeExpr:!0,binop:q})}var pe={beforeExpr:!0},Oe={startsExpr:!0},xe={};function Ve(O,q){return q===void 0&&(q={}),q.keyword=O,xe[O]=new be(O,q)}var K={num:new be("num",Oe),regexp:new be("regexp",Oe),string:new be("string",Oe),name:new be("name",Oe),eof:new be("eof"),bracketL:new be("[",{beforeExpr:!0,startsExpr:!0}),bracketR:new be("]"),braceL:new be("{",{beforeExpr:!0,startsExpr:!0}),braceR:new be("}"),parenL:new be("(",{beforeExpr:!0,startsExpr:!0}),parenR:new be(")"),comma:new be(",",pe),semi:new be(";",pe),colon:new be(":",pe),dot:new be("."),question:new be("?",pe),questionDot:new be("?."),arrow:new be("=>",pe),template:new be("template"),invalidTemplate:new be("invalidTemplate"),ellipsis:new be("...",pe),backQuote:new be("`",Oe),dollarBraceL:new be("${",{beforeExpr:!0,startsExpr:!0}),eq:new be("=",{beforeExpr:!0,isAssign:!0}),assign:new be("_=",{beforeExpr:!0,isAssign:!0}),incDec:new be("++/--",{prefix:!0,postfix:!0,startsExpr:!0}),prefix:new be("!/~",{beforeExpr:!0,prefix:!0,startsExpr:!0}),logicalOR:de("||",1),logicalAND:de("&&",2),bitwiseOR:de("|",3),bitwiseXOR:de("^",4),bitwiseAND:de("&",5),equality:de("==/!=/===/!==",6),relational:de("</>/<=/>=",7),bitShift:de("<</>>/>>>",8),plusMin:new be("+/-",{beforeExpr:!0,binop:9,prefix:!0,startsExpr:!0}),modulo:de("%",10),star:de("*",10),slash:de("/",10),starstar:new be("**",{beforeExpr:!0}),coalesce:de("??",1),_break:Ve("break"),_case:Ve("case",pe),_catch:Ve("catch"),_continue:Ve("continue"),_debugger:Ve("debugger"),_default:Ve("default",pe),_do:Ve("do",{isLoop:!0,beforeExpr:!0}),_else:Ve("else",pe),_finally:Ve("finally"),_for:Ve("for",{isLoop:!0}),_function:Ve("function",Oe),_if:Ve("if"),_return:Ve("return",pe),_switch:Ve("switch"),_throw:Ve("throw",pe),_try:Ve("try"),_var:Ve("var"),_const:Ve("const"),_while:Ve("while",{isLoop:!0}),_with:Ve("with"),_new:Ve("new",{beforeExpr:!0,startsExpr:!0}),_this:Ve("this",Oe),_super:Ve("super",Oe),_class:Ve("class",Oe),_extends:Ve("extends",pe),_export:Ve("export"),_import:Ve("import",Oe),_null:Ve("null",Oe),_true:Ve("true",Oe),_false:Ve("false",Oe),_in:Ve("in",{beforeExpr:!0,binop:7}),_instanceof:Ve("instanceof",{beforeExpr:!0,binop:7}),_typeof:Ve("typeof",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_void:Ve("void",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_delete:Ve("delete",{beforeExpr:!0,prefix:!0,startsExpr:!0})},ke=/\r\n?|\n|\u2028|\u2029/,we=new RegExp(ke.source,"g");function Me(O,q){return O===10||O===13||!q&&(O===8232||O===8233)}var Xe=/[\u1680\u2000-\u200a\u202f\u205f\u3000\ufeff]/,Ke=/(?:\s|\/\/.*|\/\*[^]*?\*\/)*/g,At=Object.prototype,mt=At.hasOwnProperty,ie=At.toString;function oe(O,q){return mt.call(O,q)}var he=Array.isArray||function(O){return ie.call(O)==="[object Array]"};function ye(O){return new RegExp("^(?:"+O.replace(/ /g,"|")+")$")}var se=function(q,Le){this.line=q,this.column=Le};se.prototype.offset=function(q){return new se(this.line,this.column+q)};var Ne=function(q,Le,ve){this.start=Le,this.end=ve,q.sourceFile!==null&&(this.source=q.sourceFile)};function st(O,q){for(var Le=1,ve=0;;){we.lastIndex=ve;var ct=we.exec(O);if(ct&&ct.index<q)++Le,ve=ct.index+ct[0].length;else return new se(Le,q-ve)}}var Fe={ecmaVersion:10,sourceType:"script",onInsertedSemicolon:null,onTrailingComma:null,allowReserved:null,allowReturnOutsideFunction:!1,allowImportExportEverywhere:!1,allowAwaitOutsideFunction:!1,allowHashBang:!1,locations:!1,onToken:null,onComment:null,ranges:!1,program:null,sourceFile:null,directSourceFile:null,preserveParens:!1};function tt(O){var q={};for(var Le in Fe)q[Le]=O&&oe(O,Le)?O[Le]:Fe[Le];if(q.ecmaVersion>=2015&&(q.ecmaVersion-=2009),q.allowReserved==null&&(q.allowReserved=q.ecmaVersion<5),he(q.onToken)){var ve=q.onToken;q.onToken=function(ct){return ve.push(ct)}}return he(q.onComment)&&(q.onComment=Wt(q,q.onComment)),q}function Wt(O,q){return function(Le,ve,ct,Lt,hr,lr){var Gr={type:Le?"Block":"Line",value:ve,start:ct,end:Lt};O.locations&&(Gr.loc=new Ne(this,hr,lr)),O.ranges&&(Gr.range=[ct,Lt]),q.push(Gr)}}var Pr=1,Qt=2,xr=Pr|Qt,$r=4,Cr=8,sn=16,ot=32,_r=64,cr=128;function Vr(O,q){return Qt|(O?$r:0)|(q?Cr:0)}var Qn=0,mn=1,_n=2,Yr=3,Fr=4,kr=5,ft=function(q,Le,ve){this.options=q=tt(q),this.sourceFile=q.sourceFile,this.keywords=ye(R[q.ecmaVersion>=6?6:q.sourceType==="module"?"5module":5]);var ct="";if(q.allowReserved!==!0){for(var Lt=q.ecmaVersion;!(ct=v[Lt]);Lt--);q.sourceType==="module"&&(ct+=" await")}this.reservedWords=ye(ct);var hr=(ct?ct+" ":"")+v.strict;this.reservedWordsStrict=ye(hr),this.reservedWordsStrictBind=ye(hr+" "+v.strictBind),this.input=String(Le),this.containsEsc=!1,ve?(this.pos=ve,this.lineStart=this.input.lastIndexOf(`
`,ve-1)+1,this.curLine=this.input.slice(0,this.lineStart).split(ke).length):(this.pos=this.lineStart=0,this.curLine=1),this.type=K.eof,this.value=null,this.start=this.end=this.pos,this.startLoc=this.endLoc=this.curPosition(),this.lastTokEndLoc=this.lastTokStartLoc=null,this.lastTokStart=this.lastTokEnd=this.pos,this.context=this.initialContext(),this.exprAllowed=!0,this.inModule=q.sourceType==="module",this.strict=this.inModule||this.strictDirective(this.pos),this.potentialArrowAt=-1,this.yieldPos=this.awaitPos=this.awaitIdentPos=0,this.labels=[],this.undefinedExports={},this.pos===0&&q.allowHashBang&&this.input.slice(0,2)==="#!"&&this.skipLineComment(2),this.scopeStack=[],this.enterScope(Pr),this.regexpState=null},me={inFunction:{configurable:!0},inGenerator:{configurable:!0},inAsync:{configurable:!0},allowSuper:{configurable:!0},allowDirectSuper:{configurable:!0},treatFunctionsAsVar:{configurable:!0}};ft.prototype.parse=function(){var q=this.options.program||this.startNode();return this.nextToken(),this.parseTopLevel(q)},me.inFunction.get=function(){return(this.currentVarScope().flags&Qt)>0},me.inGenerator.get=function(){return(this.currentVarScope().flags&Cr)>0},me.inAsync.get=function(){return(this.currentVarScope().flags&$r)>0},me.allowSuper.get=function(){return(this.currentThisScope().flags&_r)>0},me.allowDirectSuper.get=function(){return(this.currentThisScope().flags&cr)>0},me.treatFunctionsAsVar.get=function(){return this.treatFunctionsAsVarInScope(this.currentScope())},ft.prototype.inNonArrowFunction=function(){return(this.currentThisScope().flags&Qt)>0},ft.extend=function(){for(var q=[],Le=arguments.length;Le--;)q[Le]=arguments[Le];for(var ve=this,ct=0;ct<q.length;ct++)ve=q[ct](ve);return ve},ft.parse=function(q,Le){return new this(Le,q).parse()},ft.parseExpressionAt=function(q,Le,ve){var ct=new this(ve,q,Le);return ct.nextToken(),ct.parseExpression()},ft.tokenizer=function(q,Le){return new this(Le,q)},Object.defineProperties(ft.prototype,me);var ne=ft.prototype,fe=/^(?:'((?:\\.|[^'\\])*?)'|"((?:\\.|[^"\\])*?)")/;ne.strictDirective=function(O){for(;;){Ke.lastIndex=O,O+=Ke.exec(this.input)[0].length;var q=fe.exec(this.input.slice(O));if(!q)return!1;if((q[1]||q[2])==="use strict"){Ke.lastIndex=O+q[0].length;var Le=Ke.exec(this.input),ve=Le.index+Le[0].length,ct=this.input.charAt(ve);return ct===";"||ct==="}"||ke.test(Le[0])&&!(/[(`.[+\-/*%<>=,?^&]/.test(ct)||ct==="!"&&this.input.charAt(ve+1)==="=")}O+=q[0].length,Ke.lastIndex=O,O+=Ke.exec(this.input)[0].length,this.input[O]===";"&&O++}},ne.eat=function(O){return this.type===O?(this.next(),!0):!1},ne.isContextual=function(O){return this.type===K.name&&this.value===O&&!this.containsEsc},ne.eatContextual=function(O){return this.isContextual(O)?(this.next(),!0):!1},ne.expectContextual=function(O){this.eatContextual(O)||this.unexpected()},ne.canInsertSemicolon=function(){return this.type===K.eof||this.type===K.braceR||ke.test(this.input.slice(this.lastTokEnd,this.start))},ne.insertSemicolon=function(){if(this.canInsertSemicolon())return this.options.onInsertedSemicolon&&this.options.onInsertedSemicolon(this.lastTokEnd,this.lastTokEndLoc),!0},ne.semicolon=function(){!this.eat(K.semi)&&!this.insertSemicolon()&&this.unexpected()},ne.afterTrailingComma=function(O,q){if(this.type===O)return this.options.onTrailingComma&&this.options.onTrailingComma(this.lastTokStart,this.lastTokStartLoc),q||this.next(),!0},ne.expect=function(O){this.eat(O)||this.unexpected()},ne.unexpected=function(O){this.raise(O!=null?O:this.start,"Unexpected token")};function Q(){this.shorthandAssign=this.trailingComma=this.parenthesizedAssign=this.parenthesizedBind=this.doubleProto=-1}ne.checkPatternErrors=function(O,q){if(!!O){O.trailingComma>-1&&this.raiseRecoverable(O.trailingComma,"Comma is not permitted after the rest element");var Le=q?O.parenthesizedAssign:O.parenthesizedBind;Le>-1&&this.raiseRecoverable(Le,"Parenthesized pattern")}},ne.checkExpressionErrors=function(O,q){if(!O)return!1;var Le=O.shorthandAssign,ve=O.doubleProto;if(!q)return Le>=0||ve>=0;Le>=0&&this.raise(Le,"Shorthand property assignments are valid only in destructuring patterns"),ve>=0&&this.raiseRecoverable(ve,"Redefinition of __proto__ property")},ne.checkYieldAwaitInDefaultParams=function(){this.yieldPos&&(!this.awaitPos||this.yieldPos<this.awaitPos)&&this.raise(this.yieldPos,"Yield expression cannot be a default value"),this.awaitPos&&this.raise(this.awaitPos,"Await expression cannot be a default value")},ne.isSimpleAssignTarget=function(O){return O.type==="ParenthesizedExpression"?this.isSimpleAssignTarget(O.expression):O.type==="Identifier"||O.type==="MemberExpression"};var De=ft.prototype;De.parseTopLevel=function(O){var q={};for(O.body||(O.body=[]);this.type!==K.eof;){var Le=this.parseStatement(null,!0,q);O.body.push(Le)}if(this.inModule)for(var ve=0,ct=Object.keys(this.undefinedExports);ve<ct.length;ve+=1){var Lt=ct[ve];this.raiseRecoverable(this.undefinedExports[Lt].start,"Export '"+Lt+"' is not defined")}return this.adaptDirectivePrologue(O.body),this.next(),O.sourceType=this.options.sourceType,this.finishNode(O,"Program")};var dt={kind:"loop"},Jt={kind:"switch"};De.isLet=function(O){if(this.options.ecmaVersion<6||!this.isContextual("let"))return!1;Ke.lastIndex=this.pos;var q=Ke.exec(this.input),Le=this.pos+q[0].length,ve=this.input.charCodeAt(Le);if(ve===91)return!0;if(O)return!1;if(ve===123)return!0;if(te(ve,!0)){for(var ct=Le+1;le(this.input.charCodeAt(ct),!0);)++ct;var Lt=this.input.slice(Le,ct);if(!A.test(Lt))return!0}return!1},De.isAsyncFunction=function(){if(this.options.ecmaVersion<8||!this.isContextual("async"))return!1;Ke.lastIndex=this.pos;var O=Ke.exec(this.input),q=this.pos+O[0].length;return!ke.test(this.input.slice(this.pos,q))&&this.input.slice(q,q+8)==="function"&&(q+8===this.input.length||!le(this.input.charAt(q+8)))},De.parseStatement=function(O,q,Le){var ve=this.type,ct=this.startNode(),Lt;switch(this.isLet(O)&&(ve=K._var,Lt="let"),ve){case K._break:case K._continue:return this.parseBreakContinueStatement(ct,ve.keyword);case K._debugger:return this.parseDebuggerStatement(ct);case K._do:return this.parseDoStatement(ct);case K._for:return this.parseForStatement(ct);case K._function:return O&&(this.strict||O!=="if"&&O!=="label")&&this.options.ecmaVersion>=6&&this.unexpected(),this.parseFunctionStatement(ct,!1,!O);case K._class:return O&&this.unexpected(),this.parseClass(ct,!0);case K._if:return this.parseIfStatement(ct);case K._return:return this.parseReturnStatement(ct);case K._switch:return this.parseSwitchStatement(ct);case K._throw:return this.parseThrowStatement(ct);case K._try:return this.parseTryStatement(ct);case K._const:case K._var:return Lt=Lt||this.value,O&&Lt!=="var"&&this.unexpected(),this.parseVarStatement(ct,Lt);case K._while:return this.parseWhileStatement(ct);case K._with:return this.parseWithStatement(ct);case K.braceL:return this.parseBlock(!0,ct);case K.semi:return this.parseEmptyStatement(ct);case K._export:case K._import:if(this.options.ecmaVersion>10&&ve===K._import){Ke.lastIndex=this.pos;var hr=Ke.exec(this.input),lr=this.pos+hr[0].length,Gr=this.input.charCodeAt(lr);if(Gr===40||Gr===46)return this.parseExpressionStatement(ct,this.parseExpression())}return this.options.allowImportExportEverywhere||(q||this.raise(this.start,"'import' and 'export' may only appear at the top level"),this.inModule||this.raise(this.start,"'import' and 'export' may appear only with 'sourceType: module'")),ve===K._import?this.parseImport(ct):this.parseExport(ct,Le);default:if(this.isAsyncFunction())return O&&this.unexpected(),this.next(),this.parseFunctionStatement(ct,!0,!O);var ii=this.value,fi=this.parseExpression();return ve===K.name&&fi.type==="Identifier"&&this.eat(K.colon)?this.parseLabeledStatement(ct,ii,fi,O):this.parseExpressionStatement(ct,fi)}},De.parseBreakContinueStatement=function(O,q){var Le=q==="break";this.next(),this.eat(K.semi)||this.insertSemicolon()?O.label=null:this.type!==K.name?this.unexpected():(O.label=this.parseIdent(),this.semicolon());for(var ve=0;ve<this.labels.length;++ve){var ct=this.labels[ve];if((O.label==null||ct.name===O.label.name)&&(ct.kind!=null&&(Le||ct.kind==="loop")||O.label&&Le))break}return ve===this.labels.length&&this.raise(O.start,"Unsyntactic "+q),this.finishNode(O,Le?"BreakStatement":"ContinueStatement")},De.parseDebuggerStatement=function(O){return this.next(),this.semicolon(),this.finishNode(O,"DebuggerStatement")},De.parseDoStatement=function(O){return this.next(),this.labels.push(dt),O.body=this.parseStatement("do"),this.labels.pop(),this.expect(K._while),O.test=this.parseParenExpression(),this.options.ecmaVersion>=6?this.eat(K.semi):this.semicolon(),this.finishNode(O,"DoWhileStatement")},De.parseForStatement=function(O){this.next();var q=this.options.ecmaVersion>=9&&(this.inAsync||!this.inFunction&&this.options.allowAwaitOutsideFunction)&&this.eatContextual("await")?this.lastTokStart:-1;if(this.labels.push(dt),this.enterScope(0),this.expect(K.parenL),this.type===K.semi)return q>-1&&this.unexpected(q),this.parseFor(O,null);var Le=this.isLet();if(this.type===K._var||this.type===K._const||Le){var ve=this.startNode(),ct=Le?"let":this.value;return this.next(),this.parseVar(ve,!0,ct),this.finishNode(ve,"VariableDeclaration"),(this.type===K._in||this.options.ecmaVersion>=6&&this.isContextual("of"))&&ve.declarations.length===1?(this.options.ecmaVersion>=9&&(this.type===K._in?q>-1&&this.unexpected(q):O.await=q>-1),this.parseForIn(O,ve)):(q>-1&&this.unexpected(q),this.parseFor(O,ve))}var Lt=new Q,hr=this.parseExpression(!0,Lt);return this.type===K._in||this.options.ecmaVersion>=6&&this.isContextual("of")?(this.options.ecmaVersion>=9&&(this.type===K._in?q>-1&&this.unexpected(q):O.await=q>-1),this.toAssignable(hr,!1,Lt),this.checkLVal(hr),this.parseForIn(O,hr)):(this.checkExpressionErrors(Lt,!0),q>-1&&this.unexpected(q),this.parseFor(O,hr))},De.parseFunctionStatement=function(O,q,Le){return this.next(),this.parseFunction(O,lt|(Le?0:qt),!1,q)},De.parseIfStatement=function(O){return this.next(),O.test=this.parseParenExpression(),O.consequent=this.parseStatement("if"),O.alternate=this.eat(K._else)?this.parseStatement("if"):null,this.finishNode(O,"IfStatement")},De.parseReturnStatement=function(O){return!this.inFunction&&!this.options.allowReturnOutsideFunction&&this.raise(this.start,"'return' outside of function"),this.next(),this.eat(K.semi)||this.insertSemicolon()?O.argument=null:(O.argument=this.parseExpression(),this.semicolon()),this.finishNode(O,"ReturnStatement")},De.parseSwitchStatement=function(O){this.next(),O.discriminant=this.parseParenExpression(),O.cases=[],this.expect(K.braceL),this.labels.push(Jt),this.enterScope(0);for(var q,Le=!1;this.type!==K.braceR;)if(this.type===K._case||this.type===K._default){var ve=this.type===K._case;q&&this.finishNode(q,"SwitchCase"),O.cases.push(q=this.startNode()),q.consequent=[],this.next(),ve?q.test=this.parseExpression():(Le&&this.raiseRecoverable(this.lastTokStart,"Multiple default clauses"),Le=!0,q.test=null),this.expect(K.colon)}else q||this.unexpected(),q.consequent.push(this.parseStatement(null));return this.exitScope(),q&&this.finishNode(q,"SwitchCase"),this.next(),this.labels.pop(),this.finishNode(O,"SwitchStatement")},De.parseThrowStatement=function(O){return this.next(),ke.test(this.input.slice(this.lastTokEnd,this.start))&&this.raise(this.lastTokEnd,"Illegal newline after throw"),O.argument=this.parseExpression(),this.semicolon(),this.finishNode(O,"ThrowStatement")};var it=[];De.parseTryStatement=function(O){if(this.next(),O.block=this.parseBlock(),O.handler=null,this.type===K._catch){var q=this.startNode();if(this.next(),this.eat(K.parenL)){q.param=this.parseBindingAtom();var Le=q.param.type==="Identifier";this.enterScope(Le?ot:0),this.checkLVal(q.param,Le?Fr:_n),this.expect(K.parenR)}else this.options.ecmaVersion<10&&this.unexpected(),q.param=null,this.enterScope(0);q.body=this.parseBlock(!1),this.exitScope(),O.handler=this.finishNode(q,"CatchClause")}return O.finalizer=this.eat(K._finally)?this.parseBlock():null,!O.handler&&!O.finalizer&&this.raise(O.start,"Missing catch or finally clause"),this.finishNode(O,"TryStatement")},De.parseVarStatement=function(O,q){return this.next(),this.parseVar(O,!1,q),this.semicolon(),this.finishNode(O,"VariableDeclaration")},De.parseWhileStatement=function(O){return this.next(),O.test=this.parseParenExpression(),this.labels.push(dt),O.body=this.parseStatement("while"),this.labels.pop(),this.finishNode(O,"WhileStatement")},De.parseWithStatement=function(O){return this.strict&&this.raise(this.start,"'with' in strict mode"),this.next(),O.object=this.parseParenExpression(),O.body=this.parseStatement("with"),this.finishNode(O,"WithStatement")},De.parseEmptyStatement=function(O){return this.next(),this.finishNode(O,"EmptyStatement")},De.parseLabeledStatement=function(O,q,Le,ve){for(var ct=0,Lt=this.labels;ct<Lt.length;ct+=1){var hr=Lt[ct];hr.name===q&&this.raise(Le.start,"Label '"+q+"' is already declared")}for(var lr=this.type.isLoop?"loop":this.type===K._switch?"switch":null,Gr=this.labels.length-1;Gr>=0;Gr--){var ii=this.labels[Gr];if(ii.statementStart===O.start)ii.statementStart=this.start,ii.kind=lr;else break}return this.labels.push({name:q,kind:lr,statementStart:this.start}),O.body=this.parseStatement(ve?ve.indexOf("label")===-1?ve+"label":ve:"label"),this.labels.pop(),O.label=Le,this.finishNode(O,"LabeledStatement")},De.parseExpressionStatement=function(O,q){return O.expression=q,this.semicolon(),this.finishNode(O,"ExpressionStatement")},De.parseBlock=function(O,q,Le){for(O===void 0&&(O=!0),q===void 0&&(q=this.startNode()),q.body=[],this.expect(K.braceL),O&&this.enterScope(0);this.type!==K.braceR;){var ve=this.parseStatement(null);q.body.push(ve)}return Le&&(this.strict=!1),this.next(),O&&this.exitScope(),this.finishNode(q,"BlockStatement")},De.parseFor=function(O,q){return O.init=q,this.expect(K.semi),O.test=this.type===K.semi?null:this.parseExpression(),this.expect(K.semi),O.update=this.type===K.parenR?null:this.parseExpression(),this.expect(K.parenR),O.body=this.parseStatement("for"),this.exitScope(),this.labels.pop(),this.finishNode(O,"ForStatement")},De.parseForIn=function(O,q){var Le=this.type===K._in;return this.next(),q.type==="VariableDeclaration"&&q.declarations[0].init!=null&&(!Le||this.options.ecmaVersion<8||this.strict||q.kind!=="var"||q.declarations[0].id.type!=="Identifier")?this.raise(q.start,(Le?"for-in":"for-of")+" loop variable declaration may not have an initializer"):q.type==="AssignmentPattern"&&this.raise(q.start,"Invalid left-hand side in for-loop"),O.left=q,O.right=Le?this.parseExpression():this.parseMaybeAssign(),this.expect(K.parenR),O.body=this.parseStatement("for"),this.exitScope(),this.labels.pop(),this.finishNode(O,Le?"ForInStatement":"ForOfStatement")},De.parseVar=function(O,q,Le){for(O.declarations=[],O.kind=Le;;){var ve=this.startNode();if(this.parseVarId(ve,Le),this.eat(K.eq)?ve.init=this.parseMaybeAssign(q):Le==="const"&&!(this.type===K._in||this.options.ecmaVersion>=6&&this.isContextual("of"))?this.unexpected():ve.id.type!=="Identifier"&&!(q&&(this.type===K._in||this.isContextual("of")))?this.raise(this.lastTokEnd,"Complex binding patterns require an initialization value"):ve.init=null,O.declarations.push(this.finishNode(ve,"VariableDeclarator")),!this.eat(K.comma))break}return O},De.parseVarId=function(O,q){O.id=this.parseBindingAtom(),this.checkLVal(O.id,q==="var"?mn:_n,!1)};var lt=1,qt=2,pr=4;De.parseFunction=function(O,q,Le,ve){this.initFunction(O),(this.options.ecmaVersion>=9||this.options.ecmaVersion>=6&&!ve)&&(this.type===K.star&&q&qt&&this.unexpected(),O.generator=this.eat(K.star)),this.options.ecmaVersion>=8&&(O.async=!!ve),q&lt&&(O.id=q&pr&&this.type!==K.name?null:this.parseIdent(),O.id&&!(q&qt)&&this.checkLVal(O.id,this.strict||O.generator||O.async?this.treatFunctionsAsVar?mn:_n:Yr));var ct=this.yieldPos,Lt=this.awaitPos,hr=this.awaitIdentPos;return this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,this.enterScope(Vr(O.async,O.generator)),q&lt||(O.id=this.type===K.name?this.parseIdent():null),this.parseFunctionParams(O),this.parseFunctionBody(O,Le,!1),this.yieldPos=ct,this.awaitPos=Lt,this.awaitIdentPos=hr,this.finishNode(O,q&lt?"FunctionDeclaration":"FunctionExpression")},De.parseFunctionParams=function(O){this.expect(K.parenL),O.params=this.parseBindingList(K.parenR,!1,this.options.ecmaVersion>=8),this.checkYieldAwaitInDefaultParams()},De.parseClass=function(O,q){this.next();var Le=this.strict;this.strict=!0,this.parseClassId(O,q),this.parseClassSuper(O);var ve=this.startNode(),ct=!1;for(ve.body=[],this.expect(K.braceL);this.type!==K.braceR;){var Lt=this.parseClassElement(O.superClass!==null);Lt&&(ve.body.push(Lt),Lt.type==="MethodDefinition"&&Lt.kind==="constructor"&&(ct&&this.raise(Lt.start,"Duplicate constructor in the same class"),ct=!0))}return this.strict=Le,this.next(),O.body=this.finishNode(ve,"ClassBody"),this.finishNode(O,q?"ClassDeclaration":"ClassExpression")},De.parseClassElement=function(O){var q=this;if(this.eat(K.semi))return null;var Le=this.startNode(),ve=function(Gr,ii){ii===void 0&&(ii=!1);var fi=q.start,Na=q.startLoc;return q.eatContextual(Gr)?q.type!==K.parenL&&(!ii||!q.canInsertSemicolon())?!0:(Le.key&&q.unexpected(),Le.computed=!1,Le.key=q.startNodeAt(fi,Na),Le.key.name=Gr,q.finishNode(Le.key,"Identifier"),!1):!1};Le.kind="method",Le.static=ve("static");var ct=this.eat(K.star),Lt=!1;ct||(this.options.ecmaVersion>=8&&ve("async",!0)?(Lt=!0,ct=this.options.ecmaVersion>=9&&this.eat(K.star)):ve("get")?Le.kind="get":ve("set")&&(Le.kind="set")),Le.key||this.parsePropertyName(Le);var hr=Le.key,lr=!1;return!Le.computed&&!Le.static&&(hr.type==="Identifier"&&hr.name==="constructor"||hr.type==="Literal"&&hr.value==="constructor")?(Le.kind!=="method"&&this.raise(hr.start,"Constructor can't have get/set modifier"),ct&&this.raise(hr.start,"Constructor can't be a generator"),Lt&&this.raise(hr.start,"Constructor can't be an async method"),Le.kind="constructor",lr=O):Le.static&&hr.type==="Identifier"&&hr.name==="prototype"&&this.raise(hr.start,"Classes may not have a static property named prototype"),this.parseClassMethod(Le,ct,Lt,lr),Le.kind==="get"&&Le.value.params.length!==0&&this.raiseRecoverable(Le.value.start,"getter should have no params"),Le.kind==="set"&&Le.value.params.length!==1&&this.raiseRecoverable(Le.value.start,"setter should have exactly one param"),Le.kind==="set"&&Le.value.params[0].type==="RestElement"&&this.raiseRecoverable(Le.value.params[0].start,"Setter cannot use rest params"),Le},De.parseClassMethod=function(O,q,Le,ve){return O.value=this.parseMethod(q,Le,ve),this.finishNode(O,"MethodDefinition")},De.parseClassId=function(O,q){this.type===K.name?(O.id=this.parseIdent(),q&&this.checkLVal(O.id,_n,!1)):(q===!0&&this.unexpected(),O.id=null)},De.parseClassSuper=function(O){O.superClass=this.eat(K._extends)?this.parseExprSubscripts():null},De.parseExport=function(O,q){if(this.next(),this.eat(K.star))return this.options.ecmaVersion>=11&&(this.eatContextual("as")?(O.exported=this.parseIdent(!0),this.checkExport(q,O.exported.name,this.lastTokStart)):O.exported=null),this.expectContextual("from"),this.type!==K.string&&this.unexpected(),O.source=this.parseExprAtom(),this.semicolon(),this.finishNode(O,"ExportAllDeclaration");if(this.eat(K._default)){this.checkExport(q,"default",this.lastTokStart);var Le;if(this.type===K._function||(Le=this.isAsyncFunction())){var ve=this.startNode();this.next(),Le&&this.next(),O.declaration=this.parseFunction(ve,lt|pr,!1,Le)}else if(this.type===K._class){var ct=this.startNode();O.declaration=this.parseClass(ct,"nullableID")}else O.declaration=this.parseMaybeAssign(),this.semicolon();return this.finishNode(O,"ExportDefaultDeclaration")}if(this.shouldParseExportStatement())O.declaration=this.parseStatement(null),O.declaration.type==="VariableDeclaration"?this.checkVariableExport(q,O.declaration.declarations):this.checkExport(q,O.declaration.id.name,O.declaration.id.start),O.specifiers=[],O.source=null;else{if(O.declaration=null,O.specifiers=this.parseExportSpecifiers(q),this.eatContextual("from"))this.type!==K.string&&this.unexpected(),O.source=this.parseExprAtom();else{for(var Lt=0,hr=O.specifiers;Lt<hr.length;Lt+=1){var lr=hr[Lt];this.checkUnreserved(lr.local),this.checkLocalExport(lr.local)}O.source=null}this.semicolon()}return this.finishNode(O,"ExportNamedDeclaration")},De.checkExport=function(O,q,Le){!O||(oe(O,q)&&this.raiseRecoverable(Le,"Duplicate export '"+q+"'"),O[q]=!0)},De.checkPatternExport=function(O,q){var Le=q.type;if(Le==="Identifier")this.checkExport(O,q.name,q.start);else if(Le==="ObjectPattern")for(var ve=0,ct=q.properties;ve<ct.length;ve+=1){var Lt=ct[ve];this.checkPatternExport(O,Lt)}else if(Le==="ArrayPattern")for(var hr=0,lr=q.elements;hr<lr.length;hr+=1){var Gr=lr[hr];Gr&&this.checkPatternExport(O,Gr)}else Le==="Property"?this.checkPatternExport(O,q.value):Le==="AssignmentPattern"?this.checkPatternExport(O,q.left):Le==="RestElement"?this.checkPatternExport(O,q.argument):Le==="ParenthesizedExpression"&&this.checkPatternExport(O,q.expression)},De.checkVariableExport=function(O,q){if(!!O)for(var Le=0,ve=q;Le<ve.length;Le+=1){var ct=ve[Le];this.checkPatternExport(O,ct.id)}},De.shouldParseExportStatement=function(){return this.type.keyword==="var"||this.type.keyword==="const"||this.type.keyword==="class"||this.type.keyword==="function"||this.isLet()||this.isAsyncFunction()},De.parseExportSpecifiers=function(O){var q=[],Le=!0;for(this.expect(K.braceL);!this.eat(K.braceR);){if(Le)Le=!1;else if(this.expect(K.comma),this.afterTrailingComma(K.braceR))break;var ve=this.startNode();ve.local=this.parseIdent(!0),ve.exported=this.eatContextual("as")?this.parseIdent(!0):ve.local,this.checkExport(O,ve.exported.name,ve.exported.start),q.push(this.finishNode(ve,"ExportSpecifier"))}return q},De.parseImport=function(O){return this.next(),this.type===K.string?(O.specifiers=it,O.source=this.parseExprAtom()):(O.specifiers=this.parseImportSpecifiers(),this.expectContextual("from"),O.source=this.type===K.string?this.parseExprAtom():this.unexpected()),this.semicolon(),this.finishNode(O,"ImportDeclaration")},De.parseImportSpecifiers=function(){var O=[],q=!0;if(this.type===K.name){var Le=this.startNode();if(Le.local=this.parseIdent(),this.checkLVal(Le.local,_n),O.push(this.finishNode(Le,"ImportDefaultSpecifier")),!this.eat(K.comma))return O}if(this.type===K.star){var ve=this.startNode();return this.next(),this.expectContextual("as"),ve.local=this.parseIdent(),this.checkLVal(ve.local,_n),O.push(this.finishNode(ve,"ImportNamespaceSpecifier")),O}for(this.expect(K.braceL);!this.eat(K.braceR);){if(q)q=!1;else if(this.expect(K.comma),this.afterTrailingComma(K.braceR))break;var ct=this.startNode();ct.imported=this.parseIdent(!0),this.eatContextual("as")?ct.local=this.parseIdent():(this.checkUnreserved(ct.imported),ct.local=ct.imported),this.checkLVal(ct.local,_n),O.push(this.finishNode(ct,"ImportSpecifier"))}return O},De.adaptDirectivePrologue=function(O){for(var q=0;q<O.length&&this.isDirectiveCandidate(O[q]);++q)O[q].directive=O[q].expression.raw.slice(1,-1)},De.isDirectiveCandidate=function(O){return O.type==="ExpressionStatement"&&O.expression.type==="Literal"&&typeof O.expression.value=="string"&&(this.input[O.start]==='"'||this.input[O.start]==="'")};var Hr=ft.prototype;Hr.toAssignable=function(O,q,Le){if(this.options.ecmaVersion>=6&&O)switch(O.type){case"Identifier":this.inAsync&&O.name==="await"&&this.raise(O.start,"Cannot use 'await' as identifier inside an async function");break;case"ObjectPattern":case"ArrayPattern":case"RestElement":break;case"ObjectExpression":O.type="ObjectPattern",Le&&this.checkPatternErrors(Le,!0);for(var ve=0,ct=O.properties;ve<ct.length;ve+=1){var Lt=ct[ve];this.toAssignable(Lt,q),Lt.type==="RestElement"&&(Lt.argument.type==="ArrayPattern"||Lt.argument.type==="ObjectPattern")&&this.raise(Lt.argument.start,"Unexpected token")}break;case"Property":O.kind!=="init"&&this.raise(O.key.start,"Object pattern can't contain getter or setter"),this.toAssignable(O.value,q);break;case"ArrayExpression":O.type="ArrayPattern",Le&&this.checkPatternErrors(Le,!0),this.toAssignableList(O.elements,q);break;case"SpreadElement":O.type="RestElement",this.toAssignable(O.argument,q),O.argument.type==="AssignmentPattern"&&this.raise(O.argument.start,"Rest elements cannot have a default value");break;case"AssignmentExpression":O.operator!=="="&&this.raise(O.left.end,"Only '=' operator can be used for specifying default value."),O.type="AssignmentPattern",delete O.operator,this.toAssignable(O.left,q);case"AssignmentPattern":break;case"ParenthesizedExpression":this.toAssignable(O.expression,q,Le);break;case"ChainExpression":this.raiseRecoverable(O.start,"Optional chaining cannot appear in left-hand side");break;case"MemberExpression":if(!q)break;default:this.raise(O.start,"Assigning to rvalue")}else Le&&this.checkPatternErrors(Le,!0);return O},Hr.toAssignableList=function(O,q){for(var Le=O.length,ve=0;ve<Le;ve++){var ct=O[ve];ct&&this.toAssignable(ct,q)}if(Le){var Lt=O[Le-1];this.options.ecmaVersion===6&&q&&Lt&&Lt.type==="RestElement"&&Lt.argument.type!=="Identifier"&&this.unexpected(Lt.argument.start)}return O},Hr.parseSpread=function(O){var q=this.startNode();return this.next(),q.argument=this.parseMaybeAssign(!1,O),this.finishNode(q,"SpreadElement")},Hr.parseRestBinding=function(){var O=this.startNode();return this.next(),this.options.ecmaVersion===6&&this.type!==K.name&&this.unexpected(),O.argument=this.parseBindingAtom(),this.finishNode(O,"RestElement")},Hr.parseBindingAtom=function(){if(this.options.ecmaVersion>=6)switch(this.type){case K.bracketL:var O=this.startNode();return this.next(),O.elements=this.parseBindingList(K.bracketR,!0,!0),this.finishNode(O,"ArrayPattern");case K.braceL:return this.parseObj(!0)}return this.parseIdent()},Hr.parseBindingList=function(O,q,Le){for(var ve=[],ct=!0;!this.eat(O);)if(ct?ct=!1:this.expect(K.comma),q&&this.type===K.comma)ve.push(null);else{if(Le&&this.afterTrailingComma(O))break;if(this.type===K.ellipsis){var Lt=this.parseRestBinding();this.parseBindingListItem(Lt),ve.push(Lt),this.type===K.comma&&this.raise(this.start,"Comma is not permitted after the rest element"),this.expect(O);break}else{var hr=this.parseMaybeDefault(this.start,this.startLoc);this.parseBindingListItem(hr),ve.push(hr)}}return ve},Hr.parseBindingListItem=function(O){return O},Hr.parseMaybeDefault=function(O,q,Le){if(Le=Le||this.parseBindingAtom(),this.options.ecmaVersion<6||!this.eat(K.eq))return Le;var ve=this.startNodeAt(O,q);return ve.left=Le,ve.right=this.parseMaybeAssign(),this.finishNode(ve,"AssignmentPattern")},Hr.checkLVal=function(O,q,Le){switch(q===void 0&&(q=Qn),O.type){case"Identifier":q===_n&&O.name==="let"&&this.raiseRecoverable(O.start,"let is disallowed as a lexically bound name"),this.strict&&this.reservedWordsStrictBind.test(O.name)&&this.raiseRecoverable(O.start,(q?"Binding ":"Assigning to ")+O.name+" in strict mode"),Le&&(oe(Le,O.name)&&this.raiseRecoverable(O.start,"Argument name clash"),Le[O.name]=!0),q!==Qn&&q!==kr&&this.declareName(O.name,q,O.start);break;case"ChainExpression":this.raiseRecoverable(O.start,"Optional chaining cannot appear in left-hand side");break;case"MemberExpression":q&&this.raiseRecoverable(O.start,"Binding member expression");break;case"ObjectPattern":for(var ve=0,ct=O.properties;ve<ct.length;ve+=1){var Lt=ct[ve];this.checkLVal(Lt,q,Le)}break;case"Property":this.checkLVal(O.value,q,Le);break;case"ArrayPattern":for(var hr=0,lr=O.elements;hr<lr.length;hr+=1){var Gr=lr[hr];Gr&&this.checkLVal(Gr,q,Le)}break;case"AssignmentPattern":this.checkLVal(O.left,q,Le);break;case"RestElement":this.checkLVal(O.argument,q,Le);break;case"ParenthesizedExpression":this.checkLVal(O.expression,q,Le);break;default:this.raise(O.start,(q?"Binding":"Assigning to")+" rvalue")}};var Xr=ft.prototype;Xr.checkPropClash=function(O,q,Le){if(!(this.options.ecmaVersion>=9&&O.type==="SpreadElement")&&!(this.options.ecmaVersion>=6&&(O.computed||O.method||O.shorthand))){var ve=O.key,ct;switch(ve.type){case"Identifier":ct=ve.name;break;case"Literal":ct=String(ve.value);break;default:return}var Lt=O.kind;if(this.options.ecmaVersion>=6){ct==="__proto__"&&Lt==="init"&&(q.proto&&(Le?Le.doubleProto<0&&(Le.doubleProto=ve.start):this.raiseRecoverable(ve.start,"Redefinition of __proto__ property")),q.proto=!0);return}ct="$"+ct;var hr=q[ct];if(hr){var lr;Lt==="init"?lr=this.strict&&hr.init||hr.get||hr.set:lr=hr.init||hr[Lt],lr&&this.raiseRecoverable(ve.start,"Redefinition of property")}else hr=q[ct]={init:!1,get:!1,set:!1};hr[Lt]=!0}},Xr.parseExpression=function(O,q){var Le=this.start,ve=this.startLoc,ct=this.parseMaybeAssign(O,q);if(this.type===K.comma){var Lt=this.startNodeAt(Le,ve);for(Lt.expressions=[ct];this.eat(K.comma);)Lt.expressions.push(this.parseMaybeAssign(O,q));return this.finishNode(Lt,"SequenceExpression")}return ct},Xr.parseMaybeAssign=function(O,q,Le){if(this.isContextual("yield")){if(this.inGenerator)return this.parseYield(O);this.exprAllowed=!1}var ve=!1,ct=-1,Lt=-1;q?(ct=q.parenthesizedAssign,Lt=q.trailingComma,q.parenthesizedAssign=q.trailingComma=-1):(q=new Q,ve=!0);var hr=this.start,lr=this.startLoc;(this.type===K.parenL||this.type===K.name)&&(this.potentialArrowAt=this.start);var Gr=this.parseMaybeConditional(O,q);if(Le&&(Gr=Le.call(this,Gr,hr,lr)),this.type.isAssign){var ii=this.startNodeAt(hr,lr);return ii.operator=this.value,ii.left=this.type===K.eq?this.toAssignable(Gr,!1,q):Gr,ve||(q.parenthesizedAssign=q.trailingComma=q.doubleProto=-1),q.shorthandAssign>=ii.left.start&&(q.shorthandAssign=-1),this.checkLVal(Gr),this.next(),ii.right=this.parseMaybeAssign(O),this.finishNode(ii,"AssignmentExpression")}else ve&&this.checkExpressionErrors(q,!0);return ct>-1&&(q.parenthesizedAssign=ct),Lt>-1&&(q.trailingComma=Lt),Gr},Xr.parseMaybeConditional=function(O,q){var Le=this.start,ve=this.startLoc,ct=this.parseExprOps(O,q);if(this.checkExpressionErrors(q))return ct;if(this.eat(K.question)){var Lt=this.startNodeAt(Le,ve);return Lt.test=ct,Lt.consequent=this.parseMaybeAssign(),this.expect(K.colon),Lt.alternate=this.parseMaybeAssign(O),this.finishNode(Lt,"ConditionalExpression")}return ct},Xr.parseExprOps=function(O,q){var Le=this.start,ve=this.startLoc,ct=this.parseMaybeUnary(q,!1);return this.checkExpressionErrors(q)||ct.start===Le&&ct.type==="ArrowFunctionExpression"?ct:this.parseExprOp(ct,Le,ve,-1,O)},Xr.parseExprOp=function(O,q,Le,ve,ct){var Lt=this.type.binop;if(Lt!=null&&(!ct||this.type!==K._in)&&Lt>ve){var hr=this.type===K.logicalOR||this.type===K.logicalAND,lr=this.type===K.coalesce;lr&&(Lt=K.logicalAND.binop);var Gr=this.value;this.next();var ii=this.start,fi=this.startLoc,Na=this.parseExprOp(this.parseMaybeUnary(null,!1),ii,fi,Lt,ct),vo=this.buildBinary(q,Le,O,Na,Gr,hr||lr);return(hr&&this.type===K.coalesce||lr&&(this.type===K.logicalOR||this.type===K.logicalAND))&&this.raiseRecoverable(this.start,"Logical expressions and coalesce expressions cannot be mixed. Wrap either by parentheses"),this.parseExprOp(vo,q,Le,ve,ct)}return O},Xr.buildBinary=function(O,q,Le,ve,ct,Lt){var hr=this.startNodeAt(O,q);return hr.left=Le,hr.operator=ct,hr.right=ve,this.finishNode(hr,Lt?"LogicalExpression":"BinaryExpression")},Xr.parseMaybeUnary=function(O,q){var Le=this.start,ve=this.startLoc,ct;if(this.isContextual("await")&&(this.inAsync||!this.inFunction&&this.options.allowAwaitOutsideFunction))ct=this.parseAwait(),q=!0;else if(this.type.prefix){var Lt=this.startNode(),hr=this.type===K.incDec;Lt.operator=this.value,Lt.prefix=!0,this.next(),Lt.argument=this.parseMaybeUnary(null,!0),this.checkExpressionErrors(O,!0),hr?this.checkLVal(Lt.argument):this.strict&&Lt.operator==="delete"&&Lt.argument.type==="Identifier"?this.raiseRecoverable(Lt.start,"Deleting local variable in strict mode"):q=!0,ct=this.finishNode(Lt,hr?"UpdateExpression":"UnaryExpression")}else{if(ct=this.parseExprSubscripts(O),this.checkExpressionErrors(O))return ct;for(;this.type.postfix&&!this.canInsertSemicolon();){var lr=this.startNodeAt(Le,ve);lr.operator=this.value,lr.prefix=!1,lr.argument=ct,this.checkLVal(ct),this.next(),ct=this.finishNode(lr,"UpdateExpression")}}return!q&&this.eat(K.starstar)?this.buildBinary(Le,ve,ct,this.parseMaybeUnary(null,!1),"**",!1):ct},Xr.parseExprSubscripts=function(O){var q=this.start,Le=this.startLoc,ve=this.parseExprAtom(O);if(ve.type==="ArrowFunctionExpression"&&this.input.slice(this.lastTokStart,this.lastTokEnd)!==")")return ve;var ct=this.parseSubscripts(ve,q,Le);return O&&ct.type==="MemberExpression"&&(O.parenthesizedAssign>=ct.start&&(O.parenthesizedAssign=-1),O.parenthesizedBind>=ct.start&&(O.parenthesizedBind=-1)),ct},Xr.parseSubscripts=function(O,q,Le,ve){for(var ct=this.options.ecmaVersion>=8&&O.type==="Identifier"&&O.name==="async"&&this.lastTokEnd===O.end&&!this.canInsertSemicolon()&&O.end-O.start===5&&this.potentialArrowAt===O.start,Lt=!1;;){var hr=this.parseSubscript(O,q,Le,ve,ct,Lt);if(hr.optional&&(Lt=!0),hr===O||hr.type==="ArrowFunctionExpression"){if(Lt){var lr=this.startNodeAt(q,Le);lr.expression=hr,hr=this.finishNode(lr,"ChainExpression")}return hr}O=hr}},Xr.parseSubscript=function(O,q,Le,ve,ct,Lt){var hr=this.options.ecmaVersion>=11,lr=hr&&this.eat(K.questionDot);ve&&lr&&this.raise(this.lastTokStart,"Optional chaining cannot appear in the callee of new expressions");var Gr=this.eat(K.bracketL);if(Gr||lr&&this.type!==K.parenL&&this.type!==K.backQuote||this.eat(K.dot)){var ii=this.startNodeAt(q,Le);ii.object=O,ii.property=Gr?this.parseExpression():this.parseIdent(this.options.allowReserved!=="never"),ii.computed=!!Gr,Gr&&this.expect(K.bracketR),hr&&(ii.optional=lr),O=this.finishNode(ii,"MemberExpression")}else if(!ve&&this.eat(K.parenL)){var fi=new Q,Na=this.yieldPos,vo=this.awaitPos,Va=this.awaitIdentPos;this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0;var ha=this.parseExprList(K.parenR,this.options.ecmaVersion>=8,!1,fi);if(ct&&!lr&&!this.canInsertSemicolon()&&this.eat(K.arrow))return this.checkPatternErrors(fi,!1),this.checkYieldAwaitInDefaultParams(),this.awaitIdentPos>0&&this.raise(this.awaitIdentPos,"Cannot use 'await' as identifier inside an async function"),this.yieldPos=Na,this.awaitPos=vo,this.awaitIdentPos=Va,this.parseArrowExpression(this.startNodeAt(q,Le),ha,!0);this.checkExpressionErrors(fi,!0),this.yieldPos=Na||this.yieldPos,this.awaitPos=vo||this.awaitPos,this.awaitIdentPos=Va||this.awaitIdentPos;var $o=this.startNodeAt(q,Le);$o.callee=O,$o.arguments=ha,hr&&($o.optional=lr),O=this.finishNode($o,"CallExpression")}else if(this.type===K.backQuote){(lr||Lt)&&this.raise(this.start,"Optional chaining cannot appear in the tag of tagged template expressions");var ms=this.startNodeAt(q,Le);ms.tag=O,ms.quasi=this.parseTemplate({isTagged:!0}),O=this.finishNode(ms,"TaggedTemplateExpression")}return O},Xr.parseExprAtom=function(O){this.type===K.slash&&this.readRegexp();var q,Le=this.potentialArrowAt===this.start;switch(this.type){case K._super:return this.allowSuper||this.raise(this.start,"'super' keyword outside a method"),q=this.startNode(),this.next(),this.type===K.parenL&&!this.allowDirectSuper&&this.raise(q.start,"super() call outside constructor of a subclass"),this.type!==K.dot&&this.type!==K.bracketL&&this.type!==K.parenL&&this.unexpected(),this.finishNode(q,"Super");case K._this:return q=this.startNode(),this.next(),this.finishNode(q,"ThisExpression");case K.name:var ve=this.start,ct=this.startLoc,Lt=this.containsEsc,hr=this.parseIdent(!1);if(this.options.ecmaVersion>=8&&!Lt&&hr.name==="async"&&!this.canInsertSemicolon()&&this.eat(K._function))return this.parseFunction(this.startNodeAt(ve,ct),0,!1,!0);if(Le&&!this.canInsertSemicolon()){if(this.eat(K.arrow))return this.parseArrowExpression(this.startNodeAt(ve,ct),[hr],!1);if(this.options.ecmaVersion>=8&&hr.name==="async"&&this.type===K.name&&!Lt)return hr=this.parseIdent(!1),(this.canInsertSemicolon()||!this.eat(K.arrow))&&this.unexpected(),this.parseArrowExpression(this.startNodeAt(ve,ct),[hr],!0)}return hr;case K.regexp:var lr=this.value;return q=this.parseLiteral(lr.value),q.regex={pattern:lr.pattern,flags:lr.flags},q;case K.num:case K.string:return this.parseLiteral(this.value);case K._null:case K._true:case K._false:return q=this.startNode(),q.value=this.type===K._null?null:this.type===K._true,q.raw=this.type.keyword,this.next(),this.finishNode(q,"Literal");case K.parenL:var Gr=this.start,ii=this.parseParenAndDistinguishExpression(Le);return O&&(O.parenthesizedAssign<0&&!this.isSimpleAssignTarget(ii)&&(O.parenthesizedAssign=Gr),O.parenthesizedBind<0&&(O.parenthesizedBind=Gr)),ii;case K.bracketL:return q=this.startNode(),this.next(),q.elements=this.parseExprList(K.bracketR,!0,!0,O),this.finishNode(q,"ArrayExpression");case K.braceL:return this.parseObj(!1,O);case K._function:return q=this.startNode(),this.next(),this.parseFunction(q,0);case K._class:return this.parseClass(this.startNode(),!1);case K._new:return this.parseNew();case K.backQuote:return this.parseTemplate();case K._import:return this.options.ecmaVersion>=11?this.parseExprImport():this.unexpected();default:this.unexpected()}},Xr.parseExprImport=function(){var O=this.startNode();this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword import");var q=this.parseIdent(!0);switch(this.type){case K.parenL:return this.parseDynamicImport(O);case K.dot:return O.meta=q,this.parseImportMeta(O);default:this.unexpected()}},Xr.parseDynamicImport=function(O){if(this.next(),O.source=this.parseMaybeAssign(),!this.eat(K.parenR)){var q=this.start;this.eat(K.comma)&&this.eat(K.parenR)?this.raiseRecoverable(q,"Trailing comma is not allowed in import()"):this.unexpected(q)}return this.finishNode(O,"ImportExpression")},Xr.parseImportMeta=function(O){this.next();var q=this.containsEsc;return O.property=this.parseIdent(!0),O.property.name!=="meta"&&this.raiseRecoverable(O.property.start,"The only valid meta property for import is 'import.meta'"),q&&this.raiseRecoverable(O.start,"'import.meta' must not contain escaped characters"),this.options.sourceType!=="module"&&this.raiseRecoverable(O.start,"Cannot use 'import.meta' outside a module"),this.finishNode(O,"MetaProperty")},Xr.parseLiteral=function(O){var q=this.startNode();return q.value=O,q.raw=this.input.slice(this.start,this.end),q.raw.charCodeAt(q.raw.length-1)===110&&(q.bigint=q.raw.slice(0,-1).replace(/_/g,"")),this.next(),this.finishNode(q,"Literal")},Xr.parseParenExpression=function(){this.expect(K.parenL);var O=this.parseExpression();return this.expect(K.parenR),O},Xr.parseParenAndDistinguishExpression=function(O){var q=this.start,Le=this.startLoc,ve,ct=this.options.ecmaVersion>=8;if(this.options.ecmaVersion>=6){this.next();var Lt=this.start,hr=this.startLoc,lr=[],Gr=!0,ii=!1,fi=new Q,Na=this.yieldPos,vo=this.awaitPos,Va;for(this.yieldPos=0,this.awaitPos=0;this.type!==K.parenR;)if(Gr?Gr=!1:this.expect(K.comma),ct&&this.afterTrailingComma(K.parenR,!0)){ii=!0;break}else if(this.type===K.ellipsis){Va=this.start,lr.push(this.parseParenItem(this.parseRestBinding())),this.type===K.comma&&this.raise(this.start,"Comma is not permitted after the rest element");break}else lr.push(this.parseMaybeAssign(!1,fi,this.parseParenItem));var ha=this.start,$o=this.startLoc;if(this.expect(K.parenR),O&&!this.canInsertSemicolon()&&this.eat(K.arrow))return this.checkPatternErrors(fi,!1),this.checkYieldAwaitInDefaultParams(),this.yieldPos=Na,this.awaitPos=vo,this.parseParenArrowList(q,Le,lr);(!lr.length||ii)&&this.unexpected(this.lastTokStart),Va&&this.unexpected(Va),this.checkExpressionErrors(fi,!0),this.yieldPos=Na||this.yieldPos,this.awaitPos=vo||this.awaitPos,lr.length>1?(ve=this.startNodeAt(Lt,hr),ve.expressions=lr,this.finishNodeAt(ve,"SequenceExpression",ha,$o)):ve=lr[0]}else ve=this.parseParenExpression();if(this.options.preserveParens){var ms=this.startNodeAt(q,Le);return ms.expression=ve,this.finishNode(ms,"ParenthesizedExpression")}else return ve},Xr.parseParenItem=function(O){return O},Xr.parseParenArrowList=function(O,q,Le){return this.parseArrowExpression(this.startNodeAt(O,q),Le)};var ce=[];Xr.parseNew=function(){this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword new");var O=this.startNode(),q=this.parseIdent(!0);if(this.options.ecmaVersion>=6&&this.eat(K.dot)){O.meta=q;var Le=this.containsEsc;return O.property=this.parseIdent(!0),O.property.name!=="target"&&this.raiseRecoverable(O.property.start,"The only valid meta property for new is 'new.target'"),Le&&this.raiseRecoverable(O.start,"'new.target' must not contain escaped characters"),this.inNonArrowFunction()||this.raiseRecoverable(O.start,"'new.target' can only be used in functions"),this.finishNode(O,"MetaProperty")}var ve=this.start,ct=this.startLoc,Lt=this.type===K._import;return O.callee=this.parseSubscripts(this.parseExprAtom(),ve,ct,!0),Lt&&O.callee.type==="ImportExpression"&&this.raise(ve,"Cannot use new with import()"),this.eat(K.parenL)?O.arguments=this.parseExprList(K.parenR,this.options.ecmaVersion>=8,!1):O.arguments=ce,this.finishNode(O,"NewExpression")},Xr.parseTemplateElement=function(O){var q=O.isTagged,Le=this.startNode();return this.type===K.invalidTemplate?(q||this.raiseRecoverable(this.start,"Bad escape sequence in untagged template literal"),Le.value={raw:this.value,cooked:null}):Le.value={raw:this.input.slice(this.start,this.end).replace(/\r\n?/g,`
`),cooked:this.value},this.next(),Le.tail=this.type===K.backQuote,this.finishNode(Le,"TemplateElement")},Xr.parseTemplate=function(O){O===void 0&&(O={});var q=O.isTagged;q===void 0&&(q=!1);var Le=this.startNode();this.next(),Le.expressions=[];var ve=this.parseTemplateElement({isTagged:q});for(Le.quasis=[ve];!ve.tail;)this.type===K.eof&&this.raise(this.pos,"Unterminated template literal"),this.expect(K.dollarBraceL),Le.expressions.push(this.parseExpression()),this.expect(K.braceR),Le.quasis.push(ve=this.parseTemplateElement({isTagged:q}));return this.next(),this.finishNode(Le,"TemplateLiteral")},Xr.isAsyncProp=function(O){return!O.computed&&O.key.type==="Identifier"&&O.key.name==="async"&&(this.type===K.name||this.type===K.num||this.type===K.string||this.type===K.bracketL||this.type.keyword||this.options.ecmaVersion>=9&&this.type===K.star)&&!ke.test(this.input.slice(this.lastTokEnd,this.start))},Xr.parseObj=function(O,q){var Le=this.startNode(),ve=!0,ct={};for(Le.properties=[],this.next();!this.eat(K.braceR);){if(ve)ve=!1;else if(this.expect(K.comma),this.options.ecmaVersion>=5&&this.afterTrailingComma(K.braceR))break;var Lt=this.parseProperty(O,q);O||this.checkPropClash(Lt,ct,q),Le.properties.push(Lt)}return this.finishNode(Le,O?"ObjectPattern":"ObjectExpression")},Xr.parseProperty=function(O,q){var Le=this.startNode(),ve,ct,Lt,hr;if(this.options.ecmaVersion>=9&&this.eat(K.ellipsis))return O?(Le.argument=this.parseIdent(!1),this.type===K.comma&&this.raise(this.start,"Comma is not permitted after the rest element"),this.finishNode(Le,"RestElement")):(this.type===K.parenL&&q&&(q.parenthesizedAssign<0&&(q.parenthesizedAssign=this.start),q.parenthesizedBind<0&&(q.parenthesizedBind=this.start)),Le.argument=this.parseMaybeAssign(!1,q),this.type===K.comma&&q&&q.trailingComma<0&&(q.trailingComma=this.start),this.finishNode(Le,"SpreadElement"));this.options.ecmaVersion>=6&&(Le.method=!1,Le.shorthand=!1,(O||q)&&(Lt=this.start,hr=this.startLoc),O||(ve=this.eat(K.star)));var lr=this.containsEsc;return this.parsePropertyName(Le),!O&&!lr&&this.options.ecmaVersion>=8&&!ve&&this.isAsyncProp(Le)?(ct=!0,ve=this.options.ecmaVersion>=9&&this.eat(K.star),this.parsePropertyName(Le,q)):ct=!1,this.parsePropertyValue(Le,O,ve,ct,Lt,hr,q,lr),this.finishNode(Le,"Property")},Xr.parsePropertyValue=function(O,q,Le,ve,ct,Lt,hr,lr){if((Le||ve)&&this.type===K.colon&&this.unexpected(),this.eat(K.colon))O.value=q?this.parseMaybeDefault(this.start,this.startLoc):this.parseMaybeAssign(!1,hr),O.kind="init";else if(this.options.ecmaVersion>=6&&this.type===K.parenL)q&&this.unexpected(),O.kind="init",O.method=!0,O.value=this.parseMethod(Le,ve);else if(!q&&!lr&&this.options.ecmaVersion>=5&&!O.computed&&O.key.type==="Identifier"&&(O.key.name==="get"||O.key.name==="set")&&this.type!==K.comma&&this.type!==K.braceR&&this.type!==K.eq){(Le||ve)&&this.unexpected(),O.kind=O.key.name,this.parsePropertyName(O),O.value=this.parseMethod(!1);var Gr=O.kind==="get"?0:1;if(O.value.params.length!==Gr){var ii=O.value.start;O.kind==="get"?this.raiseRecoverable(ii,"getter should have no params"):this.raiseRecoverable(ii,"setter should have exactly one param")}else O.kind==="set"&&O.value.params[0].type==="RestElement"&&this.raiseRecoverable(O.value.params[0].start,"Setter cannot use rest params")}else this.options.ecmaVersion>=6&&!O.computed&&O.key.type==="Identifier"?((Le||ve)&&this.unexpected(),this.checkUnreserved(O.key),O.key.name==="await"&&!this.awaitIdentPos&&(this.awaitIdentPos=ct),O.kind="init",q?O.value=this.parseMaybeDefault(ct,Lt,O.key):this.type===K.eq&&hr?(hr.shorthandAssign<0&&(hr.shorthandAssign=this.start),O.value=this.parseMaybeDefault(ct,Lt,O.key)):O.value=O.key,O.shorthand=!0):this.unexpected()},Xr.parsePropertyName=function(O){if(this.options.ecmaVersion>=6){if(this.eat(K.bracketL))return O.computed=!0,O.key=this.parseMaybeAssign(),this.expect(K.bracketR),O.key;O.computed=!1}return O.key=this.type===K.num||this.type===K.string?this.parseExprAtom():this.parseIdent(this.options.allowReserved!=="never")},Xr.initFunction=function(O){O.id=null,this.options.ecmaVersion>=6&&(O.generator=O.expression=!1),this.options.ecmaVersion>=8&&(O.async=!1)},Xr.parseMethod=function(O,q,Le){var ve=this.startNode(),ct=this.yieldPos,Lt=this.awaitPos,hr=this.awaitIdentPos;return this.initFunction(ve),this.options.ecmaVersion>=6&&(ve.generator=O),this.options.ecmaVersion>=8&&(ve.async=!!q),this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,this.enterScope(Vr(q,ve.generator)|_r|(Le?cr:0)),this.expect(K.parenL),ve.params=this.parseBindingList(K.parenR,!1,this.options.ecmaVersion>=8),this.checkYieldAwaitInDefaultParams(),this.parseFunctionBody(ve,!1,!0),this.yieldPos=ct,this.awaitPos=Lt,this.awaitIdentPos=hr,this.finishNode(ve,"FunctionExpression")},Xr.parseArrowExpression=function(O,q,Le){var ve=this.yieldPos,ct=this.awaitPos,Lt=this.awaitIdentPos;return this.enterScope(Vr(Le,!1)|sn),this.initFunction(O),this.options.ecmaVersion>=8&&(O.async=!!Le),this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,O.params=this.toAssignableList(q,!0),this.parseFunctionBody(O,!0,!1),this.yieldPos=ve,this.awaitPos=ct,this.awaitIdentPos=Lt,this.finishNode(O,"ArrowFunctionExpression")},Xr.parseFunctionBody=function(O,q,Le){var ve=q&&this.type!==K.braceL,ct=this.strict,Lt=!1;if(ve)O.body=this.parseMaybeAssign(),O.expression=!0,this.checkParams(O,!1);else{var hr=this.options.ecmaVersion>=7&&!this.isSimpleParamList(O.params);(!ct||hr)&&(Lt=this.strictDirective(this.end),Lt&&hr&&this.raiseRecoverable(O.start,"Illegal 'use strict' directive in function with non-simple parameter list"));var lr=this.labels;this.labels=[],Lt&&(this.strict=!0),this.checkParams(O,!ct&&!Lt&&!q&&!Le&&this.isSimpleParamList(O.params)),this.strict&&O.id&&this.checkLVal(O.id,kr),O.body=this.parseBlock(!1,void 0,Lt&&!ct),O.expression=!1,this.adaptDirectivePrologue(O.body.body),this.labels=lr}this.exitScope()},Xr.isSimpleParamList=function(O){for(var q=0,Le=O;q<Le.length;q+=1){var ve=Le[q];if(ve.type!=="Identifier")return!1}return!0},Xr.checkParams=function(O,q){for(var Le={},ve=0,ct=O.params;ve<ct.length;ve+=1){var Lt=ct[ve];this.checkLVal(Lt,mn,q?null:Le)}},Xr.parseExprList=function(O,q,Le,ve){for(var ct=[],Lt=!0;!this.eat(O);){if(Lt)Lt=!1;else if(this.expect(K.comma),q&&this.afterTrailingComma(O))break;var hr=void 0;Le&&this.type===K.comma?hr=null:this.type===K.ellipsis?(hr=this.parseSpread(ve),ve&&this.type===K.comma&&ve.trailingComma<0&&(ve.trailingComma=this.start)):hr=this.parseMaybeAssign(!1,ve),ct.push(hr)}return ct},Xr.checkUnreserved=function(O){var q=O.start,Le=O.end,ve=O.name;if(this.inGenerator&&ve==="yield"&&this.raiseRecoverable(q,"Cannot use 'yield' as identifier inside a generator"),this.inAsync&&ve==="await"&&this.raiseRecoverable(q,"Cannot use 'await' as identifier inside an async function"),this.keywords.test(ve)&&this.raise(q,"Unexpected keyword '"+ve+"'"),!(this.options.ecmaVersion<6&&this.input.slice(q,Le).indexOf("\\")!==-1)){var ct=this.strict?this.reservedWordsStrict:this.reservedWords;ct.test(ve)&&(!this.inAsync&&ve==="await"&&this.raiseRecoverable(q,"Cannot use keyword 'await' outside an async function"),this.raiseRecoverable(q,"The keyword '"+ve+"' is reserved"))}},Xr.parseIdent=function(O,q){var Le=this.startNode();return this.type===K.name?Le.name=this.value:this.type.keyword?(Le.name=this.type.keyword,(Le.name==="class"||Le.name==="function")&&(this.lastTokEnd!==this.lastTokStart+1||this.input.charCodeAt(this.lastTokStart)!==46)&&this.context.pop()):this.unexpected(),this.next(!!O),this.finishNode(Le,"Identifier"),O||(this.checkUnreserved(Le),Le.name==="await"&&!this.awaitIdentPos&&(this.awaitIdentPos=Le.start)),Le},Xr.parseYield=function(O){this.yieldPos||(this.yieldPos=this.start);var q=this.startNode();return this.next(),this.type===K.semi||this.canInsertSemicolon()||this.type!==K.star&&!this.type.startsExpr?(q.delegate=!1,q.argument=null):(q.delegate=this.eat(K.star),q.argument=this.parseMaybeAssign(O)),this.finishNode(q,"YieldExpression")},Xr.parseAwait=function(){this.awaitPos||(this.awaitPos=this.start);var O=this.startNode();return this.next(),O.argument=this.parseMaybeUnary(null,!1),this.finishNode(O,"AwaitExpression")};var xt=ft.prototype;xt.raise=function(O,q){var Le=st(this.input,O);q+=" ("+Le.line+":"+Le.column+")";var ve=new SyntaxError(q);throw ve.pos=O,ve.loc=Le,ve.raisedAt=this.pos,ve},xt.raiseRecoverable=xt.raise,xt.curPosition=function(){if(this.options.locations)return new se(this.curLine,this.pos-this.lineStart)};var Gt=ft.prototype,Ir=function(q){this.flags=q,this.var=[],this.lexical=[],this.functions=[]};Gt.enterScope=function(O){this.scopeStack.push(new Ir(O))},Gt.exitScope=function(){this.scopeStack.pop()},Gt.treatFunctionsAsVarInScope=function(O){return O.flags&Qt||!this.inModule&&O.flags&Pr},Gt.declareName=function(O,q,Le){var ve=!1;if(q===_n){var ct=this.currentScope();ve=ct.lexical.indexOf(O)>-1||ct.functions.indexOf(O)>-1||ct.var.indexOf(O)>-1,ct.lexical.push(O),this.inModule&&ct.flags&Pr&&delete this.undefinedExports[O]}else if(q===Fr){var Lt=this.currentScope();Lt.lexical.push(O)}else if(q===Yr){var hr=this.currentScope();this.treatFunctionsAsVar?ve=hr.lexical.indexOf(O)>-1:ve=hr.lexical.indexOf(O)>-1||hr.var.indexOf(O)>-1,hr.functions.push(O)}else for(var lr=this.scopeStack.length-1;lr>=0;--lr){var Gr=this.scopeStack[lr];if(Gr.lexical.indexOf(O)>-1&&!(Gr.flags&ot&&Gr.lexical[0]===O)||!this.treatFunctionsAsVarInScope(Gr)&&Gr.functions.indexOf(O)>-1){ve=!0;break}if(Gr.var.push(O),this.inModule&&Gr.flags&Pr&&delete this.undefinedExports[O],Gr.flags&xr)break}ve&&this.raiseRecoverable(Le,"Identifier '"+O+"' has already been declared")},Gt.checkLocalExport=function(O){this.scopeStack[0].lexical.indexOf(O.name)===-1&&this.scopeStack[0].var.indexOf(O.name)===-1&&(this.undefinedExports[O.name]=O)},Gt.currentScope=function(){return this.scopeStack[this.scopeStack.length-1]},Gt.currentVarScope=function(){for(var O=this.scopeStack.length-1;;O--){var q=this.scopeStack[O];if(q.flags&xr)return q}},Gt.currentThisScope=function(){for(var O=this.scopeStack.length-1;;O--){var q=this.scopeStack[O];if(q.flags&xr&&!(q.flags&sn))return q}};var nn=function(q,Le,ve){this.type="",this.start=Le,this.end=0,q.options.locations&&(this.loc=new Ne(q,ve)),q.options.directSourceFile&&(this.sourceFile=q.options.directSourceFile),q.options.ranges&&(this.range=[Le,0])},zi=ft.prototype;zi.startNode=function(){return new nn(this,this.start,this.startLoc)},zi.startNodeAt=function(O,q){return new nn(this,O,q)};function Ui(O,q,Le,ve){return O.type=q,O.end=Le,this.options.locations&&(O.loc.end=ve),this.options.ranges&&(O.range[1]=Le),O}zi.finishNode=function(O,q){return Ui.call(this,O,q,this.lastTokEnd,this.lastTokEndLoc)},zi.finishNodeAt=function(O,q,Le,ve){return Ui.call(this,O,q,Le,ve)};var Pi=function(q,Le,ve,ct,Lt){this.token=q,this.isExpr=!!Le,this.preserveSpace=!!ve,this.override=ct,this.generator=!!Lt},ka={b_stat:new Pi("{",!1),b_expr:new Pi("{",!0),b_tmpl:new Pi("${",!1),p_stat:new Pi("(",!1),p_expr:new Pi("(",!0),q_tmpl:new Pi("`",!0,!0,function(O){return O.tryReadTemplateToken()}),f_stat:new Pi("function",!1),f_expr:new Pi("function",!0),f_expr_gen:new Pi("function",!0,!1,null,!0),f_gen:new Pi("function",!1,!1,null,!0)},Ti=ft.prototype;Ti.initialContext=function(){return[ka.b_stat]},Ti.braceIsBlock=function(O){var q=this.curContext();return q===ka.f_expr||q===ka.f_stat?!0:O===K.colon&&(q===ka.b_stat||q===ka.b_expr)?!q.isExpr:O===K._return||O===K.name&&this.exprAllowed?ke.test(this.input.slice(this.lastTokEnd,this.start)):O===K._else||O===K.semi||O===K.eof||O===K.parenR||O===K.arrow?!0:O===K.braceL?q===ka.b_stat:O===K._var||O===K._const||O===K.name?!1:!this.exprAllowed},Ti.inGeneratorContext=function(){for(var O=this.context.length-1;O>=1;O--){var q=this.context[O];if(q.token==="function")return q.generator}return!1},Ti.updateContext=function(O){var q,Le=this.type;Le.keyword&&O===K.dot?this.exprAllowed=!1:(q=Le.updateContext)?q.call(this,O):this.exprAllowed=Le.beforeExpr},K.parenR.updateContext=K.braceR.updateContext=function(){if(this.context.length===1){this.exprAllowed=!0;return}var O=this.context.pop();O===ka.b_stat&&this.curContext().token==="function"&&(O=this.context.pop()),this.exprAllowed=!O.isExpr},K.braceL.updateContext=function(O){this.context.push(this.braceIsBlock(O)?ka.b_stat:ka.b_expr),this.exprAllowed=!0},K.dollarBraceL.updateContext=function(){this.context.push(ka.b_tmpl),this.exprAllowed=!0},K.parenL.updateContext=function(O){var q=O===K._if||O===K._for||O===K._with||O===K._while;this.context.push(q?ka.p_stat:ka.p_expr),this.exprAllowed=!0},K.incDec.updateContext=function(){},K._function.updateContext=K._class.updateContext=function(O){O.beforeExpr&&O!==K.semi&&O!==K._else&&!(O===K._return&&ke.test(this.input.slice(this.lastTokEnd,this.start)))&&!((O===K.colon||O===K.braceL)&&this.curContext()===ka.b_stat)?this.context.push(ka.f_expr):this.context.push(ka.f_stat),this.exprAllowed=!1},K.backQuote.updateContext=function(){this.curContext()===ka.q_tmpl?this.context.pop():this.context.push(ka.q_tmpl),this.exprAllowed=!1},K.star.updateContext=function(O){if(O===K._function){var q=this.context.length-1;this.context[q]===ka.f_expr?this.context[q]=ka.f_expr_gen:this.context[q]=ka.f_gen}this.exprAllowed=!0},K.name.updateContext=function(O){var q=!1;this.options.ecmaVersion>=6&&O!==K.dot&&(this.value==="of"&&!this.exprAllowed||this.value==="yield"&&this.inGeneratorContext())&&(q=!0),this.exprAllowed=q};var Ge="ASCII ASCII_Hex_Digit AHex Alphabetic Alpha Any Assigned Bidi_Control Bidi_C Bidi_Mirrored Bidi_M Case_Ignorable CI Cased Changes_When_Casefolded CWCF Changes_When_Casemapped CWCM Changes_When_Lowercased CWL Changes_When_NFKC_Casefolded CWKCF Changes_When_Titlecased CWT Changes_When_Uppercased CWU Dash Default_Ignorable_Code_Point DI Deprecated Dep Diacritic Dia Emoji Emoji_Component Emoji_Modifier Emoji_Modifier_Base Emoji_Presentation Extender Ext Grapheme_Base Gr_Base Grapheme_Extend Gr_Ext Hex_Digit Hex IDS_Binary_Operator IDSB IDS_Trinary_Operator IDST ID_Continue IDC ID_Start IDS Ideographic Ideo Join_Control Join_C Logical_Order_Exception LOE Lowercase Lower Math Noncharacter_Code_Point NChar Pattern_Syntax Pat_Syn Pattern_White_Space Pat_WS Quotation_Mark QMark Radical Regional_Indicator RI Sentence_Terminal STerm Soft_Dotted SD Terminal_Punctuation Term Unified_Ideograph UIdeo Uppercase Upper Variation_Selector VS White_Space space XID_Continue XIDC XID_Start XIDS",et=Ge+" Extended_Pictographic",gt=et,ht={9:Ge,10:et,11:gt},Et="Cased_Letter LC Close_Punctuation Pe Connector_Punctuation Pc Control Cc cntrl Currency_Symbol Sc Dash_Punctuation Pd Decimal_Number Nd digit Enclosing_Mark Me Final_Punctuation Pf Format Cf Initial_Punctuation Pi Letter L Letter_Number Nl Line_Separator Zl Lowercase_Letter Ll Mark M Combining_Mark Math_Symbol Sm Modifier_Letter Lm Modifier_Symbol Sk Nonspacing_Mark Mn Number N Open_Punctuation Ps Other C Other_Letter Lo Other_Number No Other_Punctuation Po Other_Symbol So Paragraph_Separator Zp Private_Use Co Punctuation P punct Separator Z Space_Separator Zs Spacing_Mark Mc Surrogate Cs Symbol S Titlecase_Letter Lt Unassigned Cn Uppercase_Letter Lu",Zt="Adlam Adlm Ahom Ahom Anatolian_Hieroglyphs Hluw Arabic Arab Armenian Armn Avestan Avst Balinese Bali Bamum Bamu Bassa_Vah Bass Batak Batk Bengali Beng Bhaiksuki Bhks Bopomofo Bopo Brahmi Brah Braille Brai Buginese Bugi Buhid Buhd Canadian_Aboriginal Cans Carian Cari Caucasian_Albanian Aghb Chakma Cakm Cham Cham Cherokee Cher Common Zyyy Coptic Copt Qaac Cuneiform Xsux Cypriot Cprt Cyrillic Cyrl Deseret Dsrt Devanagari Deva Duployan Dupl Egyptian_Hieroglyphs Egyp Elbasan Elba Ethiopic Ethi Georgian Geor Glagolitic Glag Gothic Goth Grantha Gran Greek Grek Gujarati Gujr Gurmukhi Guru Han Hani Hangul Hang Hanunoo Hano Hatran Hatr Hebrew Hebr Hiragana Hira Imperial_Aramaic Armi Inherited Zinh Qaai Inscriptional_Pahlavi Phli Inscriptional_Parthian Prti Javanese Java Kaithi Kthi Kannada Knda Katakana Kana Kayah_Li Kali Kharoshthi Khar Khmer Khmr Khojki Khoj Khudawadi Sind Lao Laoo Latin Latn Lepcha Lepc Limbu Limb Linear_A Lina Linear_B Linb Lisu Lisu Lycian Lyci Lydian Lydi Mahajani Mahj Malayalam Mlym Mandaic Mand Manichaean Mani Marchen Marc Masaram_Gondi Gonm Meetei_Mayek Mtei Mende_Kikakui Mend Meroitic_Cursive Merc Meroitic_Hieroglyphs Mero Miao Plrd Modi Modi Mongolian Mong Mro Mroo Multani Mult Myanmar Mymr Nabataean Nbat New_Tai_Lue Talu Newa Newa Nko Nkoo Nushu Nshu Ogham Ogam Ol_Chiki Olck Old_Hungarian Hung Old_Italic Ital Old_North_Arabian Narb Old_Permic Perm Old_Persian Xpeo Old_South_Arabian Sarb Old_Turkic Orkh Oriya Orya Osage Osge Osmanya Osma Pahawh_Hmong Hmng Palmyrene Palm Pau_Cin_Hau Pauc Phags_Pa Phag Phoenician Phnx Psalter_Pahlavi Phlp Rejang Rjng Runic Runr Samaritan Samr Saurashtra Saur Sharada Shrd Shavian Shaw Siddham Sidd SignWriting Sgnw Sinhala Sinh Sora_Sompeng Sora Soyombo Soyo Sundanese Sund Syloti_Nagri Sylo Syriac Syrc Tagalog Tglg Tagbanwa Tagb Tai_Le Tale Tai_Tham Lana Tai_Viet Tavt Takri Takr Tamil Taml Tangut Tang Telugu Telu Thaana Thaa Thai Thai Tibetan Tibt Tifinagh Tfng Tirhuta Tirh Ugaritic Ugar Vai Vaii Warang_Citi Wara Yi Yiii Zanabazar_Square Zanb",sr=Zt+" Dogra Dogr Gunjala_Gondi Gong Hanifi_Rohingya Rohg Makasar Maka Medefaidrin Medf Old_Sogdian Sogo Sogdian Sogd",bt=sr+" Elymaic Elym Nandinagari Nand Nyiakeng_Puachue_Hmong Hmnp Wancho Wcho",Ft={9:Zt,10:sr,11:bt},zr={};function Jn(O){var q=zr[O]={binary:ye(ht[O]+" "+Et),nonBinary:{General_Category:ye(Et),Script:ye(Ft[O])}};q.nonBinary.Script_Extensions=q.nonBinary.Script,q.nonBinary.gc=q.nonBinary.General_Category,q.nonBinary.sc=q.nonBinary.Script,q.nonBinary.scx=q.nonBinary.Script_Extensions}Jn(9),Jn(10),Jn(11);var yn=ft.prototype,tn=function(q){this.parser=q,this.validFlags="gim"+(q.options.ecmaVersion>=6?"uy":"")+(q.options.ecmaVersion>=9?"s":""),this.unicodeProperties=zr[q.options.ecmaVersion>=11?11:q.options.ecmaVersion],this.source="",this.flags="",this.start=0,this.switchU=!1,this.switchN=!1,this.pos=0,this.lastIntValue=0,this.lastStringValue="",this.lastAssertionIsQuantifiable=!1,this.numCapturingParens=0,this.maxBackReference=0,this.groupNames=[],this.backReferenceNames=[]};tn.prototype.reset=function(q,Le,ve){var ct=ve.indexOf("u")!==-1;this.start=q|0,this.source=Le+"",this.flags=ve,this.switchU=ct&&this.parser.options.ecmaVersion>=6,this.switchN=ct&&this.parser.options.ecmaVersion>=9},tn.prototype.raise=function(q){this.parser.raiseRecoverable(this.start,"Invalid regular expression: /"+this.source+"/: "+q)},tn.prototype.at=function(q,Le){Le===void 0&&(Le=!1);var ve=this.source,ct=ve.length;if(q>=ct)return-1;var Lt=ve.charCodeAt(q);if(!(Le||this.switchU)||Lt<=55295||Lt>=57344||q+1>=ct)return Lt;var hr=ve.charCodeAt(q+1);return hr>=56320&&hr<=57343?(Lt<<10)+hr-56613888:Lt},tn.prototype.nextIndex=function(q,Le){Le===void 0&&(Le=!1);var ve=this.source,ct=ve.length;if(q>=ct)return ct;var Lt=ve.charCodeAt(q),hr;return!(Le||this.switchU)||Lt<=55295||Lt>=57344||q+1>=ct||(hr=ve.charCodeAt(q+1))<56320||hr>57343?q+1:q+2},tn.prototype.current=function(q){return q===void 0&&(q=!1),this.at(this.pos,q)},tn.prototype.lookahead=function(q){return q===void 0&&(q=!1),this.at(this.nextIndex(this.pos,q),q)},tn.prototype.advance=function(q){q===void 0&&(q=!1),this.pos=this.nextIndex(this.pos,q)},tn.prototype.eat=function(q,Le){return Le===void 0&&(Le=!1),this.current(Le)===q?(this.advance(Le),!0):!1};function ni(O){return O<=65535?String.fromCharCode(O):(O-=65536,String.fromCharCode((O>>10)+55296,(O&1023)+56320))}yn.validateRegExpFlags=function(O){for(var q=O.validFlags,Le=O.flags,ve=0;ve<Le.length;ve++){var ct=Le.charAt(ve);q.indexOf(ct)===-1&&this.raise(O.start,"Invalid regular expression flag"),Le.indexOf(ct,ve+1)>-1&&this.raise(O.start,"Duplicate regular expression flag")}},yn.validateRegExpPattern=function(O){this.regexp_pattern(O),!O.switchN&&this.options.ecmaVersion>=9&&O.groupNames.length>0&&(O.switchN=!0,this.regexp_pattern(O))},yn.regexp_pattern=function(O){O.pos=0,O.lastIntValue=0,O.lastStringValue="",O.lastAssertionIsQuantifiable=!1,O.numCapturingParens=0,O.maxBackReference=0,O.groupNames.length=0,O.backReferenceNames.length=0,this.regexp_disjunction(O),O.pos!==O.source.length&&(O.eat(41)&&O.raise("Unmatched ')'"),(O.eat(93)||O.eat(125))&&O.raise("Lone quantifier brackets")),O.maxBackReference>O.numCapturingParens&&O.raise("Invalid escape");for(var q=0,Le=O.backReferenceNames;q<Le.length;q+=1){var ve=Le[q];O.groupNames.indexOf(ve)===-1&&O.raise("Invalid named capture referenced")}},yn.regexp_disjunction=function(O){for(this.regexp_alternative(O);O.eat(124);)this.regexp_alternative(O);this.regexp_eatQuantifier(O,!0)&&O.raise("Nothing to repeat"),O.eat(123)&&O.raise("Lone quantifier brackets")},yn.regexp_alternative=function(O){for(;O.pos<O.source.length&&this.regexp_eatTerm(O););},yn.regexp_eatTerm=function(O){return this.regexp_eatAssertion(O)?(O.lastAssertionIsQuantifiable&&this.regexp_eatQuantifier(O)&&O.switchU&&O.raise("Invalid quantifier"),!0):(O.switchU?this.regexp_eatAtom(O):this.regexp_eatExtendedAtom(O))?(this.regexp_eatQuantifier(O),!0):!1},yn.regexp_eatAssertion=function(O){var q=O.pos;if(O.lastAssertionIsQuantifiable=!1,O.eat(94)||O.eat(36))return!0;if(O.eat(92)){if(O.eat(66)||O.eat(98))return!0;O.pos=q}if(O.eat(40)&&O.eat(63)){var Le=!1;if(this.options.ecmaVersion>=9&&(Le=O.eat(60)),O.eat(61)||O.eat(33))return this.regexp_disjunction(O),O.eat(41)||O.raise("Unterminated group"),O.lastAssertionIsQuantifiable=!Le,!0}return O.pos=q,!1},yn.regexp_eatQuantifier=function(O,q){return q===void 0&&(q=!1),this.regexp_eatQuantifierPrefix(O,q)?(O.eat(63),!0):!1},yn.regexp_eatQuantifierPrefix=function(O,q){return O.eat(42)||O.eat(43)||O.eat(63)||this.regexp_eatBracedQuantifier(O,q)},yn.regexp_eatBracedQuantifier=function(O,q){var Le=O.pos;if(O.eat(123)){var ve=0,ct=-1;if(this.regexp_eatDecimalDigits(O)&&(ve=O.lastIntValue,O.eat(44)&&this.regexp_eatDecimalDigits(O)&&(ct=O.lastIntValue),O.eat(125)))return ct!==-1&&ct<ve&&!q&&O.raise("numbers out of order in {} quantifier"),!0;O.switchU&&!q&&O.raise("Incomplete quantifier"),O.pos=Le}return!1},yn.regexp_eatAtom=function(O){return this.regexp_eatPatternCharacters(O)||O.eat(46)||this.regexp_eatReverseSolidusAtomEscape(O)||this.regexp_eatCharacterClass(O)||this.regexp_eatUncapturingGroup(O)||this.regexp_eatCapturingGroup(O)},yn.regexp_eatReverseSolidusAtomEscape=function(O){var q=O.pos;if(O.eat(92)){if(this.regexp_eatAtomEscape(O))return!0;O.pos=q}return!1},yn.regexp_eatUncapturingGroup=function(O){var q=O.pos;if(O.eat(40)){if(O.eat(63)&&O.eat(58)){if(this.regexp_disjunction(O),O.eat(41))return!0;O.raise("Unterminated group")}O.pos=q}return!1},yn.regexp_eatCapturingGroup=function(O){if(O.eat(40)){if(this.options.ecmaVersion>=9?this.regexp_groupSpecifier(O):O.current()===63&&O.raise("Invalid group"),this.regexp_disjunction(O),O.eat(41))return O.numCapturingParens+=1,!0;O.raise("Unterminated group")}return!1},yn.regexp_eatExtendedAtom=function(O){return O.eat(46)||this.regexp_eatReverseSolidusAtomEscape(O)||this.regexp_eatCharacterClass(O)||this.regexp_eatUncapturingGroup(O)||this.regexp_eatCapturingGroup(O)||this.regexp_eatInvalidBracedQuantifier(O)||this.regexp_eatExtendedPatternCharacter(O)},yn.regexp_eatInvalidBracedQuantifier=function(O){return this.regexp_eatBracedQuantifier(O,!0)&&O.raise("Nothing to repeat"),!1},yn.regexp_eatSyntaxCharacter=function(O){var q=O.current();return ta(q)?(O.lastIntValue=q,O.advance(),!0):!1};function ta(O){return O===36||O>=40&&O<=43||O===46||O===63||O>=91&&O<=94||O>=123&&O<=125}yn.regexp_eatPatternCharacters=function(O){for(var q=O.pos,Le=0;(Le=O.current())!==-1&&!ta(Le);)O.advance();return O.pos!==q},yn.regexp_eatExtendedPatternCharacter=function(O){var q=O.current();return q!==-1&&q!==36&&!(q>=40&&q<=43)&&q!==46&&q!==63&&q!==91&&q!==94&&q!==124?(O.advance(),!0):!1},yn.regexp_groupSpecifier=function(O){if(O.eat(63)){if(this.regexp_eatGroupName(O)){O.groupNames.indexOf(O.lastStringValue)!==-1&&O.raise("Duplicate capture group name"),O.groupNames.push(O.lastStringValue);return}O.raise("Invalid group")}},yn.regexp_eatGroupName=function(O){if(O.lastStringValue="",O.eat(60)){if(this.regexp_eatRegExpIdentifierName(O)&&O.eat(62))return!0;O.raise("Invalid capture group name")}return!1},yn.regexp_eatRegExpIdentifierName=function(O){if(O.lastStringValue="",this.regexp_eatRegExpIdentifierStart(O)){for(O.lastStringValue+=ni(O.lastIntValue);this.regexp_eatRegExpIdentifierPart(O);)O.lastStringValue+=ni(O.lastIntValue);return!0}return!1},yn.regexp_eatRegExpIdentifierStart=function(O){var q=O.pos,Le=this.options.ecmaVersion>=11,ve=O.current(Le);return O.advance(Le),ve===92&&this.regexp_eatRegExpUnicodeEscapeSequence(O,Le)&&(ve=O.lastIntValue),fa(ve)?(O.lastIntValue=ve,!0):(O.pos=q,!1)};function fa(O){return te(O,!0)||O===36||O===95}yn.regexp_eatRegExpIdentifierPart=function(O){var q=O.pos,Le=this.options.ecmaVersion>=11,ve=O.current(Le);return O.advance(Le),ve===92&&this.regexp_eatRegExpUnicodeEscapeSequence(O,Le)&&(ve=O.lastIntValue),Mr(ve)?(O.lastIntValue=ve,!0):(O.pos=q,!1)};function Mr(O){return le(O,!0)||O===36||O===95||O===8204||O===8205}yn.regexp_eatAtomEscape=function(O){return this.regexp_eatBackReference(O)||this.regexp_eatCharacterClassEscape(O)||this.regexp_eatCharacterEscape(O)||O.switchN&&this.regexp_eatKGroupName(O)?!0:(O.switchU&&(O.current()===99&&O.raise("Invalid unicode escape"),O.raise("Invalid escape")),!1)},yn.regexp_eatBackReference=function(O){var q=O.pos;if(this.regexp_eatDecimalEscape(O)){var Le=O.lastIntValue;if(O.switchU)return Le>O.maxBackReference&&(O.maxBackReference=Le),!0;if(Le<=O.numCapturingParens)return!0;O.pos=q}return!1},yn.regexp_eatKGroupName=function(O){if(O.eat(107)){if(this.regexp_eatGroupName(O))return O.backReferenceNames.push(O.lastStringValue),!0;O.raise("Invalid named reference")}return!1},yn.regexp_eatCharacterEscape=function(O){return this.regexp_eatControlEscape(O)||this.regexp_eatCControlLetter(O)||this.regexp_eatZero(O)||this.regexp_eatHexEscapeSequence(O)||this.regexp_eatRegExpUnicodeEscapeSequence(O,!1)||!O.switchU&&this.regexp_eatLegacyOctalEscapeSequence(O)||this.regexp_eatIdentityEscape(O)},yn.regexp_eatCControlLetter=function(O){var q=O.pos;if(O.eat(99)){if(this.regexp_eatControlLetter(O))return!0;O.pos=q}return!1},yn.regexp_eatZero=function(O){return O.current()===48&&!Ur(O.lookahead())?(O.lastIntValue=0,O.advance(),!0):!1},yn.regexp_eatControlEscape=function(O){var q=O.current();return q===116?(O.lastIntValue=9,O.advance(),!0):q===110?(O.lastIntValue=10,O.advance(),!0):q===118?(O.lastIntValue=11,O.advance(),!0):q===102?(O.lastIntValue=12,O.advance(),!0):q===114?(O.lastIntValue=13,O.advance(),!0):!1},yn.regexp_eatControlLetter=function(O){var q=O.current();return Wr(q)?(O.lastIntValue=q%32,O.advance(),!0):!1};function Wr(O){return O>=65&&O<=90||O>=97&&O<=122}yn.regexp_eatRegExpUnicodeEscapeSequence=function(O,q){q===void 0&&(q=!1);var Le=O.pos,ve=q||O.switchU;if(O.eat(117)){if(this.regexp_eatFixedHexDigits(O,4)){var ct=O.lastIntValue;if(ve&&ct>=55296&&ct<=56319){var Lt=O.pos;if(O.eat(92)&&O.eat(117)&&this.regexp_eatFixedHexDigits(O,4)){var hr=O.lastIntValue;if(hr>=56320&&hr<=57343)return O.lastIntValue=(ct-55296)*1024+(hr-56320)+65536,!0}O.pos=Lt,O.lastIntValue=ct}return!0}if(ve&&O.eat(123)&&this.regexp_eatHexDigits(O)&&O.eat(125)&&Zi(O.lastIntValue))return!0;ve&&O.raise("Invalid unicode escape"),O.pos=Le}return!1};function Zi(O){return O>=0&&O<=1114111}yn.regexp_eatIdentityEscape=function(O){if(O.switchU)return this.regexp_eatSyntaxCharacter(O)?!0:O.eat(47)?(O.lastIntValue=47,!0):!1;var q=O.current();return q!==99&&(!O.switchN||q!==107)?(O.lastIntValue=q,O.advance(),!0):!1},yn.regexp_eatDecimalEscape=function(O){O.lastIntValue=0;var q=O.current();if(q>=49&&q<=57){do O.lastIntValue=10*O.lastIntValue+(q-48),O.advance();while((q=O.current())>=48&&q<=57);return!0}return!1},yn.regexp_eatCharacterClassEscape=function(O){var q=O.current();if(Wi(q))return O.lastIntValue=-1,O.advance(),!0;if(O.switchU&&this.options.ecmaVersion>=9&&(q===80||q===112)){if(O.lastIntValue=-1,O.advance(),O.eat(123)&&this.regexp_eatUnicodePropertyValueExpression(O)&&O.eat(125))return!0;O.raise("Invalid property name")}return!1};function Wi(O){return O===100||O===68||O===115||O===83||O===119||O===87}yn.regexp_eatUnicodePropertyValueExpression=function(O){var q=O.pos;if(this.regexp_eatUnicodePropertyName(O)&&O.eat(61)){var Le=O.lastStringValue;if(this.regexp_eatUnicodePropertyValue(O)){var ve=O.lastStringValue;return this.regexp_validateUnicodePropertyNameAndValue(O,Le,ve),!0}}if(O.pos=q,this.regexp_eatLoneUnicodePropertyNameOrValue(O)){var ct=O.lastStringValue;return this.regexp_validateUnicodePropertyNameOrValue(O,ct),!0}return!1},yn.regexp_validateUnicodePropertyNameAndValue=function(O,q,Le){oe(O.unicodeProperties.nonBinary,q)||O.raise("Invalid property name"),O.unicodeProperties.nonBinary[q].test(Le)||O.raise("Invalid property value")},yn.regexp_validateUnicodePropertyNameOrValue=function(O,q){O.unicodeProperties.binary.test(q)||O.raise("Invalid property name")},yn.regexp_eatUnicodePropertyName=function(O){var q=0;for(O.lastStringValue="";xo(q=O.current());)O.lastStringValue+=ni(q),O.advance();return O.lastStringValue!==""};function xo(O){return Wr(O)||O===95}yn.regexp_eatUnicodePropertyValue=function(O){var q=0;for(O.lastStringValue="";ua(q=O.current());)O.lastStringValue+=ni(q),O.advance();return O.lastStringValue!==""};function ua(O){return xo(O)||Ur(O)}yn.regexp_eatLoneUnicodePropertyNameOrValue=function(O){return this.regexp_eatUnicodePropertyValue(O)},yn.regexp_eatCharacterClass=function(O){if(O.eat(91)){if(O.eat(94),this.regexp_classRanges(O),O.eat(93))return!0;O.raise("Unterminated character class")}return!1},yn.regexp_classRanges=function(O){for(;this.regexp_eatClassAtom(O);){var q=O.lastIntValue;if(O.eat(45)&&this.regexp_eatClassAtom(O)){var Le=O.lastIntValue;O.switchU&&(q===-1||Le===-1)&&O.raise("Invalid character class"),q!==-1&&Le!==-1&&q>Le&&O.raise("Range out of order in character class")}}},yn.regexp_eatClassAtom=function(O){var q=O.pos;if(O.eat(92)){if(this.regexp_eatClassEscape(O))return!0;if(O.switchU){var Le=O.current();(Le===99||Fo(Le))&&O.raise("Invalid class escape"),O.raise("Invalid escape")}O.pos=q}var ve=O.current();return ve!==93?(O.lastIntValue=ve,O.advance(),!0):!1},yn.regexp_eatClassEscape=function(O){var q=O.pos;if(O.eat(98))return O.lastIntValue=8,!0;if(O.switchU&&O.eat(45))return O.lastIntValue=45,!0;if(!O.switchU&&O.eat(99)){if(this.regexp_eatClassControlLetter(O))return!0;O.pos=q}return this.regexp_eatCharacterClassEscape(O)||this.regexp_eatCharacterEscape(O)},yn.regexp_eatClassControlLetter=function(O){var q=O.current();return Ur(q)||q===95?(O.lastIntValue=q%32,O.advance(),!0):!1},yn.regexp_eatHexEscapeSequence=function(O){var q=O.pos;if(O.eat(120)){if(this.regexp_eatFixedHexDigits(O,2))return!0;O.switchU&&O.raise("Invalid escape"),O.pos=q}return!1},yn.regexp_eatDecimalDigits=function(O){var q=O.pos,Le=0;for(O.lastIntValue=0;Ur(Le=O.current());)O.lastIntValue=10*O.lastIntValue+(Le-48),O.advance();return O.pos!==q};function Ur(O){return O>=48&&O<=57}yn.regexp_eatHexDigits=function(O){var q=O.pos,Le=0;for(O.lastIntValue=0;Jr(Le=O.current());)O.lastIntValue=16*O.lastIntValue+Eo(Le),O.advance();return O.pos!==q};function Jr(O){return O>=48&&O<=57||O>=65&&O<=70||O>=97&&O<=102}function Eo(O){return O>=65&&O<=70?10+(O-65):O>=97&&O<=102?10+(O-97):O-48}yn.regexp_eatLegacyOctalEscapeSequence=function(O){if(this.regexp_eatOctalDigit(O)){var q=O.lastIntValue;if(this.regexp_eatOctalDigit(O)){var Le=O.lastIntValue;q<=3&&this.regexp_eatOctalDigit(O)?O.lastIntValue=q*64+Le*8+O.lastIntValue:O.lastIntValue=q*8+Le}else O.lastIntValue=q;return!0}return!1},yn.regexp_eatOctalDigit=function(O){var q=O.current();return Fo(q)?(O.lastIntValue=q-48,O.advance(),!0):(O.lastIntValue=0,!1)};function Fo(O){return O>=48&&O<=55}yn.regexp_eatFixedHexDigits=function(O,q){var Le=O.pos;O.lastIntValue=0;for(var ve=0;ve<q;++ve){var ct=O.current();if(!Jr(ct))return O.pos=Le,!1;O.lastIntValue=16*O.lastIntValue+Eo(ct),O.advance()}return!0};var So=function(q){this.type=q.type,this.value=q.value,this.start=q.start,this.end=q.end,q.options.locations&&(this.loc=new Ne(q,q.startLoc,q.endLoc)),q.options.ranges&&(this.range=[q.start,q.end])},Xa=ft.prototype;Xa.next=function(O){!O&&this.type.keyword&&this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword "+this.type.keyword),this.options.onToken&&this.options.onToken(new So(this)),this.lastTokEnd=this.end,this.lastTokStart=this.start,this.lastTokEndLoc=this.endLoc,this.lastTokStartLoc=this.startLoc,this.nextToken()},Xa.getToken=function(){return this.next(),new So(this)},typeof Symbol!="undefined"&&(Xa[Symbol.iterator]=function(){var O=this;return{next:function(){var q=O.getToken();return{done:q.type===K.eof,value:q}}}}),Xa.curContext=function(){return this.context[this.context.length-1]},Xa.nextToken=function(){var O=this.curContext();if((!O||!O.preserveSpace)&&this.skipSpace(),this.start=this.pos,this.options.locations&&(this.startLoc=this.curPosition()),this.pos>=this.input.length)return this.finishToken(K.eof);if(O.override)return O.override(this);this.readToken(this.fullCharCodeAtPos())},Xa.readToken=function(O){return te(O,this.options.ecmaVersion>=6)||O===92?this.readWord():this.getTokenFromCode(O)},Xa.fullCharCodeAtPos=function(){var O=this.input.charCodeAt(this.pos);if(O<=55295||O>=57344)return O;var q=this.input.charCodeAt(this.pos+1);return(O<<10)+q-56613888},Xa.skipBlockComment=function(){var O=this.options.onComment&&this.curPosition(),q=this.pos,Le=this.input.indexOf("*/",this.pos+=2);if(Le===-1&&this.raise(this.pos-2,"Unterminated comment"),this.pos=Le+2,this.options.locations){we.lastIndex=q;for(var ve;(ve=we.exec(this.input))&&ve.index<this.pos;)++this.curLine,this.lineStart=ve.index+ve[0].length}this.options.onComment&&this.options.onComment(!0,this.input.slice(q+2,Le),q,this.pos,O,this.curPosition())},Xa.skipLineComment=function(O){for(var q=this.pos,Le=this.options.onComment&&this.curPosition(),ve=this.input.charCodeAt(this.pos+=O);this.pos<this.input.length&&!Me(ve);)ve=this.input.charCodeAt(++this.pos);this.options.onComment&&this.options.onComment(!1,this.input.slice(q+O,this.pos),q,this.pos,Le,this.curPosition())},Xa.skipSpace=function(){e:for(;this.pos<this.input.length;){var O=this.input.charCodeAt(this.pos);switch(O){case 32:case 160:++this.pos;break;case 13:this.input.charCodeAt(this.pos+1)===10&&++this.pos;case 10:case 8232:case 8233:++this.pos,this.options.locations&&(++this.curLine,this.lineStart=this.pos);break;case 47:switch(this.input.charCodeAt(this.pos+1)){case 42:this.skipBlockComment();break;case 47:this.skipLineComment(2);break;default:break e}break;default:if(O>8&&O<14||O>=5760&&Xe.test(String.fromCharCode(O)))++this.pos;else break e}}},Xa.finishToken=function(O,q){this.end=this.pos,this.options.locations&&(this.endLoc=this.curPosition());var Le=this.type;this.type=O,this.value=q,this.updateContext(Le)},Xa.readToken_dot=function(){var O=this.input.charCodeAt(this.pos+1);if(O>=48&&O<=57)return this.readNumber(!0);var q=this.input.charCodeAt(this.pos+2);return this.options.ecmaVersion>=6&&O===46&&q===46?(this.pos+=3,this.finishToken(K.ellipsis)):(++this.pos,this.finishToken(K.dot))},Xa.readToken_slash=function(){var O=this.input.charCodeAt(this.pos+1);return this.exprAllowed?(++this.pos,this.readRegexp()):O===61?this.finishOp(K.assign,2):this.finishOp(K.slash,1)},Xa.readToken_mult_modulo_exp=function(O){var q=this.input.charCodeAt(this.pos+1),Le=1,ve=O===42?K.star:K.modulo;return this.options.ecmaVersion>=7&&O===42&&q===42&&(++Le,ve=K.starstar,q=this.input.charCodeAt(this.pos+2)),q===61?this.finishOp(K.assign,Le+1):this.finishOp(ve,Le)},Xa.readToken_pipe_amp=function(O){var q=this.input.charCodeAt(this.pos+1);if(q===O){if(this.options.ecmaVersion>=12){var Le=this.input.charCodeAt(this.pos+2);if(Le===61)return this.finishOp(K.assign,3)}return this.finishOp(O===124?K.logicalOR:K.logicalAND,2)}return q===61?this.finishOp(K.assign,2):this.finishOp(O===124?K.bitwiseOR:K.bitwiseAND,1)},Xa.readToken_caret=function(){var O=this.input.charCodeAt(this.pos+1);return O===61?this.finishOp(K.assign,2):this.finishOp(K.bitwiseXOR,1)},Xa.readToken_plus_min=function(O){var q=this.input.charCodeAt(this.pos+1);return q===O?q===45&&!this.inModule&&this.input.charCodeAt(this.pos+2)===62&&(this.lastTokEnd===0||ke.test(this.input.slice(this.lastTokEnd,this.pos)))?(this.skipLineComment(3),this.skipSpace(),this.nextToken()):this.finishOp(K.incDec,2):q===61?this.finishOp(K.assign,2):this.finishOp(K.plusMin,1)},Xa.readToken_lt_gt=function(O){var q=this.input.charCodeAt(this.pos+1),Le=1;return q===O?(Le=O===62&&this.input.charCodeAt(this.pos+2)===62?3:2,this.input.charCodeAt(this.pos+Le)===61?this.finishOp(K.assign,Le+1):this.finishOp(K.bitShift,Le)):q===33&&O===60&&!this.inModule&&this.input.charCodeAt(this.pos+2)===45&&this.input.charCodeAt(this.pos+3)===45?(this.skipLineComment(4),this.skipSpace(),this.nextToken()):(q===61&&(Le=2),this.finishOp(K.relational,Le))},Xa.readToken_eq_excl=function(O){var q=this.input.charCodeAt(this.pos+1);return q===61?this.finishOp(K.equality,this.input.charCodeAt(this.pos+2)===61?3:2):O===61&&q===62&&this.options.ecmaVersion>=6?(this.pos+=2,this.finishToken(K.arrow)):this.finishOp(O===61?K.eq:K.prefix,1)},Xa.readToken_question=function(){var O=this.options.ecmaVersion;if(O>=11){var q=this.input.charCodeAt(this.pos+1);if(q===46){var Le=this.input.charCodeAt(this.pos+2);if(Le<48||Le>57)return this.finishOp(K.questionDot,2)}if(q===63){if(O>=12){var ve=this.input.charCodeAt(this.pos+2);if(ve===61)return this.finishOp(K.assign,3)}return this.finishOp(K.coalesce,2)}}return this.finishOp(K.question,1)},Xa.getTokenFromCode=function(O){switch(O){case 46:return this.readToken_dot();case 40:return++this.pos,this.finishToken(K.parenL);case 41:return++this.pos,this.finishToken(K.parenR);case 59:return++this.pos,this.finishToken(K.semi);case 44:return++this.pos,this.finishToken(K.comma);case 91:return++this.pos,this.finishToken(K.bracketL);case 93:return++this.pos,this.finishToken(K.bracketR);case 123:return++this.pos,this.finishToken(K.braceL);case 125:return++this.pos,this.finishToken(K.braceR);case 58:return++this.pos,this.finishToken(K.colon);case 96:if(this.options.ecmaVersion<6)break;return++this.pos,this.finishToken(K.backQuote);case 48:var q=this.input.charCodeAt(this.pos+1);if(q===120||q===88)return this.readRadixNumber(16);if(this.options.ecmaVersion>=6){if(q===111||q===79)return this.readRadixNumber(8);if(q===98||q===66)return this.readRadixNumber(2)}case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return this.readNumber(!1);case 34:case 39:return this.readString(O);case 47:return this.readToken_slash();case 37:case 42:return this.readToken_mult_modulo_exp(O);case 124:case 38:return this.readToken_pipe_amp(O);case 94:return this.readToken_caret();case 43:case 45:return this.readToken_plus_min(O);case 60:case 62:return this.readToken_lt_gt(O);case 61:case 33:return this.readToken_eq_excl(O);case 63:return this.readToken_question();case 126:return this.finishOp(K.prefix,1)}this.raise(this.pos,"Unexpected character '"+ui(O)+"'")},Xa.finishOp=function(O,q){var Le=this.input.slice(this.pos,this.pos+q);return this.pos+=q,this.finishToken(O,Le)},Xa.readRegexp=function(){for(var O,q,Le=this.pos;;){this.pos>=this.input.length&&this.raise(Le,"Unterminated regular expression");var ve=this.input.charAt(this.pos);if(ke.test(ve)&&this.raise(Le,"Unterminated regular expression"),O)O=!1;else{if(ve==="[")q=!0;else if(ve==="]"&&q)q=!1;else if(ve==="/"&&!q)break;O=ve==="\\"}++this.pos}var ct=this.input.slice(Le,this.pos);++this.pos;var Lt=this.pos,hr=this.readWord1();this.containsEsc&&this.unexpected(Lt);var lr=this.regexpState||(this.regexpState=new tn(this));lr.reset(Le,ct,hr),this.validateRegExpFlags(lr),this.validateRegExpPattern(lr);var Gr=null;try{Gr=new RegExp(ct,hr)}catch(ii){}return this.finishToken(K.regexp,{pattern:ct,flags:hr,value:Gr})},Xa.readInt=function(O,q,Le){for(var ve=this.options.ecmaVersion>=12&&q===void 0,ct=Le&&this.input.charCodeAt(this.pos)===48,Lt=this.pos,hr=0,lr=0,Gr=0,ii=q==null?1/0:q;Gr<ii;++Gr,++this.pos){var fi=this.input.charCodeAt(this.pos),Na=void 0;if(ve&&fi===95){ct&&this.raiseRecoverable(this.pos,"Numeric separator is not allowed in legacy octal numeric literals"),lr===95&&this.raiseRecoverable(this.pos,"Numeric separator must be exactly one underscore"),Gr===0&&this.raiseRecoverable(this.pos,"Numeric separator is not allowed at the first of digits"),lr=fi;continue}if(fi>=97?Na=fi-97+10:fi>=65?Na=fi-65+10:fi>=48&&fi<=57?Na=fi-48:Na=1/0,Na>=O)break;lr=fi,hr=hr*O+Na}return ve&&lr===95&&this.raiseRecoverable(this.pos-1,"Numeric separator is not allowed at the last of digits"),this.pos===Lt||q!=null&&this.pos-Lt!==q?null:hr};function Ko(O,q){return q?parseInt(O,8):parseFloat(O.replace(/_/g,""))}function No(O){return typeof BigInt!="function"?null:BigInt(O.replace(/_/g,""))}Xa.readRadixNumber=function(O){var q=this.pos;this.pos+=2;var Le=this.readInt(O);return Le==null&&this.raise(this.start+2,"Expected number in radix "+O),this.options.ecmaVersion>=11&&this.input.charCodeAt(this.pos)===110?(Le=No(this.input.slice(q,this.pos)),++this.pos):te(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number"),this.finishToken(K.num,Le)},Xa.readNumber=function(O){var q=this.pos;!O&&this.readInt(10,void 0,!0)===null&&this.raise(q,"Invalid number");var Le=this.pos-q>=2&&this.input.charCodeAt(q)===48;Le&&this.strict&&this.raise(q,"Invalid number");var ve=this.input.charCodeAt(this.pos);if(!Le&&!O&&this.options.ecmaVersion>=11&&ve===110){var ct=No(this.input.slice(q,this.pos));return++this.pos,te(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number"),this.finishToken(K.num,ct)}Le&&/[89]/.test(this.input.slice(q,this.pos))&&(Le=!1),ve===46&&!Le&&(++this.pos,this.readInt(10),ve=this.input.charCodeAt(this.pos)),(ve===69||ve===101)&&!Le&&(ve=this.input.charCodeAt(++this.pos),(ve===43||ve===45)&&++this.pos,this.readInt(10)===null&&this.raise(q,"Invalid number")),te(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number");var Lt=Ko(this.input.slice(q,this.pos),Le);return this.finishToken(K.num,Lt)},Xa.readCodePoint=function(){var O=this.input.charCodeAt(this.pos),q;if(O===123){this.options.ecmaVersion<6&&this.unexpected();var Le=++this.pos;q=this.readHexChar(this.input.indexOf("}",this.pos)-this.pos),++this.pos,q>1114111&&this.invalidStringToken(Le,"Code point out of bounds")}else q=this.readHexChar(4);return q};function ui(O){return O<=65535?String.fromCharCode(O):(O-=65536,String.fromCharCode((O>>10)+55296,(O&1023)+56320))}Xa.readString=function(O){for(var q="",Le=++this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated string constant");var ve=this.input.charCodeAt(this.pos);if(ve===O)break;ve===92?(q+=this.input.slice(Le,this.pos),q+=this.readEscapedChar(!1),Le=this.pos):(Me(ve,this.options.ecmaVersion>=10)&&this.raise(this.start,"Unterminated string constant"),++this.pos)}return q+=this.input.slice(Le,this.pos++),this.finishToken(K.string,q)};var jn={};Xa.tryReadTemplateToken=function(){this.inTemplateElement=!0;try{this.readTmplToken()}catch(O){if(O===jn)this.readInvalidTemplateToken();else throw O}this.inTemplateElement=!1},Xa.invalidStringToken=function(O,q){if(this.inTemplateElement&&this.options.ecmaVersion>=9)throw jn;this.raise(O,q)},Xa.readTmplToken=function(){for(var O="",q=this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated template");var Le=this.input.charCodeAt(this.pos);if(Le===96||Le===36&&this.input.charCodeAt(this.pos+1)===123)return this.pos===this.start&&(this.type===K.template||this.type===K.invalidTemplate)?Le===36?(this.pos+=2,this.finishToken(K.dollarBraceL)):(++this.pos,this.finishToken(K.backQuote)):(O+=this.input.slice(q,this.pos),this.finishToken(K.template,O));if(Le===92)O+=this.input.slice(q,this.pos),O+=this.readEscapedChar(!0),q=this.pos;else if(Me(Le)){switch(O+=this.input.slice(q,this.pos),++this.pos,Le){case 13:this.input.charCodeAt(this.pos)===10&&++this.pos;case 10:O+=`
`;break;default:O+=String.fromCharCode(Le);break}this.options.locations&&(++this.curLine,this.lineStart=this.pos),q=this.pos}else++this.pos}},Xa.readInvalidTemplateToken=function(){for(;this.pos<this.input.length;this.pos++)switch(this.input[this.pos]){case"\\":++this.pos;break;case"$":if(this.input[this.pos+1]!=="{")break;case"`":return this.finishToken(K.invalidTemplate,this.input.slice(this.start,this.pos))}this.raise(this.start,"Unterminated template")},Xa.readEscapedChar=function(O){var q=this.input.charCodeAt(++this.pos);switch(++this.pos,q){case 110:return`
`;case 114:return"\r";case 120:return String.fromCharCode(this.readHexChar(2));case 117:return ui(this.readCodePoint());case 116:return"	";case 98:return"\b";case 118:return"\v";case 102:return"\f";case 13:this.input.charCodeAt(this.pos)===10&&++this.pos;case 10:return this.options.locations&&(this.lineStart=this.pos,++this.curLine),"";case 56:case 57:if(O){var Le=this.pos-1;return this.invalidStringToken(Le,"Invalid escape sequence in template string"),null}default:if(q>=48&&q<=55){var ve=this.input.substr(this.pos-1,3).match(/^[0-7]+/)[0],ct=parseInt(ve,8);return ct>255&&(ve=ve.slice(0,-1),ct=parseInt(ve,8)),this.pos+=ve.length-1,q=this.input.charCodeAt(this.pos),(ve!=="0"||q===56||q===57)&&(this.strict||O)&&this.invalidStringToken(this.pos-1-ve.length,O?"Octal literal in template string":"Octal literal in strict mode"),String.fromCharCode(ct)}return Me(q)?"":String.fromCharCode(q)}},Xa.readHexChar=function(O){var q=this.pos,Le=this.readInt(16,O);return Le===null&&this.invalidStringToken(q,"Bad character escape sequence"),Le},Xa.readWord1=function(){this.containsEsc=!1;for(var O="",q=!0,Le=this.pos,ve=this.options.ecmaVersion>=6;this.pos<this.input.length;){var ct=this.fullCharCodeAtPos();if(le(ct,ve))this.pos+=ct<=65535?1:2;else if(ct===92){this.containsEsc=!0,O+=this.input.slice(Le,this.pos);var Lt=this.pos;this.input.charCodeAt(++this.pos)!==117&&this.invalidStringToken(this.pos,"Expecting Unicode escape sequence \\uXXXX"),++this.pos;var hr=this.readCodePoint();(q?te:le)(hr,ve)||this.invalidStringToken(Lt,"Invalid Unicode escape"),O+=ui(hr),Le=this.pos}else break;q=!1}return O+this.input.slice(Le,this.pos)},Xa.readWord=function(){var O=this.readWord1(),q=K.name;return this.keywords.test(O)&&(q=xe[O]),this.finishToken(q,O)};var rr="7.4.1";ft.acorn={Parser:ft,version:rr,defaultOptions:Fe,Position:se,SourceLocation:Ne,getLineInfo:st,Node:nn,TokenType:be,tokTypes:K,keywordTypes:xe,TokContext:Pi,tokContexts:ka,isIdentifierChar:le,isIdentifierStart:te,Token:So,isNewLine:Me,lineBreak:ke,lineBreakG:we,nonASCIIwhitespace:Xe};function ps(O,q){return ft.parse(O,q)}function er(O,q,Le){return ft.parseExpressionAt(O,q,Le)}function $s(O,q){return ft.tokenizer(O,q)}function Es(O,q){O.prototype=Object.create(q.prototype),O.prototype.constructor=O,O.__proto__=q}function Os(O){var q=typeof Map=="function"?new Map:void 0;return Os=function(ve){if(ve===null||!ic(ve))return ve;if(typeof ve!="function")throw new TypeError("Super expression must either be null or a function");if(typeof q!="undefined"){if(q.has(ve))return q.get(ve);q.set(ve,ct)}function ct(){return bo(ve,arguments,Xs(this).constructor)}return ct.prototype=Object.create(ve.prototype,{constructor:{value:ct,enumerable:!1,writable:!0,configurable:!0}}),Ru(ct,ve)},Os(O)}function xu(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(O){return!1}}function bo(O,q,Le){return xu()?bo=Reflect.construct:bo=function(ct,Lt,hr){var lr=[null];lr.push.apply(lr,Lt);var Gr=Function.bind.apply(ct,lr),ii=new Gr;return hr&&Ru(ii,hr.prototype),ii},bo.apply(null,arguments)}function ic(O){return Function.toString.call(O).indexOf("[native code]")!==-1}function Ru(O,q){return Ru=Object.setPrototypeOf||function(ve,ct){return ve.__proto__=ct,ve},Ru(O,q)}function Xs(O){return Xs=Object.setPrototypeOf?Object.getPrototypeOf:function(Le){return Le.__proto__||Object.getPrototypeOf(Le)},Xs(O)}var Ys=function(O){Es(q,O);function q(){return O.apply(this,arguments)||this}return q}(Os(Error)),rs=function(O){Es(q,O);function q(){return O.apply(this,arguments)||this}return q}(Os(SyntaxError)),au=function(O){Es(q,O);function q(){return O.apply(this,arguments)||this}return q}(Os(ReferenceError)),Tu=function(O){Es(q,O);function q(){return O.apply(this,arguments)||this}return q}(Os(TypeError)),Cl=function(O){Es(q,O);function q(){return O.apply(this,arguments)||this}return q}(Ys),hu=function(O){Es(q,O);function q(){return O.apply(this,arguments)||this}return q}(rs),ou=function(O){Es(q,O);function q(){return O.apply(this,arguments)||this}return q}(au),ss={UnknownError:[3001,"%0",Cl],ExecutionTimeOutError:[3002,"Script execution timed out after %0ms",Cl],NodeTypeSyntaxError:[1001,"Unknown node type: %0",ou],BinaryOperatorSyntaxError:[1002,"Unknown binary operator: %0",ou],LogicalOperatorSyntaxError:[1003,"Unknown logical operator: %0",ou],UnaryOperatorSyntaxError:[1004,"Unknown unary operator: %0",ou],UpdateOperatorSyntaxError:[1005,"Unknown update operator: %0",ou],ObjectStructureSyntaxError:[1006,"Unknown object structure: %0",ou],AssignmentExpressionSyntaxError:[1007,"Unknown assignment expression: %0",ou],VariableTypeSyntaxError:[1008,"Unknown variable type: %0",ou],ParamTypeSyntaxError:[1009,"Unknown param type: %0",ou],AssignmentTypeSyntaxError:[1010,"Unknown assignment type: %0",ou],FunctionUndefinedReferenceError:[2001,"%0 is not a function",au],VariableUndefinedReferenceError:[2002,"%0 is not defined",au],IsNotConstructor:[2003,"%0 is not a constructor",Tu]};function nu(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(O){return!1}}function Pu(O,q,Le){return nu()?Pu=Reflect.construct:Pu=function(ct,Lt,hr){var lr=[null];lr.push.apply(lr,Lt);var Gr=Function.bind.apply(ct,lr),ii=new Gr;return hr&&Ks(ii,hr.prototype),ii},Pu.apply(null,arguments)}function Ks(O,q){return Ks=Object.setPrototypeOf||function(ve,ct){return ve.__proto__=ct,ve},Ks(O,q)}var $u="0.0.3";function qe(O,q){Object.defineProperty(O,"name",{value:q,writable:!1,enumerable:!1,configurable:!0})}var Bt=Object.prototype.hasOwnProperty,ge=Symbol("Break"),je=Symbol("Continue"),wt=Symbol("DefaultCase"),nr=Symbol("EmptyStatementReturn"),en=Symbol("WithScopeName"),Dn=Symbol("SuperScopeName"),Ai=Symbol("RootScopeName"),na=Symbol("GlobalScopeName");function Aa(O){return typeof O=="function"}var Ta=function(){function O(Le){this.interpreter=Le}var q=O.prototype;return q.generator=function(){var ve=this.interpreter;function ct(){return this.getCurrentScope()}function Lt(){return this.getGlobalScope()}function hr(){return this.getCurrentContext()}return{getOptions:ve.getOptions.bind(ve),getCurrentScope:ct.bind(ve),getGlobalScope:Lt.bind(ve),getCurrentContext:hr.bind(ve),getExecStartTime:ve.getExecStartTime.bind(ve)}},O}();function Wa(O,q,Le){if(Le===void 0&&(Le=!0),!(O instanceof Ta))throw new Error("Illegal call");if(typeof q!="string")return q;if(!!q){var ve=O.generator(),ct=ve.getOptions(),Lt={timeout:ct.timeout,_initEnv:function(){Le||this.setCurrentContext(ve.getCurrentContext()),this.execStartTime=ve.getExecStartTime(),this.execEndTime=this.execStartTime}},hr=Le?ve.getGlobalScope():ve.getCurrentScope(),lr=new Oo(hr,Lt);return lr.evaluate(q)}}Object.defineProperty(Wa,"__IS_EVAL_FUNC",{value:!0,writable:!1,enumerable:!1,configurable:!1});function Co(O){if(!(O instanceof Ta))throw new Error("Illegal call");for(var q=O.generator(),Le=arguments.length,ve=new Array(Le>1?Le-1:0),ct=1;ct<Le;ct++)ve[ct-1]=arguments[ct];var Lt=ve.pop(),hr=new Oo(q.getGlobalScope(),q.getOptions()),lr=`
		    (function anonymous(`+ve.join(",")+`){
		        `+Lt+`
		    });
		    `;return hr.evaluate(lr)}Object.defineProperty(Co,"__IS_FUNCTION_FUNC",{value:!0,writable:!1,enumerable:!1,configurable:!1});var lo=function(q){this.value=q},Vo=function(q){this.value=q},gs=function(q){this.value=q},su=function(q,Le,ve){Le===void 0&&(Le=null),this.name=ve,this.parent=Le,this.data=q,this.labelStack=[]};function Zu(){}function Ss(O,q){return O===void 0&&(O=null),new su(Object.create(null),O,q)}function Us(O){return Object.create(O)}var ys={NaN:NaN,Infinity:1/0,undefined:void 0,Object,Array,String,Boolean,Number,Date,RegExp,Error,URIError,TypeError,RangeError,SyntaxError,ReferenceError,Float32Array,Float64Array,Uint32Array,Math,parseInt,parseFloat,isNaN,isFinite,decodeURI,decodeURIComponent,encodeURI,encodeURIComponent,escape,unescape,eval:Wa,Function:Co};typeof JSON!="undefined"&&(ys.JSON=JSON),typeof Promise!="undefined"&&(ys.Promise=Promise),typeof Set!="undefined"&&(ys.Set=Set),typeof Map!="undefined"&&(ys.Map=Map),typeof Symbol!="undefined"&&(ys.Symbol=Symbol),typeof Proxy!="undefined"&&(ys.Proxy=Proxy),typeof WeakMap!="undefined"&&(ys.WeakMap=WeakMap),typeof WeakSet!="undefined"&&(ys.WeakSet=WeakSet),typeof Reflect!="undefined"&&(ys.Reflect=Reflect);var Oo=function(){function O(Le,ve){Le===void 0&&(Le=O.global),ve===void 0&&(ve={}),this.sourceList=[],this.collectDeclVars=Object.create(null),this.collectDeclFuncs=Object.create(null),this.isVarDeclMode=!1,this.lastExecNode=null,this.isRunning=!1,this.options={ecmaVersion:ve.ecmaVersion||O.ecmaVersion,timeout:ve.timeout||0,rootContext:ve.rootContext,globalContextInFunction:ve.globalContextInFunction===void 0?O.globalContextInFunction:ve.globalContextInFunction,_initEnv:ve._initEnv},this.context=Le||Object.create(null),this.callStack=[],this.initEnvironment(this.context)}var q=O.prototype;return q.initEnvironment=function(ve){var ct;if(ve instanceof su)ct=ve;else{var Lt=null,hr=this.createSuperScope(ve);this.options.rootContext&&(Lt=new su(Us(this.options.rootContext),hr,Ai)),ct=new su(ve,Lt||hr,na)}this.globalScope=ct,this.currentScope=this.globalScope,this.globalContext=ct.data,this.currentContext=ct.data,this.collectDeclVars=Object.create(null),this.collectDeclFuncs=Object.create(null),this.execStartTime=Date.now(),this.execEndTime=this.execStartTime;var lr=this.options._initEnv;lr&&lr.call(this)},q.getExecStartTime=function(){return this.execStartTime},q.getExecutionTime=function(){return this.execEndTime-this.execStartTime},q.setExecTimeout=function(ve){ve===void 0&&(ve=0),this.options.timeout=ve},q.getOptions=function(){return this.options},q.getGlobalScope=function(){return this.globalScope},q.getCurrentScope=function(){return this.currentScope},q.getCurrentContext=function(){return this.currentContext},q.isInterruptThrow=function(ve){return ve instanceof Cl||ve instanceof ou||ve instanceof hu},q.createSuperScope=function(ve){var ct=Object.assign({},ys),Lt=Object.keys(ct);return Lt.forEach(function(hr){hr in ve&&delete ct[hr]}),new su(ct,null,Dn)},q.setCurrentContext=function(ve){this.currentContext=ve},q.setCurrentScope=function(ve){this.currentScope=ve},q.evaluate=function(ve){ve===void 0&&(ve="");var ct;if(!!ve)return ct=ps(ve,{ranges:!0,locations:!0,ecmaVersion:this.options.ecmaVersion||O.ecmaVersion}),this.evaluateNode(ct,ve)},q.appendCode=function(ve){return this.evaluate(ve)},q.evaluateNode=function(ve,ct){var Lt=this;ct===void 0&&(ct=""),this.value=void 0,this.source=ct,this.sourceList.push(ct),this.isRunning=!0,this.execStartTime=Date.now(),this.execEndTime=this.execStartTime,this.collectDeclVars=Object.create(null),this.collectDeclFuncs=Object.create(null);var hr=this.getCurrentScope(),lr=this.getCurrentContext(),Gr=hr.labelStack.concat([]),ii=this.callStack.concat([]),fi=function(){Lt.setCurrentScope(hr),Lt.setCurrentContext(lr),hr.labelStack=Gr,Lt.callStack=ii};try{var Na=this.createClosure(ve);this.addDeclarationsToScope(this.collectDeclVars,this.collectDeclFuncs,this.getCurrentScope()),Na()}catch(vo){throw vo}finally{fi(),this.execEndTime=Date.now()}return this.isRunning=!1,this.getValue()},q.createErrorMessage=function(ve,ct,Lt){var hr=ve[1].replace("%0",String(ct));return Lt!==null&&(hr+=this.getNodePosition(Lt||this.lastExecNode)),hr},q.createError=function(ve,ct){return new ct(ve)},q.createThrowError=function(ve,ct){return this.createError(ve,ct)},q.createInternalThrowError=function(ve,ct,Lt){return this.createError(this.createErrorMessage(ve,ct,Lt),ve[2])},q.checkTimeout=function(){if(!this.isRunning)return!1;var ve=this.options.timeout||0,ct=Date.now();return ct-this.execStartTime>ve},q.getNodePosition=function(ve){if(ve){var ct="";return ve.loc?" ["+ve.loc.start.line+":"+ve.loc.start.column+"]"+ct:""}return""},q.createClosure=function(ve){var ct=this,Lt;switch(ve.type){case"BinaryExpression":Lt=this.binaryExpressionHandler(ve);break;case"LogicalExpression":Lt=this.logicalExpressionHandler(ve);break;case"UnaryExpression":Lt=this.unaryExpressionHandler(ve);break;case"UpdateExpression":Lt=this.updateExpressionHandler(ve);break;case"ObjectExpression":Lt=this.objectExpressionHandler(ve);break;case"ArrayExpression":Lt=this.arrayExpressionHandler(ve);break;case"CallExpression":Lt=this.callExpressionHandler(ve);break;case"NewExpression":Lt=this.newExpressionHandler(ve);break;case"MemberExpression":Lt=this.memberExpressionHandler(ve);break;case"ThisExpression":Lt=this.thisExpressionHandler(ve);break;case"SequenceExpression":Lt=this.sequenceExpressionHandler(ve);break;case"Literal":Lt=this.literalHandler(ve);break;case"Identifier":Lt=this.identifierHandler(ve);break;case"AssignmentExpression":Lt=this.assignmentExpressionHandler(ve);break;case"FunctionDeclaration":Lt=this.functionDeclarationHandler(ve);break;case"VariableDeclaration":Lt=this.variableDeclarationHandler(ve);break;case"BlockStatement":case"Program":Lt=this.programHandler(ve);break;case"ExpressionStatement":Lt=this.expressionStatementHandler(ve);break;case"EmptyStatement":Lt=this.emptyStatementHandler(ve);break;case"ReturnStatement":Lt=this.returnStatementHandler(ve);break;case"FunctionExpression":Lt=this.functionExpressionHandler(ve);break;case"IfStatement":Lt=this.ifStatementHandler(ve);break;case"ConditionalExpression":Lt=this.conditionalExpressionHandler(ve);break;case"ForStatement":Lt=this.forStatementHandler(ve);break;case"WhileStatement":Lt=this.whileStatementHandler(ve);break;case"DoWhileStatement":Lt=this.doWhileStatementHandler(ve);break;case"ForInStatement":Lt=this.forInStatementHandler(ve);break;case"WithStatement":Lt=this.withStatementHandler(ve);break;case"ThrowStatement":Lt=this.throwStatementHandler(ve);break;case"TryStatement":Lt=this.tryStatementHandler(ve);break;case"ContinueStatement":Lt=this.continueStatementHandler(ve);break;case"BreakStatement":Lt=this.breakStatementHandler(ve);break;case"SwitchStatement":Lt=this.switchStatementHandler(ve);break;case"LabeledStatement":Lt=this.labeledStatementHandler(ve);break;case"DebuggerStatement":Lt=this.debuggerStatementHandler(ve);break;default:throw this.createInternalThrowError(ss.NodeTypeSyntaxError,ve.type,ve)}return function(){var hr=ct.options.timeout;if(hr&&hr>0&&ct.checkTimeout())throw ct.createInternalThrowError(ss.ExecutionTimeOutError,hr,null);return ct.lastExecNode=ve,Lt.apply(void 0,arguments)}},q.binaryExpressionHandler=function(ve){var ct=this,Lt=this.createClosure(ve.left),hr=this.createClosure(ve.right);return function(){var lr=Lt(),Gr=hr();switch(ve.operator){case"==":return lr==Gr;case"!=":return lr!=Gr;case"===":return lr===Gr;case"!==":return lr!==Gr;case"<":return lr<Gr;case"<=":return lr<=Gr;case">":return lr>Gr;case">=":return lr>=Gr;case"<<":return lr<<Gr;case">>":return lr>>Gr;case">>>":return lr>>>Gr;case"+":return lr+Gr;case"-":return lr-Gr;case"*":return lr*Gr;case"**":return Math.pow(lr,Gr);case"/":return lr/Gr;case"%":return lr%Gr;case"|":return lr|Gr;case"^":return lr^Gr;case"&":return lr&Gr;case"in":return lr in Gr;case"instanceof":return lr instanceof Gr;default:throw ct.createInternalThrowError(ss.BinaryOperatorSyntaxError,ve.operator,ve)}}},q.logicalExpressionHandler=function(ve){var ct=this,Lt=this.createClosure(ve.left),hr=this.createClosure(ve.right);return function(){switch(ve.operator){case"||":return Lt()||hr();case"&&":return Lt()&&hr();default:throw ct.createInternalThrowError(ss.LogicalOperatorSyntaxError,ve.operator,ve)}}},q.unaryExpressionHandler=function(ve){var ct=this;switch(ve.operator){case"delete":var Lt=this.createObjectGetter(ve.argument),hr=this.createNameGetter(ve.argument);return function(){var fi=Lt(),Na=hr();return delete fi[Na]};default:var lr;if(ve.operator==="typeof"&&ve.argument.type==="Identifier"){var Gr=this.createObjectGetter(ve.argument),ii=this.createNameGetter(ve.argument);lr=function(){return Gr()[ii()]}}else lr=this.createClosure(ve.argument);return function(){var fi=lr();switch(ve.operator){case"-":return-fi;case"+":return+fi;case"!":return!fi;case"~":return~fi;case"void":return;case"typeof":return typeof fi;default:throw ct.createInternalThrowError(ss.UnaryOperatorSyntaxError,ve.operator,ve)}}}},q.updateExpressionHandler=function(ve){var ct=this,Lt=this.createObjectGetter(ve.argument),hr=this.createNameGetter(ve.argument);return function(){var lr=Lt(),Gr=hr();switch(ct.assertVariable(lr,Gr,ve),ve.operator){case"++":return ve.prefix?++lr[Gr]:lr[Gr]++;case"--":return ve.prefix?--lr[Gr]:lr[Gr]--;default:throw ct.createInternalThrowError(ss.UpdateOperatorSyntaxError,ve.operator,ve)}}},q.objectExpressionHandler=function(ve){var ct=this,Lt=[];function hr(Gr){return Gr.type==="Identifier"?Gr.name:Gr.type==="Literal"?Gr.value:this.throwError(ss.ObjectStructureSyntaxError,Gr.type,Gr)}var lr=Object.create(null);return ve.properties.forEach(function(Gr){var ii=Gr.kind,fi=hr(Gr.key);(!lr[fi]||ii==="init")&&(lr[fi]={}),lr[fi][ii]=ct.createClosure(Gr.value),Lt.push({key:fi,property:Gr})}),function(){for(var Gr={},ii=Lt.length,fi=0;fi<ii;fi++){var Na=Lt[fi],vo=Na.key,Va=lr[vo],ha=Va.init?Va.init():void 0,$o=Va.get?Va.get():function(){},ms=Va.set?Va.set():function(Pc){};if("set"in Va||"get"in Va){var To={configurable:!0,enumerable:!0,get:$o,set:ms};Object.defineProperty(Gr,vo,To)}else{var Qs=Na.property,Wl=Qs.kind;Qs.key.type==="Identifier"&&Qs.value.type==="FunctionExpression"&&Wl==="init"&&!Qs.value.id&&qe(ha,Qs.key.name),Gr[vo]=ha}}return Gr}},q.arrayExpressionHandler=function(ve){var ct=this,Lt=ve.elements.map(function(hr){return hr&&ct.createClosure(hr)});return function(){for(var hr=Lt.length,lr=Array(hr),Gr=0;Gr<hr;Gr++){var ii=Lt[Gr];ii&&(lr[Gr]=ii())}return lr}},q.safeObjectGet=function(ve,ct,Lt){return ve[ct]},q.createCallFunctionGetter=function(ve){var ct=this;switch(ve.type){case"MemberExpression":var Lt=this.createClosure(ve.object),hr=this.createMemberKeyGetter(ve),lr=this.source;return function(){var ii=Lt(),fi=hr(),Na=ct.safeObjectGet(ii,fi,ve);if(!Na||!Aa(Na)){var vo=lr.slice(ve.start,ve.end);throw ct.createInternalThrowError(ss.FunctionUndefinedReferenceError,vo,ve)}return Na.__IS_EVAL_FUNC?function(Va){return Na(new Ta(ct),Va,!0)}:Na.__IS_FUNCTION_FUNC?function(){for(var Va=arguments.length,ha=new Array(Va),$o=0;$o<Va;$o++)ha[$o]=arguments[$o];return Na.apply(void 0,[new Ta(ct)].concat(ha))}:Na.bind(ii)};default:var Gr=this.createClosure(ve);return function(){var ii="";ve.type==="Identifier"&&(ii=ve.name);var fi=Gr();if(!fi||!Aa(fi))throw ct.createInternalThrowError(ss.FunctionUndefinedReferenceError,ii,ve);if(ve.type==="Identifier"&&fi.__IS_EVAL_FUNC&&ii==="eval")return function(Va){var ha=ct.getScopeFromName(ii,ct.getCurrentScope()),$o=ha.name===Dn||ha.name===na||ha.name===Ai;return fi(new Ta(ct),Va,!$o)};if(fi.__IS_EVAL_FUNC)return function(Va){return fi(new Ta(ct),Va,!0)};if(fi.__IS_FUNCTION_FUNC)return function(){for(var Va=arguments.length,ha=new Array(Va),$o=0;$o<Va;$o++)ha[$o]=arguments[$o];return fi.apply(void 0,[new Ta(ct)].concat(ha))};var Na=ct.options.globalContextInFunction;if(ve.type==="Identifier"){var vo=ct.getIdentifierScope(ve);vo.name===en&&(Na=vo.data)}return fi.bind(Na)}}},q.callExpressionHandler=function(ve){var ct=this,Lt=this.createCallFunctionGetter(ve.callee),hr=ve.arguments.map(function(lr){return ct.createClosure(lr)});return function(){return Lt().apply(void 0,hr.map(function(lr){return lr()}))}},q.functionExpressionHandler=function(ve){var ct=this,Lt=this,hr=this.source,lr=this.collectDeclVars,Gr=this.collectDeclFuncs;this.collectDeclVars=Object.create(null),this.collectDeclFuncs=Object.create(null);var ii=ve.id?ve.id.name:"",fi=ve.params.length,Na=ve.params.map(function($o){return ct.createParamNameGetter($o)}),vo=this.createClosure(ve.body),Va=this.collectDeclVars,ha=this.collectDeclFuncs;return this.collectDeclVars=lr,this.collectDeclFuncs=Gr,function(){var $o=Lt.getCurrentScope(),ms=function To(){for(var Qs=arguments.length,Wl=new Array(Qs),Pc=0;Pc<Qs;Pc++)Wl[Pc]=arguments[Pc];Lt.callStack.push(""+ii);var Js=Lt.getCurrentScope(),Tl=Ss($o,"FunctionScope("+ii+")");Lt.setCurrentScope(Tl),Lt.addDeclarationsToScope(Va,ha,Tl),ii&&(Tl.data[ii]=To),Tl.data.arguments=arguments,Na.forEach(function(vc,jc){Tl.data[vc()]=Wl[jc]});var bf=Lt.getCurrentContext();Lt.setCurrentContext(this);var Zc=vo();if(Lt.setCurrentContext(bf),Lt.setCurrentScope(Js),Lt.callStack.pop(),Zc instanceof lo)return Zc.value};return qe(ms,ii),Object.defineProperty(ms,"length",{value:fi,writable:!1,enumerable:!1,configurable:!0}),Object.defineProperty(ms,"toString",{value:function(){return hr.slice(ve.start,ve.end)},writable:!0,configurable:!0,enumerable:!1}),Object.defineProperty(ms,"valueOf",{value:function(){return hr.slice(ve.start,ve.end)},writable:!0,configurable:!0,enumerable:!1}),ms}},q.newExpressionHandler=function(ve){var ct=this,Lt=this.source,hr=this.createClosure(ve.callee),lr=ve.arguments.map(function(Gr){return ct.createClosure(Gr)});return function(){var Gr=hr();if(!Aa(Gr)||Gr.__IS_EVAL_FUNC){var ii=ve.callee,fi=Lt.slice(ii.start,ii.end);throw ct.createInternalThrowError(ss.IsNotConstructor,fi,ve)}return Gr.__IS_FUNCTION_FUNC?Gr.apply(void 0,[new Ta(ct)].concat(lr.map(function(Na){return Na()}))):Pu(Gr,lr.map(function(Na){return Na()}))}},q.memberExpressionHandler=function(ve){var ct=this.createClosure(ve.object),Lt=this.createMemberKeyGetter(ve);return function(){var hr=ct(),lr=Lt();return hr[lr]}},q.thisExpressionHandler=function(ve){var ct=this;return function(){return ct.getCurrentContext()}},q.sequenceExpressionHandler=function(ve){var ct=this,Lt=ve.expressions.map(function(hr){return ct.createClosure(hr)});return function(){for(var hr,lr=Lt.length,Gr=0;Gr<lr;Gr++){var ii=Lt[Gr];hr=ii()}return hr}},q.literalHandler=function(ve){return function(){return ve.regex?new RegExp(ve.regex.pattern,ve.regex.flags):ve.value}},q.identifierHandler=function(ve){var ct=this;return function(){var Lt=ct.getCurrentScope(),hr=ct.getScopeDataFromName(ve.name,Lt);return ct.assertVariable(hr,ve.name,ve),hr[ve.name]}},q.getIdentifierScope=function(ve){var ct=this.getCurrentScope(),Lt=this.getScopeFromName(ve.name,ct);return Lt},q.assignmentExpressionHandler=function(ve){var ct=this;ve.left.type==="Identifier"&&ve.right.type==="FunctionExpression"&&!ve.right.id&&(ve.right.id={type:"Identifier",name:ve.left.name});var Lt=this.createObjectGetter(ve.left),hr=this.createNameGetter(ve.left),lr=this.createClosure(ve.right);return function(){var Gr=Lt(),ii=hr(),fi=lr();switch(ve.operator!=="="&&ct.assertVariable(Gr,ii,ve),ve.operator){case"=":return Gr[ii]=fi;case"+=":return Gr[ii]+=fi;case"-=":return Gr[ii]-=fi;case"*=":return Gr[ii]*=fi;case"**=":return Gr[ii]=Math.pow(Gr[ii],fi);case"/=":return Gr[ii]/=fi;case"%=":return Gr[ii]%=fi;case"<<=":return Gr[ii]<<=fi;case">>=":return Gr[ii]>>=fi;case">>>=":return Gr[ii]>>>=fi;case"&=":return Gr[ii]&=fi;case"^=":return Gr[ii]^=fi;case"|=":return Gr[ii]|=fi;default:throw ct.createInternalThrowError(ss.AssignmentExpressionSyntaxError,ve.type,ve)}}},q.functionDeclarationHandler=function(ve){if(ve.id){var ct=this.functionExpressionHandler(ve);Object.defineProperty(ct,"isFunctionDeclareClosure",{value:!0,writable:!1,configurable:!1,enumerable:!1}),this.funcDeclaration(ve.id.name,ct)}return function(){return nr}},q.getVariableName=function(ve){if(ve.type==="Identifier")return ve.name;throw this.createInternalThrowError(ss.VariableTypeSyntaxError,ve.type,ve)},q.variableDeclarationHandler=function(ve){for(var ct=this,Lt,hr=[],lr=0;lr<ve.declarations.length;lr++){var Gr=ve.declarations[lr];this.varDeclaration(this.getVariableName(Gr.id)),Gr.init&&hr.push({type:"AssignmentExpression",operator:"=",left:Gr.id,right:Gr.init})}return hr.length&&(Lt=this.createClosure({type:"BlockStatement",body:hr})),function(){if(Lt){var ii=ct.isVarDeclMode;ct.isVarDeclMode=!0,Lt(),ct.isVarDeclMode=ii}return nr}},q.assertVariable=function(ve,ct,Lt){if(ve===this.globalScope.data&&!(ct in ve))throw this.createInternalThrowError(ss.VariableUndefinedReferenceError,ct,Lt)},q.programHandler=function(ve){var ct=this,Lt=ve.body.map(function(hr){return ct.createClosure(hr)});return function(){for(var hr=nr,lr=0;lr<Lt.length;lr++){var Gr=Lt[lr],ii=ct.setValue(Gr());if(ii!==nr&&(hr=ii,hr instanceof lo||hr instanceof Vo||hr instanceof gs||hr===ge||hr===je))break}return hr}},q.expressionStatementHandler=function(ve){return this.createClosure(ve.expression)},q.emptyStatementHandler=function(ve){return function(){return nr}},q.returnStatementHandler=function(ve){var ct=ve.argument?this.createClosure(ve.argument):Zu;return function(){return new lo(ct())}},q.ifStatementHandler=function(ve){var ct=this.createClosure(ve.test),Lt=this.createClosure(ve.consequent),hr=ve.alternate?this.createClosure(ve.alternate):function(){return nr};return function(){return ct()?Lt():hr()}},q.conditionalExpressionHandler=function(ve){return this.ifStatementHandler(ve)},q.forStatementHandler=function(ve){var ct=this,Lt=Zu,hr=ve.test?this.createClosure(ve.test):function(){return!0},lr=Zu,Gr=this.createClosure(ve.body);return ve.type==="ForStatement"&&(Lt=ve.init?this.createClosure(ve.init):Lt,lr=ve.update?this.createClosure(ve.update):Zu),function(ii){var fi,Na=nr,vo=ve.type==="DoWhileStatement";for(ii&&ii.type==="LabeledStatement"&&(fi=ii.label.name),Lt();vo||hr();lr()){vo=!1;var Va=ct.setValue(Gr());if(!(Va===nr||Va===je)){if(Va===ge)break;if(Na=Va,Na instanceof gs&&Na.value===fi){Na=nr;continue}if(Na instanceof lo||Na instanceof Vo||Na instanceof gs)break}}return Na}},q.whileStatementHandler=function(ve){return this.forStatementHandler(ve)},q.doWhileStatementHandler=function(ve){return this.forStatementHandler(ve)},q.forInStatementHandler=function(ve){var ct=this,Lt=ve.left,hr=this.createClosure(ve.right),lr=this.createClosure(ve.body);return ve.left.type==="VariableDeclaration"&&(this.createClosure(ve.left)(),Lt=ve.left.declarations[0].id),function(Gr){var ii,fi=nr,Na;Gr&&Gr.type==="LabeledStatement"&&(ii=Gr.label.name);var vo=hr();for(Na in vo){ct.assignmentExpressionHandler({type:"AssignmentExpression",operator:"=",left:Lt,right:{type:"Literal",value:Na}})();var Va=ct.setValue(lr());if(!(Va===nr||Va===je)){if(Va===ge)break;if(fi=Va,fi instanceof gs&&fi.value===ii){fi=nr;continue}if(fi instanceof lo||fi instanceof Vo||fi instanceof gs)break}}return fi}},q.withStatementHandler=function(ve){var ct=this,Lt=this.createClosure(ve.object),hr=this.createClosure(ve.body);return function(){var lr=Lt(),Gr=ct.getCurrentScope(),ii=new su(lr,Gr,en);ct.setCurrentScope(ii);var fi=ct.setValue(hr());return ct.setCurrentScope(Gr),fi}},q.throwStatementHandler=function(ve){var ct=this,Lt=this.createClosure(ve.argument);return function(){throw ct.setValue(void 0),Lt()}},q.tryStatementHandler=function(ve){var ct=this,Lt=this.createClosure(ve.block),hr=ve.handler?this.catchClauseHandler(ve.handler):null,lr=ve.finalizer?this.createClosure(ve.finalizer):null;return function(){var Gr=ct.getCurrentScope(),ii=ct.getCurrentContext(),fi=Gr.labelStack.concat([]),Na=ct.callStack.concat([]),vo=nr,Va,ha,$o=function(){ct.setCurrentScope(Gr),ct.setCurrentContext(ii),Gr.labelStack=fi,ct.callStack=Na};try{vo=ct.setValue(Lt()),vo instanceof lo&&(Va=vo)}catch(ms){if($o(),ct.isInterruptThrow(ms))throw ms;if(hr)try{vo=ct.setValue(hr(ms)),vo instanceof lo&&(Va=vo)}catch(To){if($o(),ct.isInterruptThrow(To))throw To;ha=To}}if(lr)try{vo=lr(),vo instanceof lo&&(Va=vo)}catch(ms){if($o(),ct.isInterruptThrow(ms))throw ms;ha=ms}if(ha)throw ha;return Va||vo}},q.catchClauseHandler=function(ve){var ct=this,Lt=this.createParamNameGetter(ve.param),hr=this.createClosure(ve.body);return function(lr){var Gr,ii=ct.getCurrentScope(),fi=ii.data,Na=Lt(),vo=Bt.call(fi,Na),Va=fi[Na];return fi[Na]=lr,Gr=hr(),vo?fi[Na]=Va:delete fi[Na],Gr}},q.continueStatementHandler=function(ve){return function(){return ve.label?new gs(ve.label.name):je}},q.breakStatementHandler=function(ve){return function(){return ve.label?new Vo(ve.label.name):ge}},q.switchStatementHandler=function(ve){var ct=this,Lt=this.createClosure(ve.discriminant),hr=ve.cases.map(function(lr){return ct.switchCaseHandler(lr)});return function(){for(var lr=Lt(),Gr=!1,ii,fi,Na,vo=0;vo<hr.length;vo++){var Va=hr[vo](),ha=Va.testClosure();if(ha===wt){Na=Va;continue}if(Gr||ha===lr){if(Gr=!0,fi=ct.setValue(Va.bodyClosure()),fi===nr)continue;if(fi===ge||(ii=fi,ii instanceof lo||ii instanceof Vo||ii instanceof gs||ii===je))break}}if(!Gr&&Na){fi=ct.setValue(Na.bodyClosure());var $o=fi===nr||fi===ge||fi===je;$o||(ii=fi)}return ii}},q.switchCaseHandler=function(ve){var ct=ve.test?this.createClosure(ve.test):function(){return wt},Lt=this.createClosure({type:"BlockStatement",body:ve.consequent});return function(){return{testClosure:ct,bodyClosure:Lt}}},q.labeledStatementHandler=function(ve){var ct=this,Lt=ve.label.name,hr=this.createClosure(ve.body);return function(){var lr,Gr=ct.getCurrentScope();return Gr.labelStack.push(Lt),lr=hr(ve),lr instanceof Vo&&lr.value===Lt&&(lr=nr),Gr.labelStack.pop(),lr}},q.debuggerStatementHandler=function(ve){return function(){debugger;return nr}},q.createParamNameGetter=function(ve){if(ve.type==="Identifier")return function(){return ve.name};throw this.createInternalThrowError(ss.ParamTypeSyntaxError,ve.type,ve)},q.createObjectKeyGetter=function(ve){var ct;return ve.type==="Identifier"?ct=function(){return ve.name}:ct=this.createClosure(ve),function(){return ct()}},q.createMemberKeyGetter=function(ve){return ve.computed?this.createClosure(ve.property):this.createObjectKeyGetter(ve.property)},q.createObjectGetter=function(ve){var ct=this;switch(ve.type){case"Identifier":return function(){return ct.getScopeDataFromName(ve.name,ct.getCurrentScope())};case"MemberExpression":return this.createClosure(ve.object);default:throw this.createInternalThrowError(ss.AssignmentTypeSyntaxError,ve.type,ve)}},q.createNameGetter=function(ve){switch(ve.type){case"Identifier":return function(){return ve.name};case"MemberExpression":return this.createMemberKeyGetter(ve);default:throw this.createInternalThrowError(ss.AssignmentTypeSyntaxError,ve.type,ve)}},q.varDeclaration=function(ve){var ct=this.collectDeclVars;ct[ve]=void 0},q.funcDeclaration=function(ve,ct){var Lt=this.collectDeclFuncs;Lt[ve]=ct},q.addDeclarationsToScope=function(ve,ct,Lt){var hr=Lt.data;for(var lr in ct){var Gr=ct[lr];hr[lr]=Gr&&Gr()}for(var ii in ve)ii in hr||(hr[ii]=void 0)},q.getScopeValue=function(ve,ct){var Lt=this.getScopeFromName(ve,ct);return Lt.data[ve]},q.getScopeDataFromName=function(ve,ct){return this.getScopeFromName(ve,ct).data},q.getScopeFromName=function(ve,ct){var Lt=ct;do if(ve in Lt.data)return Lt;while(Lt=Lt.parent);return this.globalScope},q.setValue=function(ve){var ct=this.callStack.length;return this.isVarDeclMode||ct||ve===nr||ve===ge||ve===je||ve instanceof Vo||ve instanceof gs||(this.value=ve instanceof lo?ve.value:ve),ve},q.getValue=function(){return this.value},O}();Oo.version=$u,Oo.eval=Wa,Oo.Function=Co,Oo.ecmaVersion=5,Oo.globalContextInFunction=void 0,Oo.global=Object.create(null);function qo(O){return O===void 0&&(O=Object.create(null)),O}function Rc(O,q,Le){q===void 0&&(q=[]),Le===void 0&&(Le={});var ve=Le.parsingContext,ct=Le.timeout===void 0?0:Le.timeout,Lt=`
    (function anonymous(`+q.join(",")+`){
         `+O+`
    });
    `,hr=new Oo(ve,{ecmaVersion:Le.ecmaVersion,timeout:ct,rootContext:Le.rootContext,globalContextInFunction:Le.globalContextInFunction});return hr.evaluate(Lt)}function Hl(O,q,Le){var ve=new Oo(q,Le);return ve.evaluate(O)}var sf=Hl,Bf=function(){function O(Le){this._code=Le}var q=O.prototype;return q.runInContext=function(ve){return Hl(this._code,ve)},q.runInNewContext=function(ve){return Hl(this._code,ve)},O}(),zf=function(O,q,Le){return Hl(O,q,Le)};function ac(){for(var O=arguments.length,q=new Array(O),Le=0;Le<O;Le++)q[Le]=arguments[Le];var ve=q.pop();return Rc(ve||"",q)}var dc=zf},18794:function(U,F,c){var w;(function(v,l,R,A){"use strict";var D=typeof my!="undefined"&&!!my&&typeof my.showToast=="function"&&my.isFRM!==!0,k=typeof wx!="undefined"&&wx!==null&&(typeof wx.request!="undefined"||typeof wx.miniProgram!="undefined"),B=D||k,z=["","webkit","Moz","MS","ms","o"],Z=B?"":l.createElement("div"),W="function",Y=Math.round,te=Math.abs,le=Date.now;function be(ge,je,wt){return setTimeout(we(ge,wt),je)}function de(ge,je,wt){return Array.isArray(ge)?(pe(ge,wt[je],wt),!0):!1}function pe(ge,je,wt){var nr;if(!!ge)if(ge.forEach)ge.forEach(je,wt);else if(ge.length!==A)for(nr=0;nr<ge.length;)je.call(wt,ge[nr],nr,ge),nr++;else for(nr in ge)ge.hasOwnProperty(nr)&&je.call(wt,ge[nr],nr,ge)}function Oe(ge,je,wt){var nr="DEPRECATED METHOD: "+je+`
`+wt+` AT 
`;return function(){var en=new Error("get-stack-trace"),Dn=en&&en.stack?en.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",Ai=v.console&&(v.console.warn||v.console.log);return Ai&&Ai.call(v.console,nr,Dn),ge.apply(this,arguments)}}var xe;typeof Object.assign!="function"?xe=function(je){if(je===A||je===null)throw new TypeError("Cannot convert undefined or null to object");for(var wt=Object(je),nr=1;nr<arguments.length;nr++){var en=arguments[nr];if(en!==A&&en!==null)for(var Dn in en)en.hasOwnProperty(Dn)&&(wt[Dn]=en[Dn])}return wt}:xe=Object.assign;var Ve=Oe(function(je,wt,nr){for(var en=Object.keys(wt),Dn=0;Dn<en.length;)(!nr||nr&&je[en[Dn]]===A)&&(je[en[Dn]]=wt[en[Dn]]),Dn++;return je},"extend","Use `assign`."),K=Oe(function(je,wt){return Ve(je,wt,!0)},"merge","Use `assign`.");function ke(ge,je,wt){var nr=je.prototype,en;en=ge.prototype=Object.create(nr),en.constructor=ge,en._super=nr,wt&&xe(en,wt)}function we(ge,je){return function(){return ge.apply(je,arguments)}}function Me(ge,je){return typeof ge==W?ge.apply(je&&je[0]||A,je):ge}function Xe(ge,je){return ge===A?je:ge}function Ke(ge,je,wt){pe(oe(je),function(nr){ge.addEventListener(nr,wt,!1)})}function At(ge,je,wt){pe(oe(je),function(nr){ge.removeEventListener(nr,wt,!1)})}function mt(ge,je){for(;ge;){if(ge==je)return!0;ge=ge.parentNode}return!1}function ie(ge,je){return ge.indexOf(je)>-1}function oe(ge){return ge.trim().split(/\s+/g)}function he(ge,je,wt){if(ge.indexOf&&!wt)return ge.indexOf(je);for(var nr=0;nr<ge.length;){if(wt&&ge[nr][wt]==je||!wt&&ge[nr]===je)return nr;nr++}return-1}function ye(ge){return Array.prototype.slice.call(ge,0)}function se(ge,je,wt){for(var nr=[],en=[],Dn=0;Dn<ge.length;){var Ai=je?ge[Dn][je]:ge[Dn];he(en,Ai)<0&&nr.push(ge[Dn]),en[Dn]=Ai,Dn++}return wt&&(je?nr=nr.sort(function(Aa,Ta){return Aa[je]>Ta[je]}):nr=nr.sort()),nr}function Ne(ge,je){for(var wt,nr,en=je[0].toUpperCase()+je.slice(1),Dn=0;Dn<z.length;){if(wt=z[Dn],nr=wt?wt+en:je,nr in ge)return nr;Dn++}return A}var st=1;function Fe(){return st++}function tt(ge){var je=ge.ownerDocument||ge;return je.defaultView||je.parentWindow||v}var Wt=/mobile|tablet|ip(ad|hone|od)|android/i,Pr="ontouchstart"in v,Qt=Ne(v,"PointerEvent")!==A,xr=Pr&&Wt.test(navigator.userAgent),$r="touch",Cr="pen",sn="mouse",ot="kinect",_r=25,cr=1,Vr=2,Qn=4,mn=8,_n=1,Yr=2,Fr=4,kr=8,ft=16,me=Yr|Fr,ne=kr|ft,fe=me|ne,Q=["x","y"],De=["clientX","clientY"];function dt(ge,je){var wt=this;this.manager=ge,this.callback=je,this.element=ge.element,this.target=ge.options.inputTarget,this.domHandler=function(nr){Me(ge.options.enable,[ge])&&wt.handler(nr)},this.init()}dt.prototype={handler:function(){},init:function(){this.evEl&&Ke(this.element,this.evEl,this.domHandler),this.evTarget&&Ke(this.target,this.evTarget,this.domHandler),this.evWin&&Ke(tt(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&At(this.element,this.evEl,this.domHandler),this.evTarget&&At(this.target,this.evTarget,this.domHandler),this.evWin&&At(tt(this.element),this.evWin,this.domHandler)}};function Jt(ge){var je,wt=ge.options.inputClass;return wt?je=wt:Qt?je=Et:xr?je=tn:Pr?je=Mr:je=Ti,new je(ge,it)}function it(ge,je,wt){var nr=wt.pointers.length,en=wt.changedPointers.length,Dn=je&cr&&nr-en===0,Ai=je&(Qn|mn)&&nr-en===0;wt.isFirst=!!Dn,wt.isFinal=!!Ai,Dn&&(ge.session={}),wt.eventType=je,lt(ge,wt),ge.emit("hammer.input",wt),ge.recognize(wt),ge.session.prevInput=wt}function lt(ge,je){var wt=ge.session,nr=je.pointers,en=nr.length;wt.firstInput||(wt.firstInput=Hr(je)),en>1&&!wt.firstMultiple?wt.firstMultiple=Hr(je):en===1&&(wt.firstMultiple=!1);var Dn=wt.firstInput,Ai=wt.firstMultiple,na=Ai?Ai.center:Dn.center,Aa=je.center=Xr(nr);je.timeStamp=le(),je.deltaTime=je.timeStamp-Dn.timeStamp,je.angle=Ir(na,Aa),je.distance=Gt(na,Aa),qt(wt,je),je.offsetDirection=xt(je.deltaX,je.deltaY);var Ta=ce(je.deltaTime,je.deltaX,je.deltaY);je.overallVelocityX=Ta.x,je.overallVelocityY=Ta.y,je.overallVelocity=te(Ta.x)>te(Ta.y)?Ta.x:Ta.y,je.scale=Ai?zi(Ai.pointers,nr):1,je.rotation=Ai?nn(Ai.pointers,nr):0,je.maxPointers=wt.prevInput?je.pointers.length>wt.prevInput.maxPointers?je.pointers.length:wt.prevInput.maxPointers:je.pointers.length,pr(wt,je);var Wa=ge.element;mt(je.srcEvent.target,Wa)&&(Wa=je.srcEvent.target),je.target=Wa}function qt(ge,je){var wt=je.center,nr=ge.offsetDelta||{},en=ge.prevDelta||{},Dn=ge.prevInput||{};(je.eventType===cr||Dn.eventType===Qn)&&(en=ge.prevDelta={x:Dn.deltaX||0,y:Dn.deltaY||0},nr=ge.offsetDelta={x:wt.x,y:wt.y}),je.deltaX=en.x+(wt.x-nr.x),je.deltaY=en.y+(wt.y-nr.y)}function pr(ge,je){var wt=ge.lastInterval||je,nr=je.timeStamp-wt.timeStamp,en,Dn,Ai,na;if(je.eventType!=mn&&(nr>_r||wt.velocity===A)){var Aa=je.deltaX-wt.deltaX,Ta=je.deltaY-wt.deltaY,Wa=ce(nr,Aa,Ta);Dn=Wa.x,Ai=Wa.y,en=te(Wa.x)>te(Wa.y)?Wa.x:Wa.y,na=xt(Aa,Ta),ge.lastInterval=je}else en=wt.velocity,Dn=wt.velocityX,Ai=wt.velocityY,na=wt.direction;je.velocity=en,je.velocityX=Dn,je.velocityY=Ai,je.direction=na}function Hr(ge){for(var je=[],wt=0;wt<ge.pointers.length;)je[wt]={clientX:Y(ge.pointers[wt].clientX),clientY:Y(ge.pointers[wt].clientY)},wt++;return{timeStamp:le(),pointers:je,center:Xr(je),deltaX:ge.deltaX,deltaY:ge.deltaY}}function Xr(ge){var je=ge.length;if(je===1)return{x:Y(ge[0].clientX),y:Y(ge[0].clientY)};for(var wt=0,nr=0,en=0;en<je;)wt+=ge[en].clientX,nr+=ge[en].clientY,en++;return{x:Y(wt/je),y:Y(nr/je)}}function ce(ge,je,wt){return{x:je/ge||0,y:wt/ge||0}}function xt(ge,je){return ge===je?_n:te(ge)>=te(je)?ge<0?Yr:Fr:je<0?kr:ft}function Gt(ge,je,wt){wt||(wt=Q);var nr=je[wt[0]]-ge[wt[0]],en=je[wt[1]]-ge[wt[1]];return Math.sqrt(nr*nr+en*en)}function Ir(ge,je,wt){wt||(wt=Q);var nr=je[wt[0]]-ge[wt[0]],en=je[wt[1]]-ge[wt[1]];return Math.atan2(en,nr)*180/Math.PI}function nn(ge,je){return Ir(je[1],je[0],De)+Ir(ge[1],ge[0],De)}function zi(ge,je){return Gt(je[0],je[1],De)/Gt(ge[0],ge[1],De)}var Ui={mousedown:cr,mousemove:Vr,mouseup:Qn},Pi="mousedown",ka="mousemove mouseup";function Ti(){this.evEl=Pi,this.evWin=ka,this.pressed=!1,dt.apply(this,arguments)}ke(Ti,dt,{handler:function(je){var wt=Ui[je.type];wt&cr&&je.button===0&&(this.pressed=!0),wt&Vr&&je.which!==1&&(wt=Qn),this.pressed&&(wt&Qn&&(this.pressed=!1),this.callback(this.manager,wt,{pointers:[je],changedPointers:[je],pointerType:sn,srcEvent:je}))}});var Ge={pointerdown:cr,pointermove:Vr,pointerup:Qn,pointercancel:mn,pointerout:mn},et={2:$r,3:Cr,4:sn,5:ot},gt="pointerdown",ht="pointermove pointerup pointercancel";!B&&v.MSPointerEvent&&!v.PointerEvent&&(gt="MSPointerDown",ht="MSPointerMove MSPointerUp MSPointerCancel");function Et(){this.evEl=gt,this.evWin=ht,dt.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}ke(Et,dt,{handler:function(je){var wt=this.store,nr=!1,en=je.type.toLowerCase().replace("ms",""),Dn=Ge[en],Ai=et[je.pointerType]||je.pointerType,na=Ai==$r,Aa=he(wt,je.pointerId,"pointerId");Dn&cr&&(je.button===0||na)?Aa<0&&(wt.push(je),Aa=wt.length-1):Dn&(Qn|mn)&&(nr=!0),!(Aa<0)&&(wt[Aa]=je,this.callback(this.manager,Dn,{pointers:wt,changedPointers:[je],pointerType:Ai,srcEvent:je}),nr&&wt.splice(Aa,1))}});var Zt={touchstart:cr,touchmove:Vr,touchend:Qn,touchcancel:mn},sr="touchstart",bt="touchstart touchmove touchend touchcancel";function Ft(){this.evTarget=sr,this.evWin=bt,this.started=!1,dt.apply(this,arguments)}ke(Ft,dt,{handler:function(je){var wt=Zt[je.type];if(wt===cr&&(this.started=!0),!!this.started){var nr=zr.call(this,je,wt);wt&(Qn|mn)&&nr[0].length-nr[1].length===0&&(this.started=!1),this.callback(this.manager,wt,{pointers:nr[0],changedPointers:nr[1],pointerType:$r,srcEvent:je})}}});function zr(ge,je){var wt=ye(ge.touches),nr=ye(ge.changedTouches);return je&(Qn|mn)&&(wt=se(wt.concat(nr),"identifier",!0)),[wt,nr]}var Jn={touchstart:cr,touchmove:Vr,touchend:Qn,touchcancel:mn},yn="touchstart touchmove touchend touchcancel";function tn(){this.evTarget=yn,this.targetIds={},dt.apply(this,arguments)}ke(tn,dt,{handler:function(je){var wt=Jn[je.type],nr=ni.call(this,je,wt);!nr||this.callback(this.manager,wt,{pointers:nr[0],changedPointers:nr[1],pointerType:$r,srcEvent:je})}});function ni(ge,je){var wt=ye(ge.touches),nr=this.targetIds;if(je&(cr|Vr)&&wt.length===1)return nr[wt[0].identifier]=!0,[wt,wt];var en,Dn,Ai=ye(ge.changedTouches),na=[],Aa=this.target;if(Dn=wt.filter(function(Ta){return mt(Ta.target,Aa)}),je===cr)for(en=0;en<Dn.length;)nr[Dn[en].identifier]=!0,en++;for(en=0;en<Ai.length;)nr[Ai[en].identifier]&&na.push(Ai[en]),je&(Qn|mn)&&delete nr[Ai[en].identifier],en++;if(!!na.length)return[se(Dn.concat(na),"identifier",!0),na]}var ta=2500,fa=25;function Mr(){dt.apply(this,arguments);var ge=we(this.handler,this);this.touch=new tn(this.manager,ge),this.mouse=new Ti(this.manager,ge),this.primaryTouch=null,this.lastTouches=[]}ke(Mr,dt,{handler:function(je,wt,nr){var en=nr.pointerType==$r,Dn=nr.pointerType==sn;if(!(Dn&&nr.sourceCapabilities&&nr.sourceCapabilities.firesTouchEvents)){if(en)Wr.call(this,wt,nr);else if(Dn&&Wi.call(this,nr))return;this.callback(je,wt,nr)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});function Wr(ge,je){ge&cr?(this.primaryTouch=je.changedPointers[0].identifier,Zi.call(this,je)):ge&(Qn|mn)&&Zi.call(this,je)}function Zi(ge){var je=ge.changedPointers[0];if(je.identifier===this.primaryTouch){var wt={x:je.clientX,y:je.clientY};this.lastTouches.push(wt);var nr=this.lastTouches,en=function(){var Dn=nr.indexOf(wt);Dn>-1&&nr.splice(Dn,1)};setTimeout(en,ta)}}function Wi(ge){for(var je=ge.srcEvent.clientX,wt=ge.srcEvent.clientY,nr=0;nr<this.lastTouches.length;nr++){var en=this.lastTouches[nr],Dn=Math.abs(je-en.x),Ai=Math.abs(wt-en.y);if(Dn<=fa&&Ai<=fa)return!0}return!1}var xo=B?A:Ne(Z.style,"touchAction"),ua=xo!==A,Ur="compute",Jr="auto",Eo="manipulation",Fo="none",So="pan-x",Xa="pan-y",Ko=jn();function No(ge,je){this.manager=ge,this.set(je)}No.prototype={set:function(ge){ge==Ur&&(ge=this.compute()),ua&&this.manager.element.style&&Ko[ge]&&(this.manager.element.style[xo]=ge),this.actions=ge.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var ge=[];return pe(this.manager.recognizers,function(je){Me(je.options.enable,[je])&&(ge=ge.concat(je.getTouchAction()))}),ui(ge.join(" "))},preventDefaults:function(ge){var je=ge.srcEvent,wt=ge.offsetDirection;if(this.manager.session.prevented){je.preventDefault();return}var nr=this.actions,en=ie(nr,Fo)&&!Ko[Fo],Dn=ie(nr,Xa)&&!Ko[Xa],Ai=ie(nr,So)&&!Ko[So];if(en){var na=ge.pointers.length===1,Aa=ge.distance<2,Ta=ge.deltaTime<250;if(na&&Aa&&Ta)return}if(!(Ai&&Dn)&&(en||Dn&&wt&me||Ai&&wt&ne))return this.preventSrc(je)},preventSrc:function(ge){this.manager.session.prevented=!0,ge.preventDefault()}};function ui(ge){if(ie(ge,Fo))return Fo;var je=ie(ge,So),wt=ie(ge,Xa);return je&&wt?Fo:je||wt?je?So:Xa:ie(ge,Eo)?Eo:Jr}function jn(){if(!ua)return!1;var ge={};if(B)return ge;var je=v.CSS&&v.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(wt){ge[wt]=je?v.CSS.supports("touch-action",wt):!0}),ge}var rr=1,ps=2,er=4,$s=8,Es=$s,Os=16,xu=32;function bo(ge){this.options=xe({},this.defaults,ge||{}),this.id=Fe(),this.manager=null,this.options.enable=Xe(this.options.enable,!0),this.state=rr,this.simultaneous={},this.requireFail=[]}bo.prototype={defaults:{},set:function(ge){return xe(this.options,ge),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(ge){if(de(ge,"recognizeWith",this))return this;var je=this.simultaneous;return ge=Xs(ge,this),je[ge.id]||(je[ge.id]=ge,ge.recognizeWith(this)),this},dropRecognizeWith:function(ge){return de(ge,"dropRecognizeWith",this)?this:(ge=Xs(ge,this),delete this.simultaneous[ge.id],this)},requireFailure:function(ge){if(de(ge,"requireFailure",this))return this;var je=this.requireFail;return ge=Xs(ge,this),he(je,ge)===-1&&(je.push(ge),ge.requireFailure(this)),this},dropRequireFailure:function(ge){if(de(ge,"dropRequireFailure",this))return this;ge=Xs(ge,this);var je=he(this.requireFail,ge);return je>-1&&this.requireFail.splice(je,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(ge){return!!this.simultaneous[ge.id]},emit:function(ge){var je=this,wt=this.state;function nr(en){je.manager.emit(en,ge)}wt<$s&&nr(je.options.event+ic(wt)),nr(je.options.event),ge.additionalEvent&&nr(ge.additionalEvent),wt>=$s&&nr(je.options.event+ic(wt))},tryEmit:function(ge){if(this.canEmit())return this.emit(ge);this.state=xu},canEmit:function(){for(var ge=0;ge<this.requireFail.length;){if(!(this.requireFail[ge].state&(xu|rr)))return!1;ge++}return!0},recognize:function(ge){var je=xe({},ge);if(!Me(this.options.enable,[this,je])){this.reset(),this.state=xu;return}this.state&(Es|Os|xu)&&(this.state=rr),this.state=this.process(je),this.state&(ps|er|$s|Os)&&this.tryEmit(je)},process:function(ge){},getTouchAction:function(){},reset:function(){}};function ic(ge){return ge&Os?"cancel":ge&$s?"end":ge&er?"move":ge&ps?"start":""}function Ru(ge){return ge==ft?"down":ge==kr?"up":ge==Yr?"left":ge==Fr?"right":""}function Xs(ge,je){var wt=je.manager;return wt?wt.get(ge):ge}function Ys(){bo.apply(this,arguments)}ke(Ys,bo,{defaults:{pointers:1},attrTest:function(ge){var je=this.options.pointers;return je===0||ge.pointers.length===je},process:function(ge){var je=this.state,wt=ge.eventType,nr=je&(ps|er),en=this.attrTest(ge);return nr&&(wt&mn||!en)?je|Os:nr||en?wt&Qn?je|$s:je&ps?je|er:ps:xu}});function rs(){Ys.apply(this,arguments),this.pX=null,this.pY=null}ke(rs,Ys,{defaults:{event:"pan",threshold:10,pointers:1,direction:fe},getTouchAction:function(){var ge=this.options.direction,je=[];return ge&me&&je.push(Xa),ge&ne&&je.push(So),je},directionTest:function(ge){var je=this.options,wt=!0,nr=ge.distance,en=ge.direction,Dn=ge.deltaX,Ai=ge.deltaY;return en&je.direction||(je.direction&me?(en=Dn===0?_n:Dn<0?Yr:Fr,wt=Dn!=this.pX,nr=Math.abs(ge.deltaX)):(en=Ai===0?_n:Ai<0?kr:ft,wt=Ai!=this.pY,nr=Math.abs(ge.deltaY))),ge.direction=en,wt&&nr>je.threshold&&en&je.direction},attrTest:function(ge){return Ys.prototype.attrTest.call(this,ge)&&(this.state&ps||!(this.state&ps)&&this.directionTest(ge))},emit:function(ge){this.pX=ge.deltaX,this.pY=ge.deltaY;var je=Ru(ge.direction);je&&(ge.additionalEvent=this.options.event+je),this._super.emit.call(this,ge)}});function au(){Ys.apply(this,arguments)}ke(au,Ys,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[Fo]},attrTest:function(ge){return this._super.attrTest.call(this,ge)&&(Math.abs(ge.scale-1)>this.options.threshold||this.state&ps)},emit:function(ge){if(ge.scale!==1){var je=ge.scale<1?"in":"out";ge.additionalEvent=this.options.event+je}this._super.emit.call(this,ge)}});function Tu(){bo.apply(this,arguments),this._timer=null,this._input=null}ke(Tu,bo,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return[Jr]},process:function(ge){var je=this.options,wt=ge.pointers.length===je.pointers,nr=ge.distance<je.threshold,en=ge.deltaTime>je.time;if(this._input=ge,!nr||!wt||ge.eventType&(Qn|mn)&&!en)this.reset();else if(ge.eventType&cr)this.reset(),this._timer=be(function(){this.state=Es,this.tryEmit()},je.time,this);else if(ge.eventType&Qn)return Es;return xu},reset:function(){clearTimeout(this._timer)},emit:function(ge){this.state===Es&&(ge&&ge.eventType&Qn?this.manager.emit(this.options.event+"up",ge):(this._input.timeStamp=le(),this.manager.emit(this.options.event,this._input)))}});function Cl(){Ys.apply(this,arguments)}ke(Cl,Ys,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[Fo]},attrTest:function(ge){return this._super.attrTest.call(this,ge)&&(Math.abs(ge.rotation)>this.options.threshold||this.state&ps)}});function hu(){Ys.apply(this,arguments)}ke(hu,Ys,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:me|ne,pointers:1},getTouchAction:function(){return rs.prototype.getTouchAction.call(this)},attrTest:function(ge){var je=this.options.direction,wt;return je&(me|ne)?wt=ge.overallVelocity:je&me?wt=ge.overallVelocityX:je&ne&&(wt=ge.overallVelocityY),this._super.attrTest.call(this,ge)&&je&ge.offsetDirection&&ge.distance>this.options.threshold&&ge.maxPointers==this.options.pointers&&te(wt)>this.options.velocity&&ge.eventType&Qn},emit:function(ge){var je=Ru(ge.offsetDirection);je&&this.manager.emit(this.options.event+je,ge),this.manager.emit(this.options.event,ge)}});function ou(){bo.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}ke(ou,bo,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[Eo]},process:function(ge){var je=this.options,wt=ge.pointers.length===je.pointers,nr=ge.distance<je.threshold,en=ge.deltaTime<je.time;if(this.reset(),ge.eventType&cr&&this.count===0)return this.failTimeout();if(nr&&en&&wt){if(ge.eventType!=Qn)return this.failTimeout();var Dn=this.pTime?ge.timeStamp-this.pTime<je.interval:!0,Ai=!this.pCenter||Gt(this.pCenter,ge.center)<je.posThreshold;this.pTime=ge.timeStamp,this.pCenter=ge.center,!Ai||!Dn?this.count=1:this.count+=1,this._input=ge;var na=this.count%je.taps;if(na===0)return this.hasRequireFailures()?(this._timer=be(function(){this.state=Es,this.tryEmit()},je.interval,this),ps):Es}return xu},failTimeout:function(){return this._timer=be(function(){this.state=xu},this.options.interval,this),xu},reset:function(){clearTimeout(this._timer)},emit:function(){this.state==Es&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}});function ss(ge,je){return je=je||{},je.recognizers=Xe(je.recognizers,ss.defaults.preset),new Ks(ge,je)}ss.VERSION="2.0.7",ss.defaults={domEvents:!1,touchAction:Ur,enable:!0,inputTarget:null,inputClass:null,preset:[[Cl,{enable:!1}],[au,{enable:!1},["rotate"]],[hu,{direction:me}],[rs,{direction:me},["swipe"]],[ou],[ou,{event:"doubletap",taps:2},["tap"]],[Tu]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};var nu=1,Pu=2;function Ks(ge,je){this.options=xe({},ss.defaults,je||{}),this.options.inputTarget=this.options.inputTarget||ge,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=ge,this.input=Jt(this),this.touchAction=new No(this,this.options.touchAction),$u(this,!0),pe(this.options.recognizers,function(wt){var nr=this.add(new wt[0](wt[1]));wt[2]&&nr.recognizeWith(wt[2]),wt[3]&&nr.requireFailure(wt[3])},this)}Ks.prototype={set:function(ge){return xe(this.options,ge),ge.touchAction&&this.touchAction.update(),ge.inputTarget&&(this.input.destroy(),this.input.target=ge.inputTarget,this.input.init()),this},stop:function(ge){this.session.stopped=ge?Pu:nu},recognize:function(ge){var je=this.session;if(!je.stopped){this.touchAction.preventDefaults(ge);var wt,nr=this.recognizers,en=je.curRecognizer;(!en||en&&en.state&Es)&&(en=je.curRecognizer=null);for(var Dn=0;Dn<nr.length;)wt=nr[Dn],je.stopped!==Pu&&(!en||wt==en||wt.canRecognizeWith(en))?wt.recognize(ge):wt.reset(),!en&&wt.state&(ps|er|$s)&&(en=je.curRecognizer=wt),Dn++}},get:function(ge){if(ge instanceof bo)return ge;for(var je=this.recognizers,wt=0;wt<je.length;wt++)if(je[wt].options.event==ge)return je[wt];return null},add:function(ge){if(de(ge,"add",this))return this;var je=this.get(ge.options.event);return je&&this.remove(je),this.recognizers.push(ge),ge.manager=this,this.touchAction.update(),ge},remove:function(ge){if(de(ge,"remove",this))return this;if(ge=this.get(ge),ge){var je=this.recognizers,wt=he(je,ge);wt!==-1&&(je.splice(wt,1),this.touchAction.update())}return this},on:function(ge,je){if(ge!==A&&je!==A){var wt=this.handlers;return pe(oe(ge),function(nr){wt[nr]=wt[nr]||[],wt[nr].push(je)}),this}},off:function(ge,je){if(ge!==A){var wt=this.handlers;return pe(oe(ge),function(nr){je?wt[nr]&&wt[nr].splice(he(wt[nr],je),1):delete wt[nr]}),this}},emit:function(ge,je){this.options.domEvents&&qe(ge,je);var wt=this.handlers[ge]&&this.handlers[ge].slice();if(!(!wt||!wt.length)){je.type=ge,je.preventDefault=function(){je.srcEvent.preventDefault()};for(var nr=0;nr<wt.length;)wt[nr](je),nr++}},destroy:function(){this.element&&$u(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}};function $u(ge,je){var wt=ge.element;if(!!wt.style){var nr;pe(ge.options.cssProps,function(en,Dn){nr=Ne(wt.style,Dn),je?(ge.oldCssProps[nr]=wt.style[nr],wt.style[nr]=en):wt.style[nr]=ge.oldCssProps[nr]||""}),je||(ge.oldCssProps={})}}function qe(ge,je){if(!B){var wt=l.createEvent("Event");wt.initEvent(ge,!0,!0),wt.gesture=je,je.target.dispatchEvent(wt)}}if(!B){xe(ss,{INPUT_START:cr,INPUT_MOVE:Vr,INPUT_END:Qn,INPUT_CANCEL:mn,STATE_POSSIBLE:rr,STATE_BEGAN:ps,STATE_CHANGED:er,STATE_ENDED:$s,STATE_RECOGNIZED:Es,STATE_CANCELLED:Os,STATE_FAILED:xu,DIRECTION_NONE:_n,DIRECTION_LEFT:Yr,DIRECTION_RIGHT:Fr,DIRECTION_UP:kr,DIRECTION_DOWN:ft,DIRECTION_HORIZONTAL:me,DIRECTION_VERTICAL:ne,DIRECTION_ALL:fe,Manager:Ks,Input:dt,TouchAction:No,TouchInput:tn,MouseInput:Ti,PointerEventInput:Et,TouchMouseInput:Mr,SingleTouchInput:Ft,Recognizer:bo,AttrRecognizer:Ys,Tap:ou,Pan:rs,Swipe:hu,Pinch:au,Rotate:Cl,Press:Tu,on:Ke,off:At,each:pe,merge:K,extend:Ve,assign:xe,inherit:ke,bindFn:we,prefixed:Ne});var Bt=typeof window!="undefined"?window:typeof self!="undefined"?self:{};Bt.Hammer=ss,w=function(){return ss}.call(F,c,F,U),w!==A&&(U.exports=w)}})(typeof window!="undefined"?window:{console:null,MSPointerEvent:null,PointerEvent:null,CSS:null},document,"Hammer")},92593:function(U,F,c){(function(w,v){U.exports=v(c(87984))})(this,function(w){"use strict";var v=function(Te){return Te instanceof Uint8Array||Te instanceof Uint16Array||Te instanceof Uint32Array||Te instanceof Int8Array||Te instanceof Int16Array||Te instanceof Int32Array||Te instanceof Float32Array||Te instanceof Float64Array||Te instanceof Uint8ClampedArray},l=function(Te,Qe){for(var pt=Object.keys(Qe),Vt=0;Vt<pt.length;++Vt)Te[pt[Vt]]=Qe[pt[Vt]];return Te},R=`
`;function A(Te){return typeof atob!="undefined"?atob(Te):"base64:"+Te}function D(Te){var Qe=new Error("(regl) "+Te);throw console.error(Qe),Qe}function k(Te,Qe){Te||D(Qe)}function B(Te){return Te?": "+Te:""}function z(Te,Qe,pt){Te in Qe||D("unknown parameter ("+Te+")"+B(pt)+". possible values: "+Object.keys(Qe).join())}function Z(Te,Qe){v(Te)||D("invalid parameter type"+B(Qe)+". must be a typed array")}function W(Te,Qe){switch(Qe){case"number":return typeof Te=="number";case"object":return typeof Te=="object";case"string":return typeof Te=="string";case"boolean":return typeof Te=="boolean";case"function":return typeof Te=="function";case"undefined":return typeof Te=="undefined";case"symbol":return typeof Te=="symbol"}}function Y(Te,Qe,pt){W(Te,Qe)||D("invalid parameter type"+B(pt)+". expected "+Qe+", got "+typeof Te)}function te(Te,Qe){Te>=0&&(Te|0)===Te||D("invalid parameter type, ("+Te+")"+B(Qe)+". must be a nonnegative integer")}function le(Te,Qe,pt){Qe.indexOf(Te)<0&&D("invalid value"+B(pt)+". must be one of: "+Qe)}var be=["gl","canvas","container","attributes","pixelRatio","extensions","optionalExtensions","profile","onDone"];function de(Te){Object.keys(Te).forEach(function(Qe){be.indexOf(Qe)<0&&D('invalid regl constructor argument "'+Qe+'". must be one of '+be)})}function pe(Te,Qe){for(Te=Te+"";Te.length<Qe;)Te=" "+Te;return Te}function Oe(){this.name="unknown",this.lines=[],this.index={},this.hasErrors=!1}function xe(Te,Qe){this.number=Te,this.line=Qe,this.errors=[]}function Ve(Te,Qe,pt){this.file=Te,this.line=Qe,this.message=pt}function K(){var Te=new Error,Qe=(Te.stack||Te).toString(),pt=/compileProcedure.*\n\s*at.*\((.*)\)/.exec(Qe);if(pt)return pt[1];var Vt=/compileProcedure.*\n\s*at\s+(.*)(\n|$)/.exec(Qe);return Vt?Vt[1]:"unknown"}function ke(){var Te=new Error,Qe=(Te.stack||Te).toString(),pt=/at REGLCommand.*\n\s+at.*\((.*)\)/.exec(Qe);if(pt)return pt[1];var Vt=/at REGLCommand.*\n\s+at\s+(.*)\n/.exec(Qe);return Vt?Vt[1]:"unknown"}function we(Te,Qe){var pt=Te.split(`
`),Vt=1,Sr=0,dr={unknown:new Oe,0:new Oe};dr.unknown.name=dr[0].name=Qe||K(),dr.unknown.lines.push(new xe(0,""));for(var Ar=0;Ar<pt.length;++Ar){var hn=pt[Ar],Tn=/^\s*#\s*(\w+)\s+(.+)\s*$/.exec(hn);if(Tn)switch(Tn[1]){case"line":var Hn=/(\d+)(\s+\d+)?/.exec(Tn[2]);Hn&&(Vt=Hn[1]|0,Hn[2]&&(Sr=Hn[2]|0,Sr in dr||(dr[Sr]=new Oe)));break;case"define":var Bn=/SHADER_NAME(_B64)?\s+(.*)$/.exec(Tn[2]);Bn&&(dr[Sr].name=Bn[1]?A(Bn[2]):Bn[2]);break}dr[Sr].lines.push(new xe(Vt++,hn))}return Object.keys(dr).forEach(function(bn){var En=dr[bn];En.lines.forEach(function(Mn){En.index[Mn.number]=Mn})}),dr}function Me(Te){var Qe=[];return Te.split(`
`).forEach(function(pt){if(!(pt.length<5)){var Vt=/^ERROR:\s+(\d+):(\d+):\s*(.*)$/.exec(pt);Vt?Qe.push(new Ve(Vt[1]|0,Vt[2]|0,Vt[3].trim())):pt.length>0&&Qe.push(new Ve("unknown",0,pt))}}),Qe}function Xe(Te,Qe){Qe.forEach(function(pt){var Vt=Te[pt.file];if(Vt){var Sr=Vt.index[pt.line];if(Sr){Sr.errors.push(pt),Vt.hasErrors=!0;return}}Te.unknown.hasErrors=!0,Te.unknown.lines[0].errors.push(pt)})}function Ke(Te,Qe,pt,Vt,Sr){if(!Te.getShaderParameter(Qe,Te.COMPILE_STATUS)){var dr=Te.getShaderInfoLog(Qe),Ar=Vt===Te.FRAGMENT_SHADER?"fragment":"vertex";se(pt,"string",Ar+" shader source must be a string",Sr);var hn=we(pt,Sr),Tn=Me(dr);Xe(hn,Tn),Object.keys(hn).forEach(function(Hn){var Bn=hn[Hn];if(!Bn.hasErrors)return;var bn=[""],En=[""];function Mn(Un,Nr){bn.push(Un),En.push(Nr||"")}Mn("file number "+Hn+": "+Bn.name+`
`,"color:red;text-decoration:underline;font-weight:bold"),Bn.lines.forEach(function(Un){if(Un.errors.length>0){Mn(pe(Un.number,4)+"|  ","background-color:yellow; font-weight:bold"),Mn(Un.line+R,"color:red; background-color:yellow; font-weight:bold");var Nr=0;Un.errors.forEach(function(Er){var oi=Er.message,wi=/^\s*'(.*)'\s*:\s*(.*)$/.exec(oi);if(wi){var Wn=wi[1];switch(oi=wi[2],Wn){case"assign":Wn="=";break}Nr=Math.max(Un.line.indexOf(Wn,Nr),0)}else Nr=0;Mn(pe("| ",6)),Mn(pe("^^^",Nr+3)+R,"font-weight:bold"),Mn(pe("| ",6)),Mn(oi+R,"font-weight:bold")}),Mn(pe("| ",6)+R)}else Mn(pe(Un.number,4)+"|  "),Mn(Un.line+R,"color:red")}),typeof document!="undefined"&&!window.chrome?(En[0]=bn.join("%c"),console.log.apply(console,En)):console.log(bn.join(""))}),k.raise("Error compiling "+Ar+" shader, "+hn[0].name)}}function At(Te,Qe,pt,Vt,Sr){if(!Te.getProgramParameter(Qe,Te.LINK_STATUS)){var dr=Te.getProgramInfoLog(Qe),Ar=we(pt,Sr),hn=we(Vt,Sr),Tn='Error linking program with vertex shader, "'+hn[0].name+'", and fragment shader "'+Ar[0].name+'"';typeof document!="undefined"?console.log("%c"+Tn+R+"%c"+dr,"color:red;text-decoration:underline;font-weight:bold","color:red"):console.log(Tn+R+dr),k.raise(Tn)}}function mt(Te){Te._commandRef=K()}function ie(Te,Qe,pt,Vt){mt(Te);function Sr(Tn){return Tn?Vt.id(Tn):0}Te._fragId=Sr(Te.static.frag),Te._vertId=Sr(Te.static.vert);function dr(Tn,Hn){Object.keys(Hn).forEach(function(Bn){Tn[Vt.id(Bn)]=!0})}var Ar=Te._uniformSet={};dr(Ar,Qe.static),dr(Ar,Qe.dynamic);var hn=Te._attributeSet={};dr(hn,pt.static),dr(hn,pt.dynamic),Te._hasCount="count"in Te.static||"count"in Te.dynamic||"elements"in Te.static||"elements"in Te.dynamic}function oe(Te,Qe){var pt=ke();D(Te+" in command "+(Qe||K())+(pt==="unknown"?"":" called from "+pt))}function he(Te,Qe,pt){Te||oe(Qe,pt||K())}function ye(Te,Qe,pt,Vt){Te in Qe||oe("unknown parameter ("+Te+")"+B(pt)+". possible values: "+Object.keys(Qe).join(),Vt||K())}function se(Te,Qe,pt,Vt){W(Te,Qe)||oe("invalid parameter type"+B(pt)+". expected "+Qe+", got "+typeof Te,Vt||K())}function Ne(Te){Te()}function st(Te,Qe,pt){Te.texture?le(Te.texture._texture.internalformat,Qe,"unsupported texture format for attachment"):le(Te.renderbuffer._renderbuffer.format,pt,"unsupported renderbuffer format for attachment")}var Fe=33071,tt=9728,Wt=9984,Pr=9985,Qt=9986,xr=9987,$r=5120,Cr=5121,sn=5122,ot=5123,_r=5124,cr=5125,Vr=5126,Qn=32819,mn=32820,_n=33635,Yr=34042,Fr=36193,kr={};kr[$r]=kr[Cr]=1,kr[sn]=kr[ot]=kr[Fr]=kr[_n]=kr[Qn]=kr[mn]=2,kr[_r]=kr[cr]=kr[Vr]=kr[Yr]=4;function ft(Te,Qe){return Te===mn||Te===Qn||Te===_n?2:Te===Yr?4:kr[Te]*Qe}function me(Te){return!(Te&Te-1)&&!!Te}function ne(Te,Qe,pt){var Vt,Sr=Qe.width,dr=Qe.height,Ar=Qe.channels;k(Sr>0&&Sr<=pt.maxTextureSize&&dr>0&&dr<=pt.maxTextureSize,"invalid texture shape"),(Te.wrapS!==Fe||Te.wrapT!==Fe)&&k(me(Sr)&&me(dr),"incompatible wrap mode for texture, both width and height must be power of 2"),Qe.mipmask===1?Sr!==1&&dr!==1&&k(Te.minFilter!==Wt&&Te.minFilter!==Qt&&Te.minFilter!==Pr&&Te.minFilter!==xr,"min filter requires mipmap"):(k(me(Sr)&&me(dr),"texture must be a square power of 2 to support mipmapping"),k(Qe.mipmask===(Sr<<1)-1,"missing or incomplete mipmap data")),Qe.type===Vr&&(pt.extensions.indexOf("oes_texture_float_linear")<0&&k(Te.minFilter===tt&&Te.magFilter===tt,"filter not supported, must enable oes_texture_float_linear"),k(!Te.genMipmaps,"mipmap generation not supported with float textures"));var hn=Qe.images;for(Vt=0;Vt<16;++Vt)if(hn[Vt]){var Tn=Sr>>Vt,Hn=dr>>Vt;k(Qe.mipmask&1<<Vt,"missing mipmap data");var Bn=hn[Vt];if(k(Bn.width===Tn&&Bn.height===Hn,"invalid shape for mip images"),k(Bn.format===Qe.format&&Bn.internalformat===Qe.internalformat&&Bn.type===Qe.type,"incompatible type for mip image"),!Bn.compressed)if(Bn.data){var bn=Math.ceil(ft(Bn.type,Ar)*Tn/Bn.unpackAlignment)*Bn.unpackAlignment;k(Bn.data.byteLength===bn*Hn,"invalid data for image, buffer size is inconsistent with image format")}else Bn.element||Bn.copy}else Te.genMipmaps||k((Qe.mipmask&1<<Vt)===0,"extra mipmap data");Qe.compressed&&k(!Te.genMipmaps,"mipmap generation for compressed images not supported")}function fe(Te,Qe,pt,Vt){var Sr=Te.width,dr=Te.height,Ar=Te.channels;k(Sr>0&&Sr<=Vt.maxTextureSize&&dr>0&&dr<=Vt.maxTextureSize,"invalid texture shape"),k(Sr===dr,"cube map must be square"),k(Qe.wrapS===Fe&&Qe.wrapT===Fe,"wrap mode not supported by cube map");for(var hn=0;hn<pt.length;++hn){var Tn=pt[hn];k(Tn.width===Sr&&Tn.height===dr,"inconsistent cube map face shape"),Qe.genMipmaps&&(k(!Tn.compressed,"can not generate mipmap for compressed textures"),k(Tn.mipmask===1,"can not specify mipmaps and generate mipmaps"));for(var Hn=Tn.images,Bn=0;Bn<16;++Bn){var bn=Hn[Bn];if(bn){var En=Sr>>Bn,Mn=dr>>Bn;k(Tn.mipmask&1<<Bn,"missing mipmap data"),k(bn.width===En&&bn.height===Mn,"invalid shape for mip images"),k(bn.format===Te.format&&bn.internalformat===Te.internalformat&&bn.type===Te.type,"incompatible type for mip image"),bn.compressed||(bn.data?k(bn.data.byteLength===En*Mn*Math.max(ft(bn.type,Ar),bn.unpackAlignment),"invalid data for image, buffer size is inconsistent with image format"):bn.element||bn.copy)}}}}var Q=l(k,{optional:Ne,raise:D,commandRaise:oe,command:he,parameter:z,commandParameter:ye,constructor:de,type:Y,commandType:se,isTypedArray:Z,nni:te,oneOf:le,shaderError:Ke,linkError:At,callSite:ke,saveCommandRef:mt,saveDrawInfo:ie,framebufferFormat:st,guessCommand:K,texture2D:ne,textureCube:fe}),De=0,dt=0,Jt=5,it=6;function lt(Te,Qe){this.id=De++,this.type=Te,this.data=Qe}function qt(Te){return Te.replace(/\\/g,"\\\\").replace(/"/g,'\\"')}function pr(Te){if(Te.length===0)return[];var Qe=Te.charAt(0),pt=Te.charAt(Te.length-1);if(Te.length>1&&Qe===pt&&(Qe==='"'||Qe==="'"))return['"'+qt(Te.substr(1,Te.length-2))+'"'];var Vt=/\[(false|true|null|\d+|'[^']*'|"[^"]*")\]/.exec(Te);if(Vt)return pr(Te.substr(0,Vt.index)).concat(pr(Vt[1])).concat(pr(Te.substr(Vt.index+Vt[0].length)));var Sr=Te.split(".");if(Sr.length===1)return['"'+qt(Te)+'"'];for(var dr=[],Ar=0;Ar<Sr.length;++Ar)dr=dr.concat(pr(Sr[Ar]));return dr}function Hr(Te){return"["+pr(Te).join("][")+"]"}function Xr(Te,Qe){return new lt(Te,Hr(Qe+""))}function ce(Te){return typeof Te=="function"&&!Te._reglType||Te instanceof lt}function xt(Te,Qe){if(typeof Te=="function")return new lt(dt,Te);if(typeof Te=="number"||typeof Te=="boolean")return new lt(Jt,Te);if(Array.isArray(Te))return new lt(it,Te.map(function(pt,Vt){return xt(pt,Qe+"["+Vt+"]")}));if(Te instanceof lt)return Te;Q(!1,"invalid option type in uniform "+Qe)}var Gt={DynamicVariable:lt,define:Xr,isDynamic:ce,unbox:xt,accessor:Hr},Ir={next:typeof requestAnimationFrame=="function"?function(Te){return requestAnimationFrame(Te)}:function(Te){return setTimeout(Te,16)},cancel:typeof cancelAnimationFrame=="function"?function(Te){return cancelAnimationFrame(Te)}:clearTimeout},nn=typeof my!="undefined"&&!!my&&typeof my.showToast=="function"&&my.isFRM!==!0,zi=nn?function(){return+new Date}:typeof performance!="undefined"&&performance.now?function(){return performance.now()}:function(){return+new Date};function Ui(){var Te={"":0},Qe=[""];return{id:function(pt){var Vt=Te[pt];return Vt||(Vt=Te[pt]=Qe.length,Qe.push(pt),Vt)},str:function(pt){return Qe[pt]}}}function Pi(Te,Qe,pt){var Vt=document.createElement("canvas");l(Vt.style,{border:0,margin:0,padding:0,top:0,left:0,width:"100%",height:"100%"}),Te.appendChild(Vt),Te===document.body&&(Vt.style.position="absolute",l(Te.style,{margin:0,padding:0}));function Sr(){var hn=window.innerWidth,Tn=window.innerHeight;if(Te!==document.body){var Hn=Vt.getBoundingClientRect();hn=Hn.right-Hn.left,Tn=Hn.bottom-Hn.top}Vt.width=pt*hn,Vt.height=pt*Tn}var dr;Te!==document.body&&typeof ResizeObserver=="function"?(dr=new ResizeObserver(function(){setTimeout(Sr)}),dr.observe(Te)):window.addEventListener("resize",Sr,!1);function Ar(){dr?dr.disconnect():window.removeEventListener("resize",Sr),Te.removeChild(Vt)}return Sr(),{canvas:Vt,onDestroy:Ar}}function ka(Te,Qe){function pt(Vt){try{return Te.getContext(Vt,Qe)}catch(Sr){return null}}return pt("webgl")||pt("experimental-webgl")||pt("webgl-experimental")}function Ti(Te){return typeof Te.nodeName=="string"&&typeof Te.appendChild=="function"&&typeof Te.getBoundingClientRect=="function"}function Ge(Te){return typeof Te.drawArrays=="function"||typeof Te.drawElements=="function"}function et(Te){return typeof Te=="string"?Te.split():(Q(Array.isArray(Te),"invalid extension array"),Te)}function gt(Te){return typeof Te=="string"?(Q(typeof document!="undefined","not supported outside of DOM"),document.querySelector(Te)):Te}function ht(Te){var Qe=Te||{},pt,Vt,Sr,dr,Ar={},hn=[],Tn=[],Hn=typeof window=="undefined"?1:window.devicePixelRatio,Bn=!1,bn=function(Un){Un&&Q.raise(Un)},En=function(){};if(typeof Qe=="string"?(Q(typeof document!="undefined","selector queries only supported in DOM environments"),pt=document.querySelector(Qe),Q(pt,"invalid query string for element")):typeof Qe=="object"?Ti(Qe)?pt=Qe:Ge(Qe)?(dr=Qe,Sr=dr.canvas):(Q.constructor(Qe),"gl"in Qe?dr=Qe.gl:"canvas"in Qe?Sr=gt(Qe.canvas):"container"in Qe&&(Vt=gt(Qe.container)),"attributes"in Qe&&(Ar=Qe.attributes,Q.type(Ar,"object","invalid context attributes")),"extensions"in Qe&&(hn=et(Qe.extensions)),"optionalExtensions"in Qe&&(Tn=et(Qe.optionalExtensions)),"onDone"in Qe&&(Q.type(Qe.onDone,"function","invalid or missing onDone callback"),bn=Qe.onDone),"profile"in Qe&&(Bn=!!Qe.profile),"pixelRatio"in Qe&&(Hn=+Qe.pixelRatio,Q(Hn>0,"invalid pixel ratio"))):Q.raise("invalid arguments to regl"),pt&&(pt.nodeName.toLowerCase()==="canvas"?Sr=pt:Vt=pt),!dr){if(!Sr){Q(typeof document!="undefined","must manually specify webgl context outside of DOM environments");var Mn=Pi(Vt||document.body,bn,Hn);if(!Mn)return null;Sr=Mn.canvas,En=Mn.onDestroy}Ar.premultipliedAlpha===void 0&&(Ar.premultipliedAlpha=!0),dr=ka(Sr,Ar)}return dr?{gl:dr,canvas:Sr,container:Vt,extensions:hn,optionalExtensions:Tn,pixelRatio:Hn,profile:Bn,onDone:bn,onDestroy:En}:(En(),bn("webgl not supported, try upgrading your browser or graphics drivers http://get.webgl.org"),null)}function Et(Te,Qe){var pt={};function Vt(hn){Q.type(hn,"string","extension name must be string");var Tn=hn.toLowerCase(),Hn;try{Hn=pt[Tn]=Sr(hn)}catch(Bn){}return!!Hn}function Sr(hn){return Te.getExtension(hn)?Te.getExtension(hn):Te.getExtension(hn.toLowerCase())?Te.getExtension(hn.toLowerCase()):null}for(var dr=0;dr<Qe.extensions.length;++dr){var Ar=Qe.extensions[dr];if(!Vt(Ar))return Qe.onDestroy(),Qe.onDone('"'+Ar+'" extension is not supported by the current WebGL context, try upgrading your system or a different browser'),null}return Qe.optionalExtensions.forEach(Vt),{extensions:pt,restore:function(){Object.keys(pt).forEach(function(hn){if(pt[hn]&&!Vt(hn))throw new Error("(regl): error restoring extension "+hn)})}}}function Zt(Te,Qe){for(var pt=Array(Te),Vt=0;Vt<Te;++Vt)pt[Vt]=Qe(Vt);return pt}var sr=5120,bt=5121,Ft=5122,zr=5123,Jn=5124,yn=5125,tn=5126;function ni(Te){for(var Qe=16;Qe<=268435456;Qe*=16)if(Te<=Qe)return Qe;return 0}function ta(Te){var Qe,pt;return Qe=(Te>65535)<<4,Te>>>=Qe,pt=(Te>255)<<3,Te>>>=pt,Qe|=pt,pt=(Te>15)<<2,Te>>>=pt,Qe|=pt,pt=(Te>3)<<1,Te>>>=pt,Qe|=pt,Qe|Te>>1}function fa(){var Te=Zt(8,function(){return[]});function Qe(dr){var Ar=ni(dr),hn=Te[ta(Ar)>>2];return hn.length>0?hn.pop():new ArrayBuffer(Ar)}function pt(dr){Te[ta(dr.byteLength)>>2].push(dr)}function Vt(dr,Ar){var hn=null;switch(dr){case sr:hn=new Int8Array(Qe(Ar),0,Ar);break;case bt:hn=new Uint8Array(Qe(Ar),0,Ar);break;case Ft:hn=new Int16Array(Qe(2*Ar),0,Ar);break;case zr:hn=new Uint16Array(Qe(2*Ar),0,Ar);break;case Jn:hn=new Int32Array(Qe(4*Ar),0,Ar);break;case yn:hn=new Uint32Array(Qe(4*Ar),0,Ar);break;case tn:hn=new Float32Array(Qe(4*Ar),0,Ar);break;default:return null}return hn.length!==Ar?hn.subarray(0,Ar):hn}function Sr(dr){pt(dr.buffer)}return{alloc:Qe,free:pt,allocType:Vt,freeType:Sr}}var Mr=fa();Mr.zero=fa();var Wr=3408,Zi=3410,Wi=3411,xo=3412,ua=3413,Ur=3414,Jr=3415,Eo=33901,Fo=33902,So=3379,Xa=3386,Ko=34921,No=36347,ui=36348,jn=35661,rr=35660,ps=34930,er=36349,$s=34076,Es=34024,Os=7936,xu=7937,bo=7938,ic=35724,Ru=34047,Xs=36063,Ys=34852,rs=3553,au=34067,Tu=34069,Cl=33984,hu=6408,ou=5126,ss=5121,nu=36160,Pu=36053,Ks=36064,$u=16384,qe=function(Te,Qe){var pt=1;Qe.ext_texture_filter_anisotropic&&(pt=Te.getParameter(Ru));var Vt=1,Sr=1;Qe.webgl_draw_buffers&&(Vt=Te.getParameter(Ys),Sr=Te.getParameter(Xs));var dr=!!Qe.oes_texture_float;if(dr){var Ar=Te.createTexture();Te.bindTexture(rs,Ar),Te.texImage2D(rs,0,hu,1,1,0,hu,ou,null);var hn=Te.createFramebuffer();if(Te.bindFramebuffer(nu,hn),Te.framebufferTexture2D(nu,Ks,rs,Ar,0),Te.bindTexture(rs,null),Te.checkFramebufferStatus(nu)!==Pu)dr=!1;else{Te.viewport(0,0,1,1),Te.clearColor(1,0,0,1),Te.clear($u);var Tn=Mr.allocType(ou,4);Te.readPixels(0,0,1,1,hu,ou,Tn),Te.getError()?dr=!1:(Te.deleteFramebuffer(hn),Te.deleteTexture(Ar),dr=Tn[0]===1),Mr.freeType(Tn)}}var Hn=typeof navigator!="undefined"&&(/MSIE/.test(navigator.userAgent)||/Trident\//.test(navigator.appVersion)||/Edge/.test(navigator.userAgent)),Bn=!0;if(!Hn){var bn=Te.createTexture(),En=Mr.allocType(ss,36);Te.activeTexture(Cl),Te.bindTexture(au,bn),Te.texImage2D(Tu,0,hu,3,3,0,hu,ss,En),Mr.freeType(En),Te.bindTexture(au,null),Te.deleteTexture(bn),Bn=!Te.getError()}return{colorBits:[Te.getParameter(Zi),Te.getParameter(Wi),Te.getParameter(xo),Te.getParameter(ua)],depthBits:Te.getParameter(Ur),stencilBits:Te.getParameter(Jr),subpixelBits:Te.getParameter(Wr),extensions:Object.keys(Qe).filter(function(Mn){return!!Qe[Mn]}),maxAnisotropic:pt,maxDrawbuffers:Vt,maxColorAttachments:Sr,pointSizeDims:Te.getParameter(Eo),lineWidthDims:Te.getParameter(Fo),maxViewportDims:Te.getParameter(Xa),maxCombinedTextureUnits:Te.getParameter(jn),maxCubeMapSize:Te.getParameter($s),maxRenderbufferSize:Te.getParameter(Es),maxTextureUnits:Te.getParameter(ps),maxTextureSize:Te.getParameter(So),maxAttributes:Te.getParameter(Ko),maxVertexUniforms:Te.getParameter(No),maxVertexTextureUnits:Te.getParameter(rr),maxVaryingVectors:Te.getParameter(ui),maxFragmentUniforms:Te.getParameter(er),glsl:Te.getParameter(ic),renderer:Te.getParameter(xu),vendor:Te.getParameter(Os),version:Te.getParameter(bo),readFloat:dr,npotTextureCube:Bn}};function Bt(Te){return!!Te&&typeof Te=="object"&&Array.isArray(Te.shape)&&Array.isArray(Te.stride)&&typeof Te.offset=="number"&&Te.shape.length===Te.stride.length&&(Array.isArray(Te.data)||v(Te.data))}var ge=function(Te){return Object.keys(Te).map(function(Qe){return Te[Qe]})},je={shape:na,flatten:Ai};function wt(Te,Qe,pt){for(var Vt=0;Vt<Qe;++Vt)pt[Vt]=Te[Vt]}function nr(Te,Qe,pt,Vt){for(var Sr=0,dr=0;dr<Qe;++dr)for(var Ar=Te[dr],hn=0;hn<pt;++hn)Vt[Sr++]=Ar[hn]}function en(Te,Qe,pt,Vt,Sr,dr){for(var Ar=dr,hn=0;hn<Qe;++hn)for(var Tn=Te[hn],Hn=0;Hn<pt;++Hn)for(var Bn=Tn[Hn],bn=0;bn<Vt;++bn)Sr[Ar++]=Bn[bn]}function Dn(Te,Qe,pt,Vt,Sr){for(var dr=1,Ar=pt+1;Ar<Qe.length;++Ar)dr*=Qe[Ar];var hn=Qe[pt];if(Qe.length-pt===4){var Tn=Qe[pt+1],Hn=Qe[pt+2],Bn=Qe[pt+3];for(Ar=0;Ar<hn;++Ar)en(Te[Ar],Tn,Hn,Bn,Vt,Sr),Sr+=dr}else for(Ar=0;Ar<hn;++Ar)Dn(Te[Ar],Qe,pt+1,Vt,Sr),Sr+=dr}function Ai(Te,Qe,pt,Vt){var Sr=1;if(Qe.length)for(var dr=0;dr<Qe.length;++dr)Sr*=Qe[dr];else Sr=0;var Ar=Vt||Mr.allocType(pt,Sr);switch(Qe.length){case 0:break;case 1:wt(Te,Qe[0],Ar);break;case 2:nr(Te,Qe[0],Qe[1],Ar);break;case 3:en(Te,Qe[0],Qe[1],Qe[2],Ar,0);break;default:Dn(Te,Qe,0,Ar,0)}return Ar}function na(Te){for(var Qe=[],pt=Te;pt.length;pt=pt[0])Qe.push(pt.length);return Qe}var Aa={"[object Int8Array]":5120,"[object Int16Array]":5122,"[object Int32Array]":5124,"[object Uint8Array]":5121,"[object Uint8ClampedArray]":5121,"[object Uint16Array]":5123,"[object Uint32Array]":5125,"[object Float32Array]":5126,"[object Float64Array]":5121,"[object ArrayBuffer]":5121},Ta=5120,Wa=5122,Co=5124,lo=5121,Vo=5123,gs=5125,su=5126,Zu=5126,Ss={int8:Ta,int16:Wa,int32:Co,uint8:lo,uint16:Vo,uint32:gs,float:su,float32:Zu},Us=35048,ys=35040,Oo={dynamic:Us,stream:ys,static:35044},qo=je.flatten,Rc=je.shape,Hl=35044,sf=35040,Bf=5121,zf=5126,ac=[];ac[5120]=1,ac[5122]=2,ac[5124]=4,ac[5121]=1,ac[5123]=2,ac[5125]=4,ac[5126]=4;function dc(Te){return Aa[Object.prototype.toString.call(Te)]|0}function O(Te,Qe){for(var pt=0;pt<Qe.length;++pt)Te[pt]=Qe[pt]}function q(Te,Qe,pt,Vt,Sr,dr,Ar){for(var hn=0,Tn=0;Tn<pt;++Tn)for(var Hn=0;Hn<Vt;++Hn)Te[hn++]=Qe[Sr*Tn+dr*Hn+Ar]}function Le(Te,Qe,pt,Vt){var Sr=0,dr={};function Ar(Nr){this.id=Sr++,this.buffer=Te.createBuffer(),this.type=Nr,this.usage=Hl,this.byteLength=0,this.dimension=1,this.dtype=Bf,this.persistentData=null,pt.profile&&(this.stats={size:0})}Ar.prototype.bind=function(){Te.bindBuffer(this.type,this.buffer)},Ar.prototype.destroy=function(){En(this)};var hn=[];function Tn(Nr,Er){var oi=hn.pop();return oi||(oi=new Ar(Nr)),oi.bind(),bn(oi,Er,sf,0,1,!1),oi}function Hn(Nr){hn.push(Nr)}function Bn(Nr,Er,oi){Nr.byteLength=Er.byteLength,Te.bufferData(Nr.type,Er,oi)}function bn(Nr,Er,oi,wi,Wn,ci){var Mi;if(Nr.usage=oi,Array.isArray(Er)){if(Nr.dtype=wi||zf,Er.length>0){var Xi;if(Array.isArray(Er[0])){Mi=Rc(Er);for(var Rn=1,kn=1;kn<Mi.length;++kn)Rn*=Mi[kn];Nr.dimension=Rn,Xi=qo(Er,Mi,Nr.dtype),Bn(Nr,Xi,oi),ci?Nr.persistentData=Xi:Mr.freeType(Xi)}else if(typeof Er[0]=="number"){Nr.dimension=Wn;var Si=Mr.allocType(Nr.dtype,Er.length);O(Si,Er),Bn(Nr,Si,oi),ci?Nr.persistentData=Si:Mr.freeType(Si)}else v(Er[0])?(Nr.dimension=Er[0].length,Nr.dtype=wi||dc(Er[0])||zf,Xi=qo(Er,[Er.length,Er[0].length],Nr.dtype),Bn(Nr,Xi,oi),ci?Nr.persistentData=Xi:Mr.freeType(Xi)):Q.raise("invalid buffer data")}}else if(v(Er))Nr.dtype=wi||dc(Er),Nr.dimension=Wn,Bn(Nr,Er,oi),ci&&(Nr.persistentData=new Uint8Array(new Uint8Array(Er.buffer)));else if(Bt(Er)){Mi=Er.shape;var mi=Er.stride,qn=Er.offset,Ii=0,_i=0,ao=0,La=0;Mi.length===1?(Ii=Mi[0],_i=1,ao=mi[0],La=0):Mi.length===2?(Ii=Mi[0],_i=Mi[1],ao=mi[0],La=mi[1]):Q.raise("invalid shape"),Nr.dtype=wi||dc(Er.data)||zf,Nr.dimension=_i;var Qi=Mr.allocType(Nr.dtype,Ii*_i);q(Qi,Er.data,Ii,_i,ao,La,qn),Bn(Nr,Qi,oi),ci?Nr.persistentData=Qi:Mr.freeType(Qi)}else Er instanceof ArrayBuffer?(Nr.dtype=Bf,Nr.dimension=Wn,Bn(Nr,Er,oi),ci&&(Nr.persistentData=new Uint8Array(new Uint8Array(Er)))):Q.raise("invalid buffer data")}function En(Nr){Qe.bufferCount--,Vt(Nr);var Er=Nr.buffer;Q(Er,"buffer must not be deleted already"),Te.deleteBuffer(Er),Nr.buffer=null,delete dr[Nr.id]}function Mn(Nr,Er,oi,wi){Qe.bufferCount++;var Wn=new Ar(Er);dr[Wn.id]=Wn;function ci(Rn){var kn=Hl,Si=null,mi=0,qn=0,Ii=1;return Array.isArray(Rn)||v(Rn)||Bt(Rn)||Rn instanceof ArrayBuffer?Si=Rn:typeof Rn=="number"?mi=Rn|0:Rn&&(Q.type(Rn,"object","buffer arguments must be an object, a number or an array"),"data"in Rn&&(Q(Si===null||Array.isArray(Si)||v(Si)||Bt(Si),"invalid data for buffer"),Si=Rn.data),"usage"in Rn&&(Q.parameter(Rn.usage,Oo,"invalid buffer usage"),kn=Oo[Rn.usage]),"type"in Rn&&(Q.parameter(Rn.type,Ss,"invalid buffer type"),qn=Ss[Rn.type]),"dimension"in Rn&&(Q.type(Rn.dimension,"number","invalid dimension"),Ii=Rn.dimension|0),"length"in Rn&&(Q.nni(mi,"buffer length must be a nonnegative integer"),mi=Rn.length|0)),Wn.bind(),Si?bn(Wn,Si,kn,qn,Ii,wi):(mi&&Te.bufferData(Wn.type,mi,kn),Wn.dtype=qn||Bf,Wn.usage=kn,Wn.dimension=Ii,Wn.byteLength=mi),pt.profile&&(Wn.stats.size=Wn.byteLength*ac[Wn.dtype]),ci}function Mi(Rn,kn){Q(kn+Rn.byteLength<=Wn.byteLength,"invalid buffer subdata call, buffer is too small.  Can't write data of size "+Rn.byteLength+" starting from offset "+kn+" to a buffer of size "+Wn.byteLength),Te.bufferSubData(Wn.type,kn,Rn)}function Xi(Rn,kn){var Si=(kn||0)|0,mi;if(Wn.bind(),v(Rn)||Rn instanceof ArrayBuffer)Mi(Rn,Si);else if(Array.isArray(Rn)){if(Rn.length>0)if(typeof Rn[0]=="number"){var qn=Mr.allocType(Wn.dtype,Rn.length);O(qn,Rn),Mi(qn,Si),Mr.freeType(qn)}else if(Array.isArray(Rn[0])||v(Rn[0])){mi=Rc(Rn);var Ii=qo(Rn,mi,Wn.dtype);Mi(Ii,Si),Mr.freeType(Ii)}else Q.raise("invalid buffer data")}else if(Bt(Rn)){mi=Rn.shape;var _i=Rn.stride,ao=0,La=0,Qi=0,aa=0;mi.length===1?(ao=mi[0],La=1,Qi=_i[0],aa=0):mi.length===2?(ao=mi[0],La=mi[1],Qi=_i[0],aa=_i[1]):Q.raise("invalid shape");var Fa=Array.isArray(Rn.data)?Wn.dtype:dc(Rn.data),$a=Mr.allocType(Fa,ao*La);q($a,Rn.data,ao,La,Qi,aa,Rn.offset),Mi($a,Si),Mr.freeType($a)}else Q.raise("invalid data for buffer subdata");return ci}return oi||ci(Nr),ci._reglType="buffer",ci._buffer=Wn,ci.subdata=Xi,pt.profile&&(ci.stats=Wn.stats),ci.destroy=function(){En(Wn)},ci}function Un(){ge(dr).forEach(function(Nr){Nr.buffer=Te.createBuffer(),Te.bindBuffer(Nr.type,Nr.buffer),Te.bufferData(Nr.type,Nr.persistentData||Nr.byteLength,Nr.usage)})}return pt.profile&&(Qe.getTotalBufferSize=function(){var Nr=0;return Object.keys(dr).forEach(function(Er){Nr+=dr[Er].stats.size}),Nr}),{create:Mn,createStream:Tn,destroyStream:Hn,clear:function(){ge(dr).forEach(En),hn.forEach(En)},getBuffer:function(Nr){return Nr&&Nr._buffer instanceof Ar?Nr._buffer:null},restore:Un,_initBuffer:bn}}var ve=0,ct=0,Lt=1,hr=1,lr=4,Gr=4,ii={points:ve,point:ct,lines:Lt,line:hr,triangles:lr,triangle:Gr,"line loop":2,"line strip":3,"triangle strip":5,"triangle fan":6},fi=0,Na=1,vo=4,Va=5120,ha=5121,$o=5122,ms=5123,To=5124,Qs=5125,Wl=34963,Pc=35040,Js=35044;function Tl(Te,Qe,pt,Vt){var Sr={},dr=0,Ar={uint8:ha,uint16:ms};Qe.oes_element_index_uint&&(Ar.uint32=Qs);function hn(Un){this.id=dr++,Sr[this.id]=this,this.buffer=Un,this.primType=vo,this.vertCount=0,this.type=0}hn.prototype.bind=function(){this.buffer.bind()};var Tn=[];function Hn(Un){var Nr=Tn.pop();return Nr||(Nr=new hn(pt.create(null,Wl,!0,!1)._buffer)),bn(Nr,Un,Pc,-1,-1,0,0),Nr}function Bn(Un){Tn.push(Un)}function bn(Un,Nr,Er,oi,wi,Wn,ci){Un.buffer.bind();var Mi;if(Nr){var Xi=ci;!ci&&(!v(Nr)||Bt(Nr)&&!v(Nr.data))&&(Xi=Qe.oes_element_index_uint?Qs:ms),pt._initBuffer(Un.buffer,Nr,Er,Xi,3)}else Te.bufferData(Wl,Wn,Er),Un.buffer.dtype=Mi||ha,Un.buffer.usage=Er,Un.buffer.dimension=3,Un.buffer.byteLength=Wn;if(Mi=ci,!ci){switch(Un.buffer.dtype){case ha:case Va:Mi=ha;break;case ms:case $o:Mi=ms;break;case Qs:case To:Mi=Qs;break;default:Q.raise("unsupported type for element array")}Un.buffer.dtype=Mi}Un.type=Mi,Q(Mi!==Qs||!!Qe.oes_element_index_uint,"32 bit element buffers not supported, enable oes_element_index_uint first");var Rn=wi;Rn<0&&(Rn=Un.buffer.byteLength,Mi===ms?Rn>>=1:Mi===Qs&&(Rn>>=2)),Un.vertCount=Rn;var kn=oi;if(oi<0){kn=vo;var Si=Un.buffer.dimension;Si===1&&(kn=fi),Si===2&&(kn=Na),Si===3&&(kn=vo)}Un.primType=kn}function En(Un){Vt.elementsCount--,Q(Un.buffer!==null,"must not double destroy elements"),delete Sr[Un.id],Un.buffer.destroy(),Un.buffer=null}function Mn(Un,Nr){var Er=pt.create(null,Wl,!0),oi=new hn(Er._buffer);Vt.elementsCount++;function wi(Wn){if(!Wn)Er(),oi.primType=vo,oi.vertCount=0,oi.type=ha;else if(typeof Wn=="number")Er(Wn),oi.primType=vo,oi.vertCount=Wn|0,oi.type=ha;else{var ci=null,Mi=Js,Xi=-1,Rn=-1,kn=0,Si=0;Array.isArray(Wn)||v(Wn)||Bt(Wn)?ci=Wn:(Q.type(Wn,"object","invalid arguments for elements"),"data"in Wn&&(ci=Wn.data,Q(Array.isArray(ci)||v(ci)||Bt(ci),"invalid data for element buffer")),"usage"in Wn&&(Q.parameter(Wn.usage,Oo,"invalid element buffer usage"),Mi=Oo[Wn.usage]),"primitive"in Wn&&(Q.parameter(Wn.primitive,ii,"invalid element buffer primitive"),Xi=ii[Wn.primitive]),"count"in Wn&&(Q(typeof Wn.count=="number"&&Wn.count>=0,"invalid vertex count for elements"),Rn=Wn.count|0),"type"in Wn&&(Q.parameter(Wn.type,Ar,"invalid buffer type"),Si=Ar[Wn.type]),"length"in Wn?kn=Wn.length|0:(kn=Rn,Si===ms||Si===$o?kn*=2:(Si===Qs||Si===To)&&(kn*=4))),bn(oi,ci,Mi,Xi,Rn,kn,Si)}return wi}return wi(Un),wi._reglType="elements",wi._elements=oi,wi.subdata=function(Wn,ci){return Er.subdata(Wn,ci),wi},wi.destroy=function(){En(oi)},wi}return{create:Mn,createStream:Hn,destroyStream:Bn,getElements:function(Un){return typeof Un=="function"&&Un._elements instanceof hn?Un._elements:null},clear:function(){ge(Sr).forEach(En)}}}var bf=new Float32Array(1),Zc=new Uint32Array(bf.buffer),vc=5123;function jc(Te){for(var Qe=Mr.allocType(vc,Te.length),pt=0;pt<Te.length;++pt)if(isNaN(Te[pt]))Qe[pt]=65535;else if(Te[pt]===1/0)Qe[pt]=31744;else if(Te[pt]===-1/0)Qe[pt]=64512;else{bf[0]=Te[pt];var Vt=Zc[0],Sr=Vt>>>31<<15,dr=(Vt<<1>>>24)-127,Ar=Vt>>13&(1<<10)-1;if(dr<-24)Qe[pt]=Sr;else if(dr<-14){var hn=-14-dr;Qe[pt]=Sr+(Ar+1024>>hn)}else dr>15?Qe[pt]=Sr+31744:Qe[pt]=Sr+(dr+15<<10)+Ar}return Qe}function bu(Te){return Array.isArray(Te)||v(Te)}var cp=function(Te){return!(Te&Te-1)&&!!Te},Yf=34467,Ju=3553,Vc=34067,Gc=34069,ju=6408,fp=6406,$l=6407,Rs=6409,Ml=6410,Ef=32854,Hc=32855,Xl=36194,ah=32819,Kf=32820,Ll=33635,Wc=34042,uu=6402,hs=34041,kc=35904,oc=35906,uf=36193,mc=33776,ds=33777,sc=33778,vl=33779,pp=35986,Lc=35987,uc=34798,Qf=35840,Yl=35841,Dc=35842,Jf=35843,gc=36196,$c=5121,Fc=5123,Kl=5125,Ql=5126,Uf=10242,qf=10243,ep=10497,qu=33071,Zf=33648,vs=10240,Kr=10241,vi=9728,ei=9729,xi=9984,da=9985,uo=9986,Ua=9987,ns=33170,Vu=4352,lc=4353,yc=4354,tp=34046,_c=3317,Jl=37440,ml=37441,lu=37443,_s=37444,jf=33984,qs=[xi,uo,da,Ua],ji=[0,Rs,Ml,$l,ju],Gs={};Gs[Rs]=Gs[fp]=Gs[uu]=1,Gs[hs]=Gs[Ml]=2,Gs[$l]=Gs[kc]=3,Gs[ju]=Gs[oc]=4;function ql(Te){return"[object "+Te+"]"}var Xc=ql("HTMLCanvasElement"),Il=ql("OffscreenCanvas"),ku=ql("CanvasRenderingContext2D"),ec=ql("ImageBitmap"),ia=ql("HTMLImageElement"),lf=ql("HTMLVideoElement"),xc=Object.keys(Aa).concat([Xc,Il,ku,ec,ia,lf]),cc=[];cc[$c]=1,cc[Ql]=4,cc[uf]=2,cc[Fc]=2,cc[Kl]=4;var Ps=[];Ps[Ef]=2,Ps[Hc]=2,Ps[Xl]=2,Ps[hs]=4,Ps[mc]=.5,Ps[ds]=.5,Ps[sc]=1,Ps[vl]=1,Ps[pp]=.5,Ps[Lc]=1,Ps[uc]=1,Ps[Qf]=.5,Ps[Yl]=.25,Ps[Dc]=.5,Ps[Jf]=.25,Ps[gc]=.5;function ol(Te){return Array.isArray(Te)&&(Te.length===0||typeof Te[0]=="number")}function Yc(Te){if(!Array.isArray(Te))return!1;var Qe=Te.length;return!(Qe===0||!bu(Te[0]))}function Eu(Te){return Object.prototype.toString.call(Te)}function el(Te){return Eu(Te)===Xc}function bc(Te){return Eu(Te)===Il}function Vf(Te){return Eu(Te)===ku}function qr(Te){return Eu(Te)===ec}function ri(Te){return Eu(Te)===ia}function Kn(Te){return Eu(Te)===lf}function Vn(Te){var Qe=typeof my!="undefined"&&!!my&&typeof my.showToast=="function"&&my.isFRM!==!0;return!!(Qe&&Te&&Te.getContext)}function Ri(Te){var Qe=typeof my!="undefined"&&!!my&&typeof my.showToast=="function"&&my.isFRM!==!0;return!!(Qe&&Te&&"src"in Te&&"crossOrigin"in Te)}function li(Te){if(!Te)return!1;if(Vn(Te)||Ri(Te))return!0;var Qe=Eu(Te);return xc.indexOf(Qe)>=0?!0:ol(Te)||Yc(Te)||Bt(Te)}function ga(Te){return Aa[Object.prototype.toString.call(Te)]|0}function Ka(Te,Qe){var pt=Qe.length;switch(Te.type){case $c:case Fc:case Kl:case Ql:var Vt=Mr.allocType(Te.type,pt);Vt.set(Qe),Te.data=Vt;break;case uf:Te.data=jc(Qe);break;default:Q.raise("unsupported texture type, must specify a typed array")}}function Ma(Te,Qe){return Mr.allocType(Te.type===uf?Ql:Te.type,Qe)}function Bo(Te,Qe){Te.type===uf?(Te.data=jc(Qe),Mr.freeType(Qe)):Te.data=Qe}function As(Te,Qe,pt,Vt,Sr,dr){for(var Ar=Te.width,hn=Te.height,Tn=Te.channels,Hn=Ar*hn*Tn,Bn=Ma(Te,Hn),bn=0,En=0;En<hn;++En)for(var Mn=0;Mn<Ar;++Mn)for(var Un=0;Un<Tn;++Un)Bn[bn++]=Qe[pt*Mn+Vt*En+Sr*Un+dr];Bo(Te,Bn)}function Su(Te,Qe,pt,Vt,Sr,dr){var Ar;if(typeof Ps[Te]!="undefined"?Ar=Ps[Te]:Ar=Gs[Te]*cc[Qe],dr&&(Ar*=6),Sr){for(var hn=0,Tn=pt;Tn>=1;)hn+=Ar*Tn*Tn,Tn/=2;return hn}else return Ar*pt*Vt}function cu(Te,Qe,pt,Vt,Sr,dr,Ar){var hn={"don't care":Vu,"dont care":Vu,nice:yc,fast:lc},Tn={repeat:ep,clamp:qu,mirror:Zf},Hn={nearest:vi,linear:ei},Bn=l({mipmap:Ua,"nearest mipmap nearest":xi,"linear mipmap nearest":da,"nearest mipmap linear":uo,"linear mipmap linear":Ua},Hn),bn={none:0,browser:_s},En={uint8:$c,rgba4:ah,rgb565:Ll,"rgb5 a1":Kf},Mn={alpha:fp,luminance:Rs,"luminance alpha":Ml,rgb:$l,rgba:ju,rgba4:Ef,"rgb5 a1":Hc,rgb565:Xl},Un={};Qe.ext_srgb&&(Mn.srgb=kc,Mn.srgba=oc),Qe.oes_texture_float&&(En.float32=En.float=Ql),Qe.oes_texture_half_float&&(En.float16=En["half float"]=uf),Qe.webgl_depth_texture&&(l(Mn,{depth:uu,"depth stencil":hs}),l(En,{uint16:Fc,uint32:Kl,"depth stencil":Wc})),Qe.webgl_compressed_texture_s3tc&&l(Un,{"rgb s3tc dxt1":mc,"rgba s3tc dxt1":ds,"rgba s3tc dxt3":sc,"rgba s3tc dxt5":vl}),Qe.webgl_compressed_texture_atc&&l(Un,{"rgb atc":pp,"rgba atc explicit alpha":Lc,"rgba atc interpolated alpha":uc}),Qe.webgl_compressed_texture_pvrtc&&l(Un,{"rgb pvrtc 4bppv1":Qf,"rgb pvrtc 2bppv1":Yl,"rgba pvrtc 4bppv1":Dc,"rgba pvrtc 2bppv1":Jf}),Qe.webgl_compressed_texture_etc1&&(Un["rgb etc1"]=gc);var Nr=Array.prototype.slice.call(Te.getParameter(Yf)||new Uint32Array(0));Object.keys(Un).forEach(function(Dt){var an=Un[Dt];Nr.indexOf(an)>=0&&(Mn[Dt]=an)});var Er=Object.keys(Mn);pt.textureFormats=Er;var oi=[];Object.keys(Mn).forEach(function(Dt){var an=Mn[Dt];oi[an]=Dt});var wi=[];Object.keys(En).forEach(function(Dt){var an=En[Dt];wi[an]=Dt});var Wn=[];Object.keys(Hn).forEach(function(Dt){var an=Hn[Dt];Wn[an]=Dt});var ci=[];Object.keys(Bn).forEach(function(Dt){var an=Bn[Dt];ci[an]=Dt});var Mi=[];Object.keys(Tn).forEach(function(Dt){var an=Tn[Dt];Mi[an]=Dt});var Xi=Er.reduce(function(Dt,an){var un=Mn[an];return un===Rs||un===fp||un===Rs||un===Ml||un===uu||un===hs||Qe.ext_srgb&&(un===kc||un===oc)?Dt[un]=un:un===Hc||an.indexOf("rgba")>=0?Dt[un]=ju:Dt[un]=$l,Dt},{});function Rn(){this.internalformat=ju,this.format=ju,this.type=$c,this.compressed=!1,this.premultiplyAlpha=!1,this.flipY=!1,this.unpackAlignment=1,this.colorSpace=_s,this.width=0,this.height=0,this.channels=0}function kn(Dt,an){Dt.internalformat=an.internalformat,Dt.format=an.format,Dt.type=an.type,Dt.compressed=an.compressed,Dt.premultiplyAlpha=an.premultiplyAlpha,Dt.flipY=an.flipY,Dt.unpackAlignment=an.unpackAlignment,Dt.colorSpace=an.colorSpace,Dt.width=an.width,Dt.height=an.height,Dt.channels=an.channels}function Si(Dt,an){if(!(typeof an!="object"||!an)){if("premultiplyAlpha"in an&&(Q.type(an.premultiplyAlpha,"boolean","invalid premultiplyAlpha"),Dt.premultiplyAlpha=an.premultiplyAlpha),"flipY"in an&&(Q.type(an.flipY,"boolean","invalid texture flip"),Dt.flipY=an.flipY),"alignment"in an&&(Q.oneOf(an.alignment,[1,2,4,8],"invalid texture unpack alignment"),Dt.unpackAlignment=an.alignment),"colorSpace"in an&&(Q.parameter(an.colorSpace,bn,"invalid colorSpace"),Dt.colorSpace=bn[an.colorSpace]),"type"in an){var un=an.type;Q(Qe.oes_texture_float||!(un==="float"||un==="float32"),"you must enable the OES_texture_float extension in order to use floating point textures."),Q(Qe.oes_texture_half_float||!(un==="half float"||un==="float16"),"you must enable the OES_texture_half_float extension in order to use 16-bit floating point textures."),Q(Qe.webgl_depth_texture||!(un==="uint16"||un==="uint32"||un==="depth stencil"),"you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures."),Q.parameter(un,En,"invalid texture type"),Dt.type=En[un]}var oa=Dt.width,Do=Dt.height,Ht=Dt.channels,Mt=!1;"shape"in an?(Q(Array.isArray(an.shape)&&an.shape.length>=2,"shape must be an array"),oa=an.shape[0],Do=an.shape[1],an.shape.length===3&&(Ht=an.shape[2],Q(Ht>0&&Ht<=4,"invalid number of channels"),Mt=!0),Q(oa>=0&&oa<=pt.maxTextureSize,"invalid width"),Q(Do>=0&&Do<=pt.maxTextureSize,"invalid height")):("radius"in an&&(oa=Do=an.radius,Q(oa>=0&&oa<=pt.maxTextureSize,"invalid radius")),"width"in an&&(oa=an.width,Q(oa>=0&&oa<=pt.maxTextureSize,"invalid width")),"height"in an&&(Do=an.height,Q(Do>=0&&Do<=pt.maxTextureSize,"invalid height")),"channels"in an&&(Ht=an.channels,Q(Ht>0&&Ht<=4,"invalid number of channels"),Mt=!0)),Dt.width=oa|0,Dt.height=Do|0,Dt.channels=Ht|0;var yr=!1;if("format"in an){var Zr=an.format;Q(Qe.webgl_depth_texture||!(Zr==="depth"||Zr==="depth stencil"),"you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures."),Q.parameter(Zr,Mn,"invalid texture format");var Sn=Dt.internalformat=Mn[Zr];Dt.format=Xi[Sn],Zr in En&&("type"in an||(Dt.type=En[Zr])),Zr in Un&&(Dt.compressed=!0),yr=!0}!Mt&&yr?Dt.channels=Gs[Dt.format]:Mt&&!yr?Dt.channels!==ji[Dt.format]&&(Dt.format=Dt.internalformat=ji[Dt.channels]):yr&&Mt&&Q(Dt.channels===Gs[Dt.format],"number of channels inconsistent with specified format")}}function mi(Dt){Te.pixelStorei(Jl,Dt.flipY),Te.pixelStorei(ml,Dt.premultiplyAlpha),Te.pixelStorei(lu,Dt.colorSpace),Te.pixelStorei(_c,Dt.unpackAlignment)}function qn(){Rn.call(this),this.xOffset=0,this.yOffset=0,this.data=null,this.needsFree=!1,this.element=null,this.needsCopy=!1}function Ii(Dt,an){var un=null;if(li(an)?un=an:an&&(Q.type(an,"object","invalid pixel data type"),Si(Dt,an),"x"in an&&(Dt.xOffset=an.x|0),"y"in an&&(Dt.yOffset=an.y|0),li(an.data)&&(un=an.data)),Q(!Dt.compressed||un instanceof Uint8Array,"compressed texture data must be stored in a uint8array"),an.copy){Q(!un,"can not specify copy and data field for the same texture");var oa=Sr.viewportWidth,Do=Sr.viewportHeight;Dt.width=Dt.width||oa-Dt.xOffset,Dt.height=Dt.height||Do-Dt.yOffset,Dt.needsCopy=!0,Q(Dt.xOffset>=0&&Dt.xOffset<oa&&Dt.yOffset>=0&&Dt.yOffset<Do&&Dt.width>0&&Dt.width<=oa&&Dt.height>0&&Dt.height<=Do,"copy texture read out of bounds")}else if(!un)Dt.width=Dt.width||1,Dt.height=Dt.height||1,Dt.channels=Dt.channels||4;else if(v(un))Dt.channels=Dt.channels||4,Dt.data=un,!("type"in an)&&Dt.type===$c&&(Dt.type=ga(un));else if(ol(un))Dt.channels=Dt.channels||4,Ka(Dt,un),Dt.alignment=1,Dt.needsFree=!0;else if(Bt(un)){var Ht=un.data;!Array.isArray(Ht)&&Dt.type===$c&&(Dt.type=ga(Ht));var Mt=un.shape,yr=un.stride,Zr,Sn,Or,ir,Br,kt;Mt.length===3?(Or=Mt[2],kt=yr[2]):(Q(Mt.length===2,"invalid ndarray pixel data, must be 2 or 3D"),Or=1,kt=1),Zr=Mt[0],Sn=Mt[1],ir=yr[0],Br=yr[1],Dt.alignment=1,Dt.width=Zr,Dt.height=Sn,Dt.channels=Or,Dt.format=Dt.internalformat=ji[Or],Dt.needsFree=!0,As(Dt,Ht,ir,Br,kt,un.offset)}else if(Vn(un)||el(un)||bc(un)||Vf(un))Vn(un)||el(un)||bc(un)?Dt.element=un:Dt.element=un.canvas,Dt.width=Dt.element.width,Dt.height=Dt.element.height,Dt.channels=4;else if(qr(un))Dt.element=un,Dt.width=un.width,Dt.height=un.height,Dt.channels=4;else if(ri(un))Dt.element=un,Dt.width=un.naturalWidth,Dt.height=un.naturalHeight,Dt.channels=4;else if(Ri(un))Dt.element=un,Dt.width=un.width,Dt.height=un.height,Dt.channels=4;else if(Kn(un))Dt.element=un,Dt.width=un.videoWidth,Dt.height=un.videoHeight,Dt.channels=4;else if(Yc(un)){var fr=Dt.width||un[0].length,jt=Dt.height||un.length,rn=Dt.channels;bu(un[0][0])?rn=rn||un[0][0].length:rn=rn||1;for(var jr=je.shape(un),Cn=1,Ci=0;Ci<jr.length;++Ci)Cn*=jr[Ci];var Oi=Ma(Dt,Cn);je.flatten(un,jr,"",Oi),Bo(Dt,Oi),Dt.alignment=1,Dt.width=fr,Dt.height=jt,Dt.channels=rn,Dt.format=Dt.internalformat=ji[rn],Dt.needsFree=!0}Dt.type===Ql?Q(pt.extensions.indexOf("oes_texture_float")>=0,"oes_texture_float extension not enabled"):Dt.type===uf&&Q(pt.extensions.indexOf("oes_texture_half_float")>=0,"oes_texture_half_float extension not enabled")}function _i(Dt,an,un){var oa=Dt.element,Do=Dt.data,Ht=Dt.internalformat,Mt=Dt.format,yr=Dt.type,Zr=Dt.width,Sn=Dt.height;mi(Dt),oa?Te.texImage2D(an,un,Mt,Mt,yr,oa):Dt.compressed?Te.compressedTexImage2D(an,un,Ht,Zr,Sn,0,Do):Dt.needsCopy?(Vt(),Te.copyTexImage2D(an,un,Mt,Dt.xOffset,Dt.yOffset,Zr,Sn,0)):Te.texImage2D(an,un,Mt,Zr,Sn,0,Mt,yr,Do||null)}function ao(Dt,an,un,oa,Do){var Ht=Dt.element,Mt=Dt.data,yr=Dt.internalformat,Zr=Dt.format,Sn=Dt.type,Or=Dt.width,ir=Dt.height;mi(Dt),Ht?Te.texSubImage2D(an,Do,un,oa,Zr,Sn,Ht):Dt.compressed?Te.compressedTexSubImage2D(an,Do,un,oa,yr,Or,ir,Mt):Dt.needsCopy?(Vt(),Te.copyTexSubImage2D(an,Do,un,oa,Dt.xOffset,Dt.yOffset,Or,ir)):Te.texSubImage2D(an,Do,un,oa,Or,ir,Zr,Sn,Mt)}var La=[];function Qi(){return La.pop()||new qn}function aa(Dt){Dt.needsFree&&Mr.freeType(Dt.data),qn.call(Dt),La.push(Dt)}function Fa(){Rn.call(this),this.genMipmaps=!1,this.mipmapHint=Vu,this.mipmask=0,this.images=Array(16)}function $a(Dt,an,un){var oa=Dt.images[0]=Qi();Dt.mipmask=1,oa.width=Dt.width=an,oa.height=Dt.height=un,oa.channels=Dt.channels=4}function oo(Dt,an){var un=null;if(li(an))un=Dt.images[0]=Qi(),kn(un,Dt),Ii(un,an),Dt.mipmask=1;else if(Si(Dt,an),Array.isArray(an.mipmap))for(var oa=an.mipmap,Do=0;Do<oa.length;++Do)un=Dt.images[Do]=Qi(),kn(un,Dt),un.width>>=Do,un.height>>=Do,Ii(un,oa[Do]),Dt.mipmask|=1<<Do;else un=Dt.images[0]=Qi(),kn(un,Dt),Ii(un,an),Dt.mipmask=1;kn(Dt,Dt.images[0]),Dt.compressed&&(Dt.internalformat===mc||Dt.internalformat===ds||Dt.internalformat===sc||Dt.internalformat===vl)&&Q(Dt.width%4===0&&Dt.height%4===0,"for compressed texture formats, mipmap level 0 must have width and height that are a multiple of 4")}function is(Dt,an){for(var un=Dt.images,oa=0;oa<un.length;++oa){if(!un[oa])return;_i(un[oa],an,oa)}}var Yo=[];function Po(){var Dt=Yo.pop()||new Fa;Rn.call(Dt),Dt.mipmask=0;for(var an=0;an<16;++an)Dt.images[an]=null;return Dt}function js(Dt){for(var an=Dt.images,un=0;un<an.length;++un)an[un]&&aa(an[un]),an[un]=null;Yo.push(Dt)}function Uo(){this.minFilter=vi,this.magFilter=vi,this.wrapS=qu,this.wrapT=qu,this.anisotropic=1,this.genMipmaps=!1,this.mipmapHint=Vu}function cs(Dt,an){if("min"in an){var un=an.min;Q.parameter(un,Bn),Dt.minFilter=Bn[un],qs.indexOf(Dt.minFilter)>=0&&!("faces"in an)&&(Dt.genMipmaps=!0)}if("mag"in an){var oa=an.mag;Q.parameter(oa,Hn),Dt.magFilter=Hn[oa]}var Do=Dt.wrapS,Ht=Dt.wrapT;if("wrap"in an){var Mt=an.wrap;typeof Mt=="string"?(Q.parameter(Mt,Tn),Do=Ht=Tn[Mt]):Array.isArray(Mt)&&(Q.parameter(Mt[0],Tn),Q.parameter(Mt[1],Tn),Do=Tn[Mt[0]],Ht=Tn[Mt[1]])}else{if("wrapS"in an){var yr=an.wrapS;Q.parameter(yr,Tn),Do=Tn[yr]}if("wrapT"in an){var Zr=an.wrapT;Q.parameter(Zr,Tn),Ht=Tn[Zr]}}if(Dt.wrapS=Do,Dt.wrapT=Ht,"anisotropic"in an){var Sn=an.anisotropic;Q(typeof Sn=="number"&&Sn>=1&&Sn<=pt.maxAnisotropic,"aniso samples must be between 1 and "),Dt.anisotropic=an.anisotropic}if("mipmap"in an){var Or=!1;switch(typeof an.mipmap){case"string":Q.parameter(an.mipmap,hn,"invalid mipmap hint"),Dt.mipmapHint=hn[an.mipmap],Dt.genMipmaps=!0,Or=!0;break;case"boolean":Or=Dt.genMipmaps=an.mipmap;break;case"object":Q(Array.isArray(an.mipmap),"invalid mipmap type"),Dt.genMipmaps=!1,Or=!0;break;default:Q.raise("invalid mipmap type")}Or&&!("min"in an)&&(Dt.minFilter=xi)}}function Vs(Dt,an){Te.texParameteri(an,Kr,Dt.minFilter),Te.texParameteri(an,vs,Dt.magFilter),Te.texParameteri(an,Uf,Dt.wrapS),Te.texParameteri(an,qf,Dt.wrapT),Qe.ext_texture_filter_anisotropic&&Te.texParameteri(an,tp,Dt.anisotropic),Dt.genMipmaps&&(Te.hint(ns,Dt.mipmapHint),Te.generateMipmap(an))}var Ls=0,Zo={},Io=pt.maxTextureUnits,Go=Array(Io).map(function(){return null});function Za(Dt){Rn.call(this),this.mipmask=0,this.internalformat=ju,this.id=Ls++,this.refCount=1,this.target=Dt,this.texture=Te.createTexture(),this.unit=-1,this.bindCount=0,this.texInfo=new Uo,Ar.profile&&(this.stats={size:0})}function as(Dt){Te.activeTexture(jf),Te.bindTexture(Dt.target,Dt.texture)}function so(){var Dt=Go[0];Dt?Te.bindTexture(Dt.target,Dt.texture):Te.bindTexture(Ju,null)}function iu(Dt){var an=Dt.texture;Q(an,"must not double destroy texture");var un=Dt.unit,oa=Dt.target;un>=0&&(Te.activeTexture(jf+un),Te.bindTexture(oa,null),Go[un]=null),Te.deleteTexture(an),Dt.texture=null,Dt.params=null,Dt.pixels=null,Dt.refCount=0,delete Zo[Dt.id],dr.textureCount--}l(Za.prototype,{bind:function(){var Dt=this;Dt.bindCount+=1;var an=Dt.unit;if(an<0){for(var un=0;un<Io;++un){var oa=Go[un];if(oa){if(oa.bindCount>0)continue;oa.unit=-1}Go[un]=Dt,an=un;break}an>=Io&&Q.raise("insufficient number of texture units"),Ar.profile&&dr.maxTextureUnits<an+1&&(dr.maxTextureUnits=an+1),Dt.unit=an,Te.activeTexture(jf+an),Te.bindTexture(Dt.target,Dt.texture)}return an},unbind:function(){this.bindCount-=1},decRef:function(){--this.refCount<=0&&iu(this)}});function Oa(Dt,an){var un=new Za(Ju);Zo[un.id]=un,dr.textureCount++;function oa(Mt,yr){var Zr=un.texInfo;Uo.call(Zr);var Sn=Po();return typeof Mt=="number"?typeof yr=="number"?$a(Sn,Mt|0,yr|0):$a(Sn,Mt|0,Mt|0):Mt?(Q.type(Mt,"object","invalid arguments to regl.texture"),cs(Zr,Mt),oo(Sn,Mt)):$a(Sn,1,1),Zr.genMipmaps&&(Sn.mipmask=(Sn.width<<1)-1),un.mipmask=Sn.mipmask,kn(un,Sn),Q.texture2D(Zr,Sn,pt),un.internalformat=Sn.internalformat,oa.width=Sn.width,oa.height=Sn.height,as(un),is(Sn,Ju),Vs(Zr,Ju),so(),js(Sn),Ar.profile&&(un.stats.size=Su(un.internalformat,un.type,Sn.width,Sn.height,Zr.genMipmaps,!1)),oa.format=oi[un.internalformat],oa.type=wi[un.type],oa.mag=Wn[Zr.magFilter],oa.min=ci[Zr.minFilter],oa.wrapS=Mi[Zr.wrapS],oa.wrapT=Mi[Zr.wrapT],oa}function Do(Mt,yr,Zr,Sn){Q(!!Mt,"must specify image data");var Or=yr|0,ir=Zr|0,Br=Sn|0,kt=Qi();return kn(kt,un),kt.width=0,kt.height=0,Ii(kt,Mt),kt.width=kt.width||(un.width>>Br)-Or,kt.height=kt.height||(un.height>>Br)-ir,Q(un.type===kt.type&&un.format===kt.format&&un.internalformat===kt.internalformat,"incompatible format for texture.subimage"),Q(Or>=0&&ir>=0&&Or+kt.width<=un.width&&ir+kt.height<=un.height,"texture.subimage write out of bounds"),Q(un.mipmask&1<<Br,"missing mipmap data"),Q(kt.data||kt.element||kt.needsCopy,"missing image data"),as(un),ao(kt,Ju,Or,ir,Br),so(),aa(kt),oa}function Ht(Mt,yr){var Zr=Mt|0,Sn=yr|0||Zr;if(Zr===un.width&&Sn===un.height)return oa;oa.width=un.width=Zr,oa.height=un.height=Sn,as(un);for(var Or=0;un.mipmask>>Or;++Or){var ir=Zr>>Or,Br=Sn>>Or;if(!ir||!Br)break;Te.texImage2D(Ju,Or,un.format,ir,Br,0,un.format,un.type,null)}return so(),Ar.profile&&(un.stats.size=Su(un.internalformat,un.type,Zr,Sn,!1,!1)),oa}return oa(Dt,an),oa.subimage=Do,oa.resize=Ht,oa._reglType="texture2d",oa._texture=un,Ar.profile&&(oa.stats=un.stats),oa.destroy=function(){un.decRef()},oa}function ko(Dt,an,un,oa,Do,Ht){var Mt=new Za(Vc);Zo[Mt.id]=Mt,dr.cubeCount++;var yr=new Array(6);function Zr(ir,Br,kt,fr,jt,rn){var jr,Cn=Mt.texInfo;for(Uo.call(Cn),jr=0;jr<6;++jr)yr[jr]=Po();if(typeof ir=="number"||!ir){var Ci=ir|0||1;for(jr=0;jr<6;++jr)$a(yr[jr],Ci,Ci)}else if(typeof ir=="object")if(Br)oo(yr[0],ir),oo(yr[1],Br),oo(yr[2],kt),oo(yr[3],fr),oo(yr[4],jt),oo(yr[5],rn);else if(cs(Cn,ir),Si(Mt,ir),"faces"in ir){var Oi=ir.faces;for(Q(Array.isArray(Oi)&&Oi.length===6,"cube faces must be a length 6 array"),jr=0;jr<6;++jr)Q(typeof Oi[jr]=="object"&&!!Oi[jr],"invalid input for cube map face"),kn(yr[jr],Mt),oo(yr[jr],Oi[jr])}else for(jr=0;jr<6;++jr)oo(yr[jr],ir);else Q.raise("invalid arguments to cube map");for(kn(Mt,yr[0]),Q.optional(function(){pt.npotTextureCube||Q(cp(Mt.width)&&cp(Mt.height),"your browser does not support non power or two texture dimensions")}),Cn.genMipmaps?Mt.mipmask=(yr[0].width<<1)-1:Mt.mipmask=yr[0].mipmask,Q.textureCube(Mt,Cn,yr,pt),Mt.internalformat=yr[0].internalformat,Zr.width=yr[0].width,Zr.height=yr[0].height,as(Mt),jr=0;jr<6;++jr)is(yr[jr],Gc+jr);for(Vs(Cn,Vc),so(),Ar.profile&&(Mt.stats.size=Su(Mt.internalformat,Mt.type,Zr.width,Zr.height,Cn.genMipmaps,!0)),Zr.format=oi[Mt.internalformat],Zr.type=wi[Mt.type],Zr.mag=Wn[Cn.magFilter],Zr.min=ci[Cn.minFilter],Zr.wrapS=Mi[Cn.wrapS],Zr.wrapT=Mi[Cn.wrapT],jr=0;jr<6;++jr)js(yr[jr]);return Zr}function Sn(ir,Br,kt,fr,jt){Q(!!Br,"must specify image data"),Q(typeof ir=="number"&&ir===(ir|0)&&ir>=0&&ir<6,"invalid face");var rn=kt|0,jr=fr|0,Cn=jt|0,Ci=Qi();return kn(Ci,Mt),Ci.width=0,Ci.height=0,Ii(Ci,Br),Ci.width=Ci.width||(Mt.width>>Cn)-rn,Ci.height=Ci.height||(Mt.height>>Cn)-jr,Q(Mt.type===Ci.type&&Mt.format===Ci.format&&Mt.internalformat===Ci.internalformat,"incompatible format for texture.subimage"),Q(rn>=0&&jr>=0&&rn+Ci.width<=Mt.width&&jr+Ci.height<=Mt.height,"texture.subimage write out of bounds"),Q(Mt.mipmask&1<<Cn,"missing mipmap data"),Q(Ci.data||Ci.element||Ci.needsCopy,"missing image data"),as(Mt),ao(Ci,Gc+ir,rn,jr,Cn),so(),aa(Ci),Zr}function Or(ir){var Br=ir|0;if(Br!==Mt.width){Zr.width=Mt.width=Br,Zr.height=Mt.height=Br,as(Mt);for(var kt=0;kt<6;++kt)for(var fr=0;Mt.mipmask>>fr;++fr)Te.texImage2D(Gc+kt,fr,Mt.format,Br>>fr,Br>>fr,0,Mt.format,Mt.type,null);return so(),Ar.profile&&(Mt.stats.size=Su(Mt.internalformat,Mt.type,Zr.width,Zr.height,!1,!0)),Zr}}return Zr(Dt,an,un,oa,Do,Ht),Zr.subimage=Sn,Zr.resize=Or,Zr._reglType="textureCube",Zr._texture=Mt,Ar.profile&&(Zr.stats=Mt.stats),Zr.destroy=function(){Mt.decRef()},Zr}function Xo(){for(var Dt=0;Dt<Io;++Dt)Te.activeTexture(jf+Dt),Te.bindTexture(Ju,null),Go[Dt]=null;ge(Zo).forEach(iu),dr.cubeCount=0,dr.textureCount=0}Ar.profile&&(dr.getTotalTextureSize=function(){var Dt=0;return Object.keys(Zo).forEach(function(an){Dt+=Zo[an].stats.size}),Dt});function Hs(){for(var Dt=0;Dt<Io;++Dt){var an=Go[Dt];an&&(an.bindCount=0,an.unit=-1,Go[Dt]=null)}ge(Zo).forEach(function(un){un.texture=Te.createTexture(),Te.bindTexture(un.target,un.texture);for(var oa=0;oa<32;++oa)if((un.mipmask&1<<oa)!==0)if(un.target===Ju)Te.texImage2D(Ju,oa,un.internalformat,un.width>>oa,un.height>>oa,0,un.internalformat,un.type,null);else for(var Do=0;Do<6;++Do)Te.texImage2D(Gc+Do,oa,un.internalformat,un.width>>oa,un.height>>oa,0,un.internalformat,un.type,null);Vs(un.texInfo,un.target)})}function jo(){for(var Dt=0;Dt<Io;++Dt){var an=Go[Dt];an&&(an.bindCount=0,an.unit=-1,Go[Dt]=null),Te.activeTexture(jf+Dt),Te.bindTexture(Ju,null),Te.bindTexture(Vc,null)}}return{create2D:Oa,createCube:ko,clear:Xo,getTexture:function(Dt){return null},restore:Hs,refresh:jo}}var tl=36161,Pa=32854,la=32855,sl=36194,us=33189,wu=36168,Zs=34041,ul=35907,Ec=34836,cf=34842,ws=34843,Qo=[];Qo[Pa]=2,Qo[la]=2,Qo[sl]=2,Qo[us]=2,Qo[wu]=1,Qo[Zs]=4,Qo[ul]=4,Qo[Ec]=16,Qo[cf]=8,Qo[ws]=6;function ff(Te,Qe,pt){return Qo[Te]*Qe*pt}var Du=function(Te,Qe,pt,Vt,Sr){var dr={rgba4:Pa,rgb565:sl,"rgb5 a1":la,depth:us,stencil:wu,"depth stencil":Zs};Qe.ext_srgb&&(dr.srgba=ul),Qe.ext_color_buffer_half_float&&(dr.rgba16f=cf,dr.rgb16f=ws),Qe.webgl_color_buffer_float&&(dr.rgba32f=Ec);var Ar=[];Object.keys(dr).forEach(function(Mn){var Un=dr[Mn];Ar[Un]=Mn});var hn=0,Tn={};function Hn(Mn){this.id=hn++,this.refCount=1,this.renderbuffer=Mn,this.format=Pa,this.width=0,this.height=0,Sr.profile&&(this.stats={size:0})}Hn.prototype.decRef=function(){--this.refCount<=0&&Bn(this)};function Bn(Mn){var Un=Mn.renderbuffer;Q(Un,"must not double destroy renderbuffer"),Te.bindRenderbuffer(tl,null),Te.deleteRenderbuffer(Un),Mn.renderbuffer=null,Mn.refCount=0,delete Tn[Mn.id],Vt.renderbufferCount--}function bn(Mn,Un){var Nr=new Hn(Te.createRenderbuffer());Tn[Nr.id]=Nr,Vt.renderbufferCount++;function Er(wi,Wn){var ci=0,Mi=0,Xi=Pa;if(typeof wi=="object"&&wi){var Rn=wi;if("shape"in Rn){var kn=Rn.shape;Q(Array.isArray(kn)&&kn.length>=2,"invalid renderbuffer shape"),ci=kn[0]|0,Mi=kn[1]|0}else"radius"in Rn&&(ci=Mi=Rn.radius|0),"width"in Rn&&(ci=Rn.width|0),"height"in Rn&&(Mi=Rn.height|0);"format"in Rn&&(Q.parameter(Rn.format,dr,"invalid renderbuffer format"),Xi=dr[Rn.format])}else typeof wi=="number"?(ci=wi|0,typeof Wn=="number"?Mi=Wn|0:Mi=ci):wi?Q.raise("invalid arguments to renderbuffer constructor"):ci=Mi=1;if(Q(ci>0&&Mi>0&&ci<=pt.maxRenderbufferSize&&Mi<=pt.maxRenderbufferSize,"invalid renderbuffer size"),!(ci===Nr.width&&Mi===Nr.height&&Xi===Nr.format))return Er.width=Nr.width=ci,Er.height=Nr.height=Mi,Nr.format=Xi,Te.bindRenderbuffer(tl,Nr.renderbuffer),Te.renderbufferStorage(tl,Xi,ci,Mi),Q(Te.getError()===0,"invalid render buffer format"),Sr.profile&&(Nr.stats.size=ff(Nr.format,Nr.width,Nr.height)),Er.format=Ar[Nr.format],Er}function oi(wi,Wn){var ci=wi|0,Mi=Wn|0||ci;return ci===Nr.width&&Mi===Nr.height||(Q(ci>0&&Mi>0&&ci<=pt.maxRenderbufferSize&&Mi<=pt.maxRenderbufferSize,"invalid renderbuffer size"),Er.width=Nr.width=ci,Er.height=Nr.height=Mi,Te.bindRenderbuffer(tl,Nr.renderbuffer),Te.renderbufferStorage(tl,Nr.format,ci,Mi),Q(Te.getError()===0,"invalid render buffer format"),Sr.profile&&(Nr.stats.size=ff(Nr.format,Nr.width,Nr.height))),Er}return Er(Mn,Un),Er.resize=oi,Er._reglType="renderbuffer",Er._renderbuffer=Nr,Sr.profile&&(Er.stats=Nr.stats),Er.destroy=function(){Nr.decRef()},Er}Sr.profile&&(Vt.getTotalRenderbufferSize=function(){var Mn=0;return Object.keys(Tn).forEach(function(Un){Mn+=Tn[Un].stats.size}),Mn});function En(){ge(Tn).forEach(function(Mn){Mn.renderbuffer=Te.createRenderbuffer(),Te.bindRenderbuffer(tl,Mn.renderbuffer),Te.renderbufferStorage(tl,Mn.format,Mn.width,Mn.height)}),Te.bindRenderbuffer(tl,null)}return{create:bn,clear:function(){ge(Tn).forEach(Bn)},restore:En}},du=36160,ll=36161,eu=3553,Rt=34069,mo=36064,xs=36096,tu=36128,Mo=33306,rp=36053,pf=36054,np=36055,cl=36057,Dl=36061,Cs=36193,fu=5121,Zl=5126,Mu=6407,Fu=6408,Nc=6402,hf=[Mu,Fu],Ol=[];Ol[Fu]=4,Ol[Mu]=3;var d=[];d[fu]=1,d[Zl]=4,d[Cs]=2;var _=32854,m=32855,S=36194,N=33189,X=36168,ee=34041,Ae=35907,Ze=34836,nt=34842,Ct=34843,Tt=[_,m,S,Ae,nt,Ct,Ze],Pt={};Pt[rp]="complete",Pt[pf]="incomplete attachment",Pt[cl]="incomplete dimensions",Pt[np]="incomplete, missing attachment",Pt[Dl]="unsupported";function tr(Te,Qe,pt,Vt,Sr,dr){var Ar={cur:null,next:null,dirty:!1,setFBO:null},hn=["rgba"],Tn=["rgba4","rgb565","rgb5 a1"];Qe.ext_srgb&&Tn.push("srgba"),Qe.ext_color_buffer_half_float&&Tn.push("rgba16f","rgb16f"),Qe.webgl_color_buffer_float&&Tn.push("rgba32f");var Hn=["uint8"];Qe.oes_texture_half_float&&Hn.push("half float","float16"),Qe.oes_texture_float&&Hn.push("float","float32");function Bn(qn,Ii,_i){this.target=qn,this.texture=Ii,this.renderbuffer=_i;var ao=0,La=0;Ii?(ao=Ii.width,La=Ii.height):_i&&(ao=_i.width,La=_i.height),this.width=ao,this.height=La}function bn(qn){qn&&(qn.texture&&qn.texture._texture.decRef(),qn.renderbuffer&&qn.renderbuffer._renderbuffer.decRef())}function En(qn,Ii,_i){if(!!qn)if(qn.texture){var ao=qn.texture._texture,La=Math.max(1,ao.width),Qi=Math.max(1,ao.height);Q(La===Ii&&Qi===_i,"inconsistent width/height for supplied texture"),ao.refCount+=1}else{var aa=qn.renderbuffer._renderbuffer;Q(aa.width===Ii&&aa.height===_i,"inconsistent width/height for renderbuffer"),aa.refCount+=1}}function Mn(qn,Ii){Ii&&(Ii.texture?Te.framebufferTexture2D(du,qn,Ii.target,Ii.texture._texture.texture,0):Te.framebufferRenderbuffer(du,qn,ll,Ii.renderbuffer._renderbuffer.renderbuffer))}function Un(qn){var Ii=eu,_i=null,ao=null,La=qn;typeof qn=="object"&&(La=qn.data,"target"in qn&&(Ii=qn.target|0)),Q.type(La,"function","invalid attachment data");var Qi=La._reglType;return Qi==="texture2d"?(_i=La,Q(Ii===eu)):Qi==="textureCube"?(_i=La,Q(Ii>=Rt&&Ii<Rt+6,"invalid cube map target")):Qi==="renderbuffer"?(ao=La,Ii=ll):Q.raise("invalid regl object for attachment"),new Bn(Ii,_i,ao)}function Nr(qn,Ii,_i,ao,La){if(_i){var Qi=Vt.create2D({width:qn,height:Ii,format:ao,type:La});return Qi._texture.refCount=0,new Bn(eu,Qi,null)}else{var aa=Sr.create({width:qn,height:Ii,format:ao});return aa._renderbuffer.refCount=0,new Bn(ll,null,aa)}}function Er(qn){return qn&&(qn.texture||qn.renderbuffer)}function oi(qn,Ii,_i){qn&&(qn.texture?qn.texture.resize(Ii,_i):qn.renderbuffer&&qn.renderbuffer.resize(Ii,_i),qn.width=Ii,qn.height=_i)}var wi=0,Wn={};function ci(){this.id=wi++,Wn[this.id]=this,this.framebuffer=Te.createFramebuffer(),this.width=0,this.height=0,this.colorAttachments=[],this.depthAttachment=null,this.stencilAttachment=null,this.depthStencilAttachment=null}function Mi(qn){qn.colorAttachments.forEach(bn),bn(qn.depthAttachment),bn(qn.stencilAttachment),bn(qn.depthStencilAttachment)}function Xi(qn){var Ii=qn.framebuffer;Q(Ii,"must not double destroy framebuffer"),Te.deleteFramebuffer(Ii),qn.framebuffer=null,dr.framebufferCount--,delete Wn[qn.id]}function Rn(qn){var Ii;Te.bindFramebuffer(du,qn.framebuffer);var _i=qn.colorAttachments;for(Ii=0;Ii<_i.length;++Ii)Mn(mo+Ii,_i[Ii]);for(Ii=_i.length;Ii<pt.maxColorAttachments;++Ii)Te.framebufferTexture2D(du,mo+Ii,eu,null,0);Te.framebufferTexture2D(du,Mo,eu,null,0),Te.framebufferTexture2D(du,xs,eu,null,0),Te.framebufferTexture2D(du,tu,eu,null,0),Mn(xs,qn.depthAttachment),Mn(tu,qn.stencilAttachment),Mn(Mo,qn.depthStencilAttachment);var ao=Te.checkFramebufferStatus(du);!Te.isContextLost()&&ao!==rp&&Q.raise("framebuffer configuration not supported, status = "+Pt[ao]),Te.bindFramebuffer(du,Ar.next?Ar.next.framebuffer:null),Ar.cur=Ar.next,Te.getError()}function kn(qn,Ii){var _i=new ci;dr.framebufferCount++;function ao(Qi,aa){var Fa;Q(Ar.next!==_i,"can not update framebuffer which is currently in use");var $a=0,oo=0,is=!0,Yo=!0,Po=null,js=!0,Uo="rgba",cs="uint8",Vs=1,Ls=null,Zo=null,Io=null,Go=!1;if(typeof Qi=="number")$a=Qi|0,oo=aa|0||$a;else if(!Qi)$a=oo=1;else{Q.type(Qi,"object","invalid arguments for framebuffer");var Za=Qi;if("shape"in Za){var as=Za.shape;Q(Array.isArray(as)&&as.length>=2,"invalid shape for framebuffer"),$a=as[0],oo=as[1]}else"radius"in Za&&($a=oo=Za.radius),"width"in Za&&($a=Za.width),"height"in Za&&(oo=Za.height);("color"in Za||"colors"in Za)&&(Po=Za.color||Za.colors,Array.isArray(Po)&&Q(Po.length===1||Qe.webgl_draw_buffers,"multiple render targets not supported")),Po||("colorCount"in Za&&(Vs=Za.colorCount|0,Q(Vs>0,"invalid color buffer count")),"colorTexture"in Za&&(js=!!Za.colorTexture,Uo="rgba4"),"colorType"in Za&&(cs=Za.colorType,js?(Q(Qe.oes_texture_float||!(cs==="float"||cs==="float32"),"you must enable OES_texture_float in order to use floating point framebuffer objects"),Q(Qe.oes_texture_half_float||!(cs==="half float"||cs==="float16"),"you must enable OES_texture_half_float in order to use 16-bit floating point framebuffer objects")):cs==="half float"||cs==="float16"?(Q(Qe.ext_color_buffer_half_float,"you must enable EXT_color_buffer_half_float to use 16-bit render buffers"),Uo="rgba16f"):(cs==="float"||cs==="float32")&&(Q(Qe.webgl_color_buffer_float,"you must enable WEBGL_color_buffer_float in order to use 32-bit floating point renderbuffers"),Uo="rgba32f"),Q.oneOf(cs,Hn,"invalid color type")),"colorFormat"in Za&&(Uo=Za.colorFormat,hn.indexOf(Uo)>=0?js=!0:Tn.indexOf(Uo)>=0?js=!1:Q.optional(function(){js?Q.oneOf(Za.colorFormat,hn,"invalid color format for texture"):Q.oneOf(Za.colorFormat,Tn,"invalid color format for renderbuffer")}))),("depthTexture"in Za||"depthStencilTexture"in Za)&&(Go=!!(Za.depthTexture||Za.depthStencilTexture),Q(!Go||Qe.webgl_depth_texture,"webgl_depth_texture extension not supported")),"depth"in Za&&(typeof Za.depth=="boolean"?is=Za.depth:(Ls=Za.depth,Yo=!1)),"stencil"in Za&&(typeof Za.stencil=="boolean"?Yo=Za.stencil:(Zo=Za.stencil,is=!1)),"depthStencil"in Za&&(typeof Za.depthStencil=="boolean"?is=Yo=Za.depthStencil:(Io=Za.depthStencil,is=!1,Yo=!1))}var so=null,iu=null,Oa=null,ko=null;if(Array.isArray(Po))so=Po.map(Un);else if(Po)so=[Un(Po)];else for(so=new Array(Vs),Fa=0;Fa<Vs;++Fa)so[Fa]=Nr($a,oo,js,Uo,cs);Q(Qe.webgl_draw_buffers||so.length<=1,"you must enable the WEBGL_draw_buffers extension in order to use multiple color buffers."),Q(so.length<=pt.maxColorAttachments,"too many color attachments, not supported"),$a=$a||so[0].width,oo=oo||so[0].height,Ls?iu=Un(Ls):is&&!Yo&&(iu=Nr($a,oo,Go,"depth","uint32")),Zo?Oa=Un(Zo):Yo&&!is&&(Oa=Nr($a,oo,!1,"stencil","uint8")),Io?ko=Un(Io):!Ls&&!Zo&&Yo&&is&&(ko=Nr($a,oo,Go,"depth stencil","depth stencil")),Q(!!Ls+!!Zo+!!Io<=1,"invalid framebuffer configuration, can specify exactly one depth/stencil attachment");var Xo=null;for(Fa=0;Fa<so.length;++Fa)if(En(so[Fa],$a,oo),Q(!so[Fa]||so[Fa].texture&&hf.indexOf(so[Fa].texture._texture.format)>=0||so[Fa].renderbuffer&&Tt.indexOf(so[Fa].renderbuffer._renderbuffer.format)>=0,"framebuffer color attachment "+Fa+" is invalid"),so[Fa]&&so[Fa].texture){var Hs=Ol[so[Fa].texture._texture.format]*d[so[Fa].texture._texture.type];Xo===null?Xo=Hs:Q(Xo===Hs,"all color attachments much have the same number of bits per pixel.")}return En(iu,$a,oo),Q(!iu||iu.texture&&iu.texture._texture.format===Nc||iu.renderbuffer&&iu.renderbuffer._renderbuffer.format===N,"invalid depth attachment for framebuffer object"),En(Oa,$a,oo),Q(!Oa||Oa.renderbuffer&&Oa.renderbuffer._renderbuffer.format===X,"invalid stencil attachment for framebuffer object"),En(ko,$a,oo),Q(!ko||ko.texture&&ko.texture._texture.format===ee||ko.renderbuffer&&ko.renderbuffer._renderbuffer.format===ee,"invalid depth-stencil attachment for framebuffer object"),Mi(_i),_i.width=$a,_i.height=oo,_i.colorAttachments=so,_i.depthAttachment=iu,_i.stencilAttachment=Oa,_i.depthStencilAttachment=ko,ao.color=so.map(Er),ao.depth=Er(iu),ao.stencil=Er(Oa),ao.depthStencil=Er(ko),ao.width=_i.width,ao.height=_i.height,Rn(_i),ao}function La(Qi,aa){Q(Ar.next!==_i,"can not resize a framebuffer which is currently in use");var Fa=Math.max(Qi|0,1),$a=Math.max(aa|0||Fa,1);if(Fa===_i.width&&$a===_i.height)return ao;for(var oo=_i.colorAttachments,is=0;is<oo.length;++is)oi(oo[is],Fa,$a);return oi(_i.depthAttachment,Fa,$a),oi(_i.stencilAttachment,Fa,$a),oi(_i.depthStencilAttachment,Fa,$a),_i.width=ao.width=Fa,_i.height=ao.height=$a,Rn(_i),ao}return ao(qn,Ii),l(ao,{resize:La,_reglType:"framebuffer",_framebuffer:_i,destroy:function(){Xi(_i),Mi(_i)},use:function(Qi){Ar.setFBO({framebuffer:ao},Qi)}})}function Si(qn){var Ii=Array(6);function _i(La){var Qi;Q(Ii.indexOf(Ar.next)<0,"can not update framebuffer which is currently in use");var aa={color:null},Fa=0,$a=null,oo="rgba",is="uint8",Yo=1;if(typeof La=="number")Fa=La|0;else if(!La)Fa=1;else{Q.type(La,"object","invalid arguments for framebuffer");var Po=La;if("shape"in Po){var js=Po.shape;Q(Array.isArray(js)&&js.length>=2,"invalid shape for framebuffer"),Q(js[0]===js[1],"cube framebuffer must be square"),Fa=js[0]}else"radius"in Po&&(Fa=Po.radius|0),"width"in Po?(Fa=Po.width|0,"height"in Po&&Q(Po.height===Fa,"must be square")):"height"in Po&&(Fa=Po.height|0);("color"in Po||"colors"in Po)&&($a=Po.color||Po.colors,Array.isArray($a)&&Q($a.length===1||Qe.webgl_draw_buffers,"multiple render targets not supported")),$a||("colorCount"in Po&&(Yo=Po.colorCount|0,Q(Yo>0,"invalid color buffer count")),"colorType"in Po&&(Q.oneOf(Po.colorType,Hn,"invalid color type"),is=Po.colorType),"colorFormat"in Po&&(oo=Po.colorFormat,Q.oneOf(Po.colorFormat,hn,"invalid color format for texture"))),"depth"in Po&&(aa.depth=Po.depth),"stencil"in Po&&(aa.stencil=Po.stencil),"depthStencil"in Po&&(aa.depthStencil=Po.depthStencil)}var Uo;if($a)if(Array.isArray($a))for(Uo=[],Qi=0;Qi<$a.length;++Qi)Uo[Qi]=$a[Qi];else Uo=[$a];else{Uo=Array(Yo);var cs={radius:Fa,format:oo,type:is};for(Qi=0;Qi<Yo;++Qi)Uo[Qi]=Vt.createCube(cs)}for(aa.color=Array(Uo.length),Qi=0;Qi<Uo.length;++Qi){var Vs=Uo[Qi];Q(typeof Vs=="function"&&Vs._reglType==="textureCube","invalid cube map"),Fa=Fa||Vs.width,Q(Vs.width===Fa&&Vs.height===Fa,"invalid cube map shape"),aa.color[Qi]={target:Rt,data:Uo[Qi]}}for(Qi=0;Qi<6;++Qi){for(var Ls=0;Ls<Uo.length;++Ls)aa.color[Ls].target=Rt+Qi;Qi>0&&(aa.depth=Ii[0].depth,aa.stencil=Ii[0].stencil,aa.depthStencil=Ii[0].depthStencil),Ii[Qi]?Ii[Qi](aa):Ii[Qi]=kn(aa)}return l(_i,{width:Fa,height:Fa,color:Uo})}function ao(La){var Qi,aa=La|0;if(Q(aa>0&&aa<=pt.maxCubeMapSize,"invalid radius for cube fbo"),aa===_i.width)return _i;var Fa=_i.color;for(Qi=0;Qi<Fa.length;++Qi)Fa[Qi].resize(aa);for(Qi=0;Qi<6;++Qi)Ii[Qi].resize(aa);return _i.width=_i.height=aa,_i}return _i(qn),l(_i,{faces:Ii,resize:ao,_reglType:"framebufferCube",destroy:function(){Ii.forEach(function(La){La.destroy()})}})}function mi(){Ar.cur=null,Ar.next=null,Ar.dirty=!0,ge(Wn).forEach(function(qn){qn.framebuffer=Te.createFramebuffer(),Rn(qn)})}return l(Ar,{getFramebuffer:function(qn){if(typeof qn=="function"&&qn._reglType==="framebuffer"){var Ii=qn._framebuffer;if(Ii instanceof ci)return Ii}return null},create:kn,createCube:Si,clear:function(){ge(Wn).forEach(Xi)},restore:mi})}var or=5126,gr=34962,Yt=34963,br=["attributes","elements","offset","count","primitive","instances"];function Lr(){this.state=0,this.x=0,this.y=0,this.z=0,this.w=0,this.buffer=null,this.size=0,this.normalized=!1,this.type=or,this.offset=0,this.stride=0,this.divisor=0}function pn(Te,Qe,pt,Vt,Sr,dr,Ar){for(var hn=pt.maxAttributes,Tn=new Array(hn),Hn=0;Hn<hn;++Hn)Tn[Hn]=new Lr;var Bn=0,bn={},En={Record:Lr,scope:{},state:Tn,currentVAO:null,targetVAO:null,restore:Un()?Mi:function(){},createVAO:Xi,getVAO:Er,destroyBuffer:Mn,setVAO:Un()?oi:wi,clear:Un()?Wn:function(){}};function Mn(Rn){for(var kn=0;kn<Tn.length;++kn){var Si=Tn[kn];Si.buffer===Rn&&(Te.disableVertexAttribArray(kn),Si.buffer=null)}}function Un(){return Qe.oes_vertex_array_object}function Nr(){return Qe.angle_instanced_arrays}function Er(Rn){return typeof Rn=="function"&&Rn._vao?Rn._vao:null}function oi(Rn){if(Rn!==En.currentVAO){var kn=Un();Rn?kn.bindVertexArrayOES(Rn.vao):kn.bindVertexArrayOES(null),En.currentVAO=Rn}}function wi(Rn){if(Rn!==En.currentVAO){if(Rn)Rn.bindAttrs();else{for(var kn=Nr(),Si=0;Si<Tn.length;++Si){var mi=Tn[Si];mi.buffer?(Te.enableVertexAttribArray(Si),mi.buffer.bind(),Te.vertexAttribPointer(Si,mi.size,mi.type,mi.normalized,mi.stride,mi.offfset),kn&&mi.divisor&&kn.vertexAttribDivisorANGLE(Si,mi.divisor)):(Te.disableVertexAttribArray(Si),Te.vertexAttrib4f(Si,mi.x,mi.y,mi.z,mi.w))}Ar.elements?Te.bindBuffer(Yt,Ar.elements.buffer.buffer):Te.bindBuffer(Yt,null)}En.currentVAO=Rn}}function Wn(){ge(bn).forEach(function(Rn){Rn.destroy()})}function ci(){this.id=++Bn,this.attributes=[],this.elements=null,this.ownsElements=!1,this.count=0,this.offset=0,this.instances=-1,this.primitive=4;var Rn=Un();Rn?this.vao=Rn.createVertexArrayOES():this.vao=null,bn[this.id]=this,this.buffers=[]}ci.prototype.bindAttrs=function(){for(var Rn=Nr(),kn=this.attributes,Si=0;Si<kn.length;++Si){var mi=kn[Si];mi.buffer?(Te.enableVertexAttribArray(Si),Te.bindBuffer(gr,mi.buffer.buffer),Te.vertexAttribPointer(Si,mi.size,mi.type,mi.normalized,mi.stride,mi.offset),Rn&&mi.divisor&&Rn.vertexAttribDivisorANGLE(Si,mi.divisor)):(Te.disableVertexAttribArray(Si),Te.vertexAttrib4f(Si,mi.x,mi.y,mi.z,mi.w))}for(var qn=kn.length;qn<hn;++qn)Te.disableVertexAttribArray(qn);var Ii=dr.getElements(this.elements);Ii?Te.bindBuffer(Yt,Ii.buffer.buffer):Te.bindBuffer(Yt,null)},ci.prototype.refresh=function(){var Rn=Un();Rn&&(Rn.bindVertexArrayOES(this.vao),this.bindAttrs(),En.currentVAO=null,Rn.bindVertexArrayOES(null))},ci.prototype.destroy=function(){if(this.vao){var Rn=Un();this===En.currentVAO&&(En.currentVAO=null,Rn.bindVertexArrayOES(null)),Rn.deleteVertexArrayOES(this.vao),this.vao=null}this.ownsElements&&(this.elements.destroy(),this.elements=null,this.ownsElements=!1),bn[this.id]&&(delete bn[this.id],Vt.vaoCount-=1)};function Mi(){var Rn=Un();Rn&&ge(bn).forEach(function(kn){kn.refresh()})}function Xi(Rn){var kn=new ci;Vt.vaoCount+=1;function Si(mi){var qn;if(Array.isArray(mi))qn=mi,kn.elements&&kn.ownsElements&&kn.elements.destroy(),kn.elements=null,kn.ownsElements=!1,kn.offset=0,kn.count=0,kn.instances=-1,kn.primitive=4;else{if(Q(typeof mi=="object","invalid arguments for create vao"),Q("attributes"in mi,"must specify attributes for vao"),mi.elements){var Ii=mi.elements;kn.ownsElements?typeof Ii=="function"&&Ii._reglType==="elements"?(kn.elements.destroy(),kn.ownsElements=!1):(kn.elements(Ii),kn.ownsElements=!1):dr.getElements(mi.elements)?(kn.elements=mi.elements,kn.ownsElements=!1):(kn.elements=dr.create(mi.elements),kn.ownsElements=!0)}else kn.elements=null,kn.ownsElements=!1;qn=mi.attributes,kn.offset=0,kn.count=-1,kn.instances=-1,kn.primitive=4,kn.elements&&(kn.count=kn.elements._elements.vertCount,kn.primitive=kn.elements._elements.primType),"offset"in mi&&(kn.offset=mi.offset|0),"count"in mi&&(kn.count=mi.count|0),"instances"in mi&&(kn.instances=mi.instances|0),"primitive"in mi&&(Q(mi.primitive in ii,"bad primitive type: "+mi.primitive),kn.primitive=ii[mi.primitive]),Q.optional(function(){for(var is=Object.keys(mi),Yo=0;Yo<is.length;++Yo)Q(br.indexOf(is[Yo])>=0,'invalid option for vao: "'+is[Yo]+'" valid options are '+br)}),Q(Array.isArray(qn),"attributes must be an array")}Q(qn.length<hn,"too many attributes"),Q(qn.length>0,"must specify at least one attribute");var _i={},ao=kn.attributes;ao.length=qn.length;for(var La=0;La<qn.length;++La){var Qi=qn[La],aa=ao[La]=new Lr,Fa=Qi.data||Qi;if(Array.isArray(Fa)||v(Fa)||Bt(Fa)){var $a;kn.buffers[La]&&($a=kn.buffers[La],v(Fa)&&$a._buffer.byteLength>=Fa.byteLength?$a.subdata(Fa):($a.destroy(),kn.buffers[La]=null)),kn.buffers[La]||($a=kn.buffers[La]=Sr.create(Qi,gr,!1,!0)),aa.buffer=Sr.getBuffer($a),aa.size=aa.buffer.dimension|0,aa.normalized=!1,aa.type=aa.buffer.dtype,aa.offset=0,aa.stride=0,aa.divisor=0,aa.state=1,_i[La]=1}else Sr.getBuffer(Qi)?(aa.buffer=Sr.getBuffer(Qi),aa.size=aa.buffer.dimension|0,aa.normalized=!1,aa.type=aa.buffer.dtype,aa.offset=0,aa.stride=0,aa.divisor=0,aa.state=1):Sr.getBuffer(Qi.buffer)?(aa.buffer=Sr.getBuffer(Qi.buffer),aa.size=(+Qi.size||aa.buffer.dimension)|0,aa.normalized=!!Qi.normalized||!1,"type"in Qi?(Q.parameter(Qi.type,Ss,"invalid buffer type"),aa.type=Ss[Qi.type]):aa.type=aa.buffer.dtype,aa.offset=(Qi.offset||0)|0,aa.stride=(Qi.stride||0)|0,aa.divisor=(Qi.divisor||0)|0,aa.state=1,Q(aa.size>=1&&aa.size<=4,"size must be between 1 and 4"),Q(aa.offset>=0,"invalid offset"),Q(aa.stride>=0&&aa.stride<=255,"stride must be between 0 and 255"),Q(aa.divisor>=0,"divisor must be positive"),Q(!aa.divisor||!!Qe.angle_instanced_arrays,"ANGLE_instanced_arrays must be enabled to use divisor")):"x"in Qi?(Q(La>0,"first attribute must not be a constant"),aa.x=+Qi.x||0,aa.y=+Qi.y||0,aa.z=+Qi.z||0,aa.w=+Qi.w||0,aa.state=2):Q(!1,"invalid attribute spec for location "+La)}for(var oo=0;oo<kn.buffers.length;++oo)!_i[oo]&&kn.buffers[oo]&&(kn.buffers[oo].destroy(),kn.buffers[oo]=null);return kn.refresh(),Si}return Si.destroy=function(){for(var mi=0;mi<kn.buffers.length;++mi)kn.buffers[mi]&&kn.buffers[mi].destroy();kn.buffers.length=0,kn.ownsElements&&(kn.elements.destroy(),kn.elements=null,kn.ownsElements=!1),kn.destroy()},Si._vao=kn,Si._reglType="vao",Si(Rn)}return En}var zn=35632,Nn=35633,Xn=35718,yi=35721;function Li(Te,Qe,pt,Vt){var Sr={},dr={};function Ar(Nr,Er,oi,wi){this.name=Nr,this.id=Er,this.location=oi,this.info=wi}function hn(Nr,Er){for(var oi=0;oi<Nr.length;++oi)if(Nr[oi].id===Er.id){Nr[oi].location=Er.location;return}Nr.push(Er)}function Tn(Nr,Er,oi){var wi=Nr===zn?Sr:dr,Wn=wi[Er];if(!Wn){var ci=Qe.str(Er);Wn=Te.createShader(Nr),Te.shaderSource(Wn,ci),Te.compileShader(Wn),Q.shaderError(Te,Wn,ci,Nr,oi),wi[Er]=Wn}return Wn}var Hn={},Bn=[],bn=0;function En(Nr,Er){this.id=bn++,this.fragId=Nr,this.vertId=Er,this.program=null,this.uniforms=[],this.attributes=[],this.refCount=1,Vt.profile&&(this.stats={uniformsCount:0,attributesCount:0})}function Mn(Nr,Er,oi){var wi,Wn,ci=Tn(zn,Nr.fragId),Mi=Tn(Nn,Nr.vertId),Xi=Nr.program=Te.createProgram();if(Te.attachShader(Xi,ci),Te.attachShader(Xi,Mi),oi)for(wi=0;wi<oi.length;++wi){var Rn=oi[wi];Te.bindAttribLocation(Xi,Rn[0],Rn[1])}Te.linkProgram(Xi),Q.linkError(Te,Xi,Qe.str(Nr.fragId),Qe.str(Nr.vertId),Er);var kn=Te.getProgramParameter(Xi,Xn);Vt.profile&&(Nr.stats.uniformsCount=kn);var Si=Nr.uniforms;for(wi=0;wi<kn;++wi)if(Wn=Te.getActiveUniform(Xi,wi),Wn)if(Wn.size>1)for(var mi=0;mi<Wn.size;++mi){var qn=Wn.name.replace("[0]","["+mi+"]");hn(Si,new Ar(qn,Qe.id(qn),Te.getUniformLocation(Xi,qn),Wn))}else hn(Si,new Ar(Wn.name,Qe.id(Wn.name),Te.getUniformLocation(Xi,Wn.name),Wn));var Ii=Te.getProgramParameter(Xi,yi);Vt.profile&&(Nr.stats.attributesCount=Ii);var _i=Nr.attributes;for(wi=0;wi<Ii;++wi)Wn=Te.getActiveAttrib(Xi,wi),Wn&&hn(_i,new Ar(Wn.name,Qe.id(Wn.name),Te.getAttribLocation(Xi,Wn.name),Wn))}Vt.profile&&(pt.getMaxUniformsCount=function(){var Nr=0;return Bn.forEach(function(Er){Er.stats.uniformsCount>Nr&&(Nr=Er.stats.uniformsCount)}),Nr},pt.getMaxAttributesCount=function(){var Nr=0;return Bn.forEach(function(Er){Er.stats.attributesCount>Nr&&(Nr=Er.stats.attributesCount)}),Nr});function Un(){Sr={},dr={};for(var Nr=0;Nr<Bn.length;++Nr)Mn(Bn[Nr],null,Bn[Nr].attributes.map(function(Er){return[Er.location,Er.name]}))}return{clear:function(){var Nr=Te.deleteShader.bind(Te);ge(Sr).forEach(Nr),Sr={},ge(dr).forEach(Nr),dr={},Bn.forEach(function(Er){Te.deleteProgram(Er.program)}),Bn.length=0,Hn={},pt.shaderCount=0},program:function(Nr,Er,oi,wi){Q.command(Nr>=0,"missing vertex shader",oi),Q.command(Er>=0,"missing fragment shader",oi);var Wn=Hn[Er];Wn||(Wn=Hn[Er]={});var ci=Wn[Nr];if(ci&&(ci.refCount++,!wi))return ci;var Mi=new En(Er,Nr);return pt.shaderCount++,Mn(Mi,oi,wi),ci||(Wn[Nr]=Mi),Bn.push(Mi),l(Mi,{destroy:function(){if(Mi.refCount--,Mi.refCount<=0){Te.deleteProgram(Mi.program);var Xi=Bn.indexOf(Mi);Bn.splice(Xi,1),pt.shaderCount--}Wn[Mi.vertId].refCount<=0&&(Te.deleteShader(dr[Mi.vertId]),delete dr[Mi.vertId],delete Hn[Mi.fragId][Mi.vertId]),Object.keys(Hn[Mi.fragId]).length||(Te.deleteShader(Sr[Mi.fragId]),delete Sr[Mi.fragId],delete Hn[Mi.fragId])}})},restore:Un,shader:Tn,frag:-1,vert:-1}}var Ei=6408,Vi=5121,Ea=3333,Qa=5126;function Ga(Te,Qe,pt,Vt,Sr,dr,Ar){function hn(Bn){var bn;Qe.next===null?(Q(Sr.preserveDrawingBuffer,'you must create a webgl context with "preserveDrawingBuffer":true in order to read pixels from the drawing buffer'),bn=Vi):(Q(Qe.next.colorAttachments[0].texture!==null,"You cannot read from a renderbuffer"),bn=Qe.next.colorAttachments[0].texture._texture.type,Q.optional(function(){dr.oes_texture_float?(Q(bn===Vi||bn===Qa,"Reading from a framebuffer is only allowed for the types 'uint8' and 'float'"),bn===Qa&&Q(Ar.readFloat,"Reading 'float' values is not permitted in your browser. For a fallback, please see: https://www.npmjs.com/package/glsl-read-float")):Q(bn===Vi,"Reading from a framebuffer is only allowed for the type 'uint8'")}));var En=0,Mn=0,Un=Vt.framebufferWidth,Nr=Vt.framebufferHeight,Er=null;v(Bn)?Er=Bn:Bn&&(Q.type(Bn,"object","invalid arguments to regl.read()"),En=Bn.x|0,Mn=Bn.y|0,Q(En>=0&&En<Vt.framebufferWidth,"invalid x offset for regl.read"),Q(Mn>=0&&Mn<Vt.framebufferHeight,"invalid y offset for regl.read"),Un=(Bn.width||Vt.framebufferWidth-En)|0,Nr=(Bn.height||Vt.framebufferHeight-Mn)|0,Er=Bn.data||null),Er&&(bn===Vi?Q(Er instanceof Uint8Array,"buffer must be 'Uint8Array' when reading from a framebuffer of type 'uint8'"):bn===Qa&&Q(Er instanceof Float32Array,"buffer must be 'Float32Array' when reading from a framebuffer of type 'float'")),Q(Un>0&&Un+En<=Vt.framebufferWidth,"invalid width for read pixels"),Q(Nr>0&&Nr+Mn<=Vt.framebufferHeight,"invalid height for read pixels"),pt();var oi=Un*Nr*4;return Er||(bn===Vi?Er=new Uint8Array(oi):bn===Qa&&(Er=Er||new Float32Array(oi))),Q.isTypedArray(Er,"data buffer for regl.read() must be a typedarray"),Q(Er.byteLength>=oi,"data buffer for regl.read() too small"),Te.pixelStorei(Ea,4),Te.readPixels(En,Mn,Un,Nr,Ei,bn,Er),Er}function Tn(Bn){var bn;return Qe.setFBO({framebuffer:Bn.framebuffer},function(){bn=hn(Bn)}),bn}function Hn(Bn){return!Bn||!("framebuffer"in Bn)?hn(Bn):Tn(Bn)}return Hn}function io(Te){return Array.prototype.slice.call(Te)}function ya(Te){return io(Te).join("")}function yo(){var Te=0,Qe=[],pt=[];function Vt(bn){for(var En=0;En<pt.length;++En)if(pt[En]===bn)return Qe[En];var Mn="g"+Te++;return Qe.push(Mn),pt.push(bn),Mn}function Sr(){var bn=[];function En(){bn.push.apply(bn,io(arguments))}var Mn=[];function Un(){var Nr="v"+Te++;return Mn.push(Nr),arguments.length>0&&(bn.push(Nr,"="),bn.push.apply(bn,io(arguments)),bn.push(";")),Nr}return l(En,{def:Un,toString:function(){return ya([Mn.length>0?"var "+Mn.join(",")+";":"",ya(bn)])}})}function dr(){var bn=Sr(),En=Sr(),Mn=bn.toString,Un=En.toString;function Nr(Er,oi){En(Er,oi,"=",bn.def(Er,oi),";")}return l(function(){bn.apply(bn,io(arguments))},{def:bn.def,entry:bn,exit:En,save:Nr,set:function(Er,oi,wi){Nr(Er,oi),bn(Er,oi,"=",wi,";")},toString:function(){return Mn()+Un()}})}function Ar(){var bn=ya(arguments),En=dr(),Mn=dr(),Un=En.toString,Nr=Mn.toString;return l(En,{then:function(){return En.apply(En,io(arguments)),this},else:function(){return Mn.apply(Mn,io(arguments)),this},toString:function(){var Er=Nr();return Er&&(Er="else{"+Er+"}"),ya(["if(",bn,"){",Un(),"}",Er])}})}var hn=Sr(),Tn={};function Hn(bn,En){var Mn=[];function Un(){var Wn="a"+Mn.length;return Mn.push(Wn),Wn}En=En||0;for(var Nr=0;Nr<En;++Nr)Un();var Er=dr(),oi=Er.toString,wi=Tn[bn]=l(Er,{arg:Un,toString:function(){return ya(["function(",Mn.join(),"){",oi(),"}"])}});return wi}function Bn(){var bn=['"use strict";',hn,"return {"];Object.keys(Tn).forEach(function(Nr){bn.push('"',Nr,'":',Tn[Nr].toString(),",")}),bn.push("}");var En=ya(bn).replace(/;/g,`;
`).replace(/}/g,`}
`).replace(/{/g,`{
`),Mn=typeof my!="undefined"&&!!my&&typeof my.showToast=="function"&&my.isFRM!==!0,Un=Mn?w.Function.apply(null,Qe.concat(En)):Function.apply(null,Qe.concat(En));return Un.apply(null,pt)}return{global:hn,link:Vt,block:Sr,proc:Hn,scope:dr,cond:Ar,compile:Bn}}var _o="xyzw".split(""),po=5121,Ha=1,Ro=2,eo=0,Ia=1,Gu=2,co=3,es=4,ru=5,pu=6,Ts="dither",rl="blend.enable",Nu="blend.color",zo="blend.equation",An="blend.func",vu="depth.enable",Nt="depth.func",gl="depth.range",Xu="depth.mask",Sf="colorMask",ip="cull.enable",Kc="cull.face",fl="frontFace",Qc="lineWidth",Sc="polygonOffset.enable",Lu="polygonOffset.offset",Fl="sample.alpha",fc="sample.enable",Jc="sample.coverage",ts="stencil.enable",pl="stencil.mask",Rl="stencil.func",qc="stencil.opFront",ap="stencil.opBack",ef="scissor.enable",wf="scissor.box",tc="viewport",tf="profile",Pl="framebuffer",rf="vert",Af="frag",Yu="elements",mu="primitive",nf="count",Cf="offset",wp="instances",Gf="vao",zp="Width",Tf="Height",ks=Pl+zp,Mf=Pl+Tf,Yp=tc+zp,Up=tc+Tf,Jo="drawingBuffer",Ap=Jo+zp,op=Jo+Tf,gu=[An,zo,Rl,qc,ap,Jc,tc,wf,Lu],nl=34962,il=34963,hp=35632,wc=35633,Zp=3553,jp=34067,rc=2884,dp=3042,oh=3024,Ms=2960,kl=2929,Bc=3089,vp=32823,Hf=32926,mp=32928,gp=5126,Vp=35664,If=35665,Of=35666,af=5124,sh=35667,zc=35668,yp=35669,df=35670,_p=35671,Rf=35672,xp=35673,hl=35674,He=35675,Au=35676,yl=35678,bp=35680,Kp=4,Ku=1028,Ac=1029,kh=2304,ls=2305,uh=32775,Pf=32776,kf=519,Uc=7680,al=0,Lf=1,Wf=32774,pc=513,Uh=36160,Zh=36064,Df={0:0,1:1,zero:0,one:1,"src color":768,"one minus src color":769,"src alpha":770,"one minus src alpha":771,"dst color":774,"one minus dst color":775,"dst alpha":772,"one minus dst alpha":773,"constant color":32769,"one minus constant color":32770,"constant alpha":32771,"one minus constant alpha":32772,"src alpha saturate":776},vf=["constant color, constant alpha","one minus constant color, constant alpha","constant color, one minus constant alpha","one minus constant color, one minus constant alpha","constant alpha, constant color","constant alpha, one minus constant color","one minus constant alpha, constant color","one minus constant alpha, one minus constant color"],Ep={never:512,less:513,"<":513,equal:514,"=":514,"==":514,"===":514,lequal:515,"<=":515,greater:516,">":516,notequal:517,"!=":517,"!==":517,gequal:518,">=":518,always:519},H={0:0,zero:0,keep:7680,replace:7681,increment:7682,decrement:7683,"increment wrap":34055,"decrement wrap":34056,invert:5386},ue={frag:hp,vert:wc},_e={cw:kh,ccw:ls};function Be(Te){return Array.isArray(Te)||v(Te)||Bt(Te)}function rt(Te){return Te.sort(function(Qe,pt){return Qe===tc?-1:pt===tc?1:Qe<pt?-1:1})}function at(Te,Qe,pt,Vt){this.thisDep=Te,this.contextDep=Qe,this.propDep=pt,this.append=Vt}function Ue(Te){return Te&&!(Te.thisDep||Te.contextDep||Te.propDep)}function Xt(Te){return new at(!1,!1,!1,Te)}function Ot(Te,Qe){var pt=Te.type;if(pt===eo){var Vt=Te.data.length;return new at(!0,Vt>=1,Vt>=2,Qe)}else if(pt===es){var Sr=Te.data;return new at(Sr.thisDep,Sr.contextDep,Sr.propDep,Qe)}else{if(pt===ru)return new at(!1,!1,!1,Qe);if(pt===pu){for(var dr=!1,Ar=!1,hn=!1,Tn=0;Tn<Te.data.length;++Tn){var Hn=Te.data[Tn];if(Hn.type===Ia)hn=!0;else if(Hn.type===Gu)Ar=!0;else if(Hn.type===co)dr=!0;else if(Hn.type===eo){dr=!0;var Bn=Hn.data;Bn>=1&&(Ar=!0),Bn>=2&&(hn=!0)}else Hn.type===es&&(dr=dr||Hn.data.thisDep,Ar=Ar||Hn.data.contextDep,hn=hn||Hn.data.propDep)}return new at(dr,Ar,hn,Qe)}else return new at(pt===co,pt===Gu,pt===Ia,Qe)}}var vr=new at(!1,!1,!1,function(){});function xn(Te,Qe,pt,Vt,Sr,dr,Ar,hn,Tn,Hn,Bn,bn,En,Mn,Un){var Nr=Hn.Record,Er={add:32774,subtract:32778,"reverse subtract":32779};pt.ext_blend_minmax&&(Er.min=uh,Er.max=Pf);var oi=pt.angle_instanced_arrays,wi=pt.webgl_draw_buffers,Wn=pt.oes_vertex_array_object,ci={dirty:!0,profile:Un.profile},Mi={},Xi=[],Rn={},kn={};function Si(Ht){return Ht.replace(".","_")}function mi(Ht,Mt,yr){var Zr=Si(Ht);Xi.push(Ht),Mi[Zr]=ci[Zr]=!!yr,Rn[Zr]=Mt}function qn(Ht,Mt,yr){var Zr=Si(Ht);Xi.push(Ht),Array.isArray(yr)?(ci[Zr]=yr.slice(),Mi[Zr]=yr.slice()):ci[Zr]=Mi[Zr]=yr,kn[Zr]=Mt}mi(Ts,oh),mi(rl,dp),qn(Nu,"blendColor",[0,0,0,0]),qn(zo,"blendEquationSeparate",[Wf,Wf]),qn(An,"blendFuncSeparate",[Lf,al,Lf,al]),mi(vu,kl,!0),qn(Nt,"depthFunc",pc),qn(gl,"depthRange",[0,1]),qn(Xu,"depthMask",!0),qn(Sf,Sf,[!0,!0,!0,!0]),mi(ip,rc),qn(Kc,"cullFace",Ac),qn(fl,fl,ls),qn(Qc,Qc,1),mi(Sc,vp),qn(Lu,"polygonOffset",[0,0]),mi(Fl,Hf),mi(fc,mp),qn(Jc,"sampleCoverage",[1,!1]),mi(ts,Ms),qn(pl,"stencilMask",-1),qn(Rl,"stencilFunc",[kf,0,-1]),qn(qc,"stencilOpSeparate",[Ku,Uc,Uc,Uc]),qn(ap,"stencilOpSeparate",[Ac,Uc,Uc,Uc]),mi(ef,Bc),qn(wf,"scissor",[0,0,Te.drawingBufferWidth,Te.drawingBufferHeight]),qn(tc,tc,[0,0,Te.drawingBufferWidth,Te.drawingBufferHeight]);var Ii={gl:Te,context:En,strings:Qe,next:Mi,current:ci,draw:bn,elements:dr,buffer:Sr,shader:Bn,attributes:Hn.state,vao:Hn,uniforms:Tn,framebuffer:hn,extensions:pt,timer:Mn,isBufferArgs:Be},_i={primTypes:ii,compareFuncs:Ep,blendFuncs:Df,blendEquations:Er,stencilOps:H,glTypes:Ss,orientationType:_e};Q.optional(function(){Ii.isArrayLike=bu}),wi&&(_i.backBuffer=[Ac],_i.drawBuffer=Zt(Vt.maxDrawbuffers,function(Ht){return Ht===0?[0]:Zt(Ht,function(Mt){return Zh+Mt})}));var ao=0;function La(){var Ht=yo(),Mt=Ht.link,yr=Ht.global;Ht.id=ao++,Ht.batchId="0";var Zr=Mt(Ii),Sn=Ht.shared={props:"a0"};Object.keys(Ii).forEach(function(fr){Sn[fr]=yr.def(Zr,".",fr)}),Q.optional(function(){Ht.CHECK=Mt(Q),Ht.commandStr=Q.guessCommand(),Ht.command=Mt(Ht.commandStr),Ht.assert=function(fr,jt,rn){fr("if(!(",jt,"))",this.CHECK,".commandRaise(",Mt(rn),",",this.command,");")},_i.invalidBlendCombinations=vf});var Or=Ht.next={},ir=Ht.current={};Object.keys(kn).forEach(function(fr){Array.isArray(ci[fr])&&(Or[fr]=yr.def(Sn.next,".",fr),ir[fr]=yr.def(Sn.current,".",fr))});var Br=Ht.constants={};Object.keys(_i).forEach(function(fr){Br[fr]=yr.def(JSON.stringify(_i[fr]))}),Ht.invoke=function(fr,jt){switch(jt.type){case eo:var rn=["this",Sn.context,Sn.props,Ht.batchId];return fr.def(Mt(jt.data),".call(",rn.slice(0,Math.max(jt.data.length+1,4)),")");case Ia:return fr.def(Sn.props,jt.data);case Gu:return fr.def(Sn.context,jt.data);case co:return fr.def("this",jt.data);case es:return jt.data.append(Ht,fr),jt.data.ref;case ru:return jt.data.toString();case pu:return jt.data.map(function(jr){return Ht.invoke(fr,jr)})}},Ht.attribCache={};var kt={};return Ht.scopeAttrib=function(fr){var jt=Qe.id(fr);if(jt in kt)return kt[jt];var rn=Hn.scope[jt];rn||(rn=Hn.scope[jt]=new Nr);var jr=kt[jt]=Mt(rn);return jr},Ht}function Qi(Ht){var Mt=Ht.static,yr=Ht.dynamic,Zr;if(tf in Mt){var Sn=!!Mt[tf];Zr=Xt(function(ir,Br){return Sn}),Zr.enable=Sn}else if(tf in yr){var Or=yr[tf];Zr=Ot(Or,function(ir,Br){return ir.invoke(Br,Or)})}return Zr}function aa(Ht,Mt){var yr=Ht.static,Zr=Ht.dynamic;if(Pl in yr){var Sn=yr[Pl];return Sn?(Sn=hn.getFramebuffer(Sn),Q.command(Sn,"invalid framebuffer object"),Xt(function(ir,Br){var kt=ir.link(Sn),fr=ir.shared;Br.set(fr.framebuffer,".next",kt);var jt=fr.context;return Br.set(jt,"."+ks,kt+".width"),Br.set(jt,"."+Mf,kt+".height"),kt})):Xt(function(ir,Br){var kt=ir.shared;Br.set(kt.framebuffer,".next","null");var fr=kt.context;return Br.set(fr,"."+ks,fr+"."+Ap),Br.set(fr,"."+Mf,fr+"."+op),"null"})}else if(Pl in Zr){var Or=Zr[Pl];return Ot(Or,function(ir,Br){var kt=ir.invoke(Br,Or),fr=ir.shared,jt=fr.framebuffer,rn=Br.def(jt,".getFramebuffer(",kt,")");Q.optional(function(){ir.assert(Br,"!"+kt+"||"+rn,"invalid framebuffer object")}),Br.set(jt,".next",rn);var jr=fr.context;return Br.set(jr,"."+ks,rn+"?"+rn+".width:"+jr+"."+Ap),Br.set(jr,"."+Mf,rn+"?"+rn+".height:"+jr+"."+op),rn})}else return null}function Fa(Ht,Mt,yr){var Zr=Ht.static,Sn=Ht.dynamic;function Or(kt){if(kt in Zr){var fr=Zr[kt];Q.commandType(fr,"object","invalid "+kt,yr.commandStr);var jt=!0,rn=fr.x|0,jr=fr.y|0,Cn,Ci;return"width"in fr?(Cn=fr.width|0,Q.command(Cn>=0,"invalid "+kt,yr.commandStr)):jt=!1,"height"in fr?(Ci=fr.height|0,Q.command(Ci>=0,"invalid "+kt,yr.commandStr)):jt=!1,new at(!jt&&Mt&&Mt.thisDep,!jt&&Mt&&Mt.contextDep,!jt&&Mt&&Mt.propDep,function($i,xa){var va=$i.shared.context,Ca=Cn;"width"in fr||(Ca=xa.def(va,".",ks,"-",rn));var pa=Ci;return"height"in fr||(pa=xa.def(va,".",Mf,"-",jr)),[rn,jr,Ca,pa]})}else if(kt in Sn){var Oi=Sn[kt],sa=Ot(Oi,function($i,xa){var va=$i.invoke(xa,Oi);Q.optional(function(){$i.assert(xa,va+"&&typeof "+va+'==="object"',"invalid "+kt)});var Ca=$i.shared.context,pa=xa.def(va,".x|0"),Sa=xa.def(va,".y|0"),to=xa.def('"width" in ',va,"?",va,".width|0:","(",Ca,".",ks,"-",pa,")"),Is=xa.def('"height" in ',va,"?",va,".height|0:","(",Ca,".",Mf,"-",Sa,")");return Q.optional(function(){$i.assert(xa,to+">=0&&"+Is+">=0","invalid "+kt)}),[pa,Sa,to,Is]});return Mt&&(sa.thisDep=sa.thisDep||Mt.thisDep,sa.contextDep=sa.contextDep||Mt.contextDep,sa.propDep=sa.propDep||Mt.propDep),sa}else return Mt?new at(Mt.thisDep,Mt.contextDep,Mt.propDep,function($i,xa){var va=$i.shared.context;return[0,0,xa.def(va,".",ks),xa.def(va,".",Mf)]}):null}var ir=Or(tc);if(ir){var Br=ir;ir=new at(ir.thisDep,ir.contextDep,ir.propDep,function(kt,fr){var jt=Br.append(kt,fr),rn=kt.shared.context;return fr.set(rn,"."+Yp,jt[2]),fr.set(rn,"."+Up,jt[3]),jt})}return{viewport:ir,scissor_box:Or(wf)}}function $a(Ht,Mt){var yr=Ht.static,Zr=typeof yr[Af]=="string"&&typeof yr[rf]=="string";if(Zr){if(Object.keys(Mt.dynamic).length>0)return null;var Sn=Mt.static,Or=Object.keys(Sn);if(Or.length>0&&typeof Sn[Or[0]]=="number"){for(var ir=[],Br=0;Br<Or.length;++Br)Q(typeof Sn[Or[Br]]=="number","must specify all vertex attribute locations when using vaos"),ir.push([Sn[Or[Br]]|0,Or[Br]]);return ir}}return null}function oo(Ht,Mt,yr){var Zr=Ht.static,Sn=Ht.dynamic;function Or(jt){if(jt in Zr){var rn=Qe.id(Zr[jt]);Q.optional(function(){Bn.shader(ue[jt],rn,Q.guessCommand())});var jr=Xt(function(){return rn});return jr.id=rn,jr}else if(jt in Sn){var Cn=Sn[jt];return Ot(Cn,function(Ci,Oi){var sa=Ci.invoke(Oi,Cn),$i=Oi.def(Ci.shared.strings,".id(",sa,")");return Q.optional(function(){Oi(Ci.shared.shader,".shader(",ue[jt],",",$i,",",Ci.command,");")}),$i})}return null}var ir=Or(Af),Br=Or(rf),kt=null,fr;return Ue(ir)&&Ue(Br)?(kt=Bn.program(Br.id,ir.id,null,yr),fr=Xt(function(jt,rn){return jt.link(kt)})):fr=new at(ir&&ir.thisDep||Br&&Br.thisDep,ir&&ir.contextDep||Br&&Br.contextDep,ir&&ir.propDep||Br&&Br.propDep,function(jt,rn){var jr=jt.shared.shader,Cn;ir?Cn=ir.append(jt,rn):Cn=rn.def(jr,".",Af);var Ci;Br?Ci=Br.append(jt,rn):Ci=rn.def(jr,".",rf);var Oi=jr+".program("+Ci+","+Cn;return Q.optional(function(){Oi+=","+jt.command}),rn.def(Oi+")")}),{frag:ir,vert:Br,progVar:fr,program:kt}}function is(Ht,Mt){var yr=Ht.static,Zr=Ht.dynamic,Sn={},Or=!1;function ir(){if(Gf in yr){var xa=yr[Gf];return xa!==null&&Hn.getVAO(xa)===null&&(xa=Hn.createVAO(xa)),Or=!0,Sn.vao=xa,Xt(function(Ca){var pa=Hn.getVAO(xa);return pa?Ca.link(pa):"null"})}else if(Gf in Zr){Or=!0;var va=Zr[Gf];return Ot(va,function(Ca,pa){var Sa=Ca.invoke(pa,va);return pa.def(Ca.shared.vao+".getVAO("+Sa+")")})}return null}var Br=ir(),kt=!1;function fr(){if(Yu in yr){var xa=yr[Yu];if(Sn.elements=xa,Be(xa)){var va=Sn.elements=dr.create(xa,!0);xa=dr.getElements(va),kt=!0}else xa&&(xa=dr.getElements(xa),kt=!0,Q.command(xa,"invalid elements",Mt.commandStr));var Ca=Xt(function(Sa,to){if(xa){var Is=Sa.link(xa);return Sa.ELEMENTS=Is,Is}return Sa.ELEMENTS=null,null});return Ca.value=xa,Ca}else if(Yu in Zr){kt=!0;var pa=Zr[Yu];return Ot(pa,function(Sa,to){var Is=Sa.shared,_l=Is.isBufferArgs,Lo=Is.elements,Ja=Sa.invoke(to,pa),Cu=to.def("null"),Uu=to.def(_l,"(",Ja,")"),dl=Sa.cond(Uu).then(Cu,"=",Lo,".createStream(",Ja,");").else(Cu,"=",Lo,".getElements(",Ja,");");return Q.optional(function(){Sa.assert(dl.else,"!"+Ja+"||"+Cu,"invalid elements")}),to.entry(dl),to.exit(Sa.cond(Uu).then(Lo,".destroyStream(",Cu,");")),Sa.ELEMENTS=Cu,Cu})}else if(Or)return new at(Br.thisDep,Br.contextDep,Br.propDep,function(Sa,to){return to.def(Sa.shared.vao+".currentVAO?"+Sa.shared.elements+".getElements("+Sa.shared.vao+".currentVAO.elements):null")});return null}var jt=fr();function rn(){if(mu in yr){var xa=yr[mu];return Sn.primitive=xa,Q.commandParameter(xa,ii,"invalid primitve",Mt.commandStr),Xt(function(Ca,pa){return ii[xa]})}else if(mu in Zr){var va=Zr[mu];return Ot(va,function(Ca,pa){var Sa=Ca.constants.primTypes,to=Ca.invoke(pa,va);return Q.optional(function(){Ca.assert(pa,to+" in "+Sa,"invalid primitive, must be one of "+Object.keys(ii))}),pa.def(Sa,"[",to,"]")})}else{if(kt)return Ue(jt)?jt.value?Xt(function(Ca,pa){return pa.def(Ca.ELEMENTS,".primType")}):Xt(function(){return Kp}):new at(jt.thisDep,jt.contextDep,jt.propDep,function(Ca,pa){var Sa=Ca.ELEMENTS;return pa.def(Sa,"?",Sa,".primType:",Kp)});if(Or)return new at(Br.thisDep,Br.contextDep,Br.propDep,function(Ca,pa){return pa.def(Ca.shared.vao+".currentVAO?"+Ca.shared.vao+".currentVAO.primitive:"+Kp)})}return null}function jr(xa,va){if(xa in yr){var Ca=yr[xa]|0;return va?Sn.offset=Ca:Sn.instances=Ca,Q.command(!va||Ca>=0,"invalid "+xa,Mt.commandStr),Xt(function(Sa,to){return va&&(Sa.OFFSET=Ca),Ca})}else if(xa in Zr){var pa=Zr[xa];return Ot(pa,function(Sa,to){var Is=Sa.invoke(to,pa);return va&&(Sa.OFFSET=Is,Q.optional(function(){Sa.assert(to,Is+">=0","invalid "+xa)})),Is})}else if(va){if(kt)return Xt(function(Sa,to){return Sa.OFFSET=0,0});if(Or)return new at(Br.thisDep,Br.contextDep,Br.propDep,function(Sa,to){return to.def(Sa.shared.vao+".currentVAO?"+Sa.shared.vao+".currentVAO.offset:0")})}else if(Or)return new at(Br.thisDep,Br.contextDep,Br.propDep,function(Sa,to){return to.def(Sa.shared.vao+".currentVAO?"+Sa.shared.vao+".currentVAO.instances:-1")});return null}var Cn=jr(Cf,!0);function Ci(){if(nf in yr){var xa=yr[nf]|0;return Sn.count=xa,Q.command(typeof xa=="number"&&xa>=0,"invalid vertex count",Mt.commandStr),Xt(function(){return xa})}else if(nf in Zr){var va=Zr[nf];return Ot(va,function(to,Is){var _l=to.invoke(Is,va);return Q.optional(function(){to.assert(Is,"typeof "+_l+'==="number"&&'+_l+">=0&&"+_l+"===("+_l+"|0)","invalid vertex count")}),_l})}else if(kt)if(Ue(jt)){if(jt)return Cn?new at(Cn.thisDep,Cn.contextDep,Cn.propDep,function(to,Is){var _l=Is.def(to.ELEMENTS,".vertCount-",to.OFFSET);return Q.optional(function(){to.assert(Is,_l+">=0","invalid vertex offset/element buffer too small")}),_l}):Xt(function(to,Is){return Is.def(to.ELEMENTS,".vertCount")});var Ca=Xt(function(){return-1});return Q.optional(function(){Ca.MISSING=!0}),Ca}else{var pa=new at(jt.thisDep||Cn.thisDep,jt.contextDep||Cn.contextDep,jt.propDep||Cn.propDep,function(to,Is){var _l=to.ELEMENTS;return to.OFFSET?Is.def(_l,"?",_l,".vertCount-",to.OFFSET,":-1"):Is.def(_l,"?",_l,".vertCount:-1")});return Q.optional(function(){pa.DYNAMIC=!0}),pa}else if(Or){var Sa=new at(Br.thisDep,Br.contextDep,Br.propDep,function(to,Is){return Is.def(to.shared.vao,".currentVAO?",to.shared.vao,".currentVAO.count:-1")});return Sa}return null}var Oi=rn(),sa=Ci(),$i=jr(wp,!1);return{elements:jt,primitive:Oi,count:sa,instances:$i,offset:Cn,vao:Br,vaoActive:Or,elementsActive:kt,static:Sn}}function Yo(Ht,Mt){var yr=Ht.static,Zr=Ht.dynamic,Sn={};return Xi.forEach(function(Or){var ir=Si(Or);function Br(kt,fr){if(Or in yr){var jt=kt(yr[Or]);Sn[ir]=Xt(function(){return jt})}else if(Or in Zr){var rn=Zr[Or];Sn[ir]=Ot(rn,function(jr,Cn){return fr(jr,Cn,jr.invoke(Cn,rn))})}}switch(Or){case ip:case rl:case Ts:case ts:case vu:case ef:case Sc:case Fl:case fc:case Xu:return Br(function(kt){return Q.commandType(kt,"boolean",Or,Mt.commandStr),kt},function(kt,fr,jt){return Q.optional(function(){kt.assert(fr,"typeof "+jt+'==="boolean"',"invalid flag "+Or,kt.commandStr)}),jt});case Nt:return Br(function(kt){return Q.commandParameter(kt,Ep,"invalid "+Or,Mt.commandStr),Ep[kt]},function(kt,fr,jt){var rn=kt.constants.compareFuncs;return Q.optional(function(){kt.assert(fr,jt+" in "+rn,"invalid "+Or+", must be one of "+Object.keys(Ep))}),fr.def(rn,"[",jt,"]")});case gl:return Br(function(kt){return Q.command(bu(kt)&&kt.length===2&&typeof kt[0]=="number"&&typeof kt[1]=="number"&&kt[0]<=kt[1],"depth range is 2d array",Mt.commandStr),kt},function(kt,fr,jt){Q.optional(function(){kt.assert(fr,kt.shared.isArrayLike+"("+jt+")&&"+jt+".length===2&&typeof "+jt+'[0]==="number"&&typeof '+jt+'[1]==="number"&&'+jt+"[0]<="+jt+"[1]","depth range must be a 2d array")});var rn=fr.def("+",jt,"[0]"),jr=fr.def("+",jt,"[1]");return[rn,jr]});case An:return Br(function(kt){Q.commandType(kt,"object","blend.func",Mt.commandStr);var fr="srcRGB"in kt?kt.srcRGB:kt.src,jt="srcAlpha"in kt?kt.srcAlpha:kt.src,rn="dstRGB"in kt?kt.dstRGB:kt.dst,jr="dstAlpha"in kt?kt.dstAlpha:kt.dst;return Q.commandParameter(fr,Df,ir+".srcRGB",Mt.commandStr),Q.commandParameter(jt,Df,ir+".srcAlpha",Mt.commandStr),Q.commandParameter(rn,Df,ir+".dstRGB",Mt.commandStr),Q.commandParameter(jr,Df,ir+".dstAlpha",Mt.commandStr),Q.command(vf.indexOf(fr+", "+rn)===-1,"unallowed blending combination (srcRGB, dstRGB) = ("+fr+", "+rn+")",Mt.commandStr),[Df[fr],Df[rn],Df[jt],Df[jr]]},function(kt,fr,jt){var rn=kt.constants.blendFuncs;Q.optional(function(){kt.assert(fr,jt+"&&typeof "+jt+'==="object"',"invalid blend func, must be an object")});function jr(va,Ca){var pa=fr.def('"',va,Ca,'" in ',jt,"?",jt,".",va,Ca,":",jt,".",va);return Q.optional(function(){kt.assert(fr,pa+" in "+rn,"invalid "+Or+"."+va+Ca+", must be one of "+Object.keys(Df))}),pa}var Cn=jr("src","RGB"),Ci=jr("dst","RGB");Q.optional(function(){var va=kt.constants.invalidBlendCombinations;kt.assert(fr,va+".indexOf("+Cn+'+", "+'+Ci+") === -1 ","unallowed blending combination for (srcRGB, dstRGB)")});var Oi=fr.def(rn,"[",Cn,"]"),sa=fr.def(rn,"[",jr("src","Alpha"),"]"),$i=fr.def(rn,"[",Ci,"]"),xa=fr.def(rn,"[",jr("dst","Alpha"),"]");return[Oi,$i,sa,xa]});case zo:return Br(function(kt){if(typeof kt=="string")return Q.commandParameter(kt,Er,"invalid "+Or,Mt.commandStr),[Er[kt],Er[kt]];if(typeof kt=="object")return Q.commandParameter(kt.rgb,Er,Or+".rgb",Mt.commandStr),Q.commandParameter(kt.alpha,Er,Or+".alpha",Mt.commandStr),[Er[kt.rgb],Er[kt.alpha]];Q.commandRaise("invalid blend.equation",Mt.commandStr)},function(kt,fr,jt){var rn=kt.constants.blendEquations,jr=fr.def(),Cn=fr.def(),Ci=kt.cond("typeof ",jt,'==="string"');return Q.optional(function(){function Oi(sa,$i,xa){kt.assert(sa,xa+" in "+rn,"invalid "+$i+", must be one of "+Object.keys(Er))}Oi(Ci.then,Or,jt),kt.assert(Ci.else,jt+"&&typeof "+jt+'==="object"',"invalid "+Or),Oi(Ci.else,Or+".rgb",jt+".rgb"),Oi(Ci.else,Or+".alpha",jt+".alpha")}),Ci.then(jr,"=",Cn,"=",rn,"[",jt,"];"),Ci.else(jr,"=",rn,"[",jt,".rgb];",Cn,"=",rn,"[",jt,".alpha];"),fr(Ci),[jr,Cn]});case Nu:return Br(function(kt){return Q.command(bu(kt)&&kt.length===4,"blend.color must be a 4d array",Mt.commandStr),Zt(4,function(fr){return+kt[fr]})},function(kt,fr,jt){return Q.optional(function(){kt.assert(fr,kt.shared.isArrayLike+"("+jt+")&&"+jt+".length===4","blend.color must be a 4d array")}),Zt(4,function(rn){return fr.def("+",jt,"[",rn,"]")})});case pl:return Br(function(kt){return Q.commandType(kt,"number",ir,Mt.commandStr),kt|0},function(kt,fr,jt){return Q.optional(function(){kt.assert(fr,"typeof "+jt+'==="number"',"invalid stencil.mask")}),fr.def(jt,"|0")});case Rl:return Br(function(kt){Q.commandType(kt,"object",ir,Mt.commandStr);var fr=kt.cmp||"keep",jt=kt.ref||0,rn="mask"in kt?kt.mask:-1;return Q.commandParameter(fr,Ep,Or+".cmp",Mt.commandStr),Q.commandType(jt,"number",Or+".ref",Mt.commandStr),Q.commandType(rn,"number",Or+".mask",Mt.commandStr),[Ep[fr],jt,rn]},function(kt,fr,jt){var rn=kt.constants.compareFuncs;Q.optional(function(){function Oi(){kt.assert(fr,Array.prototype.join.call(arguments,""),"invalid stencil.func")}Oi(jt+"&&typeof ",jt,'==="object"'),Oi('!("cmp" in ',jt,")||(",jt,".cmp in ",rn,")")});var jr=fr.def('"cmp" in ',jt,"?",rn,"[",jt,".cmp]",":",Uc),Cn=fr.def(jt,".ref|0"),Ci=fr.def('"mask" in ',jt,"?",jt,".mask|0:-1");return[jr,Cn,Ci]});case qc:case ap:return Br(function(kt){Q.commandType(kt,"object",ir,Mt.commandStr);var fr=kt.fail||"keep",jt=kt.zfail||"keep",rn=kt.zpass||"keep";return Q.commandParameter(fr,H,Or+".fail",Mt.commandStr),Q.commandParameter(jt,H,Or+".zfail",Mt.commandStr),Q.commandParameter(rn,H,Or+".zpass",Mt.commandStr),[Or===ap?Ac:Ku,H[fr],H[jt],H[rn]]},function(kt,fr,jt){var rn=kt.constants.stencilOps;Q.optional(function(){kt.assert(fr,jt+"&&typeof "+jt+'==="object"',"invalid "+Or)});function jr(Cn){return Q.optional(function(){kt.assert(fr,'!("'+Cn+'" in '+jt+")||("+jt+"."+Cn+" in "+rn+")","invalid "+Or+"."+Cn+", must be one of "+Object.keys(H))}),fr.def('"',Cn,'" in ',jt,"?",rn,"[",jt,".",Cn,"]:",Uc)}return[Or===ap?Ac:Ku,jr("fail"),jr("zfail"),jr("zpass")]});case Lu:return Br(function(kt){Q.commandType(kt,"object",ir,Mt.commandStr);var fr=kt.factor|0,jt=kt.units|0;return Q.commandType(fr,"number",ir+".factor",Mt.commandStr),Q.commandType(jt,"number",ir+".units",Mt.commandStr),[fr,jt]},function(kt,fr,jt){Q.optional(function(){kt.assert(fr,jt+"&&typeof "+jt+'==="object"',"invalid "+Or)});var rn=fr.def(jt,".factor|0"),jr=fr.def(jt,".units|0");return[rn,jr]});case Kc:return Br(function(kt){var fr=0;return kt==="front"?fr=Ku:kt==="back"&&(fr=Ac),Q.command(!!fr,ir,Mt.commandStr),fr},function(kt,fr,jt){return Q.optional(function(){kt.assert(fr,jt+'==="front"||'+jt+'==="back"',"invalid cull.face")}),fr.def(jt,'==="front"?',Ku,":",Ac)});case Qc:return Br(function(kt){return Q.command(typeof kt=="number"&&kt>=Vt.lineWidthDims[0]&&kt<=Vt.lineWidthDims[1],"invalid line width, must be a positive number between "+Vt.lineWidthDims[0]+" and "+Vt.lineWidthDims[1],Mt.commandStr),kt},function(kt,fr,jt){return Q.optional(function(){kt.assert(fr,"typeof "+jt+'==="number"&&'+jt+">="+Vt.lineWidthDims[0]+"&&"+jt+"<="+Vt.lineWidthDims[1],"invalid line width")}),jt});case fl:return Br(function(kt){return Q.commandParameter(kt,_e,ir,Mt.commandStr),_e[kt]},function(kt,fr,jt){return Q.optional(function(){kt.assert(fr,jt+'==="cw"||'+jt+'==="ccw"',"invalid frontFace, must be one of cw,ccw")}),fr.def(jt+'==="cw"?'+kh+":"+ls)});case Sf:return Br(function(kt){return Q.command(bu(kt)&&kt.length===4,"color.mask must be length 4 array",Mt.commandStr),kt.map(function(fr){return!!fr})},function(kt,fr,jt){return Q.optional(function(){kt.assert(fr,kt.shared.isArrayLike+"("+jt+")&&"+jt+".length===4","invalid color.mask")}),Zt(4,function(rn){return"!!"+jt+"["+rn+"]"})});case Jc:return Br(function(kt){Q.command(typeof kt=="object"&&kt,ir,Mt.commandStr);var fr="value"in kt?kt.value:1,jt=!!kt.invert;return Q.command(typeof fr=="number"&&fr>=0&&fr<=1,"sample.coverage.value must be a number between 0 and 1",Mt.commandStr),[fr,jt]},function(kt,fr,jt){Q.optional(function(){kt.assert(fr,jt+"&&typeof "+jt+'==="object"',"invalid sample.coverage")});var rn=fr.def('"value" in ',jt,"?+",jt,".value:1"),jr=fr.def("!!",jt,".invert");return[rn,jr]})}}),Sn}function Po(Ht,Mt){var yr=Ht.static,Zr=Ht.dynamic,Sn={};return Object.keys(yr).forEach(function(Or){var ir=yr[Or],Br;if(typeof ir=="number"||typeof ir=="boolean")Br=Xt(function(){return ir});else if(typeof ir=="function"){var kt=ir._reglType;kt==="texture2d"||kt==="textureCube"?Br=Xt(function(fr){return fr.link(ir)}):kt==="framebuffer"||kt==="framebufferCube"?(Q.command(ir.color.length>0,'missing color attachment for framebuffer sent to uniform "'+Or+'"',Mt.commandStr),Br=Xt(function(fr){return fr.link(ir.color[0])})):Q.commandRaise('invalid data for uniform "'+Or+'"',Mt.commandStr)}else bu(ir)?Br=Xt(function(fr){var jt=fr.global.def("[",Zt(ir.length,function(rn){return Q.command(typeof ir[rn]=="number"||typeof ir[rn]=="boolean","invalid uniform "+Or,fr.commandStr),ir[rn]}),"]");return jt}):Q.commandRaise('invalid or missing data for uniform "'+Or+'"',Mt.commandStr);Br.value=ir,Sn[Or]=Br}),Object.keys(Zr).forEach(function(Or){var ir=Zr[Or];Sn[Or]=Ot(ir,function(Br,kt){return Br.invoke(kt,ir)})}),Sn}function js(Ht,Mt){var yr=Ht.static,Zr=Ht.dynamic,Sn={};return Object.keys(yr).forEach(function(Or){var ir=yr[Or],Br=Qe.id(Or),kt=new Nr;if(Be(ir))kt.state=Ha,kt.buffer=Sr.getBuffer(Sr.create(ir,nl,!1,!0)),kt.type=0;else{var fr=Sr.getBuffer(ir);if(fr)kt.state=Ha,kt.buffer=fr,kt.type=0;else if(Q.command(typeof ir=="object"&&ir,"invalid data for attribute "+Or,Mt.commandStr),"constant"in ir){var jt=ir.constant;kt.buffer="null",kt.state=Ro,typeof jt=="number"?kt.x=jt:(Q.command(bu(jt)&&jt.length>0&&jt.length<=4,"invalid constant for attribute "+Or,Mt.commandStr),_o.forEach(function($i,xa){xa<jt.length&&(kt[$i]=jt[xa])}))}else{Be(ir.buffer)?fr=Sr.getBuffer(Sr.create(ir.buffer,nl,!1,!0)):fr=Sr.getBuffer(ir.buffer),Q.command(!!fr,'missing buffer for attribute "'+Or+'"',Mt.commandStr);var rn=ir.offset|0;Q.command(rn>=0,'invalid offset for attribute "'+Or+'"',Mt.commandStr);var jr=ir.stride|0;Q.command(jr>=0&&jr<256,'invalid stride for attribute "'+Or+'", must be integer betweeen [0, 255]',Mt.commandStr);var Cn=ir.size|0;Q.command(!("size"in ir)||Cn>0&&Cn<=4,'invalid size for attribute "'+Or+'", must be 1,2,3,4',Mt.commandStr);var Ci=!!ir.normalized,Oi=0;"type"in ir&&(Q.commandParameter(ir.type,Ss,"invalid type for attribute "+Or,Mt.commandStr),Oi=Ss[ir.type]);var sa=ir.divisor|0;Q.optional(function(){"divisor"in ir&&(Q.command(sa===0||oi,'cannot specify divisor for attribute "'+Or+'", instancing not supported',Mt.commandStr),Q.command(sa>=0,'invalid divisor for attribute "'+Or+'"',Mt.commandStr));var $i=Mt.commandStr,xa=["buffer","offset","divisor","normalized","type","size","stride"];Object.keys(ir).forEach(function(va){Q.command(xa.indexOf(va)>=0,'unknown parameter "'+va+'" for attribute pointer "'+Or+'" (valid parameters are '+xa+")",$i)})}),kt.buffer=fr,kt.state=Ha,kt.size=Cn,kt.normalized=Ci,kt.type=Oi||fr.dtype,kt.offset=rn,kt.stride=jr,kt.divisor=sa}}Sn[Or]=Xt(function($i,xa){var va=$i.attribCache;if(Br in va)return va[Br];var Ca={isStream:!1};return Object.keys(kt).forEach(function(pa){Ca[pa]=kt[pa]}),kt.buffer&&(Ca.buffer=$i.link(kt.buffer),Ca.type=Ca.type||Ca.buffer+".dtype"),va[Br]=Ca,Ca})}),Object.keys(Zr).forEach(function(Or){var ir=Zr[Or];function Br(kt,fr){var jt=kt.invoke(fr,ir),rn=kt.shared,jr=kt.constants,Cn=rn.isBufferArgs,Ci=rn.buffer;Q.optional(function(){kt.assert(fr,jt+"&&(typeof "+jt+'==="object"||typeof '+jt+'==="function")&&('+Cn+"("+jt+")||"+Ci+".getBuffer("+jt+")||"+Ci+".getBuffer("+jt+".buffer)||"+Cn+"("+jt+'.buffer)||("constant" in '+jt+"&&(typeof "+jt+'.constant==="number"||'+rn.isArrayLike+"("+jt+".constant))))",'invalid dynamic attribute "'+Or+'"')});var Oi={isStream:fr.def(!1)},sa=new Nr;sa.state=Ha,Object.keys(sa).forEach(function(Ca){Oi[Ca]=fr.def(""+sa[Ca])});var $i=Oi.buffer,xa=Oi.type;fr("if(",Cn,"(",jt,")){",Oi.isStream,"=true;",$i,"=",Ci,".createStream(",nl,",",jt,");",xa,"=",$i,".dtype;","}else{",$i,"=",Ci,".getBuffer(",jt,");","if(",$i,"){",xa,"=",$i,".dtype;",'}else if("constant" in ',jt,"){",Oi.state,"=",Ro,";","if(typeof "+jt+'.constant === "number"){',Oi[_o[0]],"=",jt,".constant;",_o.slice(1).map(function(Ca){return Oi[Ca]}).join("="),"=0;","}else{",_o.map(function(Ca,pa){return Oi[Ca]+"="+jt+".constant.length>"+pa+"?"+jt+".constant["+pa+"]:0;"}).join(""),"}}else{","if(",Cn,"(",jt,".buffer)){",$i,"=",Ci,".createStream(",nl,",",jt,".buffer);","}else{",$i,"=",Ci,".getBuffer(",jt,".buffer);","}",xa,'="type" in ',jt,"?",jr.glTypes,"[",jt,".type]:",$i,".dtype;",Oi.normalized,"=!!",jt,".normalized;");function va(Ca){fr(Oi[Ca],"=",jt,".",Ca,"|0;")}return va("size"),va("offset"),va("stride"),va("divisor"),fr("}}"),fr.exit("if(",Oi.isStream,"){",Ci,".destroyStream(",$i,");","}"),Oi}Sn[Or]=Ot(ir,Br)}),Sn}function Uo(Ht){var Mt=Ht.static,yr=Ht.dynamic,Zr={};return Object.keys(Mt).forEach(function(Sn){var Or=Mt[Sn];Zr[Sn]=Xt(function(ir,Br){return typeof Or=="number"||typeof Or=="boolean"?""+Or:ir.link(Or)})}),Object.keys(yr).forEach(function(Sn){var Or=yr[Sn];Zr[Sn]=Ot(Or,function(ir,Br){return ir.invoke(Br,Or)})}),Zr}function cs(Ht,Mt,yr,Zr,Sn){var Or=Ht.static,ir=Ht.dynamic;Q.optional(function(){var va=[Pl,rf,Af,Yu,mu,Cf,nf,wp,tf,Gf].concat(Xi);function Ca(pa){Object.keys(pa).forEach(function(Sa){Q.command(va.indexOf(Sa)>=0,'unknown parameter "'+Sa+'"',Sn.commandStr)})}Ca(Or),Ca(ir)});var Br=$a(Ht,Mt),kt=aa(Ht,Sn),fr=Fa(Ht,kt,Sn),jt=is(Ht,Sn),rn=Yo(Ht,Sn),jr=oo(Ht,Sn,Br);function Cn(va){var Ca=fr[va];Ca&&(rn[va]=Ca)}Cn(tc),Cn(Si(wf));var Ci=Object.keys(rn).length>0,Oi={framebuffer:kt,draw:jt,shader:jr,state:rn,dirty:Ci,scopeVAO:null,drawVAO:null,useVAO:!1,attributes:{}};if(Oi.profile=Qi(Ht,Sn),Oi.uniforms=Po(yr,Sn),Oi.drawVAO=Oi.scopeVAO=jt.vao,!Oi.drawVAO&&jr.program&&!Br&&pt.angle_instanced_arrays&&jt.static.elements){var sa=!0,$i=jr.program.attributes.map(function(va){var Ca=Mt.static[va];return sa=sa&&!!Ca,Ca});if(sa&&$i.length>0){var xa=Hn.getVAO(Hn.createVAO({attributes:$i,elements:jt.static.elements}));Oi.drawVAO=new at(null,null,null,function(va,Ca){return va.link(xa)}),Oi.useVAO=!0}}return Br?Oi.useVAO=!0:Oi.attributes=js(Mt,Sn),Oi.context=Uo(Zr,Sn),Oi}function Vs(Ht,Mt,yr){var Zr=Ht.shared,Sn=Zr.context,Or=Ht.scope();Object.keys(yr).forEach(function(ir){Mt.save(Sn,"."+ir);var Br=yr[ir],kt=Br.append(Ht,Mt);Array.isArray(kt)?Or(Sn,".",ir,"=[",kt.join(),"];"):Or(Sn,".",ir,"=",kt,";")}),Mt(Or)}function Ls(Ht,Mt,yr,Zr){var Sn=Ht.shared,Or=Sn.gl,ir=Sn.framebuffer,Br;wi&&(Br=Mt.def(Sn.extensions,".webgl_draw_buffers"));var kt=Ht.constants,fr=kt.drawBuffer,jt=kt.backBuffer,rn;yr?rn=yr.append(Ht,Mt):rn=Mt.def(ir,".next"),Zr||Mt("if(",rn,"!==",ir,".cur){"),Mt("if(",rn,"){",Or,".bindFramebuffer(",Uh,",",rn,".framebuffer);"),wi&&Mt(Br,".drawBuffersWEBGL(",fr,"[",rn,".colorAttachments.length]);"),Mt("}else{",Or,".bindFramebuffer(",Uh,",null);"),wi&&Mt(Br,".drawBuffersWEBGL(",jt,");"),Mt("}",ir,".cur=",rn,";"),Zr||Mt("}")}function Zo(Ht,Mt,yr){var Zr=Ht.shared,Sn=Zr.gl,Or=Ht.current,ir=Ht.next,Br=Zr.current,kt=Zr.next,fr=Ht.cond(Br,".dirty");Xi.forEach(function(jt){var rn=Si(jt);if(!(rn in yr.state)){var jr,Cn;if(rn in ir){jr=ir[rn],Cn=Or[rn];var Ci=Zt(ci[rn].length,function(sa){return fr.def(jr,"[",sa,"]")});fr(Ht.cond(Ci.map(function(sa,$i){return sa+"!=="+Cn+"["+$i+"]"}).join("||")).then(Sn,".",kn[rn],"(",Ci,");",Ci.map(function(sa,$i){return Cn+"["+$i+"]="+sa}).join(";"),";"))}else{jr=fr.def(kt,".",rn);var Oi=Ht.cond(jr,"!==",Br,".",rn);fr(Oi),rn in Rn?Oi(Ht.cond(jr).then(Sn,".enable(",Rn[rn],");").else(Sn,".disable(",Rn[rn],");"),Br,".",rn,"=",jr,";"):Oi(Sn,".",kn[rn],"(",jr,");",Br,".",rn,"=",jr,";")}}}),Object.keys(yr.state).length===0&&fr(Br,".dirty=false;"),Mt(fr)}function Io(Ht,Mt,yr,Zr){var Sn=Ht.shared,Or=Ht.current,ir=Sn.current,Br=Sn.gl;rt(Object.keys(yr)).forEach(function(kt){var fr=yr[kt];if(!(Zr&&!Zr(fr))){var jt=fr.append(Ht,Mt);if(Rn[kt]){var rn=Rn[kt];Ue(fr)?jt?Mt(Br,".enable(",rn,");"):Mt(Br,".disable(",rn,");"):Mt(Ht.cond(jt).then(Br,".enable(",rn,");").else(Br,".disable(",rn,");")),Mt(ir,".",kt,"=",jt,";")}else if(bu(jt)){var jr=Or[kt];Mt(Br,".",kn[kt],"(",jt,");",jt.map(function(Cn,Ci){return jr+"["+Ci+"]="+Cn}).join(";"),";")}else Mt(Br,".",kn[kt],"(",jt,");",ir,".",kt,"=",jt,";")}})}function Go(Ht,Mt){oi&&(Ht.instancing=Mt.def(Ht.shared.extensions,".angle_instanced_arrays"))}function Za(Ht,Mt,yr,Zr,Sn){var Or=Ht.shared,ir=Ht.stats,Br=Or.current,kt=Or.timer,fr=yr.profile;function jt(){var va=typeof my!="undefined"&&!!my&&typeof my.showToast=="function"&&my.isFRM!==!0;return va||typeof performance=="undefined"?"Date.now()":"performance.now()"}var rn,jr;function Cn(va){rn=Mt.def(),va(rn,"=",jt(),";"),typeof Sn=="string"?va(ir,".count+=",Sn,";"):va(ir,".count++;"),Mn&&(Zr?(jr=Mt.def(),va(jr,"=",kt,".getNumPendingQueries();")):va(kt,".beginQuery(",ir,");"))}function Ci(va){va(ir,".cpuTime+=",jt(),"-",rn,";"),Mn&&(Zr?va(kt,".pushScopeStats(",jr,",",kt,".getNumPendingQueries(),",ir,");"):va(kt,".endQuery();"))}function Oi(va){var Ca=Mt.def(Br,".profile");Mt(Br,".profile=",va,";"),Mt.exit(Br,".profile=",Ca,";")}var sa;if(fr){if(Ue(fr)){fr.enable?(Cn(Mt),Ci(Mt.exit),Oi("true")):Oi("false");return}sa=fr.append(Ht,Mt),Oi(sa)}else sa=Mt.def(Br,".profile");var $i=Ht.block();Cn($i),Mt("if(",sa,"){",$i,"}");var xa=Ht.block();Ci(xa),Mt.exit("if(",sa,"){",xa,"}")}function as(Ht,Mt,yr,Zr,Sn){var Or=Ht.shared;function ir(kt){switch(kt){case Vp:case sh:case _p:return 2;case If:case zc:case Rf:return 3;case Of:case yp:case xp:return 4;default:return 1}}function Br(kt,fr,jt){var rn=Or.gl,jr=Mt.def(kt,".location"),Cn=Mt.def(Or.attributes,"[",jr,"]"),Ci=jt.state,Oi=jt.buffer,sa=[jt.x,jt.y,jt.z,jt.w],$i=["buffer","normalized","offset","stride"];function xa(){Mt("if(!",Cn,".buffer){",rn,".enableVertexAttribArray(",jr,");}");var Ca=jt.type,pa;if(jt.size?pa=Mt.def(jt.size,"||",fr):pa=fr,Mt("if(",Cn,".type!==",Ca,"||",Cn,".size!==",pa,"||",$i.map(function(to){return Cn+"."+to+"!=="+jt[to]}).join("||"),"){",rn,".bindBuffer(",nl,",",Oi,".buffer);",rn,".vertexAttribPointer(",[jr,pa,Ca,jt.normalized,jt.stride,jt.offset],");",Cn,".type=",Ca,";",Cn,".size=",pa,";",$i.map(function(to){return Cn+"."+to+"="+jt[to]+";"}).join(""),"}"),oi){var Sa=jt.divisor;Mt("if(",Cn,".divisor!==",Sa,"){",Ht.instancing,".vertexAttribDivisorANGLE(",[jr,Sa],");",Cn,".divisor=",Sa,";}")}}function va(){Mt("if(",Cn,".buffer){",rn,".disableVertexAttribArray(",jr,");",Cn,".buffer=null;","}if(",_o.map(function(Ca,pa){return Cn+"."+Ca+"!=="+sa[pa]}).join("||"),"){",rn,".vertexAttrib4f(",jr,",",sa,");",_o.map(function(Ca,pa){return Cn+"."+Ca+"="+sa[pa]+";"}).join(""),"}")}Ci===Ha?xa():Ci===Ro?va():(Mt("if(",Ci,"===",Ha,"){"),xa(),Mt("}else{"),va(),Mt("}"))}Zr.forEach(function(kt){var fr=kt.name,jt=yr.attributes[fr],rn;if(jt){if(!Sn(jt))return;rn=jt.append(Ht,Mt)}else{if(!Sn(vr))return;var jr=Ht.scopeAttrib(fr);Q.optional(function(){Ht.assert(Mt,jr+".state","missing attribute "+fr)}),rn={},Object.keys(new Nr).forEach(function(Cn){rn[Cn]=Mt.def(jr,".",Cn)})}Br(Ht.link(kt),ir(kt.info.type),rn)})}function so(Ht,Mt,yr,Zr,Sn,Or){for(var ir=Ht.shared,Br=ir.gl,kt,fr=0;fr<Zr.length;++fr){var jt=Zr[fr],rn=jt.name,jr=jt.info.type,Cn=yr.uniforms[rn],Ci=Ht.link(jt),Oi=Ci+".location",sa;if(Cn){if(!Sn(Cn))continue;if(Ue(Cn)){var $i=Cn.value;if(Q.command($i!==null&&typeof $i!="undefined",'missing uniform "'+rn+'"',Ht.commandStr),jr===yl||jr===bp){Q.command(typeof $i=="function"&&(jr===yl&&($i._reglType==="texture2d"||$i._reglType==="framebuffer")||jr===bp&&($i._reglType==="textureCube"||$i._reglType==="framebufferCube")),"invalid texture for uniform "+rn,Ht.commandStr);var xa=Ht.link($i._texture||$i.color[0]._texture);Mt(Br,".uniform1i(",Oi,",",xa+".bind());"),Mt.exit(xa,".unbind();")}else if(jr===hl||jr===He||jr===Au){Q.optional(function(){Q.command(bu($i),"invalid matrix for uniform "+rn,Ht.commandStr),Q.command(jr===hl&&$i.length===4||jr===He&&$i.length===9||jr===Au&&$i.length===16,"invalid length for matrix uniform "+rn,Ht.commandStr)});var va=Ht.global.def("new Float32Array(["+Array.prototype.slice.call($i)+"])"),Ca=2;jr===He?Ca=3:jr===Au&&(Ca=4),Mt(Br,".uniformMatrix",Ca,"fv(",Oi,",false,",va,");")}else{switch(jr){case gp:Q.commandType($i,"number","uniform "+rn,Ht.commandStr),kt="1f";break;case Vp:Q.command(bu($i)&&$i.length===2,"uniform "+rn,Ht.commandStr),kt="2f";break;case If:Q.command(bu($i)&&$i.length===3,"uniform "+rn,Ht.commandStr),kt="3f";break;case Of:Q.command(bu($i)&&$i.length===4,"uniform "+rn,Ht.commandStr),kt="4f";break;case df:Q.commandType($i,"boolean","uniform "+rn,Ht.commandStr),kt="1i";break;case af:Q.commandType($i,"number","uniform "+rn,Ht.commandStr),kt="1i";break;case _p:Q.command(bu($i)&&$i.length===2,"uniform "+rn,Ht.commandStr),kt="2i";break;case sh:Q.command(bu($i)&&$i.length===2,"uniform "+rn,Ht.commandStr),kt="2i";break;case Rf:Q.command(bu($i)&&$i.length===3,"uniform "+rn,Ht.commandStr),kt="3i";break;case zc:Q.command(bu($i)&&$i.length===3,"uniform "+rn,Ht.commandStr),kt="3i";break;case xp:Q.command(bu($i)&&$i.length===4,"uniform "+rn,Ht.commandStr),kt="4i";break;case yp:Q.command(bu($i)&&$i.length===4,"uniform "+rn,Ht.commandStr),kt="4i";break}Mt(Br,".uniform",kt,"(",Oi,",",bu($i)?Array.prototype.slice.call($i):$i,");")}continue}else sa=Cn.append(Ht,Mt)}else{if(!Sn(vr))continue;sa=Mt.def(ir.uniforms,"[",Qe.id(rn),"]")}jr===yl?(Q(!Array.isArray(sa),"must specify a scalar prop for textures"),Mt("if(",sa,"&&",sa,'._reglType==="framebuffer"){',sa,"=",sa,".color[0];","}")):jr===bp&&(Q(!Array.isArray(sa),"must specify a scalar prop for cube maps"),Mt("if(",sa,"&&",sa,'._reglType==="framebufferCube"){',sa,"=",sa,".color[0];","}")),Q.optional(function(){function Uu(Cc,$f){Ht.assert(Mt,Cc,'bad data or missing for uniform "'+rn+'".  '+$f)}function dl(Cc){Q(!Array.isArray(sa),"must not specify an array type for uniform"),Uu("typeof "+sa+'==="'+Cc+'"',"invalid type, expected "+Cc)}function Nl(Cc,$f){Array.isArray(sa)?Q(sa.length===Cc,"must have length "+Cc):Uu(ir.isArrayLike+"("+sa+")&&"+sa+".length==="+Cc,"invalid vector, should have length "+Cc,Ht.commandStr)}function mf(Cc){Q(!Array.isArray(sa),"must not specify a value type"),Uu("typeof "+sa+'==="function"&&'+sa+'._reglType==="texture'+(Cc===Zp?"2d":"Cube")+'"',"invalid texture type",Ht.commandStr)}switch(jr){case af:dl("number");break;case sh:Nl(2,"number");break;case zc:Nl(3,"number");break;case yp:Nl(4,"number");break;case gp:dl("number");break;case Vp:Nl(2,"number");break;case If:Nl(3,"number");break;case Of:Nl(4,"number");break;case df:dl("boolean");break;case _p:Nl(2,"boolean");break;case Rf:Nl(3,"boolean");break;case xp:Nl(4,"boolean");break;case hl:Nl(4,"number");break;case He:Nl(9,"number");break;case Au:Nl(16,"number");break;case yl:mf(Zp);break;case bp:mf(jp);break}});var pa=1;switch(jr){case yl:case bp:var Sa=Mt.def(sa,"._texture");Mt(Br,".uniform1i(",Oi,",",Sa,".bind());"),Mt.exit(Sa,".unbind();");continue;case af:case df:kt="1i";break;case sh:case _p:kt="2i",pa=2;break;case zc:case Rf:kt="3i",pa=3;break;case yp:case xp:kt="4i",pa=4;break;case gp:kt="1f";break;case Vp:kt="2f",pa=2;break;case If:kt="3f",pa=3;break;case Of:kt="4f",pa=4;break;case hl:kt="Matrix2fv";break;case He:kt="Matrix3fv";break;case Au:kt="Matrix4fv";break}if(kt.charAt(0)==="M"){Mt(Br,".uniform",kt,"(",Oi,",");var to=Math.pow(jr-hl+2,2),Is=Ht.global.def("new Float32Array(",to,")");Array.isArray(sa)?Mt("false,(",Zt(to,function(Uu){return Is+"["+Uu+"]="+sa[Uu]}),",",Is,")"):Mt("false,(Array.isArray(",sa,")||",sa," instanceof Float32Array)?",sa,":(",Zt(to,function(Uu){return Is+"["+Uu+"]="+sa+"["+Uu+"]"}),",",Is,")"),Mt(");")}else if(pa>1){for(var _l=[],Lo=[],Ja=0;Ja<pa;++Ja)Array.isArray(sa)?Lo.push(sa[Ja]):Lo.push(Mt.def(sa+"["+Ja+"]")),Or&&_l.push(Mt.def());Or&&Mt("if(!",Ht.batchId,"||",_l.map(function(Uu,dl){return Uu+"!=="+Lo[dl]}).join("||"),"){",_l.map(function(Uu,dl){return Uu+"="+Lo[dl]+";"}).join("")),Mt(Br,".uniform",kt,"(",Oi,",",Lo.join(","),");"),Or&&Mt("}")}else{if(Q(!Array.isArray(sa),"uniform value must not be an array"),Or){var Cu=Mt.def();Mt("if(!",Ht.batchId,"||",Cu,"!==",sa,"){",Cu,"=",sa,";")}Mt(Br,".uniform",kt,"(",Oi,",",sa,");"),Or&&Mt("}")}}}function iu(Ht,Mt,yr,Zr){var Sn=Ht.shared,Or=Sn.gl,ir=Sn.draw,Br=Zr.draw;function kt(){var pa=Br.elements,Sa,to=Mt;return pa?((pa.contextDep&&Zr.contextDynamic||pa.propDep)&&(to=yr),Sa=pa.append(Ht,to),Br.elementsActive&&to("if("+Sa+")"+Or+".bindBuffer("+il+","+Sa+".buffer.buffer);")):(Sa=to.def(),to(Sa,"=",ir,".",Yu,";","if(",Sa,"){",Or,".bindBuffer(",il,",",Sa,".buffer.buffer);}","else if(",Sn.vao,".currentVAO){",Sa,"=",Ht.shared.elements+".getElements("+Sn.vao,".currentVAO.elements);",Wn?"":"if("+Sa+")"+Or+".bindBuffer("+il+","+Sa+".buffer.buffer);","}")),Sa}function fr(){var pa=Br.count,Sa,to=Mt;return pa?((pa.contextDep&&Zr.contextDynamic||pa.propDep)&&(to=yr),Sa=pa.append(Ht,to),Q.optional(function(){pa.MISSING&&Ht.assert(Mt,"false","missing vertex count"),pa.DYNAMIC&&Ht.assert(to,Sa+">=0","missing vertex count")})):(Sa=to.def(ir,".",nf),Q.optional(function(){Ht.assert(to,Sa+">=0","missing vertex count")})),Sa}var jt=kt();function rn(pa){var Sa=Br[pa];return Sa?Sa.contextDep&&Zr.contextDynamic||Sa.propDep?Sa.append(Ht,yr):Sa.append(Ht,Mt):Mt.def(ir,".",pa)}var jr=rn(mu),Cn=rn(Cf),Ci=fr();if(typeof Ci=="number"){if(Ci===0)return}else yr("if(",Ci,"){"),yr.exit("}");var Oi,sa;oi&&(Oi=rn(wp),sa=Ht.instancing);var $i=jt+".type",xa=Br.elements&&Ue(Br.elements)&&!Br.vaoActive;function va(){function pa(){yr(sa,".drawElementsInstancedANGLE(",[jr,Ci,$i,Cn+"<<(("+$i+"-"+po+")>>1)",Oi],");")}function Sa(){yr(sa,".drawArraysInstancedANGLE(",[jr,Cn,Ci,Oi],");")}jt&&jt!=="null"?xa?pa():(yr("if(",jt,"){"),pa(),yr("}else{"),Sa(),yr("}")):Sa()}function Ca(){function pa(){yr(Or+".drawElements("+[jr,Ci,$i,Cn+"<<(("+$i+"-"+po+")>>1)"]+");")}function Sa(){yr(Or+".drawArrays("+[jr,Cn,Ci]+");")}jt&&jt!=="null"?xa?pa():(yr("if(",jt,"){"),pa(),yr("}else{"),Sa(),yr("}")):Sa()}oi&&(typeof Oi!="number"||Oi>=0)?typeof Oi=="string"?(yr("if(",Oi,">0){"),va(),yr("}else if(",Oi,"<0){"),Ca(),yr("}")):va():Ca()}function Oa(Ht,Mt,yr,Zr,Sn){var Or=La(),ir=Or.proc("body",Sn);return Q.optional(function(){Or.commandStr=Mt.commandStr,Or.command=Or.link(Mt.commandStr)}),oi&&(Or.instancing=ir.def(Or.shared.extensions,".angle_instanced_arrays")),Ht(Or,ir,yr,Zr),Or.compile().body}function ko(Ht,Mt,yr,Zr){Go(Ht,Mt),yr.useVAO?yr.drawVAO?Mt(Ht.shared.vao,".setVAO(",yr.drawVAO.append(Ht,Mt),");"):Mt(Ht.shared.vao,".setVAO(",Ht.shared.vao,".targetVAO);"):(Mt(Ht.shared.vao,".setVAO(null);"),as(Ht,Mt,yr,Zr.attributes,function(){return!0})),so(Ht,Mt,yr,Zr.uniforms,function(){return!0},!1),iu(Ht,Mt,Mt,yr)}function Xo(Ht,Mt){var yr=Ht.proc("draw",1);Go(Ht,yr),Vs(Ht,yr,Mt.context),Ls(Ht,yr,Mt.framebuffer),Zo(Ht,yr,Mt),Io(Ht,yr,Mt.state),Za(Ht,yr,Mt,!1,!0);var Zr=Mt.shader.progVar.append(Ht,yr);if(yr(Ht.shared.gl,".useProgram(",Zr,".program);"),Mt.shader.program)ko(Ht,yr,Mt,Mt.shader.program);else{yr(Ht.shared.vao,".setVAO(null);");var Sn=Ht.global.def("{}"),Or=yr.def(Zr,".id"),ir=yr.def(Sn,"[",Or,"]");yr(Ht.cond(ir).then(ir,".call(this,a0);").else(ir,"=",Sn,"[",Or,"]=",Ht.link(function(Br){return Oa(ko,Ht,Mt,Br,1)}),"(",Zr,");",ir,".call(this,a0);"))}Object.keys(Mt.state).length>0&&yr(Ht.shared.current,".dirty=true;"),Ht.shared.vao&&yr(Ht.shared.vao,".setVAO(null);")}function Hs(Ht,Mt,yr,Zr){Ht.batchId="a1",Go(Ht,Mt);function Sn(){return!0}as(Ht,Mt,yr,Zr.attributes,Sn),so(Ht,Mt,yr,Zr.uniforms,Sn,!1),iu(Ht,Mt,Mt,yr)}function jo(Ht,Mt,yr,Zr){Go(Ht,Mt);var Sn=yr.contextDep,Or=Mt.def(),ir="a0",Br="a1",kt=Mt.def();Ht.shared.props=kt,Ht.batchId=Or;var fr=Ht.scope(),jt=Ht.scope();Mt(fr.entry,"for(",Or,"=0;",Or,"<",Br,";++",Or,"){",kt,"=",ir,"[",Or,"];",jt,"}",fr.exit);function rn($i){return $i.contextDep&&Sn||$i.propDep}function jr($i){return!rn($i)}if(yr.needsContext&&Vs(Ht,jt,yr.context),yr.needsFramebuffer&&Ls(Ht,jt,yr.framebuffer),Io(Ht,jt,yr.state,rn),yr.profile&&rn(yr.profile)&&Za(Ht,jt,yr,!1,!0),Zr)yr.useVAO?yr.drawVAO?rn(yr.drawVAO)?jt(Ht.shared.vao,".setVAO(",yr.drawVAO.append(Ht,jt),");"):fr(Ht.shared.vao,".setVAO(",yr.drawVAO.append(Ht,fr),");"):fr(Ht.shared.vao,".setVAO(",Ht.shared.vao,".targetVAO);"):(fr(Ht.shared.vao,".setVAO(null);"),as(Ht,fr,yr,Zr.attributes,jr),as(Ht,jt,yr,Zr.attributes,rn)),so(Ht,fr,yr,Zr.uniforms,jr,!1),so(Ht,jt,yr,Zr.uniforms,rn,!0),iu(Ht,fr,jt,yr);else{var Cn=Ht.global.def("{}"),Ci=yr.shader.progVar.append(Ht,jt),Oi=jt.def(Ci,".id"),sa=jt.def(Cn,"[",Oi,"]");jt(Ht.shared.gl,".useProgram(",Ci,".program);","if(!",sa,"){",sa,"=",Cn,"[",Oi,"]=",Ht.link(function($i){return Oa(Hs,Ht,yr,$i,2)}),"(",Ci,");}",sa,".call(this,a0[",Or,"],",Or,");")}}function Dt(Ht,Mt){var yr=Ht.proc("batch",2);Ht.batchId="0",Go(Ht,yr);var Zr=!1,Sn=!0;Object.keys(Mt.context).forEach(function(Cn){Zr=Zr||Mt.context[Cn].propDep}),Zr||(Vs(Ht,yr,Mt.context),Sn=!1);var Or=Mt.framebuffer,ir=!1;Or?(Or.propDep?Zr=ir=!0:Or.contextDep&&Zr&&(ir=!0),ir||Ls(Ht,yr,Or)):Ls(Ht,yr,null),Mt.state.viewport&&Mt.state.viewport.propDep&&(Zr=!0);function Br(Cn){return Cn.contextDep&&Zr||Cn.propDep}Zo(Ht,yr,Mt),Io(Ht,yr,Mt.state,function(Cn){return!Br(Cn)}),(!Mt.profile||!Br(Mt.profile))&&Za(Ht,yr,Mt,!1,"a1"),Mt.contextDep=Zr,Mt.needsContext=Sn,Mt.needsFramebuffer=ir;var kt=Mt.shader.progVar;if(kt.contextDep&&Zr||kt.propDep)jo(Ht,yr,Mt,null);else{var fr=kt.append(Ht,yr);if(yr(Ht.shared.gl,".useProgram(",fr,".program);"),Mt.shader.program)jo(Ht,yr,Mt,Mt.shader.program);else{yr(Ht.shared.vao,".setVAO(null);");var jt=Ht.global.def("{}"),rn=yr.def(fr,".id"),jr=yr.def(jt,"[",rn,"]");yr(Ht.cond(jr).then(jr,".call(this,a0,a1);").else(jr,"=",jt,"[",rn,"]=",Ht.link(function(Cn){return Oa(jo,Ht,Mt,Cn,2)}),"(",fr,");",jr,".call(this,a0,a1);"))}}Object.keys(Mt.state).length>0&&yr(Ht.shared.current,".dirty=true;"),Ht.shared.vao&&yr(Ht.shared.vao,".setVAO(null);")}function an(Ht,Mt){var yr=Ht.proc("scope",3);Ht.batchId="a2";var Zr=Ht.shared,Sn=Zr.current;Vs(Ht,yr,Mt.context),Mt.framebuffer&&Mt.framebuffer.append(Ht,yr),rt(Object.keys(Mt.state)).forEach(function(ir){var Br=Mt.state[ir],kt=Br.append(Ht,yr);bu(kt)?kt.forEach(function(fr,jt){yr.set(Ht.next[ir],"["+jt+"]",fr)}):yr.set(Zr.next,"."+ir,kt)}),Za(Ht,yr,Mt,!0,!0),[Yu,Cf,nf,wp,mu].forEach(function(ir){var Br=Mt.draw[ir];!Br||yr.set(Zr.draw,"."+ir,""+Br.append(Ht,yr))}),Object.keys(Mt.uniforms).forEach(function(ir){var Br=Mt.uniforms[ir].append(Ht,yr);Array.isArray(Br)&&(Br="["+Br.join()+"]"),yr.set(Zr.uniforms,"["+Qe.id(ir)+"]",Br)}),Object.keys(Mt.attributes).forEach(function(ir){var Br=Mt.attributes[ir].append(Ht,yr),kt=Ht.scopeAttrib(ir);Object.keys(new Nr).forEach(function(fr){yr.set(kt,"."+fr,Br[fr])})}),Mt.scopeVAO&&yr.set(Zr.vao,".targetVAO",Mt.scopeVAO.append(Ht,yr));function Or(ir){var Br=Mt.shader[ir];Br&&yr.set(Zr.shader,"."+ir,Br.append(Ht,yr))}Or(rf),Or(Af),Object.keys(Mt.state).length>0&&(yr(Sn,".dirty=true;"),yr.exit(Sn,".dirty=true;")),yr("a1(",Ht.shared.context,",a0,",Ht.batchId,");")}function un(Ht){if(!(typeof Ht!="object"||bu(Ht))){for(var Mt=Object.keys(Ht),yr=0;yr<Mt.length;++yr)if(Gt.isDynamic(Ht[Mt[yr]]))return!0;return!1}}function oa(Ht,Mt,yr){var Zr=Mt.static[yr];if(!Zr||!un(Zr))return;var Sn=Ht.global,Or=Object.keys(Zr),ir=!1,Br=!1,kt=!1,fr=Ht.global.def("{}");Or.forEach(function(rn){var jr=Zr[rn];if(Gt.isDynamic(jr)){typeof jr=="function"&&(jr=Zr[rn]=Gt.unbox(jr));var Cn=Ot(jr,null);ir=ir||Cn.thisDep,kt=kt||Cn.propDep,Br=Br||Cn.contextDep}else{switch(Sn(fr,".",rn,"="),typeof jr){case"number":Sn(jr);break;case"string":Sn('"',jr,'"');break;case"object":Array.isArray(jr)&&Sn("[",jr.join(),"]");break;default:Sn(Ht.link(jr));break}Sn(";")}});function jt(rn,jr){Or.forEach(function(Cn){var Ci=Zr[Cn];if(!!Gt.isDynamic(Ci)){var Oi=rn.invoke(jr,Ci);jr(fr,".",Cn,"=",Oi,";")}})}Mt.dynamic[yr]=new Gt.DynamicVariable(es,{thisDep:ir,contextDep:Br,propDep:kt,ref:fr,append:jt}),delete Mt.static[yr]}function Do(Ht,Mt,yr,Zr,Sn){var Or=La();Or.stats=Or.link(Sn),Object.keys(Mt.static).forEach(function(Br){oa(Or,Mt,Br)}),gu.forEach(function(Br){oa(Or,Ht,Br)});var ir=cs(Ht,Mt,yr,Zr,Or);return Xo(Or,ir),an(Or,ir),Dt(Or,ir),l(Or.compile(),{destroy:function(){ir.shader.program.destroy()}})}return{next:Mi,current:ci,procs:function(){var Ht=La(),Mt=Ht.proc("poll"),yr=Ht.proc("refresh"),Zr=Ht.block();Mt(Zr),yr(Zr);var Sn=Ht.shared,Or=Sn.gl,ir=Sn.next,Br=Sn.current;Zr(Br,".dirty=false;"),Ls(Ht,Mt),Ls(Ht,yr,null,!0);var kt;oi&&(kt=Ht.link(oi)),pt.oes_vertex_array_object&&yr(Ht.link(pt.oes_vertex_array_object),".bindVertexArrayOES(null);");for(var fr=0;fr<Vt.maxAttributes;++fr){var jt=yr.def(Sn.attributes,"[",fr,"]"),rn=Ht.cond(jt,".buffer");rn.then(Or,".enableVertexAttribArray(",fr,");",Or,".bindBuffer(",nl,",",jt,".buffer.buffer);",Or,".vertexAttribPointer(",fr,",",jt,".size,",jt,".type,",jt,".normalized,",jt,".stride,",jt,".offset);").else(Or,".disableVertexAttribArray(",fr,");",Or,".vertexAttrib4f(",fr,",",jt,".x,",jt,".y,",jt,".z,",jt,".w);",jt,".buffer=null;"),yr(rn),oi&&yr(kt,".vertexAttribDivisorANGLE(",fr,",",jt,".divisor);")}return yr(Ht.shared.vao,".currentVAO=null;",Ht.shared.vao,".setVAO(",Ht.shared.vao,".targetVAO);"),Object.keys(Rn).forEach(function(jr){var Cn=Rn[jr],Ci=Zr.def(ir,".",jr),Oi=Ht.block();Oi("if(",Ci,"){",Or,".enable(",Cn,")}else{",Or,".disable(",Cn,")}",Br,".",jr,"=",Ci,";"),yr(Oi),Mt("if(",Ci,"!==",Br,".",jr,"){",Oi,"}")}),Object.keys(kn).forEach(function(jr){var Cn=kn[jr],Ci=ci[jr],Oi,sa,$i=Ht.block();if($i(Or,".",Cn,"("),bu(Ci)){var xa=Ci.length;Oi=Ht.global.def(ir,".",jr),sa=Ht.global.def(Br,".",jr),$i(Zt(xa,function(va){return Oi+"["+va+"]"}),");",Zt(xa,function(va){return sa+"["+va+"]="+Oi+"["+va+"];"}).join("")),Mt("if(",Zt(xa,function(va){return Oi+"["+va+"]!=="+sa+"["+va+"]"}).join("||"),"){",$i,"}")}else Oi=Zr.def(ir,".",jr),sa=Zr.def(Br,".",jr),$i(Oi,");",Br,".",jr,"=",Oi,";"),Mt("if(",Oi,"!==",sa,"){",$i,"}");yr($i)}),Ht.compile()}(),compile:Do}}function Pn(){return{vaoCount:0,bufferCount:0,elementsCount:0,framebufferCount:0,shaderCount:0,textureCount:0,cubeCount:0,renderbufferCount:0,maxTextureUnits:0}}var ti=34918,Yn=34919,On=35007,Ni=function(Te,Qe){if(!Qe.ext_disjoint_timer_query)return null;var pt=[];function Vt(){return pt.pop()||Qe.ext_disjoint_timer_query.createQueryEXT()}function Sr(oi){pt.push(oi)}var dr=[];function Ar(oi){var wi=Vt();Qe.ext_disjoint_timer_query.beginQueryEXT(On,wi),dr.push(wi),Mn(dr.length-1,dr.length,oi)}function hn(){Qe.ext_disjoint_timer_query.endQueryEXT(On)}function Tn(){this.startQueryIndex=-1,this.endQueryIndex=-1,this.sum=0,this.stats=null}var Hn=[];function Bn(){return Hn.pop()||new Tn}function bn(oi){Hn.push(oi)}var En=[];function Mn(oi,wi,Wn){var ci=Bn();ci.startQueryIndex=oi,ci.endQueryIndex=wi,ci.sum=0,ci.stats=Wn,En.push(ci)}var Un=[],Nr=[];function Er(){var oi,wi,Wn=dr.length;if(Wn!==0){Nr.length=Math.max(Nr.length,Wn+1),Un.length=Math.max(Un.length,Wn+1),Un[0]=0,Nr[0]=0;var ci=0;for(oi=0,wi=0;wi<dr.length;++wi){var Mi=dr[wi];Qe.ext_disjoint_timer_query.getQueryObjectEXT(Mi,Yn)?(ci+=Qe.ext_disjoint_timer_query.getQueryObjectEXT(Mi,ti),Sr(Mi)):dr[oi++]=Mi,Un[wi+1]=ci,Nr[wi+1]=oi}for(dr.length=oi,oi=0,wi=0;wi<En.length;++wi){var Xi=En[wi],Rn=Xi.startQueryIndex,kn=Xi.endQueryIndex;Xi.sum+=Un[kn]-Un[Rn];var Si=Nr[Rn],mi=Nr[kn];mi===Si?(Xi.stats.gpuTime+=Xi.sum/1e6,bn(Xi)):(Xi.startQueryIndex=Si,Xi.endQueryIndex=mi,En[oi++]=Xi)}En.length=oi}}return{beginQuery:Ar,endQuery:hn,pushScopeStats:Mn,update:Er,getNumPendingQueries:function(){return dr.length},clear:function(){pt.push.apply(pt,dr);for(var oi=0;oi<pt.length;oi++)Qe.ext_disjoint_timer_query.deleteQueryEXT(pt[oi]);dr.length=0,pt.length=0},restore:function(){dr.length=0,pt.length=0}}},Bi=16384,ki=256,Gi=1024,Di=34962,Fi="webglcontextlost",bi="webglcontextrestored",qi=1,di=2,ba=3;function _a(Te,Qe){for(var pt=0;pt<Te.length;++pt)if(Te[pt]===Qe)return pt;return-1}function Ya(Te){var Qe=ht(Te);if(!Qe)return null;var pt=Qe.gl,Vt=pt.getContextAttributes(),Sr=pt.isContextLost(),dr=Et(pt,Qe);if(!dr)return null;var Ar=Ui(),hn=Pn(),Tn=dr.extensions,Hn=Ni(pt,Tn),Bn=zi(),bn=pt.drawingBufferWidth,En=pt.drawingBufferHeight,Mn={tick:0,time:0,viewportWidth:bn,viewportHeight:En,framebufferWidth:bn,framebufferHeight:En,drawingBufferWidth:bn,drawingBufferHeight:En,pixelRatio:Qe.pixelRatio},Un={},Nr={elements:null,primitive:4,count:-1,offset:0,instances:-1},Er=qe(pt,Tn),oi=Le(pt,hn,Qe,ci),wi=Tl(pt,Tn,oi,hn),Wn=pn(pt,Tn,Er,hn,oi,wi,Nr);function ci(Oa){return Wn.destroyBuffer(Oa)}var Mi=Li(pt,Ar,hn,Qe),Xi=cu(pt,Tn,Er,function(){Si.procs.poll()},Mn,hn,Qe),Rn=Du(pt,Tn,Er,hn,Qe),kn=tr(pt,Tn,Er,Xi,Rn,hn),Si=xn(pt,Ar,Tn,Er,oi,wi,Xi,kn,Un,Wn,Mi,Nr,Mn,Hn,Qe),mi=Ga(pt,kn,Si.procs.poll,Mn,Vt,Tn,Er),qn=Si.next,Ii=pt.canvas,_i=[],ao=[],La=[],Qi=[Qe.onDestroy],aa=null;function Fa(){if(_i.length===0){Hn&&Hn.update(),aa=null;return}aa=Ir.next(Fa),Go();for(var Oa=_i.length-1;Oa>=0;--Oa){var ko=_i[Oa];ko&&ko(Mn,null,0)}pt.flush(),Hn&&Hn.update()}function $a(){!aa&&_i.length>0&&(aa=Ir.next(Fa))}function oo(){aa&&(Ir.cancel(Fa),aa=null)}function is(Oa){Oa.preventDefault(),Sr=!0,oo(),ao.forEach(function(ko){ko()})}function Yo(Oa){pt.getError(),Sr=!1,dr.restore(),Mi.restore(),oi.restore(),Xi.restore(),Rn.restore(),kn.restore(),Wn.restore(),Hn&&Hn.restore(),Si.procs.refresh(),$a(),La.forEach(function(ko){ko()})}var Po=typeof my!="undefined"&&!!my&&typeof my.showToast=="function"&&my.isFRM!==!0;!Po&&Ii&&(Ii.addEventListener(Fi,is,!1),Ii.addEventListener(bi,Yo,!1));function js(){_i.length=0,oo(),!Po&&Ii&&(Ii.removeEventListener(Fi,is),Ii.removeEventListener(bi,Yo)),Mi.clear(),kn.clear(),Rn.clear(),Wn.clear(),Xi.clear(),wi.clear(),oi.clear(),Hn&&Hn.clear(),Qi.forEach(function(Oa){Oa()})}function Uo(Oa){Q(!!Oa,"invalid args to regl({...})"),Q.type(Oa,"object","invalid args to regl({...})");function ko(Or){var ir=l({},Or);delete ir.uniforms,delete ir.attributes,delete ir.context,delete ir.vao,"stencil"in ir&&ir.stencil.op&&(ir.stencil.opBack=ir.stencil.opFront=ir.stencil.op,delete ir.stencil.op);function Br(kt){if(kt in ir){var fr=ir[kt];delete ir[kt],Object.keys(fr).forEach(function(jt){ir[kt+"."+jt]=fr[jt]})}}return Br("blend"),Br("depth"),Br("cull"),Br("stencil"),Br("polygonOffset"),Br("scissor"),Br("sample"),"vao"in Or&&(ir.vao=Or.vao),ir}function Xo(Or,ir){var Br={},kt={};return Object.keys(Or).forEach(function(fr){var jt=Or[fr];if(Gt.isDynamic(jt)){kt[fr]=Gt.unbox(jt,fr);return}else if(ir&&Array.isArray(jt)){for(var rn=0;rn<jt.length;++rn)if(Gt.isDynamic(jt[rn])){kt[fr]=Gt.unbox(jt,fr);return}}Br[fr]=jt}),{dynamic:kt,static:Br}}var Hs=Xo(Oa.context||{},!0),jo=Xo(Oa.uniforms||{},!0),Dt=Xo(Oa.attributes||{},!1),an=Xo(ko(Oa),!1),un={gpuTime:0,cpuTime:0,count:0},oa=Si.compile(an,Dt,jo,Hs,un),Do=oa.draw,Ht=oa.batch,Mt=oa.scope,yr=[];function Zr(Or){for(;yr.length<Or;)yr.push(null);return yr}function Sn(Or,ir){var Br;if(Sr&&Q.raise("context lost"),typeof Or=="function")return Mt.call(this,null,Or,0);if(typeof ir=="function")if(typeof Or=="number")for(Br=0;Br<Or;++Br)Mt.call(this,null,ir,Br);else if(Array.isArray(Or))for(Br=0;Br<Or.length;++Br)Mt.call(this,Or[Br],ir,Br);else return Mt.call(this,Or,ir,0);else if(typeof Or=="number"){if(Or>0)return Ht.call(this,Zr(Or|0),Or|0)}else if(Array.isArray(Or)){if(Or.length)return Ht.call(this,Or,Or.length)}else return Do.call(this,Or)}return l(Sn,{stats:un,destroy:function(){oa.destroy()}})}var cs=kn.setFBO=Uo({framebuffer:Gt.define.call(null,qi,"framebuffer")});function Vs(Oa,ko){var Xo=0;Si.procs.poll();var Hs=ko.color;Hs&&(pt.clearColor(+Hs[0]||0,+Hs[1]||0,+Hs[2]||0,+Hs[3]||0),Xo|=Bi),"depth"in ko&&(pt.clearDepth(+ko.depth),Xo|=ki),"stencil"in ko&&(pt.clearStencil(ko.stencil|0),Xo|=Gi),Q(!!Xo,"called regl.clear with no buffer specified"),pt.clear(Xo)}function Ls(Oa){if(Q(typeof Oa=="object"&&Oa,"regl.clear() takes an object as input"),"framebuffer"in Oa)if(Oa.framebuffer&&Oa.framebuffer_reglType==="framebufferCube")for(var ko=0;ko<6;++ko)cs(l({framebuffer:Oa.framebuffer.faces[ko]},Oa),Vs);else cs(Oa,Vs);else Vs(null,Oa)}function Zo(Oa){Q.type(Oa,"function","regl.frame() callback must be a function"),_i.push(Oa);function ko(){var Xo=_a(_i,Oa);Q(Xo>=0,"cannot cancel a frame twice");function Hs(){var jo=_a(_i,Hs);_i[jo]=_i[_i.length-1],_i.length-=1,_i.length<=0&&oo()}_i[Xo]=Hs}return $a(),{cancel:ko}}function Io(){var Oa=qn.viewport,ko=qn.scissor_box;Oa[0]=Oa[1]=ko[0]=ko[1]=0,Mn.viewportWidth=Mn.framebufferWidth=Mn.drawingBufferWidth=Oa[2]=ko[2]=pt.drawingBufferWidth,Mn.viewportHeight=Mn.framebufferHeight=Mn.drawingBufferHeight=Oa[3]=ko[3]=pt.drawingBufferHeight}function Go(){Mn.tick+=1,Mn.time=as(),Io(),Si.procs.poll()}function Za(){Xi.refresh(),Io(),Si.procs.refresh(),Hn&&Hn.update()}function as(){return(zi()-Bn)/1e3}Za();function so(Oa,ko){Q.type(ko,"function","listener callback must be a function");var Xo;switch(Oa){case"frame":return Zo(ko);case"lost":Xo=ao;break;case"restore":Xo=La;break;case"destroy":Xo=Qi;break;default:Q.raise("invalid event, must be one of frame,lost,restore,destroy")}return Xo.push(ko),{cancel:function(){for(var Hs=0;Hs<Xo.length;++Hs)if(Xo[Hs]===ko){Xo[Hs]=Xo[Xo.length-1],Xo.pop();return}}}}var iu=l(Uo,{clear:Ls,prop:Gt.define.bind(null,qi),context:Gt.define.bind(null,di),this:Gt.define.bind(null,ba),draw:Uo({}),buffer:function(Oa){return oi.create(Oa,Di,!1,!1)},elements:function(Oa){return wi.create(Oa,!1)},texture:Xi.create2D,cube:Xi.createCube,renderbuffer:Rn.create,framebuffer:kn.create,framebufferCube:kn.createCube,vao:Wn.createVAO,attributes:Vt,frame:Zo,on:so,limits:Er,hasExtension:function(Oa){return Er.extensions.indexOf(Oa.toLowerCase())>=0},read:mi,destroy:js,_gl:pt,_refresh:Za,poll:function(){Go(),Hn&&Hn.update()},now:as,stats:hn});return Qe.onDone(null,iu),iu}return Ya})},87269:function(U,F,c){var w=c(47758),v=c(29165),l=w(v,"DataView");U.exports=l},88987:function(U,F,c){var w=c(71519),v=c(82999),l=c(76111),R=c(50506),A=c(80845);function D(k){var B=-1,z=k==null?0:k.length;for(this.clear();++B<z;){var Z=k[B];this.set(Z[0],Z[1])}}D.prototype.clear=w,D.prototype.delete=v,D.prototype.get=l,D.prototype.has=R,D.prototype.set=A,U.exports=D},175:function(U,F,c){var w=c(2173),v=c(33752),l=c(10548),R=c(63410),A=c(3564);function D(k){var B=-1,z=k==null?0:k.length;for(this.clear();++B<z;){var Z=k[B];this.set(Z[0],Z[1])}}D.prototype.clear=w,D.prototype.delete=v,D.prototype.get=l,D.prototype.has=R,D.prototype.set=A,U.exports=D},35922:function(U,F,c){var w=c(47758),v=c(29165),l=w(v,"Map");U.exports=l},9440:function(U,F,c){var w=c(7140),v=c(56504),l=c(88833),R=c(80953),A=c(70724);function D(k){var B=-1,z=k==null?0:k.length;for(this.clear();++B<z;){var Z=k[B];this.set(Z[0],Z[1])}}D.prototype.clear=w,D.prototype.delete=v,D.prototype.get=l,D.prototype.has=R,D.prototype.set=A,U.exports=D},6795:function(U,F,c){var w=c(47758),v=c(29165),l=w(v,"Promise");U.exports=l},81956:function(U,F,c){var w=c(47758),v=c(29165),l=w(v,"Set");U.exports=l},78188:function(U,F,c){var w=c(9440),v=c(96659),l=c(97230);function R(A){var D=-1,k=A==null?0:A.length;for(this.__data__=new w;++D<k;)this.add(A[D])}R.prototype.add=R.prototype.push=v,R.prototype.has=l,U.exports=R},5929:function(U,F,c){var w=c(175),v=c(40551),l=c(4090),R=c(47694),A=c(86220),D=c(68958);function k(B){var z=this.__data__=new w(B);this.size=z.size}k.prototype.clear=v,k.prototype.delete=l,k.prototype.get=R,k.prototype.has=A,k.prototype.set=D,U.exports=k},74396:function(U,F,c){var w=c(29165),v=w.Symbol;U.exports=v},92210:function(U,F,c){var w=c(29165),v=w.Uint8Array;U.exports=v},69477:function(U,F,c){var w=c(47758),v=c(29165),l=w(v,"WeakMap");U.exports=l},48969:function(U){function F(c,w){for(var v=-1,l=c==null?0:c.length,R=0,A=[];++v<l;){var D=c[v];w(D,v,c)&&(A[R++]=D)}return A}U.exports=F},79809:function(U,F,c){var w=c(39739),v=c(30353),l=c(24669),R=c(61563),A=c(91010),D=c(73806),k=Object.prototype,B=k.hasOwnProperty;function z(Z,W){var Y=l(Z),te=!Y&&v(Z),le=!Y&&!te&&R(Z),be=!Y&&!te&&!le&&D(Z),de=Y||te||le||be,pe=de?w(Z.length,String):[],Oe=pe.length;for(var xe in Z)(W||B.call(Z,xe))&&!(de&&(xe=="length"||le&&(xe=="offset"||xe=="parent")||be&&(xe=="buffer"||xe=="byteLength"||xe=="byteOffset")||A(xe,Oe)))&&pe.push(xe);return pe}U.exports=z},28486:function(U){function F(c,w){for(var v=-1,l=w.length,R=c.length;++v<l;)c[R+v]=w[v];return c}U.exports=F},84330:function(U){function F(c,w){for(var v=-1,l=c==null?0:c.length;++v<l;)if(w(c[v],v,c))return!0;return!1}U.exports=F},62718:function(U,F,c){var w=c(42448);function v(l,R){for(var A=l.length;A--;)if(w(l[A][0],R))return A;return-1}U.exports=v},38084:function(U,F,c){var w=c(28486),v=c(24669);function l(R,A,D){var k=A(R);return v(R)?k:w(k,D(R))}U.exports=l},80732:function(U,F,c){var w=c(74396),v=c(31239),l=c(57058),R="[object Null]",A="[object Undefined]",D=w?w.toStringTag:void 0;function k(B){return B==null?B===void 0?A:R:D&&D in Object(B)?v(B):l(B)}U.exports=k},84742:function(U,F,c){var w=c(80732),v=c(55073),l="[object Arguments]";function R(A){return v(A)&&w(A)==l}U.exports=R},6620:function(U,F,c){var w=c(83977),v=c(55073);function l(R,A,D,k,B){return R===A?!0:R==null||A==null||!v(R)&&!v(A)?R!==R&&A!==A:w(R,A,D,k,l,B)}U.exports=l},83977:function(U,F,c){var w=c(5929),v=c(22684),l=c(7456),R=c(18120),A=c(81887),D=c(24669),k=c(61563),B=c(73806),z=1,Z="[object Arguments]",W="[object Array]",Y="[object Object]",te=Object.prototype,le=te.hasOwnProperty;function be(de,pe,Oe,xe,Ve,K){var ke=D(de),we=D(pe),Me=ke?W:A(de),Xe=we?W:A(pe);Me=Me==Z?Y:Me,Xe=Xe==Z?Y:Xe;var Ke=Me==Y,At=Xe==Y,mt=Me==Xe;if(mt&&k(de)){if(!k(pe))return!1;ke=!0,Ke=!1}if(mt&&!Ke)return K||(K=new w),ke||B(de)?v(de,pe,Oe,xe,Ve,K):l(de,pe,Me,Oe,xe,Ve,K);if(!(Oe&z)){var ie=Ke&&le.call(de,"__wrapped__"),oe=At&&le.call(pe,"__wrapped__");if(ie||oe){var he=ie?de.value():de,ye=oe?pe.value():pe;return K||(K=new w),Ve(he,ye,Oe,xe,K)}}return mt?(K||(K=new w),R(de,pe,Oe,xe,Ve,K)):!1}U.exports=be},58939:function(U,F,c){var w=c(92042),v=c(90654),l=c(36838),R=c(51059),A=/[\\^$.*+?()[\]{}|]/g,D=/^\[object .+?Constructor\]$/,k=Function.prototype,B=Object.prototype,z=k.toString,Z=B.hasOwnProperty,W=RegExp("^"+z.call(Z).replace(A,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function Y(te){if(!l(te)||v(te))return!1;var le=w(te)?W:D;return le.test(R(te))}U.exports=Y},22882:function(U,F,c){var w=c(80732),v=c(17216),l=c(55073),R="[object Arguments]",A="[object Array]",D="[object Boolean]",k="[object Date]",B="[object Error]",z="[object Function]",Z="[object Map]",W="[object Number]",Y="[object Object]",te="[object RegExp]",le="[object Set]",be="[object String]",de="[object WeakMap]",pe="[object ArrayBuffer]",Oe="[object DataView]",xe="[object Float32Array]",Ve="[object Float64Array]",K="[object Int8Array]",ke="[object Int16Array]",we="[object Int32Array]",Me="[object Uint8Array]",Xe="[object Uint8ClampedArray]",Ke="[object Uint16Array]",At="[object Uint32Array]",mt={};mt[xe]=mt[Ve]=mt[K]=mt[ke]=mt[we]=mt[Me]=mt[Xe]=mt[Ke]=mt[At]=!0,mt[R]=mt[A]=mt[pe]=mt[D]=mt[Oe]=mt[k]=mt[B]=mt[z]=mt[Z]=mt[W]=mt[Y]=mt[te]=mt[le]=mt[be]=mt[de]=!1;function ie(oe){return l(oe)&&v(oe.length)&&!!mt[w(oe)]}U.exports=ie},87473:function(U,F,c){var w=c(92963),v=c(14457),l=Object.prototype,R=l.hasOwnProperty;function A(D){if(!w(D))return v(D);var k=[];for(var B in Object(D))R.call(D,B)&&B!="constructor"&&k.push(B);return k}U.exports=A},39739:function(U){function F(c,w){for(var v=-1,l=Array(c);++v<c;)l[v]=w(v);return l}U.exports=F},58792:function(U){function F(c){return function(w){return c(w)}}U.exports=F},29880:function(U){function F(c,w){return c.has(w)}U.exports=F},36633:function(U,F,c){var w=c(29165),v=w["__core-js_shared__"];U.exports=v},22684:function(U,F,c){var w=c(78188),v=c(84330),l=c(29880),R=1,A=2;function D(k,B,z,Z,W,Y){var te=z&R,le=k.length,be=B.length;if(le!=be&&!(te&&be>le))return!1;var de=Y.get(k),pe=Y.get(B);if(de&&pe)return de==B&&pe==k;var Oe=-1,xe=!0,Ve=z&A?new w:void 0;for(Y.set(k,B),Y.set(B,k);++Oe<le;){var K=k[Oe],ke=B[Oe];if(Z)var we=te?Z(ke,K,Oe,B,k,Y):Z(K,ke,Oe,k,B,Y);if(we!==void 0){if(we)continue;xe=!1;break}if(Ve){if(!v(B,function(Me,Xe){if(!l(Ve,Xe)&&(K===Me||W(K,Me,z,Z,Y)))return Ve.push(Xe)})){xe=!1;break}}else if(!(K===ke||W(K,ke,z,Z,Y))){xe=!1;break}}return Y.delete(k),Y.delete(B),xe}U.exports=D},7456:function(U,F,c){var w=c(74396),v=c(92210),l=c(42448),R=c(22684),A=c(7523),D=c(79967),k=1,B=2,z="[object Boolean]",Z="[object Date]",W="[object Error]",Y="[object Map]",te="[object Number]",le="[object RegExp]",be="[object Set]",de="[object String]",pe="[object Symbol]",Oe="[object ArrayBuffer]",xe="[object DataView]",Ve=w?w.prototype:void 0,K=Ve?Ve.valueOf:void 0;function ke(we,Me,Xe,Ke,At,mt,ie){switch(Xe){case xe:if(we.byteLength!=Me.byteLength||we.byteOffset!=Me.byteOffset)return!1;we=we.buffer,Me=Me.buffer;case Oe:return!(we.byteLength!=Me.byteLength||!mt(new v(we),new v(Me)));case z:case Z:case te:return l(+we,+Me);case W:return we.name==Me.name&&we.message==Me.message;case le:case de:return we==Me+"";case Y:var oe=A;case be:var he=Ke&k;if(oe||(oe=D),we.size!=Me.size&&!he)return!1;var ye=ie.get(we);if(ye)return ye==Me;Ke|=B,ie.set(we,Me);var se=R(oe(we),oe(Me),Ke,At,mt,ie);return ie.delete(we),se;case pe:if(K)return K.call(we)==K.call(Me)}return!1}U.exports=ke},18120:function(U,F,c){var w=c(79944),v=1,l=Object.prototype,R=l.hasOwnProperty;function A(D,k,B,z,Z,W){var Y=B&v,te=w(D),le=te.length,be=w(k),de=be.length;if(le!=de&&!Y)return!1;for(var pe=le;pe--;){var Oe=te[pe];if(!(Y?Oe in k:R.call(k,Oe)))return!1}var xe=W.get(D),Ve=W.get(k);if(xe&&Ve)return xe==k&&Ve==D;var K=!0;W.set(D,k),W.set(k,D);for(var ke=Y;++pe<le;){Oe=te[pe];var we=D[Oe],Me=k[Oe];if(z)var Xe=Y?z(Me,we,Oe,k,D,W):z(we,Me,Oe,D,k,W);if(!(Xe===void 0?we===Me||Z(we,Me,B,z,W):Xe)){K=!1;break}ke||(ke=Oe=="constructor")}if(K&&!ke){var Ke=D.constructor,At=k.constructor;Ke!=At&&"constructor"in D&&"constructor"in k&&!(typeof Ke=="function"&&Ke instanceof Ke&&typeof At=="function"&&At instanceof At)&&(K=!1)}return W.delete(D),W.delete(k),K}U.exports=A},96476:function(U,F,c){var w=typeof c.g=="object"&&c.g&&c.g.Object===Object&&c.g;U.exports=w},79944:function(U,F,c){var w=c(38084),v=c(97482),l=c(50579);function R(A){return w(A,l,v)}U.exports=R},67707:function(U,F,c){var w=c(3880);function v(l,R){var A=l.__data__;return w(R)?A[typeof R=="string"?"string":"hash"]:A.map}U.exports=v},47758:function(U,F,c){var w=c(58939),v=c(9149);function l(R,A){var D=v(R,A);return w(D)?D:void 0}U.exports=l},31239:function(U,F,c){var w=c(74396),v=Object.prototype,l=v.hasOwnProperty,R=v.toString,A=w?w.toStringTag:void 0;function D(k){var B=l.call(k,A),z=k[A];try{k[A]=void 0;var Z=!0}catch(Y){}var W=R.call(k);return Z&&(B?k[A]=z:delete k[A]),W}U.exports=D},97482:function(U,F,c){var w=c(48969),v=c(68036),l=Object.prototype,R=l.propertyIsEnumerable,A=Object.getOwnPropertySymbols,D=A?function(k){return k==null?[]:(k=Object(k),w(A(k),function(B){return R.call(k,B)}))}:v;U.exports=D},81887:function(U,F,c){var w=c(87269),v=c(35922),l=c(6795),R=c(81956),A=c(69477),D=c(80732),k=c(51059),B="[object Map]",z="[object Object]",Z="[object Promise]",W="[object Set]",Y="[object WeakMap]",te="[object DataView]",le=k(w),be=k(v),de=k(l),pe=k(R),Oe=k(A),xe=D;(w&&xe(new w(new ArrayBuffer(1)))!=te||v&&xe(new v)!=B||l&&xe(l.resolve())!=Z||R&&xe(new R)!=W||A&&xe(new A)!=Y)&&(xe=function(Ve){var K=D(Ve),ke=K==z?Ve.constructor:void 0,we=ke?k(ke):"";if(we)switch(we){case le:return te;case be:return B;case de:return Z;case pe:return W;case Oe:return Y}return K}),U.exports=xe},9149:function(U){function F(c,w){return c==null?void 0:c[w]}U.exports=F},71519:function(U,F,c){var w=c(37722);function v(){this.__data__=w?w(null):{},this.size=0}U.exports=v},82999:function(U){function F(c){var w=this.has(c)&&delete this.__data__[c];return this.size-=w?1:0,w}U.exports=F},76111:function(U,F,c){var w=c(37722),v="__lodash_hash_undefined__",l=Object.prototype,R=l.hasOwnProperty;function A(D){var k=this.__data__;if(w){var B=k[D];return B===v?void 0:B}return R.call(k,D)?k[D]:void 0}U.exports=A},50506:function(U,F,c){var w=c(37722),v=Object.prototype,l=v.hasOwnProperty;function R(A){var D=this.__data__;return w?D[A]!==void 0:l.call(D,A)}U.exports=R},80845:function(U,F,c){var w=c(37722),v="__lodash_hash_undefined__";function l(R,A){var D=this.__data__;return this.size+=this.has(R)?0:1,D[R]=w&&A===void 0?v:A,this}U.exports=l},91010:function(U){var F=9007199254740991,c=/^(?:0|[1-9]\d*)$/;function w(v,l){var R=typeof v;return l=l==null?F:l,!!l&&(R=="number"||R!="symbol"&&c.test(v))&&v>-1&&v%1==0&&v<l}U.exports=w},3880:function(U){function F(c){var w=typeof c;return w=="string"||w=="number"||w=="symbol"||w=="boolean"?c!=="__proto__":c===null}U.exports=F},90654:function(U,F,c){var w=c(36633),v=function(){var R=/[^.]+$/.exec(w&&w.keys&&w.keys.IE_PROTO||"");return R?"Symbol(src)_1."+R:""}();function l(R){return!!v&&v in R}U.exports=l},92963:function(U){var F=Object.prototype;function c(w){var v=w&&w.constructor,l=typeof v=="function"&&v.prototype||F;return w===l}U.exports=c},2173:function(U){function F(){this.__data__=[],this.size=0}U.exports=F},33752:function(U,F,c){var w=c(62718),v=Array.prototype,l=v.splice;function R(A){var D=this.__data__,k=w(D,A);if(k<0)return!1;var B=D.length-1;return k==B?D.pop():l.call(D,k,1),--this.size,!0}U.exports=R},10548:function(U,F,c){var w=c(62718);function v(l){var R=this.__data__,A=w(R,l);return A<0?void 0:R[A][1]}U.exports=v},63410:function(U,F,c){var w=c(62718);function v(l){return w(this.__data__,l)>-1}U.exports=v},3564:function(U,F,c){var w=c(62718);function v(l,R){var A=this.__data__,D=w(A,l);return D<0?(++this.size,A.push([l,R])):A[D][1]=R,this}U.exports=v},7140:function(U,F,c){var w=c(88987),v=c(175),l=c(35922);function R(){this.size=0,this.__data__={hash:new w,map:new(l||v),string:new w}}U.exports=R},56504:function(U,F,c){var w=c(67707);function v(l){var R=w(this,l).delete(l);return this.size-=R?1:0,R}U.exports=v},88833:function(U,F,c){var w=c(67707);function v(l){return w(this,l).get(l)}U.exports=v},80953:function(U,F,c){var w=c(67707);function v(l){return w(this,l).has(l)}U.exports=v},70724:function(U,F,c){var w=c(67707);function v(l,R){var A=w(this,l),D=A.size;return A.set(l,R),this.size+=A.size==D?0:1,this}U.exports=v},7523:function(U){function F(c){var w=-1,v=Array(c.size);return c.forEach(function(l,R){v[++w]=[R,l]}),v}U.exports=F},37722:function(U,F,c){var w=c(47758),v=w(Object,"create");U.exports=v},14457:function(U,F,c){var w=c(75542),v=w(Object.keys,Object);U.exports=v},8478:function(U,F,c){U=c.nmd(U);var w=c(96476),v=F&&!F.nodeType&&F,l=v&&!0&&U&&!U.nodeType&&U,R=l&&l.exports===v,A=R&&w.process,D=function(){try{var k=l&&l.require&&l.require("util").types;return k||A&&A.binding&&A.binding("util")}catch(B){}}();U.exports=D},57058:function(U){var F=Object.prototype,c=F.toString;function w(v){return c.call(v)}U.exports=w},75542:function(U){function F(c,w){return function(v){return c(w(v))}}U.exports=F},29165:function(U,F,c){var w=c(96476),v=typeof self=="object"&&self&&self.Object===Object&&self,l=w||v||Function("return this")();U.exports=l},96659:function(U){var F="__lodash_hash_undefined__";function c(w){return this.__data__.set(w,F),this}U.exports=c},97230:function(U){function F(c){return this.__data__.has(c)}U.exports=F},79967:function(U){function F(c){var w=-1,v=Array(c.size);return c.forEach(function(l){v[++w]=l}),v}U.exports=F},40551:function(U,F,c){var w=c(175);function v(){this.__data__=new w,this.size=0}U.exports=v},4090:function(U){function F(c){var w=this.__data__,v=w.delete(c);return this.size=w.size,v}U.exports=F},47694:function(U){function F(c){return this.__data__.get(c)}U.exports=F},86220:function(U){function F(c){return this.__data__.has(c)}U.exports=F},68958:function(U,F,c){var w=c(175),v=c(35922),l=c(9440),R=200;function A(D,k){var B=this.__data__;if(B instanceof w){var z=B.__data__;if(!v||z.length<R-1)return z.push([D,k]),this.size=++B.size,this;B=this.__data__=new l(z)}return B.set(D,k),this.size=B.size,this}U.exports=A},51059:function(U){var F=Function.prototype,c=F.toString;function w(v){if(v!=null){try{return c.call(v)}catch(l){}try{return v+""}catch(l){}}return""}U.exports=w},42448:function(U){function F(c,w){return c===w||c!==c&&w!==w}U.exports=F},30353:function(U,F,c){var w=c(84742),v=c(55073),l=Object.prototype,R=l.hasOwnProperty,A=l.propertyIsEnumerable,D=w(function(){return arguments}())?w:function(k){return v(k)&&R.call(k,"callee")&&!A.call(k,"callee")};U.exports=D},24669:function(U){var F=Array.isArray;U.exports=F},47428:function(U,F,c){var w=c(92042),v=c(17216);function l(R){return R!=null&&v(R.length)&&!w(R)}U.exports=l},61563:function(U,F,c){U=c.nmd(U);var w=c(29165),v=c(84193),l=F&&!F.nodeType&&F,R=l&&!0&&U&&!U.nodeType&&U,A=R&&R.exports===l,D=A?w.Buffer:void 0,k=D?D.isBuffer:void 0,B=k||v;U.exports=B},31223:function(U,F,c){var w=c(6620);function v(l,R){return w(l,R)}U.exports=v},92042:function(U,F,c){var w=c(80732),v=c(36838),l="[object AsyncFunction]",R="[object Function]",A="[object GeneratorFunction]",D="[object Proxy]";function k(B){if(!v(B))return!1;var z=w(B);return z==R||z==A||z==l||z==D}U.exports=k},17216:function(U){var F=9007199254740991;function c(w){return typeof w=="number"&&w>-1&&w%1==0&&w<=F}U.exports=c},36838:function(U){function F(c){var w=typeof c;return c!=null&&(w=="object"||w=="function")}U.exports=F},55073:function(U){function F(c){return c!=null&&typeof c=="object"}U.exports=F},73806:function(U,F,c){var w=c(22882),v=c(58792),l=c(8478),R=l&&l.isTypedArray,A=R?v(R):w;U.exports=A},50579:function(U,F,c){var w=c(79809),v=c(87473),l=c(47428);function R(A){return l(A)?w(A):v(A)}U.exports=R},32699:function(U,F,c){U=c.nmd(U);var w;(function(){var v,l="4.17.21",R=200,A="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",D="Expected a function",k="Invalid `variable` option passed into `_.template`",B="__lodash_hash_undefined__",z=500,Z="__lodash_placeholder__",W=1,Y=2,te=4,le=1,be=2,de=1,pe=2,Oe=4,xe=8,Ve=16,K=32,ke=64,we=128,Me=256,Xe=512,Ke=30,At="...",mt=800,ie=16,oe=1,he=2,ye=3,se=1/0,Ne=9007199254740991,st=17976931348623157e292,Fe=0/0,tt=4294967295,Wt=tt-1,Pr=tt>>>1,Qt=[["ary",we],["bind",de],["bindKey",pe],["curry",xe],["curryRight",Ve],["flip",Xe],["partial",K],["partialRight",ke],["rearg",Me]],xr="[object Arguments]",$r="[object Array]",Cr="[object AsyncFunction]",sn="[object Boolean]",ot="[object Date]",_r="[object DOMException]",cr="[object Error]",Vr="[object Function]",Qn="[object GeneratorFunction]",mn="[object Map]",_n="[object Number]",Yr="[object Null]",Fr="[object Object]",kr="[object Promise]",ft="[object Proxy]",me="[object RegExp]",ne="[object Set]",fe="[object String]",Q="[object Symbol]",De="[object Undefined]",dt="[object WeakMap]",Jt="[object WeakSet]",it="[object ArrayBuffer]",lt="[object DataView]",qt="[object Float32Array]",pr="[object Float64Array]",Hr="[object Int8Array]",Xr="[object Int16Array]",ce="[object Int32Array]",xt="[object Uint8Array]",Gt="[object Uint8ClampedArray]",Ir="[object Uint16Array]",nn="[object Uint32Array]",zi=/\b__p \+= '';/g,Ui=/\b(__p \+=) '' \+/g,Pi=/(__e\(.*?\)|\b__t\)) \+\n'';/g,ka=/&(?:amp|lt|gt|quot|#39);/g,Ti=/[&<>"']/g,Ge=RegExp(ka.source),et=RegExp(Ti.source),gt=/<%-([\s\S]+?)%>/g,ht=/<%([\s\S]+?)%>/g,Et=/<%=([\s\S]+?)%>/g,Zt=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,sr=/^\w*$/,bt=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Ft=/[\\^$.*+?()[\]{}|]/g,zr=RegExp(Ft.source),Jn=/^\s+/,yn=/\s/,tn=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,ni=/\{\n\/\* \[wrapped with (.+)\] \*/,ta=/,? & /,fa=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Mr=/[()=,{}\[\]\/\s]/,Wr=/\\(\\)?/g,Zi=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Wi=/\w*$/,xo=/^[-+]0x[0-9a-f]+$/i,ua=/^0b[01]+$/i,Ur=/^\[object .+?Constructor\]$/,Jr=/^0o[0-7]+$/i,Eo=/^(?:0|[1-9]\d*)$/,Fo=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,So=/($^)/,Xa=/['\n\r\u2028\u2029\\]/g,Ko="\\ud800-\\udfff",No="\\u0300-\\u036f",ui="\\ufe20-\\ufe2f",jn="\\u20d0-\\u20ff",rr=No+ui+jn,ps="\\u2700-\\u27bf",er="a-z\\xdf-\\xf6\\xf8-\\xff",$s="\\xac\\xb1\\xd7\\xf7",Es="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",Os="\\u2000-\\u206f",xu=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",bo="A-Z\\xc0-\\xd6\\xd8-\\xde",ic="\\ufe0e\\ufe0f",Ru=$s+Es+Os+xu,Xs="['\u2019]",Ys="["+Ko+"]",rs="["+Ru+"]",au="["+rr+"]",Tu="\\d+",Cl="["+ps+"]",hu="["+er+"]",ou="[^"+Ko+Ru+Tu+ps+er+bo+"]",ss="\\ud83c[\\udffb-\\udfff]",nu="(?:"+au+"|"+ss+")",Pu="[^"+Ko+"]",Ks="(?:\\ud83c[\\udde6-\\uddff]){2}",$u="[\\ud800-\\udbff][\\udc00-\\udfff]",qe="["+bo+"]",Bt="\\u200d",ge="(?:"+hu+"|"+ou+")",je="(?:"+qe+"|"+ou+")",wt="(?:"+Xs+"(?:d|ll|m|re|s|t|ve))?",nr="(?:"+Xs+"(?:D|LL|M|RE|S|T|VE))?",en=nu+"?",Dn="["+ic+"]?",Ai="(?:"+Bt+"(?:"+[Pu,Ks,$u].join("|")+")"+Dn+en+")*",na="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Aa="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",Ta=Dn+en+Ai,Wa="(?:"+[Cl,Ks,$u].join("|")+")"+Ta,Co="(?:"+[Pu+au+"?",au,Ks,$u,Ys].join("|")+")",lo=RegExp(Xs,"g"),Vo=RegExp(au,"g"),gs=RegExp(ss+"(?="+ss+")|"+Co+Ta,"g"),su=RegExp([qe+"?"+hu+"+"+wt+"(?="+[rs,qe,"$"].join("|")+")",je+"+"+nr+"(?="+[rs,qe+ge,"$"].join("|")+")",qe+"?"+ge+"+"+wt,qe+"+"+nr,Aa,na,Tu,Wa].join("|"),"g"),Zu=RegExp("["+Bt+Ko+rr+ic+"]"),Ss=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Us=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],ys=-1,Oo={};Oo[qt]=Oo[pr]=Oo[Hr]=Oo[Xr]=Oo[ce]=Oo[xt]=Oo[Gt]=Oo[Ir]=Oo[nn]=!0,Oo[xr]=Oo[$r]=Oo[it]=Oo[sn]=Oo[lt]=Oo[ot]=Oo[cr]=Oo[Vr]=Oo[mn]=Oo[_n]=Oo[Fr]=Oo[me]=Oo[ne]=Oo[fe]=Oo[dt]=!1;var qo={};qo[xr]=qo[$r]=qo[it]=qo[lt]=qo[sn]=qo[ot]=qo[qt]=qo[pr]=qo[Hr]=qo[Xr]=qo[ce]=qo[mn]=qo[_n]=qo[Fr]=qo[me]=qo[ne]=qo[fe]=qo[Q]=qo[xt]=qo[Gt]=qo[Ir]=qo[nn]=!0,qo[cr]=qo[Vr]=qo[dt]=!1;var Rc={\u00C0:"A",\u00C1:"A",\u00C2:"A",\u00C3:"A",\u00C4:"A",\u00C5:"A",\u00E0:"a",\u00E1:"a",\u00E2:"a",\u00E3:"a",\u00E4:"a",\u00E5:"a",\u00C7:"C",\u00E7:"c",\u00D0:"D",\u00F0:"d",\u00C8:"E",\u00C9:"E",\u00CA:"E",\u00CB:"E",\u00E8:"e",\u00E9:"e",\u00EA:"e",\u00EB:"e",\u00CC:"I",\u00CD:"I",\u00CE:"I",\u00CF:"I",\u00EC:"i",\u00ED:"i",\u00EE:"i",\u00EF:"i",\u00D1:"N",\u00F1:"n",\u00D2:"O",\u00D3:"O",\u00D4:"O",\u00D5:"O",\u00D6:"O",\u00D8:"O",\u00F2:"o",\u00F3:"o",\u00F4:"o",\u00F5:"o",\u00F6:"o",\u00F8:"o",\u00D9:"U",\u00DA:"U",\u00DB:"U",\u00DC:"U",\u00F9:"u",\u00FA:"u",\u00FB:"u",\u00FC:"u",\u00DD:"Y",\u00FD:"y",\u00FF:"y",\u00C6:"Ae",\u00E6:"ae",\u00DE:"Th",\u00FE:"th",\u00DF:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010A:"C",\u010C:"C",\u0107:"c",\u0109:"c",\u010B:"c",\u010D:"c",\u010E:"D",\u0110:"D",\u010F:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011A:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011B:"e",\u011C:"G",\u011E:"G",\u0120:"G",\u0122:"G",\u011D:"g",\u011F:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012A:"I",\u012C:"I",\u012E:"I",\u0130:"I",\u0129:"i",\u012B:"i",\u012D:"i",\u012F:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013B:"L",\u013D:"L",\u013F:"L",\u0141:"L",\u013A:"l",\u013C:"l",\u013E:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014A:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014B:"n",\u014C:"O",\u014E:"O",\u0150:"O",\u014D:"o",\u014F:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015A:"S",\u015C:"S",\u015E:"S",\u0160:"S",\u015B:"s",\u015D:"s",\u015F:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016A:"U",\u016C:"U",\u016E:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016B:"u",\u016D:"u",\u016F:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017B:"Z",\u017D:"Z",\u017A:"z",\u017C:"z",\u017E:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017F:"s"},Hl={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},sf={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},Bf={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},zf=parseFloat,ac=parseInt,dc=typeof c.g=="object"&&c.g&&c.g.Object===Object&&c.g,O=typeof self=="object"&&self&&self.Object===Object&&self,q=dc||O||Function("return this")(),Le=F&&!F.nodeType&&F,ve=Le&&!0&&U&&!U.nodeType&&U,ct=ve&&ve.exports===Le,Lt=ct&&dc.process,hr=function(){try{var Kr=ve&&ve.require&&ve.require("util").types;return Kr||Lt&&Lt.binding&&Lt.binding("util")}catch(vi){}}(),lr=hr&&hr.isArrayBuffer,Gr=hr&&hr.isDate,ii=hr&&hr.isMap,fi=hr&&hr.isRegExp,Na=hr&&hr.isSet,vo=hr&&hr.isTypedArray;function Va(Kr,vi,ei){switch(ei.length){case 0:return Kr.call(vi);case 1:return Kr.call(vi,ei[0]);case 2:return Kr.call(vi,ei[0],ei[1]);case 3:return Kr.call(vi,ei[0],ei[1],ei[2])}return Kr.apply(vi,ei)}function ha(Kr,vi,ei,xi){for(var da=-1,uo=Kr==null?0:Kr.length;++da<uo;){var Ua=Kr[da];vi(xi,Ua,ei(Ua),Kr)}return xi}function $o(Kr,vi){for(var ei=-1,xi=Kr==null?0:Kr.length;++ei<xi&&vi(Kr[ei],ei,Kr)!==!1;);return Kr}function ms(Kr,vi){for(var ei=Kr==null?0:Kr.length;ei--&&vi(Kr[ei],ei,Kr)!==!1;);return Kr}function To(Kr,vi){for(var ei=-1,xi=Kr==null?0:Kr.length;++ei<xi;)if(!vi(Kr[ei],ei,Kr))return!1;return!0}function Qs(Kr,vi){for(var ei=-1,xi=Kr==null?0:Kr.length,da=0,uo=[];++ei<xi;){var Ua=Kr[ei];vi(Ua,ei,Kr)&&(uo[da++]=Ua)}return uo}function Wl(Kr,vi){var ei=Kr==null?0:Kr.length;return!!ei&&Vc(Kr,vi,0)>-1}function Pc(Kr,vi,ei){for(var xi=-1,da=Kr==null?0:Kr.length;++xi<da;)if(ei(vi,Kr[xi]))return!0;return!1}function Js(Kr,vi){for(var ei=-1,xi=Kr==null?0:Kr.length,da=Array(xi);++ei<xi;)da[ei]=vi(Kr[ei],ei,Kr);return da}function Tl(Kr,vi){for(var ei=-1,xi=vi.length,da=Kr.length;++ei<xi;)Kr[da+ei]=vi[ei];return Kr}function bf(Kr,vi,ei,xi){var da=-1,uo=Kr==null?0:Kr.length;for(xi&&uo&&(ei=Kr[++da]);++da<uo;)ei=vi(ei,Kr[da],da,Kr);return ei}function Zc(Kr,vi,ei,xi){var da=Kr==null?0:Kr.length;for(xi&&da&&(ei=Kr[--da]);da--;)ei=vi(ei,Kr[da],da,Kr);return ei}function vc(Kr,vi){for(var ei=-1,xi=Kr==null?0:Kr.length;++ei<xi;)if(vi(Kr[ei],ei,Kr))return!0;return!1}var jc=$l("length");function bu(Kr){return Kr.split("")}function cp(Kr){return Kr.match(fa)||[]}function Yf(Kr,vi,ei){var xi;return ei(Kr,function(da,uo,Ua){if(vi(da,uo,Ua))return xi=uo,!1}),xi}function Ju(Kr,vi,ei,xi){for(var da=Kr.length,uo=ei+(xi?1:-1);xi?uo--:++uo<da;)if(vi(Kr[uo],uo,Kr))return uo;return-1}function Vc(Kr,vi,ei){return vi===vi?gc(Kr,vi,ei):Ju(Kr,ju,ei)}function Gc(Kr,vi,ei,xi){for(var da=ei-1,uo=Kr.length;++da<uo;)if(xi(Kr[da],vi))return da;return-1}function ju(Kr){return Kr!==Kr}function fp(Kr,vi){var ei=Kr==null?0:Kr.length;return ei?Hc(Kr,vi)/ei:Fe}function $l(Kr){return function(vi){return vi==null?v:vi[Kr]}}function Rs(Kr){return function(vi){return Kr==null?v:Kr[vi]}}function Ml(Kr,vi,ei,xi,da){return da(Kr,function(uo,Ua,ns){ei=xi?(xi=!1,uo):vi(ei,uo,Ua,ns)}),ei}function Ef(Kr,vi){var ei=Kr.length;for(Kr.sort(vi);ei--;)Kr[ei]=Kr[ei].value;return Kr}function Hc(Kr,vi){for(var ei,xi=-1,da=Kr.length;++xi<da;){var uo=vi(Kr[xi]);uo!==v&&(ei=ei===v?uo:ei+uo)}return ei}function Xl(Kr,vi){for(var ei=-1,xi=Array(Kr);++ei<Kr;)xi[ei]=vi(ei);return xi}function ah(Kr,vi){return Js(vi,function(ei){return[ei,Kr[ei]]})}function Kf(Kr){return Kr&&Kr.slice(0,Ql(Kr)+1).replace(Jn,"")}function Ll(Kr){return function(vi){return Kr(vi)}}function Wc(Kr,vi){return Js(vi,function(ei){return Kr[ei]})}function uu(Kr,vi){return Kr.has(vi)}function hs(Kr,vi){for(var ei=-1,xi=Kr.length;++ei<xi&&Vc(vi,Kr[ei],0)>-1;);return ei}function kc(Kr,vi){for(var ei=Kr.length;ei--&&Vc(vi,Kr[ei],0)>-1;);return ei}function oc(Kr,vi){for(var ei=Kr.length,xi=0;ei--;)Kr[ei]===vi&&++xi;return xi}var uf=Rs(Rc),mc=Rs(Hl);function ds(Kr){return"\\"+Bf[Kr]}function sc(Kr,vi){return Kr==null?v:Kr[vi]}function vl(Kr){return Zu.test(Kr)}function pp(Kr){return Ss.test(Kr)}function Lc(Kr){for(var vi,ei=[];!(vi=Kr.next()).done;)ei.push(vi.value);return ei}function uc(Kr){var vi=-1,ei=Array(Kr.size);return Kr.forEach(function(xi,da){ei[++vi]=[da,xi]}),ei}function Qf(Kr,vi){return function(ei){return Kr(vi(ei))}}function Yl(Kr,vi){for(var ei=-1,xi=Kr.length,da=0,uo=[];++ei<xi;){var Ua=Kr[ei];(Ua===vi||Ua===Z)&&(Kr[ei]=Z,uo[da++]=ei)}return uo}function Dc(Kr){var vi=-1,ei=Array(Kr.size);return Kr.forEach(function(xi){ei[++vi]=xi}),ei}function Jf(Kr){var vi=-1,ei=Array(Kr.size);return Kr.forEach(function(xi){ei[++vi]=[xi,xi]}),ei}function gc(Kr,vi,ei){for(var xi=ei-1,da=Kr.length;++xi<da;)if(Kr[xi]===vi)return xi;return-1}function $c(Kr,vi,ei){for(var xi=ei+1;xi--;)if(Kr[xi]===vi)return xi;return xi}function Fc(Kr){return vl(Kr)?qf(Kr):jc(Kr)}function Kl(Kr){return vl(Kr)?ep(Kr):bu(Kr)}function Ql(Kr){for(var vi=Kr.length;vi--&&yn.test(Kr.charAt(vi)););return vi}var Uf=Rs(sf);function qf(Kr){for(var vi=gs.lastIndex=0;gs.test(Kr);)++vi;return vi}function ep(Kr){return Kr.match(gs)||[]}function qu(Kr){return Kr.match(su)||[]}var Zf=function Kr(vi){vi=vi==null?q:vs.defaults(q.Object(),vi,vs.pick(q,Us));var ei=vi.Array,xi=vi.Date,da=vi.Error,uo=vi.Function,Ua=vi.Math,ns=vi.Object,Vu=vi.RegExp,lc=vi.String,yc=vi.TypeError,tp=ei.prototype,_c=uo.prototype,Jl=ns.prototype,ml=vi["__core-js_shared__"],lu=_c.toString,_s=Jl.hasOwnProperty,jf=0,qs=function(){var b=/[^.]+$/.exec(ml&&ml.keys&&ml.keys.IE_PROTO||"");return b?"Symbol(src)_1."+b:""}(),ji=Jl.toString,Gs=lu.call(ns),ql=q._,Xc=Vu("^"+lu.call(_s).replace(Ft,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Il=ct?vi.Buffer:v,ku=vi.Symbol,ec=vi.Uint8Array,ia=Il?Il.allocUnsafe:v,lf=Qf(ns.getPrototypeOf,ns),xc=ns.create,cc=Jl.propertyIsEnumerable,Ps=tp.splice,ol=ku?ku.isConcatSpreadable:v,Yc=ku?ku.iterator:v,Eu=ku?ku.toStringTag:v,el=function(){try{var b=Ya(ns,"defineProperty");return b({},"",{}),b}catch(T){}}(),bc=vi.clearTimeout!==q.clearTimeout&&vi.clearTimeout,Vf=xi&&xi.now!==q.Date.now&&xi.now,qr=vi.setTimeout!==q.setTimeout&&vi.setTimeout,ri=Ua.ceil,Kn=Ua.floor,Vn=ns.getOwnPropertySymbols,Ri=Il?Il.isBuffer:v,li=vi.isFinite,ga=tp.join,Ka=Qf(ns.keys,ns),Ma=Ua.max,Bo=Ua.min,As=xi.now,Su=vi.parseInt,cu=Ua.random,tl=tp.reverse,Pa=Ya(vi,"DataView"),la=Ya(vi,"Map"),sl=Ya(vi,"Promise"),us=Ya(vi,"Set"),wu=Ya(vi,"WeakMap"),Zs=Ya(ns,"create"),ul=wu&&new wu,Ec={},cf=Yo(Pa),ws=Yo(la),Qo=Yo(sl),ff=Yo(us),Du=Yo(wu),du=ku?ku.prototype:v,ll=du?du.valueOf:v,eu=du?du.toString:v;function Rt(b){if(Vl(b)&&!fs(b)&&!(b instanceof Mo)){if(b instanceof tu)return b;if(_s.call(b,"__wrapped__"))return js(b)}return new tu(b)}var mo=function(){function b(){}return function(T){if(!bl(T))return{};if(xc)return xc(T);b.prototype=T;var J=new b;return b.prototype=v,J}}();function xs(){}function tu(b,T){this.__wrapped__=b,this.__actions__=[],this.__chain__=!!T,this.__index__=0,this.__values__=v}Rt.templateSettings={escape:gt,evaluate:ht,interpolate:Et,variable:"",imports:{_:Rt}},Rt.prototype=xs.prototype,Rt.prototype.constructor=Rt,tu.prototype=mo(xs.prototype),tu.prototype.constructor=tu;function Mo(b){this.__wrapped__=b,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=tt,this.__views__=[]}function rp(){var b=new Mo(this.__wrapped__);return b.__actions__=Ku(this.__actions__),b.__dir__=this.__dir__,b.__filtered__=this.__filtered__,b.__iteratees__=Ku(this.__iteratees__),b.__takeCount__=this.__takeCount__,b.__views__=Ku(this.__views__),b}function pf(){if(this.__filtered__){var b=new Mo(this);b.__dir__=-1,b.__filtered__=!0}else b=this.clone(),b.__dir__*=-1;return b}function np(){var b=this.__wrapped__.value(),T=this.__dir__,J=fs(b),Pe=T<0,yt=J?b.length:0,$t=Sr(0,yt,this.__views__),Dr=$t.start,ln=$t.end,Fn=ln-Dr,Ji=Pe?ln:Dr-1,ea=this.__iteratees__,ma=ea.length,fo=0,Ho=Bo(Fn,this.__takeCount__);if(!J||!Pe&&yt==Fn&&Ho==Fn)return mp(b,this.__actions__);var bs=[];e:for(;Fn--&&fo<Ho;){Ji+=T;for(var _u=-1,$e=b[Ji];++_u<ma;){var Iu=ea[_u],Bu=Iu.iteratee,Wp=Iu.type,Op=Bu($e);if(Wp==he)$e=Op;else if(!Op){if(Wp==oe)continue e;break e}}bs[fo++]=$e}return bs}Mo.prototype=mo(xs.prototype),Mo.prototype.constructor=Mo;function cl(b){var T=-1,J=b==null?0:b.length;for(this.clear();++T<J;){var Pe=b[T];this.set(Pe[0],Pe[1])}}function Dl(){this.__data__=Zs?Zs(null):{},this.size=0}function Cs(b){var T=this.has(b)&&delete this.__data__[b];return this.size-=T?1:0,T}function fu(b){var T=this.__data__;if(Zs){var J=T[b];return J===B?v:J}return _s.call(T,b)?T[b]:v}function Zl(b){var T=this.__data__;return Zs?T[b]!==v:_s.call(T,b)}function Mu(b,T){var J=this.__data__;return this.size+=this.has(b)?0:1,J[b]=Zs&&T===v?B:T,this}cl.prototype.clear=Dl,cl.prototype.delete=Cs,cl.prototype.get=fu,cl.prototype.has=Zl,cl.prototype.set=Mu;function Fu(b){var T=-1,J=b==null?0:b.length;for(this.clear();++T<J;){var Pe=b[T];this.set(Pe[0],Pe[1])}}function Nc(){this.__data__=[],this.size=0}function hf(b){var T=this.__data__,J=yi(T,b);if(J<0)return!1;var Pe=T.length-1;return J==Pe?T.pop():Ps.call(T,J,1),--this.size,!0}function Ol(b){var T=this.__data__,J=yi(T,b);return J<0?v:T[J][1]}function d(b){return yi(this.__data__,b)>-1}function _(b,T){var J=this.__data__,Pe=yi(J,b);return Pe<0?(++this.size,J.push([b,T])):J[Pe][1]=T,this}Fu.prototype.clear=Nc,Fu.prototype.delete=hf,Fu.prototype.get=Ol,Fu.prototype.has=d,Fu.prototype.set=_;function m(b){var T=-1,J=b==null?0:b.length;for(this.clear();++T<J;){var Pe=b[T];this.set(Pe[0],Pe[1])}}function S(){this.size=0,this.__data__={hash:new cl,map:new(la||Fu),string:new cl}}function N(b){var T=ba(this,b).delete(b);return this.size-=T?1:0,T}function X(b){return ba(this,b).get(b)}function ee(b){return ba(this,b).has(b)}function Ae(b,T){var J=ba(this,b),Pe=J.size;return J.set(b,T),this.size+=J.size==Pe?0:1,this}m.prototype.clear=S,m.prototype.delete=N,m.prototype.get=X,m.prototype.has=ee,m.prototype.set=Ae;function Ze(b){var T=-1,J=b==null?0:b.length;for(this.__data__=new m;++T<J;)this.add(b[T])}function nt(b){return this.__data__.set(b,B),this}function Ct(b){return this.__data__.has(b)}Ze.prototype.add=Ze.prototype.push=nt,Ze.prototype.has=Ct;function Tt(b){var T=this.__data__=new Fu(b);this.size=T.size}function Pt(){this.__data__=new Fu,this.size=0}function tr(b){var T=this.__data__,J=T.delete(b);return this.size=T.size,J}function or(b){return this.__data__.get(b)}function gr(b){return this.__data__.has(b)}function Yt(b,T){var J=this.__data__;if(J instanceof Fu){var Pe=J.__data__;if(!la||Pe.length<R-1)return Pe.push([b,T]),this.size=++J.size,this;J=this.__data__=new m(Pe)}return J.set(b,T),this.size=J.size,this}Tt.prototype.clear=Pt,Tt.prototype.delete=tr,Tt.prototype.get=or,Tt.prototype.has=gr,Tt.prototype.set=Yt;function br(b,T){var J=fs(b),Pe=!J&&Qu(b),yt=!J&&!Pe&&sp(b),$t=!J&&!Pe&&!yt&&Gp(b),Dr=J||Pe||yt||$t,ln=Dr?Xl(b.length,lc):[],Fn=ln.length;for(var Ji in b)(T||_s.call(b,Ji))&&!(Dr&&(Ji=="length"||yt&&(Ji=="offset"||Ji=="parent")||$t&&(Ji=="buffer"||Ji=="byteLength"||Ji=="byteOffset")||En(Ji,Fn)))&&ln.push(Ji);return ln}function Lr(b){var T=b.length;return T?b[Mf(0,T-1)]:v}function pn(b,T){return $a(Ku(b),Ga(T,0,b.length))}function zn(b){return $a(Ku(b))}function Nn(b,T,J){(J!==v&&!Ki(b[T],J)||J===v&&!(T in b))&&Ea(b,T,J)}function Xn(b,T,J){var Pe=b[T];(!(_s.call(b,T)&&Ki(Pe,J))||J===v&&!(T in b))&&Ea(b,T,J)}function yi(b,T){for(var J=b.length;J--;)if(Ki(b[J][0],T))return J;return-1}function Li(b,T,J,Pe){return Ha(b,function(yt,$t,Dr){T(Pe,yt,J(yt),Dr)}),Pe}function Ei(b,T){return b&&Ac(T,hc(T),b)}function Vi(b,T){return b&&Ac(T,xf(T),b)}function Ea(b,T,J){T=="__proto__"&&el?el(b,T,{configurable:!0,enumerable:!0,value:J,writable:!0}):b[T]=J}function Qa(b,T){for(var J=-1,Pe=T.length,yt=ei(Pe),$t=b==null;++J<Pe;)yt[J]=$t?v:Ud(b,T[J]);return yt}function Ga(b,T,J){return b===b&&(J!==v&&(b=b<=J?b:J),T!==v&&(b=b>=T?b:T)),b}function io(b,T,J,Pe,yt,$t){var Dr,ln=T&W,Fn=T&Y,Ji=T&te;if(J&&(Dr=yt?J(b,Pe,yt,$t):J(b)),Dr!==v)return Dr;if(!bl(b))return b;var ea=fs(b);if(ea){if(Dr=hn(b),!ln)return Ku(b,Dr)}else{var ma=Vt(b),fo=ma==Vr||ma==Qn;if(sp(b))return df(b,ln);if(ma==Fr||ma==xr||fo&&!yt){if(Dr=Fn||fo?{}:Tn(b),!ln)return Fn?ls(b,Vi(Dr,b)):kh(b,Ei(Dr,b))}else{if(!qo[ma])return yt?b:{};Dr=Hn(b,ma,ln)}}$t||($t=new Tt);var Ho=$t.get(b);if(Ho)return Ho;$t.set(b,Dr),$h(b)?b.forEach(function($e){Dr.add(io($e,T,J,$e,b,$t))}):md(b)&&b.forEach(function($e,Iu){Dr.set(Iu,io($e,T,J,Iu,b,$t))});var bs=Ji?Fn?Di:Gi:Fn?xf:hc,_u=ea?v:bs(b);return $o(_u||b,function($e,Iu){_u&&(Iu=$e,$e=b[Iu]),Xn(Dr,Iu,io($e,T,J,Iu,b,$t))}),Dr}function ya(b){var T=hc(b);return function(J){return yo(J,b,T)}}function yo(b,T,J){var Pe=J.length;if(b==null)return!Pe;for(b=ns(b);Pe--;){var yt=J[Pe],$t=T[yt],Dr=b[yt];if(Dr===v&&!(yt in b)||!$t(Dr))return!1}return!0}function _o(b,T,J){if(typeof b!="function")throw new yc(D);return La(function(){b.apply(v,J)},T)}function po(b,T,J,Pe){var yt=-1,$t=Wl,Dr=!0,ln=b.length,Fn=[],Ji=T.length;if(!ln)return Fn;J&&(T=Js(T,Ll(J))),Pe?($t=Pc,Dr=!1):T.length>=R&&($t=uu,Dr=!1,T=new Ze(T));e:for(;++yt<ln;){var ea=b[yt],ma=J==null?ea:J(ea);if(ea=Pe||ea!==0?ea:0,Dr&&ma===ma){for(var fo=Ji;fo--;)if(T[fo]===ma)continue e;Fn.push(ea)}else $t(T,ma,Pe)||Fn.push(ea)}return Fn}var Ha=kf(Ts),Ro=kf(rl,!0);function eo(b,T){var J=!0;return Ha(b,function(Pe,yt,$t){return J=!!T(Pe,yt,$t),J}),J}function Ia(b,T,J){for(var Pe=-1,yt=b.length;++Pe<yt;){var $t=b[Pe],Dr=T($t);if(Dr!=null&&(ln===v?Dr===Dr&&!Xf(Dr):J(Dr,ln)))var ln=Dr,Fn=$t}return Fn}function Gu(b,T,J,Pe){var yt=b.length;for(J=no(J),J<0&&(J=-J>yt?0:yt+J),Pe=Pe===v||Pe>yt?yt:no(Pe),Pe<0&&(Pe+=yt),Pe=J>Pe?0:Lp(Pe);J<Pe;)b[J++]=T;return b}function co(b,T){var J=[];return Ha(b,function(Pe,yt,$t){T(Pe,yt,$t)&&J.push(Pe)}),J}function es(b,T,J,Pe,yt){var $t=-1,Dr=b.length;for(J||(J=bn),yt||(yt=[]);++$t<Dr;){var ln=b[$t];T>0&&J(ln)?T>1?es(ln,T-1,J,Pe,yt):Tl(yt,ln):Pe||(yt[yt.length]=ln)}return yt}var ru=Uc(),pu=Uc(!0);function Ts(b,T){return b&&ru(b,T,hc)}function rl(b,T){return b&&pu(b,T,hc)}function Nu(b,T){return Qs(T,function(J){return Mp(b[J])})}function zo(b,T){T=af(T,b);for(var J=0,Pe=T.length;b!=null&&J<Pe;)b=b[is(T[J++])];return J&&J==Pe?b:v}function An(b,T,J){var Pe=T(b);return fs(b)?Pe:Tl(Pe,J(b))}function vu(b){return b==null?b===v?De:Yr:Eu&&Eu in ns(b)?Te(b):Si(b)}function Nt(b,T){return b>T}function gl(b,T){return b!=null&&_s.call(b,T)}function Xu(b,T){return b!=null&&T in ns(b)}function Sf(b,T,J){return b>=Bo(T,J)&&b<Ma(T,J)}function ip(b,T,J){for(var Pe=J?Pc:Wl,yt=b[0].length,$t=b.length,Dr=$t,ln=ei($t),Fn=1/0,Ji=[];Dr--;){var ea=b[Dr];Dr&&T&&(ea=Js(ea,Ll(T))),Fn=Bo(ea.length,Fn),ln[Dr]=!J&&(T||yt>=120&&ea.length>=120)?new Ze(Dr&&ea):v}ea=b[0];var ma=-1,fo=ln[0];e:for(;++ma<yt&&Ji.length<Fn;){var Ho=ea[ma],bs=T?T(Ho):Ho;if(Ho=J||Ho!==0?Ho:0,!(fo?uu(fo,bs):Pe(Ji,bs,J))){for(Dr=$t;--Dr;){var _u=ln[Dr];if(!(_u?uu(_u,bs):Pe(b[Dr],bs,J)))continue e}fo&&fo.push(bs),Ji.push(Ho)}}return Ji}function Kc(b,T,J,Pe){return Ts(b,function(yt,$t,Dr){T(Pe,J(yt),$t,Dr)}),Pe}function fl(b,T,J){T=af(T,b),b=qn(b,T);var Pe=b==null?b:b[is(Zr(T))];return Pe==null?v:Va(Pe,b,J)}function Qc(b){return Vl(b)&&vu(b)==xr}function Sc(b){return Vl(b)&&vu(b)==it}function Lu(b){return Vl(b)&&vu(b)==ot}function Fl(b,T,J,Pe,yt){return b===T?!0:b==null||T==null||!Vl(b)&&!Vl(T)?b!==b&&T!==T:fc(b,T,J,Pe,Fl,yt)}function fc(b,T,J,Pe,yt,$t){var Dr=fs(b),ln=fs(T),Fn=Dr?$r:Vt(b),Ji=ln?$r:Vt(T);Fn=Fn==xr?Fr:Fn,Ji=Ji==xr?Fr:Ji;var ea=Fn==Fr,ma=Ji==Fr,fo=Fn==Ji;if(fo&&sp(b)){if(!sp(T))return!1;Dr=!0,ea=!1}if(fo&&!ea)return $t||($t=new Tt),Dr||Gp(b)?On(b,T,J,Pe,yt,$t):Ni(b,T,Fn,J,Pe,yt,$t);if(!(J&le)){var Ho=ea&&_s.call(b,"__wrapped__"),bs=ma&&_s.call(T,"__wrapped__");if(Ho||bs){var _u=Ho?b.value():b,$e=bs?T.value():T;return $t||($t=new Tt),yt(_u,$e,J,Pe,$t)}}return fo?($t||($t=new Tt),Bi(b,T,J,Pe,yt,$t)):!1}function Jc(b){return Vl(b)&&Vt(b)==mn}function ts(b,T,J,Pe){var yt=J.length,$t=yt,Dr=!Pe;if(b==null)return!$t;for(b=ns(b);yt--;){var ln=J[yt];if(Dr&&ln[2]?ln[1]!==b[ln[0]]:!(ln[0]in b))return!1}for(;++yt<$t;){ln=J[yt];var Fn=ln[0],Ji=b[Fn],ea=ln[1];if(Dr&&ln[2]){if(Ji===v&&!(Fn in b))return!1}else{var ma=new Tt;if(Pe)var fo=Pe(Ji,ea,Fn,b,T,ma);if(!(fo===v?Fl(ea,Ji,le|be,Pe,ma):fo))return!1}}return!0}function pl(b){if(!bl(b)||oi(b))return!1;var T=Mp(b)?Xc:Ur;return T.test(Yo(b))}function Rl(b){return Vl(b)&&vu(b)==me}function qc(b){return Vl(b)&&Vt(b)==ne}function ap(b){return Vl(b)&&qp(b.length)&&!!Oo[vu(b)]}function ef(b){return typeof b=="function"?b:b==null?nh:typeof b=="object"?fs(b)?Af(b[0],b[1]):rf(b):pg(b)}function wf(b){if(!Wn(b))return Ka(b);var T=[];for(var J in ns(b))_s.call(b,J)&&J!="constructor"&&T.push(J);return T}function tc(b){if(!bl(b))return kn(b);var T=Wn(b),J=[];for(var Pe in b)Pe=="constructor"&&(T||!_s.call(b,Pe))||J.push(Pe);return J}function tf(b,T){return b<T}function Pl(b,T){var J=-1,Pe=_f(b)?ei(b.length):[];return Ha(b,function(yt,$t,Dr){Pe[++J]=T(yt,$t,Dr)}),Pe}function rf(b){var T=_a(b);return T.length==1&&T[0][2]?Mi(T[0][0],T[0][1]):function(J){return J===b||ts(J,b,T)}}function Af(b,T){return Un(b)&&ci(T)?Mi(is(b),T):function(J){var Pe=Ud(J,b);return Pe===v&&Pe===T?iv(J,b):Fl(T,Pe,le|be)}}function Yu(b,T,J,Pe,yt){b!==T&&ru(T,function($t,Dr){if(yt||(yt=new Tt),bl($t))mu(b,T,Dr,J,Yu,Pe,yt);else{var ln=Pe?Pe(_i(b,Dr),$t,Dr+"",b,T,yt):v;ln===v&&(ln=$t),Nn(b,Dr,ln)}},xf)}function mu(b,T,J,Pe,yt,$t,Dr){var ln=_i(b,J),Fn=_i(T,J),Ji=Dr.get(Fn);if(Ji){Nn(b,J,Ji);return}var ea=$t?$t(ln,Fn,J+"",b,T,Dr):v,ma=ea===v;if(ma){var fo=fs(Fn),Ho=!fo&&sp(Fn),bs=!fo&&!Ho&&Gp(Fn);ea=Fn,fo||Ho||bs?fs(ln)?ea=ln:xl(ln)?ea=Ku(ln):Ho?(ma=!1,ea=df(Fn,!0)):bs?(ma=!1,ea=He(Fn,!0)):ea=[]:fh(Fn)||Qu(Fn)?(ea=ln,Qu(ln)?ea=ph(ln):(!bl(ln)||Mp(ln))&&(ea=Tn(Fn))):ma=!1}ma&&(Dr.set(Fn,ea),yt(ea,Fn,Pe,$t,Dr),Dr.delete(Fn)),Nn(b,J,ea)}function nf(b,T){var J=b.length;if(!!J)return T+=T<0?J:0,En(T,J)?b[T]:v}function Cf(b,T,J){T.length?T=Js(T,function($t){return fs($t)?function(Dr){return zo(Dr,$t.length===1?$t[0]:$t)}:$t}):T=[nh];var Pe=-1;T=Js(T,Ll(di()));var yt=Pl(b,function($t,Dr,ln){var Fn=Js(T,function(Ji){return Ji($t)});return{criteria:Fn,index:++Pe,value:$t}});return Ef(yt,function($t,Dr){return yl($t,Dr,J)})}function wp(b,T){return Gf(b,T,function(J,Pe){return iv(b,Pe)})}function Gf(b,T,J){for(var Pe=-1,yt=T.length,$t={};++Pe<yt;){var Dr=T[Pe],ln=zo(b,Dr);J(ln,Dr)&&gu($t,af(Dr,b),ln)}return $t}function zp(b){return function(T){return zo(T,b)}}function Tf(b,T,J,Pe){var yt=Pe?Gc:Vc,$t=-1,Dr=T.length,ln=b;for(b===T&&(T=Ku(T)),J&&(ln=Js(b,Ll(J)));++$t<Dr;)for(var Fn=0,Ji=T[$t],ea=J?J(Ji):Ji;(Fn=yt(ln,ea,Fn,Pe))>-1;)ln!==b&&Ps.call(ln,Fn,1),Ps.call(b,Fn,1);return b}function ks(b,T){for(var J=b?T.length:0,Pe=J-1;J--;){var yt=T[J];if(J==Pe||yt!==$t){var $t=yt;En(yt)?Ps.call(b,yt,1):Bc(b,yt)}}return b}function Mf(b,T){return b+Kn(cu()*(T-b+1))}function Yp(b,T,J,Pe){for(var yt=-1,$t=Ma(ri((T-b)/(J||1)),0),Dr=ei($t);$t--;)Dr[Pe?$t:++yt]=b,b+=J;return Dr}function Up(b,T){var J="";if(!b||T<1||T>Ne)return J;do T%2&&(J+=b),T=Kn(T/2),T&&(b+=b);while(T);return J}function Jo(b,T){return Qi(mi(b,T,nh),b+"")}function Ap(b){return Lr(vh(b))}function op(b,T){var J=vh(b);return $a(J,Ga(T,0,J.length))}function gu(b,T,J,Pe){if(!bl(b))return b;T=af(T,b);for(var yt=-1,$t=T.length,Dr=$t-1,ln=b;ln!=null&&++yt<$t;){var Fn=is(T[yt]),Ji=J;if(Fn==="__proto__"||Fn==="constructor"||Fn==="prototype")return b;if(yt!=Dr){var ea=ln[Fn];Ji=Pe?Pe(ea,Fn,ln):v,Ji===v&&(Ji=bl(ea)?ea:En(T[yt+1])?[]:{})}Xn(ln,Fn,Ji),ln=ln[Fn]}return b}var nl=ul?function(b,T){return ul.set(b,T),b}:nh,il=el?function(b,T){return el(b,"toString",{configurable:!0,enumerable:!1,value:em(T),writable:!0})}:nh;function hp(b){return $a(vh(b))}function wc(b,T,J){var Pe=-1,yt=b.length;T<0&&(T=-T>yt?0:yt+T),J=J>yt?yt:J,J<0&&(J+=yt),yt=T>J?0:J-T>>>0,T>>>=0;for(var $t=ei(yt);++Pe<yt;)$t[Pe]=b[Pe+T];return $t}function Zp(b,T){var J;return Ha(b,function(Pe,yt,$t){return J=T(Pe,yt,$t),!J}),!!J}function jp(b,T,J){var Pe=0,yt=b==null?Pe:b.length;if(typeof T=="number"&&T===T&&yt<=Pr){for(;Pe<yt;){var $t=Pe+yt>>>1,Dr=b[$t];Dr!==null&&!Xf(Dr)&&(J?Dr<=T:Dr<T)?Pe=$t+1:yt=$t}return yt}return rc(b,T,nh,J)}function rc(b,T,J,Pe){var yt=0,$t=b==null?0:b.length;if($t===0)return 0;T=J(T);for(var Dr=T!==T,ln=T===null,Fn=Xf(T),Ji=T===v;yt<$t;){var ea=Kn((yt+$t)/2),ma=J(b[ea]),fo=ma!==v,Ho=ma===null,bs=ma===ma,_u=Xf(ma);if(Dr)var $e=Pe||bs;else Ji?$e=bs&&(Pe||fo):ln?$e=bs&&fo&&(Pe||!Ho):Fn?$e=bs&&fo&&!Ho&&(Pe||!_u):Ho||_u?$e=!1:$e=Pe?ma<=T:ma<T;$e?yt=ea+1:$t=ea}return Bo($t,Wt)}function dp(b,T){for(var J=-1,Pe=b.length,yt=0,$t=[];++J<Pe;){var Dr=b[J],ln=T?T(Dr):Dr;if(!J||!Ki(ln,Fn)){var Fn=ln;$t[yt++]=Dr===0?0:Dr}}return $t}function oh(b){return typeof b=="number"?b:Xf(b)?Fe:+b}function Ms(b){if(typeof b=="string")return b;if(fs(b))return Js(b,Ms)+"";if(Xf(b))return eu?eu.call(b):"";var T=b+"";return T=="0"&&1/b==-se?"-0":T}function kl(b,T,J){var Pe=-1,yt=Wl,$t=b.length,Dr=!0,ln=[],Fn=ln;if(J)Dr=!1,yt=Pc;else if($t>=R){var Ji=T?null:Ot(b);if(Ji)return Dc(Ji);Dr=!1,yt=uu,Fn=new Ze}else Fn=T?[]:ln;e:for(;++Pe<$t;){var ea=b[Pe],ma=T?T(ea):ea;if(ea=J||ea!==0?ea:0,Dr&&ma===ma){for(var fo=Fn.length;fo--;)if(Fn[fo]===ma)continue e;T&&Fn.push(ma),ln.push(ea)}else yt(Fn,ma,J)||(Fn!==ln&&Fn.push(ma),ln.push(ea))}return ln}function Bc(b,T){return T=af(T,b),b=qn(b,T),b==null||delete b[is(Zr(T))]}function vp(b,T,J,Pe){return gu(b,T,J(zo(b,T)),Pe)}function Hf(b,T,J,Pe){for(var yt=b.length,$t=Pe?yt:-1;(Pe?$t--:++$t<yt)&&T(b[$t],$t,b););return J?wc(b,Pe?0:$t,Pe?$t+1:yt):wc(b,Pe?$t+1:0,Pe?yt:$t)}function mp(b,T){var J=b;return J instanceof Mo&&(J=J.value()),bf(T,function(Pe,yt){return yt.func.apply(yt.thisArg,Tl([Pe],yt.args))},J)}function gp(b,T,J){var Pe=b.length;if(Pe<2)return Pe?kl(b[0]):[];for(var yt=-1,$t=ei(Pe);++yt<Pe;)for(var Dr=b[yt],ln=-1;++ln<Pe;)ln!=yt&&($t[yt]=po($t[yt]||Dr,b[ln],T,J));return kl(es($t,1),T,J)}function Vp(b,T,J){for(var Pe=-1,yt=b.length,$t=T.length,Dr={};++Pe<yt;){var ln=Pe<$t?T[Pe]:v;J(Dr,b[Pe],ln)}return Dr}function If(b){return xl(b)?b:[]}function Of(b){return typeof b=="function"?b:nh}function af(b,T){return fs(b)?b:Un(b,T)?[b]:oo(Hu(b))}var sh=Jo;function zc(b,T,J){var Pe=b.length;return J=J===v?Pe:J,!T&&J>=Pe?b:wc(b,T,J)}var yp=bc||function(b){return q.clearTimeout(b)};function df(b,T){if(T)return b.slice();var J=b.length,Pe=ia?ia(J):new b.constructor(J);return b.copy(Pe),Pe}function _p(b){var T=new b.constructor(b.byteLength);return new ec(T).set(new ec(b)),T}function Rf(b,T){var J=T?_p(b.buffer):b.buffer;return new b.constructor(J,b.byteOffset,b.byteLength)}function xp(b){var T=new b.constructor(b.source,Wi.exec(b));return T.lastIndex=b.lastIndex,T}function hl(b){return ll?ns(ll.call(b)):{}}function He(b,T){var J=T?_p(b.buffer):b.buffer;return new b.constructor(J,b.byteOffset,b.length)}function Au(b,T){if(b!==T){var J=b!==v,Pe=b===null,yt=b===b,$t=Xf(b),Dr=T!==v,ln=T===null,Fn=T===T,Ji=Xf(T);if(!ln&&!Ji&&!$t&&b>T||$t&&Dr&&Fn&&!ln&&!Ji||Pe&&Dr&&Fn||!J&&Fn||!yt)return 1;if(!Pe&&!$t&&!Ji&&b<T||Ji&&J&&yt&&!Pe&&!$t||ln&&J&&yt||!Dr&&yt||!Fn)return-1}return 0}function yl(b,T,J){for(var Pe=-1,yt=b.criteria,$t=T.criteria,Dr=yt.length,ln=J.length;++Pe<Dr;){var Fn=Au(yt[Pe],$t[Pe]);if(Fn){if(Pe>=ln)return Fn;var Ji=J[Pe];return Fn*(Ji=="desc"?-1:1)}}return b.index-T.index}function bp(b,T,J,Pe){for(var yt=-1,$t=b.length,Dr=J.length,ln=-1,Fn=T.length,Ji=Ma($t-Dr,0),ea=ei(Fn+Ji),ma=!Pe;++ln<Fn;)ea[ln]=T[ln];for(;++yt<Dr;)(ma||yt<$t)&&(ea[J[yt]]=b[yt]);for(;Ji--;)ea[ln++]=b[yt++];return ea}function Kp(b,T,J,Pe){for(var yt=-1,$t=b.length,Dr=-1,ln=J.length,Fn=-1,Ji=T.length,ea=Ma($t-ln,0),ma=ei(ea+Ji),fo=!Pe;++yt<ea;)ma[yt]=b[yt];for(var Ho=yt;++Fn<Ji;)ma[Ho+Fn]=T[Fn];for(;++Dr<ln;)(fo||yt<$t)&&(ma[Ho+J[Dr]]=b[yt++]);return ma}function Ku(b,T){var J=-1,Pe=b.length;for(T||(T=ei(Pe));++J<Pe;)T[J]=b[J];return T}function Ac(b,T,J,Pe){var yt=!J;J||(J={});for(var $t=-1,Dr=T.length;++$t<Dr;){var ln=T[$t],Fn=Pe?Pe(J[ln],b[ln],ln,J,b):v;Fn===v&&(Fn=b[ln]),yt?Ea(J,ln,Fn):Xn(J,ln,Fn)}return J}function kh(b,T){return Ac(b,Qe(b),T)}function ls(b,T){return Ac(b,pt(b),T)}function uh(b,T){return function(J,Pe){var yt=fs(J)?ha:Li,$t=T?T():{};return yt(J,b,di(Pe,2),$t)}}function Pf(b){return Jo(function(T,J){var Pe=-1,yt=J.length,$t=yt>1?J[yt-1]:v,Dr=yt>2?J[2]:v;for($t=b.length>3&&typeof $t=="function"?(yt--,$t):v,Dr&&Mn(J[0],J[1],Dr)&&($t=yt<3?v:$t,yt=1),T=ns(T);++Pe<yt;){var ln=J[Pe];ln&&b(T,ln,Pe,$t)}return T})}function kf(b,T){return function(J,Pe){if(J==null)return J;if(!_f(J))return b(J,Pe);for(var yt=J.length,$t=T?yt:-1,Dr=ns(J);(T?$t--:++$t<yt)&&Pe(Dr[$t],$t,Dr)!==!1;);return J}}function Uc(b){return function(T,J,Pe){for(var yt=-1,$t=ns(T),Dr=Pe(T),ln=Dr.length;ln--;){var Fn=Dr[b?ln:++yt];if(J($t[Fn],Fn,$t)===!1)break}return T}}function al(b,T,J){var Pe=T&de,yt=pc(b);function $t(){var Dr=this&&this!==q&&this instanceof $t?yt:b;return Dr.apply(Pe?J:this,arguments)}return $t}function Lf(b){return function(T){T=Hu(T);var J=vl(T)?Kl(T):v,Pe=J?J[0]:T.charAt(0),yt=J?zc(J,1).join(""):T.slice(1);return Pe[b]()+yt}}function Wf(b){return function(T){return bf(cg(mh(T).replace(lo,"")),b,"")}}function pc(b){return function(){var T=arguments;switch(T.length){case 0:return new b;case 1:return new b(T[0]);case 2:return new b(T[0],T[1]);case 3:return new b(T[0],T[1],T[2]);case 4:return new b(T[0],T[1],T[2],T[3]);case 5:return new b(T[0],T[1],T[2],T[3],T[4]);case 6:return new b(T[0],T[1],T[2],T[3],T[4],T[5]);case 7:return new b(T[0],T[1],T[2],T[3],T[4],T[5],T[6])}var J=mo(b.prototype),Pe=b.apply(J,T);return bl(Pe)?Pe:J}}function Uh(b,T,J){var Pe=pc(b);function yt(){for(var $t=arguments.length,Dr=ei($t),ln=$t,Fn=qi(yt);ln--;)Dr[ln]=arguments[ln];var Ji=$t<3&&Dr[0]!==Fn&&Dr[$t-1]!==Fn?[]:Yl(Dr,Fn);if($t-=Ji.length,$t<J)return Ue(b,T,vf,yt.placeholder,v,Dr,Ji,v,v,J-$t);var ea=this&&this!==q&&this instanceof yt?Pe:b;return Va(ea,this,Dr)}return yt}function Zh(b){return function(T,J,Pe){var yt=ns(T);if(!_f(T)){var $t=di(J,3);T=hc(T),J=function(ln){return $t(yt[ln],ln,yt)}}var Dr=b(T,J,Pe);return Dr>-1?yt[$t?T[Dr]:Dr]:v}}function Df(b){return ki(function(T){var J=T.length,Pe=J,yt=tu.prototype.thru;for(b&&T.reverse();Pe--;){var $t=T[Pe];if(typeof $t!="function")throw new yc(D);if(yt&&!Dr&&bi($t)=="wrapper")var Dr=new tu([],!0)}for(Pe=Dr?Pe:J;++Pe<J;){$t=T[Pe];var ln=bi($t),Fn=ln=="wrapper"?Fi($t):v;Fn&&Er(Fn[0])&&Fn[1]==(we|xe|K|Me)&&!Fn[4].length&&Fn[9]==1?Dr=Dr[bi(Fn[0])].apply(Dr,Fn[3]):Dr=$t.length==1&&Er($t)?Dr[ln]():Dr.thru($t)}return function(){var Ji=arguments,ea=Ji[0];if(Dr&&Ji.length==1&&fs(ea))return Dr.plant(ea).value();for(var ma=0,fo=J?T[ma].apply(this,Ji):ea;++ma<J;)fo=T[ma].call(this,fo);return fo}})}function vf(b,T,J,Pe,yt,$t,Dr,ln,Fn,Ji){var ea=T&we,ma=T&de,fo=T&pe,Ho=T&(xe|Ve),bs=T&Xe,_u=fo?v:pc(b);function $e(){for(var Iu=arguments.length,Bu=ei(Iu),Wp=Iu;Wp--;)Bu[Wp]=arguments[Wp];if(Ho)var Op=qi($e),$p=oc(Bu,Op);if(Pe&&(Bu=bp(Bu,Pe,yt,Ho)),$t&&(Bu=Kp(Bu,$t,Dr,Ho)),Iu-=$p,Ho&&Iu<Ji){var of=Yl(Bu,Op);return Ue(b,T,vf,$e.placeholder,J,Bu,of,ln,Fn,Ji-Iu)}var _h=ma?J:this,Fp=fo?_h[b]:b;return Iu=Bu.length,ln?Bu=Ii(Bu,ln):bs&&Iu>1&&Bu.reverse(),ea&&Fn<Iu&&(Bu.length=Fn),this&&this!==q&&this instanceof $e&&(Fp=_u||pc(Fp)),Fp.apply(_h,Bu)}return $e}function Ep(b,T){return function(J,Pe){return Kc(J,b,T(Pe),{})}}function H(b,T){return function(J,Pe){var yt;if(J===v&&Pe===v)return T;if(J!==v&&(yt=J),Pe!==v){if(yt===v)return Pe;typeof J=="string"||typeof Pe=="string"?(J=Ms(J),Pe=Ms(Pe)):(J=oh(J),Pe=oh(Pe)),yt=b(J,Pe)}return yt}}function ue(b){return ki(function(T){return T=Js(T,Ll(di())),Jo(function(J){var Pe=this;return b(T,function(yt){return Va(yt,Pe,J)})})})}function _e(b,T){T=T===v?" ":Ms(T);var J=T.length;if(J<2)return J?Up(T,b):T;var Pe=Up(T,ri(b/Fc(T)));return vl(T)?zc(Kl(Pe),0,b).join(""):Pe.slice(0,b)}function Be(b,T,J,Pe){var yt=T&de,$t=pc(b);function Dr(){for(var ln=-1,Fn=arguments.length,Ji=-1,ea=Pe.length,ma=ei(ea+Fn),fo=this&&this!==q&&this instanceof Dr?$t:b;++Ji<ea;)ma[Ji]=Pe[Ji];for(;Fn--;)ma[Ji++]=arguments[++ln];return Va(fo,yt?J:this,ma)}return Dr}function rt(b){return function(T,J,Pe){return Pe&&typeof Pe!="number"&&Mn(T,J,Pe)&&(J=Pe=v),T=kp(T),J===v?(J=T,T=0):J=kp(J),Pe=Pe===v?T<J?1:-1:kp(Pe),Yp(T,J,Pe,b)}}function at(b){return function(T,J){return typeof T=="string"&&typeof J=="string"||(T=Hp(T),J=Hp(J)),b(T,J)}}function Ue(b,T,J,Pe,yt,$t,Dr,ln,Fn,Ji){var ea=T&xe,ma=ea?Dr:v,fo=ea?v:Dr,Ho=ea?$t:v,bs=ea?v:$t;T|=ea?K:ke,T&=~(ea?ke:K),T&Oe||(T&=~(de|pe));var _u=[b,T,yt,Ho,ma,bs,fo,ln,Fn,Ji],$e=J.apply(v,_u);return Er(b)&&ao($e,_u),$e.placeholder=Pe,aa($e,b,T)}function Xt(b){var T=Ua[b];return function(J,Pe){if(J=Hp(J),Pe=Pe==null?0:Bo(no(Pe),292),Pe&&li(J)){var yt=(Hu(J)+"e").split("e"),$t=T(yt[0]+"e"+(+yt[1]+Pe));return yt=(Hu($t)+"e").split("e"),+(yt[0]+"e"+(+yt[1]-Pe))}return T(J)}}var Ot=us&&1/Dc(new us([,-0]))[1]==se?function(b){return new us(b)}:rm;function vr(b){return function(T){var J=Vt(T);return J==mn?uc(T):J==ne?Jf(T):ah(T,b(T))}}function xn(b,T,J,Pe,yt,$t,Dr,ln){var Fn=T&pe;if(!Fn&&typeof b!="function")throw new yc(D);var Ji=Pe?Pe.length:0;if(Ji||(T&=~(K|ke),Pe=yt=v),Dr=Dr===v?Dr:Ma(no(Dr),0),ln=ln===v?ln:no(ln),Ji-=yt?yt.length:0,T&ke){var ea=Pe,ma=yt;Pe=yt=v}var fo=Fn?v:Fi(b),Ho=[b,T,J,Pe,yt,ea,ma,$t,Dr,ln];if(fo&&Rn(Ho,fo),b=Ho[0],T=Ho[1],J=Ho[2],Pe=Ho[3],yt=Ho[4],ln=Ho[9]=Ho[9]===v?Fn?0:b.length:Ma(Ho[9]-Ji,0),!ln&&T&(xe|Ve)&&(T&=~(xe|Ve)),!T||T==de)var bs=al(b,T,J);else T==xe||T==Ve?bs=Uh(b,T,ln):(T==K||T==(de|K))&&!yt.length?bs=Be(b,T,J,Pe):bs=vf.apply(v,Ho);var _u=fo?nl:ao;return aa(_u(bs,Ho),b,T)}function Pn(b,T,J,Pe){return b===v||Ki(b,Jl[J])&&!_s.call(Pe,J)?T:b}function ti(b,T,J,Pe,yt,$t){return bl(b)&&bl(T)&&($t.set(T,b),Yu(b,T,v,ti,$t),$t.delete(T)),b}function Yn(b){return fh(b)?v:b}function On(b,T,J,Pe,yt,$t){var Dr=J&le,ln=b.length,Fn=T.length;if(ln!=Fn&&!(Dr&&Fn>ln))return!1;var Ji=$t.get(b),ea=$t.get(T);if(Ji&&ea)return Ji==T&&ea==b;var ma=-1,fo=!0,Ho=J&be?new Ze:v;for($t.set(b,T),$t.set(T,b);++ma<ln;){var bs=b[ma],_u=T[ma];if(Pe)var $e=Dr?Pe(_u,bs,ma,T,b,$t):Pe(bs,_u,ma,b,T,$t);if($e!==v){if($e)continue;fo=!1;break}if(Ho){if(!vc(T,function(Iu,Bu){if(!uu(Ho,Bu)&&(bs===Iu||yt(bs,Iu,J,Pe,$t)))return Ho.push(Bu)})){fo=!1;break}}else if(!(bs===_u||yt(bs,_u,J,Pe,$t))){fo=!1;break}}return $t.delete(b),$t.delete(T),fo}function Ni(b,T,J,Pe,yt,$t,Dr){switch(J){case lt:if(b.byteLength!=T.byteLength||b.byteOffset!=T.byteOffset)return!1;b=b.buffer,T=T.buffer;case it:return!(b.byteLength!=T.byteLength||!$t(new ec(b),new ec(T)));case sn:case ot:case _n:return Ki(+b,+T);case cr:return b.name==T.name&&b.message==T.message;case me:case fe:return b==T+"";case mn:var ln=uc;case ne:var Fn=Pe&le;if(ln||(ln=Dc),b.size!=T.size&&!Fn)return!1;var Ji=Dr.get(b);if(Ji)return Ji==T;Pe|=be,Dr.set(b,T);var ea=On(ln(b),ln(T),Pe,yt,$t,Dr);return Dr.delete(b),ea;case Q:if(ll)return ll.call(b)==ll.call(T)}return!1}function Bi(b,T,J,Pe,yt,$t){var Dr=J&le,ln=Gi(b),Fn=ln.length,Ji=Gi(T),ea=Ji.length;if(Fn!=ea&&!Dr)return!1;for(var ma=Fn;ma--;){var fo=ln[ma];if(!(Dr?fo in T:_s.call(T,fo)))return!1}var Ho=$t.get(b),bs=$t.get(T);if(Ho&&bs)return Ho==T&&bs==b;var _u=!0;$t.set(b,T),$t.set(T,b);for(var $e=Dr;++ma<Fn;){fo=ln[ma];var Iu=b[fo],Bu=T[fo];if(Pe)var Wp=Dr?Pe(Bu,Iu,fo,T,b,$t):Pe(Iu,Bu,fo,b,T,$t);if(!(Wp===v?Iu===Bu||yt(Iu,Bu,J,Pe,$t):Wp)){_u=!1;break}$e||($e=fo=="constructor")}if(_u&&!$e){var Op=b.constructor,$p=T.constructor;Op!=$p&&"constructor"in b&&"constructor"in T&&!(typeof Op=="function"&&Op instanceof Op&&typeof $p=="function"&&$p instanceof $p)&&(_u=!1)}return $t.delete(b),$t.delete(T),_u}function ki(b){return Qi(mi(b,v,Xo),b+"")}function Gi(b){return An(b,hc,Qe)}function Di(b){return An(b,xf,pt)}var Fi=ul?function(b){return ul.get(b)}:rm;function bi(b){for(var T=b.name+"",J=Ec[T],Pe=_s.call(Ec,T)?J.length:0;Pe--;){var yt=J[Pe],$t=yt.func;if($t==null||$t==b)return yt.name}return T}function qi(b){var T=_s.call(Rt,"placeholder")?Rt:b;return T.placeholder}function di(){var b=Rt.iteratee||d0;return b=b===d0?ef:b,arguments.length?b(arguments[0],arguments[1]):b}function ba(b,T){var J=b.__data__;return Nr(T)?J[typeof T=="string"?"string":"hash"]:J.map}function _a(b){for(var T=hc(b),J=T.length;J--;){var Pe=T[J],yt=b[Pe];T[J]=[Pe,yt,ci(yt)]}return T}function Ya(b,T){var J=sc(b,T);return pl(J)?J:v}function Te(b){var T=_s.call(b,Eu),J=b[Eu];try{b[Eu]=v;var Pe=!0}catch($t){}var yt=ji.call(b);return Pe&&(T?b[Eu]=J:delete b[Eu]),yt}var Qe=Vn?function(b){return b==null?[]:(b=ns(b),Qs(Vn(b),function(T){return cc.call(b,T)}))}:nm,pt=Vn?function(b){for(var T=[];b;)Tl(T,Qe(b)),b=lf(b);return T}:nm,Vt=vu;(Pa&&Vt(new Pa(new ArrayBuffer(1)))!=lt||la&&Vt(new la)!=mn||sl&&Vt(sl.resolve())!=kr||us&&Vt(new us)!=ne||wu&&Vt(new wu)!=dt)&&(Vt=function(b){var T=vu(b),J=T==Fr?b.constructor:v,Pe=J?Yo(J):"";if(Pe)switch(Pe){case cf:return lt;case ws:return mn;case Qo:return kr;case ff:return ne;case Du:return dt}return T});function Sr(b,T,J){for(var Pe=-1,yt=J.length;++Pe<yt;){var $t=J[Pe],Dr=$t.size;switch($t.type){case"drop":b+=Dr;break;case"dropRight":T-=Dr;break;case"take":T=Bo(T,b+Dr);break;case"takeRight":b=Ma(b,T-Dr);break}}return{start:b,end:T}}function dr(b){var T=b.match(ni);return T?T[1].split(ta):[]}function Ar(b,T,J){T=af(T,b);for(var Pe=-1,yt=T.length,$t=!1;++Pe<yt;){var Dr=is(T[Pe]);if(!($t=b!=null&&J(b,Dr)))break;b=b[Dr]}return $t||++Pe!=yt?$t:(yt=b==null?0:b.length,!!yt&&qp(yt)&&En(Dr,yt)&&(fs(b)||Qu(b)))}function hn(b){var T=b.length,J=new b.constructor(T);return T&&typeof b[0]=="string"&&_s.call(b,"index")&&(J.index=b.index,J.input=b.input),J}function Tn(b){return typeof b.constructor=="function"&&!Wn(b)?mo(lf(b)):{}}function Hn(b,T,J){var Pe=b.constructor;switch(T){case it:return _p(b);case sn:case ot:return new Pe(+b);case lt:return Rf(b,J);case qt:case pr:case Hr:case Xr:case ce:case xt:case Gt:case Ir:case nn:return He(b,J);case mn:return new Pe;case _n:case fe:return new Pe(b);case me:return xp(b);case ne:return new Pe;case Q:return hl(b)}}function Bn(b,T){var J=T.length;if(!J)return b;var Pe=J-1;return T[Pe]=(J>1?"& ":"")+T[Pe],T=T.join(J>2?", ":" "),b.replace(tn,`{
/* [wrapped with `+T+`] */
`)}function bn(b){return fs(b)||Qu(b)||!!(ol&&b&&b[ol])}function En(b,T){var J=typeof b;return T=T==null?Ne:T,!!T&&(J=="number"||J!="symbol"&&Eo.test(b))&&b>-1&&b%1==0&&b<T}function Mn(b,T,J){if(!bl(J))return!1;var Pe=typeof T;return(Pe=="number"?_f(J)&&En(T,J.length):Pe=="string"&&T in J)?Ki(J[T],b):!1}function Un(b,T){if(fs(b))return!1;var J=typeof b;return J=="number"||J=="symbol"||J=="boolean"||b==null||Xf(b)?!0:sr.test(b)||!Zt.test(b)||T!=null&&b in ns(T)}function Nr(b){var T=typeof b;return T=="string"||T=="number"||T=="symbol"||T=="boolean"?b!=="__proto__":b===null}function Er(b){var T=bi(b),J=Rt[T];if(typeof J!="function"||!(T in Mo.prototype))return!1;if(b===J)return!0;var Pe=Fi(J);return!!Pe&&b===Pe[0]}function oi(b){return!!qs&&qs in b}var wi=ml?Mp:im;function Wn(b){var T=b&&b.constructor,J=typeof T=="function"&&T.prototype||Jl;return b===J}function ci(b){return b===b&&!bl(b)}function Mi(b,T){return function(J){return J==null?!1:J[b]===T&&(T!==v||b in ns(J))}}function Xi(b){var T=gn(b,function(Pe){return J.size===z&&J.clear(),Pe}),J=T.cache;return T}function Rn(b,T){var J=b[1],Pe=T[1],yt=J|Pe,$t=yt<(de|pe|we),Dr=Pe==we&&J==xe||Pe==we&&J==Me&&b[7].length<=T[8]||Pe==(we|Me)&&T[7].length<=T[8]&&J==xe;if(!($t||Dr))return b;Pe&de&&(b[2]=T[2],yt|=J&de?0:Oe);var ln=T[3];if(ln){var Fn=b[3];b[3]=Fn?bp(Fn,ln,T[4]):ln,b[4]=Fn?Yl(b[3],Z):T[4]}return ln=T[5],ln&&(Fn=b[5],b[5]=Fn?Kp(Fn,ln,T[6]):ln,b[6]=Fn?Yl(b[5],Z):T[6]),ln=T[7],ln&&(b[7]=ln),Pe&we&&(b[8]=b[8]==null?T[8]:Bo(b[8],T[8])),b[9]==null&&(b[9]=T[9]),b[0]=T[0],b[1]=yt,b}function kn(b){var T=[];if(b!=null)for(var J in ns(b))T.push(J);return T}function Si(b){return ji.call(b)}function mi(b,T,J){return T=Ma(T===v?b.length-1:T,0),function(){for(var Pe=arguments,yt=-1,$t=Ma(Pe.length-T,0),Dr=ei($t);++yt<$t;)Dr[yt]=Pe[T+yt];yt=-1;for(var ln=ei(T+1);++yt<T;)ln[yt]=Pe[yt];return ln[T]=J(Dr),Va(b,this,ln)}}function qn(b,T){return T.length<2?b:zo(b,wc(T,0,-1))}function Ii(b,T){for(var J=b.length,Pe=Bo(T.length,J),yt=Ku(b);Pe--;){var $t=T[Pe];b[Pe]=En($t,J)?yt[$t]:v}return b}function _i(b,T){if(!(T==="constructor"&&typeof b[T]=="function")&&T!="__proto__")return b[T]}var ao=Fa(nl),La=qr||function(b,T){return q.setTimeout(b,T)},Qi=Fa(il);function aa(b,T,J){var Pe=T+"";return Qi(b,Bn(Pe,Po(dr(Pe),J)))}function Fa(b){var T=0,J=0;return function(){var Pe=As(),yt=ie-(Pe-J);if(J=Pe,yt>0){if(++T>=mt)return arguments[0]}else T=0;return b.apply(v,arguments)}}function $a(b,T){var J=-1,Pe=b.length,yt=Pe-1;for(T=T===v?Pe:T;++J<T;){var $t=Mf(J,yt),Dr=b[$t];b[$t]=b[J],b[J]=Dr}return b.length=T,b}var oo=Xi(function(b){var T=[];return b.charCodeAt(0)===46&&T.push(""),b.replace(bt,function(J,Pe,yt,$t){T.push(yt?$t.replace(Wr,"$1"):Pe||J)}),T});function is(b){if(typeof b=="string"||Xf(b))return b;var T=b+"";return T=="0"&&1/b==-se?"-0":T}function Yo(b){if(b!=null){try{return lu.call(b)}catch(T){}try{return b+""}catch(T){}}return""}function Po(b,T){return $o(Qt,function(J){var Pe="_."+J[0];T&J[1]&&!Wl(b,Pe)&&b.push(Pe)}),b.sort()}function js(b){if(b instanceof Mo)return b.clone();var T=new tu(b.__wrapped__,b.__chain__);return T.__actions__=Ku(b.__actions__),T.__index__=b.__index__,T.__values__=b.__values__,T}function Uo(b,T,J){(J?Mn(b,T,J):T===v)?T=1:T=Ma(no(T),0);var Pe=b==null?0:b.length;if(!Pe||T<1)return[];for(var yt=0,$t=0,Dr=ei(ri(Pe/T));yt<Pe;)Dr[$t++]=wc(b,yt,yt+=T);return Dr}function cs(b){for(var T=-1,J=b==null?0:b.length,Pe=0,yt=[];++T<J;){var $t=b[T];$t&&(yt[Pe++]=$t)}return yt}function Vs(){var b=arguments.length;if(!b)return[];for(var T=ei(b-1),J=arguments[0],Pe=b;Pe--;)T[Pe-1]=arguments[Pe];return Tl(fs(J)?Ku(J):[J],es(T,1))}var Ls=Jo(function(b,T){return xl(b)?po(b,es(T,1,xl,!0)):[]}),Zo=Jo(function(b,T){var J=Zr(T);return xl(J)&&(J=v),xl(b)?po(b,es(T,1,xl,!0),di(J,2)):[]}),Io=Jo(function(b,T){var J=Zr(T);return xl(J)&&(J=v),xl(b)?po(b,es(T,1,xl,!0),v,J):[]});function Go(b,T,J){var Pe=b==null?0:b.length;return Pe?(T=J||T===v?1:no(T),wc(b,T<0?0:T,Pe)):[]}function Za(b,T,J){var Pe=b==null?0:b.length;return Pe?(T=J||T===v?1:no(T),T=Pe-T,wc(b,0,T<0?0:T)):[]}function as(b,T){return b&&b.length?Hf(b,di(T,3),!0,!0):[]}function so(b,T){return b&&b.length?Hf(b,di(T,3),!0):[]}function iu(b,T,J,Pe){var yt=b==null?0:b.length;return yt?(J&&typeof J!="number"&&Mn(b,T,J)&&(J=0,Pe=yt),Gu(b,T,J,Pe)):[]}function Oa(b,T,J){var Pe=b==null?0:b.length;if(!Pe)return-1;var yt=J==null?0:no(J);return yt<0&&(yt=Ma(Pe+yt,0)),Ju(b,di(T,3),yt)}function ko(b,T,J){var Pe=b==null?0:b.length;if(!Pe)return-1;var yt=Pe-1;return J!==v&&(yt=no(J),yt=J<0?Ma(Pe+yt,0):Bo(yt,Pe-1)),Ju(b,di(T,3),yt,!0)}function Xo(b){var T=b==null?0:b.length;return T?es(b,1):[]}function Hs(b){var T=b==null?0:b.length;return T?es(b,se):[]}function jo(b,T){var J=b==null?0:b.length;return J?(T=T===v?1:no(T),es(b,T)):[]}function Dt(b){for(var T=-1,J=b==null?0:b.length,Pe={};++T<J;){var yt=b[T];Pe[yt[0]]=yt[1]}return Pe}function an(b){return b&&b.length?b[0]:v}function un(b,T,J){var Pe=b==null?0:b.length;if(!Pe)return-1;var yt=J==null?0:no(J);return yt<0&&(yt=Ma(Pe+yt,0)),Vc(b,T,yt)}function oa(b){var T=b==null?0:b.length;return T?wc(b,0,-1):[]}var Do=Jo(function(b){var T=Js(b,If);return T.length&&T[0]===b[0]?ip(T):[]}),Ht=Jo(function(b){var T=Zr(b),J=Js(b,If);return T===Zr(J)?T=v:J.pop(),J.length&&J[0]===b[0]?ip(J,di(T,2)):[]}),Mt=Jo(function(b){var T=Zr(b),J=Js(b,If);return T=typeof T=="function"?T:v,T&&J.pop(),J.length&&J[0]===b[0]?ip(J,v,T):[]});function yr(b,T){return b==null?"":ga.call(b,T)}function Zr(b){var T=b==null?0:b.length;return T?b[T-1]:v}function Sn(b,T,J){var Pe=b==null?0:b.length;if(!Pe)return-1;var yt=Pe;return J!==v&&(yt=no(J),yt=yt<0?Ma(Pe+yt,0):Bo(yt,Pe-1)),T===T?$c(b,T,yt):Ju(b,ju,yt,!0)}function Or(b,T){return b&&b.length?nf(b,no(T)):v}var ir=Jo(Br);function Br(b,T){return b&&b.length&&T&&T.length?Tf(b,T):b}function kt(b,T,J){return b&&b.length&&T&&T.length?Tf(b,T,di(J,2)):b}function fr(b,T,J){return b&&b.length&&T&&T.length?Tf(b,T,v,J):b}var jt=ki(function(b,T){var J=b==null?0:b.length,Pe=Qa(b,T);return ks(b,Js(T,function(yt){return En(yt,J)?+yt:yt}).sort(Au)),Pe});function rn(b,T){var J=[];if(!(b&&b.length))return J;var Pe=-1,yt=[],$t=b.length;for(T=di(T,3);++Pe<$t;){var Dr=b[Pe];T(Dr,Pe,b)&&(J.push(Dr),yt.push(Pe))}return ks(b,yt),J}function jr(b){return b==null?b:tl.call(b)}function Cn(b,T,J){var Pe=b==null?0:b.length;return Pe?(J&&typeof J!="number"&&Mn(b,T,J)?(T=0,J=Pe):(T=T==null?0:no(T),J=J===v?Pe:no(J)),wc(b,T,J)):[]}function Ci(b,T){return jp(b,T)}function Oi(b,T,J){return rc(b,T,di(J,2))}function sa(b,T){var J=b==null?0:b.length;if(J){var Pe=jp(b,T);if(Pe<J&&Ki(b[Pe],T))return Pe}return-1}function $i(b,T){return jp(b,T,!0)}function xa(b,T,J){return rc(b,T,di(J,2),!0)}function va(b,T){var J=b==null?0:b.length;if(J){var Pe=jp(b,T,!0)-1;if(Ki(b[Pe],T))return Pe}return-1}function Ca(b){return b&&b.length?dp(b):[]}function pa(b,T){return b&&b.length?dp(b,di(T,2)):[]}function Sa(b){var T=b==null?0:b.length;return T?wc(b,1,T):[]}function to(b,T,J){return b&&b.length?(T=J||T===v?1:no(T),wc(b,0,T<0?0:T)):[]}function Is(b,T,J){var Pe=b==null?0:b.length;return Pe?(T=J||T===v?1:no(T),T=Pe-T,wc(b,T<0?0:T,Pe)):[]}function _l(b,T){return b&&b.length?Hf(b,di(T,3),!1,!0):[]}function Lo(b,T){return b&&b.length?Hf(b,di(T,3)):[]}var Ja=Jo(function(b){return kl(es(b,1,xl,!0))}),Cu=Jo(function(b){var T=Zr(b);return xl(T)&&(T=v),kl(es(b,1,xl,!0),di(T,2))}),Uu=Jo(function(b){var T=Zr(b);return T=typeof T=="function"?T:v,kl(es(b,1,xl,!0),v,T)});function dl(b){return b&&b.length?kl(b):[]}function Nl(b,T){return b&&b.length?kl(b,di(T,2)):[]}function mf(b,T){return T=typeof T=="function"?T:v,b&&b.length?kl(b,v,T):[]}function Cc(b){if(!(b&&b.length))return[];var T=0;return b=Qs(b,function(J){if(xl(J))return T=Ma(J.length,T),!0}),Xl(T,function(J){return Js(b,$l(J))})}function $f(b,T){if(!(b&&b.length))return[];var J=Cc(b);return T==null?J:Js(J,function(Pe){return Va(T,v,Pe)})}var lh=Jo(function(b,T){return xl(b)?po(b,T):[]}),Bl=Jo(function(b){return gp(Qs(b,xl))}),jl=Jo(function(b){var T=Zr(b);return xl(T)&&(T=v),gp(Qs(b,xl),di(T,2))}),Lh=Jo(function(b){var T=Zr(b);return T=typeof T=="function"?T:v,gp(Qs(b,xl),v,T)}),Qp=Jo(Cc);function Qh(b,T){return Vp(b||[],T||[],Xn)}function jh(b,T){return Vp(b||[],T||[],gu)}var Jh=Jo(function(b){var T=b.length,J=T>1?b[T-1]:v;return J=typeof J=="function"?(b.pop(),J):v,$f(b,J)});function wh(b){var T=Rt(b);return T.__chain__=!0,T}function Tc(b,T){return T(b),b}function Jp(b,T){return T(b)}var Ld=ki(function(b){var T=b.length,J=T?b[0]:0,Pe=this.__wrapped__,yt=function($t){return Qa($t,b)};return T>1||this.__actions__.length||!(Pe instanceof Mo)||!En(J)?this.thru(yt):(Pe=Pe.slice(J,+J+(T?1:0)),Pe.__actions__.push({func:Jp,args:[yt],thisArg:v}),new tu(Pe,this.__chain__).thru(function($t){return T&&!$t.length&&$t.push(v),$t}))});function Cp(){return wh(this)}function zl(){return new tu(this.value(),this.__chain__)}function Ff(){this.__values__===v&&(this.__values__=id(this.value()));var b=this.__index__>=this.__values__.length,T=b?v:this.__values__[this.__index__++];return{done:b,value:T}}function Vh(){return this}function a(b){for(var T,J=this;J instanceof xs;){var Pe=js(J);Pe.__index__=0,Pe.__values__=v,T?yt.__wrapped__=Pe:T=Pe;var yt=Pe;J=J.__wrapped__}return yt.__wrapped__=b,T}function s(){var b=this.__wrapped__;if(b instanceof Mo){var T=b;return this.__actions__.length&&(T=new Mo(this)),T=T.reverse(),T.__actions__.push({func:Jp,args:[jr],thisArg:v}),new tu(T,this.__chain__)}return this.thru(jr)}function h(){return mp(this.__wrapped__,this.__actions__)}var E=uh(function(b,T,J){_s.call(b,J)?++b[J]:Ea(b,J,1)});function M(b,T,J){var Pe=fs(b)?To:eo;return J&&Mn(b,T,J)&&(T=v),Pe(b,di(T,3))}function L(b,T){var J=fs(b)?Qs:co;return J(b,di(T,3))}var j=Zh(Oa),re=Zh(ko);function Ce(b,T){return es(mr(b,T),1)}function ze(b,T){return es(mr(b,T),se)}function We(b,T,J){return J=J===v?1:no(J),es(mr(b,T),J)}function Je(b,T){var J=fs(b)?$o:Ha;return J(b,di(T,3))}function _t(b,T){var J=fs(b)?ms:Ro;return J(b,di(T,3))}var It=uh(function(b,T,J){_s.call(b,J)?b[J].push(T):Ea(b,J,[T])});function ar(b,T,J,Pe){b=_f(b)?b:vh(b),J=J&&!Pe?no(J):0;var yt=b.length;return J<0&&(J=Ma(yt+J,0)),eh(b)?J<=yt&&b.indexOf(T,J)>-1:!!yt&&Vc(b,T,J)>-1}var ur=Jo(function(b,T,J){var Pe=-1,yt=typeof T=="function",$t=_f(b)?ei(b.length):[];return Ha(b,function(Dr){$t[++Pe]=yt?Va(T,Dr,J):fl(Dr,T,J)}),$t}),Rr=uh(function(b,T,J){Ea(b,J,T)});function mr(b,T){var J=fs(b)?Js:Pl;return J(b,di(T,3))}function cn(b,T,J,Pe){return b==null?[]:(fs(T)||(T=T==null?[]:[T]),J=Pe?v:J,fs(J)||(J=J==null?[]:[J]),Cf(b,T,J))}var wn=uh(function(b,T,J){b[J?0:1].push(T)},function(){return[[],[]]});function Gn(b,T,J){var Pe=fs(b)?bf:Ml,yt=arguments.length<3;return Pe(b,di(T,4),J,yt,Ha)}function Zn(b,T,J){var Pe=fs(b)?Zc:Ml,yt=arguments.length<3;return Pe(b,di(T,4),J,yt,Ro)}function gi(b,T){var J=fs(b)?Qs:co;return J(b,Qr(di(T,3)))}function Yi(b){var T=fs(b)?Lr:Ap;return T(b)}function p(b,T,J){(J?Mn(b,T,J):T===v)?T=1:T=no(T);var Pe=fs(b)?pn:op;return Pe(b,T)}function y(b){var T=fs(b)?zn:hp;return T(b)}function C(b){if(b==null)return 0;if(_f(b))return eh(b)?Fc(b):b.length;var T=Vt(b);return T==mn||T==ne?b.size:wf(b).length}function V(b,T,J){var Pe=fs(b)?vc:Zp;return J&&Mn(b,T,J)&&(T=v),Pe(b,di(T,3))}var ae=Jo(function(b,T){if(b==null)return[];var J=T.length;return J>1&&Mn(b,T[0],T[1])?T=[]:J>2&&Mn(T[0],T[1],T[2])&&(T=[T[0]]),Cf(b,es(T,1),[])}),Ie=Vf||function(){return q.Date.now()};function ut(b,T){if(typeof T!="function")throw new yc(D);return b=no(b),function(){if(--b<1)return T.apply(this,arguments)}}function zt(b,T,J){return T=J?v:T,T=b&&T==null?b.length:T,xn(b,we,v,v,v,v,T)}function wr(b,T){var J;if(typeof T!="function")throw new yc(D);return b=no(b),function(){return--b>0&&(J=T.apply(this,arguments)),b<=1&&(T=v),J}}var fn=Jo(function(b,T,J){var Pe=de;if(J.length){var yt=Yl(J,qi(fn));Pe|=K}return xn(b,Pe,T,J,yt)}),pi=Jo(function(b,T,J){var Pe=de|pe;if(J.length){var yt=Yl(J,qi(pi));Pe|=K}return xn(T,Pe,b,J,yt)});function $n(b,T,J){T=J?v:T;var Pe=xn(b,xe,v,v,v,v,v,T);return Pe.placeholder=$n.placeholder,Pe}function hi(b,T,J){T=J?v:T;var Pe=xn(b,Ve,v,v,v,v,v,T);return Pe.placeholder=hi.placeholder,Pe}function ca(b,T,J){var Pe,yt,$t,Dr,ln,Fn,Ji=0,ea=!1,ma=!1,fo=!0;if(typeof b!="function")throw new yc(D);T=Hp(T)||0,bl(J)&&(ea=!!J.leading,ma="maxWait"in J,$t=ma?Ma(Hp(J.maxWait)||0,T):$t,fo="trailing"in J?!!J.trailing:fo);function Ho(of){var _h=Pe,Fp=yt;return Pe=yt=v,Ji=of,Dr=b.apply(Fp,_h),Dr}function bs(of){return Ji=of,ln=La(Iu,T),ea?Ho(of):Dr}function _u(of){var _h=of-Fn,Fp=of-Ji,y0=T-_h;return ma?Bo(y0,$t-Fp):y0}function $e(of){var _h=of-Fn,Fp=of-Ji;return Fn===v||_h>=T||_h<0||ma&&Fp>=$t}function Iu(){var of=Ie();if($e(of))return Bu(of);ln=La(Iu,_u(of))}function Bu(of){return ln=v,fo&&Pe?Ho(of):(Pe=yt=v,Dr)}function Wp(){ln!==v&&yp(ln),Ji=0,Pe=Fn=yt=ln=v}function Op(){return ln===v?Dr:Bu(Ie())}function $p(){var of=Ie(),_h=$e(of);if(Pe=arguments,yt=this,Fn=of,_h){if(ln===v)return bs(Fn);if(ma)return yp(ln),ln=La(Iu,T),Ho(Fn)}return ln===v&&(ln=La(Iu,T)),Dr}return $p.cancel=Wp,$p.flush=Op,$p}var Ra=Jo(function(b,T){return _o(b,1,T)}),Da=Jo(function(b,T,J){return _o(b,Hp(T)||0,J)});function os(b){return xn(b,Xe)}function gn(b,T){if(typeof b!="function"||T!=null&&typeof T!="function")throw new yc(D);var J=function(){var Pe=arguments,yt=T?T.apply(this,Pe):Pe[0],$t=J.cache;if($t.has(yt))return $t.get(yt);var Dr=b.apply(this,Pe);return J.cache=$t.set(yt,Dr)||$t,Dr};return J.cache=new(gn.Cache||m),J}gn.Cache=m;function Qr(b){if(typeof b!="function")throw new yc(D);return function(){var T=arguments;switch(T.length){case 0:return!b.call(this);case 1:return!b.call(this,T[0]);case 2:return!b.call(this,T[0],T[1]);case 3:return!b.call(this,T[0],T[1],T[2])}return!b.apply(this,T)}}function In(b){return wr(2,b)}var ra=sh(function(b,T){T=T.length==1&&fs(T[0])?Js(T[0],Ll(di())):Js(es(T,1),Ll(di()));var J=T.length;return Jo(function(Pe){for(var yt=-1,$t=Bo(Pe.length,J);++yt<$t;)Pe[yt]=T[yt].call(this,Pe[yt]);return Va(b,this,Pe)})}),Ba=Jo(function(b,T){var J=Yl(T,qi(Ba));return xn(b,K,v,T,J)}),ho=Jo(function(b,T){var J=Yl(T,qi(ho));return xn(b,ke,v,T,J)}),ro=ki(function(b,T){return xn(b,Me,v,v,v,T)});function go(b,T){if(typeof b!="function")throw new yc(D);return T=T===v?T:no(T),Jo(b,T)}function wo(b,T){if(typeof b!="function")throw new yc(D);return T=T==null?0:Ma(no(T),0),Jo(function(J){var Pe=J[T],yt=zc(J,0,T);return Pe&&Tl(yt,Pe),Va(b,this,yt)})}function Ao(b,T,J){var Pe=!0,yt=!0;if(typeof b!="function")throw new yc(D);return bl(J)&&(Pe="leading"in J?!!J.leading:Pe,yt="trailing"in J?!!J.trailing:yt),ca(b,T,{leading:Pe,maxWait:T,trailing:yt})}function Fs(b){return zt(b,1)}function Ws(b,T){return Ba(Of(T),b)}function Nf(){if(!arguments.length)return[];var b=arguments[0];return fs(b)?b:[b]}function gf(b){return io(b,te)}function Ns(b,T){return T=typeof T=="function"?T:v,io(b,te,T)}function nc(b){return io(b,W|te)}function yf(b,T){return T=typeof T=="function"?T:v,io(b,W|te,T)}function yu(b,T){return T==null||yo(b,T,hc(T))}function Ki(b,T){return b===T||b!==b&&T!==T}var Tp=at(Nt),Ln=at(function(b,T){return b>=T}),Qu=Qc(function(){return arguments}())?Qc:function(b){return Vl(b)&&_s.call(b,"callee")&&!cc.call(b,"callee")},fs=ei.isArray,Pp=lr?Ll(lr):Sc;function _f(b){return b!=null&&qp(b.length)&&!Mp(b)}function xl(b){return Vl(b)&&_f(b)}function ch(b){return b===!0||b===!1||Vl(b)&&vu(b)==sn}var sp=Ri||im,qh=Gr?Ll(Gr):Lu;function dd(b){return Vl(b)&&b.nodeType===1&&!fh(b)}function Gh(b){if(b==null)return!0;if(_f(b)&&(fs(b)||typeof b=="string"||typeof b.splice=="function"||sp(b)||Gp(b)||Qu(b)))return!b.length;var T=Vt(b);if(T==mn||T==ne)return!b.size;if(Wn(b))return!wf(b).length;for(var J in b)if(_s.call(b,J))return!1;return!0}function ed(b,T){return Fl(b,T)}function vd(b,T,J){J=typeof J=="function"?J:v;var Pe=J?J(b,T):v;return Pe===v?Fl(b,T,v,J):!!Pe}function Hh(b){if(!Vl(b))return!1;var T=vu(b);return T==cr||T==_r||typeof b.message=="string"&&typeof b.name=="string"&&!fh(b)}function Ah(b){return typeof b=="number"&&li(b)}function Mp(b){if(!bl(b))return!1;var T=vu(b);return T==Vr||T==Qn||T==Cr||T==ft}function Wh(b){return typeof b=="number"&&b==no(b)}function qp(b){return typeof b=="number"&&b>-1&&b%1==0&&b<=Ne}function bl(b){var T=typeof b;return b!=null&&(T=="object"||T=="function")}function Vl(b){return b!=null&&typeof b=="object"}var md=ii?Ll(ii):Jc;function gd(b,T){return b===T||ts(b,T,_a(T))}function yd(b,T,J){return J=typeof J=="function"?J:v,ts(b,T,_a(T),J)}function Dd(b){return rd(b)&&b!=+b}function _d(b){if(wi(b))throw new da(A);return pl(b)}function td(b){return b===null}function xd(b){return b==null}function rd(b){return typeof b=="number"||Vl(b)&&vu(b)==_n}function fh(b){if(!Vl(b)||vu(b)!=Fr)return!1;var T=lf(b);if(T===null)return!0;var J=_s.call(T,"constructor")&&T.constructor;return typeof J=="function"&&J instanceof J&&lu.call(J)==Gs}var bd=fi?Ll(fi):Rl;function nd(b){return Wh(b)&&b>=-Ne&&b<=Ne}var $h=Na?Ll(Na):qc;function eh(b){return typeof b=="string"||!fs(b)&&Vl(b)&&vu(b)==fe}function Xf(b){return typeof b=="symbol"||Vl(b)&&vu(b)==Q}var Gp=vo?Ll(vo):ap;function Fd(b){return b===v}function Tv(b){return Vl(b)&&Vt(b)==dt}function tv(b){return Vl(b)&&vu(b)==Jt}var Mv=at(tf),Nd=at(function(b,T){return b<=T});function id(b){if(!b)return[];if(_f(b))return eh(b)?Kl(b):Ku(b);if(Yc&&b[Yc])return Lc(b[Yc]());var T=Vt(b),J=T==mn?uc:T==ne?Dc:vh;return J(b)}function kp(b){if(!b)return b===0?b:0;if(b=Hp(b),b===se||b===-se){var T=b<0?-1:1;return T*st}return b===b?b:0}function no(b){var T=kp(b),J=T%1;return T===T?J?T-J:T:0}function Lp(b){return b?Ga(no(b),0,tt):0}function Hp(b){if(typeof b=="number")return b;if(Xf(b))return Fe;if(bl(b)){var T=typeof b.valueOf=="function"?b.valueOf():b;b=bl(T)?T+"":T}if(typeof b!="string")return b===0?b:+b;b=Kf(b);var J=ua.test(b);return J||Jr.test(b)?ac(b.slice(2),J?2:8):xo.test(b)?Fe:+b}function ph(b){return Ac(b,xf(b))}function rv(b){return b?Ga(no(b),-Ne,Ne):b===0?b:0}function Hu(b){return b==null?"":Ms(b)}var Bd=Pf(function(b,T){if(Wn(T)||_f(T)){Ac(T,hc(T),b);return}for(var J in T)_s.call(T,J)&&Xn(b,J,T[J])}),Dp=Pf(function(b,T){Ac(T,xf(T),b)}),Xh=Pf(function(b,T,J,Pe){Ac(T,xf(T),b,Pe)}),Ed=Pf(function(b,T,J,Pe){Ac(T,hc(T),b,Pe)}),Sp=ki(Qa);function th(b,T){var J=mo(b);return T==null?J:Ei(J,T)}var Ch=Jo(function(b,T){b=ns(b);var J=-1,Pe=T.length,yt=Pe>2?T[2]:v;for(yt&&Mn(T[0],T[1],yt)&&(Pe=1);++J<Pe;)for(var $t=T[J],Dr=xf($t),ln=-1,Fn=Dr.length;++ln<Fn;){var Ji=Dr[ln],ea=b[Ji];(ea===v||Ki(ea,Jl[Ji])&&!_s.call(b,Ji))&&(b[Ji]=$t[Ji])}return b}),Iv=Jo(function(b){return b.push(v,ti),Va(Sd,v,b)});function hh(b,T){return Yf(b,di(T,3),Ts)}function ad(b,T){return Yf(b,di(T,3),rl)}function od(b,T){return b==null?b:ru(b,di(T,3),xf)}function nv(b,T){return b==null?b:pu(b,di(T,3),xf)}function Ov(b,T){return b&&Ts(b,di(T,3))}function Rv(b,T){return b&&rl(b,di(T,3))}function Ip(b){return b==null?[]:Nu(b,hc(b))}function zd(b){return b==null?[]:Nu(b,xf(b))}function Ud(b,T,J){var Pe=b==null?v:zo(b,T);return Pe===v?J:Pe}function rh(b,T){return b!=null&&Ar(b,T,gl)}function iv(b,T){return b!=null&&Ar(b,T,Xu)}var Pv=Ep(function(b,T,J){T!=null&&typeof T.toString!="function"&&(T=ji.call(T)),b[T]=J},em(nh)),Dh=Ep(function(b,T,J){T!=null&&typeof T.toString!="function"&&(T=ji.call(T)),_s.call(b,T)?b[T].push(J):b[T]=[J]},di),sd=Jo(fl);function hc(b){return _f(b)?br(b):wf(b)}function xf(b){return _f(b)?br(b,!0):tc(b)}function ud(b,T){var J={};return T=di(T,3),Ts(b,function(Pe,yt,$t){Ea(J,T(Pe,yt,$t),Pe)}),J}function kv(b,T){var J={};return T=di(T,3),Ts(b,function(Pe,yt,$t){Ea(J,yt,T(Pe,yt,$t))}),J}var av=Pf(function(b,T,J){Yu(b,T,J)}),Sd=Pf(function(b,T,J,Pe){Yu(b,T,J,Pe)}),Lv=ki(function(b,T){var J={};if(b==null)return J;var Pe=!1;T=Js(T,function($t){return $t=af($t,b),Pe||(Pe=$t.length>1),$t}),Ac(b,Di(b),J),Pe&&(J=io(J,W|Y|te,Yn));for(var yt=T.length;yt--;)Bc(J,T[yt]);return J});function ov(b,T){return dh(b,Qr(di(T)))}var Zd=ki(function(b,T){return b==null?{}:wp(b,T)});function dh(b,T){if(b==null)return{};var J=Js(Di(b),function(Pe){return[Pe]});return T=di(T),Gf(b,J,function(Pe,yt){return T(Pe,yt[0])})}function Dv(b,T,J){T=af(T,b);var Pe=-1,yt=T.length;for(yt||(yt=1,b=v);++Pe<yt;){var $t=b==null?v:b[is(T[Pe])];$t===v&&(Pe=yt,$t=J),b=Mp($t)?$t.call(b):$t}return b}function jd(b,T,J){return b==null?b:gu(b,T,J)}function sv(b,T,J,Pe){return Pe=typeof Pe=="function"?Pe:v,b==null?b:gu(b,T,J,Pe)}var uv=vr(hc),Vd=vr(xf);function Fv(b,T,J){var Pe=fs(b),yt=Pe||sp(b)||Gp(b);if(T=di(T,4),J==null){var $t=b&&b.constructor;yt?J=Pe?new $t:[]:bl(b)?J=Mp($t)?mo(lf(b)):{}:J={}}return(yt?$o:Ts)(b,function(Dr,ln,Fn){return T(J,Dr,ln,Fn)}),J}function lv(b,T){return b==null?!0:Bc(b,T)}function cv(b,T,J){return b==null?b:vp(b,T,Of(J))}function Nv(b,T,J,Pe){return Pe=typeof Pe=="function"?Pe:v,b==null?b:vp(b,T,Of(J),Pe)}function vh(b){return b==null?[]:Wc(b,hc(b))}function Gd(b){return b==null?[]:Wc(b,xf(b))}function Hd(b,T,J){return J===v&&(J=T,T=v),J!==v&&(J=Hp(J),J=J===J?J:0),T!==v&&(T=Hp(T),T=T===T?T:0),Ga(Hp(b),T,J)}function f0(b,T,J){return T=kp(T),J===v?(J=T,T=0):J=kp(J),b=Hp(b),Sf(b,T,J)}function fv(b,T,J){if(J&&typeof J!="boolean"&&Mn(b,T,J)&&(T=J=v),J===v&&(typeof T=="boolean"?(J=T,T=v):typeof b=="boolean"&&(J=b,b=v)),b===v&&T===v?(b=0,T=1):(b=kp(b),T===v?(T=b,b=0):T=kp(T)),b>T){var Pe=b;b=T,T=Pe}if(J||b%1||T%1){var yt=cu();return Bo(b+yt*(T-b+zf("1e-"+((yt+"").length-1))),T)}return Mf(b,T)}var Bv=Wf(function(b,T,J){return T=T.toLowerCase(),b+(J?zv(T):T)});function zv(b){return q0(Hu(b).toLowerCase())}function mh(b){return b=Hu(b),b&&b.replace(Fo,uf).replace(Vo,"")}function Uv(b,T,J){b=Hu(b),T=Ms(T);var Pe=b.length;J=J===v?Pe:Ga(no(J),0,Pe);var yt=J;return J-=T.length,J>=0&&b.slice(J,yt)==T}function Zv(b){return b=Hu(b),b&&et.test(b)?b.replace(Ti,mc):b}function p0(b){return b=Hu(b),b&&zr.test(b)?b.replace(Ft,"\\$&"):b}var h0=Wf(function(b,T,J){return b+(J?"-":"")+T.toLowerCase()}),jv=Wf(function(b,T,J){return b+(J?" ":"")+T.toLowerCase()}),gh=Lf("toLowerCase");function Wd(b,T,J){b=Hu(b),T=no(T);var Pe=T?Fc(b):0;if(!T||Pe>=T)return b;var yt=(T-Pe)/2;return _e(Kn(yt),J)+b+_e(ri(yt),J)}function pv(b,T,J){b=Hu(b),T=no(T);var Pe=T?Fc(b):0;return T&&Pe<T?b+_e(T-Pe,J):b}function ld(b,T,J){b=Hu(b),T=no(T);var Pe=T?Fc(b):0;return T&&Pe<T?_e(T-Pe,J)+b:b}function Vv(b,T,J){return J||T==null?T=0:T&&(T=+T),Su(Hu(b).replace(Jn,""),T||0)}function X0(b,T,J){return(J?Mn(b,T,J):T===v)?T=1:T=no(T),Up(Hu(b),T)}function Y0(){var b=arguments,T=Hu(b[0]);return b.length<3?T:T.replace(b[1],b[2])}var ng=Wf(function(b,T,J){return b+(J?"_":"")+T.toLowerCase()});function ig(b,T,J){return J&&typeof J!="number"&&Mn(b,T,J)&&(T=J=v),J=J===v?tt:J>>>0,J?(b=Hu(b),b&&(typeof T=="string"||T!=null&&!bd(T))&&(T=Ms(T),!T&&vl(b))?zc(Kl(b),0,J):b.split(T,J)):[]}var ag=Wf(function(b,T,J){return b+(J?" ":"")+q0(T)});function K0(b,T,J){return b=Hu(b),J=J==null?0:Ga(no(J),0,b.length),T=Ms(T),b.slice(J,J+T.length)==T}function Q0(b,T,J){var Pe=Rt.templateSettings;J&&Mn(b,T,J)&&(T=v),b=Hu(b),T=Xh({},T,Pe,Pn);var yt=Xh({},T.imports,Pe.imports,Pn),$t=hc(yt),Dr=Wc(yt,$t),ln,Fn,Ji=0,ea=T.interpolate||So,ma="__p += '",fo=Vu((T.escape||So).source+"|"+ea.source+"|"+(ea===Et?Zi:So).source+"|"+(T.evaluate||So).source+"|$","g"),Ho="//# sourceURL="+(_s.call(T,"sourceURL")?(T.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++ys+"]")+`
`;b.replace(fo,function($e,Iu,Bu,Wp,Op,$p){return Bu||(Bu=Wp),ma+=b.slice(Ji,$p).replace(Xa,ds),Iu&&(ln=!0,ma+=`' +
__e(`+Iu+`) +
'`),Op&&(Fn=!0,ma+=`';
`+Op+`;
__p += '`),Bu&&(ma+=`' +
((__t = (`+Bu+`)) == null ? '' : __t) +
'`),Ji=$p+$e.length,$e}),ma+=`';
`;var bs=_s.call(T,"variable")&&T.variable;if(!bs)ma=`with (obj) {
`+ma+`
}
`;else if(Mr.test(bs))throw new da(k);ma=(Fn?ma.replace(zi,""):ma).replace(Ui,"$1").replace(Pi,"$1;"),ma="function("+(bs||"obj")+`) {
`+(bs?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(ln?", __e = _.escape":"")+(Fn?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+ma+`return __p
}`;var _u=fg(function(){return uo($t,Ho+"return "+ma).apply(v,Dr)});if(_u.source=ma,Hh(_u))throw _u;return _u}function og(b){return Hu(b).toLowerCase()}function sg(b){return Hu(b).toUpperCase()}function ug(b,T,J){if(b=Hu(b),b&&(J||T===v))return Kf(b);if(!b||!(T=Ms(T)))return b;var Pe=Kl(b),yt=Kl(T),$t=hs(Pe,yt),Dr=kc(Pe,yt)+1;return zc(Pe,$t,Dr).join("")}function Bs(b,T,J){if(b=Hu(b),b&&(J||T===v))return b.slice(0,Ql(b)+1);if(!b||!(T=Ms(T)))return b;var Pe=Kl(b),yt=kc(Pe,Kl(T))+1;return zc(Pe,0,yt).join("")}function Ds(b,T,J){if(b=Hu(b),b&&(J||T===v))return b.replace(Jn,"");if(!b||!(T=Ms(T)))return b;var Pe=Kl(b),yt=hs(Pe,Kl(T));return zc(Pe,yt).join("")}function J0(b,T){var J=Ke,Pe=At;if(bl(T)){var yt="separator"in T?T.separator:yt;J="length"in T?no(T.length):J,Pe="omission"in T?Ms(T.omission):Pe}b=Hu(b);var $t=b.length;if(vl(b)){var Dr=Kl(b);$t=Dr.length}if(J>=$t)return b;var ln=J-Fc(Pe);if(ln<1)return Pe;var Fn=Dr?zc(Dr,0,ln).join(""):b.slice(0,ln);if(yt===v)return Fn+Pe;if(Dr&&(ln+=Fn.length-ln),bd(yt)){if(b.slice(ln).search(yt)){var Ji,ea=Fn;for(yt.global||(yt=Vu(yt.source,Hu(Wi.exec(yt))+"g")),yt.lastIndex=0;Ji=yt.exec(ea);)var ma=Ji.index;Fn=Fn.slice(0,ma===v?ln:ma)}}else if(b.indexOf(Ms(yt),ln)!=ln){var fo=Fn.lastIndexOf(yt);fo>-1&&(Fn=Fn.slice(0,fo))}return Fn+Pe}function Dy(b){return b=Hu(b),b&&Ge.test(b)?b.replace(ka,Uf):b}var lg=Wf(function(b,T,J){return b+(J?" ":"")+T.toUpperCase()}),q0=Lf("toUpperCase");function cg(b,T,J){return b=Hu(b),T=J?v:T,T===v?pp(b)?qu(b):cp(b):b.match(T)||[]}var fg=Jo(function(b,T){try{return Va(b,v,T)}catch(J){return Hh(J)?J:new da(J)}}),Fy=ki(function(b,T){return $o(T,function(J){J=is(J),Ea(b,J,fn(b[J],b))}),b});function Ny(b){var T=b==null?0:b.length,J=di();return b=T?Js(b,function(Pe){if(typeof Pe[1]!="function")throw new yc(D);return[J(Pe[0]),Pe[1]]}):[],Jo(function(Pe){for(var yt=-1;++yt<T;){var $t=b[yt];if(Va($t[0],this,Pe))return Va($t[1],this,Pe)}})}function By(b){return ya(io(b,W))}function em(b){return function(){return b}}function zy(b,T){return b==null||b!==b?T:b}var Uy=Df(),Zy=Df(!0);function nh(b){return b}function d0(b){return ef(typeof b=="function"?b:io(b,W))}function jy(b){return rf(io(b,W))}function Vy(b,T){return Af(b,io(T,W))}var Gy=Jo(function(b,T){return function(J){return fl(J,b,T)}}),Hy=Jo(function(b,T){return function(J){return fl(b,J,T)}});function tm(b,T,J){var Pe=hc(T),yt=Nu(T,Pe);J==null&&!(bl(T)&&(yt.length||!Pe.length))&&(J=T,T=b,b=this,yt=Nu(T,hc(T)));var $t=!(bl(J)&&"chain"in J)||!!J.chain,Dr=Mp(b);return $o(yt,function(ln){var Fn=T[ln];b[ln]=Fn,Dr&&(b.prototype[ln]=function(){var Ji=this.__chain__;if($t||Ji){var ea=b(this.__wrapped__),ma=ea.__actions__=Ku(this.__actions__);return ma.push({func:Fn,args:arguments,thisArg:b}),ea.__chain__=Ji,ea}return Fn.apply(b,Tl([this.value()],arguments))})}),b}function Wy(){return q._===this&&(q._=ql),this}function rm(){}function $y(b){return b=no(b),Jo(function(T){return nf(T,b)})}var Xy=ue(Js),Yy=ue(To),Ky=ue(vc);function pg(b){return Un(b)?$l(is(b)):zp(b)}function v0(b){return function(T){return b==null?v:zo(b,T)}}var Qy=rt(),Jy=rt(!0);function nm(){return[]}function im(){return!1}function qy(){return{}}function e_(){return""}function t_(){return!0}function r_(b,T){if(b=no(b),b<1||b>Ne)return[];var J=tt,Pe=Bo(b,tt);T=di(T),b-=tt;for(var yt=Xl(Pe,T);++J<b;)T(J);return yt}function n_(b){return fs(b)?Js(b,is):Xf(b)?[b]:Ku(oo(Hu(b)))}function i_(b){var T=++jf;return Hu(b)+T}var a_=H(function(b,T){return b+T},0),o_=Xt("ceil"),s_=H(function(b,T){return b/T},1),m0=Xt("floor");function hg(b){return b&&b.length?Ia(b,nh,Nt):v}function am(b,T){return b&&b.length?Ia(b,di(T,2),Nt):v}function om(b){return fp(b,nh)}function yh(b,T){return fp(b,di(T,2))}function wd(b){return b&&b.length?Ia(b,nh,tf):v}function sm(b,T){return b&&b.length?Ia(b,di(T,2),tf):v}var um=H(function(b,T){return b*T},1),lm=Xt("round"),g0=H(function(b,T){return b-T},0);function cm(b){return b&&b.length?Hc(b,nh):0}function dg(b,T){return b&&b.length?Hc(b,di(T,2)):0}return Rt.after=ut,Rt.ary=zt,Rt.assign=Bd,Rt.assignIn=Dp,Rt.assignInWith=Xh,Rt.assignWith=Ed,Rt.at=Sp,Rt.before=wr,Rt.bind=fn,Rt.bindAll=Fy,Rt.bindKey=pi,Rt.castArray=Nf,Rt.chain=wh,Rt.chunk=Uo,Rt.compact=cs,Rt.concat=Vs,Rt.cond=Ny,Rt.conforms=By,Rt.constant=em,Rt.countBy=E,Rt.create=th,Rt.curry=$n,Rt.curryRight=hi,Rt.debounce=ca,Rt.defaults=Ch,Rt.defaultsDeep=Iv,Rt.defer=Ra,Rt.delay=Da,Rt.difference=Ls,Rt.differenceBy=Zo,Rt.differenceWith=Io,Rt.drop=Go,Rt.dropRight=Za,Rt.dropRightWhile=as,Rt.dropWhile=so,Rt.fill=iu,Rt.filter=L,Rt.flatMap=Ce,Rt.flatMapDeep=ze,Rt.flatMapDepth=We,Rt.flatten=Xo,Rt.flattenDeep=Hs,Rt.flattenDepth=jo,Rt.flip=os,Rt.flow=Uy,Rt.flowRight=Zy,Rt.fromPairs=Dt,Rt.functions=Ip,Rt.functionsIn=zd,Rt.groupBy=It,Rt.initial=oa,Rt.intersection=Do,Rt.intersectionBy=Ht,Rt.intersectionWith=Mt,Rt.invert=Pv,Rt.invertBy=Dh,Rt.invokeMap=ur,Rt.iteratee=d0,Rt.keyBy=Rr,Rt.keys=hc,Rt.keysIn=xf,Rt.map=mr,Rt.mapKeys=ud,Rt.mapValues=kv,Rt.matches=jy,Rt.matchesProperty=Vy,Rt.memoize=gn,Rt.merge=av,Rt.mergeWith=Sd,Rt.method=Gy,Rt.methodOf=Hy,Rt.mixin=tm,Rt.negate=Qr,Rt.nthArg=$y,Rt.omit=Lv,Rt.omitBy=ov,Rt.once=In,Rt.orderBy=cn,Rt.over=Xy,Rt.overArgs=ra,Rt.overEvery=Yy,Rt.overSome=Ky,Rt.partial=Ba,Rt.partialRight=ho,Rt.partition=wn,Rt.pick=Zd,Rt.pickBy=dh,Rt.property=pg,Rt.propertyOf=v0,Rt.pull=ir,Rt.pullAll=Br,Rt.pullAllBy=kt,Rt.pullAllWith=fr,Rt.pullAt=jt,Rt.range=Qy,Rt.rangeRight=Jy,Rt.rearg=ro,Rt.reject=gi,Rt.remove=rn,Rt.rest=go,Rt.reverse=jr,Rt.sampleSize=p,Rt.set=jd,Rt.setWith=sv,Rt.shuffle=y,Rt.slice=Cn,Rt.sortBy=ae,Rt.sortedUniq=Ca,Rt.sortedUniqBy=pa,Rt.split=ig,Rt.spread=wo,Rt.tail=Sa,Rt.take=to,Rt.takeRight=Is,Rt.takeRightWhile=_l,Rt.takeWhile=Lo,Rt.tap=Tc,Rt.throttle=Ao,Rt.thru=Jp,Rt.toArray=id,Rt.toPairs=uv,Rt.toPairsIn=Vd,Rt.toPath=n_,Rt.toPlainObject=ph,Rt.transform=Fv,Rt.unary=Fs,Rt.union=Ja,Rt.unionBy=Cu,Rt.unionWith=Uu,Rt.uniq=dl,Rt.uniqBy=Nl,Rt.uniqWith=mf,Rt.unset=lv,Rt.unzip=Cc,Rt.unzipWith=$f,Rt.update=cv,Rt.updateWith=Nv,Rt.values=vh,Rt.valuesIn=Gd,Rt.without=lh,Rt.words=cg,Rt.wrap=Ws,Rt.xor=Bl,Rt.xorBy=jl,Rt.xorWith=Lh,Rt.zip=Qp,Rt.zipObject=Qh,Rt.zipObjectDeep=jh,Rt.zipWith=Jh,Rt.entries=uv,Rt.entriesIn=Vd,Rt.extend=Dp,Rt.extendWith=Xh,tm(Rt,Rt),Rt.add=a_,Rt.attempt=fg,Rt.camelCase=Bv,Rt.capitalize=zv,Rt.ceil=o_,Rt.clamp=Hd,Rt.clone=gf,Rt.cloneDeep=nc,Rt.cloneDeepWith=yf,Rt.cloneWith=Ns,Rt.conformsTo=yu,Rt.deburr=mh,Rt.defaultTo=zy,Rt.divide=s_,Rt.endsWith=Uv,Rt.eq=Ki,Rt.escape=Zv,Rt.escapeRegExp=p0,Rt.every=M,Rt.find=j,Rt.findIndex=Oa,Rt.findKey=hh,Rt.findLast=re,Rt.findLastIndex=ko,Rt.findLastKey=ad,Rt.floor=m0,Rt.forEach=Je,Rt.forEachRight=_t,Rt.forIn=od,Rt.forInRight=nv,Rt.forOwn=Ov,Rt.forOwnRight=Rv,Rt.get=Ud,Rt.gt=Tp,Rt.gte=Ln,Rt.has=rh,Rt.hasIn=iv,Rt.head=an,Rt.identity=nh,Rt.includes=ar,Rt.indexOf=un,Rt.inRange=f0,Rt.invoke=sd,Rt.isArguments=Qu,Rt.isArray=fs,Rt.isArrayBuffer=Pp,Rt.isArrayLike=_f,Rt.isArrayLikeObject=xl,Rt.isBoolean=ch,Rt.isBuffer=sp,Rt.isDate=qh,Rt.isElement=dd,Rt.isEmpty=Gh,Rt.isEqual=ed,Rt.isEqualWith=vd,Rt.isError=Hh,Rt.isFinite=Ah,Rt.isFunction=Mp,Rt.isInteger=Wh,Rt.isLength=qp,Rt.isMap=md,Rt.isMatch=gd,Rt.isMatchWith=yd,Rt.isNaN=Dd,Rt.isNative=_d,Rt.isNil=xd,Rt.isNull=td,Rt.isNumber=rd,Rt.isObject=bl,Rt.isObjectLike=Vl,Rt.isPlainObject=fh,Rt.isRegExp=bd,Rt.isSafeInteger=nd,Rt.isSet=$h,Rt.isString=eh,Rt.isSymbol=Xf,Rt.isTypedArray=Gp,Rt.isUndefined=Fd,Rt.isWeakMap=Tv,Rt.isWeakSet=tv,Rt.join=yr,Rt.kebabCase=h0,Rt.last=Zr,Rt.lastIndexOf=Sn,Rt.lowerCase=jv,Rt.lowerFirst=gh,Rt.lt=Mv,Rt.lte=Nd,Rt.max=hg,Rt.maxBy=am,Rt.mean=om,Rt.meanBy=yh,Rt.min=wd,Rt.minBy=sm,Rt.stubArray=nm,Rt.stubFalse=im,Rt.stubObject=qy,Rt.stubString=e_,Rt.stubTrue=t_,Rt.multiply=um,Rt.nth=Or,Rt.noConflict=Wy,Rt.noop=rm,Rt.now=Ie,Rt.pad=Wd,Rt.padEnd=pv,Rt.padStart=ld,Rt.parseInt=Vv,Rt.random=fv,Rt.reduce=Gn,Rt.reduceRight=Zn,Rt.repeat=X0,Rt.replace=Y0,Rt.result=Dv,Rt.round=lm,Rt.runInContext=Kr,Rt.sample=Yi,Rt.size=C,Rt.snakeCase=ng,Rt.some=V,Rt.sortedIndex=Ci,Rt.sortedIndexBy=Oi,Rt.sortedIndexOf=sa,Rt.sortedLastIndex=$i,Rt.sortedLastIndexBy=xa,Rt.sortedLastIndexOf=va,Rt.startCase=ag,Rt.startsWith=K0,Rt.subtract=g0,Rt.sum=cm,Rt.sumBy=dg,Rt.template=Q0,Rt.times=r_,Rt.toFinite=kp,Rt.toInteger=no,Rt.toLength=Lp,Rt.toLower=og,Rt.toNumber=Hp,Rt.toSafeInteger=rv,Rt.toString=Hu,Rt.toUpper=sg,Rt.trim=ug,Rt.trimEnd=Bs,Rt.trimStart=Ds,Rt.truncate=J0,Rt.unescape=Dy,Rt.uniqueId=i_,Rt.upperCase=lg,Rt.upperFirst=q0,Rt.each=Je,Rt.eachRight=_t,Rt.first=an,tm(Rt,function(){var b={};return Ts(Rt,function(T,J){_s.call(Rt.prototype,J)||(b[J]=T)}),b}(),{chain:!1}),Rt.VERSION=l,$o(["bind","bindKey","curry","curryRight","partial","partialRight"],function(b){Rt[b].placeholder=Rt}),$o(["drop","take"],function(b,T){Mo.prototype[b]=function(J){J=J===v?1:Ma(no(J),0);var Pe=this.__filtered__&&!T?new Mo(this):this.clone();return Pe.__filtered__?Pe.__takeCount__=Bo(J,Pe.__takeCount__):Pe.__views__.push({size:Bo(J,tt),type:b+(Pe.__dir__<0?"Right":"")}),Pe},Mo.prototype[b+"Right"]=function(J){return this.reverse()[b](J).reverse()}}),$o(["filter","map","takeWhile"],function(b,T){var J=T+1,Pe=J==oe||J==ye;Mo.prototype[b]=function(yt){var $t=this.clone();return $t.__iteratees__.push({iteratee:di(yt,3),type:J}),$t.__filtered__=$t.__filtered__||Pe,$t}}),$o(["head","last"],function(b,T){var J="take"+(T?"Right":"");Mo.prototype[b]=function(){return this[J](1).value()[0]}}),$o(["initial","tail"],function(b,T){var J="drop"+(T?"":"Right");Mo.prototype[b]=function(){return this.__filtered__?new Mo(this):this[J](1)}}),Mo.prototype.compact=function(){return this.filter(nh)},Mo.prototype.find=function(b){return this.filter(b).head()},Mo.prototype.findLast=function(b){return this.reverse().find(b)},Mo.prototype.invokeMap=Jo(function(b,T){return typeof b=="function"?new Mo(this):this.map(function(J){return fl(J,b,T)})}),Mo.prototype.reject=function(b){return this.filter(Qr(di(b)))},Mo.prototype.slice=function(b,T){b=no(b);var J=this;return J.__filtered__&&(b>0||T<0)?new Mo(J):(b<0?J=J.takeRight(-b):b&&(J=J.drop(b)),T!==v&&(T=no(T),J=T<0?J.dropRight(-T):J.take(T-b)),J)},Mo.prototype.takeRightWhile=function(b){return this.reverse().takeWhile(b).reverse()},Mo.prototype.toArray=function(){return this.take(tt)},Ts(Mo.prototype,function(b,T){var J=/^(?:filter|find|map|reject)|While$/.test(T),Pe=/^(?:head|last)$/.test(T),yt=Rt[Pe?"take"+(T=="last"?"Right":""):T],$t=Pe||/^find/.test(T);!yt||(Rt.prototype[T]=function(){var Dr=this.__wrapped__,ln=Pe?[1]:arguments,Fn=Dr instanceof Mo,Ji=ln[0],ea=Fn||fs(Dr),ma=function(Iu){var Bu=yt.apply(Rt,Tl([Iu],ln));return Pe&&fo?Bu[0]:Bu};ea&&J&&typeof Ji=="function"&&Ji.length!=1&&(Fn=ea=!1);var fo=this.__chain__,Ho=!!this.__actions__.length,bs=$t&&!fo,_u=Fn&&!Ho;if(!$t&&ea){Dr=_u?Dr:new Mo(this);var $e=b.apply(Dr,ln);return $e.__actions__.push({func:Jp,args:[ma],thisArg:v}),new tu($e,fo)}return bs&&_u?b.apply(this,ln):($e=this.thru(ma),bs?Pe?$e.value()[0]:$e.value():$e)})}),$o(["pop","push","shift","sort","splice","unshift"],function(b){var T=tp[b],J=/^(?:push|sort|unshift)$/.test(b)?"tap":"thru",Pe=/^(?:pop|shift)$/.test(b);Rt.prototype[b]=function(){var yt=arguments;if(Pe&&!this.__chain__){var $t=this.value();return T.apply(fs($t)?$t:[],yt)}return this[J](function(Dr){return T.apply(fs(Dr)?Dr:[],yt)})}}),Ts(Mo.prototype,function(b,T){var J=Rt[T];if(J){var Pe=J.name+"";_s.call(Ec,Pe)||(Ec[Pe]=[]),Ec[Pe].push({name:T,func:J})}}),Ec[vf(v,pe).name]=[{name:"wrapper",func:v}],Mo.prototype.clone=rp,Mo.prototype.reverse=pf,Mo.prototype.value=np,Rt.prototype.at=Ld,Rt.prototype.chain=Cp,Rt.prototype.commit=zl,Rt.prototype.next=Ff,Rt.prototype.plant=a,Rt.prototype.reverse=s,Rt.prototype.toJSON=Rt.prototype.valueOf=Rt.prototype.value=h,Rt.prototype.first=Rt.prototype.head,Yc&&(Rt.prototype[Yc]=Vh),Rt},vs=Zf();q._=vs,w=function(){return vs}.call(F,c,F,U),w!==v&&(U.exports=w)}).call(this)},68036:function(U){function F(){return[]}U.exports=F},84193:function(U){function F(){return!1}U.exports=F},1605:function(U,F,c){var w,v=function(){var l=String.fromCharCode,R="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",A="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+-$",D={};function k(z,Z){if(!D[z]){D[z]={};for(var W=0;W<z.length;W++)D[z][z.charAt(W)]=W}return D[z][Z]}var B={compressToBase64:function(z){if(z==null)return"";var Z=B._compress(z,6,function(W){return R.charAt(W)});switch(Z.length%4){default:case 0:return Z;case 1:return Z+"===";case 2:return Z+"==";case 3:return Z+"="}},decompressFromBase64:function(z){return z==null?"":z==""?null:B._decompress(z.length,32,function(Z){return k(R,z.charAt(Z))})},compressToUTF16:function(z){return z==null?"":B._compress(z,15,function(Z){return l(Z+32)})+" "},decompressFromUTF16:function(z){return z==null?"":z==""?null:B._decompress(z.length,16384,function(Z){return z.charCodeAt(Z)-32})},compressToUint8Array:function(z){for(var Z=B.compress(z),W=new Uint8Array(Z.length*2),Y=0,te=Z.length;Y<te;Y++){var le=Z.charCodeAt(Y);W[Y*2]=le>>>8,W[Y*2+1]=le%256}return W},decompressFromUint8Array:function(z){if(z==null)return B.decompress(z);for(var Z=new Array(z.length/2),W=0,Y=Z.length;W<Y;W++)Z[W]=z[W*2]*256+z[W*2+1];var te=[];return Z.forEach(function(le){te.push(l(le))}),B.decompress(te.join(""))},compressToEncodedURIComponent:function(z){return z==null?"":B._compress(z,6,function(Z){return A.charAt(Z)})},decompressFromEncodedURIComponent:function(z){return z==null?"":z==""?null:(z=z.replace(/ /g,"+"),B._decompress(z.length,32,function(Z){return k(A,z.charAt(Z))}))},compress:function(z){return B._compress(z,16,function(Z){return l(Z)})},_compress:function(z,Z,W){if(z==null)return"";var Y,te,le={},be={},de="",pe="",Oe="",xe=2,Ve=3,K=2,ke=[],we=0,Me=0,Xe;for(Xe=0;Xe<z.length;Xe+=1)if(de=z.charAt(Xe),Object.prototype.hasOwnProperty.call(le,de)||(le[de]=Ve++,be[de]=!0),pe=Oe+de,Object.prototype.hasOwnProperty.call(le,pe))Oe=pe;else{if(Object.prototype.hasOwnProperty.call(be,Oe)){if(Oe.charCodeAt(0)<256){for(Y=0;Y<K;Y++)we=we<<1,Me==Z-1?(Me=0,ke.push(W(we)),we=0):Me++;for(te=Oe.charCodeAt(0),Y=0;Y<8;Y++)we=we<<1|te&1,Me==Z-1?(Me=0,ke.push(W(we)),we=0):Me++,te=te>>1}else{for(te=1,Y=0;Y<K;Y++)we=we<<1|te,Me==Z-1?(Me=0,ke.push(W(we)),we=0):Me++,te=0;for(te=Oe.charCodeAt(0),Y=0;Y<16;Y++)we=we<<1|te&1,Me==Z-1?(Me=0,ke.push(W(we)),we=0):Me++,te=te>>1}xe--,xe==0&&(xe=Math.pow(2,K),K++),delete be[Oe]}else for(te=le[Oe],Y=0;Y<K;Y++)we=we<<1|te&1,Me==Z-1?(Me=0,ke.push(W(we)),we=0):Me++,te=te>>1;xe--,xe==0&&(xe=Math.pow(2,K),K++),le[pe]=Ve++,Oe=String(de)}if(Oe!==""){if(Object.prototype.hasOwnProperty.call(be,Oe)){if(Oe.charCodeAt(0)<256){for(Y=0;Y<K;Y++)we=we<<1,Me==Z-1?(Me=0,ke.push(W(we)),we=0):Me++;for(te=Oe.charCodeAt(0),Y=0;Y<8;Y++)we=we<<1|te&1,Me==Z-1?(Me=0,ke.push(W(we)),we=0):Me++,te=te>>1}else{for(te=1,Y=0;Y<K;Y++)we=we<<1|te,Me==Z-1?(Me=0,ke.push(W(we)),we=0):Me++,te=0;for(te=Oe.charCodeAt(0),Y=0;Y<16;Y++)we=we<<1|te&1,Me==Z-1?(Me=0,ke.push(W(we)),we=0):Me++,te=te>>1}xe--,xe==0&&(xe=Math.pow(2,K),K++),delete be[Oe]}else for(te=le[Oe],Y=0;Y<K;Y++)we=we<<1|te&1,Me==Z-1?(Me=0,ke.push(W(we)),we=0):Me++,te=te>>1;xe--,xe==0&&(xe=Math.pow(2,K),K++)}for(te=2,Y=0;Y<K;Y++)we=we<<1|te&1,Me==Z-1?(Me=0,ke.push(W(we)),we=0):Me++,te=te>>1;for(;;)if(we=we<<1,Me==Z-1){ke.push(W(we));break}else Me++;return ke.join("")},decompress:function(z){return z==null?"":z==""?null:B._decompress(z.length,32768,function(Z){return z.charCodeAt(Z)})},_decompress:function(z,Z,W){var Y=[],te,le=4,be=4,de=3,pe="",Oe=[],xe,Ve,K,ke,we,Me,Xe,Ke={val:W(0),position:Z,index:1};for(xe=0;xe<3;xe+=1)Y[xe]=xe;for(K=0,we=Math.pow(2,2),Me=1;Me!=we;)ke=Ke.val&Ke.position,Ke.position>>=1,Ke.position==0&&(Ke.position=Z,Ke.val=W(Ke.index++)),K|=(ke>0?1:0)*Me,Me<<=1;switch(te=K){case 0:for(K=0,we=Math.pow(2,8),Me=1;Me!=we;)ke=Ke.val&Ke.position,Ke.position>>=1,Ke.position==0&&(Ke.position=Z,Ke.val=W(Ke.index++)),K|=(ke>0?1:0)*Me,Me<<=1;Xe=l(K);break;case 1:for(K=0,we=Math.pow(2,16),Me=1;Me!=we;)ke=Ke.val&Ke.position,Ke.position>>=1,Ke.position==0&&(Ke.position=Z,Ke.val=W(Ke.index++)),K|=(ke>0?1:0)*Me,Me<<=1;Xe=l(K);break;case 2:return""}for(Y[3]=Xe,Ve=Xe,Oe.push(Xe);;){if(Ke.index>z)return"";for(K=0,we=Math.pow(2,de),Me=1;Me!=we;)ke=Ke.val&Ke.position,Ke.position>>=1,Ke.position==0&&(Ke.position=Z,Ke.val=W(Ke.index++)),K|=(ke>0?1:0)*Me,Me<<=1;switch(Xe=K){case 0:for(K=0,we=Math.pow(2,8),Me=1;Me!=we;)ke=Ke.val&Ke.position,Ke.position>>=1,Ke.position==0&&(Ke.position=Z,Ke.val=W(Ke.index++)),K|=(ke>0?1:0)*Me,Me<<=1;Y[be++]=l(K),Xe=be-1,le--;break;case 1:for(K=0,we=Math.pow(2,16),Me=1;Me!=we;)ke=Ke.val&Ke.position,Ke.position>>=1,Ke.position==0&&(Ke.position=Z,Ke.val=W(Ke.index++)),K|=(ke>0?1:0)*Me,Me<<=1;Y[be++]=l(K),Xe=be-1,le--;break;case 2:return Oe.join("")}if(le==0&&(le=Math.pow(2,de),de++),Y[Xe])pe=Y[Xe];else if(Xe===be)pe=Ve+Ve.charAt(0);else return null;Oe.push(pe),Y[be++]=Ve+pe.charAt(0),le--,Ve=pe,le==0&&(le=Math.pow(2,de),de++)}}};return B}();w=function(){return v}.call(F,c,F,U),w!==void 0&&(U.exports=w)},202:function(U){(function(F,c){U.exports=c()})(this,function(){"use strict";var F,c,w;function v(l,R){if(!F)F=R;else if(!c)c=R;else{var A="var sharedChunk = {}; ("+F+")(sharedChunk); ("+c+")(sharedChunk);",D={};F(D),w=R(D),typeof window!="undefined"&&(w.workerUrl=window.URL.createObjectURL(new Blob([A],{type:"text/javascript"})))}}return v(["exports"],function(l){"use strict";function R(a,s){return a(s={exports:{}},s.exports),s.exports}var A=D;function D(a,s,h,E){this.cx=3*a,this.bx=3*(h-a)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*s,this.by=3*(E-s)-this.cy,this.ay=1-this.cy-this.by,this.p1x=a,this.p1y=E,this.p2x=h,this.p2y=E}D.prototype.sampleCurveX=function(a){return((this.ax*a+this.bx)*a+this.cx)*a},D.prototype.sampleCurveY=function(a){return((this.ay*a+this.by)*a+this.cy)*a},D.prototype.sampleCurveDerivativeX=function(a){return(3*this.ax*a+2*this.bx)*a+this.cx},D.prototype.solveCurveX=function(a,s){var h,E,M,L,j;for(s===void 0&&(s=1e-6),M=a,j=0;j<8;j++){if(L=this.sampleCurveX(M)-a,Math.abs(L)<s)return M;var re=this.sampleCurveDerivativeX(M);if(Math.abs(re)<1e-6)break;M-=L/re}if((M=a)<(h=0))return h;if(M>(E=1))return E;for(;h<E;){if(L=this.sampleCurveX(M),Math.abs(L-a)<s)return M;a>L?h=M:E=M,M=.5*(E-h)+h}return M},D.prototype.solve=function(a,s){return this.sampleCurveY(this.solveCurveX(a,s))};var k=B;function B(a,s){this.x=a,this.y=s}B.prototype={clone:function(){return new B(this.x,this.y)},add:function(a){return this.clone()._add(a)},sub:function(a){return this.clone()._sub(a)},multByPoint:function(a){return this.clone()._multByPoint(a)},divByPoint:function(a){return this.clone()._divByPoint(a)},mult:function(a){return this.clone()._mult(a)},div:function(a){return this.clone()._div(a)},rotate:function(a){return this.clone()._rotate(a)},rotateAround:function(a,s){return this.clone()._rotateAround(a,s)},matMult:function(a){return this.clone()._matMult(a)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(a){return this.x===a.x&&this.y===a.y},dist:function(a){return Math.sqrt(this.distSqr(a))},distSqr:function(a){var s=a.x-this.x,h=a.y-this.y;return s*s+h*h},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(a){return Math.atan2(this.y-a.y,this.x-a.x)},angleWith:function(a){return this.angleWithSep(a.x,a.y)},angleWithSep:function(a,s){return Math.atan2(this.x*s-this.y*a,this.x*a+this.y*s)},_matMult:function(a){var s=a[2]*this.x+a[3]*this.y;return this.x=a[0]*this.x+a[1]*this.y,this.y=s,this},_add:function(a){return this.x+=a.x,this.y+=a.y,this},_sub:function(a){return this.x-=a.x,this.y-=a.y,this},_mult:function(a){return this.x*=a,this.y*=a,this},_div:function(a){return this.x/=a,this.y/=a,this},_multByPoint:function(a){return this.x*=a.x,this.y*=a.y,this},_divByPoint:function(a){return this.x/=a.x,this.y/=a.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var a=this.y;return this.y=this.x,this.x=-a,this},_rotate:function(a){var s=Math.cos(a),h=Math.sin(a),E=h*this.x+s*this.y;return this.x=s*this.x-h*this.y,this.y=E,this},_rotateAround:function(a,s){var h=Math.cos(a),E=Math.sin(a),M=s.y+E*(this.x-s.x)+h*(this.y-s.y);return this.x=s.x+h*(this.x-s.x)-E*(this.y-s.y),this.y=M,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},B.convert=function(a){return a instanceof B?a:Array.isArray(a)?new B(a[0],a[1]):a};var z=typeof self!="undefined"?self:{},Z=Math.pow(2,53)-1;function W(a,s,h,E){var M=new A(a,s,h,E);return function(L){return M.solve(L)}}var Y=W(.25,.1,.25,1);function te(a,s,h){return Math.min(h,Math.max(s,a))}function le(a,s,h){var E=h-s,M=((a-s)%E+E)%E+s;return M===s?h:M}function be(a){for(var s=[],h=arguments.length-1;h-- >0;)s[h]=arguments[h+1];for(var E=0,M=s;E<M.length;E+=1){var L=M[E];for(var j in L)a[j]=L[j]}return a}var de=1;function pe(){return de++}function Oe(){return function a(s){return s?(s^16*Math.random()>>s/4).toString(16):([1e7]+-[1e3]+-4e3+-8e3+-1e11).replace(/[018]/g,a)}()}function xe(a){return!!a&&/^[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(a)}function Ve(a,s){a.forEach(function(h){s[h]&&(s[h]=s[h].bind(s))})}function K(a,s){return a.indexOf(s,a.length-s.length)!==-1}function ke(a,s,h){var E={};for(var M in a)E[M]=s.call(h||this,a[M],M,a);return E}function we(a,s,h){var E={};for(var M in a)s.call(h||this,a[M],M,a)&&(E[M]=a[M]);return E}function Me(a){return Array.isArray(a)?a.map(Me):typeof a=="object"&&a?ke(a,Me):a}var Xe={};function Ke(a){Xe[a]||(typeof console!="undefined"&&console.warn(a),Xe[a]=!0)}function At(a,s,h){return(h.y-a.y)*(s.x-a.x)>(s.y-a.y)*(h.x-a.x)}function mt(a){for(var s=0,h=0,E=a.length,M=E-1,L=void 0,j=void 0;h<E;M=h++)s+=((j=a[M]).x-(L=a[h]).x)*(L.y+j.y);return s}function ie(){return typeof WorkerGlobalScope!="undefined"&&typeof self!="undefined"&&self instanceof WorkerGlobalScope}function oe(a){var s={};if(a.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,function(E,M,L,j){var re=L||j;return s[M]=!re||re.toLowerCase(),""}),s["max-age"]){var h=parseInt(s["max-age"],10);isNaN(h)?delete s["max-age"]:s["max-age"]=h}return s}var he=null;function ye(a){if(he==null){var s=a.navigator?a.navigator.userAgent:null;he=!!a.safari||!(!s||!(/\b(iPad|iPhone|iPod)\b/.test(s)||s.match("Safari")&&!s.match("Chrome")))}return he}function se(a){try{var s=z[a];return s.setItem("_mapbox_test_",1),s.removeItem("_mapbox_test_"),!0}catch(h){return!1}}var Ne,st,Fe,tt,Wt=z.performance&&z.performance.now?z.performance.now.bind(z.performance):Date.now.bind(Date),Pr=z.requestAnimationFrame||z.mozRequestAnimationFrame||z.webkitRequestAnimationFrame||z.msRequestAnimationFrame,Qt=z.cancelAnimationFrame||z.mozCancelAnimationFrame||z.webkitCancelAnimationFrame||z.msCancelAnimationFrame,xr={now:Wt,frame:function(a){var s=Pr(a);return{cancel:function(){return Qt(s)}}},getImageData:function(a,s){s===void 0&&(s=0);var h=z.document.createElement("canvas"),E=h.getContext("2d");if(!E)throw new Error("failed to create canvas 2d context");return h.width=a.width,h.height=a.height,E.drawImage(a,0,0,a.width,a.height),E.getImageData(-s,-s,a.width+2*s,a.height+2*s)},resolveURL:function(a){return Ne||(Ne=z.document.createElement("a")),Ne.href=a,Ne.href},hardwareConcurrency:z.navigator&&z.navigator.hardwareConcurrency||4,get devicePixelRatio(){return z.devicePixelRatio},get prefersReducedMotion(){return!!z.matchMedia&&(st==null&&(st=z.matchMedia("(prefers-reduced-motion: reduce)")),st.matches)}},$r={API_URL:"https://api.mapbox.com",get EVENTS_URL(){return this.API_URL?this.API_URL.indexOf("https://api.mapbox.cn")===0?"https://events.mapbox.cn/events/v2":this.API_URL.indexOf("https://api.mapbox.com")===0?"https://events.mapbox.com/events/v2":null:null},FEEDBACK_URL:"https://apps.mapbox.com/feedback",REQUIRE_ACCESS_TOKEN:!0,ACCESS_TOKEN:null,MAX_PARALLEL_IMAGE_REQUESTS:16},Cr={supported:!1,testSupport:function(a){!sn&&tt&&(ot?_r(a):Fe=a)}},sn=!1,ot=!1;function _r(a){var s=a.createTexture();a.bindTexture(a.TEXTURE_2D,s);try{if(a.texImage2D(a.TEXTURE_2D,0,a.RGBA,a.RGBA,a.UNSIGNED_BYTE,tt),a.isContextLost())return;Cr.supported=!0}catch(h){}a.deleteTexture(s),sn=!0}z.document&&((tt=z.document.createElement("img")).onload=function(){Fe&&_r(Fe),Fe=null,ot=!0},tt.onerror=function(){sn=!0,Fe=null},tt.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");var cr="01",Vr=function(a,s){this._transformRequestFn=a,this._customAccessToken=s,this._createSkuToken()};function Qn(a){return a.indexOf("mapbox:")===0}Vr.prototype._createSkuToken=function(){var a=function(){for(var s="",h=0;h<10;h++)s+="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"[Math.floor(62*Math.random())];return{token:["1",cr,s].join(""),tokenExpiresAt:Date.now()+432e5}}();this._skuToken=a.token,this._skuTokenExpiresAt=a.tokenExpiresAt},Vr.prototype._isSkuTokenExpired=function(){return Date.now()>this._skuTokenExpiresAt},Vr.prototype.transformRequest=function(a,s){return this._transformRequestFn&&this._transformRequestFn(a,s)||{url:a}},Vr.prototype.normalizeStyleURL=function(a,s){if(!Qn(a))return a;var h=Fr(a);return h.path="/styles/v1"+h.path,this._makeAPIURL(h,this._customAccessToken||s)},Vr.prototype.normalizeGlyphsURL=function(a,s){if(!Qn(a))return a;var h=Fr(a);return h.path="/fonts/v1"+h.path,this._makeAPIURL(h,this._customAccessToken||s)},Vr.prototype.normalizeSourceURL=function(a,s){if(!Qn(a))return a;var h=Fr(a);return h.path="/v4/"+h.authority+".json",h.params.push("secure"),this._makeAPIURL(h,this._customAccessToken||s)},Vr.prototype.normalizeSpriteURL=function(a,s,h,E){var M=Fr(a);return Qn(a)?(M.path="/styles/v1"+M.path+"/sprite"+s+h,this._makeAPIURL(M,this._customAccessToken||E)):(M.path+=""+s+h,kr(M))},Vr.prototype.normalizeTileURL=function(a,s){if(this._isSkuTokenExpired()&&this._createSkuToken(),a&&!Qn(a))return a;var h=Fr(a);h.path=h.path.replace(/(\.(png|jpg)\d*)(?=$)/,(xr.devicePixelRatio>=2||s===512?"@2x":"")+(Cr.supported?".webp":"$1")),h.path=h.path.replace(/^.+\/v4\//,"/"),h.path="/v4"+h.path;var E=this._customAccessToken||function(M){for(var L=0,j=M;L<j.length;L+=1){var re=j[L].match(/^access_token=(.*)$/);if(re)return re[1]}return null}(h.params)||$r.ACCESS_TOKEN;return $r.REQUIRE_ACCESS_TOKEN&&E&&this._skuToken&&h.params.push("sku="+this._skuToken),this._makeAPIURL(h,E)},Vr.prototype.canonicalizeTileURL=function(a,s){var h=Fr(a);if(!h.path.match(/(^\/v4\/)/)||!h.path.match(/\.[\w]+$/))return a;var E="mapbox://tiles/";E+=h.path.replace("/v4/","");var M=h.params;return s&&(M=M.filter(function(L){return!L.match(/^access_token=/)})),M.length&&(E+="?"+M.join("&")),E},Vr.prototype.canonicalizeTileset=function(a,s){for(var h=!!s&&Qn(s),E=[],M=0,L=a.tiles||[];M<L.length;M+=1){var j=L[M];_n(j)?E.push(this.canonicalizeTileURL(j,h)):E.push(j)}return E},Vr.prototype._makeAPIURL=function(a,s){var h="See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes",E=Fr($r.API_URL);if(a.protocol=E.protocol,a.authority=E.authority,a.protocol==="http"){var M=a.params.indexOf("secure");M>=0&&a.params.splice(M,1)}if(E.path!=="/"&&(a.path=""+E.path+a.path),!$r.REQUIRE_ACCESS_TOKEN)return kr(a);if(!(s=s||$r.ACCESS_TOKEN))throw new Error("An API access token is required to use Mapbox GL. "+h);if(s[0]==="s")throw new Error("Use a public access token (pk.*) with Mapbox GL, not a secret access token (sk.*). "+h);return a.params=a.params.filter(function(L){return L.indexOf("access_token")===-1}),a.params.push("access_token="+s),kr(a)};var mn=/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/|\?|$)/i;function _n(a){return mn.test(a)}var Yr=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function Fr(a){var s=a.match(Yr);if(!s)throw new Error("Unable to parse URL object");return{protocol:s[1],authority:s[2],path:s[3]||"/",params:s[4]?s[4].split("&"):[]}}function kr(a){var s=a.params.length?"?"+a.params.join("&"):"";return a.protocol+"://"+a.authority+a.path+s}function ft(a){if(!a)return null;var s=a.split(".");if(!s||s.length!==3)return null;try{return JSON.parse(decodeURIComponent(z.atob(s[1]).split("").map(function(h){return"%"+("00"+h.charCodeAt(0).toString(16)).slice(-2)}).join("")))}catch(h){return null}}var me=function(a){this.type=a,this.anonId=null,this.eventData={},this.queue=[],this.pendingRequest=null};me.prototype.getStorageKey=function(a){var s,h=ft($r.ACCESS_TOKEN);return s=h&&h.u?z.btoa(encodeURIComponent(h.u).replace(/%([0-9A-F]{2})/g,function(E,M){return String.fromCharCode(Number("0x"+M))})):$r.ACCESS_TOKEN||"",a?"mapbox.eventData."+a+":"+s:"mapbox.eventData:"+s},me.prototype.fetchEventData=function(){var a=se("localStorage"),s=this.getStorageKey(),h=this.getStorageKey("uuid");if(a)try{var E=z.localStorage.getItem(s);E&&(this.eventData=JSON.parse(E));var M=z.localStorage.getItem(h);M&&(this.anonId=M)}catch(L){Ke("Unable to read from LocalStorage")}},me.prototype.saveEventData=function(){var a=se("localStorage"),s=this.getStorageKey(),h=this.getStorageKey("uuid");if(a)try{z.localStorage.setItem(h,this.anonId),Object.keys(this.eventData).length>=1&&z.localStorage.setItem(s,JSON.stringify(this.eventData))}catch(E){Ke("Unable to write to LocalStorage")}},me.prototype.processRequests=function(a){},me.prototype.postEvent=function(a,s,h,E){var M=this;if($r.EVENTS_URL){var L=Fr($r.EVENTS_URL);L.params.push("access_token="+(E||$r.ACCESS_TOKEN||""));var j={event:this.type,created:new Date(a).toISOString(),sdkIdentifier:"mapbox-gl-js",sdkVersion:"1.13.2",skuId:cr,userId:this.anonId},re=s?be(j,s):j,Ce={url:kr(L),headers:{"Content-Type":"text/plain"},body:JSON.stringify([re])};this.pendingRequest=Ti(Ce,function(ze){M.pendingRequest=null,h(ze),M.saveEventData(),M.processRequests(E)})}},me.prototype.queueRequest=function(a,s){this.queue.push(a),this.processRequests(s)};var ne,fe,Q=function(a){function s(){a.call(this,"map.load"),this.success={},this.skuToken=""}return a&&(s.__proto__=a),(s.prototype=Object.create(a&&a.prototype)).constructor=s,s.prototype.postMapLoadEvent=function(h,E,M,L){this.skuToken=M,($r.EVENTS_URL&&L||$r.ACCESS_TOKEN&&Array.isArray(h)&&h.some(function(j){return Qn(j)||_n(j)}))&&this.queueRequest({id:E,timestamp:Date.now()},L)},s.prototype.processRequests=function(h){var E=this;if(!this.pendingRequest&&this.queue.length!==0){var M=this.queue.shift(),L=M.id,j=M.timestamp;L&&this.success[L]||(this.anonId||this.fetchEventData(),xe(this.anonId)||(this.anonId=Oe()),this.postEvent(j,{skuToken:this.skuToken},function(re){re||L&&(E.success[L]=!0)},h))}},s}(me),De=new(function(a){function s(h){a.call(this,"appUserTurnstile"),this._customAccessToken=h}return a&&(s.__proto__=a),(s.prototype=Object.create(a&&a.prototype)).constructor=s,s.prototype.postTurnstileEvent=function(h,E){$r.EVENTS_URL&&$r.ACCESS_TOKEN&&Array.isArray(h)&&h.some(function(M){return Qn(M)||_n(M)})&&this.queueRequest(Date.now(),E)},s.prototype.processRequests=function(h){var E=this;if(!this.pendingRequest&&this.queue.length!==0){this.anonId&&this.eventData.lastSuccess&&this.eventData.tokenU||this.fetchEventData();var M=ft($r.ACCESS_TOKEN),L=M?M.u:$r.ACCESS_TOKEN,j=L!==this.eventData.tokenU;xe(this.anonId)||(this.anonId=Oe(),j=!0);var re=this.queue.shift();if(this.eventData.lastSuccess){var Ce=new Date(this.eventData.lastSuccess),ze=new Date(re),We=(re-this.eventData.lastSuccess)/864e5;j=j||We>=1||We<-1||Ce.getDate()!==ze.getDate()}else j=!0;if(!j)return this.processRequests();this.postEvent(re,{"enabled.telemetry":!1},function(Je){Je||(E.eventData.lastSuccess=re,E.eventData.tokenU=L)},h)}},s}(me)),dt=De.postTurnstileEvent.bind(De),Jt=new Q,it=Jt.postMapLoadEvent.bind(Jt),lt=500,qt=50;function pr(){z.caches&&!ne&&(ne=z.caches.open("mapbox-tiles"))}function Hr(a){var s=a.indexOf("?");return s<0?a:a.slice(0,s)}var Xr,ce=1/0;function xt(){return Xr==null&&(Xr=z.OffscreenCanvas&&new z.OffscreenCanvas(1,1).getContext("2d")&&typeof z.createImageBitmap=="function"),Xr}var Gt={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};typeof Object.freeze=="function"&&Object.freeze(Gt);var Ir=function(a){function s(h,E,M){E===401&&_n(M)&&(h+=": you may have provided an invalid Mapbox access token. See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes"),a.call(this,h),this.status=E,this.url=M,this.name=this.constructor.name,this.message=h}return a&&(s.__proto__=a),(s.prototype=Object.create(a&&a.prototype)).constructor=s,s.prototype.toString=function(){return this.name+": "+this.message+" ("+this.status+"): "+this.url},s}(Error),nn=ie()?function(){return self.worker&&self.worker.referrer}:function(){return(z.location.protocol==="blob:"?z.parent:z).location.href},zi,Ui,Pi=function(a,s){if(!(/^file:/.test(h=a.url)||/^file:/.test(nn())&&!/^\w+:/.test(h))){if(z.fetch&&z.Request&&z.AbortController&&z.Request.prototype.hasOwnProperty("signal"))return function(E,M){var L,j=new z.AbortController,re=new z.Request(E.url,{method:E.method||"GET",body:E.body,credentials:E.credentials,headers:E.headers,referrer:nn(),signal:j.signal}),Ce=!1,ze=!1,We=(L=re.url).indexOf("sku=")>0&&_n(L);E.type==="json"&&re.headers.set("Accept","application/json");var Je=function(It,ar,ur){if(!ze){if(It&&It.message!=="SecurityError"&&Ke(It),ar&&ur)return _t(ar);var Rr=Date.now();z.fetch(re).then(function(mr){if(mr.ok){var cn=We?mr.clone():null;return _t(mr,cn,Rr)}return M(new Ir(mr.statusText,mr.status,E.url))}).catch(function(mr){mr.code!==20&&M(new Error(mr.message))})}},_t=function(It,ar,ur){(E.type==="arrayBuffer"?It.arrayBuffer():E.type==="json"?It.json():It.text()).then(function(Rr){ze||(ar&&ur&&function(mr,cn,wn){if(pr(),ne){var Gn={status:cn.status,statusText:cn.statusText,headers:new z.Headers};cn.headers.forEach(function(gi,Yi){return Gn.headers.set(Yi,gi)});var Zn=oe(cn.headers.get("Cache-Control")||"");Zn["no-store"]||(Zn["max-age"]&&Gn.headers.set("Expires",new Date(wn+1e3*Zn["max-age"]).toUTCString()),new Date(Gn.headers.get("Expires")).getTime()-wn<42e4||function(gi,Yi){if(fe===void 0)try{new Response(new ReadableStream),fe=!0}catch(p){fe=!1}fe?Yi(gi.body):gi.blob().then(Yi)}(cn,function(gi){var Yi=new z.Response(gi,Gn);pr(),ne&&ne.then(function(p){return p.put(Hr(mr.url),Yi)}).catch(function(p){return Ke(p.message)})}))}}(re,ar,ur),Ce=!0,M(null,Rr,It.headers.get("Cache-Control"),It.headers.get("Expires")))}).catch(function(Rr){ze||M(new Error(Rr.message))})};return We?function(It,ar){if(pr(),!ne)return ar(null);var ur=Hr(It.url);ne.then(function(Rr){Rr.match(ur).then(function(mr){var cn=function(wn){if(!wn)return!1;var Gn=new Date(wn.headers.get("Expires")||0),Zn=oe(wn.headers.get("Cache-Control")||"");return Gn>Date.now()&&!Zn["no-cache"]}(mr);Rr.delete(ur),cn&&Rr.put(ur,mr.clone()),ar(null,mr,cn)}).catch(ar)}).catch(ar)}(re,Je):Je(null,null),{cancel:function(){ze=!0,Ce||j.abort()}}}(a,s);if(ie()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",a,s,void 0,!0)}var h;return function(E,M){var L=new z.XMLHttpRequest;for(var j in L.open(E.method||"GET",E.url,!0),E.type==="arrayBuffer"&&(L.responseType="arraybuffer"),E.headers)L.setRequestHeader(j,E.headers[j]);return E.type==="json"&&(L.responseType="text",L.setRequestHeader("Accept","application/json")),L.withCredentials=E.credentials==="include",L.onerror=function(){M(new Error(L.statusText))},L.onload=function(){if((L.status>=200&&L.status<300||L.status===0)&&L.response!==null){var re=L.response;if(E.type==="json")try{re=JSON.parse(L.response)}catch(Ce){return M(Ce)}M(null,re,L.getResponseHeader("Cache-Control"),L.getResponseHeader("Expires"))}else M(new Ir(L.statusText,L.status,E.url))},L.send(E.body),{cancel:function(){return L.abort()}}}(a,s)},ka=function(a,s){return Pi(be(a,{type:"arrayBuffer"}),s)},Ti=function(a,s){return Pi(be(a,{method:"POST"}),s)},Ge="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";zi=[],Ui=0;var et=function(a,s){if(Cr.supported&&(a.headers||(a.headers={}),a.headers.accept="image/webp,*/*"),Ui>=$r.MAX_PARALLEL_IMAGE_REQUESTS){var h={requestParameters:a,callback:s,cancelled:!1,cancel:function(){this.cancelled=!0}};return zi.push(h),h}Ui++;var E=!1,M=function(){if(!E)for(E=!0,Ui--;zi.length&&Ui<$r.MAX_PARALLEL_IMAGE_REQUESTS;){var j=zi.shift();j.cancelled||(j.cancel=et(j.requestParameters,j.callback).cancel)}},L=ka(a,function(j,re,Ce,ze){M(),j?s(j):re&&(xt()?function(We,Je){var _t=new z.Blob([new Uint8Array(We)],{type:"image/png"});z.createImageBitmap(_t).then(function(It){Je(null,It)}).catch(function(It){Je(new Error("Could not load image because of "+It.message+". Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))})}(re,s):function(We,Je,_t,It){var ar=new z.Image,ur=z.URL;ar.onload=function(){Je(null,ar),ur.revokeObjectURL(ar.src),ar.onload=null,z.requestAnimationFrame(function(){ar.src=Ge})},ar.onerror=function(){return Je(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))};var Rr=new z.Blob([new Uint8Array(We)],{type:"image/png"});ar.cacheControl=_t,ar.expires=It,ar.src=We.byteLength?ur.createObjectURL(Rr):Ge}(re,s,Ce,ze))});return{cancel:function(){L.cancel(),M()}}};function gt(a,s,h){h[a]&&h[a].indexOf(s)!==-1||(h[a]=h[a]||[],h[a].push(s))}function ht(a,s,h){if(h&&h[a]){var E=h[a].indexOf(s);E!==-1&&h[a].splice(E,1)}}var Et=function(a,s){s===void 0&&(s={}),be(this,s),this.type=a},Zt=function(a){function s(h,E){E===void 0&&(E={}),a.call(this,"error",be({error:h},E))}return a&&(s.__proto__=a),(s.prototype=Object.create(a&&a.prototype)).constructor=s,s}(Et),sr=function(){};sr.prototype.on=function(a,s){return this._listeners=this._listeners||{},gt(a,s,this._listeners),this},sr.prototype.off=function(a,s){return ht(a,s,this._listeners),ht(a,s,this._oneTimeListeners),this},sr.prototype.once=function(a,s){return this._oneTimeListeners=this._oneTimeListeners||{},gt(a,s,this._oneTimeListeners),this},sr.prototype.fire=function(a,s){typeof a=="string"&&(a=new Et(a,s||{}));var h=a.type;if(this.listens(h)){a.target=this;for(var E=0,M=this._listeners&&this._listeners[h]?this._listeners[h].slice():[];E<M.length;E+=1)M[E].call(this,a);for(var L=0,j=this._oneTimeListeners&&this._oneTimeListeners[h]?this._oneTimeListeners[h].slice():[];L<j.length;L+=1){var re=j[L];ht(h,re,this._oneTimeListeners),re.call(this,a)}var Ce=this._eventedParent;Ce&&(be(a,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),Ce.fire(a))}else a instanceof Zt&&console.error(a.error);return this},sr.prototype.listens=function(a){return this._listeners&&this._listeners[a]&&this._listeners[a].length>0||this._oneTimeListeners&&this._oneTimeListeners[a]&&this._oneTimeListeners[a].length>0||this._eventedParent&&this._eventedParent.listens(a)},sr.prototype.setEventedParent=function(a,s){return this._eventedParent=a,this._eventedParentData=s,this};var bt={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},sources:{required:!0,type:"sources"},sprite:{type:"string"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{}},default:"mapbox"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{},within:{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}},Ft=function(a,s,h,E){this.message=(a?a+": ":"")+h,E&&(this.identifier=E),s!=null&&s.__line__&&(this.line=s.__line__)};function zr(a){var s=a.value;return s?[new Ft(a.key,s,"constants have been deprecated as of v8")]:[]}function Jn(a){for(var s=[],h=arguments.length-1;h-- >0;)s[h]=arguments[h+1];for(var E=0,M=s;E<M.length;E+=1){var L=M[E];for(var j in L)a[j]=L[j]}return a}function yn(a){return a instanceof Number||a instanceof String||a instanceof Boolean?a.valueOf():a}function tn(a){if(Array.isArray(a))return a.map(tn);if(a instanceof Object&&!(a instanceof Number||a instanceof String||a instanceof Boolean)){var s={};for(var h in a)s[h]=tn(a[h]);return s}return yn(a)}var ni=function(a){function s(h,E){a.call(this,E),this.message=E,this.key=h}return a&&(s.__proto__=a),(s.prototype=Object.create(a&&a.prototype)).constructor=s,s}(Error),ta=function(a,s){s===void 0&&(s=[]),this.parent=a,this.bindings={};for(var h=0,E=s;h<E.length;h+=1){var M=E[h];this.bindings[M[0]]=M[1]}};ta.prototype.concat=function(a){return new ta(this,a)},ta.prototype.get=function(a){if(this.bindings[a])return this.bindings[a];if(this.parent)return this.parent.get(a);throw new Error(a+" not found in scope.")},ta.prototype.has=function(a){return!!this.bindings[a]||!!this.parent&&this.parent.has(a)};var fa={kind:"null"},Mr={kind:"number"},Wr={kind:"string"},Zi={kind:"boolean"},Wi={kind:"color"},xo={kind:"object"},ua={kind:"value"},Ur={kind:"collator"},Jr={kind:"formatted"},Eo={kind:"resolvedImage"};function Fo(a,s){return{kind:"array",itemType:a,N:s}}function So(a){if(a.kind==="array"){var s=So(a.itemType);return typeof a.N=="number"?"array<"+s+", "+a.N+">":a.itemType.kind==="value"?"array":"array<"+s+">"}return a.kind}var Xa=[fa,Mr,Wr,Zi,Wi,Jr,xo,Fo(ua),Eo];function Ko(a,s){if(s.kind==="error")return null;if(a.kind==="array"){if(s.kind==="array"&&(s.N===0&&s.itemType.kind==="value"||!Ko(a.itemType,s.itemType))&&(typeof a.N!="number"||a.N===s.N))return null}else{if(a.kind===s.kind)return null;if(a.kind==="value"){for(var h=0,E=Xa;h<E.length;h+=1)if(!Ko(E[h],s))return null}}return"Expected "+So(a)+" but found "+So(s)+" instead."}function No(a,s){return s.some(function(h){return h.kind===a.kind})}function ui(a,s){return s.some(function(h){return h==="null"?a===null:h==="array"?Array.isArray(a):h==="object"?a&&!Array.isArray(a)&&typeof a=="object":h===typeof a})}var jn=R(function(a,s){var h={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function E(re){return(re=Math.round(re))<0?0:re>255?255:re}function M(re){return E(re[re.length-1]==="%"?parseFloat(re)/100*255:parseInt(re))}function L(re){return(Ce=re[re.length-1]==="%"?parseFloat(re)/100:parseFloat(re))<0?0:Ce>1?1:Ce;var Ce}function j(re,Ce,ze){return ze<0?ze+=1:ze>1&&(ze-=1),6*ze<1?re+(Ce-re)*ze*6:2*ze<1?Ce:3*ze<2?re+(Ce-re)*(2/3-ze)*6:re}try{s.parseCSSColor=function(re){var Ce,ze=re.replace(/ /g,"").toLowerCase();if(ze in h)return h[ze].slice();if(ze[0]==="#")return ze.length===4?(Ce=parseInt(ze.substr(1),16))>=0&&Ce<=4095?[(3840&Ce)>>4|(3840&Ce)>>8,240&Ce|(240&Ce)>>4,15&Ce|(15&Ce)<<4,1]:null:ze.length===7&&(Ce=parseInt(ze.substr(1),16))>=0&&Ce<=16777215?[(16711680&Ce)>>16,(65280&Ce)>>8,255&Ce,1]:null;var We=ze.indexOf("("),Je=ze.indexOf(")");if(We!==-1&&Je+1===ze.length){var _t=ze.substr(0,We),It=ze.substr(We+1,Je-(We+1)).split(","),ar=1;switch(_t){case"rgba":if(It.length!==4)return null;ar=L(It.pop());case"rgb":return It.length!==3?null:[M(It[0]),M(It[1]),M(It[2]),ar];case"hsla":if(It.length!==4)return null;ar=L(It.pop());case"hsl":if(It.length!==3)return null;var ur=(parseFloat(It[0])%360+360)%360/360,Rr=L(It[1]),mr=L(It[2]),cn=mr<=.5?mr*(Rr+1):mr+Rr-mr*Rr,wn=2*mr-cn;return[E(255*j(wn,cn,ur+1/3)),E(255*j(wn,cn,ur)),E(255*j(wn,cn,ur-1/3)),ar];default:return null}}return null}}catch(re){}}).parseCSSColor,rr=function(a,s,h,E){E===void 0&&(E=1),this.r=a,this.g=s,this.b=h,this.a=E};rr.parse=function(a){if(a){if(a instanceof rr)return a;if(typeof a=="string"){var s=jn(a);if(s)return new rr(s[0]/255*s[3],s[1]/255*s[3],s[2]/255*s[3],s[3])}}},rr.prototype.toString=function(){var a=this.toArray(),s=a[1],h=a[2],E=a[3];return"rgba("+Math.round(a[0])+","+Math.round(s)+","+Math.round(h)+","+E+")"},rr.prototype.toArray=function(){var a=this.a;return a===0?[0,0,0,0]:[255*this.r/a,255*this.g/a,255*this.b/a,a]},rr.black=new rr(0,0,0,1),rr.white=new rr(1,1,1,1),rr.transparent=new rr(0,0,0,0),rr.red=new rr(1,0,0,1);var ps=function(a,s,h){this.sensitivity=a?s?"variant":"case":s?"accent":"base",this.locale=h,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})};ps.prototype.compare=function(a,s){return this.collator.compare(a,s)},ps.prototype.resolvedLocale=function(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale};var er=function(a,s,h,E,M){this.text=a,this.image=s,this.scale=h,this.fontStack=E,this.textColor=M},$s=function(a){this.sections=a};$s.fromString=function(a){return new $s([new er(a,null,null,null,null)])},$s.prototype.isEmpty=function(){return this.sections.length===0||!this.sections.some(function(a){return a.text.length!==0||a.image&&a.image.name.length!==0})},$s.factory=function(a){return a instanceof $s?a:$s.fromString(a)},$s.prototype.toString=function(){return this.sections.length===0?"":this.sections.map(function(a){return a.text}).join("")},$s.prototype.serialize=function(){for(var a=["format"],s=0,h=this.sections;s<h.length;s+=1){var E=h[s];if(E.image)a.push(["image",E.image.name]);else{a.push(E.text);var M={};E.fontStack&&(M["text-font"]=["literal",E.fontStack.split(",")]),E.scale&&(M["font-scale"]=E.scale),E.textColor&&(M["text-color"]=["rgba"].concat(E.textColor.toArray())),a.push(M)}}return a};var Es=function(a){this.name=a.name,this.available=a.available};function Os(a,s,h,E){return typeof a=="number"&&a>=0&&a<=255&&typeof s=="number"&&s>=0&&s<=255&&typeof h=="number"&&h>=0&&h<=255?E===void 0||typeof E=="number"&&E>=0&&E<=1?null:"Invalid rgba value ["+[a,s,h,E].join(", ")+"]: 'a' must be between 0 and 1.":"Invalid rgba value ["+(typeof E=="number"?[a,s,h,E]:[a,s,h]).join(", ")+"]: 'r', 'g', and 'b' must be between 0 and 255."}function xu(a){if(a===null||typeof a=="string"||typeof a=="boolean"||typeof a=="number"||a instanceof rr||a instanceof ps||a instanceof $s||a instanceof Es)return!0;if(Array.isArray(a)){for(var s=0,h=a;s<h.length;s+=1)if(!xu(h[s]))return!1;return!0}if(typeof a=="object"){for(var E in a)if(!xu(a[E]))return!1;return!0}return!1}function bo(a){if(a===null)return fa;if(typeof a=="string")return Wr;if(typeof a=="boolean")return Zi;if(typeof a=="number")return Mr;if(a instanceof rr)return Wi;if(a instanceof ps)return Ur;if(a instanceof $s)return Jr;if(a instanceof Es)return Eo;if(Array.isArray(a)){for(var s,h=a.length,E=0,M=a;E<M.length;E+=1){var L=bo(M[E]);if(s){if(s===L)continue;s=ua;break}s=L}return Fo(s||ua,h)}return xo}function ic(a){var s=typeof a;return a===null?"":s==="string"||s==="number"||s==="boolean"?String(a):a instanceof rr||a instanceof $s||a instanceof Es?a.toString():JSON.stringify(a)}Es.prototype.toString=function(){return this.name},Es.fromString=function(a){return a?new Es({name:a,available:!1}):null},Es.prototype.serialize=function(){return["image",this.name]};var Ru=function(a,s){this.type=a,this.value=s};Ru.parse=function(a,s){if(a.length!==2)return s.error("'literal' expression requires exactly one argument, but found "+(a.length-1)+" instead.");if(!xu(a[1]))return s.error("invalid value");var h=a[1],E=bo(h),M=s.expectedType;return E.kind!=="array"||E.N!==0||!M||M.kind!=="array"||typeof M.N=="number"&&M.N!==0||(E=M),new Ru(E,h)},Ru.prototype.evaluate=function(){return this.value},Ru.prototype.eachChild=function(){},Ru.prototype.outputDefined=function(){return!0},Ru.prototype.serialize=function(){return this.type.kind==="array"||this.type.kind==="object"?["literal",this.value]:this.value instanceof rr?["rgba"].concat(this.value.toArray()):this.value instanceof $s?this.value.serialize():this.value};var Xs=function(a){this.name="ExpressionEvaluationError",this.message=a};Xs.prototype.toJSON=function(){return this.message};var Ys={string:Wr,number:Mr,boolean:Zi,object:xo},rs=function(a,s){this.type=a,this.args=s};rs.parse=function(a,s){if(a.length<2)return s.error("Expected at least one argument.");var h,E=1,M=a[0];if(M==="array"){var L,j;if(a.length>2){var re=a[1];if(typeof re!="string"||!(re in Ys)||re==="object")return s.error('The item type argument of "array" must be one of string, number, boolean',1);L=Ys[re],E++}else L=ua;if(a.length>3){if(a[2]!==null&&(typeof a[2]!="number"||a[2]<0||a[2]!==Math.floor(a[2])))return s.error('The length argument to "array" must be a positive integer literal',2);j=a[2],E++}h=Fo(L,j)}else h=Ys[M];for(var Ce=[];E<a.length;E++){var ze=s.parse(a[E],E,ua);if(!ze)return null;Ce.push(ze)}return new rs(h,Ce)},rs.prototype.evaluate=function(a){for(var s=0;s<this.args.length;s++){var h=this.args[s].evaluate(a);if(!Ko(this.type,bo(h)))return h;if(s===this.args.length-1)throw new Xs("Expected value to be of type "+So(this.type)+", but found "+So(bo(h))+" instead.")}return null},rs.prototype.eachChild=function(a){this.args.forEach(a)},rs.prototype.outputDefined=function(){return this.args.every(function(a){return a.outputDefined()})},rs.prototype.serialize=function(){var a=this.type,s=[a.kind];if(a.kind==="array"){var h=a.itemType;if(h.kind==="string"||h.kind==="number"||h.kind==="boolean"){s.push(h.kind);var E=a.N;(typeof E=="number"||this.args.length>1)&&s.push(E)}}return s.concat(this.args.map(function(M){return M.serialize()}))};var au=function(a){this.type=Jr,this.sections=a};au.parse=function(a,s){if(a.length<2)return s.error("Expected at least one argument.");var h=a[1];if(!Array.isArray(h)&&typeof h=="object")return s.error("First argument must be an image or text section.");for(var E=[],M=!1,L=1;L<=a.length-1;++L){var j=a[L];if(M&&typeof j=="object"&&!Array.isArray(j)){M=!1;var re=null;if(j["font-scale"]&&!(re=s.parse(j["font-scale"],1,Mr)))return null;var Ce=null;if(j["text-font"]&&!(Ce=s.parse(j["text-font"],1,Fo(Wr))))return null;var ze=null;if(j["text-color"]&&!(ze=s.parse(j["text-color"],1,Wi)))return null;var We=E[E.length-1];We.scale=re,We.font=Ce,We.textColor=ze}else{var Je=s.parse(a[L],1,ua);if(!Je)return null;var _t=Je.type.kind;if(_t!=="string"&&_t!=="value"&&_t!=="null"&&_t!=="resolvedImage")return s.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");M=!0,E.push({content:Je,scale:null,font:null,textColor:null})}}return new au(E)},au.prototype.evaluate=function(a){return new $s(this.sections.map(function(s){var h=s.content.evaluate(a);return bo(h)===Eo?new er("",h,null,null,null):new er(ic(h),null,s.scale?s.scale.evaluate(a):null,s.font?s.font.evaluate(a).join(","):null,s.textColor?s.textColor.evaluate(a):null)}))},au.prototype.eachChild=function(a){for(var s=0,h=this.sections;s<h.length;s+=1){var E=h[s];a(E.content),E.scale&&a(E.scale),E.font&&a(E.font),E.textColor&&a(E.textColor)}},au.prototype.outputDefined=function(){return!1},au.prototype.serialize=function(){for(var a=["format"],s=0,h=this.sections;s<h.length;s+=1){var E=h[s];a.push(E.content.serialize());var M={};E.scale&&(M["font-scale"]=E.scale.serialize()),E.font&&(M["text-font"]=E.font.serialize()),E.textColor&&(M["text-color"]=E.textColor.serialize()),a.push(M)}return a};var Tu=function(a){this.type=Eo,this.input=a};Tu.parse=function(a,s){if(a.length!==2)return s.error("Expected two arguments.");var h=s.parse(a[1],1,Wr);return h?new Tu(h):s.error("No image name provided.")},Tu.prototype.evaluate=function(a){var s=this.input.evaluate(a),h=Es.fromString(s);return h&&a.availableImages&&(h.available=a.availableImages.indexOf(s)>-1),h},Tu.prototype.eachChild=function(a){a(this.input)},Tu.prototype.outputDefined=function(){return!1},Tu.prototype.serialize=function(){return["image",this.input.serialize()]};var Cl={"to-boolean":Zi,"to-color":Wi,"to-number":Mr,"to-string":Wr},hu=function(a,s){this.type=a,this.args=s};hu.parse=function(a,s){if(a.length<2)return s.error("Expected at least one argument.");var h=a[0];if((h==="to-boolean"||h==="to-string")&&a.length!==2)return s.error("Expected one argument.");for(var E=Cl[h],M=[],L=1;L<a.length;L++){var j=s.parse(a[L],L,ua);if(!j)return null;M.push(j)}return new hu(E,M)},hu.prototype.evaluate=function(a){if(this.type.kind==="boolean")return Boolean(this.args[0].evaluate(a));if(this.type.kind==="color"){for(var s,h,E=0,M=this.args;E<M.length;E+=1){if(h=null,(s=M[E].evaluate(a))instanceof rr)return s;if(typeof s=="string"){var L=a.parseColor(s);if(L)return L}else if(Array.isArray(s)&&!(h=s.length<3||s.length>4?"Invalid rbga value "+JSON.stringify(s)+": expected an array containing either three or four numeric values.":Os(s[0],s[1],s[2],s[3])))return new rr(s[0]/255,s[1]/255,s[2]/255,s[3])}throw new Xs(h||"Could not parse color from value '"+(typeof s=="string"?s:String(JSON.stringify(s)))+"'")}if(this.type.kind==="number"){for(var j=null,re=0,Ce=this.args;re<Ce.length;re+=1){if((j=Ce[re].evaluate(a))===null)return 0;var ze=Number(j);if(!isNaN(ze))return ze}throw new Xs("Could not convert "+JSON.stringify(j)+" to number.")}return this.type.kind==="formatted"?$s.fromString(ic(this.args[0].evaluate(a))):this.type.kind==="resolvedImage"?Es.fromString(ic(this.args[0].evaluate(a))):ic(this.args[0].evaluate(a))},hu.prototype.eachChild=function(a){this.args.forEach(a)},hu.prototype.outputDefined=function(){return this.args.every(function(a){return a.outputDefined()})},hu.prototype.serialize=function(){if(this.type.kind==="formatted")return new au([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if(this.type.kind==="resolvedImage")return new Tu(this.args[0]).serialize();var a=["to-"+this.type.kind];return this.eachChild(function(s){a.push(s.serialize())}),a};var ou=["Unknown","Point","LineString","Polygon"],ss=function(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null};ss.prototype.id=function(){return this.feature&&"id"in this.feature?this.feature.id:null},ss.prototype.geometryType=function(){return this.feature?typeof this.feature.type=="number"?ou[this.feature.type]:this.feature.type:null},ss.prototype.geometry=function(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null},ss.prototype.canonicalID=function(){return this.canonical},ss.prototype.properties=function(){return this.feature&&this.feature.properties||{}},ss.prototype.parseColor=function(a){var s=this._parseColorCache[a];return s||(s=this._parseColorCache[a]=rr.parse(a)),s};var nu=function(a,s,h,E){this.name=a,this.type=s,this._evaluate=h,this.args=E};nu.prototype.evaluate=function(a){return this._evaluate(a,this.args)},nu.prototype.eachChild=function(a){this.args.forEach(a)},nu.prototype.outputDefined=function(){return!1},nu.prototype.serialize=function(){return[this.name].concat(this.args.map(function(a){return a.serialize()}))},nu.parse=function(a,s){var h,E=a[0],M=nu.definitions[E];if(!M)return s.error('Unknown expression "'+E+'". If you wanted a literal array, use ["literal", [...]].',0);for(var L=Array.isArray(M)?M[0]:M.type,j=Array.isArray(M)?[[M[1],M[2]]]:M.overloads,re=j.filter(function(V){var ae=V[0];return!Array.isArray(ae)||ae.length===a.length-1}),Ce=null,ze=0,We=re;ze<We.length;ze+=1){var Je=We[ze],_t=Je[0],It=Je[1];Ce=new Zu(s.registry,s.path,null,s.scope);for(var ar=[],ur=!1,Rr=1;Rr<a.length;Rr++){var mr=a[Rr],cn=Array.isArray(_t)?_t[Rr-1]:_t.type,wn=Ce.parse(mr,1+ar.length,cn);if(!wn){ur=!0;break}ar.push(wn)}if(!ur)if(Array.isArray(_t)&&_t.length!==ar.length)Ce.error("Expected "+_t.length+" arguments, but found "+ar.length+" instead.");else{for(var Gn=0;Gn<ar.length;Gn++){var Zn=Array.isArray(_t)?_t[Gn]:_t.type,gi=ar[Gn];Ce.concat(Gn+1).checkSubtype(Zn,gi.type)}if(Ce.errors.length===0)return new nu(E,L,It,ar)}}if(re.length===1)(h=s.errors).push.apply(h,Ce.errors);else{for(var Yi=(re.length?re:j).map(function(V){var ae;return ae=V[0],Array.isArray(ae)?"("+ae.map(So).join(", ")+")":"("+So(ae.type)+"...)"}).join(" | "),p=[],y=1;y<a.length;y++){var C=s.parse(a[y],1+p.length);if(!C)return null;p.push(So(C.type))}s.error("Expected arguments of type "+Yi+", but found ("+p.join(", ")+") instead.")}return null},nu.register=function(a,s){for(var h in nu.definitions=s,s)a[h]=nu};var Pu=function(a,s,h){this.type=Ur,this.locale=h,this.caseSensitive=a,this.diacriticSensitive=s};function Ks(a,s){a[0]=Math.min(a[0],s[0]),a[1]=Math.min(a[1],s[1]),a[2]=Math.max(a[2],s[0]),a[3]=Math.max(a[3],s[1])}function $u(a,s){return!(a[0]<=s[0]||a[2]>=s[2]||a[1]<=s[1]||a[3]>=s[3])}function qe(a,s){var h=(180+a[0])/360,E=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+a[1]*Math.PI/360)))/360,M=Math.pow(2,s.z);return[Math.round(h*M*8192),Math.round(E*M*8192)]}function Bt(a,s,h){return s[1]>a[1]!=h[1]>a[1]&&a[0]<(h[0]-s[0])*(a[1]-s[1])/(h[1]-s[1])+s[0]}function ge(a,s){for(var h,E,M,L,j,re,Ce,ze=!1,We=0,Je=s.length;We<Je;We++)for(var _t=s[We],It=0,ar=_t.length;It<ar-1;It++){if((L=(h=a)[0]-(E=_t[It])[0])*(Ce=h[1]-(M=_t[It+1])[1])-(re=h[0]-M[0])*(j=h[1]-E[1])==0&&L*re<=0&&j*Ce<=0)return!1;Bt(a,_t[It],_t[It+1])&&(ze=!ze)}return ze}function je(a,s){for(var h=0;h<s.length;h++)if(ge(a,s[h]))return!0;return!1}function wt(a,s,h,E){var M=E[0]-h[0],L=E[1]-h[1],j=(a[0]-h[0])*L-M*(a[1]-h[1]),re=(s[0]-h[0])*L-M*(s[1]-h[1]);return j>0&&re<0||j<0&&re>0}function nr(a,s,h){for(var E=0,M=h;E<M.length;E+=1)for(var L=M[E],j=0;j<L.length-1;++j)if((Je=[(We=L[j+1])[0]-(ze=L[j])[0],We[1]-ze[1]])[0]*(_t=[(Ce=s)[0]-(re=a)[0],Ce[1]-re[1]])[1]-Je[1]*_t[0]!=0&&wt(re,Ce,ze,We)&&wt(ze,We,re,Ce))return!0;var re,Ce,ze,We,Je,_t;return!1}function en(a,s){for(var h=0;h<a.length;++h)if(!ge(a[h],s))return!1;for(var E=0;E<a.length-1;++E)if(nr(a[E],a[E+1],s))return!1;return!0}function Dn(a,s){for(var h=0;h<s.length;h++)if(en(a,s[h]))return!0;return!1}function Ai(a,s,h){for(var E=[],M=0;M<a.length;M++){for(var L=[],j=0;j<a[M].length;j++){var re=qe(a[M][j],h);Ks(s,re),L.push(re)}E.push(L)}return E}function na(a,s,h){for(var E=[],M=0;M<a.length;M++){var L=Ai(a[M],s,h);E.push(L)}return E}function Aa(a,s,h,E){if(a[0]<h[0]||a[0]>h[2]){var M=.5*E,L=a[0]-h[0]>M?-E:h[0]-a[0]>M?E:0;L===0&&(L=a[0]-h[2]>M?-E:h[2]-a[0]>M?E:0),a[0]+=L}Ks(s,a)}function Ta(a,s,h,E){for(var M=8192*Math.pow(2,E.z),L=[8192*E.x,8192*E.y],j=[],re=0,Ce=a;re<Ce.length;re+=1)for(var ze=0,We=Ce[re];ze<We.length;ze+=1){var Je=We[ze],_t=[Je.x+L[0],Je.y+L[1]];Aa(_t,s,h,M),j.push(_t)}return j}function Wa(a,s,h,E){for(var M,L=8192*Math.pow(2,E.z),j=[8192*E.x,8192*E.y],re=[],Ce=0,ze=a;Ce<ze.length;Ce+=1){for(var We=[],Je=0,_t=ze[Ce];Je<_t.length;Je+=1){var It=_t[Je],ar=[It.x+j[0],It.y+j[1]];Ks(s,ar),We.push(ar)}re.push(We)}if(s[2]-s[0]<=L/2){(M=s)[0]=M[1]=1/0,M[2]=M[3]=-1/0;for(var ur=0,Rr=re;ur<Rr.length;ur+=1)for(var mr=0,cn=Rr[ur];mr<cn.length;mr+=1)Aa(cn[mr],s,h,L)}return re}Pu.parse=function(a,s){if(a.length!==2)return s.error("Expected one argument.");var h=a[1];if(typeof h!="object"||Array.isArray(h))return s.error("Collator options argument must be an object.");var E=s.parse(h["case-sensitive"]!==void 0&&h["case-sensitive"],1,Zi);if(!E)return null;var M=s.parse(h["diacritic-sensitive"]!==void 0&&h["diacritic-sensitive"],1,Zi);if(!M)return null;var L=null;return h.locale&&!(L=s.parse(h.locale,1,Wr))?null:new Pu(E,M,L)},Pu.prototype.evaluate=function(a){return new ps(this.caseSensitive.evaluate(a),this.diacriticSensitive.evaluate(a),this.locale?this.locale.evaluate(a):null)},Pu.prototype.eachChild=function(a){a(this.caseSensitive),a(this.diacriticSensitive),this.locale&&a(this.locale)},Pu.prototype.outputDefined=function(){return!1},Pu.prototype.serialize=function(){var a={};return a["case-sensitive"]=this.caseSensitive.serialize(),a["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(a.locale=this.locale.serialize()),["collator",a]};var Co=function(a,s){this.type=Zi,this.geojson=a,this.geometries=s};function lo(a){if(a instanceof nu&&(a.name==="get"&&a.args.length===1||a.name==="feature-state"||a.name==="has"&&a.args.length===1||a.name==="properties"||a.name==="geometry-type"||a.name==="id"||/^filter-/.test(a.name))||a instanceof Co)return!1;var s=!0;return a.eachChild(function(h){s&&!lo(h)&&(s=!1)}),s}function Vo(a){if(a instanceof nu&&a.name==="feature-state")return!1;var s=!0;return a.eachChild(function(h){s&&!Vo(h)&&(s=!1)}),s}function gs(a,s){if(a instanceof nu&&s.indexOf(a.name)>=0)return!1;var h=!0;return a.eachChild(function(E){h&&!gs(E,s)&&(h=!1)}),h}Co.parse=function(a,s){if(a.length!==2)return s.error("'within' expression requires exactly one argument, but found "+(a.length-1)+" instead.");if(xu(a[1])){var h=a[1];if(h.type==="FeatureCollection")for(var E=0;E<h.features.length;++E){var M=h.features[E].geometry.type;if(M==="Polygon"||M==="MultiPolygon")return new Co(h,h.features[E].geometry)}else if(h.type==="Feature"){var L=h.geometry.type;if(L==="Polygon"||L==="MultiPolygon")return new Co(h,h.geometry)}else if(h.type==="Polygon"||h.type==="MultiPolygon")return new Co(h,h)}return s.error("'within' expression requires valid geojson object that contains polygon geometry type.")},Co.prototype.evaluate=function(a){if(a.geometry()!=null&&a.canonicalID()!=null){if(a.geometryType()==="Point")return function(s,h){var E=[1/0,1/0,-1/0,-1/0],M=[1/0,1/0,-1/0,-1/0],L=s.canonicalID();if(h.type==="Polygon"){var j=Ai(h.coordinates,M,L),re=Ta(s.geometry(),E,M,L);if(!$u(E,M))return!1;for(var Ce=0,ze=re;Ce<ze.length;Ce+=1)if(!ge(ze[Ce],j))return!1}if(h.type==="MultiPolygon"){var We=na(h.coordinates,M,L),Je=Ta(s.geometry(),E,M,L);if(!$u(E,M))return!1;for(var _t=0,It=Je;_t<It.length;_t+=1)if(!je(It[_t],We))return!1}return!0}(a,this.geometries);if(a.geometryType()==="LineString")return function(s,h){var E=[1/0,1/0,-1/0,-1/0],M=[1/0,1/0,-1/0,-1/0],L=s.canonicalID();if(h.type==="Polygon"){var j=Ai(h.coordinates,M,L),re=Wa(s.geometry(),E,M,L);if(!$u(E,M))return!1;for(var Ce=0,ze=re;Ce<ze.length;Ce+=1)if(!en(ze[Ce],j))return!1}if(h.type==="MultiPolygon"){var We=na(h.coordinates,M,L),Je=Wa(s.geometry(),E,M,L);if(!$u(E,M))return!1;for(var _t=0,It=Je;_t<It.length;_t+=1)if(!Dn(It[_t],We))return!1}return!0}(a,this.geometries)}return!1},Co.prototype.eachChild=function(){},Co.prototype.outputDefined=function(){return!0},Co.prototype.serialize=function(){return["within",this.geojson]};var su=function(a,s){this.type=s.type,this.name=a,this.boundExpression=s};su.parse=function(a,s){if(a.length!==2||typeof a[1]!="string")return s.error("'var' expression requires exactly one string literal argument.");var h=a[1];return s.scope.has(h)?new su(h,s.scope.get(h)):s.error('Unknown variable "'+h+'". Make sure "'+h+'" has been bound in an enclosing "let" expression before using it.',1)},su.prototype.evaluate=function(a){return this.boundExpression.evaluate(a)},su.prototype.eachChild=function(){},su.prototype.outputDefined=function(){return!1},su.prototype.serialize=function(){return["var",this.name]};var Zu=function(a,s,h,E,M){s===void 0&&(s=[]),E===void 0&&(E=new ta),M===void 0&&(M=[]),this.registry=a,this.path=s,this.key=s.map(function(L){return"["+L+"]"}).join(""),this.scope=E,this.errors=M,this.expectedType=h};function Ss(a,s){for(var h,E=a.length-1,M=0,L=E,j=0;M<=L;)if((h=a[j=Math.floor((M+L)/2)])<=s){if(j===E||s<a[j+1])return j;M=j+1}else{if(!(h>s))throw new Xs("Input is not a number.");L=j-1}return 0}Zu.prototype.parse=function(a,s,h,E,M){return M===void 0&&(M={}),s?this.concat(s,h,E)._parse(a,M):this._parse(a,M)},Zu.prototype._parse=function(a,s){function h(ze,We,Je){return Je==="assert"?new rs(We,[ze]):Je==="coerce"?new hu(We,[ze]):ze}if(a!==null&&typeof a!="string"&&typeof a!="boolean"&&typeof a!="number"||(a=["literal",a]),Array.isArray(a)){if(a.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');var E=a[0];if(typeof E!="string")return this.error("Expression name must be a string, but found "+typeof E+' instead. If you wanted a literal array, use ["literal", [...]].',0),null;var M=this.registry[E];if(M){var L=M.parse(a,this);if(!L)return null;if(this.expectedType){var j=this.expectedType,re=L.type;if(j.kind!=="string"&&j.kind!=="number"&&j.kind!=="boolean"&&j.kind!=="object"&&j.kind!=="array"||re.kind!=="value")if(j.kind!=="color"&&j.kind!=="formatted"&&j.kind!=="resolvedImage"||re.kind!=="value"&&re.kind!=="string"){if(this.checkSubtype(j,re))return null}else L=h(L,j,s.typeAnnotation||"coerce");else L=h(L,j,s.typeAnnotation||"assert")}if(!(L instanceof Ru)&&L.type.kind!=="resolvedImage"&&function ze(We){if(We instanceof su)return ze(We.boundExpression);if(We instanceof nu&&We.name==="error"||We instanceof Pu||We instanceof Co)return!1;var Je=We instanceof hu||We instanceof rs,_t=!0;return We.eachChild(function(It){_t=Je?_t&&ze(It):_t&&It instanceof Ru}),!!_t&&lo(We)&&gs(We,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}(L)){var Ce=new ss;try{L=new Ru(L.type,L.evaluate(Ce))}catch(ze){return this.error(ze.message),null}}return L}return this.error('Unknown expression "'+E+'". If you wanted a literal array, use ["literal", [...]].',0)}return this.error(a===void 0?"'undefined' value invalid. Use null instead.":typeof a=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':"Expected an array, but found "+typeof a+" instead.")},Zu.prototype.concat=function(a,s,h){var E=typeof a=="number"?this.path.concat(a):this.path,M=h?this.scope.concat(h):this.scope;return new Zu(this.registry,E,s||null,M,this.errors)},Zu.prototype.error=function(a){for(var s=[],h=arguments.length-1;h-- >0;)s[h]=arguments[h+1];var E=""+this.key+s.map(function(M){return"["+M+"]"}).join("");this.errors.push(new ni(E,a))},Zu.prototype.checkSubtype=function(a,s){var h=Ko(a,s);return h&&this.error(h),h};var Us=function(a,s,h){this.type=a,this.input=s,this.labels=[],this.outputs=[];for(var E=0,M=h;E<M.length;E+=1){var L=M[E],j=L[1];this.labels.push(L[0]),this.outputs.push(j)}};function ys(a,s,h){return a*(1-h)+s*h}Us.parse=function(a,s){if(a.length-1<4)return s.error("Expected at least 4 arguments, but found only "+(a.length-1)+".");if((a.length-1)%2!=0)return s.error("Expected an even number of arguments.");var h=s.parse(a[1],1,Mr);if(!h)return null;var E=[],M=null;s.expectedType&&s.expectedType.kind!=="value"&&(M=s.expectedType);for(var L=1;L<a.length;L+=2){var j=L===1?-1/0:a[L],re=a[L+1],Ce=L,ze=L+1;if(typeof j!="number")return s.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',Ce);if(E.length&&E[E.length-1][0]>=j)return s.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',Ce);var We=s.parse(re,ze,M);if(!We)return null;M=M||We.type,E.push([j,We])}return new Us(M,h,E)},Us.prototype.evaluate=function(a){var s=this.labels,h=this.outputs;if(s.length===1)return h[0].evaluate(a);var E=this.input.evaluate(a);if(E<=s[0])return h[0].evaluate(a);var M=s.length;return E>=s[M-1]?h[M-1].evaluate(a):h[Ss(s,E)].evaluate(a)},Us.prototype.eachChild=function(a){a(this.input);for(var s=0,h=this.outputs;s<h.length;s+=1)a(h[s])},Us.prototype.outputDefined=function(){return this.outputs.every(function(a){return a.outputDefined()})},Us.prototype.serialize=function(){for(var a=["step",this.input.serialize()],s=0;s<this.labels.length;s++)s>0&&a.push(this.labels[s]),a.push(this.outputs[s].serialize());return a};var Oo=Object.freeze({__proto__:null,number:ys,color:function(a,s,h){return new rr(ys(a.r,s.r,h),ys(a.g,s.g,h),ys(a.b,s.b,h),ys(a.a,s.a,h))},array:function(a,s,h){return a.map(function(E,M){return ys(E,s[M],h)})}}),qo=6/29*3*(6/29),Rc=Math.PI/180,Hl=180/Math.PI;function sf(a){return a>.008856451679035631?Math.pow(a,.3333333333333333):a/qo+.13793103448275862}function Bf(a){return a>.20689655172413793?a*a*a:qo*(a-.13793103448275862)}function zf(a){return 255*(a<=.0031308?12.92*a:1.055*Math.pow(a,.4166666666666667)-.055)}function ac(a){return(a/=255)<=.04045?a/12.92:Math.pow((a+.055)/1.055,2.4)}function dc(a){var s=ac(a.r),h=ac(a.g),E=ac(a.b),M=sf((.4124564*s+.3575761*h+.1804375*E)/.95047),L=sf((.2126729*s+.7151522*h+.072175*E)/1);return{l:116*L-16,a:500*(M-L),b:200*(L-sf((.0193339*s+.119192*h+.9503041*E)/1.08883)),alpha:a.a}}function O(a){var s=(a.l+16)/116,h=isNaN(a.a)?s:s+a.a/500,E=isNaN(a.b)?s:s-a.b/200;return s=1*Bf(s),h=.95047*Bf(h),E=1.08883*Bf(E),new rr(zf(3.2404542*h-1.5371385*s-.4985314*E),zf(-.969266*h+1.8760108*s+.041556*E),zf(.0556434*h-.2040259*s+1.0572252*E),a.alpha)}function q(a,s,h){var E=s-a;return a+h*(E>180||E<-180?E-360*Math.round(E/360):E)}var Le={forward:dc,reverse:O,interpolate:function(a,s,h){return{l:ys(a.l,s.l,h),a:ys(a.a,s.a,h),b:ys(a.b,s.b,h),alpha:ys(a.alpha,s.alpha,h)}}},ve={forward:function(a){var s=dc(a),h=s.l,E=s.a,M=s.b,L=Math.atan2(M,E)*Hl;return{h:L<0?L+360:L,c:Math.sqrt(E*E+M*M),l:h,alpha:a.a}},reverse:function(a){var s=a.h*Rc,h=a.c;return O({l:a.l,a:Math.cos(s)*h,b:Math.sin(s)*h,alpha:a.alpha})},interpolate:function(a,s,h){return{h:q(a.h,s.h,h),c:ys(a.c,s.c,h),l:ys(a.l,s.l,h),alpha:ys(a.alpha,s.alpha,h)}}},ct=Object.freeze({__proto__:null,lab:Le,hcl:ve}),Lt=function(a,s,h,E,M){this.type=a,this.operator=s,this.interpolation=h,this.input=E,this.labels=[],this.outputs=[];for(var L=0,j=M;L<j.length;L+=1){var re=j[L],Ce=re[1];this.labels.push(re[0]),this.outputs.push(Ce)}};function hr(a,s,h,E){var M=E-h,L=a-h;return M===0?0:s===1?L/M:(Math.pow(s,L)-1)/(Math.pow(s,M)-1)}Lt.interpolationFactor=function(a,s,h,E){var M=0;if(a.name==="exponential")M=hr(s,a.base,h,E);else if(a.name==="linear")M=hr(s,1,h,E);else if(a.name==="cubic-bezier"){var L=a.controlPoints;M=new A(L[0],L[1],L[2],L[3]).solve(hr(s,1,h,E))}return M},Lt.parse=function(a,s){var h=a[0],E=a[1],M=a[2],L=a.slice(3);if(!Array.isArray(E)||E.length===0)return s.error("Expected an interpolation type expression.",1);if(E[0]==="linear")E={name:"linear"};else if(E[0]==="exponential"){var j=E[1];if(typeof j!="number")return s.error("Exponential interpolation requires a numeric base.",1,1);E={name:"exponential",base:j}}else{if(E[0]!=="cubic-bezier")return s.error("Unknown interpolation type "+String(E[0]),1,0);var re=E.slice(1);if(re.length!==4||re.some(function(Rr){return typeof Rr!="number"||Rr<0||Rr>1}))return s.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);E={name:"cubic-bezier",controlPoints:re}}if(a.length-1<4)return s.error("Expected at least 4 arguments, but found only "+(a.length-1)+".");if((a.length-1)%2!=0)return s.error("Expected an even number of arguments.");if(!(M=s.parse(M,2,Mr)))return null;var Ce=[],ze=null;h==="interpolate-hcl"||h==="interpolate-lab"?ze=Wi:s.expectedType&&s.expectedType.kind!=="value"&&(ze=s.expectedType);for(var We=0;We<L.length;We+=2){var Je=L[We],_t=L[We+1],It=We+3,ar=We+4;if(typeof Je!="number")return s.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',It);if(Ce.length&&Ce[Ce.length-1][0]>=Je)return s.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',It);var ur=s.parse(_t,ar,ze);if(!ur)return null;ze=ze||ur.type,Ce.push([Je,ur])}return ze.kind==="number"||ze.kind==="color"||ze.kind==="array"&&ze.itemType.kind==="number"&&typeof ze.N=="number"?new Lt(ze,h,E,M,Ce):s.error("Type "+So(ze)+" is not interpolatable.")},Lt.prototype.evaluate=function(a){var s=this.labels,h=this.outputs;if(s.length===1)return h[0].evaluate(a);var E=this.input.evaluate(a);if(E<=s[0])return h[0].evaluate(a);var M=s.length;if(E>=s[M-1])return h[M-1].evaluate(a);var L=Ss(s,E),j=Lt.interpolationFactor(this.interpolation,E,s[L],s[L+1]),re=h[L].evaluate(a),Ce=h[L+1].evaluate(a);return this.operator==="interpolate"?Oo[this.type.kind.toLowerCase()](re,Ce,j):this.operator==="interpolate-hcl"?ve.reverse(ve.interpolate(ve.forward(re),ve.forward(Ce),j)):Le.reverse(Le.interpolate(Le.forward(re),Le.forward(Ce),j))},Lt.prototype.eachChild=function(a){a(this.input);for(var s=0,h=this.outputs;s<h.length;s+=1)a(h[s])},Lt.prototype.outputDefined=function(){return this.outputs.every(function(a){return a.outputDefined()})},Lt.prototype.serialize=function(){var a;a=this.interpolation.name==="linear"?["linear"]:this.interpolation.name==="exponential"?this.interpolation.base===1?["linear"]:["exponential",this.interpolation.base]:["cubic-bezier"].concat(this.interpolation.controlPoints);for(var s=[this.operator,a,this.input.serialize()],h=0;h<this.labels.length;h++)s.push(this.labels[h],this.outputs[h].serialize());return s};var lr=function(a,s){this.type=a,this.args=s};lr.parse=function(a,s){if(a.length<2)return s.error("Expectected at least one argument.");var h=null,E=s.expectedType;E&&E.kind!=="value"&&(h=E);for(var M=[],L=0,j=a.slice(1);L<j.length;L+=1){var re=s.parse(j[L],1+M.length,h,void 0,{typeAnnotation:"omit"});if(!re)return null;h=h||re.type,M.push(re)}var Ce=E&&M.some(function(ze){return Ko(E,ze.type)});return new lr(Ce?ua:h,M)},lr.prototype.evaluate=function(a){for(var s,h=null,E=0,M=0,L=this.args;M<L.length&&(E++,(h=L[M].evaluate(a))&&h instanceof Es&&!h.available&&(s||(s=h.name),h=null,E===this.args.length&&(h=s)),h===null);M+=1);return h},lr.prototype.eachChild=function(a){this.args.forEach(a)},lr.prototype.outputDefined=function(){return this.args.every(function(a){return a.outputDefined()})},lr.prototype.serialize=function(){var a=["coalesce"];return this.eachChild(function(s){a.push(s.serialize())}),a};var Gr=function(a,s){this.type=s.type,this.bindings=[].concat(a),this.result=s};Gr.prototype.evaluate=function(a){return this.result.evaluate(a)},Gr.prototype.eachChild=function(a){for(var s=0,h=this.bindings;s<h.length;s+=1)a(h[s][1]);a(this.result)},Gr.parse=function(a,s){if(a.length<4)return s.error("Expected at least 3 arguments, but found "+(a.length-1)+" instead.");for(var h=[],E=1;E<a.length-1;E+=2){var M=a[E];if(typeof M!="string")return s.error("Expected string, but found "+typeof M+" instead.",E);if(/[^a-zA-Z0-9_]/.test(M))return s.error("Variable names must contain only alphanumeric characters or '_'.",E);var L=s.parse(a[E+1],E+1);if(!L)return null;h.push([M,L])}var j=s.parse(a[a.length-1],a.length-1,s.expectedType,h);return j?new Gr(h,j):null},Gr.prototype.outputDefined=function(){return this.result.outputDefined()},Gr.prototype.serialize=function(){for(var a=["let"],s=0,h=this.bindings;s<h.length;s+=1){var E=h[s];a.push(E[0],E[1].serialize())}return a.push(this.result.serialize()),a};var ii=function(a,s,h){this.type=a,this.index=s,this.input=h};ii.parse=function(a,s){if(a.length!==3)return s.error("Expected 2 arguments, but found "+(a.length-1)+" instead.");var h=s.parse(a[1],1,Mr),E=s.parse(a[2],2,Fo(s.expectedType||ua));return h&&E?new ii(E.type.itemType,h,E):null},ii.prototype.evaluate=function(a){var s=this.index.evaluate(a),h=this.input.evaluate(a);if(s<0)throw new Xs("Array index out of bounds: "+s+" < 0.");if(s>=h.length)throw new Xs("Array index out of bounds: "+s+" > "+(h.length-1)+".");if(s!==Math.floor(s))throw new Xs("Array index must be an integer, but found "+s+" instead.");return h[s]},ii.prototype.eachChild=function(a){a(this.index),a(this.input)},ii.prototype.outputDefined=function(){return!1},ii.prototype.serialize=function(){return["at",this.index.serialize(),this.input.serialize()]};var fi=function(a,s){this.type=Zi,this.needle=a,this.haystack=s};fi.parse=function(a,s){if(a.length!==3)return s.error("Expected 2 arguments, but found "+(a.length-1)+" instead.");var h=s.parse(a[1],1,ua),E=s.parse(a[2],2,ua);return h&&E?No(h.type,[Zi,Wr,Mr,fa,ua])?new fi(h,E):s.error("Expected first argument to be of type boolean, string, number or null, but found "+So(h.type)+" instead"):null},fi.prototype.evaluate=function(a){var s=this.needle.evaluate(a),h=this.haystack.evaluate(a);if(!h)return!1;if(!ui(s,["boolean","string","number","null"]))throw new Xs("Expected first argument to be of type boolean, string, number or null, but found "+So(bo(s))+" instead.");if(!ui(h,["string","array"]))throw new Xs("Expected second argument to be of type array or string, but found "+So(bo(h))+" instead.");return h.indexOf(s)>=0},fi.prototype.eachChild=function(a){a(this.needle),a(this.haystack)},fi.prototype.outputDefined=function(){return!0},fi.prototype.serialize=function(){return["in",this.needle.serialize(),this.haystack.serialize()]};var Na=function(a,s,h){this.type=Mr,this.needle=a,this.haystack=s,this.fromIndex=h};Na.parse=function(a,s){if(a.length<=2||a.length>=5)return s.error("Expected 3 or 4 arguments, but found "+(a.length-1)+" instead.");var h=s.parse(a[1],1,ua),E=s.parse(a[2],2,ua);if(!h||!E)return null;if(!No(h.type,[Zi,Wr,Mr,fa,ua]))return s.error("Expected first argument to be of type boolean, string, number or null, but found "+So(h.type)+" instead");if(a.length===4){var M=s.parse(a[3],3,Mr);return M?new Na(h,E,M):null}return new Na(h,E)},Na.prototype.evaluate=function(a){var s=this.needle.evaluate(a),h=this.haystack.evaluate(a);if(!ui(s,["boolean","string","number","null"]))throw new Xs("Expected first argument to be of type boolean, string, number or null, but found "+So(bo(s))+" instead.");if(!ui(h,["string","array"]))throw new Xs("Expected second argument to be of type array or string, but found "+So(bo(h))+" instead.");if(this.fromIndex){var E=this.fromIndex.evaluate(a);return h.indexOf(s,E)}return h.indexOf(s)},Na.prototype.eachChild=function(a){a(this.needle),a(this.haystack),this.fromIndex&&a(this.fromIndex)},Na.prototype.outputDefined=function(){return!1},Na.prototype.serialize=function(){if(this.fromIndex!=null&&this.fromIndex!==void 0){var a=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),a]}return["index-of",this.needle.serialize(),this.haystack.serialize()]};var vo=function(a,s,h,E,M,L){this.inputType=a,this.type=s,this.input=h,this.cases=E,this.outputs=M,this.otherwise=L};vo.parse=function(a,s){if(a.length<5)return s.error("Expected at least 4 arguments, but found only "+(a.length-1)+".");if(a.length%2!=1)return s.error("Expected an even number of arguments.");var h,E;s.expectedType&&s.expectedType.kind!=="value"&&(E=s.expectedType);for(var M={},L=[],j=2;j<a.length-1;j+=2){var re=a[j],Ce=a[j+1];Array.isArray(re)||(re=[re]);var ze=s.concat(j);if(re.length===0)return ze.error("Expected at least one branch label.");for(var We=0,Je=re;We<Je.length;We+=1){var _t=Je[We];if(typeof _t!="number"&&typeof _t!="string")return ze.error("Branch labels must be numbers or strings.");if(typeof _t=="number"&&Math.abs(_t)>Number.MAX_SAFE_INTEGER)return ze.error("Branch labels must be integers no larger than "+Number.MAX_SAFE_INTEGER+".");if(typeof _t=="number"&&Math.floor(_t)!==_t)return ze.error("Numeric branch labels must be integer values.");if(h){if(ze.checkSubtype(h,bo(_t)))return null}else h=bo(_t);if(M[String(_t)]!==void 0)return ze.error("Branch labels must be unique.");M[String(_t)]=L.length}var It=s.parse(Ce,j,E);if(!It)return null;E=E||It.type,L.push(It)}var ar=s.parse(a[1],1,ua);if(!ar)return null;var ur=s.parse(a[a.length-1],a.length-1,E);return ur?ar.type.kind!=="value"&&s.concat(1).checkSubtype(h,ar.type)?null:new vo(h,E,ar,M,L,ur):null},vo.prototype.evaluate=function(a){var s=this.input.evaluate(a);return(bo(s)===this.inputType&&this.outputs[this.cases[s]]||this.otherwise).evaluate(a)},vo.prototype.eachChild=function(a){a(this.input),this.outputs.forEach(a),a(this.otherwise)},vo.prototype.outputDefined=function(){return this.outputs.every(function(a){return a.outputDefined()})&&this.otherwise.outputDefined()},vo.prototype.serialize=function(){for(var a=this,s=["match",this.input.serialize()],h=[],E={},M=0,L=Object.keys(this.cases).sort();M<L.length;M+=1){var j=L[M];(Je=E[this.cases[j]])===void 0?(E[this.cases[j]]=h.length,h.push([this.cases[j],[j]])):h[Je][1].push(j)}for(var re=function(It){return a.inputType.kind==="number"?Number(It):It},Ce=0,ze=h;Ce<ze.length;Ce+=1){var We=ze[Ce],Je=We[0],_t=We[1];s.push(_t.length===1?re(_t[0]):_t.map(re)),s.push(this.outputs[outputIndex$1].serialize())}return s.push(this.otherwise.serialize()),s};var Va=function(a,s,h){this.type=a,this.branches=s,this.otherwise=h};Va.parse=function(a,s){if(a.length<4)return s.error("Expected at least 3 arguments, but found only "+(a.length-1)+".");if(a.length%2!=0)return s.error("Expected an odd number of arguments.");var h;s.expectedType&&s.expectedType.kind!=="value"&&(h=s.expectedType);for(var E=[],M=1;M<a.length-1;M+=2){var L=s.parse(a[M],M,Zi);if(!L)return null;var j=s.parse(a[M+1],M+1,h);if(!j)return null;E.push([L,j]),h=h||j.type}var re=s.parse(a[a.length-1],a.length-1,h);return re?new Va(h,E,re):null},Va.prototype.evaluate=function(a){for(var s=0,h=this.branches;s<h.length;s+=1){var E=h[s],M=E[1];if(E[0].evaluate(a))return M.evaluate(a)}return this.otherwise.evaluate(a)},Va.prototype.eachChild=function(a){for(var s=0,h=this.branches;s<h.length;s+=1){var E=h[s],M=E[1];a(E[0]),a(M)}a(this.otherwise)},Va.prototype.outputDefined=function(){return this.branches.every(function(a){return a[1].outputDefined()})&&this.otherwise.outputDefined()},Va.prototype.serialize=function(){var a=["case"];return this.eachChild(function(s){a.push(s.serialize())}),a};var ha=function(a,s,h,E){this.type=a,this.input=s,this.beginIndex=h,this.endIndex=E};function $o(a,s){return a==="=="||a==="!="?s.kind==="boolean"||s.kind==="string"||s.kind==="number"||s.kind==="null"||s.kind==="value":s.kind==="string"||s.kind==="number"||s.kind==="value"}function ms(a,s,h,E){return E.compare(s,h)===0}function To(a,s,h){var E=a!=="=="&&a!=="!=";return function(){function M(L,j,re){this.type=Zi,this.lhs=L,this.rhs=j,this.collator=re,this.hasUntypedArgument=L.type.kind==="value"||j.type.kind==="value"}return M.parse=function(L,j){if(L.length!==3&&L.length!==4)return j.error("Expected two or three arguments.");var re=L[0],Ce=j.parse(L[1],1,ua);if(!Ce)return null;if(!$o(re,Ce.type))return j.concat(1).error('"'+re+`" comparisons are not supported for type '`+So(Ce.type)+"'.");var ze=j.parse(L[2],2,ua);if(!ze)return null;if(!$o(re,ze.type))return j.concat(2).error('"'+re+`" comparisons are not supported for type '`+So(ze.type)+"'.");if(Ce.type.kind!==ze.type.kind&&Ce.type.kind!=="value"&&ze.type.kind!=="value")return j.error("Cannot compare types '"+So(Ce.type)+"' and '"+So(ze.type)+"'.");E&&(Ce.type.kind==="value"&&ze.type.kind!=="value"?Ce=new rs(ze.type,[Ce]):Ce.type.kind!=="value"&&ze.type.kind==="value"&&(ze=new rs(Ce.type,[ze])));var We=null;if(L.length===4){if(Ce.type.kind!=="string"&&ze.type.kind!=="string"&&Ce.type.kind!=="value"&&ze.type.kind!=="value")return j.error("Cannot use collator to compare non-string types.");if(!(We=j.parse(L[3],3,Ur)))return null}return new M(Ce,ze,We)},M.prototype.evaluate=function(L){var j=this.lhs.evaluate(L),re=this.rhs.evaluate(L);if(E&&this.hasUntypedArgument){var Ce=bo(j),ze=bo(re);if(Ce.kind!==ze.kind||Ce.kind!=="string"&&Ce.kind!=="number")throw new Xs('Expected arguments for "'+a+'" to be (string, string) or (number, number), but found ('+Ce.kind+", "+ze.kind+") instead.")}if(this.collator&&!E&&this.hasUntypedArgument){var We=bo(j),Je=bo(re);if(We.kind!=="string"||Je.kind!=="string")return s(L,j,re)}return this.collator?h(L,j,re,this.collator.evaluate(L)):s(L,j,re)},M.prototype.eachChild=function(L){L(this.lhs),L(this.rhs),this.collator&&L(this.collator)},M.prototype.outputDefined=function(){return!0},M.prototype.serialize=function(){var L=[a];return this.eachChild(function(j){L.push(j.serialize())}),L},M}()}ha.parse=function(a,s){if(a.length<=2||a.length>=5)return s.error("Expected 3 or 4 arguments, but found "+(a.length-1)+" instead.");var h=s.parse(a[1],1,ua),E=s.parse(a[2],2,Mr);if(!h||!E)return null;if(!No(h.type,[Fo(ua),Wr,ua]))return s.error("Expected first argument to be of type array or string, but found "+So(h.type)+" instead");if(a.length===4){var M=s.parse(a[3],3,Mr);return M?new ha(h.type,h,E,M):null}return new ha(h.type,h,E)},ha.prototype.evaluate=function(a){var s=this.input.evaluate(a),h=this.beginIndex.evaluate(a);if(!ui(s,["string","array"]))throw new Xs("Expected first argument to be of type array or string, but found "+So(bo(s))+" instead.");if(this.endIndex){var E=this.endIndex.evaluate(a);return s.slice(h,E)}return s.slice(h)},ha.prototype.eachChild=function(a){a(this.input),a(this.beginIndex),this.endIndex&&a(this.endIndex)},ha.prototype.outputDefined=function(){return!1},ha.prototype.serialize=function(){if(this.endIndex!=null&&this.endIndex!==void 0){var a=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),a]}return["slice",this.input.serialize(),this.beginIndex.serialize()]};var Qs=To("==",function(a,s,h){return s===h},ms),Wl=To("!=",function(a,s,h){return s!==h},function(a,s,h,E){return!ms(0,s,h,E)}),Pc=To("<",function(a,s,h){return s<h},function(a,s,h,E){return E.compare(s,h)<0}),Js=To(">",function(a,s,h){return s>h},function(a,s,h,E){return E.compare(s,h)>0}),Tl=To("<=",function(a,s,h){return s<=h},function(a,s,h,E){return E.compare(s,h)<=0}),bf=To(">=",function(a,s,h){return s>=h},function(a,s,h,E){return E.compare(s,h)>=0}),Zc=function(a,s,h,E,M){this.type=Wr,this.number=a,this.locale=s,this.currency=h,this.minFractionDigits=E,this.maxFractionDigits=M};Zc.parse=function(a,s){if(a.length!==3)return s.error("Expected two arguments.");var h=s.parse(a[1],1,Mr);if(!h)return null;var E=a[2];if(typeof E!="object"||Array.isArray(E))return s.error("NumberFormat options argument must be an object.");var M=null;if(E.locale&&!(M=s.parse(E.locale,1,Wr)))return null;var L=null;if(E.currency&&!(L=s.parse(E.currency,1,Wr)))return null;var j=null;if(E["min-fraction-digits"]&&!(j=s.parse(E["min-fraction-digits"],1,Mr)))return null;var re=null;return E["max-fraction-digits"]&&!(re=s.parse(E["max-fraction-digits"],1,Mr))?null:new Zc(h,M,L,j,re)},Zc.prototype.evaluate=function(a){return new Intl.NumberFormat(this.locale?this.locale.evaluate(a):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(a):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(a):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(a):void 0}).format(this.number.evaluate(a))},Zc.prototype.eachChild=function(a){a(this.number),this.locale&&a(this.locale),this.currency&&a(this.currency),this.minFractionDigits&&a(this.minFractionDigits),this.maxFractionDigits&&a(this.maxFractionDigits)},Zc.prototype.outputDefined=function(){return!1},Zc.prototype.serialize=function(){var a={};return this.locale&&(a.locale=this.locale.serialize()),this.currency&&(a.currency=this.currency.serialize()),this.minFractionDigits&&(a["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(a["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),a]};var vc=function(a){this.type=Mr,this.input=a};vc.parse=function(a,s){if(a.length!==2)return s.error("Expected 1 argument, but found "+(a.length-1)+" instead.");var h=s.parse(a[1],1);return h?h.type.kind!=="array"&&h.type.kind!=="string"&&h.type.kind!=="value"?s.error("Expected argument of type string or array, but found "+So(h.type)+" instead."):new vc(h):null},vc.prototype.evaluate=function(a){var s=this.input.evaluate(a);if(typeof s=="string"||Array.isArray(s))return s.length;throw new Xs("Expected value to be of type string or array, but found "+So(bo(s))+" instead.")},vc.prototype.eachChild=function(a){a(this.input)},vc.prototype.outputDefined=function(){return!1},vc.prototype.serialize=function(){var a=["length"];return this.eachChild(function(s){a.push(s.serialize())}),a};var jc={"==":Qs,"!=":Wl,">":Js,"<":Pc,">=":bf,"<=":Tl,array:rs,at:ii,boolean:rs,case:Va,coalesce:lr,collator:Pu,format:au,image:Tu,in:fi,"index-of":Na,interpolate:Lt,"interpolate-hcl":Lt,"interpolate-lab":Lt,length:vc,let:Gr,literal:Ru,match:vo,number:rs,"number-format":Zc,object:rs,slice:ha,step:Us,string:rs,"to-boolean":hu,"to-color":hu,"to-number":hu,"to-string":hu,var:su,within:Co};function bu(a,s){var h=s[0],E=s[1],M=s[2],L=s[3];h=h.evaluate(a),E=E.evaluate(a),M=M.evaluate(a);var j=L?L.evaluate(a):1,re=Os(h,E,M,j);if(re)throw new Xs(re);return new rr(h/255*j,E/255*j,M/255*j,j)}function cp(a,s){return a in s}function Yf(a,s){var h=s[a];return h===void 0?null:h}function Ju(a){return{type:a}}function Vc(a){return{result:"success",value:a}}function Gc(a){return{result:"error",value:a}}function ju(a){return a["property-type"]==="data-driven"||a["property-type"]==="cross-faded-data-driven"}function fp(a){return!!a.expression&&a.expression.parameters.indexOf("zoom")>-1}function $l(a){return!!a.expression&&a.expression.interpolated}function Rs(a){return a instanceof Number?"number":a instanceof String?"string":a instanceof Boolean?"boolean":Array.isArray(a)?"array":a===null?"null":typeof a}function Ml(a){return typeof a=="object"&&a!==null&&!Array.isArray(a)}function Ef(a){return a}function Hc(a,s,h){return a!==void 0?a:s!==void 0?s:h!==void 0?h:void 0}function Xl(a,s,h,E,M){return Hc(typeof h===M?E[h]:void 0,a.default,s.default)}function ah(a,s,h){if(Rs(h)!=="number")return Hc(a.default,s.default);var E=a.stops.length;if(E===1||h<=a.stops[0][0])return a.stops[0][1];if(h>=a.stops[E-1][0])return a.stops[E-1][1];var M=Ss(a.stops.map(function(L){return L[0]}),h);return a.stops[M][1]}function Kf(a,s,h){var E=a.base!==void 0?a.base:1;if(Rs(h)!=="number")return Hc(a.default,s.default);var M=a.stops.length;if(M===1||h<=a.stops[0][0])return a.stops[0][1];if(h>=a.stops[M-1][0])return a.stops[M-1][1];var L=Ss(a.stops.map(function(Je){return Je[0]}),h),j=function(Je,_t,It,ar){var ur=ar-It,Rr=Je-It;return ur===0?0:_t===1?Rr/ur:(Math.pow(_t,Rr)-1)/(Math.pow(_t,ur)-1)}(h,E,a.stops[L][0],a.stops[L+1][0]),re=a.stops[L][1],Ce=a.stops[L+1][1],ze=Oo[s.type]||Ef;if(a.colorSpace&&a.colorSpace!=="rgb"){var We=ct[a.colorSpace];ze=function(Je,_t){return We.reverse(We.interpolate(We.forward(Je),We.forward(_t),j))}}return typeof re.evaluate=="function"?{evaluate:function(){for(var Je=[],_t=arguments.length;_t--;)Je[_t]=arguments[_t];var It=re.evaluate.apply(void 0,Je),ar=Ce.evaluate.apply(void 0,Je);if(It!==void 0&&ar!==void 0)return ze(It,ar,j)}}:ze(re,Ce,j)}function Ll(a,s,h){return s.type==="color"?h=rr.parse(h):s.type==="formatted"?h=$s.fromString(h.toString()):s.type==="resolvedImage"?h=Es.fromString(h.toString()):Rs(h)===s.type||s.type==="enum"&&s.values[h]||(h=void 0),Hc(h,a.default,s.default)}nu.register(jc,{error:[{kind:"error"},[Wr],function(a,s){throw new Xs(s[0].evaluate(a))}],typeof:[Wr,[ua],function(a,s){return So(bo(s[0].evaluate(a)))}],"to-rgba":[Fo(Mr,4),[Wi],function(a,s){return s[0].evaluate(a).toArray()}],rgb:[Wi,[Mr,Mr,Mr],bu],rgba:[Wi,[Mr,Mr,Mr,Mr],bu],has:{type:Zi,overloads:[[[Wr],function(a,s){return cp(s[0].evaluate(a),a.properties())}],[[Wr,xo],function(a,s){var h=s[1];return cp(s[0].evaluate(a),h.evaluate(a))}]]},get:{type:ua,overloads:[[[Wr],function(a,s){return Yf(s[0].evaluate(a),a.properties())}],[[Wr,xo],function(a,s){var h=s[1];return Yf(s[0].evaluate(a),h.evaluate(a))}]]},"feature-state":[ua,[Wr],function(a,s){return Yf(s[0].evaluate(a),a.featureState||{})}],properties:[xo,[],function(a){return a.properties()}],"geometry-type":[Wr,[],function(a){return a.geometryType()}],id:[ua,[],function(a){return a.id()}],zoom:[Mr,[],function(a){return a.globals.zoom}],"heatmap-density":[Mr,[],function(a){return a.globals.heatmapDensity||0}],"line-progress":[Mr,[],function(a){return a.globals.lineProgress||0}],accumulated:[ua,[],function(a){return a.globals.accumulated===void 0?null:a.globals.accumulated}],"+":[Mr,Ju(Mr),function(a,s){for(var h=0,E=0,M=s;E<M.length;E+=1)h+=M[E].evaluate(a);return h}],"*":[Mr,Ju(Mr),function(a,s){for(var h=1,E=0,M=s;E<M.length;E+=1)h*=M[E].evaluate(a);return h}],"-":{type:Mr,overloads:[[[Mr,Mr],function(a,s){var h=s[1];return s[0].evaluate(a)-h.evaluate(a)}],[[Mr],function(a,s){return-s[0].evaluate(a)}]]},"/":[Mr,[Mr,Mr],function(a,s){var h=s[1];return s[0].evaluate(a)/h.evaluate(a)}],"%":[Mr,[Mr,Mr],function(a,s){var h=s[1];return s[0].evaluate(a)%h.evaluate(a)}],ln2:[Mr,[],function(){return Math.LN2}],pi:[Mr,[],function(){return Math.PI}],e:[Mr,[],function(){return Math.E}],"^":[Mr,[Mr,Mr],function(a,s){var h=s[1];return Math.pow(s[0].evaluate(a),h.evaluate(a))}],sqrt:[Mr,[Mr],function(a,s){return Math.sqrt(s[0].evaluate(a))}],log10:[Mr,[Mr],function(a,s){return Math.log(s[0].evaluate(a))/Math.LN10}],ln:[Mr,[Mr],function(a,s){return Math.log(s[0].evaluate(a))}],log2:[Mr,[Mr],function(a,s){return Math.log(s[0].evaluate(a))/Math.LN2}],sin:[Mr,[Mr],function(a,s){return Math.sin(s[0].evaluate(a))}],cos:[Mr,[Mr],function(a,s){return Math.cos(s[0].evaluate(a))}],tan:[Mr,[Mr],function(a,s){return Math.tan(s[0].evaluate(a))}],asin:[Mr,[Mr],function(a,s){return Math.asin(s[0].evaluate(a))}],acos:[Mr,[Mr],function(a,s){return Math.acos(s[0].evaluate(a))}],atan:[Mr,[Mr],function(a,s){return Math.atan(s[0].evaluate(a))}],min:[Mr,Ju(Mr),function(a,s){return Math.min.apply(Math,s.map(function(h){return h.evaluate(a)}))}],max:[Mr,Ju(Mr),function(a,s){return Math.max.apply(Math,s.map(function(h){return h.evaluate(a)}))}],abs:[Mr,[Mr],function(a,s){return Math.abs(s[0].evaluate(a))}],round:[Mr,[Mr],function(a,s){var h=s[0].evaluate(a);return h<0?-Math.round(-h):Math.round(h)}],floor:[Mr,[Mr],function(a,s){return Math.floor(s[0].evaluate(a))}],ceil:[Mr,[Mr],function(a,s){return Math.ceil(s[0].evaluate(a))}],"filter-==":[Zi,[Wr,ua],function(a,s){var h=s[0],E=s[1];return a.properties()[h.value]===E.value}],"filter-id-==":[Zi,[ua],function(a,s){var h=s[0];return a.id()===h.value}],"filter-type-==":[Zi,[Wr],function(a,s){var h=s[0];return a.geometryType()===h.value}],"filter-<":[Zi,[Wr,ua],function(a,s){var h=s[0],E=s[1],M=a.properties()[h.value],L=E.value;return typeof M==typeof L&&M<L}],"filter-id-<":[Zi,[ua],function(a,s){var h=s[0],E=a.id(),M=h.value;return typeof E==typeof M&&E<M}],"filter->":[Zi,[Wr,ua],function(a,s){var h=s[0],E=s[1],M=a.properties()[h.value],L=E.value;return typeof M==typeof L&&M>L}],"filter-id->":[Zi,[ua],function(a,s){var h=s[0],E=a.id(),M=h.value;return typeof E==typeof M&&E>M}],"filter-<=":[Zi,[Wr,ua],function(a,s){var h=s[0],E=s[1],M=a.properties()[h.value],L=E.value;return typeof M==typeof L&&M<=L}],"filter-id-<=":[Zi,[ua],function(a,s){var h=s[0],E=a.id(),M=h.value;return typeof E==typeof M&&E<=M}],"filter->=":[Zi,[Wr,ua],function(a,s){var h=s[0],E=s[1],M=a.properties()[h.value],L=E.value;return typeof M==typeof L&&M>=L}],"filter-id->=":[Zi,[ua],function(a,s){var h=s[0],E=a.id(),M=h.value;return typeof E==typeof M&&E>=M}],"filter-has":[Zi,[ua],function(a,s){return s[0].value in a.properties()}],"filter-has-id":[Zi,[],function(a){return a.id()!==null&&a.id()!==void 0}],"filter-type-in":[Zi,[Fo(Wr)],function(a,s){return s[0].value.indexOf(a.geometryType())>=0}],"filter-id-in":[Zi,[Fo(ua)],function(a,s){return s[0].value.indexOf(a.id())>=0}],"filter-in-small":[Zi,[Wr,Fo(ua)],function(a,s){var h=s[0];return s[1].value.indexOf(a.properties()[h.value])>=0}],"filter-in-large":[Zi,[Wr,Fo(ua)],function(a,s){var h=s[0],E=s[1];return function(M,L,j,re){for(;j<=re;){var Ce=j+re>>1;if(L[Ce]===M)return!0;L[Ce]>M?re=Ce-1:j=Ce+1}return!1}(a.properties()[h.value],E.value,0,E.value.length-1)}],all:{type:Zi,overloads:[[[Zi,Zi],function(a,s){var h=s[1];return s[0].evaluate(a)&&h.evaluate(a)}],[Ju(Zi),function(a,s){for(var h=0,E=s;h<E.length;h+=1)if(!E[h].evaluate(a))return!1;return!0}]]},any:{type:Zi,overloads:[[[Zi,Zi],function(a,s){var h=s[1];return s[0].evaluate(a)||h.evaluate(a)}],[Ju(Zi),function(a,s){for(var h=0,E=s;h<E.length;h+=1)if(E[h].evaluate(a))return!0;return!1}]]},"!":[Zi,[Zi],function(a,s){return!s[0].evaluate(a)}],"is-supported-script":[Zi,[Wr],function(a,s){var h=a.globals&&a.globals.isSupportedScript;return!h||h(s[0].evaluate(a))}],upcase:[Wr,[Wr],function(a,s){return s[0].evaluate(a).toUpperCase()}],downcase:[Wr,[Wr],function(a,s){return s[0].evaluate(a).toLowerCase()}],concat:[Wr,Ju(ua),function(a,s){return s.map(function(h){return ic(h.evaluate(a))}).join("")}],"resolved-locale":[Wr,[Ur],function(a,s){return s[0].evaluate(a).resolvedLocale()}]});var Wc=function(a,s){this.expression=a,this._warningHistory={},this._evaluator=new ss,this._defaultValue=s?function(h){return h.type==="color"&&Ml(h.default)?new rr(0,0,0,0):h.type==="color"?rr.parse(h.default)||null:h.default===void 0?null:h.default}(s):null,this._enumValues=s&&s.type==="enum"?s.values:null};function uu(a){return Array.isArray(a)&&a.length>0&&typeof a[0]=="string"&&a[0]in jc}function hs(a,s){var h=new Zu(jc,[],s?function(M){var L={color:Wi,string:Wr,number:Mr,enum:Wr,boolean:Zi,formatted:Jr,resolvedImage:Eo};return M.type==="array"?Fo(L[M.value]||ua,M.length):L[M.type]}(s):void 0),E=h.parse(a,void 0,void 0,void 0,s&&s.type==="string"?{typeAnnotation:"coerce"}:void 0);return E?Vc(new Wc(E,s)):Gc(h.errors)}Wc.prototype.evaluateWithoutErrorHandling=function(a,s,h,E,M,L){return this._evaluator.globals=a,this._evaluator.feature=s,this._evaluator.featureState=h,this._evaluator.canonical=E,this._evaluator.availableImages=M||null,this._evaluator.formattedSection=L,this.expression.evaluate(this._evaluator)},Wc.prototype.evaluate=function(a,s,h,E,M,L){this._evaluator.globals=a,this._evaluator.feature=s||null,this._evaluator.featureState=h||null,this._evaluator.canonical=E,this._evaluator.availableImages=M||null,this._evaluator.formattedSection=L||null;try{var j=this.expression.evaluate(this._evaluator);if(j==null||typeof j=="number"&&j!=j)return this._defaultValue;if(this._enumValues&&!(j in this._enumValues))throw new Xs("Expected value to be one of "+Object.keys(this._enumValues).map(function(re){return JSON.stringify(re)}).join(", ")+", but found "+JSON.stringify(j)+" instead.");return j}catch(re){return this._warningHistory[re.message]||(this._warningHistory[re.message]=!0,typeof console!="undefined"&&console.warn(re.message)),this._defaultValue}};var kc=function(a,s){this.kind=a,this._styleExpression=s,this.isStateDependent=a!=="constant"&&!Vo(s.expression)};kc.prototype.evaluateWithoutErrorHandling=function(a,s,h,E,M,L){return this._styleExpression.evaluateWithoutErrorHandling(a,s,h,E,M,L)},kc.prototype.evaluate=function(a,s,h,E,M,L){return this._styleExpression.evaluate(a,s,h,E,M,L)};var oc=function(a,s,h,E){this.kind=a,this.zoomStops=h,this._styleExpression=s,this.isStateDependent=a!=="camera"&&!Vo(s.expression),this.interpolationType=E};function uf(a,s){if((a=hs(a,s)).result==="error")return a;var h=a.value.expression,E=lo(h);if(!E&&!ju(s))return Gc([new ni("","data expressions not supported")]);var M=gs(h,["zoom"]);if(!M&&!fp(s))return Gc([new ni("","zoom expressions not supported")]);var L=function j(re){var Ce=null;if(re instanceof Gr)Ce=j(re.result);else if(re instanceof lr)for(var ze=0,We=re.args;ze<We.length&&!(Ce=j(We[ze]));ze+=1);else(re instanceof Us||re instanceof Lt)&&re.input instanceof nu&&re.input.name==="zoom"&&(Ce=re);return Ce instanceof ni||re.eachChild(function(Je){var _t=j(Je);_t instanceof ni?Ce=_t:!Ce&&_t?Ce=new ni("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):Ce&&_t&&Ce!==_t&&(Ce=new ni("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),Ce}(h);return L||M?L instanceof ni?Gc([L]):L instanceof Lt&&!$l(s)?Gc([new ni("",'"interpolate" expressions cannot be used with this property')]):Vc(L?new oc(E?"camera":"composite",a.value,L.labels,L instanceof Lt?L.interpolation:void 0):new kc(E?"constant":"source",a.value)):Gc([new ni("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}oc.prototype.evaluateWithoutErrorHandling=function(a,s,h,E,M,L){return this._styleExpression.evaluateWithoutErrorHandling(a,s,h,E,M,L)},oc.prototype.evaluate=function(a,s,h,E,M,L){return this._styleExpression.evaluate(a,s,h,E,M,L)},oc.prototype.interpolationFactor=function(a,s,h){return this.interpolationType?Lt.interpolationFactor(this.interpolationType,a,s,h):0};var mc=function(a,s){this._parameters=a,this._specification=s,Jn(this,function h(E,M){var L,j,re,Ce=M.type==="color",ze=E.stops&&typeof E.stops[0][0]=="object",We=ze||!(ze||E.property!==void 0),Je=E.type||($l(M)?"exponential":"interval");if(Ce&&((E=Jn({},E)).stops&&(E.stops=E.stops.map(function(C){return[C[0],rr.parse(C[1])]})),E.default=rr.parse(E.default?E.default:M.default)),E.colorSpace&&E.colorSpace!=="rgb"&&!ct[E.colorSpace])throw new Error("Unknown color space: "+E.colorSpace);if(Je==="exponential")L=Kf;else if(Je==="interval")L=ah;else if(Je==="categorical"){L=Xl,j=Object.create(null);for(var _t=0,It=E.stops;_t<It.length;_t+=1){var ar=It[_t];j[ar[0]]=ar[1]}re=typeof E.stops[0][0]}else{if(Je!=="identity")throw new Error('Unknown function type "'+Je+'"');L=Ll}if(ze){for(var ur={},Rr=[],mr=0;mr<E.stops.length;mr++){var cn=E.stops[mr],wn=cn[0].zoom;ur[wn]===void 0&&(ur[wn]={zoom:wn,type:E.type,property:E.property,default:E.default,stops:[]},Rr.push(wn)),ur[wn].stops.push([cn[0].value,cn[1]])}for(var Gn=[],Zn=0,gi=Rr;Zn<gi.length;Zn+=1){var Yi=gi[Zn];Gn.push([ur[Yi].zoom,h(ur[Yi],M)])}var p={name:"linear"};return{kind:"composite",interpolationType:p,interpolationFactor:Lt.interpolationFactor.bind(void 0,p),zoomStops:Gn.map(function(C){return C[0]}),evaluate:function(C,V){var ae=C.zoom;return Kf({stops:Gn,base:E.base},M,ae).evaluate(ae,V)}}}if(We){var y=Je==="exponential"?{name:"exponential",base:E.base!==void 0?E.base:1}:null;return{kind:"camera",interpolationType:y,interpolationFactor:Lt.interpolationFactor.bind(void 0,y),zoomStops:E.stops.map(function(C){return C[0]}),evaluate:function(C){return L(E,M,C.zoom,j,re)}}}return{kind:"source",evaluate:function(C,V){var ae=V&&V.properties?V.properties[E.property]:void 0;return ae===void 0?Hc(E.default,M.default):L(E,M,ae,j,re)}}}(this._parameters,this._specification))};function ds(a){var s=a.key,h=a.value,E=a.valueSpec||{},M=a.objectElementValidators||{},L=a.style,j=a.styleSpec,re=[],Ce=Rs(h);if(Ce!=="object")return[new Ft(s,h,"object expected, "+Ce+" found")];for(var ze in h){var We=ze.split(".")[0],Je=E[We]||E["*"],_t=void 0;if(M[We])_t=M[We];else if(E[We])_t=da;else if(M["*"])_t=M["*"];else{if(!E["*"]){re.push(new Ft(s,h[ze],'unknown property "'+ze+'"'));continue}_t=da}re=re.concat(_t({key:(s&&s+".")+ze,value:h[ze],valueSpec:Je,style:L,styleSpec:j,object:h,objectKey:ze},h))}for(var It in E)M[It]||E[It].required&&E[It].default===void 0&&h[It]===void 0&&re.push(new Ft(s,h,'missing required property "'+It+'"'));return re}function sc(a){var s=a.value,h=a.valueSpec,E=a.style,M=a.styleSpec,L=a.key,j=a.arrayElementValidator||da;if(Rs(s)!=="array")return[new Ft(L,s,"array expected, "+Rs(s)+" found")];if(h.length&&s.length!==h.length)return[new Ft(L,s,"array length "+h.length+" expected, length "+s.length+" found")];if(h["min-length"]&&s.length<h["min-length"])return[new Ft(L,s,"array length at least "+h["min-length"]+" expected, length "+s.length+" found")];var re={type:h.value,values:h.values};M.$version<7&&(re.function=h.function),Rs(h.value)==="object"&&(re=h.value);for(var Ce=[],ze=0;ze<s.length;ze++)Ce=Ce.concat(j({array:s,arrayIndex:ze,value:s[ze],valueSpec:re,style:E,styleSpec:M,key:L+"["+ze+"]"}));return Ce}function vl(a){var s=a.key,h=a.value,E=a.valueSpec,M=Rs(h);return M==="number"&&h!=h&&(M="NaN"),M!=="number"?[new Ft(s,h,"number expected, "+M+" found")]:"minimum"in E&&h<E.minimum?[new Ft(s,h,h+" is less than the minimum value "+E.minimum)]:"maximum"in E&&h>E.maximum?[new Ft(s,h,h+" is greater than the maximum value "+E.maximum)]:[]}function pp(a){var s,h,E,M=a.valueSpec,L=yn(a.value.type),j={},re=L!=="categorical"&&a.value.property===void 0,Ce=!re,ze=Rs(a.value.stops)==="array"&&Rs(a.value.stops[0])==="array"&&Rs(a.value.stops[0][0])==="object",We=ds({key:a.key,value:a.value,valueSpec:a.styleSpec.function,style:a.style,styleSpec:a.styleSpec,objectElementValidators:{stops:function(It){if(L==="identity")return[new Ft(It.key,It.value,'identity function may not have a "stops" property')];var ar=[],ur=It.value;return ar=ar.concat(sc({key:It.key,value:ur,valueSpec:It.valueSpec,style:It.style,styleSpec:It.styleSpec,arrayElementValidator:Je})),Rs(ur)==="array"&&ur.length===0&&ar.push(new Ft(It.key,ur,"array must have at least one stop")),ar},default:function(It){return da({key:It.key,value:It.value,valueSpec:M,style:It.style,styleSpec:It.styleSpec})}}});return L==="identity"&&re&&We.push(new Ft(a.key,a.value,'missing required property "property"')),L==="identity"||a.value.stops||We.push(new Ft(a.key,a.value,'missing required property "stops"')),L==="exponential"&&a.valueSpec.expression&&!$l(a.valueSpec)&&We.push(new Ft(a.key,a.value,"exponential functions not supported")),a.styleSpec.$version>=8&&(Ce&&!ju(a.valueSpec)?We.push(new Ft(a.key,a.value,"property functions not supported")):re&&!fp(a.valueSpec)&&We.push(new Ft(a.key,a.value,"zoom functions not supported"))),L!=="categorical"&&!ze||a.value.property!==void 0||We.push(new Ft(a.key,a.value,'"property" property is required')),We;function Je(It){var ar=[],ur=It.value,Rr=It.key;if(Rs(ur)!=="array")return[new Ft(Rr,ur,"array expected, "+Rs(ur)+" found")];if(ur.length!==2)return[new Ft(Rr,ur,"array length 2 expected, length "+ur.length+" found")];if(ze){if(Rs(ur[0])!=="object")return[new Ft(Rr,ur,"object expected, "+Rs(ur[0])+" found")];if(ur[0].zoom===void 0)return[new Ft(Rr,ur,"object stop key must have zoom")];if(ur[0].value===void 0)return[new Ft(Rr,ur,"object stop key must have value")];if(E&&E>yn(ur[0].zoom))return[new Ft(Rr,ur[0].zoom,"stop zoom values must appear in ascending order")];yn(ur[0].zoom)!==E&&(E=yn(ur[0].zoom),h=void 0,j={}),ar=ar.concat(ds({key:Rr+"[0]",value:ur[0],valueSpec:{zoom:{}},style:It.style,styleSpec:It.styleSpec,objectElementValidators:{zoom:vl,value:_t}}))}else ar=ar.concat(_t({key:Rr+"[0]",value:ur[0],valueSpec:{},style:It.style,styleSpec:It.styleSpec},ur));return uu(tn(ur[1]))?ar.concat([new Ft(Rr+"[1]",ur[1],"expressions are not allowed in function stops.")]):ar.concat(da({key:Rr+"[1]",value:ur[1],valueSpec:M,style:It.style,styleSpec:It.styleSpec}))}function _t(It,ar){var ur=Rs(It.value),Rr=yn(It.value),mr=It.value!==null?It.value:ar;if(s){if(ur!==s)return[new Ft(It.key,mr,ur+" stop domain type must match previous stop domain type "+s)]}else s=ur;if(ur!=="number"&&ur!=="string"&&ur!=="boolean")return[new Ft(It.key,mr,"stop domain value must be a number, string, or boolean")];if(ur!=="number"&&L!=="categorical"){var cn="number expected, "+ur+" found";return ju(M)&&L===void 0&&(cn+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new Ft(It.key,mr,cn)]}return L!=="categorical"||ur!=="number"||isFinite(Rr)&&Math.floor(Rr)===Rr?L!=="categorical"&&ur==="number"&&h!==void 0&&Rr<h?[new Ft(It.key,mr,"stop domain values must appear in ascending order")]:(h=Rr,L==="categorical"&&Rr in j?[new Ft(It.key,mr,"stop domain values must be unique")]:(j[Rr]=!0,[])):[new Ft(It.key,mr,"integer expected, found "+Rr)]}}function Lc(a){var s=(a.expressionContext==="property"?uf:hs)(tn(a.value),a.valueSpec);if(s.result==="error")return s.value.map(function(E){return new Ft(""+a.key+E.key,a.value,E.message)});var h=s.value.expression||s.value._styleExpression.expression;if(a.expressionContext==="property"&&a.propertyKey==="text-font"&&!h.outputDefined())return[new Ft(a.key,a.value,'Invalid data expression for "'+a.propertyKey+'". Output values must be contained as literals within the expression.')];if(a.expressionContext==="property"&&a.propertyType==="layout"&&!Vo(h))return[new Ft(a.key,a.value,'"feature-state" data expressions are not supported with layout properties.')];if(a.expressionContext==="filter"&&!Vo(h))return[new Ft(a.key,a.value,'"feature-state" data expressions are not supported with filters.')];if(a.expressionContext&&a.expressionContext.indexOf("cluster")===0){if(!gs(h,["zoom","feature-state"]))return[new Ft(a.key,a.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(a.expressionContext==="cluster-initial"&&!lo(h))return[new Ft(a.key,a.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function uc(a){var s=a.key,h=a.value,E=a.valueSpec,M=[];return Array.isArray(E.values)?E.values.indexOf(yn(h))===-1&&M.push(new Ft(s,h,"expected one of ["+E.values.join(", ")+"], "+JSON.stringify(h)+" found")):Object.keys(E.values).indexOf(yn(h))===-1&&M.push(new Ft(s,h,"expected one of ["+Object.keys(E.values).join(", ")+"], "+JSON.stringify(h)+" found")),M}function Qf(a){if(a===!0||a===!1)return!0;if(!Array.isArray(a)||a.length===0)return!1;switch(a[0]){case"has":return a.length>=2&&a[1]!=="$id"&&a[1]!=="$type";case"in":return a.length>=3&&(typeof a[1]!="string"||Array.isArray(a[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return a.length!==3||Array.isArray(a[1])||Array.isArray(a[2]);case"any":case"all":for(var s=0,h=a.slice(1);s<h.length;s+=1){var E=h[s];if(!Qf(E)&&typeof E!="boolean")return!1}return!0;default:return!0}}mc.deserialize=function(a){return new mc(a._parameters,a._specification)},mc.serialize=function(a){return{_parameters:a._parameters,_specification:a._specification}};var Yl={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function Dc(a){if(a==null)return{filter:function(){return!0},needGeometry:!1};Qf(a)||(a=gc(a));var s=hs(a,Yl);if(s.result==="error")throw new Error(s.value.map(function(h){return h.key+": "+h.message}).join(", "));return{filter:function(h,E,M){return s.value.evaluate(h,E,{},M)},needGeometry:function h(E){if(!Array.isArray(E))return!1;if(E[0]==="within")return!0;for(var M=1;M<E.length;M++)if(h(E[M]))return!0;return!1}(a)}}function Jf(a,s){return a<s?-1:a>s?1:0}function gc(a){if(!a)return!0;var s,h=a[0];return a.length<=1?h!=="any":h==="=="?$c(a[1],a[2],"=="):h==="!="?Ql($c(a[1],a[2],"==")):h==="<"||h===">"||h==="<="||h===">="?$c(a[1],a[2],h):h==="any"?(s=a.slice(1),["any"].concat(s.map(gc))):h==="all"?["all"].concat(a.slice(1).map(gc)):h==="none"?["all"].concat(a.slice(1).map(gc).map(Ql)):h==="in"?Fc(a[1],a.slice(2)):h==="!in"?Ql(Fc(a[1],a.slice(2))):h==="has"?Kl(a[1]):h==="!has"?Ql(Kl(a[1])):h!=="within"||a}function $c(a,s,h){switch(a){case"$type":return["filter-type-"+h,s];case"$id":return["filter-id-"+h,s];default:return["filter-"+h,a,s]}}function Fc(a,s){if(s.length===0)return!1;switch(a){case"$type":return["filter-type-in",["literal",s]];case"$id":return["filter-id-in",["literal",s]];default:return s.length>200&&!s.some(function(h){return typeof h!=typeof s[0]})?["filter-in-large",a,["literal",s.sort(Jf)]]:["filter-in-small",a,["literal",s]]}}function Kl(a){switch(a){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",a]}}function Ql(a){return["!",a]}function Uf(a){return Qf(tn(a.value))?Lc(Jn({},a,{expressionContext:"filter",valueSpec:{value:"boolean"}})):function s(h){var E=h.value,M=h.key;if(Rs(E)!=="array")return[new Ft(M,E,"array expected, "+Rs(E)+" found")];var L,j=h.styleSpec,re=[];if(E.length<1)return[new Ft(M,E,"filter array must have at least 1 element")];switch(re=re.concat(uc({key:M+"[0]",value:E[0],valueSpec:j.filter_operator,style:h.style,styleSpec:h.styleSpec})),yn(E[0])){case"<":case"<=":case">":case">=":E.length>=2&&yn(E[1])==="$type"&&re.push(new Ft(M,E,'"$type" cannot be use with operator "'+E[0]+'"'));case"==":case"!=":E.length!==3&&re.push(new Ft(M,E,'filter array for operator "'+E[0]+'" must have 3 elements'));case"in":case"!in":E.length>=2&&(L=Rs(E[1]))!=="string"&&re.push(new Ft(M+"[1]",E[1],"string expected, "+L+" found"));for(var Ce=2;Ce<E.length;Ce++)L=Rs(E[Ce]),yn(E[1])==="$type"?re=re.concat(uc({key:M+"["+Ce+"]",value:E[Ce],valueSpec:j.geometry_type,style:h.style,styleSpec:h.styleSpec})):L!=="string"&&L!=="number"&&L!=="boolean"&&re.push(new Ft(M+"["+Ce+"]",E[Ce],"string, number, or boolean expected, "+L+" found"));break;case"any":case"all":case"none":for(var ze=1;ze<E.length;ze++)re=re.concat(s({key:M+"["+ze+"]",value:E[ze],style:h.style,styleSpec:h.styleSpec}));break;case"has":case"!has":L=Rs(E[1]),E.length!==2?re.push(new Ft(M,E,'filter array for "'+E[0]+'" operator must have 2 elements')):L!=="string"&&re.push(new Ft(M+"[1]",E[1],"string expected, "+L+" found"));break;case"within":L=Rs(E[1]),E.length!==2?re.push(new Ft(M,E,'filter array for "'+E[0]+'" operator must have 2 elements')):L!=="object"&&re.push(new Ft(M+"[1]",E[1],"object expected, "+L+" found"))}return re}(a)}function qf(a,s){var h=a.key,E=a.style,M=a.styleSpec,L=a.value,j=a.objectKey,re=M[s+"_"+a.layerType];if(!re)return[];var Ce=j.match(/^(.*)-transition$/);if(s==="paint"&&Ce&&re[Ce[1]]&&re[Ce[1]].transition)return da({key:h,value:L,valueSpec:M.transition,style:E,styleSpec:M});var ze,We=a.valueSpec||re[j];if(!We)return[new Ft(h,L,'unknown property "'+j+'"')];if(Rs(L)==="string"&&ju(We)&&!We.tokens&&(ze=/^{([^}]+)}$/.exec(L)))return[new Ft(h,L,'"'+j+'" does not support interpolation syntax\nUse an identity property function instead: `{ "type": "identity", "property": '+JSON.stringify(ze[1])+" }`.")];var Je=[];return a.layerType==="symbol"&&(j==="text-field"&&E&&!E.glyphs&&Je.push(new Ft(h,L,'use of "text-field" requires a style "glyphs" property')),j==="text-font"&&Ml(tn(L))&&yn(L.type)==="identity"&&Je.push(new Ft(h,L,'"text-font" does not support identity functions'))),Je.concat(da({key:a.key,value:L,valueSpec:We,style:E,styleSpec:M,expressionContext:"property",propertyType:s,propertyKey:j}))}function ep(a){return qf(a,"paint")}function qu(a){return qf(a,"layout")}function Zf(a){var s=[],h=a.value,E=a.key,M=a.style,L=a.styleSpec;h.type||h.ref||s.push(new Ft(E,h,'either "type" or "ref" is required'));var j,re=yn(h.type),Ce=yn(h.ref);if(h.id)for(var ze=yn(h.id),We=0;We<a.arrayIndex;We++){var Je=M.layers[We];yn(Je.id)===ze&&s.push(new Ft(E,h.id,'duplicate layer id "'+h.id+'", previously used at line '+Je.id.__line__))}if("ref"in h)["type","source","source-layer","filter","layout"].forEach(function(ar){ar in h&&s.push(new Ft(E,h[ar],'"'+ar+'" is prohibited for ref layers'))}),M.layers.forEach(function(ar){yn(ar.id)===Ce&&(j=ar)}),j?j.ref?s.push(new Ft(E,h.ref,"ref cannot reference another ref layer")):re=yn(j.type):s.push(new Ft(E,h.ref,'ref layer "'+Ce+'" not found'));else if(re!=="background")if(h.source){var _t=M.sources&&M.sources[h.source],It=_t&&yn(_t.type);_t?It==="vector"&&re==="raster"?s.push(new Ft(E,h.source,'layer "'+h.id+'" requires a raster source')):It==="raster"&&re!=="raster"?s.push(new Ft(E,h.source,'layer "'+h.id+'" requires a vector source')):It!=="vector"||h["source-layer"]?It==="raster-dem"&&re!=="hillshade"?s.push(new Ft(E,h.source,"raster-dem source can only be used with layer type 'hillshade'.")):re!=="line"||!h.paint||!h.paint["line-gradient"]||It==="geojson"&&_t.lineMetrics||s.push(new Ft(E,h,'layer "'+h.id+'" specifies a line-gradient, which requires a GeoJSON source with `lineMetrics` enabled.')):s.push(new Ft(E,h,'layer "'+h.id+'" must specify a "source-layer"')):s.push(new Ft(E,h.source,'source "'+h.source+'" not found'))}else s.push(new Ft(E,h,'missing required property "source"'));return s=s.concat(ds({key:E,value:h,valueSpec:L.layer,style:a.style,styleSpec:a.styleSpec,objectElementValidators:{"*":function(){return[]},type:function(){return da({key:E+".type",value:h.type,valueSpec:L.layer.type,style:a.style,styleSpec:a.styleSpec,object:h,objectKey:"type"})},filter:Uf,layout:function(ar){return ds({layer:h,key:ar.key,value:ar.value,style:ar.style,styleSpec:ar.styleSpec,objectElementValidators:{"*":function(ur){return qu(Jn({layerType:re},ur))}}})},paint:function(ar){return ds({layer:h,key:ar.key,value:ar.value,style:ar.style,styleSpec:ar.styleSpec,objectElementValidators:{"*":function(ur){return ep(Jn({layerType:re},ur))}}})}}}))}function vs(a){var s=a.value,h=a.key,E=Rs(s);return E!=="string"?[new Ft(h,s,"string expected, "+E+" found")]:[]}var Kr={promoteId:function(a){var s=a.key,h=a.value;if(Rs(h)==="string")return vs({key:s,value:h});var E=[];for(var M in h)E.push.apply(E,vs({key:s+"."+M,value:h[M]}));return E}};function vi(a){var s=a.value,h=a.key,E=a.styleSpec,M=a.style;if(!s.type)return[new Ft(h,s,'"type" is required')];var L,j=yn(s.type);switch(j){case"vector":case"raster":case"raster-dem":return ds({key:h,value:s,valueSpec:E["source_"+j.replace("-","_")],style:a.style,styleSpec:E,objectElementValidators:Kr});case"geojson":if(L=ds({key:h,value:s,valueSpec:E.source_geojson,style:M,styleSpec:E,objectElementValidators:Kr}),s.cluster)for(var re in s.clusterProperties){var Ce=s.clusterProperties[re],ze=Ce[0],We=typeof ze=="string"?[ze,["accumulated"],["get",re]]:ze;L.push.apply(L,Lc({key:h+"."+re+".map",value:Ce[1],expressionContext:"cluster-map"})),L.push.apply(L,Lc({key:h+"."+re+".reduce",value:We,expressionContext:"cluster-reduce"}))}return L;case"video":return ds({key:h,value:s,valueSpec:E.source_video,style:M,styleSpec:E});case"image":return ds({key:h,value:s,valueSpec:E.source_image,style:M,styleSpec:E});case"canvas":return[new Ft(h,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return uc({key:h+".type",value:s.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:M,styleSpec:E})}}function ei(a){var s=a.value,h=a.styleSpec,E=h.light,M=a.style,L=[],j=Rs(s);if(s===void 0)return L;if(j!=="object")return L.concat([new Ft("light",s,"object expected, "+j+" found")]);for(var re in s){var Ce=re.match(/^(.*)-transition$/);L=L.concat(Ce&&E[Ce[1]]&&E[Ce[1]].transition?da({key:re,value:s[re],valueSpec:h.transition,style:M,styleSpec:h}):E[re]?da({key:re,value:s[re],valueSpec:E[re],style:M,styleSpec:h}):[new Ft(re,s[re],'unknown property "'+re+'"')])}return L}var xi={"*":function(){return[]},array:sc,boolean:function(a){var s=a.value,h=a.key,E=Rs(s);return E!=="boolean"?[new Ft(h,s,"boolean expected, "+E+" found")]:[]},number:vl,color:function(a){var s=a.key,h=a.value,E=Rs(h);return E!=="string"?[new Ft(s,h,"color expected, "+E+" found")]:jn(h)===null?[new Ft(s,h,'color expected, "'+h+'" found')]:[]},constants:zr,enum:uc,filter:Uf,function:pp,layer:Zf,object:ds,source:vi,light:ei,string:vs,formatted:function(a){return vs(a).length===0?[]:Lc(a)},resolvedImage:function(a){return vs(a).length===0?[]:Lc(a)}};function da(a){var s=a.value,h=a.valueSpec,E=a.styleSpec;return h.expression&&Ml(yn(s))?pp(a):h.expression&&uu(tn(s))?Lc(a):h.type&&xi[h.type]?xi[h.type](a):ds(Jn({},a,{valueSpec:h.type?E[h.type]:h}))}function uo(a){var s=a.value,h=a.key,E=vs(a);return E.length||(s.indexOf("{fontstack}")===-1&&E.push(new Ft(h,s,'"glyphs" url must include a "{fontstack}" token')),s.indexOf("{range}")===-1&&E.push(new Ft(h,s,'"glyphs" url must include a "{range}" token'))),E}function Ua(a,s){s===void 0&&(s=bt);var h=[];return h=h.concat(da({key:"",value:a,valueSpec:s.$root,styleSpec:s,style:a,objectElementValidators:{glyphs:uo,"*":function(){return[]}}})),a.constants&&(h=h.concat(zr({key:"constants",value:a.constants,style:a,styleSpec:s}))),ns(h)}function ns(a){return[].concat(a).sort(function(s,h){return s.line-h.line})}function Vu(a){return function(){for(var s=[],h=arguments.length;h--;)s[h]=arguments[h];return ns(a.apply(this,s))}}Ua.source=Vu(vi),Ua.light=Vu(ei),Ua.layer=Vu(Zf),Ua.filter=Vu(Uf),Ua.paintProperty=Vu(ep),Ua.layoutProperty=Vu(qu);var lc=Ua,yc=lc.light,tp=lc.paintProperty,_c=lc.layoutProperty;function Jl(a,s){var h=!1;if(s&&s.length)for(var E=0,M=s;E<M.length;E+=1)a.fire(new Zt(new Error(M[E].message))),h=!0;return h}var ml=lu;function lu(a,s,h){var E=this.cells=[];if(a instanceof ArrayBuffer){this.arrayBuffer=a;var M=new Int32Array(this.arrayBuffer);a=M[0],this.d=(s=M[1])+2*(h=M[2]);for(var L=0;L<this.d*this.d;L++){var j=M[3+L],re=M[3+L+1];E.push(j===re?null:M.subarray(j,re))}var Ce=M[3+E.length+1];this.keys=M.subarray(M[3+E.length],Ce),this.bboxes=M.subarray(Ce),this.insert=this._insertReadonly}else{this.d=s+2*h;for(var ze=0;ze<this.d*this.d;ze++)E.push([]);this.keys=[],this.bboxes=[]}this.n=s,this.extent=a,this.padding=h,this.scale=s/a,this.uid=0;var We=h/s*a;this.min=-We,this.max=a+We}lu.prototype.insert=function(a,s,h,E,M){this._forEachCell(s,h,E,M,this._insertCell,this.uid++),this.keys.push(a),this.bboxes.push(s),this.bboxes.push(h),this.bboxes.push(E),this.bboxes.push(M)},lu.prototype._insertReadonly=function(){throw"Cannot insert into a GridIndex created from an ArrayBuffer."},lu.prototype._insertCell=function(a,s,h,E,M,L){this.cells[M].push(L)},lu.prototype.query=function(a,s,h,E,M){var L=this.min,j=this.max;if(a<=L&&s<=L&&j<=h&&j<=E&&!M)return Array.prototype.slice.call(this.keys);var re=[];return this._forEachCell(a,s,h,E,this._queryCell,re,{},M),re},lu.prototype._queryCell=function(a,s,h,E,M,L,j,re){var Ce=this.cells[M];if(Ce!==null)for(var ze=this.keys,We=this.bboxes,Je=0;Je<Ce.length;Je++){var _t=Ce[Je];if(j[_t]===void 0){var It=4*_t;(re?re(We[It+0],We[It+1],We[It+2],We[It+3]):a<=We[It+2]&&s<=We[It+3]&&h>=We[It+0]&&E>=We[It+1])?(j[_t]=!0,L.push(ze[_t])):j[_t]=!1}}},lu.prototype._forEachCell=function(a,s,h,E,M,L,j,re){for(var Ce=this._convertToCellCoord(a),ze=this._convertToCellCoord(s),We=this._convertToCellCoord(h),Je=this._convertToCellCoord(E),_t=Ce;_t<=We;_t++)for(var It=ze;It<=Je;It++){var ar=this.d*It+_t;if((!re||re(this._convertFromCellCoord(_t),this._convertFromCellCoord(It),this._convertFromCellCoord(_t+1),this._convertFromCellCoord(It+1)))&&M.call(this,a,s,h,E,ar,L,j,re))return}},lu.prototype._convertFromCellCoord=function(a){return(a-this.padding)/this.scale},lu.prototype._convertToCellCoord=function(a){return Math.max(0,Math.min(this.d-1,Math.floor(a*this.scale)+this.padding))},lu.prototype.toArrayBuffer=function(){if(this.arrayBuffer)return this.arrayBuffer;for(var a=this.cells,s=3+this.cells.length+1+1,h=0,E=0;E<this.cells.length;E++)h+=this.cells[E].length;var M=new Int32Array(s+h+this.keys.length+this.bboxes.length);M[0]=this.extent,M[1]=this.n,M[2]=this.padding;for(var L=s,j=0;j<a.length;j++){var re=a[j];M[3+j]=L,M.set(re,L),L+=re.length}return M[3+a.length]=L,M.set(this.keys,L),M[3+a.length+1]=L+=this.keys.length,M.set(this.bboxes,L),L+=this.bboxes.length,M.buffer};var _s=z.ImageData,jf=z.ImageBitmap,qs={};function ji(a,s,h){h===void 0&&(h={}),Object.defineProperty(s,"_classRegistryKey",{value:a,writeable:!1}),qs[a]={klass:s,omit:h.omit||[],shallow:h.shallow||[]}}for(var Gs in ji("Object",Object),ml.serialize=function(a,s){var h=a.toArrayBuffer();return s&&s.push(h),{buffer:h}},ml.deserialize=function(a){return new ml(a.buffer)},ji("Grid",ml),ji("Color",rr),ji("Error",Error),ji("ResolvedImage",Es),ji("StylePropertyFunction",mc),ji("StyleExpression",Wc,{omit:["_evaluator"]}),ji("ZoomDependentExpression",oc),ji("ZoomConstantExpression",kc),ji("CompoundExpression",nu,{omit:["_evaluate"]}),jc)jc[Gs]._classRegistryKey||ji("Expression_"+Gs,jc[Gs]);function ql(a){return a&&typeof ArrayBuffer!="undefined"&&(a instanceof ArrayBuffer||a.constructor&&a.constructor.name==="ArrayBuffer")}function Xc(a){return jf&&a instanceof jf}function Il(a,s){if(a==null||typeof a=="boolean"||typeof a=="number"||typeof a=="string"||a instanceof Boolean||a instanceof Number||a instanceof String||a instanceof Date||a instanceof RegExp)return a;if(ql(a)||Xc(a))return s&&s.push(a),a;if(ArrayBuffer.isView(a)){var h=a;return s&&s.push(h.buffer),h}if(a instanceof _s)return s&&s.push(a.data.buffer),a;if(Array.isArray(a)){for(var E=[],M=0,L=a;M<L.length;M+=1)E.push(Il(L[M],s));return E}if(typeof a=="object"){var j=a.constructor,re=j._classRegistryKey;if(!re)throw new Error("can't serialize object of unregistered class");var Ce=j.serialize?j.serialize(a,s):{};if(!j.serialize){for(var ze in a)if(a.hasOwnProperty(ze)&&!(qs[re].omit.indexOf(ze)>=0)){var We=a[ze];Ce[ze]=qs[re].shallow.indexOf(ze)>=0?We:Il(We,s)}a instanceof Error&&(Ce.message=a.message)}if(Ce.$name)throw new Error("$name property is reserved for worker serialization logic.");return re!=="Object"&&(Ce.$name=re),Ce}throw new Error("can't serialize object of type "+typeof a)}function ku(a){if(a==null||typeof a=="boolean"||typeof a=="number"||typeof a=="string"||a instanceof Boolean||a instanceof Number||a instanceof String||a instanceof Date||a instanceof RegExp||ql(a)||Xc(a)||ArrayBuffer.isView(a)||a instanceof _s)return a;if(Array.isArray(a))return a.map(ku);if(typeof a=="object"){var s=a.$name||"Object",h=qs[s].klass;if(!h)throw new Error("can't deserialize unregistered class "+s);if(h.deserialize)return h.deserialize(a);for(var E=Object.create(h.prototype),M=0,L=Object.keys(a);M<L.length;M+=1){var j=L[M];if(j!=="$name"){var re=a[j];E[j]=qs[s].shallow.indexOf(j)>=0?re:ku(re)}}return E}throw new Error("can't deserialize object of type "+typeof a)}var ec=function(){this.first=!0};ec.prototype.update=function(a,s){var h=Math.floor(a);return this.first?(this.first=!1,this.lastIntegerZoom=h,this.lastIntegerZoomTime=0,this.lastZoom=a,this.lastFloorZoom=h,!0):(this.lastFloorZoom>h?(this.lastIntegerZoom=h+1,this.lastIntegerZoomTime=s):this.lastFloorZoom<h&&(this.lastIntegerZoom=h,this.lastIntegerZoomTime=s),a!==this.lastZoom&&(this.lastZoom=a,this.lastFloorZoom=h,!0))};var ia={"Latin-1 Supplement":function(a){return a>=128&&a<=255},Arabic:function(a){return a>=1536&&a<=1791},"Arabic Supplement":function(a){return a>=1872&&a<=1919},"Arabic Extended-A":function(a){return a>=2208&&a<=2303},"Hangul Jamo":function(a){return a>=4352&&a<=4607},"Unified Canadian Aboriginal Syllabics":function(a){return a>=5120&&a<=5759},Khmer:function(a){return a>=6016&&a<=6143},"Unified Canadian Aboriginal Syllabics Extended":function(a){return a>=6320&&a<=6399},"General Punctuation":function(a){return a>=8192&&a<=8303},"Letterlike Symbols":function(a){return a>=8448&&a<=8527},"Number Forms":function(a){return a>=8528&&a<=8591},"Miscellaneous Technical":function(a){return a>=8960&&a<=9215},"Control Pictures":function(a){return a>=9216&&a<=9279},"Optical Character Recognition":function(a){return a>=9280&&a<=9311},"Enclosed Alphanumerics":function(a){return a>=9312&&a<=9471},"Geometric Shapes":function(a){return a>=9632&&a<=9727},"Miscellaneous Symbols":function(a){return a>=9728&&a<=9983},"Miscellaneous Symbols and Arrows":function(a){return a>=11008&&a<=11263},"CJK Radicals Supplement":function(a){return a>=11904&&a<=12031},"Kangxi Radicals":function(a){return a>=12032&&a<=12255},"Ideographic Description Characters":function(a){return a>=12272&&a<=12287},"CJK Symbols and Punctuation":function(a){return a>=12288&&a<=12351},Hiragana:function(a){return a>=12352&&a<=12447},Katakana:function(a){return a>=12448&&a<=12543},Bopomofo:function(a){return a>=12544&&a<=12591},"Hangul Compatibility Jamo":function(a){return a>=12592&&a<=12687},Kanbun:function(a){return a>=12688&&a<=12703},"Bopomofo Extended":function(a){return a>=12704&&a<=12735},"CJK Strokes":function(a){return a>=12736&&a<=12783},"Katakana Phonetic Extensions":function(a){return a>=12784&&a<=12799},"Enclosed CJK Letters and Months":function(a){return a>=12800&&a<=13055},"CJK Compatibility":function(a){return a>=13056&&a<=13311},"CJK Unified Ideographs Extension A":function(a){return a>=13312&&a<=19903},"Yijing Hexagram Symbols":function(a){return a>=19904&&a<=19967},"CJK Unified Ideographs":function(a){return a>=19968&&a<=40959},"Yi Syllables":function(a){return a>=40960&&a<=42127},"Yi Radicals":function(a){return a>=42128&&a<=42191},"Hangul Jamo Extended-A":function(a){return a>=43360&&a<=43391},"Hangul Syllables":function(a){return a>=44032&&a<=55215},"Hangul Jamo Extended-B":function(a){return a>=55216&&a<=55295},"Private Use Area":function(a){return a>=57344&&a<=63743},"CJK Compatibility Ideographs":function(a){return a>=63744&&a<=64255},"Arabic Presentation Forms-A":function(a){return a>=64336&&a<=65023},"Vertical Forms":function(a){return a>=65040&&a<=65055},"CJK Compatibility Forms":function(a){return a>=65072&&a<=65103},"Small Form Variants":function(a){return a>=65104&&a<=65135},"Arabic Presentation Forms-B":function(a){return a>=65136&&a<=65279},"Halfwidth and Fullwidth Forms":function(a){return a>=65280&&a<=65519}};function lf(a){for(var s=0,h=a;s<h.length;s+=1)if(xc(h[s].charCodeAt(0)))return!0;return!1}function xc(a){return!(a!==746&&a!==747&&(a<4352||!(ia["Bopomofo Extended"](a)||ia.Bopomofo(a)||ia["CJK Compatibility Forms"](a)&&!(a>=65097&&a<=65103)||ia["CJK Compatibility Ideographs"](a)||ia["CJK Compatibility"](a)||ia["CJK Radicals Supplement"](a)||ia["CJK Strokes"](a)||!(!ia["CJK Symbols and Punctuation"](a)||a>=12296&&a<=12305||a>=12308&&a<=12319||a===12336)||ia["CJK Unified Ideographs Extension A"](a)||ia["CJK Unified Ideographs"](a)||ia["Enclosed CJK Letters and Months"](a)||ia["Hangul Compatibility Jamo"](a)||ia["Hangul Jamo Extended-A"](a)||ia["Hangul Jamo Extended-B"](a)||ia["Hangul Jamo"](a)||ia["Hangul Syllables"](a)||ia.Hiragana(a)||ia["Ideographic Description Characters"](a)||ia.Kanbun(a)||ia["Kangxi Radicals"](a)||ia["Katakana Phonetic Extensions"](a)||ia.Katakana(a)&&a!==12540||!(!ia["Halfwidth and Fullwidth Forms"](a)||a===65288||a===65289||a===65293||a>=65306&&a<=65310||a===65339||a===65341||a===65343||a>=65371&&a<=65503||a===65507||a>=65512&&a<=65519)||!(!ia["Small Form Variants"](a)||a>=65112&&a<=65118||a>=65123&&a<=65126)||ia["Unified Canadian Aboriginal Syllabics"](a)||ia["Unified Canadian Aboriginal Syllabics Extended"](a)||ia["Vertical Forms"](a)||ia["Yijing Hexagram Symbols"](a)||ia["Yi Syllables"](a)||ia["Yi Radicals"](a))))}function cc(a){return!(xc(a)||function(s){return!!(ia["Latin-1 Supplement"](s)&&(s===167||s===169||s===174||s===177||s===188||s===189||s===190||s===215||s===247)||ia["General Punctuation"](s)&&(s===8214||s===8224||s===8225||s===8240||s===8241||s===8251||s===8252||s===8258||s===8263||s===8264||s===8265||s===8273)||ia["Letterlike Symbols"](s)||ia["Number Forms"](s)||ia["Miscellaneous Technical"](s)&&(s>=8960&&s<=8967||s>=8972&&s<=8991||s>=8996&&s<=9e3||s===9003||s>=9085&&s<=9114||s>=9150&&s<=9165||s===9167||s>=9169&&s<=9179||s>=9186&&s<=9215)||ia["Control Pictures"](s)&&s!==9251||ia["Optical Character Recognition"](s)||ia["Enclosed Alphanumerics"](s)||ia["Geometric Shapes"](s)||ia["Miscellaneous Symbols"](s)&&!(s>=9754&&s<=9759)||ia["Miscellaneous Symbols and Arrows"](s)&&(s>=11026&&s<=11055||s>=11088&&s<=11097||s>=11192&&s<=11243)||ia["CJK Symbols and Punctuation"](s)||ia.Katakana(s)||ia["Private Use Area"](s)||ia["CJK Compatibility Forms"](s)||ia["Small Form Variants"](s)||ia["Halfwidth and Fullwidth Forms"](s)||s===8734||s===8756||s===8757||s>=9984&&s<=10087||s>=10102&&s<=10131||s===65532||s===65533)}(a))}function Ps(a){return a>=1424&&a<=2303||ia["Arabic Presentation Forms-A"](a)||ia["Arabic Presentation Forms-B"](a)}function ol(a,s){return!(!s&&Ps(a)||a>=2304&&a<=3583||a>=3840&&a<=4255||ia.Khmer(a))}function Yc(a){for(var s=0,h=a;s<h.length;s+=1)if(Ps(h[s].charCodeAt(0)))return!0;return!1}var Eu=null,el="unavailable",bc=null,Vf=function(a){a&&typeof a=="string"&&a.indexOf("NetworkError")>-1&&(el="error"),Eu&&Eu(a)};function qr(){ri.fire(new Et("pluginStateChange",{pluginStatus:el,pluginURL:bc}))}var ri=new sr,Kn=function(){return el},Vn=function(){if(el!=="deferred"||!bc)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");el="loading",qr(),bc&&ka({url:bc},function(a){a?Vf(a):(el="loaded",qr())})},Ri={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:function(){return el==="loaded"||Ri.applyArabicShaping!=null},isLoading:function(){return el==="loading"},setState:function(a){el=a.pluginStatus,bc=a.pluginURL},isParsed:function(){return Ri.applyArabicShaping!=null&&Ri.processBidirectionalText!=null&&Ri.processStyledBidirectionalText!=null},getPluginURL:function(){return bc}},li=function(a,s){this.zoom=a,s?(this.now=s.now,this.fadeDuration=s.fadeDuration,this.zoomHistory=s.zoomHistory,this.transition=s.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new ec,this.transition={})};li.prototype.isSupportedScript=function(a){return function(s,h){for(var E=0,M=s;E<M.length;E+=1)if(!ol(M[E].charCodeAt(0),h))return!1;return!0}(a,Ri.isLoaded())},li.prototype.crossFadingFactor=function(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)},li.prototype.getCrossfadeParameters=function(){var a=this.zoom,s=a-Math.floor(a),h=this.crossFadingFactor();return a>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:s+(1-s)*h}:{fromScale:.5,toScale:1,t:1-(1-h)*s}};var ga=function(a,s){this.property=a,this.value=s,this.expression=function(h,E){if(Ml(h))return new mc(h,E);if(uu(h)){var M=uf(h,E);if(M.result==="error")throw new Error(M.value.map(function(j){return j.key+": "+j.message}).join(", "));return M.value}var L=h;return typeof h=="string"&&E.type==="color"&&(L=rr.parse(h)),{kind:"constant",evaluate:function(){return L}}}(s===void 0?a.specification.default:s,a.specification)};ga.prototype.isDataDriven=function(){return this.expression.kind==="source"||this.expression.kind==="composite"},ga.prototype.possiblyEvaluate=function(a,s,h){return this.property.possiblyEvaluate(this,a,s,h)};var Ka=function(a){this.property=a,this.value=new ga(a,void 0)};Ka.prototype.transitioned=function(a,s){return new Bo(this.property,this.value,s,be({},a.transition,this.transition),a.now)},Ka.prototype.untransitioned=function(){return new Bo(this.property,this.value,null,{},0)};var Ma=function(a){this._properties=a,this._values=Object.create(a.defaultTransitionablePropertyValues)};Ma.prototype.getValue=function(a){return Me(this._values[a].value.value)},Ma.prototype.setValue=function(a,s){this._values.hasOwnProperty(a)||(this._values[a]=new Ka(this._values[a].property)),this._values[a].value=new ga(this._values[a].property,s===null?void 0:Me(s))},Ma.prototype.getTransition=function(a){return Me(this._values[a].transition)},Ma.prototype.setTransition=function(a,s){this._values.hasOwnProperty(a)||(this._values[a]=new Ka(this._values[a].property)),this._values[a].transition=Me(s)||void 0},Ma.prototype.serialize=function(){for(var a={},s=0,h=Object.keys(this._values);s<h.length;s+=1){var E=h[s],M=this.getValue(E);M!==void 0&&(a[E]=M);var L=this.getTransition(E);L!==void 0&&(a[E+"-transition"]=L)}return a},Ma.prototype.transitioned=function(a,s){for(var h=new As(this._properties),E=0,M=Object.keys(this._values);E<M.length;E+=1){var L=M[E];h._values[L]=this._values[L].transitioned(a,s._values[L])}return h},Ma.prototype.untransitioned=function(){for(var a=new As(this._properties),s=0,h=Object.keys(this._values);s<h.length;s+=1){var E=h[s];a._values[E]=this._values[E].untransitioned()}return a};var Bo=function(a,s,h,E,M){this.property=a,this.value=s,this.begin=M+E.delay||0,this.end=this.begin+E.duration||0,a.specification.transition&&(E.delay||E.duration)&&(this.prior=h)};Bo.prototype.possiblyEvaluate=function(a,s,h){var E=a.now||0,M=this.value.possiblyEvaluate(a,s,h),L=this.prior;if(L){if(E>this.end)return this.prior=null,M;if(this.value.isDataDriven())return this.prior=null,M;if(E<this.begin)return L.possiblyEvaluate(a,s,h);var j=(E-this.begin)/(this.end-this.begin);return this.property.interpolate(L.possiblyEvaluate(a,s,h),M,function(re){if(re<=0)return 0;if(re>=1)return 1;var Ce=re*re,ze=Ce*re;return 4*(re<.5?ze:3*(re-Ce)+ze-.75)}(j))}return M};var As=function(a){this._properties=a,this._values=Object.create(a.defaultTransitioningPropertyValues)};As.prototype.possiblyEvaluate=function(a,s,h){for(var E=new tl(this._properties),M=0,L=Object.keys(this._values);M<L.length;M+=1){var j=L[M];E._values[j]=this._values[j].possiblyEvaluate(a,s,h)}return E},As.prototype.hasTransition=function(){for(var a=0,s=Object.keys(this._values);a<s.length;a+=1)if(this._values[s[a]].prior)return!0;return!1};var Su=function(a){this._properties=a,this._values=Object.create(a.defaultPropertyValues)};Su.prototype.getValue=function(a){return Me(this._values[a].value)},Su.prototype.setValue=function(a,s){this._values[a]=new ga(this._values[a].property,s===null?void 0:Me(s))},Su.prototype.serialize=function(){for(var a={},s=0,h=Object.keys(this._values);s<h.length;s+=1){var E=h[s],M=this.getValue(E);M!==void 0&&(a[E]=M)}return a},Su.prototype.possiblyEvaluate=function(a,s,h){for(var E=new tl(this._properties),M=0,L=Object.keys(this._values);M<L.length;M+=1){var j=L[M];E._values[j]=this._values[j].possiblyEvaluate(a,s,h)}return E};var cu=function(a,s,h){this.property=a,this.value=s,this.parameters=h};cu.prototype.isConstant=function(){return this.value.kind==="constant"},cu.prototype.constantOr=function(a){return this.value.kind==="constant"?this.value.value:a},cu.prototype.evaluate=function(a,s,h,E){return this.property.evaluate(this.value,this.parameters,a,s,h,E)};var tl=function(a){this._properties=a,this._values=Object.create(a.defaultPossiblyEvaluatedValues)};tl.prototype.get=function(a){return this._values[a]};var Pa=function(a){this.specification=a};Pa.prototype.possiblyEvaluate=function(a,s){return a.expression.evaluate(s)},Pa.prototype.interpolate=function(a,s,h){var E=Oo[this.specification.type];return E?E(a,s,h):a};var la=function(a,s){this.specification=a,this.overrides=s};la.prototype.possiblyEvaluate=function(a,s,h,E){return new cu(this,a.expression.kind==="constant"||a.expression.kind==="camera"?{kind:"constant",value:a.expression.evaluate(s,null,{},h,E)}:a.expression,s)},la.prototype.interpolate=function(a,s,h){if(a.value.kind!=="constant"||s.value.kind!=="constant")return a;if(a.value.value===void 0||s.value.value===void 0)return new cu(this,{kind:"constant",value:void 0},a.parameters);var E=Oo[this.specification.type];return E?new cu(this,{kind:"constant",value:E(a.value.value,s.value.value,h)},a.parameters):a},la.prototype.evaluate=function(a,s,h,E,M,L){return a.kind==="constant"?a.value:a.evaluate(s,h,E,M,L)};var sl=function(a){function s(){a.apply(this,arguments)}return a&&(s.__proto__=a),(s.prototype=Object.create(a&&a.prototype)).constructor=s,s.prototype.possiblyEvaluate=function(h,E,M,L){if(h.value===void 0)return new cu(this,{kind:"constant",value:void 0},E);if(h.expression.kind==="constant"){var j=h.expression.evaluate(E,null,{},M,L),re=h.property.specification.type==="resolvedImage"&&typeof j!="string"?j.name:j,Ce=this._calculate(re,re,re,E);return new cu(this,{kind:"constant",value:Ce},E)}if(h.expression.kind==="camera"){var ze=this._calculate(h.expression.evaluate({zoom:E.zoom-1}),h.expression.evaluate({zoom:E.zoom}),h.expression.evaluate({zoom:E.zoom+1}),E);return new cu(this,{kind:"constant",value:ze},E)}return new cu(this,h.expression,E)},s.prototype.evaluate=function(h,E,M,L,j,re){if(h.kind==="source"){var Ce=h.evaluate(E,M,L,j,re);return this._calculate(Ce,Ce,Ce,E)}return h.kind==="composite"?this._calculate(h.evaluate({zoom:Math.floor(E.zoom)-1},M,L),h.evaluate({zoom:Math.floor(E.zoom)},M,L),h.evaluate({zoom:Math.floor(E.zoom)+1},M,L),E):h.value},s.prototype._calculate=function(h,E,M,L){return L.zoom>L.zoomHistory.lastIntegerZoom?{from:h,to:E}:{from:M,to:E}},s.prototype.interpolate=function(h){return h},s}(la),us=function(a){this.specification=a};us.prototype.possiblyEvaluate=function(a,s,h,E){if(a.value!==void 0){if(a.expression.kind==="constant"){var M=a.expression.evaluate(s,null,{},h,E);return this._calculate(M,M,M,s)}return this._calculate(a.expression.evaluate(new li(Math.floor(s.zoom-1),s)),a.expression.evaluate(new li(Math.floor(s.zoom),s)),a.expression.evaluate(new li(Math.floor(s.zoom+1),s)),s)}},us.prototype._calculate=function(a,s,h,E){return E.zoom>E.zoomHistory.lastIntegerZoom?{from:a,to:s}:{from:h,to:s}},us.prototype.interpolate=function(a){return a};var wu=function(a){this.specification=a};wu.prototype.possiblyEvaluate=function(a,s,h,E){return!!a.expression.evaluate(s,null,{},h,E)},wu.prototype.interpolate=function(){return!1};var Zs=function(a){for(var s in this.properties=a,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[],a){var h=a[s];h.specification.overridable&&this.overridableProperties.push(s);var E=this.defaultPropertyValues[s]=new ga(h,void 0),M=this.defaultTransitionablePropertyValues[s]=new Ka(h);this.defaultTransitioningPropertyValues[s]=M.untransitioned(),this.defaultPossiblyEvaluatedValues[s]=E.possiblyEvaluate({})}};ji("DataDrivenProperty",la),ji("DataConstantProperty",Pa),ji("CrossFadedDataDrivenProperty",sl),ji("CrossFadedProperty",us),ji("ColorRampProperty",wu);var ul=function(a){function s(h,E){if(a.call(this),this.id=h.id,this.type=h.type,this._featureFilter={filter:function(){return!0},needGeometry:!1},h.type!=="custom"&&(this.metadata=(h=h).metadata,this.minzoom=h.minzoom,this.maxzoom=h.maxzoom,h.type!=="background"&&(this.source=h.source,this.sourceLayer=h["source-layer"],this.filter=h.filter),E.layout&&(this._unevaluatedLayout=new Su(E.layout)),E.paint)){for(var M in this._transitionablePaint=new Ma(E.paint),h.paint)this.setPaintProperty(M,h.paint[M],{validate:!1});for(var L in h.layout)this.setLayoutProperty(L,h.layout[L],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new tl(E.paint)}}return a&&(s.__proto__=a),(s.prototype=Object.create(a&&a.prototype)).constructor=s,s.prototype.getCrossfadeParameters=function(){return this._crossfadeParameters},s.prototype.getLayoutProperty=function(h){return h==="visibility"?this.visibility:this._unevaluatedLayout.getValue(h)},s.prototype.setLayoutProperty=function(h,E,M){M===void 0&&(M={}),E!=null&&this._validate(_c,"layers."+this.id+".layout."+h,h,E,M)||(h!=="visibility"?this._unevaluatedLayout.setValue(h,E):this.visibility=E)},s.prototype.getPaintProperty=function(h){return K(h,"-transition")?this._transitionablePaint.getTransition(h.slice(0,-11)):this._transitionablePaint.getValue(h)},s.prototype.setPaintProperty=function(h,E,M){if(M===void 0&&(M={}),E!=null&&this._validate(tp,"layers."+this.id+".paint."+h,h,E,M))return!1;if(K(h,"-transition"))return this._transitionablePaint.setTransition(h.slice(0,-11),E||void 0),!1;var L=this._transitionablePaint._values[h],j=L.property.specification["property-type"]==="cross-faded-data-driven",re=L.value.isDataDriven(),Ce=L.value;this._transitionablePaint.setValue(h,E),this._handleSpecialPaintPropertyUpdate(h);var ze=this._transitionablePaint._values[h].value;return ze.isDataDriven()||re||j||this._handleOverridablePaintPropertyUpdate(h,Ce,ze)},s.prototype._handleSpecialPaintPropertyUpdate=function(h){},s.prototype._handleOverridablePaintPropertyUpdate=function(h,E,M){return!1},s.prototype.isHidden=function(h){return!!(this.minzoom&&h<this.minzoom)||!!(this.maxzoom&&h>=this.maxzoom)||this.visibility==="none"},s.prototype.updateTransitions=function(h){this._transitioningPaint=this._transitionablePaint.transitioned(h,this._transitioningPaint)},s.prototype.hasTransition=function(){return this._transitioningPaint.hasTransition()},s.prototype.recalculate=function(h,E){h.getCrossfadeParameters&&(this._crossfadeParameters=h.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(h,void 0,E)),this.paint=this._transitioningPaint.possiblyEvaluate(h,void 0,E)},s.prototype.serialize=function(){var h={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(h.layout=h.layout||{},h.layout.visibility=this.visibility),we(h,function(E,M){return!(E===void 0||M==="layout"&&!Object.keys(E).length||M==="paint"&&!Object.keys(E).length)})},s.prototype._validate=function(h,E,M,L,j){return j===void 0&&(j={}),(!j||j.validate!==!1)&&Jl(this,h.call(lc,{key:E,layerType:this.type,objectKey:M,value:L,styleSpec:bt,style:{glyphs:!0,sprite:!0}}))},s.prototype.is3D=function(){return!1},s.prototype.isTileClipped=function(){return!1},s.prototype.hasOffscreenPass=function(){return!1},s.prototype.resize=function(){},s.prototype.isStateDependent=function(){for(var h in this.paint._values){var E=this.paint.get(h);if(E instanceof cu&&ju(E.property.specification)&&(E.value.kind==="source"||E.value.kind==="composite")&&E.value.isStateDependent)return!0}return!1},s}(sr),Ec={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array},cf=function(a,s){this._structArray=a,this._pos1=s*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8},ws=function(){this.isTransferred=!1,this.capacity=-1,this.resize(0)};function Qo(a,s){s===void 0&&(s=1);var h=0,E=0;return{members:a.map(function(M){var L=Ec[M.type].BYTES_PER_ELEMENT,j=h=ff(h,Math.max(s,L)),re=M.components||1;return E=Math.max(E,L),h+=L*re,{name:M.name,type:M.type,components:re,offset:j}}),size:ff(h,Math.max(E,s)),alignment:s}}function ff(a,s){return Math.ceil(a/s)*s}ws.serialize=function(a,s){return a._trim(),s&&(a.isTransferred=!0,s.push(a.arrayBuffer)),{length:a.length,arrayBuffer:a.arrayBuffer}},ws.deserialize=function(a){var s=Object.create(this.prototype);return s.arrayBuffer=a.arrayBuffer,s.length=a.length,s.capacity=a.arrayBuffer.byteLength/s.bytesPerElement,s._refreshViews(),s},ws.prototype._trim=function(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())},ws.prototype.clear=function(){this.length=0},ws.prototype.resize=function(a){this.reserve(a),this.length=a},ws.prototype.reserve=function(a){if(a>this.capacity){this.capacity=Math.max(a,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);var s=this.uint8;this._refreshViews(),s&&this.uint8.set(s)}},ws.prototype._refreshViews=function(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")};var Du=function(a){function s(){a.apply(this,arguments)}return a&&(s.__proto__=a),(s.prototype=Object.create(a&&a.prototype)).constructor=s,s.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},s.prototype.emplaceBack=function(h,E){var M=this.length;return this.resize(M+1),this.emplace(M,h,E)},s.prototype.emplace=function(h,E,M){var L=2*h;return this.int16[L+0]=E,this.int16[L+1]=M,h},s}(ws);Du.prototype.bytesPerElement=4,ji("StructArrayLayout2i4",Du);var du=function(a){function s(){a.apply(this,arguments)}return a&&(s.__proto__=a),(s.prototype=Object.create(a&&a.prototype)).constructor=s,s.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},s.prototype.emplaceBack=function(h,E,M,L){var j=this.length;return this.resize(j+1),this.emplace(j,h,E,M,L)},s.prototype.emplace=function(h,E,M,L,j){var re=4*h;return this.int16[re+0]=E,this.int16[re+1]=M,this.int16[re+2]=L,this.int16[re+3]=j,h},s}(ws);du.prototype.bytesPerElement=8,ji("StructArrayLayout4i8",du);var ll=function(a){function s(){a.apply(this,arguments)}return a&&(s.__proto__=a),(s.prototype=Object.create(a&&a.prototype)).constructor=s,s.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},s.prototype.emplaceBack=function(h,E,M,L,j,re){var Ce=this.length;return this.resize(Ce+1),this.emplace(Ce,h,E,M,L,j,re)},s.prototype.emplace=function(h,E,M,L,j,re,Ce){var ze=6*h;return this.int16[ze+0]=E,this.int16[ze+1]=M,this.int16[ze+2]=L,this.int16[ze+3]=j,this.int16[ze+4]=re,this.int16[ze+5]=Ce,h},s}(ws);ll.prototype.bytesPerElement=12,ji("StructArrayLayout2i4i12",ll);var eu=function(a){function s(){a.apply(this,arguments)}return a&&(s.__proto__=a),(s.prototype=Object.create(a&&a.prototype)).constructor=s,s.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},s.prototype.emplaceBack=function(h,E,M,L,j,re){var Ce=this.length;return this.resize(Ce+1),this.emplace(Ce,h,E,M,L,j,re)},s.prototype.emplace=function(h,E,M,L,j,re,Ce){var ze=4*h,We=8*h;return this.int16[ze+0]=E,this.int16[ze+1]=M,this.uint8[We+4]=L,this.uint8[We+5]=j,this.uint8[We+6]=re,this.uint8[We+7]=Ce,h},s}(ws);eu.prototype.bytesPerElement=8,ji("StructArrayLayout2i4ub8",eu);var Rt=function(a){function s(){a.apply(this,arguments)}return a&&(s.__proto__=a),(s.prototype=Object.create(a&&a.prototype)).constructor=s,s.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},s.prototype.emplaceBack=function(h,E){var M=this.length;return this.resize(M+1),this.emplace(M,h,E)},s.prototype.emplace=function(h,E,M){var L=2*h;return this.float32[L+0]=E,this.float32[L+1]=M,h},s}(ws);Rt.prototype.bytesPerElement=8,ji("StructArrayLayout2f8",Rt);var mo=function(a){function s(){a.apply(this,arguments)}return a&&(s.__proto__=a),(s.prototype=Object.create(a&&a.prototype)).constructor=s,s.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},s.prototype.emplaceBack=function(h,E,M,L,j,re,Ce,ze,We,Je){var _t=this.length;return this.resize(_t+1),this.emplace(_t,h,E,M,L,j,re,Ce,ze,We,Je)},s.prototype.emplace=function(h,E,M,L,j,re,Ce,ze,We,Je,_t){var It=10*h;return this.uint16[It+0]=E,this.uint16[It+1]=M,this.uint16[It+2]=L,this.uint16[It+3]=j,this.uint16[It+4]=re,this.uint16[It+5]=Ce,this.uint16[It+6]=ze,this.uint16[It+7]=We,this.uint16[It+8]=Je,this.uint16[It+9]=_t,h},s}(ws);mo.prototype.bytesPerElement=20,ji("StructArrayLayout10ui20",mo);var xs=function(a){function s(){a.apply(this,arguments)}return a&&(s.__proto__=a),(s.prototype=Object.create(a&&a.prototype)).constructor=s,s.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},s.prototype.emplaceBack=function(h,E,M,L,j,re,Ce,ze,We,Je,_t,It){var ar=this.length;return this.resize(ar+1),this.emplace(ar,h,E,M,L,j,re,Ce,ze,We,Je,_t,It)},s.prototype.emplace=function(h,E,M,L,j,re,Ce,ze,We,Je,_t,It,ar){var ur=12*h;return this.int16[ur+0]=E,this.int16[ur+1]=M,this.int16[ur+2]=L,this.int16[ur+3]=j,this.uint16[ur+4]=re,this.uint16[ur+5]=Ce,this.uint16[ur+6]=ze,this.uint16[ur+7]=We,this.int16[ur+8]=Je,this.int16[ur+9]=_t,this.int16[ur+10]=It,this.int16[ur+11]=ar,h},s}(ws);xs.prototype.bytesPerElement=24,ji("StructArrayLayout4i4ui4i24",xs);var tu=function(a){function s(){a.apply(this,arguments)}return a&&(s.__proto__=a),(s.prototype=Object.create(a&&a.prototype)).constructor=s,s.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},s.prototype.emplaceBack=function(h,E,M){var L=this.length;return this.resize(L+1),this.emplace(L,h,E,M)},s.prototype.emplace=function(h,E,M,L){var j=3*h;return this.float32[j+0]=E,this.float32[j+1]=M,this.float32[j+2]=L,h},s}(ws);tu.prototype.bytesPerElement=12,ji("StructArrayLayout3f12",tu);var Mo=function(a){function s(){a.apply(this,arguments)}return a&&(s.__proto__=a),(s.prototype=Object.create(a&&a.prototype)).constructor=s,s.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)},s.prototype.emplaceBack=function(h){var E=this.length;return this.resize(E+1),this.emplace(E,h)},s.prototype.emplace=function(h,E){return this.uint32[1*h+0]=E,h},s}(ws);Mo.prototype.bytesPerElement=4,ji("StructArrayLayout1ul4",Mo);var rp=function(a){function s(){a.apply(this,arguments)}return a&&(s.__proto__=a),(s.prototype=Object.create(a&&a.prototype)).constructor=s,s.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},s.prototype.emplaceBack=function(h,E,M,L,j,re,Ce,ze,We){var Je=this.length;return this.resize(Je+1),this.emplace(Je,h,E,M,L,j,re,Ce,ze,We)},s.prototype.emplace=function(h,E,M,L,j,re,Ce,ze,We,Je){var _t=10*h,It=5*h;return this.int16[_t+0]=E,this.int16[_t+1]=M,this.int16[_t+2]=L,this.int16[_t+3]=j,this.int16[_t+4]=re,this.int16[_t+5]=Ce,this.uint32[It+3]=ze,this.uint16[_t+8]=We,this.uint16[_t+9]=Je,h},s}(ws);rp.prototype.bytesPerElement=20,ji("StructArrayLayout6i1ul2ui20",rp);var pf=function(a){function s(){a.apply(this,arguments)}return a&&(s.__proto__=a),(s.prototype=Object.create(a&&a.prototype)).constructor=s,s.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},s.prototype.emplaceBack=function(h,E,M,L,j,re){var Ce=this.length;return this.resize(Ce+1),this.emplace(Ce,h,E,M,L,j,re)},s.prototype.emplace=function(h,E,M,L,j,re,Ce){var ze=6*h;return this.int16[ze+0]=E,this.int16[ze+1]=M,this.int16[ze+2]=L,this.int16[ze+3]=j,this.int16[ze+4]=re,this.int16[ze+5]=Ce,h},s}(ws);pf.prototype.bytesPerElement=12,ji("StructArrayLayout2i2i2i12",pf);var np=function(a){function s(){a.apply(this,arguments)}return a&&(s.__proto__=a),(s.prototype=Object.create(a&&a.prototype)).constructor=s,s.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},s.prototype.emplaceBack=function(h,E,M,L,j){var re=this.length;return this.resize(re+1),this.emplace(re,h,E,M,L,j)},s.prototype.emplace=function(h,E,M,L,j,re){var Ce=4*h,ze=8*h;return this.float32[Ce+0]=E,this.float32[Ce+1]=M,this.float32[Ce+2]=L,this.int16[ze+6]=j,this.int16[ze+7]=re,h},s}(ws);np.prototype.bytesPerElement=16,ji("StructArrayLayout2f1f2i16",np);var cl=function(a){function s(){a.apply(this,arguments)}return a&&(s.__proto__=a),(s.prototype=Object.create(a&&a.prototype)).constructor=s,s.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},s.prototype.emplaceBack=function(h,E,M,L){var j=this.length;return this.resize(j+1),this.emplace(j,h,E,M,L)},s.prototype.emplace=function(h,E,M,L,j){var re=12*h,Ce=3*h;return this.uint8[re+0]=E,this.uint8[re+1]=M,this.float32[Ce+1]=L,this.float32[Ce+2]=j,h},s}(ws);cl.prototype.bytesPerElement=12,ji("StructArrayLayout2ub2f12",cl);var Dl=function(a){function s(){a.apply(this,arguments)}return a&&(s.__proto__=a),(s.prototype=Object.create(a&&a.prototype)).constructor=s,s.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},s.prototype.emplaceBack=function(h,E,M){var L=this.length;return this.resize(L+1),this.emplace(L,h,E,M)},s.prototype.emplace=function(h,E,M,L){var j=3*h;return this.uint16[j+0]=E,this.uint16[j+1]=M,this.uint16[j+2]=L,h},s}(ws);Dl.prototype.bytesPerElement=6,ji("StructArrayLayout3ui6",Dl);var Cs=function(a){function s(){a.apply(this,arguments)}return a&&(s.__proto__=a),(s.prototype=Object.create(a&&a.prototype)).constructor=s,s.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},s.prototype.emplaceBack=function(h,E,M,L,j,re,Ce,ze,We,Je,_t,It,ar,ur,Rr,mr,cn){var wn=this.length;return this.resize(wn+1),this.emplace(wn,h,E,M,L,j,re,Ce,ze,We,Je,_t,It,ar,ur,Rr,mr,cn)},s.prototype.emplace=function(h,E,M,L,j,re,Ce,ze,We,Je,_t,It,ar,ur,Rr,mr,cn,wn){var Gn=24*h,Zn=12*h,gi=48*h;return this.int16[Gn+0]=E,this.int16[Gn+1]=M,this.uint16[Gn+2]=L,this.uint16[Gn+3]=j,this.uint32[Zn+2]=re,this.uint32[Zn+3]=Ce,this.uint32[Zn+4]=ze,this.uint16[Gn+10]=We,this.uint16[Gn+11]=Je,this.uint16[Gn+12]=_t,this.float32[Zn+7]=It,this.float32[Zn+8]=ar,this.uint8[gi+36]=ur,this.uint8[gi+37]=Rr,this.uint8[gi+38]=mr,this.uint32[Zn+10]=cn,this.int16[Gn+22]=wn,h},s}(ws);Cs.prototype.bytesPerElement=48,ji("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",Cs);var fu=function(a){function s(){a.apply(this,arguments)}return a&&(s.__proto__=a),(s.prototype=Object.create(a&&a.prototype)).constructor=s,s.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},s.prototype.emplaceBack=function(h,E,M,L,j,re,Ce,ze,We,Je,_t,It,ar,ur,Rr,mr,cn,wn,Gn,Zn,gi,Yi,p,y,C,V,ae,Ie){var ut=this.length;return this.resize(ut+1),this.emplace(ut,h,E,M,L,j,re,Ce,ze,We,Je,_t,It,ar,ur,Rr,mr,cn,wn,Gn,Zn,gi,Yi,p,y,C,V,ae,Ie)},s.prototype.emplace=function(h,E,M,L,j,re,Ce,ze,We,Je,_t,It,ar,ur,Rr,mr,cn,wn,Gn,Zn,gi,Yi,p,y,C,V,ae,Ie,ut){var zt=34*h,wr=17*h;return this.int16[zt+0]=E,this.int16[zt+1]=M,this.int16[zt+2]=L,this.int16[zt+3]=j,this.int16[zt+4]=re,this.int16[zt+5]=Ce,this.int16[zt+6]=ze,this.int16[zt+7]=We,this.uint16[zt+8]=Je,this.uint16[zt+9]=_t,this.uint16[zt+10]=It,this.uint16[zt+11]=ar,this.uint16[zt+12]=ur,this.uint16[zt+13]=Rr,this.uint16[zt+14]=mr,this.uint16[zt+15]=cn,this.uint16[zt+16]=wn,this.uint16[zt+17]=Gn,this.uint16[zt+18]=Zn,this.uint16[zt+19]=gi,this.uint16[zt+20]=Yi,this.uint16[zt+21]=p,this.uint16[zt+22]=y,this.uint32[wr+12]=C,this.float32[wr+13]=V,this.float32[wr+14]=ae,this.float32[wr+15]=Ie,this.float32[wr+16]=ut,h},s}(ws);fu.prototype.bytesPerElement=68,ji("StructArrayLayout8i15ui1ul4f68",fu);var Zl=function(a){function s(){a.apply(this,arguments)}return a&&(s.__proto__=a),(s.prototype=Object.create(a&&a.prototype)).constructor=s,s.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},s.prototype.emplaceBack=function(h){var E=this.length;return this.resize(E+1),this.emplace(E,h)},s.prototype.emplace=function(h,E){return this.float32[1*h+0]=E,h},s}(ws);Zl.prototype.bytesPerElement=4,ji("StructArrayLayout1f4",Zl);var Mu=function(a){function s(){a.apply(this,arguments)}return a&&(s.__proto__=a),(s.prototype=Object.create(a&&a.prototype)).constructor=s,s.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},s.prototype.emplaceBack=function(h,E,M){var L=this.length;return this.resize(L+1),this.emplace(L,h,E,M)},s.prototype.emplace=function(h,E,M,L){var j=3*h;return this.int16[j+0]=E,this.int16[j+1]=M,this.int16[j+2]=L,h},s}(ws);Mu.prototype.bytesPerElement=6,ji("StructArrayLayout3i6",Mu);var Fu=function(a){function s(){a.apply(this,arguments)}return a&&(s.__proto__=a),(s.prototype=Object.create(a&&a.prototype)).constructor=s,s.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},s.prototype.emplaceBack=function(h,E,M){var L=this.length;return this.resize(L+1),this.emplace(L,h,E,M)},s.prototype.emplace=function(h,E,M,L){var j=4*h;return this.uint32[2*h+0]=E,this.uint16[j+2]=M,this.uint16[j+3]=L,h},s}(ws);Fu.prototype.bytesPerElement=8,ji("StructArrayLayout1ul2ui8",Fu);var Nc=function(a){function s(){a.apply(this,arguments)}return a&&(s.__proto__=a),(s.prototype=Object.create(a&&a.prototype)).constructor=s,s.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},s.prototype.emplaceBack=function(h,E){var M=this.length;return this.resize(M+1),this.emplace(M,h,E)},s.prototype.emplace=function(h,E,M){var L=2*h;return this.uint16[L+0]=E,this.uint16[L+1]=M,h},s}(ws);Nc.prototype.bytesPerElement=4,ji("StructArrayLayout2ui4",Nc);var hf=function(a){function s(){a.apply(this,arguments)}return a&&(s.__proto__=a),(s.prototype=Object.create(a&&a.prototype)).constructor=s,s.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},s.prototype.emplaceBack=function(h){var E=this.length;return this.resize(E+1),this.emplace(E,h)},s.prototype.emplace=function(h,E){return this.uint16[1*h+0]=E,h},s}(ws);hf.prototype.bytesPerElement=2,ji("StructArrayLayout1ui2",hf);var Ol=function(a){function s(){a.apply(this,arguments)}return a&&(s.__proto__=a),(s.prototype=Object.create(a&&a.prototype)).constructor=s,s.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},s.prototype.emplaceBack=function(h,E,M,L){var j=this.length;return this.resize(j+1),this.emplace(j,h,E,M,L)},s.prototype.emplace=function(h,E,M,L,j){var re=4*h;return this.float32[re+0]=E,this.float32[re+1]=M,this.float32[re+2]=L,this.float32[re+3]=j,h},s}(ws);Ol.prototype.bytesPerElement=16,ji("StructArrayLayout4f16",Ol);var d=function(a){function s(){a.apply(this,arguments)}a&&(s.__proto__=a),(s.prototype=Object.create(a&&a.prototype)).constructor=s;var h={anchorPointX:{configurable:!0},anchorPointY:{configurable:!0},x1:{configurable:!0},y1:{configurable:!0},x2:{configurable:!0},y2:{configurable:!0},featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0},anchorPoint:{configurable:!0}};return h.anchorPointX.get=function(){return this._structArray.int16[this._pos2+0]},h.anchorPointY.get=function(){return this._structArray.int16[this._pos2+1]},h.x1.get=function(){return this._structArray.int16[this._pos2+2]},h.y1.get=function(){return this._structArray.int16[this._pos2+3]},h.x2.get=function(){return this._structArray.int16[this._pos2+4]},h.y2.get=function(){return this._structArray.int16[this._pos2+5]},h.featureIndex.get=function(){return this._structArray.uint32[this._pos4+3]},h.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+8]},h.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+9]},h.anchorPoint.get=function(){return new k(this.anchorPointX,this.anchorPointY)},Object.defineProperties(s.prototype,h),s}(cf);d.prototype.size=20;var _=function(a){function s(){a.apply(this,arguments)}return a&&(s.__proto__=a),(s.prototype=Object.create(a&&a.prototype)).constructor=s,s.prototype.get=function(h){return new d(this,h)},s}(rp);ji("CollisionBoxArray",_);var m=function(a){function s(){a.apply(this,arguments)}a&&(s.__proto__=a),(s.prototype=Object.create(a&&a.prototype)).constructor=s;var h={anchorX:{configurable:!0},anchorY:{configurable:!0},glyphStartIndex:{configurable:!0},numGlyphs:{configurable:!0},vertexStartIndex:{configurable:!0},lineStartIndex:{configurable:!0},lineLength:{configurable:!0},segment:{configurable:!0},lowerSize:{configurable:!0},upperSize:{configurable:!0},lineOffsetX:{configurable:!0},lineOffsetY:{configurable:!0},writingMode:{configurable:!0},placedOrientation:{configurable:!0},hidden:{configurable:!0},crossTileID:{configurable:!0},associatedIconIndex:{configurable:!0}};return h.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},h.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},h.glyphStartIndex.get=function(){return this._structArray.uint16[this._pos2+2]},h.numGlyphs.get=function(){return this._structArray.uint16[this._pos2+3]},h.vertexStartIndex.get=function(){return this._structArray.uint32[this._pos4+2]},h.lineStartIndex.get=function(){return this._structArray.uint32[this._pos4+3]},h.lineLength.get=function(){return this._structArray.uint32[this._pos4+4]},h.segment.get=function(){return this._structArray.uint16[this._pos2+10]},h.lowerSize.get=function(){return this._structArray.uint16[this._pos2+11]},h.upperSize.get=function(){return this._structArray.uint16[this._pos2+12]},h.lineOffsetX.get=function(){return this._structArray.float32[this._pos4+7]},h.lineOffsetY.get=function(){return this._structArray.float32[this._pos4+8]},h.writingMode.get=function(){return this._structArray.uint8[this._pos1+36]},h.placedOrientation.get=function(){return this._structArray.uint8[this._pos1+37]},h.placedOrientation.set=function(E){this._structArray.uint8[this._pos1+37]=E},h.hidden.get=function(){return this._structArray.uint8[this._pos1+38]},h.hidden.set=function(E){this._structArray.uint8[this._pos1+38]=E},h.crossTileID.get=function(){return this._structArray.uint32[this._pos4+10]},h.crossTileID.set=function(E){this._structArray.uint32[this._pos4+10]=E},h.associatedIconIndex.get=function(){return this._structArray.int16[this._pos2+22]},Object.defineProperties(s.prototype,h),s}(cf);m.prototype.size=48;var S=function(a){function s(){a.apply(this,arguments)}return a&&(s.__proto__=a),(s.prototype=Object.create(a&&a.prototype)).constructor=s,s.prototype.get=function(h){return new m(this,h)},s}(Cs);ji("PlacedSymbolArray",S);var N=function(a){function s(){a.apply(this,arguments)}a&&(s.__proto__=a),(s.prototype=Object.create(a&&a.prototype)).constructor=s;var h={anchorX:{configurable:!0},anchorY:{configurable:!0},rightJustifiedTextSymbolIndex:{configurable:!0},centerJustifiedTextSymbolIndex:{configurable:!0},leftJustifiedTextSymbolIndex:{configurable:!0},verticalPlacedTextSymbolIndex:{configurable:!0},placedIconSymbolIndex:{configurable:!0},verticalPlacedIconSymbolIndex:{configurable:!0},key:{configurable:!0},textBoxStartIndex:{configurable:!0},textBoxEndIndex:{configurable:!0},verticalTextBoxStartIndex:{configurable:!0},verticalTextBoxEndIndex:{configurable:!0},iconBoxStartIndex:{configurable:!0},iconBoxEndIndex:{configurable:!0},verticalIconBoxStartIndex:{configurable:!0},verticalIconBoxEndIndex:{configurable:!0},featureIndex:{configurable:!0},numHorizontalGlyphVertices:{configurable:!0},numVerticalGlyphVertices:{configurable:!0},numIconVertices:{configurable:!0},numVerticalIconVertices:{configurable:!0},useRuntimeCollisionCircles:{configurable:!0},crossTileID:{configurable:!0},textBoxScale:{configurable:!0},textOffset0:{configurable:!0},textOffset1:{configurable:!0},collisionCircleDiameter:{configurable:!0}};return h.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},h.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},h.rightJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+2]},h.centerJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+3]},h.leftJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+4]},h.verticalPlacedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+5]},h.placedIconSymbolIndex.get=function(){return this._structArray.int16[this._pos2+6]},h.verticalPlacedIconSymbolIndex.get=function(){return this._structArray.int16[this._pos2+7]},h.key.get=function(){return this._structArray.uint16[this._pos2+8]},h.textBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+9]},h.textBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+10]},h.verticalTextBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+11]},h.verticalTextBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+12]},h.iconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+13]},h.iconBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+14]},h.verticalIconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+15]},h.verticalIconBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+16]},h.featureIndex.get=function(){return this._structArray.uint16[this._pos2+17]},h.numHorizontalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+18]},h.numVerticalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+19]},h.numIconVertices.get=function(){return this._structArray.uint16[this._pos2+20]},h.numVerticalIconVertices.get=function(){return this._structArray.uint16[this._pos2+21]},h.useRuntimeCollisionCircles.get=function(){return this._structArray.uint16[this._pos2+22]},h.crossTileID.get=function(){return this._structArray.uint32[this._pos4+12]},h.crossTileID.set=function(E){this._structArray.uint32[this._pos4+12]=E},h.textBoxScale.get=function(){return this._structArray.float32[this._pos4+13]},h.textOffset0.get=function(){return this._structArray.float32[this._pos4+14]},h.textOffset1.get=function(){return this._structArray.float32[this._pos4+15]},h.collisionCircleDiameter.get=function(){return this._structArray.float32[this._pos4+16]},Object.defineProperties(s.prototype,h),s}(cf);N.prototype.size=68;var X=function(a){function s(){a.apply(this,arguments)}return a&&(s.__proto__=a),(s.prototype=Object.create(a&&a.prototype)).constructor=s,s.prototype.get=function(h){return new N(this,h)},s}(fu);ji("SymbolInstanceArray",X);var ee=function(a){function s(){a.apply(this,arguments)}return a&&(s.__proto__=a),(s.prototype=Object.create(a&&a.prototype)).constructor=s,s.prototype.getoffsetX=function(h){return this.float32[1*h+0]},s}(Zl);ji("GlyphOffsetArray",ee);var Ae=function(a){function s(){a.apply(this,arguments)}return a&&(s.__proto__=a),(s.prototype=Object.create(a&&a.prototype)).constructor=s,s.prototype.getx=function(h){return this.int16[3*h+0]},s.prototype.gety=function(h){return this.int16[3*h+1]},s.prototype.gettileUnitDistanceFromAnchor=function(h){return this.int16[3*h+2]},s}(Mu);ji("SymbolLineVertexArray",Ae);var Ze=function(a){function s(){a.apply(this,arguments)}a&&(s.__proto__=a),(s.prototype=Object.create(a&&a.prototype)).constructor=s;var h={featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0}};return h.featureIndex.get=function(){return this._structArray.uint32[this._pos4+0]},h.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+2]},h.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+3]},Object.defineProperties(s.prototype,h),s}(cf);Ze.prototype.size=8;var nt=function(a){function s(){a.apply(this,arguments)}return a&&(s.__proto__=a),(s.prototype=Object.create(a&&a.prototype)).constructor=s,s.prototype.get=function(h){return new Ze(this,h)},s}(Fu);ji("FeatureIndexArray",nt);var Ct=Qo([{name:"a_pos",components:2,type:"Int16"}],4).members,Tt=function(a){a===void 0&&(a=[]),this.segments=a};function Pt(a,s){return 256*(a=te(Math.floor(a),0,255))+te(Math.floor(s),0,255)}Tt.prototype.prepareSegment=function(a,s,h,E){var M=this.segments[this.segments.length-1];return a>Tt.MAX_VERTEX_ARRAY_LENGTH&&Ke("Max vertices per segment is "+Tt.MAX_VERTEX_ARRAY_LENGTH+": bucket requested "+a),(!M||M.vertexLength+a>Tt.MAX_VERTEX_ARRAY_LENGTH||M.sortKey!==E)&&(M={vertexOffset:s.length,primitiveOffset:h.length,vertexLength:0,primitiveLength:0},E!==void 0&&(M.sortKey=E),this.segments.push(M)),M},Tt.prototype.get=function(){return this.segments},Tt.prototype.destroy=function(){for(var a=0,s=this.segments;a<s.length;a+=1){var h=s[a];for(var E in h.vaos)h.vaos[E].destroy()}},Tt.simpleSegment=function(a,s,h,E){return new Tt([{vertexOffset:a,primitiveOffset:s,vertexLength:h,primitiveLength:E,vaos:{},sortKey:0}])},Tt.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,ji("SegmentVector",Tt);var tr=Qo([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]),or=R(function(a){a.exports=function(s,h){var E,M,L,j,re,Ce,ze,We;for(M=s.length-(E=3&s.length),L=h,re=3432918353,Ce=461845907,We=0;We<M;)ze=255&s.charCodeAt(We)|(255&s.charCodeAt(++We))<<8|(255&s.charCodeAt(++We))<<16|(255&s.charCodeAt(++We))<<24,++We,L=27492+(65535&(j=5*(65535&(L=(L^=ze=(65535&(ze=(ze=(65535&ze)*re+(((ze>>>16)*re&65535)<<16)&4294967295)<<15|ze>>>17))*Ce+(((ze>>>16)*Ce&65535)<<16)&4294967295)<<13|L>>>19))+((5*(L>>>16)&65535)<<16)&4294967295))+((58964+(j>>>16)&65535)<<16);switch(ze=0,E){case 3:ze^=(255&s.charCodeAt(We+2))<<16;case 2:ze^=(255&s.charCodeAt(We+1))<<8;case 1:L^=ze=(65535&(ze=(ze=(65535&(ze^=255&s.charCodeAt(We)))*re+(((ze>>>16)*re&65535)<<16)&4294967295)<<15|ze>>>17))*Ce+(((ze>>>16)*Ce&65535)<<16)&4294967295}return L^=s.length,L=2246822507*(65535&(L^=L>>>16))+((2246822507*(L>>>16)&65535)<<16)&4294967295,L=3266489909*(65535&(L^=L>>>13))+((3266489909*(L>>>16)&65535)<<16)&4294967295,(L^=L>>>16)>>>0}}),gr=R(function(a){a.exports=function(s,h){for(var E,M=s.length,L=h^M,j=0;M>=4;)E=1540483477*(65535&(E=255&s.charCodeAt(j)|(255&s.charCodeAt(++j))<<8|(255&s.charCodeAt(++j))<<16|(255&s.charCodeAt(++j))<<24))+((1540483477*(E>>>16)&65535)<<16),L=1540483477*(65535&L)+((1540483477*(L>>>16)&65535)<<16)^(E=1540483477*(65535&(E^=E>>>24))+((1540483477*(E>>>16)&65535)<<16)),M-=4,++j;switch(M){case 3:L^=(255&s.charCodeAt(j+2))<<16;case 2:L^=(255&s.charCodeAt(j+1))<<8;case 1:L=1540483477*(65535&(L^=255&s.charCodeAt(j)))+((1540483477*(L>>>16)&65535)<<16)}return L=1540483477*(65535&(L^=L>>>13))+((1540483477*(L>>>16)&65535)<<16),(L^=L>>>15)>>>0}}),Yt=or,br=gr;Yt.murmur3=or,Yt.murmur2=br;var Lr=function(){this.ids=[],this.positions=[],this.indexed=!1};Lr.prototype.add=function(a,s,h,E){this.ids.push(zn(a)),this.positions.push(s,h,E)},Lr.prototype.getPositions=function(a){for(var s=zn(a),h=0,E=this.ids.length-1;h<E;){var M=h+E>>1;this.ids[M]>=s?E=M:h=M+1}for(var L=[];this.ids[h]===s;)L.push({index:this.positions[3*h],start:this.positions[3*h+1],end:this.positions[3*h+2]}),h++;return L},Lr.serialize=function(a,s){var h=new Float64Array(a.ids),E=new Uint32Array(a.positions);return function M(L,j,re,Ce){for(;re<Ce;){for(var ze=L[re+Ce>>1],We=re-1,Je=Ce+1;;){do We++;while(L[We]<ze);do Je--;while(L[Je]>ze);if(We>=Je)break;Nn(L,We,Je),Nn(j,3*We,3*Je),Nn(j,3*We+1,3*Je+1),Nn(j,3*We+2,3*Je+2)}Je-re<Ce-Je?(M(L,j,re,Je),re=Je+1):(M(L,j,Je+1,Ce),Ce=Je)}}(h,E,0,h.length-1),s&&s.push(h.buffer,E.buffer),{ids:h,positions:E}},Lr.deserialize=function(a){var s=new Lr;return s.ids=a.ids,s.positions=a.positions,s.indexed=!0,s};var pn=Math.pow(2,53)-1;function zn(a){var s=+a;return!isNaN(s)&&s<=pn?s:Yt(String(a))}function Nn(a,s,h){var E=a[s];a[s]=a[h],a[h]=E}ji("FeaturePositionMap",Lr);var Xn=function(a,s){this.gl=a.gl,this.location=s},yi=function(a){function s(h,E){a.call(this,h,E),this.current=0}return a&&(s.__proto__=a),(s.prototype=Object.create(a&&a.prototype)).constructor=s,s.prototype.set=function(h){this.current!==h&&(this.current=h,this.gl.uniform1i(this.location,h))},s}(Xn),Li=function(a){function s(h,E){a.call(this,h,E),this.current=0}return a&&(s.__proto__=a),(s.prototype=Object.create(a&&a.prototype)).constructor=s,s.prototype.set=function(h){this.current!==h&&(this.current=h,this.gl.uniform1f(this.location,h))},s}(Xn),Ei=function(a){function s(h,E){a.call(this,h,E),this.current=[0,0]}return a&&(s.__proto__=a),(s.prototype=Object.create(a&&a.prototype)).constructor=s,s.prototype.set=function(h){h[0]===this.current[0]&&h[1]===this.current[1]||(this.current=h,this.gl.uniform2f(this.location,h[0],h[1]))},s}(Xn),Vi=function(a){function s(h,E){a.call(this,h,E),this.current=[0,0,0]}return a&&(s.__proto__=a),(s.prototype=Object.create(a&&a.prototype)).constructor=s,s.prototype.set=function(h){h[0]===this.current[0]&&h[1]===this.current[1]&&h[2]===this.current[2]||(this.current=h,this.gl.uniform3f(this.location,h[0],h[1],h[2]))},s}(Xn),Ea=function(a){function s(h,E){a.call(this,h,E),this.current=[0,0,0,0]}return a&&(s.__proto__=a),(s.prototype=Object.create(a&&a.prototype)).constructor=s,s.prototype.set=function(h){h[0]===this.current[0]&&h[1]===this.current[1]&&h[2]===this.current[2]&&h[3]===this.current[3]||(this.current=h,this.gl.uniform4f(this.location,h[0],h[1],h[2],h[3]))},s}(Xn),Qa=function(a){function s(h,E){a.call(this,h,E),this.current=rr.transparent}return a&&(s.__proto__=a),(s.prototype=Object.create(a&&a.prototype)).constructor=s,s.prototype.set=function(h){h.r===this.current.r&&h.g===this.current.g&&h.b===this.current.b&&h.a===this.current.a||(this.current=h,this.gl.uniform4f(this.location,h.r,h.g,h.b,h.a))},s}(Xn),Ga=new Float32Array(16),io=function(a){function s(h,E){a.call(this,h,E),this.current=Ga}return a&&(s.__proto__=a),(s.prototype=Object.create(a&&a.prototype)).constructor=s,s.prototype.set=function(h){if(h[12]!==this.current[12]||h[0]!==this.current[0])return this.current=h,void this.gl.uniformMatrix4fv(this.location,!1,h);for(var E=1;E<16;E++)if(h[E]!==this.current[E]){this.current=h,this.gl.uniformMatrix4fv(this.location,!1,h);break}},s}(Xn);function ya(a){return[Pt(255*a.r,255*a.g),Pt(255*a.b,255*a.a)]}var yo=function(a,s,h){this.value=a,this.uniformNames=s.map(function(E){return"u_"+E}),this.type=h};yo.prototype.setUniform=function(a,s,h){a.set(h.constantOr(this.value))},yo.prototype.getBinding=function(a,s,h){return this.type==="color"?new Qa(a,s):new Li(a,s)};var _o=function(a,s){this.uniformNames=s.map(function(h){return"u_"+h}),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1};_o.prototype.setConstantPatternPositions=function(a,s){this.pixelRatioFrom=s.pixelRatio,this.pixelRatioTo=a.pixelRatio,this.patternFrom=s.tlbr,this.patternTo=a.tlbr},_o.prototype.setUniform=function(a,s,h,E){var M=E==="u_pattern_to"?this.patternTo:E==="u_pattern_from"?this.patternFrom:E==="u_pixel_ratio_to"?this.pixelRatioTo:E==="u_pixel_ratio_from"?this.pixelRatioFrom:null;M&&a.set(M)},_o.prototype.getBinding=function(a,s,h){return h.substr(0,9)==="u_pattern"?new Ea(a,s):new Li(a,s)};var po=function(a,s,h,E){this.expression=a,this.type=h,this.maxValue=0,this.paintVertexAttributes=s.map(function(M){return{name:"a_"+M,type:"Float32",components:h==="color"?2:1,offset:0}}),this.paintVertexArray=new E};po.prototype.populatePaintArray=function(a,s,h,E,M){var L=this.paintVertexArray.length,j=this.expression.evaluate(new li(0),s,{},E,[],M);this.paintVertexArray.resize(a),this._setPaintValue(L,a,j)},po.prototype.updatePaintArray=function(a,s,h,E){var M=this.expression.evaluate({zoom:0},h,E);this._setPaintValue(a,s,M)},po.prototype._setPaintValue=function(a,s,h){if(this.type==="color")for(var E=ya(h),M=a;M<s;M++)this.paintVertexArray.emplace(M,E[0],E[1]);else{for(var L=a;L<s;L++)this.paintVertexArray.emplace(L,h);this.maxValue=Math.max(this.maxValue,Math.abs(h))}},po.prototype.upload=function(a){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=a.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},po.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()};var Ha=function(a,s,h,E,M,L){this.expression=a,this.uniformNames=s.map(function(j){return"u_"+j+"_t"}),this.type=h,this.useIntegerZoom=E,this.zoom=M,this.maxValue=0,this.paintVertexAttributes=s.map(function(j){return{name:"a_"+j,type:"Float32",components:h==="color"?4:2,offset:0}}),this.paintVertexArray=new L};Ha.prototype.populatePaintArray=function(a,s,h,E,M){var L=this.expression.evaluate(new li(this.zoom),s,{},E,[],M),j=this.expression.evaluate(new li(this.zoom+1),s,{},E,[],M),re=this.paintVertexArray.length;this.paintVertexArray.resize(a),this._setPaintValue(re,a,L,j)},Ha.prototype.updatePaintArray=function(a,s,h,E){var M=this.expression.evaluate({zoom:this.zoom},h,E),L=this.expression.evaluate({zoom:this.zoom+1},h,E);this._setPaintValue(a,s,M,L)},Ha.prototype._setPaintValue=function(a,s,h,E){if(this.type==="color")for(var M=ya(h),L=ya(E),j=a;j<s;j++)this.paintVertexArray.emplace(j,M[0],M[1],L[0],L[1]);else{for(var re=a;re<s;re++)this.paintVertexArray.emplace(re,h,E);this.maxValue=Math.max(this.maxValue,Math.abs(h),Math.abs(E))}},Ha.prototype.upload=function(a){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=a.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},Ha.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()},Ha.prototype.setUniform=function(a,s){var h=this.useIntegerZoom?Math.floor(s.zoom):s.zoom,E=te(this.expression.interpolationFactor(h,this.zoom,this.zoom+1),0,1);a.set(E)},Ha.prototype.getBinding=function(a,s,h){return new Li(a,s)};var Ro=function(a,s,h,E,M,L){this.expression=a,this.type=s,this.useIntegerZoom=h,this.zoom=E,this.layerId=L,this.zoomInPaintVertexArray=new M,this.zoomOutPaintVertexArray=new M};Ro.prototype.populatePaintArray=function(a,s,h){var E=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(a),this.zoomOutPaintVertexArray.resize(a),this._setPaintValues(E,a,s.patterns&&s.patterns[this.layerId],h)},Ro.prototype.updatePaintArray=function(a,s,h,E,M){this._setPaintValues(a,s,h.patterns&&h.patterns[this.layerId],M)},Ro.prototype._setPaintValues=function(a,s,h,E){if(E&&h){var M=E[h.min],L=E[h.mid],j=E[h.max];if(M&&L&&j)for(var re=a;re<s;re++)this.zoomInPaintVertexArray.emplace(re,L.tl[0],L.tl[1],L.br[0],L.br[1],M.tl[0],M.tl[1],M.br[0],M.br[1],L.pixelRatio,M.pixelRatio),this.zoomOutPaintVertexArray.emplace(re,L.tl[0],L.tl[1],L.br[0],L.br[1],j.tl[0],j.tl[1],j.br[0],j.br[1],L.pixelRatio,j.pixelRatio)}},Ro.prototype.upload=function(a){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=a.createVertexBuffer(this.zoomInPaintVertexArray,tr.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=a.createVertexBuffer(this.zoomOutPaintVertexArray,tr.members,this.expression.isStateDependent))},Ro.prototype.destroy=function(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()};var eo=function(a,s,h){this.binders={},this._buffers=[];var E=[];for(var M in a.paint._values)if(h(M)){var L=a.paint.get(M);if(L instanceof cu&&ju(L.property.specification)){var j=Gu(M,a.type),re=L.value,Ce=L.property.specification.type,ze=L.property.useIntegerZoom,We=L.property.specification["property-type"],Je=We==="cross-faded"||We==="cross-faded-data-driven";if(re.kind==="constant")this.binders[M]=Je?new _o(re.value,j):new yo(re.value,j,Ce),E.push("/u_"+M);else if(re.kind==="source"||Je){var _t=co(M,Ce,"source");this.binders[M]=Je?new Ro(re,Ce,ze,s,_t,a.id):new po(re,j,Ce,_t),E.push("/a_"+M)}else{var It=co(M,Ce,"composite");this.binders[M]=new Ha(re,j,Ce,ze,s,It),E.push("/z_"+M)}}}this.cacheKey=E.sort().join("")};eo.prototype.getMaxValue=function(a){var s=this.binders[a];return s instanceof po||s instanceof Ha?s.maxValue:0},eo.prototype.populatePaintArrays=function(a,s,h,E,M){for(var L in this.binders){var j=this.binders[L];(j instanceof po||j instanceof Ha||j instanceof Ro)&&j.populatePaintArray(a,s,h,E,M)}},eo.prototype.setConstantPatternPositions=function(a,s){for(var h in this.binders){var E=this.binders[h];E instanceof _o&&E.setConstantPatternPositions(a,s)}},eo.prototype.updatePaintArrays=function(a,s,h,E,M){var L=!1;for(var j in a)for(var re=0,Ce=s.getPositions(j);re<Ce.length;re+=1){var ze=Ce[re],We=h.feature(ze.index);for(var Je in this.binders){var _t=this.binders[Je];if((_t instanceof po||_t instanceof Ha||_t instanceof Ro)&&_t.expression.isStateDependent===!0){var It=E.paint.get(Je);_t.expression=It.value,_t.updatePaintArray(ze.start,ze.end,We,a[j],M),L=!0}}}return L},eo.prototype.defines=function(){var a=[];for(var s in this.binders){var h=this.binders[s];(h instanceof yo||h instanceof _o)&&a.push.apply(a,h.uniformNames.map(function(E){return"#define HAS_UNIFORM_"+E}))}return a},eo.prototype.getBinderAttributes=function(){var a=[];for(var s in this.binders){var h=this.binders[s];if(h instanceof po||h instanceof Ha)for(var E=0;E<h.paintVertexAttributes.length;E++)a.push(h.paintVertexAttributes[E].name);else if(h instanceof Ro)for(var M=0;M<tr.members.length;M++)a.push(tr.members[M].name)}return a},eo.prototype.getBinderUniforms=function(){var a=[];for(var s in this.binders){var h=this.binders[s];if(h instanceof yo||h instanceof _o||h instanceof Ha)for(var E=0,M=h.uniformNames;E<M.length;E+=1)a.push(M[E])}return a},eo.prototype.getPaintVertexBuffers=function(){return this._buffers},eo.prototype.getUniforms=function(a,s){var h=[];for(var E in this.binders){var M=this.binders[E];if(M instanceof yo||M instanceof _o||M instanceof Ha)for(var L=0,j=M.uniformNames;L<j.length;L+=1){var re=j[L];if(s[re]){var Ce=M.getBinding(a,s[re],re);h.push({name:re,property:E,binding:Ce})}}}return h},eo.prototype.setUniforms=function(a,s,h,E){for(var M=0,L=s;M<L.length;M+=1){var j=L[M],re=j.name,Ce=j.property;this.binders[Ce].setUniform(j.binding,E,h.get(Ce),re)}},eo.prototype.updatePaintBuffers=function(a){for(var s in this._buffers=[],this.binders){var h=this.binders[s];if(a&&h instanceof Ro){var E=a.fromScale===2?h.zoomInPaintVertexBuffer:h.zoomOutPaintVertexBuffer;E&&this._buffers.push(E)}else(h instanceof po||h instanceof Ha)&&h.paintVertexBuffer&&this._buffers.push(h.paintVertexBuffer)}},eo.prototype.upload=function(a){for(var s in this.binders){var h=this.binders[s];(h instanceof po||h instanceof Ha||h instanceof Ro)&&h.upload(a)}this.updatePaintBuffers()},eo.prototype.destroy=function(){for(var a in this.binders){var s=this.binders[a];(s instanceof po||s instanceof Ha||s instanceof Ro)&&s.destroy()}};var Ia=function(a,s,h){h===void 0&&(h=function(){return!0}),this.programConfigurations={};for(var E=0,M=a;E<M.length;E+=1){var L=M[E];this.programConfigurations[L.id]=new eo(L,s,h)}this.needsUpload=!1,this._featureMap=new Lr,this._bufferOffset=0};function Gu(a,s){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[a]||[a.replace(s+"-","").replace(/-/g,"_")]}function co(a,s,h){var E={color:{source:Rt,composite:Ol},number:{source:Zl,composite:Rt}},M=function(L){return{"line-pattern":{source:mo,composite:mo},"fill-pattern":{source:mo,composite:mo},"fill-extrusion-pattern":{source:mo,composite:mo}}[L]}(a);return M&&M[h]||E[s][h]}Ia.prototype.populatePaintArrays=function(a,s,h,E,M,L){for(var j in this.programConfigurations)this.programConfigurations[j].populatePaintArrays(a,s,E,M,L);s.id!==void 0&&this._featureMap.add(s.id,h,this._bufferOffset,a),this._bufferOffset=a,this.needsUpload=!0},Ia.prototype.updatePaintArrays=function(a,s,h,E){for(var M=0,L=h;M<L.length;M+=1){var j=L[M];this.needsUpload=this.programConfigurations[j.id].updatePaintArrays(a,this._featureMap,s,j,E)||this.needsUpload}},Ia.prototype.get=function(a){return this.programConfigurations[a]},Ia.prototype.upload=function(a){if(this.needsUpload){for(var s in this.programConfigurations)this.programConfigurations[s].upload(a);this.needsUpload=!1}},Ia.prototype.destroy=function(){for(var a in this.programConfigurations)this.programConfigurations[a].destroy()},ji("ConstantBinder",yo),ji("CrossFadedConstantBinder",_o),ji("SourceExpressionBinder",po),ji("CrossFadedCompositeBinder",Ro),ji("CompositeExpressionBinder",Ha),ji("ProgramConfiguration",eo,{omit:["_buffers"]}),ji("ProgramConfigurationSet",Ia);var es=Math.pow(2,14)-1,ru=-es-1;function pu(a){for(var s=8192/a.extent,h=a.loadGeometry(),E=0;E<h.length;E++)for(var M=h[E],L=0;L<M.length;L++){var j=M[L],re=Math.round(j.x*s),Ce=Math.round(j.y*s);j.x=te(re,ru,es),j.y=te(Ce,ru,es),(re<j.x||re>j.x+1||Ce<j.y||Ce>j.y+1)&&Ke("Geometry exceeds allowed extent, reduce your vector tile buffer size")}return h}function Ts(a,s){return{type:a.type,id:a.id,properties:a.properties,geometry:s?pu(a):[]}}function rl(a,s,h,E,M){a.emplaceBack(2*s+(E+1)/2,2*h+(M+1)/2)}var Nu=function(a){this.zoom=a.zoom,this.overscaling=a.overscaling,this.layers=a.layers,this.layerIds=this.layers.map(function(s){return s.id}),this.index=a.index,this.hasPattern=!1,this.layoutVertexArray=new Du,this.indexArray=new Dl,this.segments=new Tt,this.programConfigurations=new Ia(a.layers,a.zoom),this.stateDependentLayerIds=this.layers.filter(function(s){return s.isStateDependent()}).map(function(s){return s.id})};function zo(a,s){for(var h=0;h<a.length;h++)if(fl(s,a[h]))return!0;for(var E=0;E<s.length;E++)if(fl(a,s[E]))return!0;return!!gl(a,s)}function An(a,s,h){return!!fl(a,s)||!!Sf(s,a,h)}function vu(a,s){if(a.length===1)return Kc(s,a[0]);for(var h=0;h<s.length;h++)for(var E=s[h],M=0;M<E.length;M++)if(fl(a,E[M]))return!0;for(var L=0;L<a.length;L++)if(Kc(s,a[L]))return!0;for(var j=0;j<s.length;j++)if(gl(a,s[j]))return!0;return!1}function Nt(a,s,h){if(a.length>1){if(gl(a,s))return!0;for(var E=0;E<s.length;E++)if(Sf(s[E],a,h))return!0}for(var M=0;M<a.length;M++)if(Sf(a[M],s,h))return!0;return!1}function gl(a,s){if(a.length===0||s.length===0)return!1;for(var h=0;h<a.length-1;h++)for(var E=a[h],M=a[h+1],L=0;L<s.length-1;L++)if(Xu(E,M,s[L],s[L+1]))return!0;return!1}function Xu(a,s,h,E){return At(a,h,E)!==At(s,h,E)&&At(a,s,h)!==At(a,s,E)}function Sf(a,s,h){var E=h*h;if(s.length===1)return a.distSqr(s[0])<E;for(var M=1;M<s.length;M++)if(ip(a,s[M-1],s[M])<E)return!0;return!1}function ip(a,s,h){var E=s.distSqr(h);if(E===0)return a.distSqr(s);var M=((a.x-s.x)*(h.x-s.x)+(a.y-s.y)*(h.y-s.y))/E;return a.distSqr(M<0?s:M>1?h:h.sub(s)._mult(M)._add(s))}function Kc(a,s){for(var h,E,M,L=!1,j=0;j<a.length;j++)for(var re=0,Ce=(h=a[j]).length-1;re<h.length;Ce=re++)(E=h[re]).y>s.y!=(M=h[Ce]).y>s.y&&s.x<(M.x-E.x)*(s.y-E.y)/(M.y-E.y)+E.x&&(L=!L);return L}function fl(a,s){for(var h=!1,E=0,M=a.length-1;E<a.length;M=E++){var L=a[E],j=a[M];L.y>s.y!=j.y>s.y&&s.x<(j.x-L.x)*(s.y-L.y)/(j.y-L.y)+L.x&&(h=!h)}return h}function Qc(a,s,h){var E=h[0],M=h[2];if(a.x<E.x&&s.x<E.x||a.x>M.x&&s.x>M.x||a.y<E.y&&s.y<E.y||a.y>M.y&&s.y>M.y)return!1;var L=At(a,s,h[0]);return L!==At(a,s,h[1])||L!==At(a,s,h[2])||L!==At(a,s,h[3])}function Sc(a,s,h){var E=s.paint.get(a).value;return E.kind==="constant"?E.value:h.programConfigurations.get(s.id).getMaxValue(a)}function Lu(a){return Math.sqrt(a[0]*a[0]+a[1]*a[1])}function Fl(a,s,h,E,M){if(!s[0]&&!s[1])return a;var L=k.convert(s)._mult(M);h==="viewport"&&L._rotate(-E);for(var j=[],re=0;re<a.length;re++)j.push(a[re].sub(L));return j}Nu.prototype.populate=function(a,s,h){var E=this.layers[0],M=[],L=null;E.type==="circle"&&(L=E.layout.get("circle-sort-key"));for(var j=0,re=a;j<re.length;j+=1){var Ce=re[j],ze=Ce.feature,We=Ce.id,Je=Ce.index,_t=Ce.sourceLayerIndex,It=this.layers[0]._featureFilter.needGeometry,ar=Ts(ze,It);if(this.layers[0]._featureFilter.filter(new li(this.zoom),ar,h)){var ur=L?L.evaluate(ar,{},h):void 0,Rr={id:We,properties:ze.properties,type:ze.type,sourceLayerIndex:_t,index:Je,geometry:It?ar.geometry:pu(ze),patterns:{},sortKey:ur};M.push(Rr)}}L&&M.sort(function(p,y){return p.sortKey-y.sortKey});for(var mr=0,cn=M;mr<cn.length;mr+=1){var wn=cn[mr],Gn=wn.geometry,Zn=wn.index,gi=wn.sourceLayerIndex,Yi=a[Zn].feature;this.addFeature(wn,Gn,Zn,h),s.featureIndex.insert(Yi,Gn,Zn,gi,this.index)}},Nu.prototype.update=function(a,s,h){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(a,s,this.stateDependentLayers,h)},Nu.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},Nu.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},Nu.prototype.upload=function(a){this.uploaded||(this.layoutVertexBuffer=a.createVertexBuffer(this.layoutVertexArray,Ct),this.indexBuffer=a.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(a),this.uploaded=!0},Nu.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},Nu.prototype.addFeature=function(a,s,h,E){for(var M=0,L=s;M<L.length;M+=1)for(var j=0,re=L[M];j<re.length;j+=1){var Ce=re[j],ze=Ce.x,We=Ce.y;if(!(ze<0||ze>=8192||We<0||We>=8192)){var Je=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,a.sortKey),_t=Je.vertexLength;rl(this.layoutVertexArray,ze,We,-1,-1),rl(this.layoutVertexArray,ze,We,1,-1),rl(this.layoutVertexArray,ze,We,1,1),rl(this.layoutVertexArray,ze,We,-1,1),this.indexArray.emplaceBack(_t,_t+1,_t+2),this.indexArray.emplaceBack(_t,_t+3,_t+2),Je.vertexLength+=4,Je.primitiveLength+=2}}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,a,h,{},E)},ji("CircleBucket",Nu,{omit:["layers"]});var fc=new Zs({"circle-sort-key":new la(bt.layout_circle["circle-sort-key"])}),Jc={paint:new Zs({"circle-radius":new la(bt.paint_circle["circle-radius"]),"circle-color":new la(bt.paint_circle["circle-color"]),"circle-blur":new la(bt.paint_circle["circle-blur"]),"circle-opacity":new la(bt.paint_circle["circle-opacity"]),"circle-translate":new Pa(bt.paint_circle["circle-translate"]),"circle-translate-anchor":new Pa(bt.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new Pa(bt.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new Pa(bt.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new la(bt.paint_circle["circle-stroke-width"]),"circle-stroke-color":new la(bt.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new la(bt.paint_circle["circle-stroke-opacity"])}),layout:fc},ts=typeof Float32Array!="undefined"?Float32Array:Array;function pl(a){return a[0]=1,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=1,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=1,a[11]=0,a[12]=0,a[13]=0,a[14]=0,a[15]=1,a}function Rl(a,s,h){var E=s[0],M=s[1],L=s[2],j=s[3],re=s[4],Ce=s[5],ze=s[6],We=s[7],Je=s[8],_t=s[9],It=s[10],ar=s[11],ur=s[12],Rr=s[13],mr=s[14],cn=s[15],wn=h[0],Gn=h[1],Zn=h[2],gi=h[3];return a[0]=wn*E+Gn*re+Zn*Je+gi*ur,a[1]=wn*M+Gn*Ce+Zn*_t+gi*Rr,a[2]=wn*L+Gn*ze+Zn*It+gi*mr,a[3]=wn*j+Gn*We+Zn*ar+gi*cn,a[4]=(wn=h[4])*E+(Gn=h[5])*re+(Zn=h[6])*Je+(gi=h[7])*ur,a[5]=wn*M+Gn*Ce+Zn*_t+gi*Rr,a[6]=wn*L+Gn*ze+Zn*It+gi*mr,a[7]=wn*j+Gn*We+Zn*ar+gi*cn,a[8]=(wn=h[8])*E+(Gn=h[9])*re+(Zn=h[10])*Je+(gi=h[11])*ur,a[9]=wn*M+Gn*Ce+Zn*_t+gi*Rr,a[10]=wn*L+Gn*ze+Zn*It+gi*mr,a[11]=wn*j+Gn*We+Zn*ar+gi*cn,a[12]=(wn=h[12])*E+(Gn=h[13])*re+(Zn=h[14])*Je+(gi=h[15])*ur,a[13]=wn*M+Gn*Ce+Zn*_t+gi*Rr,a[14]=wn*L+Gn*ze+Zn*It+gi*mr,a[15]=wn*j+Gn*We+Zn*ar+gi*cn,a}Math.hypot||(Math.hypot=function(){for(var a=arguments,s=0,h=arguments.length;h--;)s+=a[h]*a[h];return Math.sqrt(s)});var qc,ap=Rl;function ef(a,s,h){var E=s[0],M=s[1],L=s[2],j=s[3];return a[0]=h[0]*E+h[4]*M+h[8]*L+h[12]*j,a[1]=h[1]*E+h[5]*M+h[9]*L+h[13]*j,a[2]=h[2]*E+h[6]*M+h[10]*L+h[14]*j,a[3]=h[3]*E+h[7]*M+h[11]*L+h[15]*j,a}qc=new ts(3),ts!=Float32Array&&(qc[0]=0,qc[1]=0,qc[2]=0),function(){var a=new ts(4);ts!=Float32Array&&(a[0]=0,a[1]=0,a[2]=0,a[3]=0)}();var wf=(function(){var a=new ts(2);ts!=Float32Array&&(a[0]=0,a[1]=0)}(),function(a){function s(h){a.call(this,h,Jc)}return a&&(s.__proto__=a),(s.prototype=Object.create(a&&a.prototype)).constructor=s,s.prototype.createBucket=function(h){return new Nu(h)},s.prototype.queryRadius=function(h){var E=h;return Sc("circle-radius",this,E)+Sc("circle-stroke-width",this,E)+Lu(this.paint.get("circle-translate"))},s.prototype.queryIntersectsFeature=function(h,E,M,L,j,re,Ce,ze){for(var We=Fl(h,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),re.angle,Ce),Je=this.paint.get("circle-radius").evaluate(E,M)+this.paint.get("circle-stroke-width").evaluate(E,M),_t=this.paint.get("circle-pitch-alignment")==="map",It=_t?We:function(Yi,p){return Yi.map(function(y){return tc(y,p)})}(We,ze),ar=_t?Je*Ce:Je,ur=0,Rr=L;ur<Rr.length;ur+=1)for(var mr=0,cn=Rr[ur];mr<cn.length;mr+=1){var wn=cn[mr],Gn=_t?wn:tc(wn,ze),Zn=ar,gi=ef([],[wn.x,wn.y,0,1],ze);if(this.paint.get("circle-pitch-scale")==="viewport"&&this.paint.get("circle-pitch-alignment")==="map"?Zn*=gi[3]/re.cameraToCenterDistance:this.paint.get("circle-pitch-scale")==="map"&&this.paint.get("circle-pitch-alignment")==="viewport"&&(Zn*=re.cameraToCenterDistance/gi[3]),An(It,Gn,Zn))return!0}return!1},s}(ul));function tc(a,s){var h=ef([],[a.x,a.y,0,1],s);return new k(h[0]/h[3],h[1]/h[3])}var tf=function(a){function s(){a.apply(this,arguments)}return a&&(s.__proto__=a),(s.prototype=Object.create(a&&a.prototype)).constructor=s,s}(Nu);function Pl(a,s,h,E){var M=s.width,L=s.height;if(E){if(E instanceof Uint8ClampedArray)E=new Uint8Array(E.buffer);else if(E.length!==M*L*h)throw new RangeError("mismatched image size")}else E=new Uint8Array(M*L*h);return a.width=M,a.height=L,a.data=E,a}function rf(a,s,h){var E=s.width,M=s.height;if(E!==a.width||M!==a.height){var L=Pl({},{width:E,height:M},h);Af(a,L,{x:0,y:0},{x:0,y:0},{width:Math.min(a.width,E),height:Math.min(a.height,M)},h),a.width=E,a.height=M,a.data=L.data}}function Af(a,s,h,E,M,L){if(M.width===0||M.height===0)return s;if(M.width>a.width||M.height>a.height||h.x>a.width-M.width||h.y>a.height-M.height)throw new RangeError("out of range source coordinates for image copy");if(M.width>s.width||M.height>s.height||E.x>s.width-M.width||E.y>s.height-M.height)throw new RangeError("out of range destination coordinates for image copy");for(var j=a.data,re=s.data,Ce=0;Ce<M.height;Ce++)for(var ze=((h.y+Ce)*a.width+h.x)*L,We=((E.y+Ce)*s.width+E.x)*L,Je=0;Je<M.width*L;Je++)re[We+Je]=j[ze+Je];return s}ji("HeatmapBucket",tf,{omit:["layers"]});var Yu=function(a,s){Pl(this,a,1,s)};Yu.prototype.resize=function(a){rf(this,a,1)},Yu.prototype.clone=function(){return new Yu({width:this.width,height:this.height},new Uint8Array(this.data))},Yu.copy=function(a,s,h,E,M){Af(a,s,h,E,M,1)};var mu=function(a,s){Pl(this,a,4,s)};mu.prototype.resize=function(a){rf(this,a,4)},mu.prototype.replace=function(a,s){s?this.data.set(a):this.data=a instanceof Uint8ClampedArray?new Uint8Array(a.buffer):a},mu.prototype.clone=function(){return new mu({width:this.width,height:this.height},new Uint8Array(this.data))},mu.copy=function(a,s,h,E,M){Af(a,s,h,E,M,4)},ji("AlphaImage",Yu),ji("RGBAImage",mu);var nf={paint:new Zs({"heatmap-radius":new la(bt.paint_heatmap["heatmap-radius"]),"heatmap-weight":new la(bt.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new Pa(bt.paint_heatmap["heatmap-intensity"]),"heatmap-color":new wu(bt.paint_heatmap["heatmap-color"]),"heatmap-opacity":new Pa(bt.paint_heatmap["heatmap-opacity"])})};function Cf(a){var s={},h=a.resolution||256,E=a.clips?a.clips.length:1,M=a.image||new mu({width:h,height:E}),L=function(ar,ur,Rr){s[a.evaluationKey]=Rr;var mr=a.expression.evaluate(s);M.data[ar+ur+0]=Math.floor(255*mr.r/mr.a),M.data[ar+ur+1]=Math.floor(255*mr.g/mr.a),M.data[ar+ur+2]=Math.floor(255*mr.b/mr.a),M.data[ar+ur+3]=Math.floor(255*mr.a)};if(a.clips)for(var j=0,re=0;j<E;++j,re+=4*h)for(var Ce=0,ze=0;Ce<h;Ce++,ze+=4){var We=Ce/(h-1),Je=a.clips[j];L(re,ze,Je.start*(1-We)+Je.end*We)}else for(var _t=0,It=0;_t<h;_t++,It+=4)L(0,It,_t/(h-1));return M}var wp=function(a){function s(h){a.call(this,h,nf),this._updateColorRamp()}return a&&(s.__proto__=a),(s.prototype=Object.create(a&&a.prototype)).constructor=s,s.prototype.createBucket=function(h){return new tf(h)},s.prototype._handleSpecialPaintPropertyUpdate=function(h){h==="heatmap-color"&&this._updateColorRamp()},s.prototype._updateColorRamp=function(){this.colorRamp=Cf({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null},s.prototype.resize=function(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)},s.prototype.queryRadius=function(){return 0},s.prototype.queryIntersectsFeature=function(){return!1},s.prototype.hasOffscreenPass=function(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"},s}(ul),Gf={paint:new Zs({"hillshade-illumination-direction":new Pa(bt.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new Pa(bt.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new Pa(bt.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new Pa(bt.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new Pa(bt.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new Pa(bt.paint_hillshade["hillshade-accent-color"])})},zp=function(a){function s(h){a.call(this,h,Gf)}return a&&(s.__proto__=a),(s.prototype=Object.create(a&&a.prototype)).constructor=s,s.prototype.hasOffscreenPass=function(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"},s}(ul),Tf=Qo([{name:"a_pos",components:2,type:"Int16"}],4).members,ks=Yp,Mf=Yp;function Yp(a,s,h){h=h||2;var E,M,L,j,re,Ce,ze,We=s&&s.length,Je=We?s[0]*h:a.length,_t=Up(a,0,Je,h,!0),It=[];if(!_t||_t.next===_t.prev)return It;if(We&&(_t=function(ur,Rr,mr,cn){var wn,Gn,Zn,gi=[];for(wn=0,Gn=Rr.length;wn<Gn;wn++)(Zn=Up(ur,Rr[wn]*cn,wn<Gn-1?Rr[wn+1]*cn:ur.length,cn,!1))===Zn.next&&(Zn.steiner=!0),gi.push(rc(Zn));for(gi.sort(hp),wn=0;wn<gi.length;wn++)wc(gi[wn],mr),mr=Jo(mr,mr.next);return mr}(a,s,_t,h)),a.length>80*h){E=L=a[0],M=j=a[1];for(var ar=h;ar<Je;ar+=h)(re=a[ar])<E&&(E=re),(Ce=a[ar+1])<M&&(M=Ce),re>L&&(L=re),Ce>j&&(j=Ce);ze=(ze=Math.max(L-E,j-M))!==0?1/ze:0}return Ap(_t,It,h,E,M,ze),It}function Up(a,s,h,E,M){var L,j;if(M===af(a,s,h,E)>0)for(L=s;L<h;L+=E)j=Vp(L,a[L],a[L+1],j);else for(L=h-E;L>=s;L-=E)j=Vp(L,a[L],a[L+1],j);return j&&kl(j,j.next)&&(If(j),j=j.next),j}function Jo(a,s){if(!a)return a;s||(s=a);var h,E=a;do if(h=!1,E.steiner||!kl(E,E.next)&&Ms(E.prev,E,E.next)!==0)E=E.next;else{if(If(E),(E=s=E.prev)===E.next)break;h=!0}while(h||E!==s);return s}function Ap(a,s,h,E,M,L,j){if(a){!j&&L&&function(We,Je,_t,It){var ar=We;do ar.z===null&&(ar.z=jp(ar.x,ar.y,Je,_t,It)),ar.prevZ=ar.prev,ar.nextZ=ar.next,ar=ar.next;while(ar!==We);ar.prevZ.nextZ=null,ar.prevZ=null,function(ur){var Rr,mr,cn,wn,Gn,Zn,gi,Yi,p=1;do{for(mr=ur,ur=null,Gn=null,Zn=0;mr;){for(Zn++,cn=mr,gi=0,Rr=0;Rr<p&&(gi++,cn=cn.nextZ);Rr++);for(Yi=p;gi>0||Yi>0&&cn;)gi!==0&&(Yi===0||!cn||mr.z<=cn.z)?(wn=mr,mr=mr.nextZ,gi--):(wn=cn,cn=cn.nextZ,Yi--),Gn?Gn.nextZ=wn:ur=wn,wn.prevZ=Gn,Gn=wn;mr=cn}Gn.nextZ=null,p*=2}while(Zn>1)}(ar)}(a,E,M,L);for(var re,Ce,ze=a;a.prev!==a.next;)if(re=a.prev,Ce=a.next,L?gu(a,E,M,L):op(a))s.push(re.i/h),s.push(a.i/h),s.push(Ce.i/h),If(a),a=Ce.next,ze=Ce.next;else if((a=Ce)===ze){j?j===1?Ap(a=nl(Jo(a),s,h),s,h,E,M,L,2):j===2&&il(a,s,h,E,M,L):Ap(Jo(a),s,h,E,M,L,1);break}}}function op(a){var s=a.prev,h=a,E=a.next;if(Ms(s,h,E)>=0)return!1;for(var M=a.next.next;M!==a.prev;){if(dp(s.x,s.y,h.x,h.y,E.x,E.y,M.x,M.y)&&Ms(M.prev,M,M.next)>=0)return!1;M=M.next}return!0}function gu(a,s,h,E){var M=a.prev,L=a,j=a.next;if(Ms(M,L,j)>=0)return!1;for(var re=M.x>L.x?M.x>j.x?M.x:j.x:L.x>j.x?L.x:j.x,Ce=M.y>L.y?M.y>j.y?M.y:j.y:L.y>j.y?L.y:j.y,ze=jp(M.x<L.x?M.x<j.x?M.x:j.x:L.x<j.x?L.x:j.x,M.y<L.y?M.y<j.y?M.y:j.y:L.y<j.y?L.y:j.y,s,h,E),We=jp(re,Ce,s,h,E),Je=a.prevZ,_t=a.nextZ;Je&&Je.z>=ze&&_t&&_t.z<=We;){if(Je!==a.prev&&Je!==a.next&&dp(M.x,M.y,L.x,L.y,j.x,j.y,Je.x,Je.y)&&Ms(Je.prev,Je,Je.next)>=0||(Je=Je.prevZ,_t!==a.prev&&_t!==a.next&&dp(M.x,M.y,L.x,L.y,j.x,j.y,_t.x,_t.y)&&Ms(_t.prev,_t,_t.next)>=0))return!1;_t=_t.nextZ}for(;Je&&Je.z>=ze;){if(Je!==a.prev&&Je!==a.next&&dp(M.x,M.y,L.x,L.y,j.x,j.y,Je.x,Je.y)&&Ms(Je.prev,Je,Je.next)>=0)return!1;Je=Je.prevZ}for(;_t&&_t.z<=We;){if(_t!==a.prev&&_t!==a.next&&dp(M.x,M.y,L.x,L.y,j.x,j.y,_t.x,_t.y)&&Ms(_t.prev,_t,_t.next)>=0)return!1;_t=_t.nextZ}return!0}function nl(a,s,h){var E=a;do{var M=E.prev,L=E.next.next;!kl(M,L)&&Bc(M,E,E.next,L)&&mp(M,L)&&mp(L,M)&&(s.push(M.i/h),s.push(E.i/h),s.push(L.i/h),If(E),If(E.next),E=a=L),E=E.next}while(E!==a);return Jo(E)}function il(a,s,h,E,M,L){var j=a;do{for(var re=j.next.next;re!==j.prev;){if(j.i!==re.i&&oh(j,re)){var Ce=gp(j,re);return j=Jo(j,j.next),Ce=Jo(Ce,Ce.next),Ap(j,s,h,E,M,L),void Ap(Ce,s,h,E,M,L)}re=re.next}j=j.next}while(j!==a)}function hp(a,s){return a.x-s.x}function wc(a,s){if(s=function(E,M){var L,j=M,re=E.x,Ce=E.y,ze=-1/0;do{if(Ce<=j.y&&Ce>=j.next.y&&j.next.y!==j.y){var We=j.x+(Ce-j.y)*(j.next.x-j.x)/(j.next.y-j.y);if(We<=re&&We>ze){if(ze=We,We===re){if(Ce===j.y)return j;if(Ce===j.next.y)return j.next}L=j.x<j.next.x?j:j.next}}j=j.next}while(j!==M);if(!L)return null;if(re===ze)return L;var Je,_t=L,It=L.x,ar=L.y,ur=1/0;j=L;do re>=j.x&&j.x>=It&&re!==j.x&&dp(Ce<ar?re:ze,Ce,It,ar,Ce<ar?ze:re,Ce,j.x,j.y)&&(Je=Math.abs(Ce-j.y)/(re-j.x),mp(j,E)&&(Je<ur||Je===ur&&(j.x>L.x||j.x===L.x&&Zp(L,j)))&&(L=j,ur=Je)),j=j.next;while(j!==_t);return L}(a,s)){var h=gp(s,a);Jo(s,s.next),Jo(h,h.next)}}function Zp(a,s){return Ms(a.prev,a,s.prev)<0&&Ms(s.next,a,a.next)<0}function jp(a,s,h,E,M){return(a=1431655765&((a=858993459&((a=252645135&((a=16711935&((a=32767*(a-h)*M)|a<<8))|a<<4))|a<<2))|a<<1))|(s=1431655765&((s=858993459&((s=252645135&((s=16711935&((s=32767*(s-E)*M)|s<<8))|s<<4))|s<<2))|s<<1))<<1}function rc(a){var s=a,h=a;do(s.x<h.x||s.x===h.x&&s.y<h.y)&&(h=s),s=s.next;while(s!==a);return h}function dp(a,s,h,E,M,L,j,re){return(M-j)*(s-re)-(a-j)*(L-re)>=0&&(a-j)*(E-re)-(h-j)*(s-re)>=0&&(h-j)*(L-re)-(M-j)*(E-re)>=0}function oh(a,s){return a.next.i!==s.i&&a.prev.i!==s.i&&!function(h,E){var M=h;do{if(M.i!==h.i&&M.next.i!==h.i&&M.i!==E.i&&M.next.i!==E.i&&Bc(M,M.next,h,E))return!0;M=M.next}while(M!==h);return!1}(a,s)&&(mp(a,s)&&mp(s,a)&&function(h,E){var M=h,L=!1,j=(h.x+E.x)/2,re=(h.y+E.y)/2;do M.y>re!=M.next.y>re&&M.next.y!==M.y&&j<(M.next.x-M.x)*(re-M.y)/(M.next.y-M.y)+M.x&&(L=!L),M=M.next;while(M!==h);return L}(a,s)&&(Ms(a.prev,a,s.prev)||Ms(a,s.prev,s))||kl(a,s)&&Ms(a.prev,a,a.next)>0&&Ms(s.prev,s,s.next)>0)}function Ms(a,s,h){return(s.y-a.y)*(h.x-s.x)-(s.x-a.x)*(h.y-s.y)}function kl(a,s){return a.x===s.x&&a.y===s.y}function Bc(a,s,h,E){var M=Hf(Ms(a,s,h)),L=Hf(Ms(a,s,E)),j=Hf(Ms(h,E,a)),re=Hf(Ms(h,E,s));return M!==L&&j!==re||!(M!==0||!vp(a,h,s))||!(L!==0||!vp(a,E,s))||!(j!==0||!vp(h,a,E))||!(re!==0||!vp(h,s,E))}function vp(a,s,h){return s.x<=Math.max(a.x,h.x)&&s.x>=Math.min(a.x,h.x)&&s.y<=Math.max(a.y,h.y)&&s.y>=Math.min(a.y,h.y)}function Hf(a){return a>0?1:a<0?-1:0}function mp(a,s){return Ms(a.prev,a,a.next)<0?Ms(a,s,a.next)>=0&&Ms(a,a.prev,s)>=0:Ms(a,s,a.prev)<0||Ms(a,a.next,s)<0}function gp(a,s){var h=new Of(a.i,a.x,a.y),E=new Of(s.i,s.x,s.y),M=a.next,L=s.prev;return a.next=s,s.prev=a,h.next=M,M.prev=h,E.next=h,h.prev=E,L.next=E,E.prev=L,E}function Vp(a,s,h,E){var M=new Of(a,s,h);return E?(M.next=E.next,M.prev=E,E.next.prev=M,E.next=M):(M.prev=M,M.next=M),M}function If(a){a.next.prev=a.prev,a.prev.next=a.next,a.prevZ&&(a.prevZ.nextZ=a.nextZ),a.nextZ&&(a.nextZ.prevZ=a.prevZ)}function Of(a,s,h){this.i=a,this.x=s,this.y=h,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function af(a,s,h,E){for(var M=0,L=s,j=h-E;L<h;L+=E)M+=(a[j]-a[L])*(a[L+1]+a[j+1]),j=L;return M}function sh(a,s,h,E,M){(function L(j,re,Ce,ze,We){for(;ze>Ce;){if(ze-Ce>600){var Je=ze-Ce+1,_t=re-Ce+1,It=Math.log(Je),ar=.5*Math.exp(2*It/3),ur=.5*Math.sqrt(It*ar*(Je-ar)/Je)*(_t-Je/2<0?-1:1);L(j,re,Math.max(Ce,Math.floor(re-_t*ar/Je+ur)),Math.min(ze,Math.floor(re+(Je-_t)*ar/Je+ur)),We)}var Rr=j[re],mr=Ce,cn=ze;for(zc(j,Ce,re),We(j[ze],Rr)>0&&zc(j,Ce,ze);mr<cn;){for(zc(j,mr,cn),mr++,cn--;We(j[mr],Rr)<0;)mr++;for(;We(j[cn],Rr)>0;)cn--}We(j[Ce],Rr)===0?zc(j,Ce,cn):zc(j,++cn,ze),cn<=re&&(Ce=cn+1),re<=cn&&(ze=cn-1)}})(a,s,h||0,E||a.length-1,M||yp)}function zc(a,s,h){var E=a[s];a[s]=a[h],a[h]=E}function yp(a,s){return a<s?-1:a>s?1:0}function df(a,s){var h=a.length;if(h<=1)return[a];for(var E,M,L=[],j=0;j<h;j++){var re=mt(a[j]);re!==0&&(a[j].area=Math.abs(re),M===void 0&&(M=re<0),M===re<0?(E&&L.push(E),E=[a[j]]):E.push(a[j]))}if(E&&L.push(E),s>1)for(var Ce=0;Ce<L.length;Ce++)L[Ce].length<=s||(sh(L[Ce],s,1,L[Ce].length-1,_p),L[Ce]=L[Ce].slice(0,s));return L}function _p(a,s){return s.area-a.area}function Rf(a,s,h){for(var E=h.patternDependencies,M=!1,L=0,j=s;L<j.length;L+=1){var re=j[L].paint.get(a+"-pattern");re.isConstant()||(M=!0);var Ce=re.constantOr(null);Ce&&(M=!0,E[Ce.to]=!0,E[Ce.from]=!0)}return M}function xp(a,s,h,E,M){for(var L=M.patternDependencies,j=0,re=s;j<re.length;j+=1){var Ce=re[j],ze=Ce.paint.get(a+"-pattern").value;if(ze.kind!=="constant"){var We=ze.evaluate({zoom:E-1},h,{},M.availableImages),Je=ze.evaluate({zoom:E},h,{},M.availableImages),_t=ze.evaluate({zoom:E+1},h,{},M.availableImages);Je=Je&&Je.name?Je.name:Je,_t=_t&&_t.name?_t.name:_t,L[We=We&&We.name?We.name:We]=!0,L[Je]=!0,L[_t]=!0,h.patterns[Ce.id]={min:We,mid:Je,max:_t}}}return h}Yp.deviation=function(a,s,h,E){var M=s&&s.length,L=Math.abs(af(a,0,M?s[0]*h:a.length,h));if(M)for(var j=0,re=s.length;j<re;j++)L-=Math.abs(af(a,s[j]*h,j<re-1?s[j+1]*h:a.length,h));var Ce=0;for(j=0;j<E.length;j+=3){var ze=E[j]*h,We=E[j+1]*h,Je=E[j+2]*h;Ce+=Math.abs((a[ze]-a[Je])*(a[We+1]-a[ze+1])-(a[ze]-a[We])*(a[Je+1]-a[ze+1]))}return L===0&&Ce===0?0:Math.abs((Ce-L)/L)},Yp.flatten=function(a){for(var s=a[0][0].length,h={vertices:[],holes:[],dimensions:s},E=0,M=0;M<a.length;M++){for(var L=0;L<a[M].length;L++)for(var j=0;j<s;j++)h.vertices.push(a[M][L][j]);M>0&&h.holes.push(E+=a[M-1].length)}return h},ks.default=Mf;var hl=function(a){this.zoom=a.zoom,this.overscaling=a.overscaling,this.layers=a.layers,this.layerIds=this.layers.map(function(s){return s.id}),this.index=a.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new Du,this.indexArray=new Dl,this.indexArray2=new Nc,this.programConfigurations=new Ia(a.layers,a.zoom),this.segments=new Tt,this.segments2=new Tt,this.stateDependentLayerIds=this.layers.filter(function(s){return s.isStateDependent()}).map(function(s){return s.id})};hl.prototype.populate=function(a,s,h){this.hasPattern=Rf("fill",this.layers,s);for(var E=this.layers[0].layout.get("fill-sort-key"),M=[],L=0,j=a;L<j.length;L+=1){var re=j[L],Ce=re.feature,ze=re.id,We=re.index,Je=re.sourceLayerIndex,_t=this.layers[0]._featureFilter.needGeometry,It=Ts(Ce,_t);if(this.layers[0]._featureFilter.filter(new li(this.zoom),It,h)){var ar=E?E.evaluate(It,{},h,s.availableImages):void 0,ur={id:ze,properties:Ce.properties,type:Ce.type,sourceLayerIndex:Je,index:We,geometry:_t?It.geometry:pu(Ce),patterns:{},sortKey:ar};M.push(ur)}}E&&M.sort(function(Yi,p){return Yi.sortKey-p.sortKey});for(var Rr=0,mr=M;Rr<mr.length;Rr+=1){var cn=mr[Rr],wn=cn.geometry,Gn=cn.index,Zn=cn.sourceLayerIndex;if(this.hasPattern){var gi=xp("fill",this.layers,cn,this.zoom,s);this.patternFeatures.push(gi)}else this.addFeature(cn,wn,Gn,h,{});s.featureIndex.insert(a[Gn].feature,wn,Gn,Zn,this.index)}},hl.prototype.update=function(a,s,h){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(a,s,this.stateDependentLayers,h)},hl.prototype.addFeatures=function(a,s,h){for(var E=0,M=this.patternFeatures;E<M.length;E+=1){var L=M[E];this.addFeature(L,L.geometry,L.index,s,h)}},hl.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},hl.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},hl.prototype.upload=function(a){this.uploaded||(this.layoutVertexBuffer=a.createVertexBuffer(this.layoutVertexArray,Tf),this.indexBuffer=a.createIndexBuffer(this.indexArray),this.indexBuffer2=a.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(a),this.uploaded=!0},hl.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())},hl.prototype.addFeature=function(a,s,h,E,M){for(var L=0,j=df(s,500);L<j.length;L+=1){for(var re=j[L],Ce=0,ze=0,We=re;ze<We.length;ze+=1)Ce+=We[ze].length;for(var Je=this.segments.prepareSegment(Ce,this.layoutVertexArray,this.indexArray),_t=Je.vertexLength,It=[],ar=[],ur=0,Rr=re;ur<Rr.length;ur+=1){var mr=Rr[ur];if(mr.length!==0){mr!==re[0]&&ar.push(It.length/2);var cn=this.segments2.prepareSegment(mr.length,this.layoutVertexArray,this.indexArray2),wn=cn.vertexLength;this.layoutVertexArray.emplaceBack(mr[0].x,mr[0].y),this.indexArray2.emplaceBack(wn+mr.length-1,wn),It.push(mr[0].x),It.push(mr[0].y);for(var Gn=1;Gn<mr.length;Gn++)this.layoutVertexArray.emplaceBack(mr[Gn].x,mr[Gn].y),this.indexArray2.emplaceBack(wn+Gn-1,wn+Gn),It.push(mr[Gn].x),It.push(mr[Gn].y);cn.vertexLength+=mr.length,cn.primitiveLength+=mr.length}}for(var Zn=ks(It,ar),gi=0;gi<Zn.length;gi+=3)this.indexArray.emplaceBack(_t+Zn[gi],_t+Zn[gi+1],_t+Zn[gi+2]);Je.vertexLength+=Ce,Je.primitiveLength+=Zn.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,a,h,M,E)},ji("FillBucket",hl,{omit:["layers","patternFeatures"]});var He=new Zs({"fill-sort-key":new la(bt.layout_fill["fill-sort-key"])}),Au={paint:new Zs({"fill-antialias":new Pa(bt.paint_fill["fill-antialias"]),"fill-opacity":new la(bt.paint_fill["fill-opacity"]),"fill-color":new la(bt.paint_fill["fill-color"]),"fill-outline-color":new la(bt.paint_fill["fill-outline-color"]),"fill-translate":new Pa(bt.paint_fill["fill-translate"]),"fill-translate-anchor":new Pa(bt.paint_fill["fill-translate-anchor"]),"fill-pattern":new sl(bt.paint_fill["fill-pattern"])}),layout:He},yl=function(a){function s(h){a.call(this,h,Au)}return a&&(s.__proto__=a),(s.prototype=Object.create(a&&a.prototype)).constructor=s,s.prototype.recalculate=function(h,E){a.prototype.recalculate.call(this,h,E);var M=this.paint._values["fill-outline-color"];M.value.kind==="constant"&&M.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])},s.prototype.createBucket=function(h){return new hl(h)},s.prototype.queryRadius=function(){return Lu(this.paint.get("fill-translate"))},s.prototype.queryIntersectsFeature=function(h,E,M,L,j,re,Ce){return vu(Fl(h,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),re.angle,Ce),L)},s.prototype.isTileClipped=function(){return!0},s}(ul),bp=Qo([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4).members,Kp=Ku;function Ku(a,s,h,E,M){this.properties={},this.extent=h,this.type=0,this._pbf=a,this._geometry=-1,this._keys=E,this._values=M,a.readFields(Ac,this,s)}function Ac(a,s,h){a==1?s.id=h.readVarint():a==2?function(E,M){for(var L=E.readVarint()+E.pos;E.pos<L;){var j=M._keys[E.readVarint()],re=M._values[E.readVarint()];M.properties[j]=re}}(h,s):a==3?s.type=h.readVarint():a==4&&(s._geometry=h.pos)}function kh(a){for(var s,h,E=0,M=0,L=a.length,j=L-1;M<L;j=M++)E+=((h=a[j]).x-(s=a[M]).x)*(s.y+h.y);return E}Ku.types=["Unknown","Point","LineString","Polygon"],Ku.prototype.loadGeometry=function(){var a=this._pbf;a.pos=this._geometry;for(var s,h=a.readVarint()+a.pos,E=1,M=0,L=0,j=0,re=[];a.pos<h;){if(M<=0){var Ce=a.readVarint();E=7&Ce,M=Ce>>3}if(M--,E===1||E===2)L+=a.readSVarint(),j+=a.readSVarint(),E===1&&(s&&re.push(s),s=[]),s.push(new k(L,j));else{if(E!==7)throw new Error("unknown command "+E);s&&s.push(s[0].clone())}}return s&&re.push(s),re},Ku.prototype.bbox=function(){var a=this._pbf;a.pos=this._geometry;for(var s=a.readVarint()+a.pos,h=1,E=0,M=0,L=0,j=1/0,re=-1/0,Ce=1/0,ze=-1/0;a.pos<s;){if(E<=0){var We=a.readVarint();h=7&We,E=We>>3}if(E--,h===1||h===2)(M+=a.readSVarint())<j&&(j=M),M>re&&(re=M),(L+=a.readSVarint())<Ce&&(Ce=L),L>ze&&(ze=L);else if(h!==7)throw new Error("unknown command "+h)}return[j,Ce,re,ze]},Ku.prototype.toGeoJSON=function(a,s,h){var E,M,L=this.extent*Math.pow(2,h),j=this.extent*a,re=this.extent*s,Ce=this.loadGeometry(),ze=Ku.types[this.type];function We(It){for(var ar=0;ar<It.length;ar++){var ur=It[ar];It[ar]=[360*(ur.x+j)/L-180,360/Math.PI*Math.atan(Math.exp((180-360*(ur.y+re)/L)*Math.PI/180))-90]}}switch(this.type){case 1:var Je=[];for(E=0;E<Ce.length;E++)Je[E]=Ce[E][0];We(Ce=Je);break;case 2:for(E=0;E<Ce.length;E++)We(Ce[E]);break;case 3:for(Ce=function(It){var ar=It.length;if(ar<=1)return[It];for(var ur,Rr,mr=[],cn=0;cn<ar;cn++){var wn=kh(It[cn]);wn!==0&&(Rr===void 0&&(Rr=wn<0),Rr===wn<0?(ur&&mr.push(ur),ur=[It[cn]]):ur.push(It[cn]))}return ur&&mr.push(ur),mr}(Ce),E=0;E<Ce.length;E++)for(M=0;M<Ce[E].length;M++)We(Ce[E][M])}Ce.length===1?Ce=Ce[0]:ze="Multi"+ze;var _t={type:"Feature",geometry:{type:ze,coordinates:Ce},properties:this.properties};return"id"in this&&(_t.id=this.id),_t};var ls=uh;function uh(a,s){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=a,this._keys=[],this._values=[],this._features=[],a.readFields(Pf,this,s),this.length=this._features.length}function Pf(a,s,h){a===15?s.version=h.readVarint():a===1?s.name=h.readString():a===5?s.extent=h.readVarint():a===2?s._features.push(h.pos):a===3?s._keys.push(h.readString()):a===4&&s._values.push(function(E){for(var M=null,L=E.readVarint()+E.pos;E.pos<L;){var j=E.readVarint()>>3;M=j===1?E.readString():j===2?E.readFloat():j===3?E.readDouble():j===4?E.readVarint64():j===5?E.readVarint():j===6?E.readSVarint():j===7?E.readBoolean():null}return M}(h))}function kf(a,s,h){if(a===3){var E=new ls(h,h.readVarint()+h.pos);E.length&&(s[E.name]=E)}}uh.prototype.feature=function(a){if(a<0||a>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[a];var s=this._pbf.readVarint()+this._pbf.pos;return new Kp(this._pbf,s,this.extent,this._keys,this._values)};var Uc={VectorTile:function(a,s){this.layers=a.readFields(kf,{},s)},VectorTileFeature:Kp,VectorTileLayer:ls},al=Uc.VectorTileFeature.types,Lf=Math.pow(2,13);function Wf(a,s,h,E,M,L,j,re){a.emplaceBack(s,h,2*Math.floor(E*Lf)+j,M*Lf*2,L*Lf*2,Math.round(re))}var pc=function(a){this.zoom=a.zoom,this.overscaling=a.overscaling,this.layers=a.layers,this.layerIds=this.layers.map(function(s){return s.id}),this.index=a.index,this.hasPattern=!1,this.layoutVertexArray=new ll,this.indexArray=new Dl,this.programConfigurations=new Ia(a.layers,a.zoom),this.segments=new Tt,this.stateDependentLayerIds=this.layers.filter(function(s){return s.isStateDependent()}).map(function(s){return s.id})};function Uh(a,s){return a.x===s.x&&(a.x<0||a.x>8192)||a.y===s.y&&(a.y<0||a.y>8192)}pc.prototype.populate=function(a,s,h){this.features=[],this.hasPattern=Rf("fill-extrusion",this.layers,s);for(var E=0,M=a;E<M.length;E+=1){var L=M[E],j=L.feature,re=L.id,Ce=L.index,ze=L.sourceLayerIndex,We=this.layers[0]._featureFilter.needGeometry,Je=Ts(j,We);if(this.layers[0]._featureFilter.filter(new li(this.zoom),Je,h)){var _t={id:re,sourceLayerIndex:ze,index:Ce,geometry:We?Je.geometry:pu(j),properties:j.properties,type:j.type,patterns:{}};this.hasPattern?this.features.push(xp("fill-extrusion",this.layers,_t,this.zoom,s)):this.addFeature(_t,_t.geometry,Ce,h,{}),s.featureIndex.insert(j,_t.geometry,Ce,ze,this.index,!0)}}},pc.prototype.addFeatures=function(a,s,h){for(var E=0,M=this.features;E<M.length;E+=1){var L=M[E];this.addFeature(L,L.geometry,L.index,s,h)}},pc.prototype.update=function(a,s,h){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(a,s,this.stateDependentLayers,h)},pc.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},pc.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},pc.prototype.upload=function(a){this.uploaded||(this.layoutVertexBuffer=a.createVertexBuffer(this.layoutVertexArray,bp),this.indexBuffer=a.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(a),this.uploaded=!0},pc.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},pc.prototype.addFeature=function(a,s,h,E,M){for(var L=0,j=df(s,500);L<j.length;L+=1){for(var re=j[L],Ce=0,ze=0,We=re;ze<We.length;ze+=1)Ce+=We[ze].length;for(var Je=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray),_t=0,It=re;_t<It.length;_t+=1){var ar=It[_t];if(ar.length!==0&&!((wr=ar).every(function(fn){return fn.x<0})||wr.every(function(fn){return fn.x>8192})||wr.every(function(fn){return fn.y<0})||wr.every(function(fn){return fn.y>8192})))for(var ur=0,Rr=0;Rr<ar.length;Rr++){var mr=ar[Rr];if(Rr>=1){var cn=ar[Rr-1];if(!Uh(mr,cn)){Je.vertexLength+4>Tt.MAX_VERTEX_ARRAY_LENGTH&&(Je=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));var wn=mr.sub(cn)._perp()._unit(),Gn=cn.dist(mr);ur+Gn>32768&&(ur=0),Wf(this.layoutVertexArray,mr.x,mr.y,wn.x,wn.y,0,0,ur),Wf(this.layoutVertexArray,mr.x,mr.y,wn.x,wn.y,0,1,ur),Wf(this.layoutVertexArray,cn.x,cn.y,wn.x,wn.y,0,0,ur+=Gn),Wf(this.layoutVertexArray,cn.x,cn.y,wn.x,wn.y,0,1,ur);var Zn=Je.vertexLength;this.indexArray.emplaceBack(Zn,Zn+2,Zn+1),this.indexArray.emplaceBack(Zn+1,Zn+2,Zn+3),Je.vertexLength+=4,Je.primitiveLength+=2}}}}if(Je.vertexLength+Ce>Tt.MAX_VERTEX_ARRAY_LENGTH&&(Je=this.segments.prepareSegment(Ce,this.layoutVertexArray,this.indexArray)),al[a.type]==="Polygon"){for(var gi=[],Yi=[],p=Je.vertexLength,y=0,C=re;y<C.length;y+=1){var V=C[y];if(V.length!==0){V!==re[0]&&Yi.push(gi.length/2);for(var ae=0;ae<V.length;ae++){var Ie=V[ae];Wf(this.layoutVertexArray,Ie.x,Ie.y,0,0,1,1,0),gi.push(Ie.x),gi.push(Ie.y)}}}for(var ut=ks(gi,Yi),zt=0;zt<ut.length;zt+=3)this.indexArray.emplaceBack(p+ut[zt],p+ut[zt+2],p+ut[zt+1]);Je.primitiveLength+=ut.length/3,Je.vertexLength+=Ce}}var wr;this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,a,h,M,E)},ji("FillExtrusionBucket",pc,{omit:["layers","features"]});var Zh={paint:new Zs({"fill-extrusion-opacity":new Pa(bt["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new la(bt["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new Pa(bt["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new Pa(bt["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new sl(bt["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new la(bt["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new la(bt["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new Pa(bt["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})},Df=function(a){function s(h){a.call(this,h,Zh)}return a&&(s.__proto__=a),(s.prototype=Object.create(a&&a.prototype)).constructor=s,s.prototype.createBucket=function(h){return new pc(h)},s.prototype.queryRadius=function(){return Lu(this.paint.get("fill-extrusion-translate"))},s.prototype.is3D=function(){return!0},s.prototype.queryIntersectsFeature=function(h,E,M,L,j,re,Ce,ze){var We=Fl(h,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),re.angle,Ce),Je=this.paint.get("fill-extrusion-height").evaluate(E,M),_t=this.paint.get("fill-extrusion-base").evaluate(E,M),It=function(ur,Rr,mr,cn){for(var wn=[],Gn=0,Zn=ur;Gn<Zn.length;Gn+=1){var gi=Zn[Gn],Yi=[gi.x,gi.y,0,1];ef(Yi,Yi,Rr),wn.push(new k(Yi[0]/Yi[3],Yi[1]/Yi[3]))}return wn}(We,ze),ar=function(ur,Rr,mr,cn){for(var wn=[],Gn=[],Zn=cn[8]*Rr,gi=cn[9]*Rr,Yi=cn[10]*Rr,p=cn[11]*Rr,y=cn[8]*mr,C=cn[9]*mr,V=cn[10]*mr,ae=cn[11]*mr,Ie=0,ut=ur;Ie<ut.length;Ie+=1){for(var zt=[],wr=[],fn=0,pi=ut[Ie];fn<pi.length;fn+=1){var $n=pi[fn],hi=$n.x,ca=$n.y,Ra=cn[0]*hi+cn[4]*ca+cn[12],Da=cn[1]*hi+cn[5]*ca+cn[13],os=cn[2]*hi+cn[6]*ca+cn[14],gn=cn[3]*hi+cn[7]*ca+cn[15],Qr=os+Yi,In=gn+p,ra=Ra+y,Ba=Da+C,ho=os+V,ro=gn+ae,go=new k((Ra+Zn)/In,(Da+gi)/In);go.z=Qr/In,zt.push(go);var wo=new k(ra/ro,Ba/ro);wo.z=ho/ro,wr.push(wo)}wn.push(zt),Gn.push(wr)}return[wn,Gn]}(L,_t,Je,ze);return function(ur,Rr,mr){var cn=1/0;vu(mr,Rr)&&(cn=Ep(mr,Rr[0]));for(var wn=0;wn<Rr.length;wn++)for(var Gn=Rr[wn],Zn=ur[wn],gi=0;gi<Gn.length-1;gi++){var Yi=Gn[gi],p=[Yi,Gn[gi+1],Zn[gi+1],Zn[gi],Yi];zo(mr,p)&&(cn=Math.min(cn,Ep(mr,p)))}return cn!==1/0&&cn}(ar[0],ar[1],It)},s}(ul);function vf(a,s){return a.x*s.x+a.y*s.y}function Ep(a,s){if(a.length===1){for(var h,E=0,M=s[E++];!h||M.equals(h);)if(!(h=s[E++]))return 1/0;for(;E<s.length;E++){var L=s[E],j=a[0],re=h.sub(M),Ce=L.sub(M),ze=j.sub(M),We=vf(re,re),Je=vf(re,Ce),_t=vf(Ce,Ce),It=vf(ze,re),ar=vf(ze,Ce),ur=We*_t-Je*Je,Rr=(_t*It-Je*ar)/ur,mr=(We*ar-Je*It)/ur,cn=M.z*(1-Rr-mr)+h.z*Rr+L.z*mr;if(isFinite(cn))return cn}return 1/0}for(var wn=1/0,Gn=0,Zn=s;Gn<Zn.length;Gn+=1)wn=Math.min(wn,Zn[Gn].z);return wn}var H=Qo([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4).members,ue=Qo([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]).members,_e=Uc.VectorTileFeature.types,Be=Math.cos(Math.PI/180*37.5),rt=Math.pow(2,14)/.5,at=function(a){var s=this;this.zoom=a.zoom,this.overscaling=a.overscaling,this.layers=a.layers,this.layerIds=this.layers.map(function(h){return h.id}),this.index=a.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(function(h){s.gradients[h.id]={}}),this.layoutVertexArray=new eu,this.layoutVertexArray2=new Rt,this.indexArray=new Dl,this.programConfigurations=new Ia(a.layers,a.zoom),this.segments=new Tt,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(function(h){return h.isStateDependent()}).map(function(h){return h.id})};at.prototype.populate=function(a,s,h){this.hasPattern=Rf("line",this.layers,s);for(var E=this.layers[0].layout.get("line-sort-key"),M=[],L=0,j=a;L<j.length;L+=1){var re=j[L],Ce=re.feature,ze=re.id,We=re.index,Je=re.sourceLayerIndex,_t=this.layers[0]._featureFilter.needGeometry,It=Ts(Ce,_t);if(this.layers[0]._featureFilter.filter(new li(this.zoom),It,h)){var ar=E?E.evaluate(It,{},h):void 0,ur={id:ze,properties:Ce.properties,type:Ce.type,sourceLayerIndex:Je,index:We,geometry:_t?It.geometry:pu(Ce),patterns:{},sortKey:ar};M.push(ur)}}E&&M.sort(function(Yi,p){return Yi.sortKey-p.sortKey});for(var Rr=0,mr=M;Rr<mr.length;Rr+=1){var cn=mr[Rr],wn=cn.geometry,Gn=cn.index,Zn=cn.sourceLayerIndex;if(this.hasPattern){var gi=xp("line",this.layers,cn,this.zoom,s);this.patternFeatures.push(gi)}else this.addFeature(cn,wn,Gn,h,{});s.featureIndex.insert(a[Gn].feature,wn,Gn,Zn,this.index)}},at.prototype.update=function(a,s,h){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(a,s,this.stateDependentLayers,h)},at.prototype.addFeatures=function(a,s,h){for(var E=0,M=this.patternFeatures;E<M.length;E+=1){var L=M[E];this.addFeature(L,L.geometry,L.index,s,h)}},at.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},at.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},at.prototype.upload=function(a){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=a.createVertexBuffer(this.layoutVertexArray2,ue)),this.layoutVertexBuffer=a.createVertexBuffer(this.layoutVertexArray,H),this.indexBuffer=a.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(a),this.uploaded=!0},at.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},at.prototype.lineFeatureClips=function(a){if(a.properties&&a.properties.hasOwnProperty("mapbox_clip_start")&&a.properties.hasOwnProperty("mapbox_clip_end"))return{start:+a.properties.mapbox_clip_start,end:+a.properties.mapbox_clip_end}},at.prototype.addFeature=function(a,s,h,E,M){var L=this.layers[0].layout,j=L.get("line-join").evaluate(a,{}),re=L.get("line-cap"),Ce=L.get("line-miter-limit"),ze=L.get("line-round-limit");this.lineClips=this.lineFeatureClips(a);for(var We=0,Je=s;We<Je.length;We+=1)this.addLine(Je[We],a,j,re,Ce,ze);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,a,h,M,E)},at.prototype.addLine=function(a,s,h,E,M,L){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(var j=0;j<a.length-1;j++)this.totalDistance+=a[j].dist(a[j+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}for(var re=_e[s.type]==="Polygon",Ce=a.length;Ce>=2&&a[Ce-1].equals(a[Ce-2]);)Ce--;for(var ze=0;ze<Ce-1&&a[ze].equals(a[ze+1]);)ze++;if(!(Ce<(re?3:2))){h==="bevel"&&(M=1.05);var We,Je=this.overscaling<=16?122880/(512*this.overscaling):0,_t=this.segments.prepareSegment(10*Ce,this.layoutVertexArray,this.indexArray),It=void 0,ar=void 0,ur=void 0,Rr=void 0;this.e1=this.e2=-1,re&&(Rr=a[ze].sub(We=a[Ce-2])._unit()._perp());for(var mr=ze;mr<Ce;mr++)if(!(ar=mr===Ce-1?re?a[ze+1]:void 0:a[mr+1])||!a[mr].equals(ar)){Rr&&(ur=Rr),We&&(It=We),We=a[mr],Rr=ar?ar.sub(We)._unit()._perp():ur;var cn=(ur=ur||Rr).add(Rr);cn.x===0&&cn.y===0||cn._unit();var wn=ur.x*Rr.x+ur.y*Rr.y,Gn=cn.x*Rr.x+cn.y*Rr.y,Zn=Gn!==0?1/Gn:1/0,gi=2*Math.sqrt(2-2*Gn),Yi=Gn<Be&&It&&ar,p=ur.x*Rr.y-ur.y*Rr.x>0;if(Yi&&mr>ze){var y=We.dist(It);if(y>2*Je){var C=We.sub(We.sub(It)._mult(Je/y)._round());this.updateDistance(It,C),this.addCurrentVertex(C,ur,0,0,_t),It=C}}var V=It&&ar,ae=V?h:re?"butt":E;if(V&&ae==="round"&&(Zn<L?ae="miter":Zn<=2&&(ae="fakeround")),ae==="miter"&&Zn>M&&(ae="bevel"),ae==="bevel"&&(Zn>2&&(ae="flipbevel"),Zn<M&&(ae="miter")),It&&this.updateDistance(It,We),ae==="miter")cn._mult(Zn),this.addCurrentVertex(We,cn,0,0,_t);else if(ae==="flipbevel"){if(Zn>100)cn=Rr.mult(-1);else{var Ie=Zn*ur.add(Rr).mag()/ur.sub(Rr).mag();cn._perp()._mult(Ie*(p?-1:1))}this.addCurrentVertex(We,cn,0,0,_t),this.addCurrentVertex(We,cn.mult(-1),0,0,_t)}else if(ae==="bevel"||ae==="fakeround"){var ut=-Math.sqrt(Zn*Zn-1),zt=p?ut:0,wr=p?0:ut;if(It&&this.addCurrentVertex(We,ur,zt,wr,_t),ae==="fakeround")for(var fn=Math.round(180*gi/Math.PI/20),pi=1;pi<fn;pi++){var $n=pi/fn;if($n!==.5){var hi=$n-.5;$n+=$n*hi*($n-1)*((1.0904+wn*(wn*(3.55645-1.43519*wn)-3.2452))*hi*hi+(.848013+wn*(.215638*wn-1.06021)))}var ca=Rr.sub(ur)._mult($n)._add(ur)._unit()._mult(p?-1:1);this.addHalfVertex(We,ca.x,ca.y,!1,p,0,_t)}ar&&this.addCurrentVertex(We,Rr,-zt,-wr,_t)}else if(ae==="butt")this.addCurrentVertex(We,cn,0,0,_t);else if(ae==="square"){var Ra=It?1:-1;this.addCurrentVertex(We,cn,Ra,Ra,_t)}else ae==="round"&&(It&&(this.addCurrentVertex(We,ur,0,0,_t),this.addCurrentVertex(We,ur,1,1,_t,!0)),ar&&(this.addCurrentVertex(We,Rr,-1,-1,_t,!0),this.addCurrentVertex(We,Rr,0,0,_t)));if(Yi&&mr<Ce-1){var Da=We.dist(ar);if(Da>2*Je){var os=We.add(ar.sub(We)._mult(Je/Da)._round());this.updateDistance(We,os),this.addCurrentVertex(os,Rr,0,0,_t),We=os}}}}},at.prototype.addCurrentVertex=function(a,s,h,E,M,L){L===void 0&&(L=!1);var j=s.y*E-s.x,re=-s.y-s.x*E;this.addHalfVertex(a,s.x+s.y*h,s.y-s.x*h,L,!1,h,M),this.addHalfVertex(a,j,re,L,!0,-E,M),this.distance>rt/2&&this.totalDistance===0&&(this.distance=0,this.addCurrentVertex(a,s,h,E,M,L))},at.prototype.addHalfVertex=function(a,s,h,E,M,L,j){var re=.5*(this.lineClips?this.scaledDistance*(rt-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((a.x<<1)+(E?1:0),(a.y<<1)+(M?1:0),Math.round(63*s)+128,Math.round(63*h)+128,1+(L===0?0:L<0?-1:1)|(63&re)<<2,re>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);var Ce=j.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,Ce),j.primitiveLength++),M?this.e2=Ce:this.e1=Ce},at.prototype.updateScaledDistance=function(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance},at.prototype.updateDistance=function(a,s){this.distance+=a.dist(s),this.updateScaledDistance()},ji("LineBucket",at,{omit:["layers","patternFeatures"]});var Ue=new Zs({"line-cap":new Pa(bt.layout_line["line-cap"]),"line-join":new la(bt.layout_line["line-join"]),"line-miter-limit":new Pa(bt.layout_line["line-miter-limit"]),"line-round-limit":new Pa(bt.layout_line["line-round-limit"]),"line-sort-key":new la(bt.layout_line["line-sort-key"])}),Xt={paint:new Zs({"line-opacity":new la(bt.paint_line["line-opacity"]),"line-color":new la(bt.paint_line["line-color"]),"line-translate":new Pa(bt.paint_line["line-translate"]),"line-translate-anchor":new Pa(bt.paint_line["line-translate-anchor"]),"line-width":new la(bt.paint_line["line-width"]),"line-gap-width":new la(bt.paint_line["line-gap-width"]),"line-offset":new la(bt.paint_line["line-offset"]),"line-blur":new la(bt.paint_line["line-blur"]),"line-dasharray":new us(bt.paint_line["line-dasharray"]),"line-pattern":new sl(bt.paint_line["line-pattern"]),"line-gradient":new wu(bt.paint_line["line-gradient"])}),layout:Ue},Ot=new(function(a){function s(){a.apply(this,arguments)}return a&&(s.__proto__=a),(s.prototype=Object.create(a&&a.prototype)).constructor=s,s.prototype.possiblyEvaluate=function(h,E){return E=new li(Math.floor(E.zoom),{now:E.now,fadeDuration:E.fadeDuration,zoomHistory:E.zoomHistory,transition:E.transition}),a.prototype.possiblyEvaluate.call(this,h,E)},s.prototype.evaluate=function(h,E,M,L){return E=be({},E,{zoom:Math.floor(E.zoom)}),a.prototype.evaluate.call(this,h,E,M,L)},s}(la))(Xt.paint.properties["line-width"].specification);Ot.useIntegerZoom=!0;var vr=function(a){function s(h){a.call(this,h,Xt),this.gradientVersion=0}return a&&(s.__proto__=a),(s.prototype=Object.create(a&&a.prototype)).constructor=s,s.prototype._handleSpecialPaintPropertyUpdate=function(h){h==="line-gradient"&&(this.stepInterpolant=this._transitionablePaint._values["line-gradient"].value.expression._styleExpression.expression instanceof Us,this.gradientVersion=(this.gradientVersion+1)%Z)},s.prototype.gradientExpression=function(){return this._transitionablePaint._values["line-gradient"].value.expression},s.prototype.recalculate=function(h,E){a.prototype.recalculate.call(this,h,E),this.paint._values["line-floorwidth"]=Ot.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,h)},s.prototype.createBucket=function(h){return new at(h)},s.prototype.queryRadius=function(h){var E=h,M=xn(Sc("line-width",this,E),Sc("line-gap-width",this,E)),L=Sc("line-offset",this,E);return M/2+Math.abs(L)+Lu(this.paint.get("line-translate"))},s.prototype.queryIntersectsFeature=function(h,E,M,L,j,re,Ce){var ze=Fl(h,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),re.angle,Ce),We=Ce/2*xn(this.paint.get("line-width").evaluate(E,M),this.paint.get("line-gap-width").evaluate(E,M)),Je=this.paint.get("line-offset").evaluate(E,M);return Je&&(L=function(_t,It){for(var ar=[],ur=new k(0,0),Rr=0;Rr<_t.length;Rr++){for(var mr=_t[Rr],cn=[],wn=0;wn<mr.length;wn++){var Gn=mr[wn],Zn=mr[wn+1],gi=wn===0?ur:Gn.sub(mr[wn-1])._unit()._perp(),Yi=wn===mr.length-1?ur:Zn.sub(Gn)._unit()._perp(),p=gi._add(Yi)._unit();p._mult(1/(p.x*Yi.x+p.y*Yi.y)),cn.push(p._mult(It)._add(Gn))}ar.push(cn)}return ar}(L,Je*Ce)),function(_t,It,ar){for(var ur=0;ur<It.length;ur++){var Rr=It[ur];if(_t.length>=3){for(var mr=0;mr<Rr.length;mr++)if(fl(_t,Rr[mr]))return!0}if(Nt(_t,Rr,ar))return!0}return!1}(ze,L,We)},s.prototype.isTileClipped=function(){return!0},s}(ul);function xn(a,s){return s>0?s+2*a:a}var Pn=Qo([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),ti=Qo([{name:"a_projected_pos",components:3,type:"Float32"}],4),Yn=(Qo([{name:"a_fade_opacity",components:1,type:"Uint32"}],4),Qo([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}])),On=(Qo([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]),Qo([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4)),Ni=Qo([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function Bi(a,s,h){return a.sections.forEach(function(E){E.text=function(M,L,j){var re=L.layout.get("text-transform").evaluate(j,{});return re==="uppercase"?M=M.toLocaleUpperCase():re==="lowercase"&&(M=M.toLocaleLowerCase()),Ri.applyArabicShaping&&(M=Ri.applyArabicShaping(M)),M}(E.text,s,h)}),a}Qo([{name:"triangle",components:3,type:"Uint16"}]),Qo([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),Qo([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"}]),Qo([{type:"Float32",name:"offsetX"}]),Qo([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]);var ki={"!":"\uFE15","#":"\uFF03",$:"\uFF04","%":"\uFF05","&":"\uFF06","(":"\uFE35",")":"\uFE36","*":"\uFF0A","+":"\uFF0B",",":"\uFE10","-":"\uFE32",".":"\u30FB","/":"\uFF0F",":":"\uFE13",";":"\uFE14","<":"\uFE3F","=":"\uFF1D",">":"\uFE40","?":"\uFE16","@":"\uFF20","[":"\uFE47","\\":"\uFF3C","]":"\uFE48","^":"\uFF3E",_:"\uFE33","`":"\uFF40","{":"\uFE37","|":"\u2015","}":"\uFE38","~":"\uFF5E","\xA2":"\uFFE0","\xA3":"\uFFE1","\xA5":"\uFFE5","\xA6":"\uFFE4","\xAC":"\uFFE2","\xAF":"\uFFE3","\u2013":"\uFE32","\u2014":"\uFE31","\u2018":"\uFE43","\u2019":"\uFE44","\u201C":"\uFE41","\u201D":"\uFE42","\u2026":"\uFE19","\u2027":"\u30FB","\u20A9":"\uFFE6","\u3001":"\uFE11","\u3002":"\uFE12","\u3008":"\uFE3F","\u3009":"\uFE40","\u300A":"\uFE3D","\u300B":"\uFE3E","\u300C":"\uFE41","\u300D":"\uFE42","\u300E":"\uFE43","\u300F":"\uFE44","\u3010":"\uFE3B","\u3011":"\uFE3C","\u3014":"\uFE39","\u3015":"\uFE3A","\u3016":"\uFE17","\u3017":"\uFE18","\uFF01":"\uFE15","\uFF08":"\uFE35","\uFF09":"\uFE36","\uFF0C":"\uFE10","\uFF0D":"\uFE32","\uFF0E":"\u30FB","\uFF1A":"\uFE13","\uFF1B":"\uFE14","\uFF1C":"\uFE3F","\uFF1E":"\uFE40","\uFF1F":"\uFE16","\uFF3B":"\uFE47","\uFF3D":"\uFE48","\uFF3F":"\uFE33","\uFF5B":"\uFE37","\uFF5C":"\u2015","\uFF5D":"\uFE38","\uFF5F":"\uFE35","\uFF60":"\uFE36","\uFF61":"\uFE12","\uFF62":"\uFE41","\uFF63":"\uFE42"},Gi=function(a,s,h,E,M){var L,j,re=8*M-E-1,Ce=(1<<re)-1,ze=Ce>>1,We=-7,Je=h?M-1:0,_t=h?-1:1,It=a[s+Je];for(Je+=_t,L=It&(1<<-We)-1,It>>=-We,We+=re;We>0;L=256*L+a[s+Je],Je+=_t,We-=8);for(j=L&(1<<-We)-1,L>>=-We,We+=E;We>0;j=256*j+a[s+Je],Je+=_t,We-=8);if(L===0)L=1-ze;else{if(L===Ce)return j?NaN:1/0*(It?-1:1);j+=Math.pow(2,E),L-=ze}return(It?-1:1)*j*Math.pow(2,L-E)},Di=function(a,s,h,E,M,L){var j,re,Ce,ze=8*L-M-1,We=(1<<ze)-1,Je=We>>1,_t=M===23?Math.pow(2,-24)-Math.pow(2,-77):0,It=E?0:L-1,ar=E?1:-1,ur=s<0||s===0&&1/s<0?1:0;for(s=Math.abs(s),isNaN(s)||s===1/0?(re=isNaN(s)?1:0,j=We):(j=Math.floor(Math.log(s)/Math.LN2),s*(Ce=Math.pow(2,-j))<1&&(j--,Ce*=2),(s+=j+Je>=1?_t/Ce:_t*Math.pow(2,1-Je))*Ce>=2&&(j++,Ce/=2),j+Je>=We?(re=0,j=We):j+Je>=1?(re=(s*Ce-1)*Math.pow(2,M),j+=Je):(re=s*Math.pow(2,Je-1)*Math.pow(2,M),j=0));M>=8;a[h+It]=255&re,It+=ar,re/=256,M-=8);for(j=j<<M|re,ze+=M;ze>0;a[h+It]=255&j,It+=ar,j/=256,ze-=8);a[h+It-ar]|=128*ur},Fi=bi;function bi(a){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(a)?a:new Uint8Array(a||0),this.pos=0,this.type=0,this.length=this.buf.length}bi.Varint=0,bi.Fixed64=1,bi.Bytes=2,bi.Fixed32=5;var qi=typeof TextDecoder=="undefined"?null:new TextDecoder("utf8");function di(a){return a.type===bi.Bytes?a.readVarint()+a.pos:a.pos+1}function ba(a,s,h){return h?4294967296*s+(a>>>0):4294967296*(s>>>0)+(a>>>0)}function _a(a,s,h){var E=s<=16383?1:s<=2097151?2:s<=268435455?3:Math.floor(Math.log(s)/(7*Math.LN2));h.realloc(E);for(var M=h.pos-1;M>=a;M--)h.buf[M+E]=h.buf[M]}function Ya(a,s){for(var h=0;h<a.length;h++)s.writeVarint(a[h])}function Te(a,s){for(var h=0;h<a.length;h++)s.writeSVarint(a[h])}function Qe(a,s){for(var h=0;h<a.length;h++)s.writeFloat(a[h])}function pt(a,s){for(var h=0;h<a.length;h++)s.writeDouble(a[h])}function Vt(a,s){for(var h=0;h<a.length;h++)s.writeBoolean(a[h])}function Sr(a,s){for(var h=0;h<a.length;h++)s.writeFixed32(a[h])}function dr(a,s){for(var h=0;h<a.length;h++)s.writeSFixed32(a[h])}function Ar(a,s){for(var h=0;h<a.length;h++)s.writeFixed64(a[h])}function hn(a,s){for(var h=0;h<a.length;h++)s.writeSFixed64(a[h])}function Tn(a,s){return(a[s]|a[s+1]<<8|a[s+2]<<16)+16777216*a[s+3]}function Hn(a,s,h){a[h]=s,a[h+1]=s>>>8,a[h+2]=s>>>16,a[h+3]=s>>>24}function Bn(a,s){return(a[s]|a[s+1]<<8|a[s+2]<<16)+(a[s+3]<<24)}function bn(a,s,h){a===1&&h.readMessage(En,s)}function En(a,s,h){if(a===3){var E=h.readMessage(Mn,{}),M=E.width,L=E.height,j=E.left,re=E.top,Ce=E.advance;s.push({id:E.id,bitmap:new Yu({width:M+6,height:L+6},E.bitmap),metrics:{width:M,height:L,left:j,top:re,advance:Ce}})}}function Mn(a,s,h){a===1?s.id=h.readVarint():a===2?s.bitmap=h.readBytes():a===3?s.width=h.readVarint():a===4?s.height=h.readVarint():a===5?s.left=h.readSVarint():a===6?s.top=h.readSVarint():a===7&&(s.advance=h.readVarint())}function Un(a){for(var s=0,h=0,E=0,M=a;E<M.length;E+=1){var L=M[E];s+=L.w*L.h,h=Math.max(h,L.w)}a.sort(function(ur,Rr){return Rr.h-ur.h});for(var j=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(s/.95)),h),h:1/0}],re=0,Ce=0,ze=0,We=a;ze<We.length;ze+=1)for(var Je=We[ze],_t=j.length-1;_t>=0;_t--){var It=j[_t];if(!(Je.w>It.w||Je.h>It.h)){if(Je.x=It.x,Je.y=It.y,Ce=Math.max(Ce,Je.y+Je.h),re=Math.max(re,Je.x+Je.w),Je.w===It.w&&Je.h===It.h){var ar=j.pop();_t<j.length&&(j[_t]=ar)}else Je.h===It.h?(It.x+=Je.w,It.w-=Je.w):Je.w===It.w?(It.y+=Je.h,It.h-=Je.h):(j.push({x:It.x+Je.w,y:It.y,w:It.w-Je.w,h:Je.h}),It.y+=Je.h,It.h-=Je.h);break}}return{w:re,h:Ce,fill:s/(re*Ce)||0}}bi.prototype={destroy:function(){this.buf=null},readFields:function(a,s,h){for(h=h||this.length;this.pos<h;){var E=this.readVarint(),M=E>>3,L=this.pos;this.type=7&E,a(M,s,this),this.pos===L&&this.skip(E)}return s},readMessage:function(a,s){return this.readFields(a,s,this.readVarint()+this.pos)},readFixed32:function(){var a=Tn(this.buf,this.pos);return this.pos+=4,a},readSFixed32:function(){var a=Bn(this.buf,this.pos);return this.pos+=4,a},readFixed64:function(){var a=Tn(this.buf,this.pos)+4294967296*Tn(this.buf,this.pos+4);return this.pos+=8,a},readSFixed64:function(){var a=Tn(this.buf,this.pos)+4294967296*Bn(this.buf,this.pos+4);return this.pos+=8,a},readFloat:function(){var a=Gi(this.buf,this.pos,!0,23,4);return this.pos+=4,a},readDouble:function(){var a=Gi(this.buf,this.pos,!0,52,8);return this.pos+=8,a},readVarint:function(a){var s,h,E=this.buf;return s=127&(h=E[this.pos++]),h<128?s:(s|=(127&(h=E[this.pos++]))<<7,h<128?s:(s|=(127&(h=E[this.pos++]))<<14,h<128?s:(s|=(127&(h=E[this.pos++]))<<21,h<128?s:function(M,L,j){var re,Ce,ze=j.buf;if(re=(112&(Ce=ze[j.pos++]))>>4,Ce<128||(re|=(127&(Ce=ze[j.pos++]))<<3,Ce<128)||(re|=(127&(Ce=ze[j.pos++]))<<10,Ce<128)||(re|=(127&(Ce=ze[j.pos++]))<<17,Ce<128)||(re|=(127&(Ce=ze[j.pos++]))<<24,Ce<128)||(re|=(1&(Ce=ze[j.pos++]))<<31,Ce<128))return ba(M,re,L);throw new Error("Expected varint not more than 10 bytes")}(s|=(15&(h=E[this.pos]))<<28,a,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var a=this.readVarint();return a%2==1?(a+1)/-2:a/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var a=this.readVarint()+this.pos,s=this.pos;return this.pos=a,a-s>=12&&qi?function(h,E,M){return qi.decode(h.subarray(E,M))}(this.buf,s,a):function(h,E,M){for(var L="",j=E;j<M;){var re,Ce,ze,We=h[j],Je=null,_t=We>239?4:We>223?3:We>191?2:1;if(j+_t>M)break;_t===1?We<128&&(Je=We):_t===2?(192&(re=h[j+1]))==128&&(Je=(31&We)<<6|63&re)<=127&&(Je=null):_t===3?(Ce=h[j+2],(192&(re=h[j+1]))==128&&(192&Ce)==128&&((Je=(15&We)<<12|(63&re)<<6|63&Ce)<=2047||Je>=55296&&Je<=57343)&&(Je=null)):_t===4&&(Ce=h[j+2],ze=h[j+3],(192&(re=h[j+1]))==128&&(192&Ce)==128&&(192&ze)==128&&((Je=(15&We)<<18|(63&re)<<12|(63&Ce)<<6|63&ze)<=65535||Je>=1114112)&&(Je=null)),Je===null?(Je=65533,_t=1):Je>65535&&(Je-=65536,L+=String.fromCharCode(Je>>>10&1023|55296),Je=56320|1023&Je),L+=String.fromCharCode(Je),j+=_t}return L}(this.buf,s,a)},readBytes:function(){var a=this.readVarint()+this.pos,s=this.buf.subarray(this.pos,a);return this.pos=a,s},readPackedVarint:function(a,s){if(this.type!==bi.Bytes)return a.push(this.readVarint(s));var h=di(this);for(a=a||[];this.pos<h;)a.push(this.readVarint(s));return a},readPackedSVarint:function(a){if(this.type!==bi.Bytes)return a.push(this.readSVarint());var s=di(this);for(a=a||[];this.pos<s;)a.push(this.readSVarint());return a},readPackedBoolean:function(a){if(this.type!==bi.Bytes)return a.push(this.readBoolean());var s=di(this);for(a=a||[];this.pos<s;)a.push(this.readBoolean());return a},readPackedFloat:function(a){if(this.type!==bi.Bytes)return a.push(this.readFloat());var s=di(this);for(a=a||[];this.pos<s;)a.push(this.readFloat());return a},readPackedDouble:function(a){if(this.type!==bi.Bytes)return a.push(this.readDouble());var s=di(this);for(a=a||[];this.pos<s;)a.push(this.readDouble());return a},readPackedFixed32:function(a){if(this.type!==bi.Bytes)return a.push(this.readFixed32());var s=di(this);for(a=a||[];this.pos<s;)a.push(this.readFixed32());return a},readPackedSFixed32:function(a){if(this.type!==bi.Bytes)return a.push(this.readSFixed32());var s=di(this);for(a=a||[];this.pos<s;)a.push(this.readSFixed32());return a},readPackedFixed64:function(a){if(this.type!==bi.Bytes)return a.push(this.readFixed64());var s=di(this);for(a=a||[];this.pos<s;)a.push(this.readFixed64());return a},readPackedSFixed64:function(a){if(this.type!==bi.Bytes)return a.push(this.readSFixed64());var s=di(this);for(a=a||[];this.pos<s;)a.push(this.readSFixed64());return a},skip:function(a){var s=7&a;if(s===bi.Varint)for(;this.buf[this.pos++]>127;);else if(s===bi.Bytes)this.pos=this.readVarint()+this.pos;else if(s===bi.Fixed32)this.pos+=4;else{if(s!==bi.Fixed64)throw new Error("Unimplemented type: "+s);this.pos+=8}},writeTag:function(a,s){this.writeVarint(a<<3|s)},realloc:function(a){for(var s=this.length||16;s<this.pos+a;)s*=2;if(s!==this.length){var h=new Uint8Array(s);h.set(this.buf),this.buf=h,this.length=s}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(a){this.realloc(4),Hn(this.buf,a,this.pos),this.pos+=4},writeSFixed32:function(a){this.realloc(4),Hn(this.buf,a,this.pos),this.pos+=4},writeFixed64:function(a){this.realloc(8),Hn(this.buf,-1&a,this.pos),Hn(this.buf,Math.floor(a*23283064365386963e-26),this.pos+4),this.pos+=8},writeSFixed64:function(a){this.realloc(8),Hn(this.buf,-1&a,this.pos),Hn(this.buf,Math.floor(a*23283064365386963e-26),this.pos+4),this.pos+=8},writeVarint:function(a){(a=+a||0)>268435455||a<0?function(s,h){var E,M;if(s>=0?(E=s%4294967296|0,M=s/4294967296|0):(M=~(-s/4294967296),4294967295^(E=~(-s%4294967296))?E=E+1|0:(E=0,M=M+1|0)),s>=18446744073709552e3||s<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");h.realloc(10),function(L,j,re){re.buf[re.pos++]=127&L|128,L>>>=7,re.buf[re.pos++]=127&L|128,L>>>=7,re.buf[re.pos++]=127&L|128,L>>>=7,re.buf[re.pos++]=127&L|128,re.buf[re.pos]=127&(L>>>=7)}(E,0,h),function(L,j){var re=(7&L)<<4;j.buf[j.pos++]|=re|((L>>>=3)?128:0),L&&(j.buf[j.pos++]=127&L|((L>>>=7)?128:0),L&&(j.buf[j.pos++]=127&L|((L>>>=7)?128:0),L&&(j.buf[j.pos++]=127&L|((L>>>=7)?128:0),L&&(j.buf[j.pos++]=127&L|((L>>>=7)?128:0),L&&(j.buf[j.pos++]=127&L)))))}(M,h)}(a,this):(this.realloc(4),this.buf[this.pos++]=127&a|(a>127?128:0),a<=127||(this.buf[this.pos++]=127&(a>>>=7)|(a>127?128:0),a<=127||(this.buf[this.pos++]=127&(a>>>=7)|(a>127?128:0),a<=127||(this.buf[this.pos++]=a>>>7&127))))},writeSVarint:function(a){this.writeVarint(a<0?2*-a-1:2*a)},writeBoolean:function(a){this.writeVarint(Boolean(a))},writeString:function(a){a=String(a),this.realloc(4*a.length),this.pos++;var s=this.pos;this.pos=function(E,M,L){for(var j,re,Ce=0;Ce<M.length;Ce++){if((j=M.charCodeAt(Ce))>55295&&j<57344){if(!re){j>56319||Ce+1===M.length?(E[L++]=239,E[L++]=191,E[L++]=189):re=j;continue}if(j<56320){E[L++]=239,E[L++]=191,E[L++]=189,re=j;continue}j=re-55296<<10|j-56320|65536,re=null}else re&&(E[L++]=239,E[L++]=191,E[L++]=189,re=null);j<128?E[L++]=j:(j<2048?E[L++]=j>>6|192:(j<65536?E[L++]=j>>12|224:(E[L++]=j>>18|240,E[L++]=j>>12&63|128),E[L++]=j>>6&63|128),E[L++]=63&j|128)}return L}(this.buf,a,this.pos);var h=this.pos-s;h>=128&&_a(s,h,this),this.pos=s-1,this.writeVarint(h),this.pos+=h},writeFloat:function(a){this.realloc(4),Di(this.buf,a,this.pos,!0,23,4),this.pos+=4},writeDouble:function(a){this.realloc(8),Di(this.buf,a,this.pos,!0,52,8),this.pos+=8},writeBytes:function(a){var s=a.length;this.writeVarint(s),this.realloc(s);for(var h=0;h<s;h++)this.buf[this.pos++]=a[h]},writeRawMessage:function(a,s){this.pos++;var h=this.pos;a(s,this);var E=this.pos-h;E>=128&&_a(h,E,this),this.pos=h-1,this.writeVarint(E),this.pos+=E},writeMessage:function(a,s,h){this.writeTag(a,bi.Bytes),this.writeRawMessage(s,h)},writePackedVarint:function(a,s){s.length&&this.writeMessage(a,Ya,s)},writePackedSVarint:function(a,s){s.length&&this.writeMessage(a,Te,s)},writePackedBoolean:function(a,s){s.length&&this.writeMessage(a,Vt,s)},writePackedFloat:function(a,s){s.length&&this.writeMessage(a,Qe,s)},writePackedDouble:function(a,s){s.length&&this.writeMessage(a,pt,s)},writePackedFixed32:function(a,s){s.length&&this.writeMessage(a,Sr,s)},writePackedSFixed32:function(a,s){s.length&&this.writeMessage(a,dr,s)},writePackedFixed64:function(a,s){s.length&&this.writeMessage(a,Ar,s)},writePackedSFixed64:function(a,s){s.length&&this.writeMessage(a,hn,s)},writeBytesField:function(a,s){this.writeTag(a,bi.Bytes),this.writeBytes(s)},writeFixed32Field:function(a,s){this.writeTag(a,bi.Fixed32),this.writeFixed32(s)},writeSFixed32Field:function(a,s){this.writeTag(a,bi.Fixed32),this.writeSFixed32(s)},writeFixed64Field:function(a,s){this.writeTag(a,bi.Fixed64),this.writeFixed64(s)},writeSFixed64Field:function(a,s){this.writeTag(a,bi.Fixed64),this.writeSFixed64(s)},writeVarintField:function(a,s){this.writeTag(a,bi.Varint),this.writeVarint(s)},writeSVarintField:function(a,s){this.writeTag(a,bi.Varint),this.writeSVarint(s)},writeStringField:function(a,s){this.writeTag(a,bi.Bytes),this.writeString(s)},writeFloatField:function(a,s){this.writeTag(a,bi.Fixed32),this.writeFloat(s)},writeDoubleField:function(a,s){this.writeTag(a,bi.Fixed64),this.writeDouble(s)},writeBooleanField:function(a,s){this.writeVarintField(a,Boolean(s))}};var Nr=function(a,s){var h=s.pixelRatio,E=s.version,M=s.stretchX,L=s.stretchY,j=s.content;this.paddedRect=a,this.pixelRatio=h,this.stretchX=M,this.stretchY=L,this.content=j,this.version=E},Er={tl:{configurable:!0},br:{configurable:!0},tlbr:{configurable:!0},displaySize:{configurable:!0}};Er.tl.get=function(){return[this.paddedRect.x+1,this.paddedRect.y+1]},Er.br.get=function(){return[this.paddedRect.x+this.paddedRect.w-1,this.paddedRect.y+this.paddedRect.h-1]},Er.tlbr.get=function(){return this.tl.concat(this.br)},Er.displaySize.get=function(){return[(this.paddedRect.w-2)/this.pixelRatio,(this.paddedRect.h-2)/this.pixelRatio]},Object.defineProperties(Nr.prototype,Er);var oi=function(a,s){var h={},E={};this.haveRenderCallbacks=[];var M=[];this.addImages(a,h,M),this.addImages(s,E,M);var L=Un(M),j=new mu({width:L.w||1,height:L.h||1});for(var re in a){var Ce=a[re],ze=h[re].paddedRect;mu.copy(Ce.data,j,{x:0,y:0},{x:ze.x+1,y:ze.y+1},Ce.data)}for(var We in s){var Je=s[We],_t=E[We].paddedRect,It=_t.x+1,ar=_t.y+1,ur=Je.data.width,Rr=Je.data.height;mu.copy(Je.data,j,{x:0,y:0},{x:It,y:ar},Je.data),mu.copy(Je.data,j,{x:0,y:Rr-1},{x:It,y:ar-1},{width:ur,height:1}),mu.copy(Je.data,j,{x:0,y:0},{x:It,y:ar+Rr},{width:ur,height:1}),mu.copy(Je.data,j,{x:ur-1,y:0},{x:It-1,y:ar},{width:1,height:Rr}),mu.copy(Je.data,j,{x:0,y:0},{x:It+ur,y:ar},{width:1,height:Rr})}this.image=j,this.iconPositions=h,this.patternPositions=E};oi.prototype.addImages=function(a,s,h){for(var E in a){var M=a[E],L={x:0,y:0,w:M.data.width+2,h:M.data.height+2};h.push(L),s[E]=new Nr(L,M),M.hasRenderCallback&&this.haveRenderCallbacks.push(E)}},oi.prototype.patchUpdatedImages=function(a,s){for(var h in a.dispatchRenderCallbacks(this.haveRenderCallbacks),a.updatedImages)this.patchUpdatedImage(this.iconPositions[h],a.getImage(h),s),this.patchUpdatedImage(this.patternPositions[h],a.getImage(h),s)},oi.prototype.patchUpdatedImage=function(a,s,h){if(a&&s&&a.version!==s.version){a.version=s.version;var E=a.tl;h.update(s.data,void 0,{x:E[0],y:E[1]})}},ji("ImagePosition",Nr),ji("ImageAtlas",oi);var wi={horizontal:1,vertical:2,horizontalOnly:3},Wn=function(){this.scale=1,this.fontStack="",this.imageName=null};Wn.forText=function(a,s){var h=new Wn;return h.scale=a||1,h.fontStack=s,h},Wn.forImage=function(a){var s=new Wn;return s.imageName=a,s};var ci=function(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null};function Mi(a,s,h,E,M,L,j,re,Ce,ze,We,Je,_t,It,ar,ur){var Rr,mr=ci.fromFeature(a,M);Je===wi.vertical&&mr.verticalizePunctuation();var cn=Ri.processBidirectionalText,wn=Ri.processStyledBidirectionalText;if(cn&&mr.sections.length===1){Rr=[];for(var Gn=0,Zn=cn(mr.toString(),Ii(mr,ze,L,s,E,It,ar));Gn<Zn.length;Gn+=1){var gi=Zn[Gn],Yi=new ci;Yi.text=gi,Yi.sections=mr.sections;for(var p=0;p<gi.length;p++)Yi.sectionIndex.push(0);Rr.push(Yi)}}else if(wn){Rr=[];for(var y=0,C=wn(mr.text,mr.sectionIndex,Ii(mr,ze,L,s,E,It,ar));y<C.length;y+=1){var V=C[y],ae=new ci;ae.text=V[0],ae.sectionIndex=V[1],ae.sections=mr.sections,Rr.push(ae)}}else Rr=function(zt,wr){for(var fn=[],pi=zt.text,$n=0,hi=0,ca=wr;hi<ca.length;hi+=1){var Ra=ca[hi];fn.push(zt.substring($n,Ra)),$n=Ra}return $n<pi.length&&fn.push(zt.substring($n,pi.length)),fn}(mr,Ii(mr,ze,L,s,E,It,ar));var Ie=[],ut={positionedLines:Ie,text:mr.toString(),top:We[1],bottom:We[1],left:We[0],right:We[0],writingMode:Je,iconsInText:!1,verticalizable:!1};return function(zt,wr,fn,pi,$n,hi,ca,Ra,Da,os,gn,Qr){for(var In=0,ra=-17,Ba=0,ho=0,ro=Ra==="right"?1:Ra==="left"?0:.5,go=0,wo=0,Ao=$n;wo<Ao.length;wo+=1){var Fs=Ao[wo];Fs.trim();var Ws=Fs.getMaxScale(),Nf=24*(Ws-1),gf={positionedGlyphs:[],lineOffset:0};zt.positionedLines[go]=gf;var Ns=gf.positionedGlyphs,nc=0;if(Fs.length()){for(var yf=0;yf<Fs.length();yf++){var yu=Fs.getSection(yf),Ki=Fs.getSectionIndex(yf),Tp=Fs.getCharCode(yf),Ln=0,Qu=null,fs=null,Pp=null,_f=24,xl=!(Da===wi.horizontal||!gn&&!xc(Tp)||gn&&(Xi[Tp]||(Ah=Tp,ia.Arabic(Ah)||ia["Arabic Supplement"](Ah)||ia["Arabic Extended-A"](Ah)||ia["Arabic Presentation Forms-A"](Ah)||ia["Arabic Presentation Forms-B"](Ah))));if(yu.imageName){var ch=pi[yu.imageName];if(!ch)continue;Pp=yu.imageName,zt.iconsInText=zt.iconsInText||!0,fs=ch.paddedRect;var sp=ch.displaySize;yu.scale=24*yu.scale/Qr,Ln=Nf+(24-sp[1]*yu.scale),_f=(Qu={width:sp[0],height:sp[1],left:1,top:-3,advance:xl?sp[1]:sp[0]}).advance;var qh=xl?sp[0]*yu.scale-24*Ws:sp[1]*yu.scale-24*Ws;qh>0&&qh>nc&&(nc=qh)}else{var dd=fn[yu.fontStack],Gh=dd&&dd[Tp];if(Gh&&Gh.rect)fs=Gh.rect,Qu=Gh.metrics;else{var ed=wr[yu.fontStack],vd=ed&&ed[Tp];if(!vd)continue;Qu=vd.metrics}Ln=24*(Ws-yu.scale)}xl?(zt.verticalizable=!0,Ns.push({glyph:Tp,imageName:Pp,x:In,y:ra+Ln,vertical:xl,scale:yu.scale,fontStack:yu.fontStack,sectionIndex:Ki,metrics:Qu,rect:fs}),In+=_f*yu.scale+os):(Ns.push({glyph:Tp,imageName:Pp,x:In,y:ra+Ln,vertical:xl,scale:yu.scale,fontStack:yu.fontStack,sectionIndex:Ki,metrics:Qu,rect:fs}),In+=Qu.advance*yu.scale+os)}Ns.length!==0&&(Ba=Math.max(In-os,Ba),ao(Ns,0,Ns.length-1,ro,nc)),In=0;var Hh=hi*Ws+nc;gf.lineOffset=Math.max(nc,Nf),ra+=Hh,ho=Math.max(Hh,ho),++go}else ra+=hi,++go}var Ah,Mp=ra- -17,Wh=_i(ca),qp=Wh.horizontalAlign,bl=Wh.verticalAlign;(function(Vl,md,gd,yd,Dd,_d,td,xd,rd){var fh,bd=(md-gd)*Dd;fh=_d!==td?-xd*yd- -17:(-yd*rd+.5)*td;for(var nd=0,$h=Vl;nd<$h.length;nd+=1)for(var eh=0,Xf=$h[nd].positionedGlyphs;eh<Xf.length;eh+=1){var Gp=Xf[eh];Gp.x+=bd,Gp.y+=fh}})(zt.positionedLines,ro,qp,bl,Ba,ho,hi,Mp,$n.length),zt.top+=-bl*Mp,zt.bottom=zt.top+Mp,zt.left+=-qp*Ba,zt.right=zt.left+Ba}(ut,s,h,E,Rr,j,re,Ce,Je,ze,_t,ur),!function(zt){for(var wr=0,fn=zt;wr<fn.length;wr+=1)if(fn[wr].positionedGlyphs.length!==0)return!1;return!0}(Ie)&&ut}ci.fromFeature=function(a,s){for(var h=new ci,E=0;E<a.sections.length;E++){var M=a.sections[E];M.image?h.addImageSection(M):h.addTextSection(M,s)}return h},ci.prototype.length=function(){return this.text.length},ci.prototype.getSection=function(a){return this.sections[this.sectionIndex[a]]},ci.prototype.getSectionIndex=function(a){return this.sectionIndex[a]},ci.prototype.getCharCode=function(a){return this.text.charCodeAt(a)},ci.prototype.verticalizePunctuation=function(){this.text=function(a){for(var s="",h=0;h<a.length;h++){var E=a.charCodeAt(h+1)||null,M=a.charCodeAt(h-1)||null;s+=E&&cc(E)&&!ki[a[h+1]]||M&&cc(M)&&!ki[a[h-1]]||!ki[a[h]]?a[h]:ki[a[h]]}return s}(this.text)},ci.prototype.trim=function(){for(var a=0,s=0;s<this.text.length&&Xi[this.text.charCodeAt(s)];s++)a++;for(var h=this.text.length,E=this.text.length-1;E>=0&&E>=a&&Xi[this.text.charCodeAt(E)];E--)h--;this.text=this.text.substring(a,h),this.sectionIndex=this.sectionIndex.slice(a,h)},ci.prototype.substring=function(a,s){var h=new ci;return h.text=this.text.substring(a,s),h.sectionIndex=this.sectionIndex.slice(a,s),h.sections=this.sections,h},ci.prototype.toString=function(){return this.text},ci.prototype.getMaxScale=function(){var a=this;return this.sectionIndex.reduce(function(s,h){return Math.max(s,a.sections[h].scale)},0)},ci.prototype.addTextSection=function(a,s){this.text+=a.text,this.sections.push(Wn.forText(a.scale,a.fontStack||s));for(var h=this.sections.length-1,E=0;E<a.text.length;++E)this.sectionIndex.push(h)},ci.prototype.addImageSection=function(a){var s=a.image?a.image.name:"";if(s.length!==0){var h=this.getNextImageSectionCharCode();h?(this.text+=String.fromCharCode(h),this.sections.push(Wn.forImage(s)),this.sectionIndex.push(this.sections.length-1)):Ke("Reached maximum number of images 6401")}else Ke("Can't add FormattedSection with an empty image.")},ci.prototype.getNextImageSectionCharCode=function(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)};var Xi={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},Rn={};function kn(a,s,h,E,M,L){if(s.imageName){var j=E[s.imageName];return j?j.displaySize[0]*s.scale*24/L+M:0}var re=h[s.fontStack],Ce=re&&re[a];return Ce?Ce.metrics.advance*s.scale+M:0}function Si(a,s,h,E){var M=Math.pow(a-s,2);return E?a<s?M/2:2*M:M+Math.abs(h)*h}function mi(a,s,h){var E=0;return a===10&&(E-=1e4),h&&(E+=150),a!==40&&a!==65288||(E+=50),s!==41&&s!==65289||(E+=50),E}function qn(a,s,h,E,M,L){for(var j=null,re=Si(s,h,M,L),Ce=0,ze=E;Ce<ze.length;Ce+=1){var We=ze[Ce],Je=Si(s-We.x,h,M,L)+We.badness;Je<=re&&(j=We,re=Je)}return{index:a,x:s,priorBreak:j,badness:re}}function Ii(a,s,h,E,M,L,j){if(L!=="point")return[];if(!a)return[];for(var re,Ce=[],ze=function(Rr,mr,cn,wn,Gn,Zn){for(var gi=0,Yi=0;Yi<Rr.length();Yi++){var p=Rr.getSection(Yi);gi+=kn(Rr.getCharCode(Yi),p,wn,Gn,mr,Zn)}return gi/Math.max(1,Math.ceil(gi/cn))}(a,s,h,E,M,j),We=a.text.indexOf("\u200B")>=0,Je=0,_t=0;_t<a.length();_t++){var It=a.getSection(_t),ar=a.getCharCode(_t);if(Xi[ar]||(Je+=kn(ar,It,E,M,s,j)),_t<a.length()-1){var ur=!((re=ar)<11904||!(ia["Bopomofo Extended"](re)||ia.Bopomofo(re)||ia["CJK Compatibility Forms"](re)||ia["CJK Compatibility Ideographs"](re)||ia["CJK Compatibility"](re)||ia["CJK Radicals Supplement"](re)||ia["CJK Strokes"](re)||ia["CJK Symbols and Punctuation"](re)||ia["CJK Unified Ideographs Extension A"](re)||ia["CJK Unified Ideographs"](re)||ia["Enclosed CJK Letters and Months"](re)||ia["Halfwidth and Fullwidth Forms"](re)||ia.Hiragana(re)||ia["Ideographic Description Characters"](re)||ia["Kangxi Radicals"](re)||ia["Katakana Phonetic Extensions"](re)||ia.Katakana(re)||ia["Vertical Forms"](re)||ia["Yi Radicals"](re)||ia["Yi Syllables"](re)));(Rn[ar]||ur||It.imageName)&&Ce.push(qn(_t+1,Je,ze,Ce,mi(ar,a.getCharCode(_t+1),ur&&We),!1))}}return function Rr(mr){return mr?Rr(mr.priorBreak).concat(mr.index):[]}(qn(a.length(),Je,ze,Ce,0,!0))}function _i(a){var s=.5,h=.5;switch(a){case"right":case"top-right":case"bottom-right":s=1;break;case"left":case"top-left":case"bottom-left":s=0}switch(a){case"bottom":case"bottom-right":case"bottom-left":h=1;break;case"top":case"top-right":case"top-left":h=0}return{horizontalAlign:s,verticalAlign:h}}function ao(a,s,h,E,M){if(E||M)for(var L=a[h],j=(a[h].x+L.metrics.advance*L.scale)*E,re=s;re<=h;re++)a[re].x-=j,a[re].y+=M}function La(a,s,h,E,M,L){var j,re=a.image;if(re.content){var Ce=re.content,ze=re.pixelRatio||1;j=[Ce[0]/ze,Ce[1]/ze,re.displaySize[0]-Ce[2]/ze,re.displaySize[1]-Ce[3]/ze]}var We,Je,_t,It,ar=s.left*L,ur=s.right*L;h==="width"||h==="both"?(It=M[0]+ar-E[3],Je=M[0]+ur+E[1]):Je=(It=M[0]+(ar+ur-re.displaySize[0])/2)+re.displaySize[0];var Rr=s.top*L,mr=s.bottom*L;return h==="height"||h==="both"?(We=M[1]+Rr-E[0],_t=M[1]+mr+E[2]):_t=(We=M[1]+(Rr+mr-re.displaySize[1])/2)+re.displaySize[1],{image:re,top:We,right:Je,bottom:_t,left:It,collisionPadding:j}}Rn[10]=!0,Rn[32]=!0,Rn[38]=!0,Rn[40]=!0,Rn[41]=!0,Rn[43]=!0,Rn[45]=!0,Rn[47]=!0,Rn[173]=!0,Rn[183]=!0,Rn[8203]=!0,Rn[8208]=!0,Rn[8211]=!0,Rn[8231]=!0;var Qi=function(a){function s(h,E,M,L){a.call(this,h,E),this.angle=M,L!==void 0&&(this.segment=L)}return a&&(s.__proto__=a),(s.prototype=Object.create(a&&a.prototype)).constructor=s,s.prototype.clone=function(){return new s(this.x,this.y,this.angle,this.segment)},s}(k);function aa(a,s){var h=s.expression;if(h.kind==="constant")return{kind:"constant",layoutSize:h.evaluate(new li(a+1))};if(h.kind==="source")return{kind:"source"};for(var E=h.zoomStops,M=h.interpolationType,L=0;L<E.length&&E[L]<=a;)L++;for(var j=L=Math.max(0,L-1);j<E.length&&E[j]<a+1;)j++;j=Math.min(E.length-1,j);var re=E[L],Ce=E[j];return h.kind==="composite"?{kind:"composite",minZoom:re,maxZoom:Ce,interpolationType:M}:{kind:"camera",minZoom:re,maxZoom:Ce,minSize:h.evaluate(new li(re)),maxSize:h.evaluate(new li(Ce)),interpolationType:M}}function Fa(a,s,h){var E=s.uSize,M=h.lowerSize;return a.kind==="source"?M/128:a.kind==="composite"?ys(M/128,h.upperSize/128,s.uSizeT):E}function $a(a,s){var h=0,E=0;if(a.kind==="constant")E=a.layoutSize;else if(a.kind!=="source"){var M=a.interpolationType,L=M?te(Lt.interpolationFactor(M,s,a.minZoom,a.maxZoom),0,1):0;a.kind==="camera"?E=ys(a.minSize,a.maxSize,L):h=L}return{uSizeT:h,uSize:E}}ji("Anchor",Qi);var oo=Object.freeze({__proto__:null,getSizeData:aa,evaluateSizeForFeature:Fa,evaluateSizeForZoom:$a,SIZE_PACK_FACTOR:128});function is(a,s,h,E,M){if(s.segment===void 0)return!0;for(var L=s,j=s.segment+1,re=0;re>-h/2;){if(--j<0)return!1;re-=a[j].dist(L),L=a[j]}re+=a[j].dist(a[j+1]),j++;for(var Ce=[],ze=0;re<h/2;){var We=a[j],Je=a[j+1];if(!Je)return!1;var _t=a[j-1].angleTo(We)-We.angleTo(Je);for(_t=Math.abs((_t+3*Math.PI)%(2*Math.PI)-Math.PI),Ce.push({distance:re,angleDelta:_t}),ze+=_t;re-Ce[0].distance>E;)ze-=Ce.shift().angleDelta;if(ze>M)return!1;j++,re+=We.dist(Je)}return!0}function Yo(a){for(var s=0,h=0;h<a.length-1;h++)s+=a[h].dist(a[h+1]);return s}function Po(a,s,h){return a?.6*s*h:0}function js(a,s){return Math.max(a?a.right-a.left:0,s?s.right-s.left:0)}function Uo(a,s,h,E,M,L){for(var j=Po(h,M,L),re=js(h,E)*L,Ce=0,ze=Yo(a)/2,We=0;We<a.length-1;We++){var Je=a[We],_t=a[We+1],It=Je.dist(_t);if(Ce+It>ze){var ar=(ze-Ce)/It,ur=ys(Je.x,_t.x,ar),Rr=ys(Je.y,_t.y,ar),mr=new Qi(ur,Rr,_t.angleTo(Je),We);return mr._round(),!j||is(a,mr,re,j,s)?mr:void 0}Ce+=It}}function cs(a,s,h,E,M,L,j,re,Ce){var ze=Po(E,L,j),We=js(E,M),Je=We*j,_t=a[0].x===0||a[0].x===Ce||a[0].y===0||a[0].y===Ce;return s-Je<s/4&&(s=Je+s/4),function It(ar,ur,Rr,mr,cn,wn,Gn,Zn,gi){for(var Yi=wn/2,p=Yo(ar),y=0,C=ur-Rr,V=[],ae=0;ae<ar.length-1;ae++){for(var Ie=ar[ae],ut=ar[ae+1],zt=Ie.dist(ut),wr=ut.angleTo(Ie);C+Rr<y+zt;){var fn=((C+=Rr)-y)/zt,pi=ys(Ie.x,ut.x,fn),$n=ys(Ie.y,ut.y,fn);if(pi>=0&&pi<gi&&$n>=0&&$n<gi&&C-Yi>=0&&C+Yi<=p){var hi=new Qi(pi,$n,wr,ae);hi._round(),mr&&!is(ar,hi,wn,mr,cn)||V.push(hi)}}y+=zt}return Zn||V.length||Gn||(V=It(ar,y/2,Rr,mr,cn,wn,Gn,!0,gi)),V}(a,_t?s/2*re%s:(We/2+2*L)*j*re%s,s,ze,h,Je,_t,!1,Ce)}function Vs(a,s,h,E,M){for(var L=[],j=0;j<a.length;j++)for(var re=a[j],Ce=void 0,ze=0;ze<re.length-1;ze++){var We=re[ze],Je=re[ze+1];We.x<s&&Je.x<s||(We.x<s?We=new k(s,We.y+(s-We.x)/(Je.x-We.x)*(Je.y-We.y))._round():Je.x<s&&(Je=new k(s,We.y+(s-We.x)/(Je.x-We.x)*(Je.y-We.y))._round()),We.y<h&&Je.y<h||(We.y<h?We=new k(We.x+(h-We.y)/(Je.y-We.y)*(Je.x-We.x),h)._round():Je.y<h&&(Je=new k(We.x+(h-We.y)/(Je.y-We.y)*(Je.x-We.x),h)._round()),We.x>=E&&Je.x>=E||(We.x>=E?We=new k(E,We.y+(E-We.x)/(Je.x-We.x)*(Je.y-We.y))._round():Je.x>=E&&(Je=new k(E,We.y+(E-We.x)/(Je.x-We.x)*(Je.y-We.y))._round()),We.y>=M&&Je.y>=M||(We.y>=M?We=new k(We.x+(M-We.y)/(Je.y-We.y)*(Je.x-We.x),M)._round():Je.y>=M&&(Je=new k(We.x+(M-We.y)/(Je.y-We.y)*(Je.x-We.x),M)._round()),Ce&&We.equals(Ce[Ce.length-1])||L.push(Ce=[We]),Ce.push(Je)))))}return L}function Ls(a,s,h,E){var M=[],L=a.image,j=L.pixelRatio,re=L.paddedRect.w-2,Ce=L.paddedRect.h-2,ze=a.right-a.left,We=a.bottom-a.top,Je=L.stretchX||[[0,re]],_t=L.stretchY||[[0,Ce]],It=function(pi,$n){return pi+$n[1]-$n[0]},ar=Je.reduce(It,0),ur=_t.reduce(It,0),Rr=re-ar,mr=Ce-ur,cn=0,wn=ar,Gn=0,Zn=ur,gi=0,Yi=Rr,p=0,y=mr;if(L.content&&E){var C=L.content;cn=Zo(Je,0,C[0]),Gn=Zo(_t,0,C[1]),wn=Zo(Je,C[0],C[2]),Zn=Zo(_t,C[1],C[3]),gi=C[0]-cn,p=C[1]-Gn,Yi=C[2]-C[0]-wn,y=C[3]-C[1]-Zn}var V=function(pi,$n,hi,ca){var Ra=Go(pi.stretch-cn,wn,ze,a.left),Da=Za(pi.fixed-gi,Yi,pi.stretch,ar),os=Go($n.stretch-Gn,Zn,We,a.top),gn=Za($n.fixed-p,y,$n.stretch,ur),Qr=Go(hi.stretch-cn,wn,ze,a.left),In=Za(hi.fixed-gi,Yi,hi.stretch,ar),ra=Go(ca.stretch-Gn,Zn,We,a.top),Ba=Za(ca.fixed-p,y,ca.stretch,ur),ho=new k(Ra,os),ro=new k(Qr,os),go=new k(Qr,ra),wo=new k(Ra,ra),Ao=new k(Da/j,gn/j),Fs=new k(In/j,Ba/j),Ws=s*Math.PI/180;if(Ws){var Nf=Math.sin(Ws),gf=Math.cos(Ws),Ns=[gf,-Nf,Nf,gf];ho._matMult(Ns),ro._matMult(Ns),wo._matMult(Ns),go._matMult(Ns)}var nc=pi.stretch+pi.fixed,yf=$n.stretch+$n.fixed;return{tl:ho,tr:ro,bl:wo,br:go,tex:{x:L.paddedRect.x+1+nc,y:L.paddedRect.y+1+yf,w:hi.stretch+hi.fixed-nc,h:ca.stretch+ca.fixed-yf},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:Ao,pixelOffsetBR:Fs,minFontScaleX:Yi/j/ze,minFontScaleY:y/j/We,isSDF:h}};if(E&&(L.stretchX||L.stretchY))for(var ae=Io(Je,Rr,ar),Ie=Io(_t,mr,ur),ut=0;ut<ae.length-1;ut++)for(var zt=ae[ut],wr=ae[ut+1],fn=0;fn<Ie.length-1;fn++)M.push(V(zt,Ie[fn],wr,Ie[fn+1]));else M.push(V({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:re+1},{fixed:0,stretch:Ce+1}));return M}function Zo(a,s,h){for(var E=0,M=0,L=a;M<L.length;M+=1){var j=L[M];E+=Math.max(s,Math.min(h,j[1]))-Math.max(s,Math.min(h,j[0]))}return E}function Io(a,s,h){for(var E=[{fixed:-1,stretch:0}],M=0,L=a;M<L.length;M+=1){var j=L[M],re=j[0],Ce=j[1],ze=E[E.length-1];E.push({fixed:re-ze.stretch,stretch:ze.stretch}),E.push({fixed:re-ze.stretch,stretch:ze.stretch+(Ce-re)})}return E.push({fixed:s+1,stretch:h}),E}function Go(a,s,h,E){return a/s*h+E}function Za(a,s,h,E){return a-s*h/E}var as=function(a,s,h,E,M,L,j,re,Ce,ze){if(this.boxStartIndex=a.length,Ce){var We=L.top,Je=L.bottom,_t=L.collisionPadding;_t&&(We-=_t[1],Je+=_t[3]);var It=Je-We;It>0&&(It=Math.max(10,It),this.circleDiameter=It)}else{var ar=L.top*j-re,ur=L.bottom*j+re,Rr=L.left*j-re,mr=L.right*j+re,cn=L.collisionPadding;if(cn&&(Rr-=cn[0]*j,ar-=cn[1]*j,mr+=cn[2]*j,ur+=cn[3]*j),ze){var wn=new k(Rr,ar),Gn=new k(mr,ar),Zn=new k(Rr,ur),gi=new k(mr,ur),Yi=ze*Math.PI/180;wn._rotate(Yi),Gn._rotate(Yi),Zn._rotate(Yi),gi._rotate(Yi),Rr=Math.min(wn.x,Gn.x,Zn.x,gi.x),mr=Math.max(wn.x,Gn.x,Zn.x,gi.x),ar=Math.min(wn.y,Gn.y,Zn.y,gi.y),ur=Math.max(wn.y,Gn.y,Zn.y,gi.y)}a.emplaceBack(s.x,s.y,Rr,ar,mr,ur,h,E,M)}this.boxEndIndex=a.length},so=function(a,s){if(a===void 0&&(a=[]),s===void 0&&(s=iu),this.data=a,this.length=this.data.length,this.compare=s,this.length>0)for(var h=(this.length>>1)-1;h>=0;h--)this._down(h)};function iu(a,s){return a<s?-1:a>s?1:0}function Oa(a,s,h){s===void 0&&(s=1),h===void 0&&(h=!1);for(var E=1/0,M=1/0,L=-1/0,j=-1/0,re=a[0],Ce=0;Ce<re.length;Ce++){var ze=re[Ce];(!Ce||ze.x<E)&&(E=ze.x),(!Ce||ze.y<M)&&(M=ze.y),(!Ce||ze.x>L)&&(L=ze.x),(!Ce||ze.y>j)&&(j=ze.y)}var We=Math.min(L-E,j-M),Je=We/2,_t=new so([],ko);if(We===0)return new k(E,M);for(var It=E;It<L;It+=We)for(var ar=M;ar<j;ar+=We)_t.push(new Xo(It+Je,ar+Je,Je,a));for(var ur=function(cn){for(var wn=0,Gn=0,Zn=0,gi=cn[0],Yi=0,p=gi.length,y=p-1;Yi<p;y=Yi++){var C=gi[Yi],V=gi[y],ae=C.x*V.y-V.x*C.y;Gn+=(C.x+V.x)*ae,Zn+=(C.y+V.y)*ae,wn+=3*ae}return new Xo(Gn/wn,Zn/wn,0,cn)}(a),Rr=_t.length;_t.length;){var mr=_t.pop();(mr.d>ur.d||!ur.d)&&(ur=mr,h&&console.log("found best %d after %d probes",Math.round(1e4*mr.d)/1e4,Rr)),mr.max-ur.d<=s||(_t.push(new Xo(mr.p.x-(Je=mr.h/2),mr.p.y-Je,Je,a)),_t.push(new Xo(mr.p.x+Je,mr.p.y-Je,Je,a)),_t.push(new Xo(mr.p.x-Je,mr.p.y+Je,Je,a)),_t.push(new Xo(mr.p.x+Je,mr.p.y+Je,Je,a)),Rr+=4)}return h&&(console.log("num probes: "+Rr),console.log("best distance: "+ur.d)),ur.p}function ko(a,s){return s.max-a.max}function Xo(a,s,h,E){this.p=new k(a,s),this.h=h,this.d=function(M,L){for(var j=!1,re=1/0,Ce=0;Ce<L.length;Ce++)for(var ze=L[Ce],We=0,Je=ze.length,_t=Je-1;We<Je;_t=We++){var It=ze[We],ar=ze[_t];It.y>M.y!=ar.y>M.y&&M.x<(ar.x-It.x)*(M.y-It.y)/(ar.y-It.y)+It.x&&(j=!j),re=Math.min(re,ip(M,It,ar))}return(j?1:-1)*Math.sqrt(re)}(this.p,E),this.max=this.d+this.h*Math.SQRT2}so.prototype.push=function(a){this.data.push(a),this.length++,this._up(this.length-1)},so.prototype.pop=function(){if(this.length!==0){var a=this.data[0],s=this.data.pop();return this.length--,this.length>0&&(this.data[0]=s,this._down(0)),a}},so.prototype.peek=function(){return this.data[0]},so.prototype._up=function(a){for(var s=this.data,h=this.compare,E=s[a];a>0;){var M=a-1>>1,L=s[M];if(h(E,L)>=0)break;s[a]=L,a=M}s[a]=E},so.prototype._down=function(a){for(var s=this.data,h=this.compare,E=this.length>>1,M=s[a];a<E;){var L=1+(a<<1),j=s[L],re=L+1;if(re<this.length&&h(s[re],j)<0&&(L=re,j=s[re]),h(j,M)>=0)break;s[a]=j,a=L}s[a]=M};var Hs=Number.POSITIVE_INFINITY;function jo(a,s){return s[1]!==Hs?function(h,E,M){var L=0,j=0;switch(E=Math.abs(E),M=Math.abs(M),h){case"top-right":case"top-left":case"top":j=M-7;break;case"bottom-right":case"bottom-left":case"bottom":j=7-M}switch(h){case"top-right":case"bottom-right":case"right":L=-E;break;case"top-left":case"bottom-left":case"left":L=E}return[L,j]}(a,s[0],s[1]):function(h,E){var M=0,L=0;E<0&&(E=0);var j=E/Math.sqrt(2);switch(h){case"top-right":case"top-left":L=j-7;break;case"bottom-right":case"bottom-left":L=7-j;break;case"bottom":L=7-E;break;case"top":L=E-7}switch(h){case"top-right":case"bottom-right":M=-j;break;case"top-left":case"bottom-left":M=j;break;case"left":M=E;break;case"right":M=-E}return[M,L]}(a,s[0])}function Dt(a){switch(a){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function an(a,s,h,E,M,L,j,re,Ce,ze,We,Je,_t,It,ar){var ur=function(Gn,Zn,gi,Yi,p,y,C,V){for(var ae=Yi.layout.get("text-rotate").evaluate(y,{})*Math.PI/180,Ie=[],ut=0,zt=Zn.positionedLines;ut<zt.length;ut+=1)for(var wr=zt[ut],fn=0,pi=wr.positionedGlyphs;fn<pi.length;fn+=1){var $n=pi[fn];if($n.rect){var hi=$n.rect||{},ca=4,Ra=!0,Da=1,os=0,gn=(p||V)&&$n.vertical,Qr=$n.metrics.advance*$n.scale/2;if(V&&Zn.verticalizable&&(os=wr.lineOffset/2-($n.imageName?-(24-$n.metrics.width*$n.scale)/2:24*($n.scale-1))),$n.imageName){var In=C[$n.imageName];Ra=In.sdf,ca=1/(Da=In.pixelRatio)}var ra=p?[$n.x+Qr,$n.y]:[0,0],Ba=p?[0,0]:[$n.x+Qr+gi[0],$n.y+gi[1]-os],ho=[0,0];gn&&(ho=Ba,Ba=[0,0]);var ro=($n.metrics.left-ca)*$n.scale-Qr+Ba[0],go=(-$n.metrics.top-ca)*$n.scale+Ba[1],wo=ro+hi.w*$n.scale/Da,Ao=go+hi.h*$n.scale/Da,Fs=new k(ro,go),Ws=new k(wo,go),Nf=new k(ro,Ao),gf=new k(wo,Ao);if(gn){var Ns=new k(-Qr,Qr- -17),nc=-Math.PI/2,yf=12-Qr,yu=new k(22-yf,-($n.imageName?yf:0)),Ki=new(Function.prototype.bind.apply(k,[null].concat(ho)));Fs._rotateAround(nc,Ns)._add(yu)._add(Ki),Ws._rotateAround(nc,Ns)._add(yu)._add(Ki),Nf._rotateAround(nc,Ns)._add(yu)._add(Ki),gf._rotateAround(nc,Ns)._add(yu)._add(Ki)}if(ae){var Tp=Math.sin(ae),Ln=Math.cos(ae),Qu=[Ln,-Tp,Tp,Ln];Fs._matMult(Qu),Ws._matMult(Qu),Nf._matMult(Qu),gf._matMult(Qu)}var fs=new k(0,0),Pp=new k(0,0);Ie.push({tl:Fs,tr:Ws,bl:Nf,br:gf,tex:hi,writingMode:Zn.writingMode,glyphOffset:ra,sectionIndex:$n.sectionIndex,isSDF:Ra,pixelOffsetTL:fs,pixelOffsetBR:Pp,minFontScaleX:0,minFontScaleY:0})}}return Ie}(0,h,re,M,L,j,E,a.allowVerticalPlacement),Rr=a.textSizeData,mr=null;Rr.kind==="source"?(mr=[128*M.layout.get("text-size").evaluate(j,{})])[0]>32640&&Ke(a.layerIds[0]+': Value for "text-size" is >= 255. Reduce your "text-size".'):Rr.kind==="composite"&&((mr=[128*It.compositeTextSizes[0].evaluate(j,{},ar),128*It.compositeTextSizes[1].evaluate(j,{},ar)])[0]>32640||mr[1]>32640)&&Ke(a.layerIds[0]+': Value for "text-size" is >= 255. Reduce your "text-size".'),a.addSymbols(a.text,ur,mr,re,L,j,ze,s,Ce.lineStartIndex,Ce.lineLength,_t,ar);for(var cn=0,wn=We;cn<wn.length;cn+=1)Je[wn[cn]]=a.text.placedSymbolArray.length-1;return 4*ur.length}function un(a){for(var s in a)return a[s];return null}function oa(a,s,h,E){var M=a.compareText;if(s in M){for(var L=M[s],j=L.length-1;j>=0;j--)if(E.dist(L[j])<h)return!0}else M[s]=[];return M[s].push(E),!1}var Do=Uc.VectorTileFeature.types,Ht=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function Mt(a,s,h,E,M,L,j,re,Ce,ze,We,Je,_t){var It=re?Math.min(32640,Math.round(re[0])):0,ar=re?Math.min(32640,Math.round(re[1])):0;a.emplaceBack(s,h,Math.round(32*E),Math.round(32*M),L,j,(It<<1)+(Ce?1:0),ar,16*ze,16*We,256*Je,256*_t)}function yr(a,s,h){a.emplaceBack(s.x,s.y,h),a.emplaceBack(s.x,s.y,h),a.emplaceBack(s.x,s.y,h),a.emplaceBack(s.x,s.y,h)}function Zr(a){for(var s=0,h=a.sections;s<h.length;s+=1)if(Yc(h[s].text))return!0;return!1}var Sn=function(a){this.layoutVertexArray=new xs,this.indexArray=new Dl,this.programConfigurations=a,this.segments=new Tt,this.dynamicLayoutVertexArray=new tu,this.opacityVertexArray=new Mo,this.placedSymbolArray=new S};Sn.prototype.isEmpty=function(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0},Sn.prototype.upload=function(a,s,h,E){this.isEmpty()||(h&&(this.layoutVertexBuffer=a.createVertexBuffer(this.layoutVertexArray,Pn.members),this.indexBuffer=a.createIndexBuffer(this.indexArray,s),this.dynamicLayoutVertexBuffer=a.createVertexBuffer(this.dynamicLayoutVertexArray,ti.members,!0),this.opacityVertexBuffer=a.createVertexBuffer(this.opacityVertexArray,Ht,!0),this.opacityVertexBuffer.itemSize=1),(h||E)&&this.programConfigurations.upload(a))},Sn.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())},ji("SymbolBuffers",Sn);var Or=function(a,s,h){this.layoutVertexArray=new a,this.layoutAttributes=s,this.indexArray=new h,this.segments=new Tt,this.collisionVertexArray=new cl};Or.prototype.upload=function(a){this.layoutVertexBuffer=a.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=a.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=a.createVertexBuffer(this.collisionVertexArray,Yn.members,!0)},Or.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())},ji("CollisionBuffers",Or);var ir=function(a){this.collisionBoxArray=a.collisionBoxArray,this.zoom=a.zoom,this.overscaling=a.overscaling,this.layers=a.layers,this.layerIds=this.layers.map(function(L){return L.id}),this.index=a.index,this.pixelRatio=a.pixelRatio,this.sourceLayerIndex=a.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=pl([]),this.placementViewportMatrix=pl([]);var s=this.layers[0]._unevaluatedLayout._values;this.textSizeData=aa(this.zoom,s["text-size"]),this.iconSizeData=aa(this.zoom,s["icon-size"]);var h=this.layers[0].layout,E=h.get("symbol-sort-key"),M=h.get("symbol-z-order");this.canOverlap=h.get("text-allow-overlap")||h.get("icon-allow-overlap")||h.get("text-ignore-placement")||h.get("icon-ignore-placement"),this.sortFeaturesByKey=M!=="viewport-y"&&E.constantOr(1)!==void 0,this.sortFeaturesByY=(M==="viewport-y"||M==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,h.get("symbol-placement")==="point"&&(this.writingModes=h.get("text-writing-mode").map(function(L){return wi[L]})),this.stateDependentLayerIds=this.layers.filter(function(L){return L.isStateDependent()}).map(function(L){return L.id}),this.sourceID=a.sourceID};ir.prototype.createArrays=function(){this.text=new Sn(new Ia(this.layers,this.zoom,function(a){return/^text/.test(a)})),this.icon=new Sn(new Ia(this.layers,this.zoom,function(a){return/^icon/.test(a)})),this.glyphOffsetArray=new ee,this.lineVertexArray=new Ae,this.symbolInstances=new X},ir.prototype.calculateGlyphDependencies=function(a,s,h,E,M){for(var L=0;L<a.length;L++)if(s[a.charCodeAt(L)]=!0,(h||E)&&M){var j=ki[a.charAt(L)];j&&(s[j.charCodeAt(0)]=!0)}},ir.prototype.populate=function(a,s,h){var E=this.layers[0],M=E.layout,L=M.get("text-font"),j=M.get("text-field"),re=M.get("icon-image"),Ce=(j.value.kind!=="constant"||j.value.value instanceof $s&&!j.value.value.isEmpty()||j.value.value.toString().length>0)&&(L.value.kind!=="constant"||L.value.value.length>0),ze=re.value.kind!=="constant"||!!re.value.value||Object.keys(re.parameters).length>0,We=M.get("symbol-sort-key");if(this.features=[],Ce||ze){for(var Je=s.iconDependencies,_t=s.glyphDependencies,It=s.availableImages,ar=new li(this.zoom),ur=0,Rr=a;ur<Rr.length;ur+=1){var mr=Rr[ur],cn=mr.feature,wn=mr.id,Gn=mr.index,Zn=mr.sourceLayerIndex,gi=E._featureFilter.needGeometry,Yi=Ts(cn,gi);if(E._featureFilter.filter(ar,Yi,h)){gi||(Yi.geometry=pu(cn));var p=void 0;if(Ce){var y=E.getValueAndResolveTokens("text-field",Yi,h,It),C=$s.factory(y);Zr(C)&&(this.hasRTLText=!0),(!this.hasRTLText||Kn()==="unavailable"||this.hasRTLText&&Ri.isParsed())&&(p=Bi(C,E,Yi))}var V=void 0;if(ze){var ae=E.getValueAndResolveTokens("icon-image",Yi,h,It);V=ae instanceof Es?ae:Es.fromString(ae)}if(p||V){var Ie=this.sortFeaturesByKey?We.evaluate(Yi,{},h):void 0;if(this.features.push({id:wn,text:p,icon:V,index:Gn,sourceLayerIndex:Zn,geometry:Yi.geometry,properties:cn.properties,type:Do[cn.type],sortKey:Ie}),V&&(Je[V.name]=!0),p){var ut=L.evaluate(Yi,{},h).join(","),zt=M.get("text-rotation-alignment")==="map"&&M.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(wi.vertical)>=0;for(var wr=0,fn=p.sections;wr<fn.length;wr+=1){var pi=fn[wr];if(pi.image)Je[pi.image.name]=!0;else{var $n=lf(p.toString()),hi=pi.fontStack||ut,ca=_t[hi]=_t[hi]||{};this.calculateGlyphDependencies(pi.text,ca,zt,this.allowVerticalPlacement,$n)}}}}}}M.get("symbol-placement")==="line"&&(this.features=function(Ra){var Da={},os={},gn=[],Qr=0;function In(Ns){gn.push(Ra[Ns]),Qr++}function ra(Ns,nc,yf){var yu=os[Ns];return delete os[Ns],os[nc]=yu,gn[yu].geometry[0].pop(),gn[yu].geometry[0]=gn[yu].geometry[0].concat(yf[0]),yu}function Ba(Ns,nc,yf){var yu=Da[nc];return delete Da[nc],Da[Ns]=yu,gn[yu].geometry[0].shift(),gn[yu].geometry[0]=yf[0].concat(gn[yu].geometry[0]),yu}function ho(Ns,nc,yf){var yu=yf?nc[0][nc[0].length-1]:nc[0][0];return Ns+":"+yu.x+":"+yu.y}for(var ro=0;ro<Ra.length;ro++){var go=Ra[ro],wo=go.geometry,Ao=go.text?go.text.toString():null;if(Ao){var Fs=ho(Ao,wo),Ws=ho(Ao,wo,!0);if(Fs in os&&Ws in Da&&os[Fs]!==Da[Ws]){var Nf=Ba(Fs,Ws,wo),gf=ra(Fs,Ws,gn[Nf].geometry);delete Da[Fs],delete os[Ws],os[ho(Ao,gn[gf].geometry,!0)]=gf,gn[Nf].geometry=null}else Fs in os?ra(Fs,Ws,wo):Ws in Da?Ba(Fs,Ws,wo):(In(ro),Da[Fs]=Qr-1,os[Ws]=Qr-1)}else In(ro)}return gn.filter(function(Ns){return Ns.geometry})}(this.features)),this.sortFeaturesByKey&&this.features.sort(function(Ra,Da){return Ra.sortKey-Da.sortKey})}},ir.prototype.update=function(a,s,h){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(a,s,this.layers,h),this.icon.programConfigurations.updatePaintArrays(a,s,this.layers,h))},ir.prototype.isEmpty=function(){return this.symbolInstances.length===0&&!this.hasRTLText},ir.prototype.uploadPending=function(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload},ir.prototype.upload=function(a){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(a),this.iconCollisionBox.upload(a)),this.text.upload(a,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(a,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0},ir.prototype.destroyDebugData=function(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()},ir.prototype.destroy=function(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()},ir.prototype.addToLineVertexArray=function(a,s){var h=this.lineVertexArray.length;if(a.segment!==void 0){for(var E=a.dist(s[a.segment+1]),M=a.dist(s[a.segment]),L={},j=a.segment+1;j<s.length;j++)L[j]={x:s[j].x,y:s[j].y,tileUnitDistanceFromAnchor:E},j<s.length-1&&(E+=s[j+1].dist(s[j]));for(var re=a.segment||0;re>=0;re--)L[re]={x:s[re].x,y:s[re].y,tileUnitDistanceFromAnchor:M},re>0&&(M+=s[re-1].dist(s[re]));for(var Ce=0;Ce<s.length;Ce++){var ze=L[Ce];this.lineVertexArray.emplaceBack(ze.x,ze.y,ze.tileUnitDistanceFromAnchor)}}return{lineStartIndex:h,lineLength:this.lineVertexArray.length-h}},ir.prototype.addSymbols=function(a,s,h,E,M,L,j,re,Ce,ze,We,Je){for(var _t=a.indexArray,It=a.layoutVertexArray,ar=a.segments.prepareSegment(4*s.length,It,_t,this.canOverlap?L.sortKey:void 0),ur=this.glyphOffsetArray.length,Rr=ar.vertexLength,mr=this.allowVerticalPlacement&&j===wi.vertical?Math.PI/2:0,cn=L.text&&L.text.sections,wn=0;wn<s.length;wn++){var Gn=s[wn],Zn=Gn.tl,gi=Gn.tr,Yi=Gn.bl,p=Gn.br,y=Gn.tex,C=Gn.pixelOffsetTL,V=Gn.pixelOffsetBR,ae=Gn.minFontScaleX,Ie=Gn.minFontScaleY,ut=Gn.glyphOffset,zt=Gn.isSDF,wr=Gn.sectionIndex,fn=ar.vertexLength,pi=ut[1];Mt(It,re.x,re.y,Zn.x,pi+Zn.y,y.x,y.y,h,zt,C.x,C.y,ae,Ie),Mt(It,re.x,re.y,gi.x,pi+gi.y,y.x+y.w,y.y,h,zt,V.x,C.y,ae,Ie),Mt(It,re.x,re.y,Yi.x,pi+Yi.y,y.x,y.y+y.h,h,zt,C.x,V.y,ae,Ie),Mt(It,re.x,re.y,p.x,pi+p.y,y.x+y.w,y.y+y.h,h,zt,V.x,V.y,ae,Ie),yr(a.dynamicLayoutVertexArray,re,mr),_t.emplaceBack(fn,fn+1,fn+2),_t.emplaceBack(fn+1,fn+2,fn+3),ar.vertexLength+=4,ar.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(ut[0]),wn!==s.length-1&&wr===s[wn+1].sectionIndex||a.programConfigurations.populatePaintArrays(It.length,L,L.index,{},Je,cn&&cn[wr])}a.placedSymbolArray.emplaceBack(re.x,re.y,ur,this.glyphOffsetArray.length-ur,Rr,Ce,ze,re.segment,h?h[0]:0,h?h[1]:0,E[0],E[1],j,0,!1,0,We)},ir.prototype._addCollisionDebugVertex=function(a,s,h,E,M,L){return s.emplaceBack(0,0),a.emplaceBack(h.x,h.y,E,M,Math.round(L.x),Math.round(L.y))},ir.prototype.addCollisionDebugVertices=function(a,s,h,E,M,L,j){var re=M.segments.prepareSegment(4,M.layoutVertexArray,M.indexArray),Ce=re.vertexLength,ze=M.layoutVertexArray,We=M.collisionVertexArray,Je=j.anchorX,_t=j.anchorY;this._addCollisionDebugVertex(ze,We,L,Je,_t,new k(a,s)),this._addCollisionDebugVertex(ze,We,L,Je,_t,new k(h,s)),this._addCollisionDebugVertex(ze,We,L,Je,_t,new k(h,E)),this._addCollisionDebugVertex(ze,We,L,Je,_t,new k(a,E)),re.vertexLength+=4;var It=M.indexArray;It.emplaceBack(Ce,Ce+1),It.emplaceBack(Ce+1,Ce+2),It.emplaceBack(Ce+2,Ce+3),It.emplaceBack(Ce+3,Ce),re.primitiveLength+=4},ir.prototype.addDebugCollisionBoxes=function(a,s,h,E){for(var M=a;M<s;M++){var L=this.collisionBoxArray.get(M);this.addCollisionDebugVertices(L.x1,L.y1,L.x2,L.y2,E?this.textCollisionBox:this.iconCollisionBox,L.anchorPoint,h)}},ir.prototype.generateCollisionDebugBuffers=function(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new Or(pf,On.members,Nc),this.iconCollisionBox=new Or(pf,On.members,Nc);for(var a=0;a<this.symbolInstances.length;a++){var s=this.symbolInstances.get(a);this.addDebugCollisionBoxes(s.textBoxStartIndex,s.textBoxEndIndex,s,!0),this.addDebugCollisionBoxes(s.verticalTextBoxStartIndex,s.verticalTextBoxEndIndex,s,!0),this.addDebugCollisionBoxes(s.iconBoxStartIndex,s.iconBoxEndIndex,s,!1),this.addDebugCollisionBoxes(s.verticalIconBoxStartIndex,s.verticalIconBoxEndIndex,s,!1)}},ir.prototype._deserializeCollisionBoxesForSymbol=function(a,s,h,E,M,L,j,re,Ce){for(var ze={},We=s;We<h;We++){var Je=a.get(We);ze.textBox={x1:Je.x1,y1:Je.y1,x2:Je.x2,y2:Je.y2,anchorPointX:Je.anchorPointX,anchorPointY:Je.anchorPointY},ze.textFeatureIndex=Je.featureIndex;break}for(var _t=E;_t<M;_t++){var It=a.get(_t);ze.verticalTextBox={x1:It.x1,y1:It.y1,x2:It.x2,y2:It.y2,anchorPointX:It.anchorPointX,anchorPointY:It.anchorPointY},ze.verticalTextFeatureIndex=It.featureIndex;break}for(var ar=L;ar<j;ar++){var ur=a.get(ar);ze.iconBox={x1:ur.x1,y1:ur.y1,x2:ur.x2,y2:ur.y2,anchorPointX:ur.anchorPointX,anchorPointY:ur.anchorPointY},ze.iconFeatureIndex=ur.featureIndex;break}for(var Rr=re;Rr<Ce;Rr++){var mr=a.get(Rr);ze.verticalIconBox={x1:mr.x1,y1:mr.y1,x2:mr.x2,y2:mr.y2,anchorPointX:mr.anchorPointX,anchorPointY:mr.anchorPointY},ze.verticalIconFeatureIndex=mr.featureIndex;break}return ze},ir.prototype.deserializeCollisionBoxes=function(a){this.collisionArrays=[];for(var s=0;s<this.symbolInstances.length;s++){var h=this.symbolInstances.get(s);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(a,h.textBoxStartIndex,h.textBoxEndIndex,h.verticalTextBoxStartIndex,h.verticalTextBoxEndIndex,h.iconBoxStartIndex,h.iconBoxEndIndex,h.verticalIconBoxStartIndex,h.verticalIconBoxEndIndex))}},ir.prototype.hasTextData=function(){return this.text.segments.get().length>0},ir.prototype.hasIconData=function(){return this.icon.segments.get().length>0},ir.prototype.hasDebugData=function(){return this.textCollisionBox&&this.iconCollisionBox},ir.prototype.hasTextCollisionBoxData=function(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0},ir.prototype.hasIconCollisionBoxData=function(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0},ir.prototype.addIndicesForPlacedSymbol=function(a,s){for(var h=a.placedSymbolArray.get(s),E=h.vertexStartIndex+4*h.numGlyphs,M=h.vertexStartIndex;M<E;M+=4)a.indexArray.emplaceBack(M,M+1,M+2),a.indexArray.emplaceBack(M+1,M+2,M+3)},ir.prototype.getSortedSymbolIndexes=function(a){if(this.sortedAngle===a&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;for(var s=Math.sin(a),h=Math.cos(a),E=[],M=[],L=[],j=0;j<this.symbolInstances.length;++j){L.push(j);var re=this.symbolInstances.get(j);E.push(0|Math.round(s*re.anchorX+h*re.anchorY)),M.push(re.featureIndex)}return L.sort(function(Ce,ze){return E[Ce]-E[ze]||M[ze]-M[Ce]}),L},ir.prototype.addToSortKeyRanges=function(a,s){var h=this.sortKeyRanges[this.sortKeyRanges.length-1];h&&h.sortKey===s?h.symbolInstanceEnd=a+1:this.sortKeyRanges.push({sortKey:s,symbolInstanceStart:a,symbolInstanceEnd:a+1})},ir.prototype.sortFeatures=function(a){var s=this;if(this.sortFeaturesByY&&this.sortedAngle!==a&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(a),this.sortedAngle=a,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(var h=0,E=this.symbolInstanceIndexes;h<E.length;h+=1){var M=this.symbolInstances.get(E[h]);this.featureSortOrder.push(M.featureIndex),[M.rightJustifiedTextSymbolIndex,M.centerJustifiedTextSymbolIndex,M.leftJustifiedTextSymbolIndex].forEach(function(L,j,re){L>=0&&re.indexOf(L)===j&&s.addIndicesForPlacedSymbol(s.text,L)}),M.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,M.verticalPlacedTextSymbolIndex),M.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,M.placedIconSymbolIndex),M.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,M.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}},ji("SymbolBucket",ir,{omit:["layers","collisionBoxArray","features","compareText"]}),ir.MAX_GLYPHS=65535,ir.addDynamicAttributes=yr;var Br=new Zs({"symbol-placement":new Pa(bt.layout_symbol["symbol-placement"]),"symbol-spacing":new Pa(bt.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new Pa(bt.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new la(bt.layout_symbol["symbol-sort-key"]),"symbol-z-order":new Pa(bt.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new Pa(bt.layout_symbol["icon-allow-overlap"]),"icon-ignore-placement":new Pa(bt.layout_symbol["icon-ignore-placement"]),"icon-optional":new Pa(bt.layout_symbol["icon-optional"]),"icon-rotation-alignment":new Pa(bt.layout_symbol["icon-rotation-alignment"]),"icon-size":new la(bt.layout_symbol["icon-size"]),"icon-text-fit":new Pa(bt.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new Pa(bt.layout_symbol["icon-text-fit-padding"]),"icon-image":new la(bt.layout_symbol["icon-image"]),"icon-rotate":new la(bt.layout_symbol["icon-rotate"]),"icon-padding":new Pa(bt.layout_symbol["icon-padding"]),"icon-keep-upright":new Pa(bt.layout_symbol["icon-keep-upright"]),"icon-offset":new la(bt.layout_symbol["icon-offset"]),"icon-anchor":new la(bt.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new Pa(bt.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new Pa(bt.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new Pa(bt.layout_symbol["text-rotation-alignment"]),"text-field":new la(bt.layout_symbol["text-field"]),"text-font":new la(bt.layout_symbol["text-font"]),"text-size":new la(bt.layout_symbol["text-size"]),"text-max-width":new la(bt.layout_symbol["text-max-width"]),"text-line-height":new Pa(bt.layout_symbol["text-line-height"]),"text-letter-spacing":new la(bt.layout_symbol["text-letter-spacing"]),"text-justify":new la(bt.layout_symbol["text-justify"]),"text-radial-offset":new la(bt.layout_symbol["text-radial-offset"]),"text-variable-anchor":new Pa(bt.layout_symbol["text-variable-anchor"]),"text-anchor":new la(bt.layout_symbol["text-anchor"]),"text-max-angle":new Pa(bt.layout_symbol["text-max-angle"]),"text-writing-mode":new Pa(bt.layout_symbol["text-writing-mode"]),"text-rotate":new la(bt.layout_symbol["text-rotate"]),"text-padding":new Pa(bt.layout_symbol["text-padding"]),"text-keep-upright":new Pa(bt.layout_symbol["text-keep-upright"]),"text-transform":new la(bt.layout_symbol["text-transform"]),"text-offset":new la(bt.layout_symbol["text-offset"]),"text-allow-overlap":new Pa(bt.layout_symbol["text-allow-overlap"]),"text-ignore-placement":new Pa(bt.layout_symbol["text-ignore-placement"]),"text-optional":new Pa(bt.layout_symbol["text-optional"])}),kt={paint:new Zs({"icon-opacity":new la(bt.paint_symbol["icon-opacity"]),"icon-color":new la(bt.paint_symbol["icon-color"]),"icon-halo-color":new la(bt.paint_symbol["icon-halo-color"]),"icon-halo-width":new la(bt.paint_symbol["icon-halo-width"]),"icon-halo-blur":new la(bt.paint_symbol["icon-halo-blur"]),"icon-translate":new Pa(bt.paint_symbol["icon-translate"]),"icon-translate-anchor":new Pa(bt.paint_symbol["icon-translate-anchor"]),"text-opacity":new la(bt.paint_symbol["text-opacity"]),"text-color":new la(bt.paint_symbol["text-color"],{runtimeType:Wi,getOverride:function(a){return a.textColor},hasOverride:function(a){return!!a.textColor}}),"text-halo-color":new la(bt.paint_symbol["text-halo-color"]),"text-halo-width":new la(bt.paint_symbol["text-halo-width"]),"text-halo-blur":new la(bt.paint_symbol["text-halo-blur"]),"text-translate":new Pa(bt.paint_symbol["text-translate"]),"text-translate-anchor":new Pa(bt.paint_symbol["text-translate-anchor"])}),layout:Br},fr=function(a){this.type=a.property.overrides?a.property.overrides.runtimeType:fa,this.defaultValue=a};fr.prototype.evaluate=function(a){if(a.formattedSection){var s=this.defaultValue.property.overrides;if(s&&s.hasOverride(a.formattedSection))return s.getOverride(a.formattedSection)}return a.feature&&a.featureState?this.defaultValue.evaluate(a.feature,a.featureState):this.defaultValue.property.specification.default},fr.prototype.eachChild=function(a){this.defaultValue.isConstant()||a(this.defaultValue.value._styleExpression.expression)},fr.prototype.outputDefined=function(){return!1},fr.prototype.serialize=function(){return null},ji("FormatSectionOverride",fr,{omit:["defaultValue"]});var jt=function(a){function s(h){a.call(this,h,kt)}return a&&(s.__proto__=a),(s.prototype=Object.create(a&&a.prototype)).constructor=s,s.prototype.recalculate=function(h,E){if(a.prototype.recalculate.call(this,h,E),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){var M=this.layout.get("text-writing-mode");if(M){for(var L=[],j=0,re=M;j<re.length;j+=1){var Ce=re[j];L.indexOf(Ce)<0&&L.push(Ce)}this.layout._values["text-writing-mode"]=L}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()},s.prototype.getValueAndResolveTokens=function(h,E,M,L){var j=this.layout.get(h).evaluate(E,{},M,L),re=this._unevaluatedLayout._values[h];return re.isDataDriven()||uu(re.value)||!j?j:function(Ce,ze){return ze.replace(/{([^{}]+)}/g,function(We,Je){return Je in Ce?String(Ce[Je]):""})}(E.properties,j)},s.prototype.createBucket=function(h){return new ir(h)},s.prototype.queryRadius=function(){return 0},s.prototype.queryIntersectsFeature=function(){return!1},s.prototype._setPaintOverrides=function(){for(var h=0,E=kt.paint.overridableProperties;h<E.length;h+=1){var M=E[h];if(s.hasPaintOverride(this.layout,M)){var L,j=this.paint.get(M),re=new fr(j),Ce=new Wc(re,j.property.specification);L=j.value.kind==="constant"||j.value.kind==="source"?new kc("source",Ce):new oc("composite",Ce,j.value.zoomStops,j.value._interpolationType),this.paint._values[M]=new cu(j.property,L,j.parameters)}}},s.prototype._handleOverridablePaintPropertyUpdate=function(h,E,M){return!(!this.layout||E.isDataDriven()||M.isDataDriven())&&s.hasPaintOverride(this.layout,h)},s.hasPaintOverride=function(h,E){var M=h.get("text-field"),L=kt.paint.properties[E],j=!1,re=function(We){for(var Je=0,_t=We;Je<_t.length;Je+=1)if(L.overrides&&L.overrides.hasOverride(_t[Je]))return void(j=!0)};if(M.value.kind==="constant"&&M.value.value instanceof $s)re(M.value.value.sections);else if(M.value.kind==="source"){var Ce=function(We){j||(We instanceof Ru&&bo(We.value)===Jr?re(We.value.sections):We instanceof au?re(We.sections):We.eachChild(Ce))},ze=M.value;ze._styleExpression&&Ce(ze._styleExpression.expression)}return j},s}(ul),rn={paint:new Zs({"background-color":new Pa(bt.paint_background["background-color"]),"background-pattern":new us(bt.paint_background["background-pattern"]),"background-opacity":new Pa(bt.paint_background["background-opacity"])})},jr=function(a){function s(h){a.call(this,h,rn)}return a&&(s.__proto__=a),(s.prototype=Object.create(a&&a.prototype)).constructor=s,s}(ul),Cn={paint:new Zs({"raster-opacity":new Pa(bt.paint_raster["raster-opacity"]),"raster-hue-rotate":new Pa(bt.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new Pa(bt.paint_raster["raster-brightness-min"]),"raster-brightness-max":new Pa(bt.paint_raster["raster-brightness-max"]),"raster-saturation":new Pa(bt.paint_raster["raster-saturation"]),"raster-contrast":new Pa(bt.paint_raster["raster-contrast"]),"raster-resampling":new Pa(bt.paint_raster["raster-resampling"]),"raster-fade-duration":new Pa(bt.paint_raster["raster-fade-duration"])})},Ci=function(a){function s(h){a.call(this,h,Cn)}return a&&(s.__proto__=a),(s.prototype=Object.create(a&&a.prototype)).constructor=s,s}(ul),Oi=function(a){function s(h){a.call(this,h,{}),this.implementation=h}return a&&(s.__proto__=a),(s.prototype=Object.create(a&&a.prototype)).constructor=s,s.prototype.is3D=function(){return this.implementation.renderingMode==="3d"},s.prototype.hasOffscreenPass=function(){return this.implementation.prerender!==void 0},s.prototype.recalculate=function(){},s.prototype.updateTransitions=function(){},s.prototype.hasTransition=function(){},s.prototype.serialize=function(){},s.prototype.onAdd=function(h){this.implementation.onAdd&&this.implementation.onAdd(h,h.painter.context.gl)},s.prototype.onRemove=function(h){this.implementation.onRemove&&this.implementation.onRemove(h,h.painter.context.gl)},s}(ul),sa={circle:wf,heatmap:wp,hillshade:zp,fill:yl,"fill-extrusion":Df,line:vr,symbol:jt,background:jr,raster:Ci},$i=z.HTMLImageElement,xa=z.HTMLCanvasElement,va=z.HTMLVideoElement,Ca=z.ImageData,pa=z.ImageBitmap,Sa=function(a,s,h,E){this.context=a,this.format=h,this.texture=a.gl.createTexture(),this.update(s,E)};Sa.prototype.update=function(a,s,h){var E=a.width,M=a.height,L=!(this.size&&this.size[0]===E&&this.size[1]===M||h),j=this.context,re=j.gl;if(this.useMipmap=Boolean(s&&s.useMipmap),re.bindTexture(re.TEXTURE_2D,this.texture),j.pixelStoreUnpackFlipY.set(!1),j.pixelStoreUnpack.set(1),j.pixelStoreUnpackPremultiplyAlpha.set(this.format===re.RGBA&&(!s||s.premultiply!==!1)),L)this.size=[E,M],a instanceof $i||a instanceof xa||a instanceof va||a instanceof Ca||pa&&a instanceof pa?re.texImage2D(re.TEXTURE_2D,0,this.format,this.format,re.UNSIGNED_BYTE,a):re.texImage2D(re.TEXTURE_2D,0,this.format,E,M,0,this.format,re.UNSIGNED_BYTE,a.data);else{var Ce=h||{x:0,y:0},ze=Ce.x,We=Ce.y;a instanceof $i||a instanceof xa||a instanceof va||a instanceof Ca||pa&&a instanceof pa?re.texSubImage2D(re.TEXTURE_2D,0,ze,We,re.RGBA,re.UNSIGNED_BYTE,a):re.texSubImage2D(re.TEXTURE_2D,0,ze,We,E,M,re.RGBA,re.UNSIGNED_BYTE,a.data)}this.useMipmap&&this.isSizePowerOfTwo()&&re.generateMipmap(re.TEXTURE_2D)},Sa.prototype.bind=function(a,s,h){var E=this.context.gl;E.bindTexture(E.TEXTURE_2D,this.texture),h!==E.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(h=E.LINEAR),a!==this.filter&&(E.texParameteri(E.TEXTURE_2D,E.TEXTURE_MAG_FILTER,a),E.texParameteri(E.TEXTURE_2D,E.TEXTURE_MIN_FILTER,h||a),this.filter=a),s!==this.wrap&&(E.texParameteri(E.TEXTURE_2D,E.TEXTURE_WRAP_S,s),E.texParameteri(E.TEXTURE_2D,E.TEXTURE_WRAP_T,s),this.wrap=s)},Sa.prototype.isSizePowerOfTwo=function(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0},Sa.prototype.destroy=function(){this.context.gl.deleteTexture(this.texture),this.texture=null};var to=function(a){var s=this;this._callback=a,this._triggered=!1,typeof MessageChannel!="undefined"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=function(){s._triggered=!1,s._callback()})};to.prototype.trigger=function(){var a=this;this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(function(){a._triggered=!1,a._callback()},0))},to.prototype.remove=function(){delete this._channel,this._callback=function(){}};var Is=function(a,s,h){this.target=a,this.parent=s,this.mapId=h,this.callbacks={},this.tasks={},this.taskQueue=[],this.cancelCallbacks={},Ve(["receive","process"],this),this.invoker=new to(this.process),this.target.addEventListener("message",this.receive,!1),this.globalScope=ie()?a:z};function _l(a,s,h){var E=2*Math.PI*6378137/256/Math.pow(2,h);return[a*E-2*Math.PI*6378137/2,s*E-2*Math.PI*6378137/2]}Is.prototype.send=function(a,s,h,E,M){var L=this;M===void 0&&(M=!1);var j=Math.round(1e18*Math.random()).toString(36).substring(0,10);h&&(this.callbacks[j]=h);var re=ye(this.globalScope)?void 0:[];return this.target.postMessage({id:j,type:a,hasCallback:!!h,targetMapId:E,mustQueue:M,sourceMapId:this.mapId,data:Il(s,re)},re),{cancel:function(){h&&delete L.callbacks[j],L.target.postMessage({id:j,type:"<cancel>",targetMapId:E,sourceMapId:L.mapId})}}},Is.prototype.receive=function(a){var s=a.data,h=s.id;if(h&&(!s.targetMapId||this.mapId===s.targetMapId))if(s.type==="<cancel>"){delete this.tasks[h];var E=this.cancelCallbacks[h];delete this.cancelCallbacks[h],E&&E()}else ie()||s.mustQueue?(this.tasks[h]=s,this.taskQueue.push(h),this.invoker.trigger()):this.processTask(h,s)},Is.prototype.process=function(){if(this.taskQueue.length){var a=this.taskQueue.shift(),s=this.tasks[a];delete this.tasks[a],this.taskQueue.length&&this.invoker.trigger(),s&&this.processTask(a,s)}},Is.prototype.processTask=function(a,s){var h=this;if(s.type==="<response>"){var E=this.callbacks[a];delete this.callbacks[a],E&&(s.error?E(ku(s.error)):E(null,ku(s.data)))}else{var M=!1,L=ye(this.globalScope)?void 0:[],j=s.hasCallback?function(We,Je){M=!0,delete h.cancelCallbacks[a],h.target.postMessage({id:a,type:"<response>",sourceMapId:h.mapId,error:We?Il(We):null,data:Il(Je,L)},L)}:function(We){M=!0},re=null,Ce=ku(s.data);if(this.parent[s.type])re=this.parent[s.type](s.sourceMapId,Ce,j);else if(this.parent.getWorkerSource){var ze=s.type.split(".");re=this.parent.getWorkerSource(s.sourceMapId,ze[0],Ce.source)[ze[1]](Ce,j)}else j(new Error("Could not find function "+s.type));!M&&re&&re.cancel&&(this.cancelCallbacks[a]=re.cancel)}},Is.prototype.remove=function(){this.invoker.remove(),this.target.removeEventListener("message",this.receive,!1)};var Lo=function(a,s){a&&(s?this.setSouthWest(a).setNorthEast(s):a.length===4?this.setSouthWest([a[0],a[1]]).setNorthEast([a[2],a[3]]):this.setSouthWest(a[0]).setNorthEast(a[1]))};Lo.prototype.setNorthEast=function(a){return this._ne=a instanceof Ja?new Ja(a.lng,a.lat):Ja.convert(a),this},Lo.prototype.setSouthWest=function(a){return this._sw=a instanceof Ja?new Ja(a.lng,a.lat):Ja.convert(a),this},Lo.prototype.extend=function(a){var s,h,E=this._sw,M=this._ne;if(a instanceof Ja)s=a,h=a;else{if(!(a instanceof Lo))return Array.isArray(a)?a.length===4||a.every(Array.isArray)?this.extend(Lo.convert(a)):this.extend(Ja.convert(a)):this;if(h=a._ne,!(s=a._sw)||!h)return this}return E||M?(E.lng=Math.min(s.lng,E.lng),E.lat=Math.min(s.lat,E.lat),M.lng=Math.max(h.lng,M.lng),M.lat=Math.max(h.lat,M.lat)):(this._sw=new Ja(s.lng,s.lat),this._ne=new Ja(h.lng,h.lat)),this},Lo.prototype.getCenter=function(){return new Ja((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)},Lo.prototype.getSouthWest=function(){return this._sw},Lo.prototype.getNorthEast=function(){return this._ne},Lo.prototype.getNorthWest=function(){return new Ja(this.getWest(),this.getNorth())},Lo.prototype.getSouthEast=function(){return new Ja(this.getEast(),this.getSouth())},Lo.prototype.getWest=function(){return this._sw.lng},Lo.prototype.getSouth=function(){return this._sw.lat},Lo.prototype.getEast=function(){return this._ne.lng},Lo.prototype.getNorth=function(){return this._ne.lat},Lo.prototype.toArray=function(){return[this._sw.toArray(),this._ne.toArray()]},Lo.prototype.toString=function(){return"LngLatBounds("+this._sw.toString()+", "+this._ne.toString()+")"},Lo.prototype.isEmpty=function(){return!(this._sw&&this._ne)},Lo.prototype.contains=function(a){var s=Ja.convert(a),h=s.lng,E=s.lat,M=this._sw.lng<=h&&h<=this._ne.lng;return this._sw.lng>this._ne.lng&&(M=this._sw.lng>=h&&h>=this._ne.lng),this._sw.lat<=E&&E<=this._ne.lat&&M},Lo.convert=function(a){return!a||a instanceof Lo?a:new Lo(a)};var Ja=function(a,s){if(isNaN(a)||isNaN(s))throw new Error("Invalid LngLat object: ("+a+", "+s+")");if(this.lng=+a,this.lat=+s,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")};Ja.prototype.wrap=function(){return new Ja(le(this.lng,-180,180),this.lat)},Ja.prototype.toArray=function(){return[this.lng,this.lat]},Ja.prototype.toString=function(){return"LngLat("+this.lng+", "+this.lat+")"},Ja.prototype.distanceTo=function(a){var s=Math.PI/180,h=this.lat*s,E=a.lat*s,M=Math.sin(h)*Math.sin(E)+Math.cos(h)*Math.cos(E)*Math.cos((a.lng-this.lng)*s);return 63710088e-1*Math.acos(Math.min(M,1))},Ja.prototype.toBounds=function(a){a===void 0&&(a=0);var s=360*a/40075017,h=s/Math.cos(Math.PI/180*this.lat);return new Lo(new Ja(this.lng-h,this.lat-s),new Ja(this.lng+h,this.lat+s))},Ja.convert=function(a){if(a instanceof Ja)return a;if(Array.isArray(a)&&(a.length===2||a.length===3))return new Ja(Number(a[0]),Number(a[1]));if(!Array.isArray(a)&&typeof a=="object"&&a!==null)return new Ja(Number("lng"in a?a.lng:a.lon),Number(a.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")};var Cu=2*Math.PI*63710088e-1;function Uu(a){return Cu*Math.cos(a*Math.PI/180)}function dl(a){return(180+a)/360}function Nl(a){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+a*Math.PI/360)))/360}function mf(a,s){return a/Uu(s)}function Cc(a){return 360/Math.PI*Math.atan(Math.exp((180-360*a)*Math.PI/180))-90}var $f=function(a,s,h){h===void 0&&(h=0),this.x=+a,this.y=+s,this.z=+h};$f.fromLngLat=function(a,s){s===void 0&&(s=0);var h=Ja.convert(a);return new $f(dl(h.lng),Nl(h.lat),mf(s,h.lat))},$f.prototype.toLngLat=function(){return new Ja(360*this.x-180,Cc(this.y))},$f.prototype.toAltitude=function(){return this.z*Uu(Cc(this.y))},$f.prototype.meterInMercatorCoordinateUnits=function(){return 1/Cu*(a=Cc(this.y),1/Math.cos(a*Math.PI/180));var a};var lh=function(a,s,h){this.z=a,this.x=s,this.y=h,this.key=Lh(0,a,a,s,h)};lh.prototype.equals=function(a){return this.z===a.z&&this.x===a.x&&this.y===a.y},lh.prototype.url=function(a,s){var h,E,M,L,j,re=(E=this.y,M=this.z,L=_l(256*(h=this.x),256*(E=Math.pow(2,M)-E-1),M),j=_l(256*(h+1),256*(E+1),M),L[0]+","+L[1]+","+j[0]+","+j[1]),Ce=function(ze,We,Je){for(var _t,It="",ar=ze;ar>0;ar--)It+=(We&(_t=1<<ar-1)?1:0)+(Je&_t?2:0);return It}(this.z,this.x,this.y);return a[(this.x+this.y)%a.length].replace("{prefix}",(this.x%16).toString(16)+(this.y%16).toString(16)).replace("{z}",String(this.z)).replace("{x}",String(this.x)).replace("{y}",String(s==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace("{quadkey}",Ce).replace("{bbox-epsg-3857}",re)},lh.prototype.getTilePoint=function(a){var s=Math.pow(2,this.z);return new k(8192*(a.x*s-this.x),8192*(a.y*s-this.y))},lh.prototype.toString=function(){return this.z+"/"+this.x+"/"+this.y};var Bl=function(a,s){this.wrap=a,this.canonical=s,this.key=Lh(a,s.z,s.z,s.x,s.y)},jl=function(a,s,h,E,M){this.overscaledZ=a,this.wrap=s,this.canonical=new lh(h,+E,+M),this.key=Lh(s,a,h,E,M)};function Lh(a,s,h,E,M){(a*=2)<0&&(a=-1*a-1);var L=1<<h;return(L*L*a+L*M+E).toString(36)+h.toString(36)+s.toString(36)}jl.prototype.equals=function(a){return this.overscaledZ===a.overscaledZ&&this.wrap===a.wrap&&this.canonical.equals(a.canonical)},jl.prototype.scaledTo=function(a){var s=this.canonical.z-a;return a>this.canonical.z?new jl(a,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new jl(a,this.wrap,a,this.canonical.x>>s,this.canonical.y>>s)},jl.prototype.calculateScaledKey=function(a,s){var h=this.canonical.z-a;return a>this.canonical.z?Lh(this.wrap*+s,a,this.canonical.z,this.canonical.x,this.canonical.y):Lh(this.wrap*+s,a,a,this.canonical.x>>h,this.canonical.y>>h)},jl.prototype.isChildOf=function(a){if(a.wrap!==this.wrap)return!1;var s=this.canonical.z-a.canonical.z;return a.overscaledZ===0||a.overscaledZ<this.overscaledZ&&a.canonical.x===this.canonical.x>>s&&a.canonical.y===this.canonical.y>>s},jl.prototype.children=function(a){if(this.overscaledZ>=a)return[new jl(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];var s=this.canonical.z+1,h=2*this.canonical.x,E=2*this.canonical.y;return[new jl(s,this.wrap,s,h,E),new jl(s,this.wrap,s,h+1,E),new jl(s,this.wrap,s,h,E+1),new jl(s,this.wrap,s,h+1,E+1)]},jl.prototype.isLessThan=function(a){return this.wrap<a.wrap||!(this.wrap>a.wrap)&&(this.overscaledZ<a.overscaledZ||!(this.overscaledZ>a.overscaledZ)&&(this.canonical.x<a.canonical.x||!(this.canonical.x>a.canonical.x)&&this.canonical.y<a.canonical.y))},jl.prototype.wrapped=function(){return new jl(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)},jl.prototype.unwrapTo=function(a){return new jl(this.overscaledZ,a,this.canonical.z,this.canonical.x,this.canonical.y)},jl.prototype.overscaleFactor=function(){return Math.pow(2,this.overscaledZ-this.canonical.z)},jl.prototype.toUnwrapped=function(){return new Bl(this.wrap,this.canonical)},jl.prototype.toString=function(){return this.overscaledZ+"/"+this.canonical.x+"/"+this.canonical.y},jl.prototype.getTilePoint=function(a){return this.canonical.getTilePoint(new $f(a.x-this.wrap,a.y))},ji("CanonicalTileID",lh),ji("OverscaledTileID",jl,{omit:["posMatrix"]});var Qp=function(a,s,h){if(this.uid=a,s.height!==s.width)throw new RangeError("DEM tiles must be square");if(h&&h!=="mapbox"&&h!=="terrarium")return Ke('"'+h+'" is not a valid encoding type. Valid types include "mapbox" and "terrarium".');this.stride=s.height;var E=this.dim=s.height-2;this.data=new Uint32Array(s.data.buffer),this.encoding=h||"mapbox";for(var M=0;M<E;M++)this.data[this._idx(-1,M)]=this.data[this._idx(0,M)],this.data[this._idx(E,M)]=this.data[this._idx(E-1,M)],this.data[this._idx(M,-1)]=this.data[this._idx(M,0)],this.data[this._idx(M,E)]=this.data[this._idx(M,E-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(E,-1)]=this.data[this._idx(E-1,0)],this.data[this._idx(-1,E)]=this.data[this._idx(0,E-1)],this.data[this._idx(E,E)]=this.data[this._idx(E-1,E-1)]};Qp.prototype.get=function(a,s){var h=new Uint8Array(this.data.buffer),E=4*this._idx(a,s);return(this.encoding==="terrarium"?this._unpackTerrarium:this._unpackMapbox)(h[E],h[E+1],h[E+2])},Qp.prototype.getUnpackVector=function(){return this.encoding==="terrarium"?[256,1,.00390625,32768]:[6553.6,25.6,.1,1e4]},Qp.prototype._idx=function(a,s){if(a<-1||a>=this.dim+1||s<-1||s>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(s+1)*this.stride+(a+1)},Qp.prototype._unpackMapbox=function(a,s,h){return(256*a*256+256*s+h)/10-1e4},Qp.prototype._unpackTerrarium=function(a,s,h){return 256*a+s+h/256-32768},Qp.prototype.getPixels=function(){return new mu({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))},Qp.prototype.backfillBorder=function(a,s,h){if(this.dim!==a.dim)throw new Error("dem dimension mismatch");var E=s*this.dim,M=s*this.dim+this.dim,L=h*this.dim,j=h*this.dim+this.dim;switch(s){case-1:E=M-1;break;case 1:M=E+1}switch(h){case-1:L=j-1;break;case 1:j=L+1}for(var re=-s*this.dim,Ce=-h*this.dim,ze=L;ze<j;ze++)for(var We=E;We<M;We++)this.data[this._idx(We,ze)]=a.data[this._idx(We+re,ze+Ce)]},ji("DEMData",Qp);var Qh=function(a){this._stringToNumber={},this._numberToString=[];for(var s=0;s<a.length;s++){var h=a[s];this._stringToNumber[h]=s,this._numberToString[s]=h}};Qh.prototype.encode=function(a){return this._stringToNumber[a]},Qh.prototype.decode=function(a){return this._numberToString[a]};var jh=function(a,s,h,E,M){this.type="Feature",this._vectorTileFeature=a,a._z=s,a._x=h,a._y=E,this.properties=a.properties,this.id=M},Jh={geometry:{configurable:!0}};Jh.geometry.get=function(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry},Jh.geometry.set=function(a){this._geometry=a},jh.prototype.toJSON=function(){var a={geometry:this.geometry};for(var s in this)s!=="_geometry"&&s!=="_vectorTileFeature"&&(a[s]=this[s]);return a},Object.defineProperties(jh.prototype,Jh);var wh=function(){this.state={},this.stateChanges={},this.deletedStates={}};wh.prototype.updateState=function(a,s,h){var E=String(s);if(this.stateChanges[a]=this.stateChanges[a]||{},this.stateChanges[a][E]=this.stateChanges[a][E]||{},be(this.stateChanges[a][E],h),this.deletedStates[a]===null)for(var M in this.deletedStates[a]={},this.state[a])M!==E&&(this.deletedStates[a][M]=null);else if(this.deletedStates[a]&&this.deletedStates[a][E]===null)for(var L in this.deletedStates[a][E]={},this.state[a][E])h[L]||(this.deletedStates[a][E][L]=null);else for(var j in h)this.deletedStates[a]&&this.deletedStates[a][E]&&this.deletedStates[a][E][j]===null&&delete this.deletedStates[a][E][j]},wh.prototype.removeFeatureState=function(a,s,h){if(this.deletedStates[a]!==null){var E=String(s);if(this.deletedStates[a]=this.deletedStates[a]||{},h&&s!==void 0)this.deletedStates[a][E]!==null&&(this.deletedStates[a][E]=this.deletedStates[a][E]||{},this.deletedStates[a][E][h]=null);else if(s!==void 0)if(this.stateChanges[a]&&this.stateChanges[a][E])for(h in this.deletedStates[a][E]={},this.stateChanges[a][E])this.deletedStates[a][E][h]=null;else this.deletedStates[a][E]=null;else this.deletedStates[a]=null}},wh.prototype.getState=function(a,s){var h=String(s),E=be({},(this.state[a]||{})[h],(this.stateChanges[a]||{})[h]);if(this.deletedStates[a]===null)return{};if(this.deletedStates[a]){var M=this.deletedStates[a][s];if(M===null)return{};for(var L in M)delete E[L]}return E},wh.prototype.initializeTileState=function(a,s){a.setFeatureState(this.state,s)},wh.prototype.coalesceChanges=function(a,s){var h={};for(var E in this.stateChanges){this.state[E]=this.state[E]||{};var M={};for(var L in this.stateChanges[E])this.state[E][L]||(this.state[E][L]={}),be(this.state[E][L],this.stateChanges[E][L]),M[L]=this.state[E][L];h[E]=M}for(var j in this.deletedStates){this.state[j]=this.state[j]||{};var re={};if(this.deletedStates[j]===null)for(var Ce in this.state[j])re[Ce]={},this.state[j][Ce]={};else for(var ze in this.deletedStates[j]){if(this.deletedStates[j][ze]===null)this.state[j][ze]={};else for(var We=0,Je=Object.keys(this.deletedStates[j][ze]);We<Je.length;We+=1)delete this.state[j][ze][Je[We]];re[ze]=this.state[j][ze]}h[j]=h[j]||{},be(h[j],re)}if(this.stateChanges={},this.deletedStates={},Object.keys(h).length!==0)for(var _t in a)a[_t].setFeatureState(h,s)};var Tc=function(a,s){this.tileID=a,this.x=a.canonical.x,this.y=a.canonical.y,this.z=a.canonical.z,this.grid=new ml(8192,16,0),this.grid3D=new ml(8192,16,0),this.featureIndexArray=new nt,this.promoteId=s};function Jp(a,s,h,E,M){return ke(a,function(L,j){var re=s instanceof tl?s.get(j):null;return re&&re.evaluate?re.evaluate(h,E,M):re})}function Ld(a){for(var s=1/0,h=1/0,E=-1/0,M=-1/0,L=0,j=a;L<j.length;L+=1){var re=j[L];s=Math.min(s,re.x),h=Math.min(h,re.y),E=Math.max(E,re.x),M=Math.max(M,re.y)}return{minX:s,minY:h,maxX:E,maxY:M}}function Cp(a,s){return s-a}Tc.prototype.insert=function(a,s,h,E,M,L){var j=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(h,E,M);for(var re=L?this.grid3D:this.grid,Ce=0;Ce<s.length;Ce++){for(var ze=s[Ce],We=[1/0,1/0,-1/0,-1/0],Je=0;Je<ze.length;Je++){var _t=ze[Je];We[0]=Math.min(We[0],_t.x),We[1]=Math.min(We[1],_t.y),We[2]=Math.max(We[2],_t.x),We[3]=Math.max(We[3],_t.y)}We[0]<8192&&We[1]<8192&&We[2]>=0&&We[3]>=0&&re.insert(j,We[0],We[1],We[2],We[3])}},Tc.prototype.loadVTLayers=function(){return this.vtLayers||(this.vtLayers=new Uc.VectorTile(new Fi(this.rawTileData)).layers,this.sourceLayerCoder=new Qh(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers},Tc.prototype.query=function(a,s,h,E){var M=this;this.loadVTLayers();for(var L=a.params||{},j=8192/a.tileSize/a.scale,re=Dc(L.filter),Ce=a.queryGeometry,ze=a.queryPadding*j,We=Ld(Ce),Je=this.grid.query(We.minX-ze,We.minY-ze,We.maxX+ze,We.maxY+ze),_t=Ld(a.cameraQueryGeometry),It=this.grid3D.query(_t.minX-ze,_t.minY-ze,_t.maxX+ze,_t.maxY+ze,function(Gn,Zn,gi,Yi){return function(p,y,C,V,ae){for(var Ie=0,ut=p;Ie<ut.length;Ie+=1){var zt=ut[Ie];if(y<=zt.x&&C<=zt.y&&V>=zt.x&&ae>=zt.y)return!0}var wr=[new k(y,C),new k(y,ae),new k(V,ae),new k(V,C)];if(p.length>2){for(var fn=0,pi=wr;fn<pi.length;fn+=1)if(fl(p,pi[fn]))return!0}for(var $n=0;$n<p.length-1;$n++)if(Qc(p[$n],p[$n+1],wr))return!0;return!1}(a.cameraQueryGeometry,Gn-ze,Zn-ze,gi+ze,Yi+ze)}),ar=0,ur=It;ar<ur.length;ar+=1)Je.push(ur[ar]);Je.sort(Cp);for(var Rr,mr={},cn=function(Gn){var Zn=Je[Gn];if(Zn!==Rr){Rr=Zn;var gi=M.featureIndexArray.get(Zn),Yi=null;M.loadMatchingFeature(mr,gi.bucketIndex,gi.sourceLayerIndex,gi.featureIndex,re,L.layers,L.availableImages,s,h,E,function(p,y,C){return Yi||(Yi=pu(p)),y.queryIntersectsFeature(Ce,p,C,Yi,M.z,a.transform,j,a.pixelPosMatrix)})}},wn=0;wn<Je.length;wn++)cn(wn);return mr},Tc.prototype.loadMatchingFeature=function(a,s,h,E,M,L,j,re,Ce,ze,We){var Je=this.bucketLayerIDs[s];if(!L||function(p,y){for(var C=0;C<p.length;C++)if(y.indexOf(p[C])>=0)return!0;return!1}(L,Je)){var _t=this.sourceLayerCoder.decode(h),It=this.vtLayers[_t].feature(E);if(M.needGeometry){var ar=Ts(It,!0);if(!M.filter(new li(this.tileID.overscaledZ),ar,this.tileID.canonical))return}else if(!M.filter(new li(this.tileID.overscaledZ),It))return;for(var ur=this.getId(It,_t),Rr=0;Rr<Je.length;Rr++){var mr=Je[Rr];if(!(L&&L.indexOf(mr)<0)){var cn=re[mr];if(cn){var wn={};ur!==void 0&&ze&&(wn=ze.getState(cn.sourceLayer||"_geojsonTileLayer",ur));var Gn=be({},Ce[mr]);Gn.paint=Jp(Gn.paint,cn.paint,It,wn,j),Gn.layout=Jp(Gn.layout,cn.layout,It,wn,j);var Zn=!We||We(It,cn,wn);if(Zn){var gi=new jh(It,this.z,this.x,this.y,ur);gi.layer=Gn;var Yi=a[mr];Yi===void 0&&(Yi=a[mr]=[]),Yi.push({featureIndex:E,feature:gi,intersectionZ:Zn})}}}}}},Tc.prototype.lookupSymbolFeatures=function(a,s,h,E,M,L,j,re){var Ce={};this.loadVTLayers();for(var ze=Dc(M),We=0,Je=a;We<Je.length;We+=1)this.loadMatchingFeature(Ce,h,E,Je[We],ze,L,j,re,s);return Ce},Tc.prototype.hasLayer=function(a){for(var s=0,h=this.bucketLayerIDs;s<h.length;s+=1)for(var E=0,M=h[s];E<M.length;E+=1)if(a===M[E])return!0;return!1},Tc.prototype.getId=function(a,s){var h=a.id;return this.promoteId&&typeof(h=a.properties[typeof this.promoteId=="string"?this.promoteId:this.promoteId[s]])=="boolean"&&(h=Number(h)),h},ji("FeatureIndex",Tc,{omit:["rawTileData","sourceLayerCoder"]});var zl=function(a,s){this.tileID=a,this.uid=pe(),this.uses=0,this.tileSize=s,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.expiredRequestCount=0,this.state="loading"};zl.prototype.registerFadeDuration=function(a){var s=a+this.timeAdded;s<xr.now()||this.fadeEndTime&&s<this.fadeEndTime||(this.fadeEndTime=s)},zl.prototype.wasRequested=function(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"},zl.prototype.loadVectorData=function(a,s,h){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",a){for(var E in a.featureIndex&&(this.latestFeatureIndex=a.featureIndex,a.rawTileData?(this.latestRawTileData=a.rawTileData,this.latestFeatureIndex.rawTileData=a.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=a.collisionBoxArray,this.buckets=function(ze,We){var Je={};if(!We)return Je;for(var _t=function(){var ur=ar[It],Rr=ur.layerIds.map(function(wn){return We.getLayer(wn)}).filter(Boolean);if(Rr.length!==0){ur.layers=Rr,ur.stateDependentLayerIds&&(ur.stateDependentLayers=ur.stateDependentLayerIds.map(function(wn){return Rr.filter(function(Gn){return Gn.id===wn})[0]}));for(var mr=0,cn=Rr;mr<cn.length;mr+=1)Je[cn[mr].id]=ur}},It=0,ar=ze;It<ar.length;It+=1)_t();return Je}(a.buckets,s.style),this.hasSymbolBuckets=!1,this.buckets){var M=this.buckets[E];if(M instanceof ir){if(this.hasSymbolBuckets=!0,!h)break;M.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(var L in this.buckets){var j=this.buckets[L];if(j instanceof ir&&j.hasRTLText){this.hasRTLText=!0,Ri.isLoading()||Ri.isLoaded()||Kn()!=="deferred"||Vn();break}}for(var re in this.queryPadding=0,this.buckets){var Ce=this.buckets[re];this.queryPadding=Math.max(this.queryPadding,s.style.getLayer(re).queryRadius(Ce))}a.imageAtlas&&(this.imageAtlas=a.imageAtlas),a.glyphAtlasImage&&(this.glyphAtlasImage=a.glyphAtlasImage)}else this.collisionBoxArray=new _},zl.prototype.unloadVectorData=function(){for(var a in this.buckets)this.buckets[a].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"},zl.prototype.getBucket=function(a){return this.buckets[a.id]},zl.prototype.upload=function(a){for(var s in this.buckets){var h=this.buckets[s];h.uploadPending()&&h.upload(a)}var E=a.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new Sa(a,this.imageAtlas.image,E.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new Sa(a,this.glyphAtlasImage,E.ALPHA),this.glyphAtlasImage=null)},zl.prototype.prepare=function(a){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(a,this.imageAtlasTexture)},zl.prototype.queryRenderedFeatures=function(a,s,h,E,M,L,j,re,Ce,ze){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:E,cameraQueryGeometry:M,scale:L,tileSize:this.tileSize,pixelPosMatrix:ze,transform:re,params:j,queryPadding:this.queryPadding*Ce},a,s,h):{}},zl.prototype.querySourceFeatures=function(a,s){var h=this.latestFeatureIndex;if(h&&h.rawTileData){var E=h.loadVTLayers(),M=s?s.sourceLayer:"",L=E._geojsonTileLayer||E[M];if(L)for(var j=Dc(s&&s.filter),re=this.tileID.canonical,Ce=re.z,ze=re.x,We=re.y,Je={z:Ce,x:ze,y:We},_t=0;_t<L.length;_t++){var It=L.feature(_t);if(j.needGeometry){var ar=Ts(It,!0);if(!j.filter(new li(this.tileID.overscaledZ),ar,this.tileID.canonical))continue}else if(!j.filter(new li(this.tileID.overscaledZ),It))continue;var ur=h.getId(It,M),Rr=new jh(It,Ce,ze,We,ur);Rr.tile=Je,a.push(Rr)}}},zl.prototype.hasData=function(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"},zl.prototype.patternsLoaded=function(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length},zl.prototype.setExpiryData=function(a){var s=this.expirationTime;if(a.cacheControl){var h=oe(a.cacheControl);h["max-age"]&&(this.expirationTime=Date.now()+1e3*h["max-age"])}else a.expires&&(this.expirationTime=new Date(a.expires).getTime());if(this.expirationTime){var E=Date.now(),M=!1;if(this.expirationTime>E)M=!1;else if(s)if(this.expirationTime<s)M=!0;else{var L=this.expirationTime-s;L?this.expirationTime=E+Math.max(L,3e4):M=!0}else M=!0;M?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}},zl.prototype.getExpiryTimeout=function(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)},zl.prototype.setFeatureState=function(a,s){if(this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData&&Object.keys(a).length!==0){var h=this.latestFeatureIndex.loadVTLayers();for(var E in this.buckets)if(s.style.hasLayer(E)){var M=this.buckets[E],L=M.layers[0].sourceLayer||"_geojsonTileLayer",j=h[L],re=a[L];if(j&&re&&Object.keys(re).length!==0){M.update(re,j,this.imageAtlas&&this.imageAtlas.patternPositions||{});var Ce=s&&s.style&&s.style.getLayer(E);Ce&&(this.queryPadding=Math.max(this.queryPadding,Ce.queryRadius(M)))}}}},zl.prototype.holdingForFade=function(){return this.symbolFadeHoldUntil!==void 0},zl.prototype.symbolFadeFinished=function(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<xr.now()},zl.prototype.clearFadeHold=function(){this.symbolFadeHoldUntil=void 0},zl.prototype.setHoldDuration=function(a){this.symbolFadeHoldUntil=xr.now()+a},zl.prototype.setDependencies=function(a,s){for(var h={},E=0,M=s;E<M.length;E+=1)h[M[E]]=!0;this.dependencies[a]=h},zl.prototype.hasDependency=function(a,s){for(var h=0,E=a;h<E.length;h+=1){var M=this.dependencies[E[h]];if(M){for(var L=0,j=s;L<j.length;L+=1)if(M[j[L]])return!0}}return!1};var Ff=z.performance,Vh=function(a){this._marks={start:[a.url,"start"].join("#"),end:[a.url,"end"].join("#"),measure:a.url.toString()},Ff.mark(this._marks.start)};Vh.prototype.finish=function(){Ff.mark(this._marks.end);var a=Ff.getEntriesByName(this._marks.measure);return a.length===0&&(Ff.measure(this._marks.measure,this._marks.start,this._marks.end),a=Ff.getEntriesByName(this._marks.measure),Ff.clearMarks(this._marks.start),Ff.clearMarks(this._marks.end),Ff.clearMeasures(this._marks.measure)),a},l.Actor=Is,l.AlphaImage=Yu,l.CanonicalTileID=lh,l.CollisionBoxArray=_,l.Color=rr,l.DEMData=Qp,l.DataConstantProperty=Pa,l.DictionaryCoder=Qh,l.EXTENT=8192,l.ErrorEvent=Zt,l.EvaluationParameters=li,l.Event=Et,l.Evented=sr,l.FeatureIndex=Tc,l.FillBucket=hl,l.FillExtrusionBucket=pc,l.ImageAtlas=oi,l.ImagePosition=Nr,l.LineBucket=at,l.LngLat=Ja,l.LngLatBounds=Lo,l.MercatorCoordinate=$f,l.ONE_EM=24,l.OverscaledTileID=jl,l.Point=k,l.Point$1=k,l.Properties=Zs,l.Protobuf=Fi,l.RGBAImage=mu,l.RequestManager=Vr,l.RequestPerformance=Vh,l.ResourceType=Gt,l.SegmentVector=Tt,l.SourceFeatureState=wh,l.StructArrayLayout1ui2=hf,l.StructArrayLayout2f1f2i16=np,l.StructArrayLayout2i4=Du,l.StructArrayLayout3ui6=Dl,l.StructArrayLayout4i8=du,l.SymbolBucket=ir,l.Texture=Sa,l.Tile=zl,l.Transitionable=Ma,l.Uniform1f=Li,l.Uniform1i=yi,l.Uniform2f=Ei,l.Uniform3f=Vi,l.Uniform4f=Ea,l.UniformColor=Qa,l.UniformMatrix4f=io,l.UnwrappedTileID=Bl,l.ValidationError=Ft,l.WritingMode=wi,l.ZoomHistory=ec,l.add=function(a,s,h){return a[0]=s[0]+h[0],a[1]=s[1]+h[1],a[2]=s[2]+h[2],a},l.addDynamicAttributes=yr,l.asyncAll=function(a,s,h){if(!a.length)return h(null,[]);var E=a.length,M=new Array(a.length),L=null;a.forEach(function(j,re){s(j,function(Ce,ze){Ce&&(L=Ce),M[re]=ze,--E==0&&h(L,M)})})},l.bezier=W,l.bindAll=Ve,l.browser=xr,l.cacheEntryPossiblyAdded=function(a){++ce>qt&&(a.getActor().send("enforceCacheSizeLimit",lt),ce=0)},l.clamp=te,l.clearTileCache=function(a){var s=z.caches.delete("mapbox-tiles");a&&s.catch(a).then(function(){return a()})},l.clipLine=Vs,l.clone=function(a){var s=new ts(16);return s[0]=a[0],s[1]=a[1],s[2]=a[2],s[3]=a[3],s[4]=a[4],s[5]=a[5],s[6]=a[6],s[7]=a[7],s[8]=a[8],s[9]=a[9],s[10]=a[10],s[11]=a[11],s[12]=a[12],s[13]=a[13],s[14]=a[14],s[15]=a[15],s},l.clone$1=Me,l.clone$2=function(a){var s=new ts(3);return s[0]=a[0],s[1]=a[1],s[2]=a[2],s},l.collisionCircleLayout=Ni,l.config=$r,l.create=function(){var a=new ts(16);return ts!=Float32Array&&(a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[11]=0,a[12]=0,a[13]=0,a[14]=0),a[0]=1,a[5]=1,a[10]=1,a[15]=1,a},l.create$1=function(){var a=new ts(9);return ts!=Float32Array&&(a[1]=0,a[2]=0,a[3]=0,a[5]=0,a[6]=0,a[7]=0),a[0]=1,a[4]=1,a[8]=1,a},l.create$2=function(){var a=new ts(4);return ts!=Float32Array&&(a[1]=0,a[2]=0),a[0]=1,a[3]=1,a},l.createCommonjsModule=R,l.createExpression=hs,l.createLayout=Qo,l.createStyleLayer=function(a){return a.type==="custom"?new Oi(a):new sa[a.type](a)},l.cross=function(a,s,h){var E=s[0],M=s[1],L=s[2],j=h[0],re=h[1],Ce=h[2];return a[0]=M*Ce-L*re,a[1]=L*j-E*Ce,a[2]=E*re-M*j,a},l.deepEqual=function a(s,h){if(Array.isArray(s)){if(!Array.isArray(h)||s.length!==h.length)return!1;for(var E=0;E<s.length;E++)if(!a(s[E],h[E]))return!1;return!0}if(typeof s=="object"&&s!==null&&h!==null){if(typeof h!="object"||Object.keys(s).length!==Object.keys(h).length)return!1;for(var M in s)if(!a(s[M],h[M]))return!1;return!0}return s===h},l.dot=function(a,s){return a[0]*s[0]+a[1]*s[1]+a[2]*s[2]},l.dot$1=function(a,s){return a[0]*s[0]+a[1]*s[1]+a[2]*s[2]+a[3]*s[3]},l.ease=Y,l.emitValidationErrors=Jl,l.endsWith=K,l.enforceCacheSizeLimit=function(a){pr(),ne&&ne.then(function(s){s.keys().then(function(h){for(var E=0;E<h.length-a;E++)s.delete(h[E])})})},l.evaluateSizeForFeature=Fa,l.evaluateSizeForZoom=$a,l.evaluateVariableOffset=jo,l.evented=ri,l.extend=be,l.featureFilter=Dc,l.filterObject=we,l.fromRotation=function(a,s){var h=Math.sin(s),E=Math.cos(s);return a[0]=E,a[1]=h,a[2]=0,a[3]=-h,a[4]=E,a[5]=0,a[6]=0,a[7]=0,a[8]=1,a},l.getAnchorAlignment=_i,l.getAnchorJustification=Dt,l.getArrayBuffer=ka,l.getImage=et,l.getJSON=function(a,s){return Pi(be(a,{type:"json"}),s)},l.getRTLTextPluginStatus=Kn,l.getReferrer=nn,l.getVideo=function(a,s){var h,E,M=z.document.createElement("video");M.muted=!0,M.onloadstart=function(){s(null,M)};for(var L=0;L<a.length;L++){var j=z.document.createElement("source");h=a[L],E=void 0,(E=z.document.createElement("a")).href=h,(E.protocol!==z.document.location.protocol||E.host!==z.document.location.host)&&(M.crossOrigin="Anonymous"),j.src=a[L],M.appendChild(j)}return{cancel:function(){}}},l.identity=pl,l.invert=function(a,s){var h=s[0],E=s[1],M=s[2],L=s[3],j=s[4],re=s[5],Ce=s[6],ze=s[7],We=s[8],Je=s[9],_t=s[10],It=s[11],ar=s[12],ur=s[13],Rr=s[14],mr=s[15],cn=h*re-E*j,wn=h*Ce-M*j,Gn=h*ze-L*j,Zn=E*Ce-M*re,gi=E*ze-L*re,Yi=M*ze-L*Ce,p=We*ur-Je*ar,y=We*Rr-_t*ar,C=We*mr-It*ar,V=Je*Rr-_t*ur,ae=Je*mr-It*ur,Ie=_t*mr-It*Rr,ut=cn*Ie-wn*ae+Gn*V+Zn*C-gi*y+Yi*p;return ut?(a[0]=(re*Ie-Ce*ae+ze*V)*(ut=1/ut),a[1]=(M*ae-E*Ie-L*V)*ut,a[2]=(ur*Yi-Rr*gi+mr*Zn)*ut,a[3]=(_t*gi-Je*Yi-It*Zn)*ut,a[4]=(Ce*C-j*Ie-ze*y)*ut,a[5]=(h*Ie-M*C+L*y)*ut,a[6]=(Rr*Gn-ar*Yi-mr*wn)*ut,a[7]=(We*Yi-_t*Gn+It*wn)*ut,a[8]=(j*ae-re*C+ze*p)*ut,a[9]=(E*C-h*ae-L*p)*ut,a[10]=(ar*gi-ur*Gn+mr*cn)*ut,a[11]=(Je*Gn-We*gi-It*cn)*ut,a[12]=(re*y-j*V-Ce*p)*ut,a[13]=(h*V-E*y+M*p)*ut,a[14]=(ur*wn-ar*Zn-Rr*cn)*ut,a[15]=(We*Zn-Je*wn+_t*cn)*ut,a):null},l.isChar=ia,l.isMapboxURL=Qn,l.keysDifference=function(a,s){var h=[];for(var E in a)E in s||h.push(E);return h},l.makeRequest=Pi,l.mapObject=ke,l.mercatorXfromLng=dl,l.mercatorYfromLat=Nl,l.mercatorZfromAltitude=mf,l.mul=ap,l.multiply=Rl,l.mvt=Uc,l.nextPowerOfTwo=function(a){return a<=1?1:Math.pow(2,Math.ceil(Math.log(a)/Math.LN2))},l.normalize=function(a,s){var h=s[0],E=s[1],M=s[2],L=h*h+E*E+M*M;return L>0&&(L=1/Math.sqrt(L)),a[0]=s[0]*L,a[1]=s[1]*L,a[2]=s[2]*L,a},l.number=ys,l.offscreenCanvasSupported=xt,l.ortho=function(a,s,h,E,M,L,j){var re=1/(s-h),Ce=1/(E-M),ze=1/(L-j);return a[0]=-2*re,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=-2*Ce,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=2*ze,a[11]=0,a[12]=(s+h)*re,a[13]=(M+E)*Ce,a[14]=(j+L)*ze,a[15]=1,a},l.parseGlyphPBF=function(a){return new Fi(a).readFields(bn,[])},l.pbf=Fi,l.performSymbolLayout=function(a,s,h,E,M,L,j){a.createArrays(),a.tilePixelRatio=8192/(512*a.overscaling),a.compareText={},a.iconsNeedLinear=!1;var re=a.layers[0].layout,Ce=a.layers[0]._unevaluatedLayout._values,ze={};if(a.textSizeData.kind==="composite"){var We=a.textSizeData,Je=We.maxZoom;ze.compositeTextSizes=[Ce["text-size"].possiblyEvaluate(new li(We.minZoom),j),Ce["text-size"].possiblyEvaluate(new li(Je),j)]}if(a.iconSizeData.kind==="composite"){var _t=a.iconSizeData,It=_t.maxZoom;ze.compositeIconSizes=[Ce["icon-size"].possiblyEvaluate(new li(_t.minZoom),j),Ce["icon-size"].possiblyEvaluate(new li(It),j)]}ze.layoutTextSize=Ce["text-size"].possiblyEvaluate(new li(a.zoom+1),j),ze.layoutIconSize=Ce["icon-size"].possiblyEvaluate(new li(a.zoom+1),j),ze.textMaxSize=Ce["text-size"].possiblyEvaluate(new li(18));for(var ar=24*re.get("text-line-height"),ur=re.get("text-rotation-alignment")==="map"&&re.get("symbol-placement")!=="point",Rr=re.get("text-keep-upright"),mr=re.get("text-size"),cn=function(){var Zn=Gn[wn],gi=re.get("text-font").evaluate(Zn,{},j).join(","),Yi=mr.evaluate(Zn,{},j),p=ze.layoutTextSize.evaluate(Zn,{},j),y=ze.layoutIconSize.evaluate(Zn,{},j),C={horizontal:{},vertical:void 0},V=Zn.text,ae=[0,0];if(V){var Ie=V.toString(),ut=24*re.get("text-letter-spacing").evaluate(Zn,{},j),zt=function(wo){for(var Ao=0,Fs=wo;Ao<Fs.length;Ao+=1)if(Ws=Fs[Ao].charCodeAt(0),ia.Arabic(Ws)||ia["Arabic Supplement"](Ws)||ia["Arabic Extended-A"](Ws)||ia["Arabic Presentation Forms-A"](Ws)||ia["Arabic Presentation Forms-B"](Ws))return!1;var Ws;return!0}(Ie)?ut:0,wr=re.get("text-anchor").evaluate(Zn,{},j),fn=re.get("text-variable-anchor");if(!fn){var pi=re.get("text-radial-offset").evaluate(Zn,{},j);ae=pi?jo(wr,[24*pi,Hs]):re.get("text-offset").evaluate(Zn,{},j).map(function(wo){return 24*wo})}var $n=ur?"center":re.get("text-justify").evaluate(Zn,{},j),hi=re.get("symbol-placement"),ca=hi==="point"?24*re.get("text-max-width").evaluate(Zn,{},j):0,Ra=function(){a.allowVerticalPlacement&&lf(Ie)&&(C.vertical=Mi(V,s,h,M,gi,ca,ar,wr,"left",zt,ae,wi.vertical,!0,hi,p,Yi))};if(!ur&&fn){for(var Da=$n==="auto"?fn.map(function(wo){return Dt(wo)}):[$n],os=!1,gn=0;gn<Da.length;gn++){var Qr=Da[gn];if(!C.horizontal[Qr])if(os)C.horizontal[Qr]=C.horizontal[0];else{var In=Mi(V,s,h,M,gi,ca,ar,"center",Qr,zt,ae,wi.horizontal,!1,hi,p,Yi);In&&(C.horizontal[Qr]=In,os=In.positionedLines.length===1)}}Ra()}else{$n==="auto"&&($n=Dt(wr));var ra=Mi(V,s,h,M,gi,ca,ar,wr,$n,zt,ae,wi.horizontal,!1,hi,p,Yi);ra&&(C.horizontal[$n]=ra),Ra(),lf(Ie)&&ur&&Rr&&(C.vertical=Mi(V,s,h,M,gi,ca,ar,wr,$n,zt,ae,wi.vertical,!1,hi,p,Yi))}}var Ba=void 0,ho=!1;if(Zn.icon&&Zn.icon.name){var ro=E[Zn.icon.name];ro&&(Ba=function(wo,Ao,Fs){var Ws=_i(Fs),Nf=Ao[0]-wo.displaySize[0]*Ws.horizontalAlign,gf=Ao[1]-wo.displaySize[1]*Ws.verticalAlign;return{image:wo,top:gf,bottom:gf+wo.displaySize[1],left:Nf,right:Nf+wo.displaySize[0]}}(M[Zn.icon.name],re.get("icon-offset").evaluate(Zn,{},j),re.get("icon-anchor").evaluate(Zn,{},j)),ho=ro.sdf,a.sdfIcons===void 0?a.sdfIcons=ro.sdf:a.sdfIcons!==ro.sdf&&Ke("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(ro.pixelRatio!==a.pixelRatio||re.get("icon-rotate").constantOr(1)!==0)&&(a.iconsNeedLinear=!0))}var go=un(C.horizontal)||C.vertical;a.iconsInText=!!go&&go.iconsInText,(go||Ba)&&function(wo,Ao,Fs,Ws,Nf,gf,Ns,nc,yf,yu,Ki){var Tp=gf.textMaxSize.evaluate(Ao,{});Tp===void 0&&(Tp=Ns);var Ln,Qu=wo.layers[0].layout,fs=Qu.get("icon-offset").evaluate(Ao,{},Ki),Pp=un(Fs.horizontal),_f=Ns/24,xl=wo.tilePixelRatio*_f,ch=wo.tilePixelRatio*Tp/24,sp=wo.tilePixelRatio*nc,qh=wo.tilePixelRatio*Qu.get("symbol-spacing"),dd=Qu.get("text-padding")*wo.tilePixelRatio,Gh=Qu.get("icon-padding")*wo.tilePixelRatio,ed=Qu.get("text-max-angle")/180*Math.PI,vd=Qu.get("text-rotation-alignment")==="map"&&Qu.get("symbol-placement")!=="point",Hh=Qu.get("icon-rotation-alignment")==="map"&&Qu.get("symbol-placement")!=="point",Ah=Qu.get("symbol-placement"),Mp=qh/2,Wh=Qu.get("icon-text-fit");Ws&&Wh!=="none"&&(wo.allowVerticalPlacement&&Fs.vertical&&(Ln=La(Ws,Fs.vertical,Wh,Qu.get("icon-text-fit-padding"),fs,_f)),Pp&&(Ws=La(Ws,Pp,Wh,Qu.get("icon-text-fit-padding"),fs,_f)));var qp=function(id,kp){kp.x<0||kp.x>=8192||kp.y<0||kp.y>=8192||function(no,Lp,Hp,ph,rv,Hu,Bd,Dp,Xh,Ed,Sp,th,Ch,Iv,hh,ad,od,nv,Ov,Rv,Ip,zd,Ud,rh,iv){var Pv,Dh,sd,hc,xf,ud=no.addToLineVertexArray(Lp,Hp),kv=0,av=0,Sd=0,Lv=0,ov=-1,Zd=-1,dh={},Dv=Yt(""),jd=0,sv=0;if(Dp._unevaluatedLayout.getValue("text-radial-offset")===void 0?(jd=(Pv=Dp.layout.get("text-offset").evaluate(Ip,{},rh).map(function(ld){return 24*ld}))[0],sv=Pv[1]):(jd=24*Dp.layout.get("text-radial-offset").evaluate(Ip,{},rh),sv=Hs),no.allowVerticalPlacement&&ph.vertical){var uv=Dp.layout.get("text-rotate").evaluate(Ip,{},rh)+90;hc=new as(Xh,Lp,Ed,Sp,th,ph.vertical,Ch,Iv,hh,uv),Bd&&(xf=new as(Xh,Lp,Ed,Sp,th,Bd,od,nv,hh,uv))}if(rv){var Vd=Dp.layout.get("icon-rotate").evaluate(Ip,{}),Fv=Dp.layout.get("icon-text-fit")!=="none",lv=Ls(rv,Vd,Ud,Fv),cv=Bd?Ls(Bd,Vd,Ud,Fv):void 0;sd=new as(Xh,Lp,Ed,Sp,th,rv,od,nv,!1,Vd),kv=4*lv.length;var Nv=no.iconSizeData,vh=null;Nv.kind==="source"?(vh=[128*Dp.layout.get("icon-size").evaluate(Ip,{})])[0]>32640&&Ke(no.layerIds[0]+': Value for "icon-size" is >= 255. Reduce your "icon-size".'):Nv.kind==="composite"&&((vh=[128*zd.compositeIconSizes[0].evaluate(Ip,{},rh),128*zd.compositeIconSizes[1].evaluate(Ip,{},rh)])[0]>32640||vh[1]>32640)&&Ke(no.layerIds[0]+': Value for "icon-size" is >= 255. Reduce your "icon-size".'),no.addSymbols(no.icon,lv,vh,Rv,Ov,Ip,!1,Lp,ud.lineStartIndex,ud.lineLength,-1,rh),ov=no.icon.placedSymbolArray.length-1,cv&&(av=4*cv.length,no.addSymbols(no.icon,cv,vh,Rv,Ov,Ip,wi.vertical,Lp,ud.lineStartIndex,ud.lineLength,-1,rh),Zd=no.icon.placedSymbolArray.length-1)}for(var Gd in ph.horizontal){var Hd=ph.horizontal[Gd];if(!Dh){Dv=Yt(Hd.text);var f0=Dp.layout.get("text-rotate").evaluate(Ip,{},rh);Dh=new as(Xh,Lp,Ed,Sp,th,Hd,Ch,Iv,hh,f0)}var fv=Hd.positionedLines.length===1;if(Sd+=an(no,Lp,Hd,Hu,Dp,hh,Ip,ad,ud,ph.vertical?wi.horizontal:wi.horizontalOnly,fv?Object.keys(ph.horizontal):[Gd],dh,ov,zd,rh),fv)break}ph.vertical&&(Lv+=an(no,Lp,ph.vertical,Hu,Dp,hh,Ip,ad,ud,wi.vertical,["vertical"],dh,Zd,zd,rh));var Bv=Dh?Dh.boxStartIndex:no.collisionBoxArray.length,zv=Dh?Dh.boxEndIndex:no.collisionBoxArray.length,mh=hc?hc.boxStartIndex:no.collisionBoxArray.length,Uv=hc?hc.boxEndIndex:no.collisionBoxArray.length,Zv=sd?sd.boxStartIndex:no.collisionBoxArray.length,p0=sd?sd.boxEndIndex:no.collisionBoxArray.length,h0=xf?xf.boxStartIndex:no.collisionBoxArray.length,jv=xf?xf.boxEndIndex:no.collisionBoxArray.length,gh=-1,Wd=function(ld,Vv){return ld&&ld.circleDiameter?Math.max(ld.circleDiameter,Vv):Vv};gh=Wd(Dh,gh),gh=Wd(hc,gh),gh=Wd(sd,gh);var pv=(gh=Wd(xf,gh))>-1?1:0;pv&&(gh*=iv/24),no.glyphOffsetArray.length>=ir.MAX_GLYPHS&&Ke("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),Ip.sortKey!==void 0&&no.addToSortKeyRanges(no.symbolInstances.length,Ip.sortKey),no.symbolInstances.emplaceBack(Lp.x,Lp.y,dh.right>=0?dh.right:-1,dh.center>=0?dh.center:-1,dh.left>=0?dh.left:-1,dh.vertical||-1,ov,Zd,Dv,Bv,zv,mh,Uv,Zv,p0,h0,jv,Ed,Sd,Lv,kv,av,pv,0,Ch,jd,sv,gh)}(wo,kp,id,Fs,Ws,Nf,Ln,wo.layers[0],wo.collisionBoxArray,Ao.index,Ao.sourceLayerIndex,wo.index,xl,dd,vd,yf,sp,Gh,Hh,fs,Ao,gf,yu,Ki,Ns)};if(Ah==="line")for(var bl=0,Vl=Vs(Ao.geometry,0,0,8192,8192);bl<Vl.length;bl+=1)for(var md=Vl[bl],gd=0,yd=cs(md,qh,ed,Fs.vertical||Pp,Ws,24,ch,wo.overscaling,8192);gd<yd.length;gd+=1){var Dd=yd[gd];Pp&&oa(wo,Pp.text,Mp,Dd)||qp(md,Dd)}else if(Ah==="line-center")for(var _d=0,td=Ao.geometry;_d<td.length;_d+=1){var xd=td[_d];if(xd.length>1){var rd=Uo(xd,ed,Fs.vertical||Pp,Ws,24,ch);rd&&qp(xd,rd)}}else if(Ao.type==="Polygon")for(var fh=0,bd=df(Ao.geometry,0);fh<bd.length;fh+=1){var nd=bd[fh],$h=Oa(nd,16);qp(nd[0],new Qi($h.x,$h.y,0))}else if(Ao.type==="LineString")for(var eh=0,Xf=Ao.geometry;eh<Xf.length;eh+=1){var Gp=Xf[eh];qp(Gp,new Qi(Gp[0].x,Gp[0].y,0))}else if(Ao.type==="Point")for(var Fd=0,Tv=Ao.geometry;Fd<Tv.length;Fd+=1)for(var tv=0,Mv=Tv[Fd];tv<Mv.length;tv+=1){var Nd=Mv[tv];qp([Nd],new Qi(Nd.x,Nd.y,0))}}(a,Zn,C,Ba,E,ze,p,y,ae,ho,j)},wn=0,Gn=a.features;wn<Gn.length;wn+=1)cn();L&&a.generateCollisionDebugBuffers()},l.perspective=function(a,s,h,E,M){var L,j=1/Math.tan(s/2);return a[0]=j/h,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=j,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[11]=-1,a[12]=0,a[13]=0,a[15]=0,M!=null&&M!==1/0?(a[10]=(M+E)*(L=1/(E-M)),a[14]=2*M*E*L):(a[10]=-1,a[14]=-2*E),a},l.pick=function(a,s){for(var h={},E=0;E<s.length;E++){var M=s[E];M in a&&(h[M]=a[M])}return h},l.plugin=Ri,l.polygonIntersectsPolygon=zo,l.postMapLoadEvent=it,l.postTurnstileEvent=dt,l.potpack=Un,l.refProperties=["type","source","source-layer","minzoom","maxzoom","filter","layout"],l.register=ji,l.registerForPluginStateChange=function(a){return a({pluginStatus:el,pluginURL:bc}),ri.on("pluginStateChange",a),a},l.renderColorRamp=Cf,l.rotate=function(a,s,h){var E=s[0],M=s[1],L=s[2],j=s[3],re=Math.sin(h),Ce=Math.cos(h);return a[0]=E*Ce+L*re,a[1]=M*Ce+j*re,a[2]=E*-re+L*Ce,a[3]=M*-re+j*Ce,a},l.rotateX=function(a,s,h){var E=Math.sin(h),M=Math.cos(h),L=s[4],j=s[5],re=s[6],Ce=s[7],ze=s[8],We=s[9],Je=s[10],_t=s[11];return s!==a&&(a[0]=s[0],a[1]=s[1],a[2]=s[2],a[3]=s[3],a[12]=s[12],a[13]=s[13],a[14]=s[14],a[15]=s[15]),a[4]=L*M+ze*E,a[5]=j*M+We*E,a[6]=re*M+Je*E,a[7]=Ce*M+_t*E,a[8]=ze*M-L*E,a[9]=We*M-j*E,a[10]=Je*M-re*E,a[11]=_t*M-Ce*E,a},l.rotateZ=function(a,s,h){var E=Math.sin(h),M=Math.cos(h),L=s[0],j=s[1],re=s[2],Ce=s[3],ze=s[4],We=s[5],Je=s[6],_t=s[7];return s!==a&&(a[8]=s[8],a[9]=s[9],a[10]=s[10],a[11]=s[11],a[12]=s[12],a[13]=s[13],a[14]=s[14],a[15]=s[15]),a[0]=L*M+ze*E,a[1]=j*M+We*E,a[2]=re*M+Je*E,a[3]=Ce*M+_t*E,a[4]=ze*M-L*E,a[5]=We*M-j*E,a[6]=Je*M-re*E,a[7]=_t*M-Ce*E,a},l.scale=function(a,s,h){var E=h[0],M=h[1],L=h[2];return a[0]=s[0]*E,a[1]=s[1]*E,a[2]=s[2]*E,a[3]=s[3]*E,a[4]=s[4]*M,a[5]=s[5]*M,a[6]=s[6]*M,a[7]=s[7]*M,a[8]=s[8]*L,a[9]=s[9]*L,a[10]=s[10]*L,a[11]=s[11]*L,a[12]=s[12],a[13]=s[13],a[14]=s[14],a[15]=s[15],a},l.scale$1=function(a,s,h){return a[0]=s[0]*h,a[1]=s[1]*h,a[2]=s[2]*h,a[3]=s[3]*h,a},l.scale$2=function(a,s,h){return a[0]=s[0]*h,a[1]=s[1]*h,a[2]=s[2]*h,a},l.setCacheLimits=function(a,s){lt=a,qt=s},l.setRTLTextPlugin=function(a,s,h){if(h===void 0&&(h=!1),el==="deferred"||el==="loading"||el==="loaded")throw new Error("setRTLTextPlugin cannot be called multiple times.");bc=xr.resolveURL(a),el="deferred",Eu=s,qr(),h||Vn()},l.sphericalToCartesian=function(a){var s=a[0],h=a[1],E=a[2];return h+=90,h*=Math.PI/180,E*=Math.PI/180,{x:s*Math.cos(h)*Math.sin(E),y:s*Math.sin(h)*Math.sin(E),z:s*Math.cos(E)}},l.sqrLen=function(a){var s=a[0],h=a[1];return s*s+h*h},l.styleSpec=bt,l.sub=function(a,s,h){return a[0]=s[0]-h[0],a[1]=s[1]-h[1],a[2]=s[2]-h[2],a},l.symbolSize=oo,l.transformMat3=function(a,s,h){var E=s[0],M=s[1],L=s[2];return a[0]=E*h[0]+M*h[3]+L*h[6],a[1]=E*h[1]+M*h[4]+L*h[7],a[2]=E*h[2]+M*h[5]+L*h[8],a},l.transformMat4=ef,l.translate=function(a,s,h){var E,M,L,j,re,Ce,ze,We,Je,_t,It,ar,ur=h[0],Rr=h[1],mr=h[2];return s===a?(a[12]=s[0]*ur+s[4]*Rr+s[8]*mr+s[12],a[13]=s[1]*ur+s[5]*Rr+s[9]*mr+s[13],a[14]=s[2]*ur+s[6]*Rr+s[10]*mr+s[14],a[15]=s[3]*ur+s[7]*Rr+s[11]*mr+s[15]):(M=s[1],L=s[2],j=s[3],re=s[4],Ce=s[5],ze=s[6],We=s[7],Je=s[8],_t=s[9],It=s[10],ar=s[11],a[0]=E=s[0],a[1]=M,a[2]=L,a[3]=j,a[4]=re,a[5]=Ce,a[6]=ze,a[7]=We,a[8]=Je,a[9]=_t,a[10]=It,a[11]=ar,a[12]=E*ur+re*Rr+Je*mr+s[12],a[13]=M*ur+Ce*Rr+_t*mr+s[13],a[14]=L*ur+ze*Rr+It*mr+s[14],a[15]=j*ur+We*Rr+ar*mr+s[15]),a},l.triggerPluginCompletionEvent=Vf,l.uniqueId=pe,l.validateCustomStyleLayer=function(a){var s=[],h=a.id;return h===void 0&&s.push({message:"layers."+h+': missing required property "id"'}),a.render===void 0&&s.push({message:"layers."+h+': missing required method "render"'}),a.renderingMode&&a.renderingMode!=="2d"&&a.renderingMode!=="3d"&&s.push({message:"layers."+h+': property "renderingMode" must be either "2d" or "3d"'}),s},l.validateLight=yc,l.validateStyle=lc,l.values=function(a){var s=[];for(var h in a)s.push(a[h]);return s},l.vectorTile=Uc,l.version="1.13.2",l.warnOnce=Ke,l.webpSupported=Cr,l.window=z,l.wrap=le}),v(["./shared"],function(l){"use strict";function R(Ge){var et=typeof Ge;if(et==="number"||et==="boolean"||et==="string"||Ge==null)return JSON.stringify(Ge);if(Array.isArray(Ge)){for(var gt="[",ht=0,Et=Ge;ht<Et.length;ht+=1)gt+=R(Et[ht])+",";return gt+"]"}for(var Zt=Object.keys(Ge).sort(),sr="{",bt=0;bt<Zt.length;bt++)sr+=JSON.stringify(Zt[bt])+":"+R(Ge[Zt[bt]])+",";return sr+"}"}function A(Ge){for(var et="",gt=0,ht=l.refProperties;gt<ht.length;gt+=1)et+="/"+R(Ge[ht[gt]]);return et}var D=function(Ge){this.keyCache={},Ge&&this.replace(Ge)};D.prototype.replace=function(Ge){this._layerConfigs={},this._layers={},this.update(Ge,[])},D.prototype.update=function(Ge,et){for(var gt=this,ht=0,Et=Ge;ht<Et.length;ht+=1){var Zt=Et[ht];this._layerConfigs[Zt.id]=Zt;var sr=this._layers[Zt.id]=l.createStyleLayer(Zt);sr._featureFilter=l.featureFilter(sr.filter),this.keyCache[Zt.id]&&delete this.keyCache[Zt.id]}for(var bt=0,Ft=et;bt<Ft.length;bt+=1){var zr=Ft[bt];delete this.keyCache[zr],delete this._layerConfigs[zr],delete this._layers[zr]}this.familiesBySource={};for(var Jn=0,yn=function(Zi,Wi){for(var xo={},ua=0;ua<Zi.length;ua++){var Ur=Wi&&Wi[Zi[ua].id]||A(Zi[ua]);Wi&&(Wi[Zi[ua].id]=Ur);var Jr=xo[Ur];Jr||(Jr=xo[Ur]=[]),Jr.push(Zi[ua])}var Eo=[];for(var Fo in xo)Eo.push(xo[Fo]);return Eo}(l.values(this._layerConfigs),this.keyCache);Jn<yn.length;Jn+=1){var tn=yn[Jn].map(function(Zi){return gt._layers[Zi.id]}),ni=tn[0];if(ni.visibility!=="none"){var ta=ni.source||"",fa=this.familiesBySource[ta];fa||(fa=this.familiesBySource[ta]={});var Mr=ni.sourceLayer||"_geojsonTileLayer",Wr=fa[Mr];Wr||(Wr=fa[Mr]=[]),Wr.push(tn)}}};var k=function(Ge){var et={},gt=[];for(var ht in Ge){var Et=Ge[ht],Zt=et[ht]={};for(var sr in Et){var bt=Et[+sr];if(bt&&bt.bitmap.width!==0&&bt.bitmap.height!==0){var Ft={x:0,y:0,w:bt.bitmap.width+2,h:bt.bitmap.height+2};gt.push(Ft),Zt[sr]={rect:Ft,metrics:bt.metrics}}}}var zr=l.potpack(gt),Jn=new l.AlphaImage({width:zr.w||1,height:zr.h||1});for(var yn in Ge){var tn=Ge[yn];for(var ni in tn){var ta=tn[+ni];if(ta&&ta.bitmap.width!==0&&ta.bitmap.height!==0){var fa=et[yn][ni].rect;l.AlphaImage.copy(ta.bitmap,Jn,{x:0,y:0},{x:fa.x+1,y:fa.y+1},ta.bitmap)}}}this.image=Jn,this.positions=et};l.register("GlyphAtlas",k);var B=function(Ge){this.tileID=new l.OverscaledTileID(Ge.tileID.overscaledZ,Ge.tileID.wrap,Ge.tileID.canonical.z,Ge.tileID.canonical.x,Ge.tileID.canonical.y),this.uid=Ge.uid,this.zoom=Ge.zoom,this.pixelRatio=Ge.pixelRatio,this.tileSize=Ge.tileSize,this.source=Ge.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=Ge.showCollisionBoxes,this.collectResourceTiming=!!Ge.collectResourceTiming,this.returnDependencies=!!Ge.returnDependencies,this.promoteId=Ge.promoteId};function z(Ge,et,gt){for(var ht=new l.EvaluationParameters(et),Et=0,Zt=Ge;Et<Zt.length;Et+=1)Zt[Et].recalculate(ht,gt)}function Z(Ge,et){var gt=l.getArrayBuffer(Ge.request,function(ht,Et,Zt,sr){ht?et(ht):Et&&et(null,{vectorTile:new l.vectorTile.VectorTile(new l.pbf(Et)),rawData:Et,cacheControl:Zt,expires:sr})});return function(){gt.cancel(),et()}}B.prototype.parse=function(Ge,et,gt,ht,Et){var Zt=this;this.status="parsing",this.data=Ge,this.collisionBoxArray=new l.CollisionBoxArray;var sr=new l.DictionaryCoder(Object.keys(Ge.layers).sort()),bt=new l.FeatureIndex(this.tileID,this.promoteId);bt.bucketLayerIDs=[];var Ft,zr,Jn,yn,tn={},ni={featureIndex:bt,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:gt},ta=et.familiesBySource[this.source];for(var fa in ta){var Mr=Ge.layers[fa];if(Mr){Mr.version===1&&l.warnOnce('Vector tile source "'+this.source+'" layer "'+fa+'" does not use vector tile spec v2 and therefore may have some rendering errors.');for(var Wr=sr.encode(fa),Zi=[],Wi=0;Wi<Mr.length;Wi++){var xo=Mr.feature(Wi),ua=bt.getId(xo,fa);Zi.push({feature:xo,id:ua,index:Wi,sourceLayerIndex:Wr})}for(var Ur=0,Jr=ta[fa];Ur<Jr.length;Ur+=1){var Eo=Jr[Ur],Fo=Eo[0];Fo.minzoom&&this.zoom<Math.floor(Fo.minzoom)||Fo.maxzoom&&this.zoom>=Fo.maxzoom||Fo.visibility!=="none"&&(z(Eo,this.zoom,gt),(tn[Fo.id]=Fo.createBucket({index:bt.bucketLayerIDs.length,layers:Eo,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:Wr,sourceID:this.source})).populate(Zi,ni,this.tileID.canonical),bt.bucketLayerIDs.push(Eo.map(function(ui){return ui.id})))}}}var So=l.mapObject(ni.glyphDependencies,function(ui){return Object.keys(ui).map(Number)});Object.keys(So).length?ht.send("getGlyphs",{uid:this.uid,stacks:So},function(ui,jn){Ft||(Ft=ui,zr=jn,No.call(Zt))}):zr={};var Xa=Object.keys(ni.iconDependencies);Xa.length?ht.send("getImages",{icons:Xa,source:this.source,tileID:this.tileID,type:"icons"},function(ui,jn){Ft||(Ft=ui,Jn=jn,No.call(Zt))}):Jn={};var Ko=Object.keys(ni.patternDependencies);function No(){if(Ft)return Et(Ft);if(zr&&Jn&&yn){var ui=new k(zr),jn=new l.ImageAtlas(Jn,yn);for(var rr in tn){var ps=tn[rr];ps instanceof l.SymbolBucket?(z(ps.layers,this.zoom,gt),l.performSymbolLayout(ps,zr,ui.positions,Jn,jn.iconPositions,this.showCollisionBoxes,this.tileID.canonical)):ps.hasPattern&&(ps instanceof l.LineBucket||ps instanceof l.FillBucket||ps instanceof l.FillExtrusionBucket)&&(z(ps.layers,this.zoom,gt),ps.addFeatures(ni,this.tileID.canonical,jn.patternPositions))}this.status="done",Et(null,{buckets:l.values(tn).filter(function(er){return!er.isEmpty()}),featureIndex:bt,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:ui.image,imageAtlas:jn,glyphMap:this.returnDependencies?zr:null,iconMap:this.returnDependencies?Jn:null,glyphPositions:this.returnDependencies?ui.positions:null})}}Ko.length?ht.send("getImages",{icons:Ko,source:this.source,tileID:this.tileID,type:"patterns"},function(ui,jn){Ft||(Ft=ui,yn=jn,No.call(Zt))}):yn={},No.call(this)};var W=function(Ge,et,gt,ht){this.actor=Ge,this.layerIndex=et,this.availableImages=gt,this.loadVectorData=ht||Z,this.loading={},this.loaded={}};W.prototype.loadTile=function(Ge,et){var gt=this,ht=Ge.uid;this.loading||(this.loading={});var Et=!!(Ge&&Ge.request&&Ge.request.collectResourceTiming)&&new l.RequestPerformance(Ge.request),Zt=this.loading[ht]=new B(Ge);Zt.abort=this.loadVectorData(Ge,function(sr,bt){if(delete gt.loading[ht],sr||!bt)return Zt.status="done",gt.loaded[ht]=Zt,et(sr);var Ft=bt.rawData,zr={};bt.expires&&(zr.expires=bt.expires),bt.cacheControl&&(zr.cacheControl=bt.cacheControl);var Jn={};if(Et){var yn=Et.finish();yn&&(Jn.resourceTiming=JSON.parse(JSON.stringify(yn)))}Zt.vectorTile=bt.vectorTile,Zt.parse(bt.vectorTile,gt.layerIndex,gt.availableImages,gt.actor,function(tn,ni){if(tn||!ni)return et(tn);et(null,l.extend({rawTileData:Ft.slice(0)},ni,zr,Jn))}),gt.loaded=gt.loaded||{},gt.loaded[ht]=Zt})},W.prototype.reloadTile=function(Ge,et){var gt=this,ht=this.loaded,Et=Ge.uid,Zt=this;if(ht&&ht[Et]){var sr=ht[Et];sr.showCollisionBoxes=Ge.showCollisionBoxes;var bt=function(Ft,zr){var Jn=sr.reloadCallback;Jn&&(delete sr.reloadCallback,sr.parse(sr.vectorTile,Zt.layerIndex,gt.availableImages,Zt.actor,Jn)),et(Ft,zr)};sr.status==="parsing"?sr.reloadCallback=bt:sr.status==="done"&&(sr.vectorTile?sr.parse(sr.vectorTile,this.layerIndex,this.availableImages,this.actor,bt):bt())}},W.prototype.abortTile=function(Ge,et){var gt=this.loading,ht=Ge.uid;gt&&gt[ht]&&gt[ht].abort&&(gt[ht].abort(),delete gt[ht]),et()},W.prototype.removeTile=function(Ge,et){var gt=this.loaded,ht=Ge.uid;gt&&gt[ht]&&delete gt[ht],et()};var Y=l.window.ImageBitmap,te=function(){this.loaded={}};function le(Ge,et){if(Ge.length!==0){be(Ge[0],et);for(var gt=1;gt<Ge.length;gt++)be(Ge[gt],!et)}}function be(Ge,et){for(var gt=0,ht=0,Et=Ge.length,Zt=Et-1;ht<Et;Zt=ht++)gt+=(Ge[ht][0]-Ge[Zt][0])*(Ge[Zt][1]+Ge[ht][1]);gt>=0!=!!et&&Ge.reverse()}te.prototype.loadTile=function(Ge,et){var gt=Ge.uid,ht=Ge.encoding,Et=Ge.rawImageData,Zt=Y&&Et instanceof Y?this.getImageData(Et):Et,sr=new l.DEMData(gt,Zt,ht);this.loaded=this.loaded||{},this.loaded[gt]=sr,et(null,sr)},te.prototype.getImageData=function(Ge){this.offscreenCanvas&&this.offscreenCanvasContext||(this.offscreenCanvas=new OffscreenCanvas(Ge.width,Ge.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d")),this.offscreenCanvas.width=Ge.width,this.offscreenCanvas.height=Ge.height,this.offscreenCanvasContext.drawImage(Ge,0,0,Ge.width,Ge.height);var et=this.offscreenCanvasContext.getImageData(-1,-1,Ge.width+2,Ge.height+2);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),new l.RGBAImage({width:et.width,height:et.height},et.data)},te.prototype.removeTile=function(Ge){var et=this.loaded,gt=Ge.uid;et&&et[gt]&&delete et[gt]};var de=l.vectorTile.VectorTileFeature.prototype.toGeoJSON,pe=function(Ge){this._feature=Ge,this.extent=l.EXTENT,this.type=Ge.type,this.properties=Ge.tags,"id"in Ge&&!isNaN(Ge.id)&&(this.id=parseInt(Ge.id,10))};pe.prototype.loadGeometry=function(){if(this._feature.type===1){for(var Ge=[],et=0,gt=this._feature.geometry;et<gt.length;et+=1){var ht=gt[et];Ge.push([new l.Point$1(ht[0],ht[1])])}return Ge}for(var Et=[],Zt=0,sr=this._feature.geometry;Zt<sr.length;Zt+=1){for(var bt=[],Ft=0,zr=sr[Zt];Ft<zr.length;Ft+=1){var Jn=zr[Ft];bt.push(new l.Point$1(Jn[0],Jn[1]))}Et.push(bt)}return Et},pe.prototype.toGeoJSON=function(Ge,et,gt){return de.call(this,Ge,et,gt)};var Oe=function(Ge){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=l.EXTENT,this.length=Ge.length,this._features=Ge};Oe.prototype.feature=function(Ge){return new pe(this._features[Ge])};var xe=l.vectorTile.VectorTileFeature,Ve=K;function K(Ge,et){this.options=et||{},this.features=Ge,this.length=Ge.length}function ke(Ge,et){this.id=typeof Ge.id=="number"?Ge.id:void 0,this.type=Ge.type,this.rawGeometry=Ge.type===1?[Ge.geometry]:Ge.geometry,this.properties=Ge.tags,this.extent=et||4096}K.prototype.feature=function(Ge){return new ke(this.features[Ge],this.options.extent)},ke.prototype.loadGeometry=function(){var Ge=this.rawGeometry;this.geometry=[];for(var et=0;et<Ge.length;et++){for(var gt=Ge[et],ht=[],Et=0;Et<gt.length;Et++)ht.push(new l.Point$1(gt[Et][0],gt[Et][1]));this.geometry.push(ht)}return this.geometry},ke.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var Ge=this.geometry,et=1/0,gt=-1/0,ht=1/0,Et=-1/0,Zt=0;Zt<Ge.length;Zt++)for(var sr=Ge[Zt],bt=0;bt<sr.length;bt++){var Ft=sr[bt];et=Math.min(et,Ft.x),gt=Math.max(gt,Ft.x),ht=Math.min(ht,Ft.y),Et=Math.max(Et,Ft.y)}return[et,ht,gt,Et]},ke.prototype.toGeoJSON=xe.prototype.toGeoJSON;var we=Xe,Me=Ve;function Xe(Ge){var et=new l.pbf;return function(gt,ht){for(var Et in gt.layers)ht.writeMessage(3,Ke,gt.layers[Et])}(Ge,et),et.finish()}function Ke(Ge,et){var gt;et.writeVarintField(15,Ge.version||1),et.writeStringField(1,Ge.name||""),et.writeVarintField(5,Ge.extent||4096);var ht={keys:[],values:[],keycache:{},valuecache:{}};for(gt=0;gt<Ge.length;gt++)ht.feature=Ge.feature(gt),et.writeMessage(2,At,ht);var Et=ht.keys;for(gt=0;gt<Et.length;gt++)et.writeStringField(3,Et[gt]);var Zt=ht.values;for(gt=0;gt<Zt.length;gt++)et.writeMessage(4,ye,Zt[gt])}function At(Ge,et){var gt=Ge.feature;gt.id!==void 0&&et.writeVarintField(1,gt.id),et.writeMessage(2,mt,Ge),et.writeVarintField(3,gt.type),et.writeMessage(4,he,gt)}function mt(Ge,et){var gt=Ge.feature,ht=Ge.keys,Et=Ge.values,Zt=Ge.keycache,sr=Ge.valuecache;for(var bt in gt.properties){var Ft=Zt[bt];Ft===void 0&&(ht.push(bt),Zt[bt]=Ft=ht.length-1),et.writeVarint(Ft);var zr=gt.properties[bt],Jn=typeof zr;Jn!=="string"&&Jn!=="boolean"&&Jn!=="number"&&(zr=JSON.stringify(zr));var yn=Jn+":"+zr,tn=sr[yn];tn===void 0&&(Et.push(zr),sr[yn]=tn=Et.length-1),et.writeVarint(tn)}}function ie(Ge,et){return(et<<3)+(7&Ge)}function oe(Ge){return Ge<<1^Ge>>31}function he(Ge,et){for(var gt=Ge.loadGeometry(),ht=Ge.type,Et=0,Zt=0,sr=gt.length,bt=0;bt<sr;bt++){var Ft=gt[bt],zr=1;ht===1&&(zr=Ft.length),et.writeVarint(ie(1,zr));for(var Jn=ht===3?Ft.length-1:Ft.length,yn=0;yn<Jn;yn++){yn===1&&ht!==1&&et.writeVarint(ie(2,Jn-1));var tn=Ft[yn].x-Et,ni=Ft[yn].y-Zt;et.writeVarint(oe(tn)),et.writeVarint(oe(ni)),Et+=tn,Zt+=ni}ht===3&&et.writeVarint(ie(7,1))}}function ye(Ge,et){var gt=typeof Ge;gt==="string"?et.writeStringField(1,Ge):gt==="boolean"?et.writeBooleanField(7,Ge):gt==="number"&&(Ge%1!=0?et.writeDoubleField(3,Ge):Ge<0?et.writeSVarintField(6,Ge):et.writeVarintField(5,Ge))}function se(Ge,et,gt,ht){Ne(Ge,gt,ht),Ne(et,2*gt,2*ht),Ne(et,2*gt+1,2*ht+1)}function Ne(Ge,et,gt){var ht=Ge[et];Ge[et]=Ge[gt],Ge[gt]=ht}function st(Ge,et,gt,ht){var Et=Ge-gt,Zt=et-ht;return Et*Et+Zt*Zt}we.fromVectorTileJs=Xe,we.fromGeojsonVt=function(Ge,et){et=et||{};var gt={};for(var ht in Ge)gt[ht]=new Ve(Ge[ht].features,et),gt[ht].name=ht,gt[ht].version=et.version,gt[ht].extent=et.extent;return Xe({layers:gt})},we.GeoJSONWrapper=Me;var Fe=function(Ge){return Ge[0]},tt=function(Ge){return Ge[1]},Wt=function(Ge,et,gt,ht,Et){et===void 0&&(et=Fe),gt===void 0&&(gt=tt),ht===void 0&&(ht=64),Et===void 0&&(Et=Float64Array),this.nodeSize=ht,this.points=Ge;for(var Zt=Ge.length<65536?Uint16Array:Uint32Array,sr=this.ids=new Zt(Ge.length),bt=this.coords=new Et(2*Ge.length),Ft=0;Ft<Ge.length;Ft++)sr[Ft]=Ft,bt[2*Ft]=et(Ge[Ft]),bt[2*Ft+1]=gt(Ge[Ft]);(function zr(Jn,yn,tn,ni,ta,fa){if(!(ta-ni<=tn)){var Mr=ni+ta>>1;(function Wr(Zi,Wi,xo,ua,Ur,Jr){for(;Ur>ua;){if(Ur-ua>600){var Eo=Ur-ua+1,Fo=xo-ua+1,So=Math.log(Eo),Xa=.5*Math.exp(2*So/3),Ko=.5*Math.sqrt(So*Xa*(Eo-Xa)/Eo)*(Fo-Eo/2<0?-1:1);Wr(Zi,Wi,xo,Math.max(ua,Math.floor(xo-Fo*Xa/Eo+Ko)),Math.min(Ur,Math.floor(xo+(Eo-Fo)*Xa/Eo+Ko)),Jr)}var No=Wi[2*xo+Jr],ui=ua,jn=Ur;for(se(Zi,Wi,ua,xo),Wi[2*Ur+Jr]>No&&se(Zi,Wi,ua,Ur);ui<jn;){for(se(Zi,Wi,ui,jn),ui++,jn--;Wi[2*ui+Jr]<No;)ui++;for(;Wi[2*jn+Jr]>No;)jn--}Wi[2*ua+Jr]===No?se(Zi,Wi,ua,jn):se(Zi,Wi,++jn,Ur),jn<=xo&&(ua=jn+1),xo<=jn&&(Ur=jn-1)}})(Jn,yn,Mr,ni,ta,fa%2),zr(Jn,yn,tn,ni,Mr-1,fa+1),zr(Jn,yn,tn,Mr+1,ta,fa+1)}})(sr,bt,ht,0,sr.length-1,0)};Wt.prototype.range=function(Ge,et,gt,ht){return function(Et,Zt,sr,bt,Ft,zr,Jn){for(var yn,tn,ni=[0,Et.length-1,0],ta=[];ni.length;){var fa=ni.pop(),Mr=ni.pop(),Wr=ni.pop();if(Mr-Wr<=Jn)for(var Zi=Wr;Zi<=Mr;Zi++)tn=Zt[2*Zi+1],(yn=Zt[2*Zi])>=sr&&yn<=Ft&&tn>=bt&&tn<=zr&&ta.push(Et[Zi]);else{var Wi=Math.floor((Wr+Mr)/2);tn=Zt[2*Wi+1],(yn=Zt[2*Wi])>=sr&&yn<=Ft&&tn>=bt&&tn<=zr&&ta.push(Et[Wi]);var xo=(fa+1)%2;(fa===0?sr<=yn:bt<=tn)&&(ni.push(Wr),ni.push(Wi-1),ni.push(xo)),(fa===0?Ft>=yn:zr>=tn)&&(ni.push(Wi+1),ni.push(Mr),ni.push(xo))}}return ta}(this.ids,this.coords,Ge,et,gt,ht,this.nodeSize)},Wt.prototype.within=function(Ge,et,gt){return function(ht,Et,Zt,sr,bt,Ft){for(var zr=[0,ht.length-1,0],Jn=[],yn=bt*bt;zr.length;){var tn=zr.pop(),ni=zr.pop(),ta=zr.pop();if(ni-ta<=Ft)for(var fa=ta;fa<=ni;fa++)st(Et[2*fa],Et[2*fa+1],Zt,sr)<=yn&&Jn.push(ht[fa]);else{var Mr=Math.floor((ta+ni)/2),Wr=Et[2*Mr],Zi=Et[2*Mr+1];st(Wr,Zi,Zt,sr)<=yn&&Jn.push(ht[Mr]);var Wi=(tn+1)%2;(tn===0?Zt-bt<=Wr:sr-bt<=Zi)&&(zr.push(ta),zr.push(Mr-1),zr.push(Wi)),(tn===0?Zt+bt>=Wr:sr+bt>=Zi)&&(zr.push(Mr+1),zr.push(ni),zr.push(Wi))}}return Jn}(this.ids,this.coords,Ge,et,gt,this.nodeSize)};var Pr={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:function(Ge){return Ge}},Qt=function(Ge){this.options=cr(Object.create(Pr),Ge),this.trees=new Array(this.options.maxZoom+1)};function xr(Ge,et,gt,ht,Et){return{x:Ge,y:et,zoom:1/0,id:gt,parentId:-1,numPoints:ht,properties:Et}}function $r(Ge,et){var gt=Ge.geometry.coordinates,ht=gt[1];return{x:ot(gt[0]),y:_r(ht),zoom:1/0,index:et,parentId:-1}}function Cr(Ge){return{type:"Feature",id:Ge.id,properties:sn(Ge),geometry:{type:"Point",coordinates:[(ht=Ge.x,360*(ht-.5)),(et=Ge.y,gt=(180-360*et)*Math.PI/180,360*Math.atan(Math.exp(gt))/Math.PI-90)]}};var et,gt,ht}function sn(Ge){var et=Ge.numPoints,gt=et>=1e4?Math.round(et/1e3)+"k":et>=1e3?Math.round(et/100)/10+"k":et;return cr(cr({},Ge.properties),{cluster:!0,cluster_id:Ge.id,point_count:et,point_count_abbreviated:gt})}function ot(Ge){return Ge/360+.5}function _r(Ge){var et=Math.sin(Ge*Math.PI/180),gt=.5-.25*Math.log((1+et)/(1-et))/Math.PI;return gt<0?0:gt>1?1:gt}function cr(Ge,et){for(var gt in et)Ge[gt]=et[gt];return Ge}function Vr(Ge){return Ge.x}function Qn(Ge){return Ge.y}function mn(Ge,et,gt,ht,Et,Zt){var sr=Et-gt,bt=Zt-ht;if(sr!==0||bt!==0){var Ft=((Ge-gt)*sr+(et-ht)*bt)/(sr*sr+bt*bt);Ft>1?(gt=Et,ht=Zt):Ft>0&&(gt+=sr*Ft,ht+=bt*Ft)}return(sr=Ge-gt)*sr+(bt=et-ht)*bt}function _n(Ge,et,gt,ht){var Et={id:Ge===void 0?null:Ge,type:et,geometry:gt,tags:ht,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(Zt){var sr=Zt.geometry,bt=Zt.type;if(bt==="Point"||bt==="MultiPoint"||bt==="LineString")Yr(Zt,sr);else if(bt==="Polygon"||bt==="MultiLineString")for(var Ft=0;Ft<sr.length;Ft++)Yr(Zt,sr[Ft]);else if(bt==="MultiPolygon")for(Ft=0;Ft<sr.length;Ft++)for(var zr=0;zr<sr[Ft].length;zr++)Yr(Zt,sr[Ft][zr])}(Et),Et}function Yr(Ge,et){for(var gt=0;gt<et.length;gt+=3)Ge.minX=Math.min(Ge.minX,et[gt]),Ge.minY=Math.min(Ge.minY,et[gt+1]),Ge.maxX=Math.max(Ge.maxX,et[gt]),Ge.maxY=Math.max(Ge.maxY,et[gt+1])}function Fr(Ge,et,gt,ht){if(et.geometry){var Et=et.geometry.coordinates,Zt=et.geometry.type,sr=Math.pow(gt.tolerance/((1<<gt.maxZoom)*gt.extent),2),bt=[],Ft=et.id;if(gt.promoteId?Ft=et.properties[gt.promoteId]:gt.generateId&&(Ft=ht||0),Zt==="Point")kr(Et,bt);else if(Zt==="MultiPoint")for(var zr=0;zr<Et.length;zr++)kr(Et[zr],bt);else if(Zt==="LineString")ft(Et,bt,sr,!1);else if(Zt==="MultiLineString"){if(gt.lineMetrics){for(zr=0;zr<Et.length;zr++)ft(Et[zr],bt=[],sr,!1),Ge.push(_n(Ft,"LineString",bt,et.properties));return}me(Et,bt,sr,!1)}else if(Zt==="Polygon")me(Et,bt,sr,!0);else{if(Zt!=="MultiPolygon"){if(Zt==="GeometryCollection"){for(zr=0;zr<et.geometry.geometries.length;zr++)Fr(Ge,{id:Ft,geometry:et.geometry.geometries[zr],properties:et.properties},gt,ht);return}throw new Error("Input data is not a valid GeoJSON object.")}for(zr=0;zr<Et.length;zr++){var Jn=[];me(Et[zr],Jn,sr,!0),bt.push(Jn)}}Ge.push(_n(Ft,Zt,bt,et.properties))}}function kr(Ge,et){et.push(ne(Ge[0])),et.push(fe(Ge[1])),et.push(0)}function ft(Ge,et,gt,ht){for(var Et,Zt,sr=0,bt=0;bt<Ge.length;bt++){var Ft=ne(Ge[bt][0]),zr=fe(Ge[bt][1]);et.push(Ft),et.push(zr),et.push(0),bt>0&&(sr+=ht?(Et*zr-Ft*Zt)/2:Math.sqrt(Math.pow(Ft-Et,2)+Math.pow(zr-Zt,2))),Et=Ft,Zt=zr}var Jn=et.length-3;et[2]=1,function yn(tn,ni,ta,fa){for(var Mr,Wr=fa,Zi=ta-ni>>1,Wi=ta-ni,xo=tn[ni],ua=tn[ni+1],Ur=tn[ta],Jr=tn[ta+1],Eo=ni+3;Eo<ta;Eo+=3){var Fo=mn(tn[Eo],tn[Eo+1],xo,ua,Ur,Jr);if(Fo>Wr)Mr=Eo,Wr=Fo;else if(Fo===Wr){var So=Math.abs(Eo-Zi);So<Wi&&(Mr=Eo,Wi=So)}}Wr>fa&&(Mr-ni>3&&yn(tn,ni,Mr,fa),tn[Mr+2]=Wr,ta-Mr>3&&yn(tn,Mr,ta,fa))}(et,0,Jn,gt),et[Jn+2]=1,et.size=Math.abs(sr),et.start=0,et.end=et.size}function me(Ge,et,gt,ht){for(var Et=0;Et<Ge.length;Et++){var Zt=[];ft(Ge[Et],Zt,gt,ht),et.push(Zt)}}function ne(Ge){return Ge/360+.5}function fe(Ge){var et=Math.sin(Ge*Math.PI/180),gt=.5-.25*Math.log((1+et)/(1-et))/Math.PI;return gt<0?0:gt>1?1:gt}function Q(Ge,et,gt,ht,Et,Zt,sr,bt){if(ht/=et,Zt>=(gt/=et)&&sr<ht)return Ge;if(sr<gt||Zt>=ht)return null;for(var Ft=[],zr=0;zr<Ge.length;zr++){var Jn=Ge[zr],yn=Jn.geometry,tn=Jn.type,ni=Et===0?Jn.minX:Jn.minY,ta=Et===0?Jn.maxX:Jn.maxY;if(ni>=gt&&ta<ht)Ft.push(Jn);else if(!(ta<gt||ni>=ht)){var fa=[];if(tn==="Point"||tn==="MultiPoint")De(yn,fa,gt,ht,Et);else if(tn==="LineString")dt(yn,fa,gt,ht,Et,!1,bt.lineMetrics);else if(tn==="MultiLineString")it(yn,fa,gt,ht,Et,!1);else if(tn==="Polygon")it(yn,fa,gt,ht,Et,!0);else if(tn==="MultiPolygon")for(var Mr=0;Mr<yn.length;Mr++){var Wr=[];it(yn[Mr],Wr,gt,ht,Et,!0),Wr.length&&fa.push(Wr)}if(fa.length){if(bt.lineMetrics&&tn==="LineString"){for(Mr=0;Mr<fa.length;Mr++)Ft.push(_n(Jn.id,tn,fa[Mr],Jn.tags));continue}tn!=="LineString"&&tn!=="MultiLineString"||(fa.length===1?(tn="LineString",fa=fa[0]):tn="MultiLineString"),tn!=="Point"&&tn!=="MultiPoint"||(tn=fa.length===3?"Point":"MultiPoint"),Ft.push(_n(Jn.id,tn,fa,Jn.tags))}}}return Ft.length?Ft:null}function De(Ge,et,gt,ht,Et){for(var Zt=0;Zt<Ge.length;Zt+=3){var sr=Ge[Zt+Et];sr>=gt&&sr<=ht&&(et.push(Ge[Zt]),et.push(Ge[Zt+1]),et.push(Ge[Zt+2]))}}function dt(Ge,et,gt,ht,Et,Zt,sr){for(var bt,Ft,zr=Jt(Ge),Jn=Et===0?qt:pr,yn=Ge.start,tn=0;tn<Ge.length-3;tn+=3){var ni=Ge[tn],ta=Ge[tn+1],fa=Ge[tn+2],Mr=Ge[tn+3],Wr=Ge[tn+4],Zi=Et===0?ni:ta,Wi=Et===0?Mr:Wr,xo=!1;sr&&(bt=Math.sqrt(Math.pow(ni-Mr,2)+Math.pow(ta-Wr,2))),Zi<gt?Wi>gt&&(Ft=Jn(zr,ni,ta,Mr,Wr,gt),sr&&(zr.start=yn+bt*Ft)):Zi>ht?Wi<ht&&(Ft=Jn(zr,ni,ta,Mr,Wr,ht),sr&&(zr.start=yn+bt*Ft)):lt(zr,ni,ta,fa),Wi<gt&&Zi>=gt&&(Ft=Jn(zr,ni,ta,Mr,Wr,gt),xo=!0),Wi>ht&&Zi<=ht&&(Ft=Jn(zr,ni,ta,Mr,Wr,ht),xo=!0),!Zt&&xo&&(sr&&(zr.end=yn+bt*Ft),et.push(zr),zr=Jt(Ge)),sr&&(yn+=bt)}var ua=Ge.length-3;ni=Ge[ua],ta=Ge[ua+1],fa=Ge[ua+2],(Zi=Et===0?ni:ta)>=gt&&Zi<=ht&&lt(zr,ni,ta,fa),ua=zr.length-3,Zt&&ua>=3&&(zr[ua]!==zr[0]||zr[ua+1]!==zr[1])&&lt(zr,zr[0],zr[1],zr[2]),zr.length&&et.push(zr)}function Jt(Ge){var et=[];return et.size=Ge.size,et.start=Ge.start,et.end=Ge.end,et}function it(Ge,et,gt,ht,Et,Zt){for(var sr=0;sr<Ge.length;sr++)dt(Ge[sr],et,gt,ht,Et,Zt,!1)}function lt(Ge,et,gt,ht){Ge.push(et),Ge.push(gt),Ge.push(ht)}function qt(Ge,et,gt,ht,Et,Zt){var sr=(Zt-et)/(ht-et);return Ge.push(Zt),Ge.push(gt+(Et-gt)*sr),Ge.push(1),sr}function pr(Ge,et,gt,ht,Et,Zt){var sr=(Zt-gt)/(Et-gt);return Ge.push(et+(ht-et)*sr),Ge.push(Zt),Ge.push(1),sr}function Hr(Ge,et){for(var gt=[],ht=0;ht<Ge.length;ht++){var Et,Zt=Ge[ht],sr=Zt.type;if(sr==="Point"||sr==="MultiPoint"||sr==="LineString")Et=Xr(Zt.geometry,et);else if(sr==="MultiLineString"||sr==="Polygon"){Et=[];for(var bt=0;bt<Zt.geometry.length;bt++)Et.push(Xr(Zt.geometry[bt],et))}else if(sr==="MultiPolygon")for(Et=[],bt=0;bt<Zt.geometry.length;bt++){for(var Ft=[],zr=0;zr<Zt.geometry[bt].length;zr++)Ft.push(Xr(Zt.geometry[bt][zr],et));Et.push(Ft)}gt.push(_n(Zt.id,sr,Et,Zt.tags))}return gt}function Xr(Ge,et){var gt=[];gt.size=Ge.size,Ge.start!==void 0&&(gt.start=Ge.start,gt.end=Ge.end);for(var ht=0;ht<Ge.length;ht+=3)gt.push(Ge[ht]+et,Ge[ht+1],Ge[ht+2]);return gt}function ce(Ge,et){if(Ge.transformed)return Ge;var gt,ht,Et,Zt=1<<Ge.z,sr=Ge.x,bt=Ge.y;for(gt=0;gt<Ge.features.length;gt++){var Ft=Ge.features[gt],zr=Ft.geometry,Jn=Ft.type;if(Ft.geometry=[],Jn===1)for(ht=0;ht<zr.length;ht+=2)Ft.geometry.push(xt(zr[ht],zr[ht+1],et,Zt,sr,bt));else for(ht=0;ht<zr.length;ht++){var yn=[];for(Et=0;Et<zr[ht].length;Et+=2)yn.push(xt(zr[ht][Et],zr[ht][Et+1],et,Zt,sr,bt));Ft.geometry.push(yn)}}return Ge.transformed=!0,Ge}function xt(Ge,et,gt,ht,Et,Zt){return[Math.round(gt*(Ge*ht-Et)),Math.round(gt*(et*ht-Zt))]}function Gt(Ge,et,gt,ht,Et){for(var Zt=et===Et.maxZoom?0:Et.tolerance/((1<<et)*Et.extent),sr={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:gt,y:ht,z:et,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},bt=0;bt<Ge.length;bt++){sr.numFeatures++,Ir(sr,Ge[bt],Zt,Et);var Ft=Ge[bt].minX,zr=Ge[bt].minY,Jn=Ge[bt].maxX,yn=Ge[bt].maxY;Ft<sr.minX&&(sr.minX=Ft),zr<sr.minY&&(sr.minY=zr),Jn>sr.maxX&&(sr.maxX=Jn),yn>sr.maxY&&(sr.maxY=yn)}return sr}function Ir(Ge,et,gt,ht){var Et=et.geometry,Zt=et.type,sr=[];if(Zt==="Point"||Zt==="MultiPoint")for(var bt=0;bt<Et.length;bt+=3)sr.push(Et[bt]),sr.push(Et[bt+1]),Ge.numPoints++,Ge.numSimplified++;else if(Zt==="LineString")nn(sr,Et,Ge,gt,!1,!1);else if(Zt==="MultiLineString"||Zt==="Polygon")for(bt=0;bt<Et.length;bt++)nn(sr,Et[bt],Ge,gt,Zt==="Polygon",bt===0);else if(Zt==="MultiPolygon")for(var Ft=0;Ft<Et.length;Ft++){var zr=Et[Ft];for(bt=0;bt<zr.length;bt++)nn(sr,zr[bt],Ge,gt,!0,bt===0)}if(sr.length){var Jn=et.tags||null;if(Zt==="LineString"&&ht.lineMetrics){for(var yn in Jn={},et.tags)Jn[yn]=et.tags[yn];Jn.mapbox_clip_start=Et.start/Et.size,Jn.mapbox_clip_end=Et.end/Et.size}var tn={geometry:sr,type:Zt==="Polygon"||Zt==="MultiPolygon"?3:Zt==="LineString"||Zt==="MultiLineString"?2:1,tags:Jn};et.id!==null&&(tn.id=et.id),Ge.features.push(tn)}}function nn(Ge,et,gt,ht,Et,Zt){var sr=ht*ht;if(ht>0&&et.size<(Et?sr:ht))gt.numPoints+=et.length/3;else{for(var bt=[],Ft=0;Ft<et.length;Ft+=3)(ht===0||et[Ft+2]>sr)&&(gt.numSimplified++,bt.push(et[Ft]),bt.push(et[Ft+1])),gt.numPoints++;Et&&function(zr,Jn){for(var yn=0,tn=0,ni=zr.length,ta=ni-2;tn<ni;ta=tn,tn+=2)yn+=(zr[tn]-zr[ta])*(zr[tn+1]+zr[ta+1]);if(yn>0===Jn)for(tn=0,ni=zr.length;tn<ni/2;tn+=2){var fa=zr[tn],Mr=zr[tn+1];zr[tn]=zr[ni-2-tn],zr[tn+1]=zr[ni-1-tn],zr[ni-2-tn]=fa,zr[ni-1-tn]=Mr}}(bt,Zt),Ge.push(bt)}}function zi(Ge,et){var gt=(et=this.options=function(Et,Zt){for(var sr in Zt)Et[sr]=Zt[sr];return Et}(Object.create(this.options),et)).debug;if(gt&&console.time("preprocess data"),et.maxZoom<0||et.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(et.promoteId&&et.generateId)throw new Error("promoteId and generateId cannot be used together.");var ht=function(Et,Zt){var sr=[];if(Et.type==="FeatureCollection")for(var bt=0;bt<Et.features.length;bt++)Fr(sr,Et.features[bt],Zt,bt);else Fr(sr,Et.type==="Feature"?Et:{geometry:Et},Zt);return sr}(Ge,et);this.tiles={},this.tileCoords=[],gt&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",et.indexMaxZoom,et.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),(ht=function(Et,Zt){var sr=Zt.buffer/Zt.extent,bt=Et,Ft=Q(Et,1,-1-sr,sr,0,-1,2,Zt),zr=Q(Et,1,1-sr,2+sr,0,-1,2,Zt);return(Ft||zr)&&(bt=Q(Et,1,-sr,1+sr,0,-1,2,Zt)||[],Ft&&(bt=Hr(Ft,1).concat(bt)),zr&&(bt=bt.concat(Hr(zr,-1)))),bt}(ht,et)).length&&this.splitTile(ht,0,0,0),gt&&(ht.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function Ui(Ge,et,gt){return 32*((1<<Ge)*gt+et)+Ge}function Pi(Ge,et){var gt=Ge.tileID.canonical;if(!this._geoJSONIndex)return et(null,null);var ht=this._geoJSONIndex.getTile(gt.z,gt.x,gt.y);if(!ht)return et(null,null);var Et=new Oe(ht.features),Zt=we(Et);Zt.byteOffset===0&&Zt.byteLength===Zt.buffer.byteLength||(Zt=new Uint8Array(Zt)),et(null,{vectorTile:Et,rawData:Zt.buffer})}Qt.prototype.load=function(Ge){var et=this.options,gt=et.log,ht=et.minZoom,Et=et.maxZoom,Zt=et.nodeSize;gt&&console.time("total time");var sr="prepare "+Ge.length+" points";gt&&console.time(sr),this.points=Ge;for(var bt=[],Ft=0;Ft<Ge.length;Ft++)Ge[Ft].geometry&&bt.push($r(Ge[Ft],Ft));this.trees[Et+1]=new Wt(bt,Vr,Qn,Zt,Float32Array),gt&&console.timeEnd(sr);for(var zr=Et;zr>=ht;zr--){var Jn=+Date.now();bt=this._cluster(bt,zr),this.trees[zr]=new Wt(bt,Vr,Qn,Zt,Float32Array),gt&&console.log("z%d: %d clusters in %dms",zr,bt.length,+Date.now()-Jn)}return gt&&console.timeEnd("total time"),this},Qt.prototype.getClusters=function(Ge,et){var gt=((Ge[0]+180)%360+360)%360-180,ht=Math.max(-90,Math.min(90,Ge[1])),Et=Ge[2]===180?180:((Ge[2]+180)%360+360)%360-180,Zt=Math.max(-90,Math.min(90,Ge[3]));if(Ge[2]-Ge[0]>=360)gt=-180,Et=180;else if(gt>Et){var sr=this.getClusters([gt,ht,180,Zt],et),bt=this.getClusters([-180,ht,Et,Zt],et);return sr.concat(bt)}for(var Ft=this.trees[this._limitZoom(et)],zr=[],Jn=0,yn=Ft.range(ot(gt),_r(Zt),ot(Et),_r(ht));Jn<yn.length;Jn+=1){var tn=Ft.points[yn[Jn]];zr.push(tn.numPoints?Cr(tn):this.points[tn.index])}return zr},Qt.prototype.getChildren=function(Ge){var et=this._getOriginId(Ge),gt=this._getOriginZoom(Ge),ht="No cluster with the specified id.",Et=this.trees[gt];if(!Et)throw new Error(ht);var Zt=Et.points[et];if(!Zt)throw new Error(ht);for(var sr=this.options.radius/(this.options.extent*Math.pow(2,gt-1)),bt=[],Ft=0,zr=Et.within(Zt.x,Zt.y,sr);Ft<zr.length;Ft+=1){var Jn=Et.points[zr[Ft]];Jn.parentId===Ge&&bt.push(Jn.numPoints?Cr(Jn):this.points[Jn.index])}if(bt.length===0)throw new Error(ht);return bt},Qt.prototype.getLeaves=function(Ge,et,gt){var ht=[];return this._appendLeaves(ht,Ge,et=et||10,gt=gt||0,0),ht},Qt.prototype.getTile=function(Ge,et,gt){var ht=this.trees[this._limitZoom(Ge)],Et=Math.pow(2,Ge),Zt=this.options,sr=Zt.radius/Zt.extent,bt=(gt-sr)/Et,Ft=(gt+1+sr)/Et,zr={features:[]};return this._addTileFeatures(ht.range((et-sr)/Et,bt,(et+1+sr)/Et,Ft),ht.points,et,gt,Et,zr),et===0&&this._addTileFeatures(ht.range(1-sr/Et,bt,1,Ft),ht.points,Et,gt,Et,zr),et===Et-1&&this._addTileFeatures(ht.range(0,bt,sr/Et,Ft),ht.points,-1,gt,Et,zr),zr.features.length?zr:null},Qt.prototype.getClusterExpansionZoom=function(Ge){for(var et=this._getOriginZoom(Ge)-1;et<=this.options.maxZoom;){var gt=this.getChildren(Ge);if(et++,gt.length!==1)break;Ge=gt[0].properties.cluster_id}return et},Qt.prototype._appendLeaves=function(Ge,et,gt,ht,Et){for(var Zt=0,sr=this.getChildren(et);Zt<sr.length;Zt+=1){var bt=sr[Zt],Ft=bt.properties;if(Ft&&Ft.cluster?Et+Ft.point_count<=ht?Et+=Ft.point_count:Et=this._appendLeaves(Ge,Ft.cluster_id,gt,ht,Et):Et<ht?Et++:Ge.push(bt),Ge.length===gt)break}return Et},Qt.prototype._addTileFeatures=function(Ge,et,gt,ht,Et,Zt){for(var sr=0,bt=Ge;sr<bt.length;sr+=1){var Ft=et[bt[sr]],zr=Ft.numPoints,Jn={type:1,geometry:[[Math.round(this.options.extent*(Ft.x*Et-gt)),Math.round(this.options.extent*(Ft.y*Et-ht))]],tags:zr?sn(Ft):this.points[Ft.index].properties},yn=void 0;zr?yn=Ft.id:this.options.generateId?yn=Ft.index:this.points[Ft.index].id&&(yn=this.points[Ft.index].id),yn!==void 0&&(Jn.id=yn),Zt.features.push(Jn)}},Qt.prototype._limitZoom=function(Ge){return Math.max(this.options.minZoom,Math.min(+Ge,this.options.maxZoom+1))},Qt.prototype._cluster=function(Ge,et){for(var gt=[],ht=this.options,Et=ht.reduce,Zt=ht.minPoints,sr=ht.radius/(ht.extent*Math.pow(2,et)),bt=0;bt<Ge.length;bt++){var Ft=Ge[bt];if(!(Ft.zoom<=et)){Ft.zoom=et;for(var zr=this.trees[et+1],Jn=zr.within(Ft.x,Ft.y,sr),yn=Ft.numPoints||1,tn=yn,ni=0,ta=Jn;ni<ta.length;ni+=1){var fa=zr.points[ta[ni]];fa.zoom>et&&(tn+=fa.numPoints||1)}if(tn>=Zt){for(var Mr=Ft.x*yn,Wr=Ft.y*yn,Zi=Et&&yn>1?this._map(Ft,!0):null,Wi=(bt<<5)+(et+1)+this.points.length,xo=0,ua=Jn;xo<ua.length;xo+=1){var Ur=zr.points[ua[xo]];if(!(Ur.zoom<=et)){Ur.zoom=et;var Jr=Ur.numPoints||1;Mr+=Ur.x*Jr,Wr+=Ur.y*Jr,Ur.parentId=Wi,Et&&(Zi||(Zi=this._map(Ft,!0)),Et(Zi,this._map(Ur)))}}Ft.parentId=Wi,gt.push(xr(Mr/tn,Wr/tn,Wi,tn,Zi))}else if(gt.push(Ft),tn>1)for(var Eo=0,Fo=Jn;Eo<Fo.length;Eo+=1){var So=zr.points[Fo[Eo]];So.zoom<=et||(So.zoom=et,gt.push(So))}}}return gt},Qt.prototype._getOriginId=function(Ge){return Ge-this.points.length>>5},Qt.prototype._getOriginZoom=function(Ge){return(Ge-this.points.length)%32},Qt.prototype._map=function(Ge,et){if(Ge.numPoints)return et?cr({},Ge.properties):Ge.properties;var gt=this.points[Ge.index].properties,ht=this.options.map(gt);return et&&ht===gt?cr({},ht):ht},zi.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},zi.prototype.splitTile=function(Ge,et,gt,ht,Et,Zt,sr){for(var bt=[Ge,et,gt,ht],Ft=this.options,zr=Ft.debug;bt.length;){ht=bt.pop(),gt=bt.pop(),et=bt.pop(),Ge=bt.pop();var Jn=1<<et,yn=Ui(et,gt,ht),tn=this.tiles[yn];if(!tn&&(zr>1&&console.time("creation"),tn=this.tiles[yn]=Gt(Ge,et,gt,ht,Ft),this.tileCoords.push({z:et,x:gt,y:ht}),zr)){zr>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",et,gt,ht,tn.numFeatures,tn.numPoints,tn.numSimplified),console.timeEnd("creation"));var ni="z"+et;this.stats[ni]=(this.stats[ni]||0)+1,this.total++}if(tn.source=Ge,Et){if(et===Ft.maxZoom||et===Et)continue;var ta=1<<Et-et;if(gt!==Math.floor(Zt/ta)||ht!==Math.floor(sr/ta))continue}else if(et===Ft.indexMaxZoom||tn.numPoints<=Ft.indexMaxPoints)continue;if(tn.source=null,Ge.length!==0){zr>1&&console.time("clipping");var fa,Mr,Wr,Zi,Wi,xo,ua=.5*Ft.buffer/Ft.extent,Ur=.5-ua,Jr=.5+ua,Eo=1+ua;fa=Mr=Wr=Zi=null,Wi=Q(Ge,Jn,gt-ua,gt+Jr,0,tn.minX,tn.maxX,Ft),xo=Q(Ge,Jn,gt+Ur,gt+Eo,0,tn.minX,tn.maxX,Ft),Ge=null,Wi&&(fa=Q(Wi,Jn,ht-ua,ht+Jr,1,tn.minY,tn.maxY,Ft),Mr=Q(Wi,Jn,ht+Ur,ht+Eo,1,tn.minY,tn.maxY,Ft),Wi=null),xo&&(Wr=Q(xo,Jn,ht-ua,ht+Jr,1,tn.minY,tn.maxY,Ft),Zi=Q(xo,Jn,ht+Ur,ht+Eo,1,tn.minY,tn.maxY,Ft),xo=null),zr>1&&console.timeEnd("clipping"),bt.push(fa||[],et+1,2*gt,2*ht),bt.push(Mr||[],et+1,2*gt,2*ht+1),bt.push(Wr||[],et+1,2*gt+1,2*ht),bt.push(Zi||[],et+1,2*gt+1,2*ht+1)}}},zi.prototype.getTile=function(Ge,et,gt){var ht=this.options,Et=ht.extent,Zt=ht.debug;if(Ge<0||Ge>24)return null;var sr=1<<Ge,bt=Ui(Ge,et=(et%sr+sr)%sr,gt);if(this.tiles[bt])return ce(this.tiles[bt],Et);Zt>1&&console.log("drilling down to z%d-%d-%d",Ge,et,gt);for(var Ft,zr=Ge,Jn=et,yn=gt;!Ft&&zr>0;)zr--,Jn=Math.floor(Jn/2),yn=Math.floor(yn/2),Ft=this.tiles[Ui(zr,Jn,yn)];return Ft&&Ft.source?(Zt>1&&console.log("found parent tile z%d-%d-%d",zr,Jn,yn),Zt>1&&console.time("drilling down"),this.splitTile(Ft.source,zr,Jn,yn,Ge,et,gt),Zt>1&&console.timeEnd("drilling down"),this.tiles[bt]?ce(this.tiles[bt],Et):null):null};var ka=function(Ge){function et(gt,ht,Et,Zt){Ge.call(this,gt,ht,Et,Pi),Zt&&(this.loadGeoJSON=Zt)}return Ge&&(et.__proto__=Ge),(et.prototype=Object.create(Ge&&Ge.prototype)).constructor=et,et.prototype.loadData=function(gt,ht){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),this._pendingCallback=ht,this._pendingLoadDataParams=gt,this._state&&this._state!=="Idle"?this._state="NeedsLoadData":(this._state="Coalescing",this._loadData())},et.prototype._loadData=function(){var gt=this;if(this._pendingCallback&&this._pendingLoadDataParams){var ht=this._pendingCallback,Et=this._pendingLoadDataParams;delete this._pendingCallback,delete this._pendingLoadDataParams;var Zt=!!(Et&&Et.request&&Et.request.collectResourceTiming)&&new l.RequestPerformance(Et.request);this.loadGeoJSON(Et,function(sr,bt){if(sr||!bt)return ht(sr);if(typeof bt!="object")return ht(new Error("Input data given to '"+Et.source+"' is not a valid GeoJSON object."));(function tn(ni,ta){var fa,Mr=ni&&ni.type;if(Mr==="FeatureCollection")for(fa=0;fa<ni.features.length;fa++)tn(ni.features[fa],ta);else if(Mr==="GeometryCollection")for(fa=0;fa<ni.geometries.length;fa++)tn(ni.geometries[fa],ta);else if(Mr==="Feature")tn(ni.geometry,ta);else if(Mr==="Polygon")le(ni.coordinates,ta);else if(Mr==="MultiPolygon")for(fa=0;fa<ni.coordinates.length;fa++)le(ni.coordinates[fa],ta);return ni})(bt,!0);try{if(Et.filter){var Ft=l.createExpression(Et.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(Ft.result==="error")throw new Error(Ft.value.map(function(tn){return tn.key+": "+tn.message}).join(", "));var zr=bt.features.filter(function(tn){return Ft.value.evaluate({zoom:0},tn)});bt={type:"FeatureCollection",features:zr}}gt._geoJSONIndex=Et.cluster?new Qt(function(tn){var ni=tn.superclusterOptions,ta=tn.clusterProperties;if(!ta||!ni)return ni;for(var fa={},Mr={},Wr={accumulated:null,zoom:0},Zi={properties:null},Wi=Object.keys(ta),xo=0,ua=Wi;xo<ua.length;xo+=1){var Ur=ua[xo],Jr=ta[Ur],Eo=Jr[0],Fo=l.createExpression(Jr[1]),So=l.createExpression(typeof Eo=="string"?[Eo,["accumulated"],["get",Ur]]:Eo);fa[Ur]=Fo.value,Mr[Ur]=So.value}return ni.map=function(Xa){Zi.properties=Xa;for(var Ko={},No=0,ui=Wi;No<ui.length;No+=1){var jn=ui[No];Ko[jn]=fa[jn].evaluate(Wr,Zi)}return Ko},ni.reduce=function(Xa,Ko){Zi.properties=Ko;for(var No=0,ui=Wi;No<ui.length;No+=1){var jn=ui[No];Wr.accumulated=Xa[jn],Xa[jn]=Mr[jn].evaluate(Wr,Zi)}},ni}(Et)).load(bt.features):function(tn,ni){return new zi(tn,ni)}(bt,Et.geojsonVtOptions)}catch(tn){return ht(tn)}gt.loaded={};var Jn={};if(Zt){var yn=Zt.finish();yn&&(Jn.resourceTiming={},Jn.resourceTiming[Et.source]=JSON.parse(JSON.stringify(yn)))}ht(null,Jn)})}},et.prototype.coalesce=function(){this._state==="Coalescing"?this._state="Idle":this._state==="NeedsLoadData"&&(this._state="Coalescing",this._loadData())},et.prototype.reloadTile=function(gt,ht){var Et=this.loaded;return Et&&Et[gt.uid]?Ge.prototype.reloadTile.call(this,gt,ht):this.loadTile(gt,ht)},et.prototype.loadGeoJSON=function(gt,ht){if(gt.request)l.getJSON(gt.request,ht);else{if(typeof gt.data!="string")return ht(new Error("Input data given to '"+gt.source+"' is not a valid GeoJSON object."));try{return ht(null,JSON.parse(gt.data))}catch(Et){return ht(new Error("Input data given to '"+gt.source+"' is not a valid GeoJSON object."))}}},et.prototype.removeSource=function(gt,ht){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),ht()},et.prototype.getClusterExpansionZoom=function(gt,ht){try{ht(null,this._geoJSONIndex.getClusterExpansionZoom(gt.clusterId))}catch(Et){ht(Et)}},et.prototype.getClusterChildren=function(gt,ht){try{ht(null,this._geoJSONIndex.getChildren(gt.clusterId))}catch(Et){ht(Et)}},et.prototype.getClusterLeaves=function(gt,ht){try{ht(null,this._geoJSONIndex.getLeaves(gt.clusterId,gt.limit,gt.offset))}catch(Et){ht(Et)}},et}(W),Ti=function(Ge){var et=this;this.self=Ge,this.actor=new l.Actor(Ge,this),this.layerIndexes={},this.availableImages={},this.workerSourceTypes={vector:W,geojson:ka},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=function(gt,ht){if(et.workerSourceTypes[gt])throw new Error('Worker source with name "'+gt+'" already registered.');et.workerSourceTypes[gt]=ht},this.self.registerRTLTextPlugin=function(gt){if(l.plugin.isParsed())throw new Error("RTL text plugin already registered.");l.plugin.applyArabicShaping=gt.applyArabicShaping,l.plugin.processBidirectionalText=gt.processBidirectionalText,l.plugin.processStyledBidirectionalText=gt.processStyledBidirectionalText}};return Ti.prototype.setReferrer=function(Ge,et){this.referrer=et},Ti.prototype.setImages=function(Ge,et,gt){for(var ht in this.availableImages[Ge]=et,this.workerSources[Ge]){var Et=this.workerSources[Ge][ht];for(var Zt in Et)Et[Zt].availableImages=et}gt()},Ti.prototype.setLayers=function(Ge,et,gt){this.getLayerIndex(Ge).replace(et),gt()},Ti.prototype.updateLayers=function(Ge,et,gt){this.getLayerIndex(Ge).update(et.layers,et.removedIds),gt()},Ti.prototype.loadTile=function(Ge,et,gt){this.getWorkerSource(Ge,et.type,et.source).loadTile(et,gt)},Ti.prototype.loadDEMTile=function(Ge,et,gt){this.getDEMWorkerSource(Ge,et.source).loadTile(et,gt)},Ti.prototype.reloadTile=function(Ge,et,gt){this.getWorkerSource(Ge,et.type,et.source).reloadTile(et,gt)},Ti.prototype.abortTile=function(Ge,et,gt){this.getWorkerSource(Ge,et.type,et.source).abortTile(et,gt)},Ti.prototype.removeTile=function(Ge,et,gt){this.getWorkerSource(Ge,et.type,et.source).removeTile(et,gt)},Ti.prototype.removeDEMTile=function(Ge,et){this.getDEMWorkerSource(Ge,et.source).removeTile(et)},Ti.prototype.removeSource=function(Ge,et,gt){if(this.workerSources[Ge]&&this.workerSources[Ge][et.type]&&this.workerSources[Ge][et.type][et.source]){var ht=this.workerSources[Ge][et.type][et.source];delete this.workerSources[Ge][et.type][et.source],ht.removeSource!==void 0?ht.removeSource(et,gt):gt()}},Ti.prototype.loadWorkerSource=function(Ge,et,gt){try{this.self.importScripts(et.url),gt()}catch(ht){gt(ht.toString())}},Ti.prototype.syncRTLPluginState=function(Ge,et,gt){try{l.plugin.setState(et);var ht=l.plugin.getPluginURL();if(l.plugin.isLoaded()&&!l.plugin.isParsed()&&ht!=null){this.self.importScripts(ht);var Et=l.plugin.isParsed();gt(Et?void 0:new Error("RTL Text Plugin failed to import scripts from "+ht),Et)}}catch(Zt){gt(Zt.toString())}},Ti.prototype.getAvailableImages=function(Ge){var et=this.availableImages[Ge];return et||(et=[]),et},Ti.prototype.getLayerIndex=function(Ge){var et=this.layerIndexes[Ge];return et||(et=this.layerIndexes[Ge]=new D),et},Ti.prototype.getWorkerSource=function(Ge,et,gt){var ht=this;return this.workerSources[Ge]||(this.workerSources[Ge]={}),this.workerSources[Ge][et]||(this.workerSources[Ge][et]={}),this.workerSources[Ge][et][gt]||(this.workerSources[Ge][et][gt]=new this.workerSourceTypes[et]({send:function(Et,Zt,sr){ht.actor.send(Et,Zt,sr,Ge)}},this.getLayerIndex(Ge),this.getAvailableImages(Ge))),this.workerSources[Ge][et][gt]},Ti.prototype.getDEMWorkerSource=function(Ge,et){return this.demWorkerSources[Ge]||(this.demWorkerSources[Ge]={}),this.demWorkerSources[Ge][et]||(this.demWorkerSources[Ge][et]=new te),this.demWorkerSources[Ge][et]},Ti.prototype.enforceCacheSizeLimit=function(Ge,et){l.enforceCacheSizeLimit(et)},typeof WorkerGlobalScope!="undefined"&&typeof self!="undefined"&&self instanceof WorkerGlobalScope&&(self.worker=new Ti(self)),Ti}),v(["./shared"],function(l){"use strict";var R=l.createCommonjsModule(function(d){function _(N){return!m(N)}function m(N){return typeof window=="undefined"||typeof document=="undefined"?"not a browser":Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray?Function.prototype&&Function.prototype.bind?Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions?"JSON"in window&&"parse"in JSON&&"stringify"in JSON?function(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var ee,Ae,Ze=new Blob([""],{type:"text/javascript"}),nt=URL.createObjectURL(Ze);try{Ae=new Worker(nt),ee=!0}catch(Ct){ee=!1}return Ae&&Ae.terminate(),URL.revokeObjectURL(nt),ee}()?"Uint8ClampedArray"in window?ArrayBuffer.isView?function(){var ee=document.createElement("canvas");ee.width=ee.height=1;var Ae=ee.getContext("2d");if(!Ae)return!1;var Ze=Ae.getImageData(0,0,1,1);return Ze&&Ze.width===ee.width}()?(S[X=N&&N.failIfMajorPerformanceCaveat]===void 0&&(S[X]=function(ee){var Ae=function(nt){var Ct=document.createElement("canvas"),Tt=Object.create(_.webGLContextAttributes);return Tt.failIfMajorPerformanceCaveat=nt,Ct.probablySupportsContext?Ct.probablySupportsContext("webgl",Tt)||Ct.probablySupportsContext("experimental-webgl",Tt):Ct.supportsContext?Ct.supportsContext("webgl",Tt)||Ct.supportsContext("experimental-webgl",Tt):Ct.getContext("webgl",Tt)||Ct.getContext("experimental-webgl",Tt)}(ee);if(!Ae)return!1;var Ze=Ae.createShader(Ae.VERTEX_SHADER);return!(!Ze||Ae.isContextLost())&&(Ae.shaderSource(Ze,"void main() {}"),Ae.compileShader(Ze),Ae.getShaderParameter(Ze,Ae.COMPILE_STATUS)===!0)}(X)),S[X]?void 0:"insufficient WebGL support"):"insufficient Canvas/getImageData support":"insufficient ArrayBuffer support":"insufficient Uint8ClampedArray support":"insufficient worker support":"insufficient JSON support":"insufficient Object support":"insufficient Function support":"insufficent Array support";var X}d.exports?d.exports=_:window&&(window.mapboxgl=window.mapboxgl||{},window.mapboxgl.supported=_,window.mapboxgl.notSupportedReason=m);var S={};_.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0}}),A={create:function(d,_,m){var S=l.window.document.createElement(d);return _!==void 0&&(S.className=_),m&&m.appendChild(S),S},createNS:function(d,_){return l.window.document.createElementNS(d,_)}},D=l.window.document&&l.window.document.documentElement.style;function k(d){if(!D)return d[0];for(var _=0;_<d.length;_++)if(d[_]in D)return d[_];return d[0]}var B,z=k(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]);A.disableDrag=function(){D&&z&&(B=D[z],D[z]="none")},A.enableDrag=function(){D&&z&&(D[z]=B)};var Z=k(["transform","WebkitTransform"]);A.setTransform=function(d,_){d.style[Z]=_};var W=!1;try{var Y=Object.defineProperty({},"passive",{get:function(){W=!0}});l.window.addEventListener("test",Y,Y),l.window.removeEventListener("test",Y,Y)}catch(d){W=!1}A.addEventListener=function(d,_,m,S){S===void 0&&(S={}),d.addEventListener(_,m,"passive"in S&&W?S:S.capture)},A.removeEventListener=function(d,_,m,S){S===void 0&&(S={}),d.removeEventListener(_,m,"passive"in S&&W?S:S.capture)};var te=function(d){d.preventDefault(),d.stopPropagation(),l.window.removeEventListener("click",te,!0)};function le(d){var _=d.userImage;return!!(_&&_.render&&_.render())&&(d.data.replace(new Uint8Array(_.data.buffer)),!0)}A.suppressClick=function(){l.window.addEventListener("click",te,!0),l.window.setTimeout(function(){l.window.removeEventListener("click",te,!0)},0)},A.mousePos=function(d,_){var m=d.getBoundingClientRect();return new l.Point(_.clientX-m.left-d.clientLeft,_.clientY-m.top-d.clientTop)},A.touchPos=function(d,_){for(var m=d.getBoundingClientRect(),S=[],N=0;N<_.length;N++)S.push(new l.Point(_[N].clientX-m.left-d.clientLeft,_[N].clientY-m.top-d.clientTop));return S},A.mouseButton=function(d){return l.window.InstallTrigger!==void 0&&d.button===2&&d.ctrlKey&&l.window.navigator.platform.toUpperCase().indexOf("MAC")>=0?0:d.button},A.remove=function(d){d.parentNode&&d.parentNode.removeChild(d)};var be=function(d){function _(){d.call(this),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new l.RGBAImage({width:1,height:1}),this.dirty=!0}return d&&(_.__proto__=d),(_.prototype=Object.create(d&&d.prototype)).constructor=_,_.prototype.isLoaded=function(){return this.loaded},_.prototype.setLoaded=function(m){if(this.loaded!==m&&(this.loaded=m,m)){for(var S=0,N=this.requestors;S<N.length;S+=1){var X=N[S];this._notify(X.ids,X.callback)}this.requestors=[]}},_.prototype.getImage=function(m){return this.images[m]},_.prototype.addImage=function(m,S){this._validate(m,S)&&(this.images[m]=S)},_.prototype._validate=function(m,S){var N=!0;return this._validateStretch(S.stretchX,S.data&&S.data.width)||(this.fire(new l.ErrorEvent(new Error('Image "'+m+'" has invalid "stretchX" value'))),N=!1),this._validateStretch(S.stretchY,S.data&&S.data.height)||(this.fire(new l.ErrorEvent(new Error('Image "'+m+'" has invalid "stretchY" value'))),N=!1),this._validateContent(S.content,S)||(this.fire(new l.ErrorEvent(new Error('Image "'+m+'" has invalid "content" value'))),N=!1),N},_.prototype._validateStretch=function(m,S){if(!m)return!0;for(var N=0,X=0,ee=m;X<ee.length;X+=1){var Ae=ee[X];if(Ae[0]<N||Ae[1]<Ae[0]||S<Ae[1])return!1;N=Ae[1]}return!0},_.prototype._validateContent=function(m,S){return!(m&&(m.length!==4||m[0]<0||S.data.width<m[0]||m[1]<0||S.data.height<m[1]||m[2]<0||S.data.width<m[2]||m[3]<0||S.data.height<m[3]||m[2]<m[0]||m[3]<m[1]))},_.prototype.updateImage=function(m,S){S.version=this.images[m].version+1,this.images[m]=S,this.updatedImages[m]=!0},_.prototype.removeImage=function(m){var S=this.images[m];delete this.images[m],delete this.patterns[m],S.userImage&&S.userImage.onRemove&&S.userImage.onRemove()},_.prototype.listImages=function(){return Object.keys(this.images)},_.prototype.getImages=function(m,S){var N=!0;if(!this.isLoaded())for(var X=0,ee=m;X<ee.length;X+=1)this.images[ee[X]]||(N=!1);this.isLoaded()||N?this._notify(m,S):this.requestors.push({ids:m,callback:S})},_.prototype._notify=function(m,S){for(var N={},X=0,ee=m;X<ee.length;X+=1){var Ae=ee[X];this.images[Ae]||this.fire(new l.Event("styleimagemissing",{id:Ae}));var Ze=this.images[Ae];Ze?N[Ae]={data:Ze.data.clone(),pixelRatio:Ze.pixelRatio,sdf:Ze.sdf,version:Ze.version,stretchX:Ze.stretchX,stretchY:Ze.stretchY,content:Ze.content,hasRenderCallback:Boolean(Ze.userImage&&Ze.userImage.render)}:l.warnOnce('Image "'+Ae+'" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.')}S(null,N)},_.prototype.getPixelSize=function(){var m=this.atlasImage;return{width:m.width,height:m.height}},_.prototype.getPattern=function(m){var S=this.patterns[m],N=this.getImage(m);if(!N)return null;if(S&&S.position.version===N.version)return S.position;if(S)S.position.version=N.version;else{var X={w:N.data.width+2,h:N.data.height+2,x:0,y:0},ee=new l.ImagePosition(X,N);this.patterns[m]={bin:X,position:ee}}return this._updatePatternAtlas(),this.patterns[m].position},_.prototype.bind=function(m){var S=m.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new l.Texture(m,this.atlasImage,S.RGBA),this.atlasTexture.bind(S.LINEAR,S.CLAMP_TO_EDGE)},_.prototype._updatePatternAtlas=function(){var m=[];for(var S in this.patterns)m.push(this.patterns[S].bin);var N=l.potpack(m),X=N.w,ee=N.h,Ae=this.atlasImage;for(var Ze in Ae.resize({width:X||1,height:ee||1}),this.patterns){var nt=this.patterns[Ze].bin,Ct=nt.x+1,Tt=nt.y+1,Pt=this.images[Ze].data,tr=Pt.width,or=Pt.height;l.RGBAImage.copy(Pt,Ae,{x:0,y:0},{x:Ct,y:Tt},{width:tr,height:or}),l.RGBAImage.copy(Pt,Ae,{x:0,y:or-1},{x:Ct,y:Tt-1},{width:tr,height:1}),l.RGBAImage.copy(Pt,Ae,{x:0,y:0},{x:Ct,y:Tt+or},{width:tr,height:1}),l.RGBAImage.copy(Pt,Ae,{x:tr-1,y:0},{x:Ct-1,y:Tt},{width:1,height:or}),l.RGBAImage.copy(Pt,Ae,{x:0,y:0},{x:Ct+tr,y:Tt},{width:1,height:or})}this.dirty=!0},_.prototype.beginFrame=function(){this.callbackDispatchedThisFrame={}},_.prototype.dispatchRenderCallbacks=function(m){for(var S=0,N=m;S<N.length;S+=1){var X=N[S];if(!this.callbackDispatchedThisFrame[X]){this.callbackDispatchedThisFrame[X]=!0;var ee=this.images[X];le(ee)&&this.updateImage(X,ee)}}},_}(l.Evented),de=xe,pe=xe,Oe=1e20;function xe(d,_,m,S,N,X){this.fontSize=d||24,this.buffer=_===void 0?3:_,this.cutoff=S||.25,this.fontFamily=N||"sans-serif",this.fontWeight=X||"normal",this.radius=m||8;var ee=this.size=this.fontSize+2*this.buffer;this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=ee,this.ctx=this.canvas.getContext("2d"),this.ctx.font=this.fontWeight+" "+this.fontSize+"px "+this.fontFamily,this.ctx.textBaseline="middle",this.ctx.fillStyle="black",this.gridOuter=new Float64Array(ee*ee),this.gridInner=new Float64Array(ee*ee),this.f=new Float64Array(ee),this.d=new Float64Array(ee),this.z=new Float64Array(ee+1),this.v=new Int16Array(ee),this.middle=Math.round(ee/2*(navigator.userAgent.indexOf("Gecko/")>=0?1.2:1))}function Ve(d,_,m,S,N,X,ee){for(var Ae=0;Ae<_;Ae++){for(var Ze=0;Ze<m;Ze++)S[Ze]=d[Ze*_+Ae];for(K(S,N,X,ee,m),Ze=0;Ze<m;Ze++)d[Ze*_+Ae]=N[Ze]}for(Ze=0;Ze<m;Ze++){for(Ae=0;Ae<_;Ae++)S[Ae]=d[Ze*_+Ae];for(K(S,N,X,ee,_),Ae=0;Ae<_;Ae++)d[Ze*_+Ae]=Math.sqrt(N[Ae])}}function K(d,_,m,S,N){m[0]=0,S[0]=-Oe,S[1]=+Oe;for(var X=1,ee=0;X<N;X++){for(var Ae=(d[X]+X*X-(d[m[ee]]+m[ee]*m[ee]))/(2*X-2*m[ee]);Ae<=S[ee];)ee--,Ae=(d[X]+X*X-(d[m[ee]]+m[ee]*m[ee]))/(2*X-2*m[ee]);m[++ee]=X,S[ee]=Ae,S[ee+1]=+Oe}for(X=0,ee=0;X<N;X++){for(;S[ee+1]<X;)ee++;_[X]=(X-m[ee])*(X-m[ee])+d[m[ee]]}}xe.prototype.draw=function(d){this.ctx.clearRect(0,0,this.size,this.size),this.ctx.fillText(d,this.buffer,this.middle);for(var _=this.ctx.getImageData(0,0,this.size,this.size),m=new Uint8ClampedArray(this.size*this.size),S=0;S<this.size*this.size;S++){var N=_.data[4*S+3]/255;this.gridOuter[S]=N===1?0:N===0?Oe:Math.pow(Math.max(0,.5-N),2),this.gridInner[S]=N===1?Oe:N===0?0:Math.pow(Math.max(0,N-.5),2)}for(Ve(this.gridOuter,this.size,this.size,this.f,this.d,this.v,this.z),Ve(this.gridInner,this.size,this.size,this.f,this.d,this.v,this.z),S=0;S<this.size*this.size;S++)m[S]=Math.max(0,Math.min(255,Math.round(255-255*((this.gridOuter[S]-this.gridInner[S])/this.radius+this.cutoff))));return m},de.default=pe;var ke=function(d,_){this.requestManager=d,this.localIdeographFontFamily=_,this.entries={}};ke.prototype.setURL=function(d){this.url=d},ke.prototype.getGlyphs=function(d,_){var m=this,S=[];for(var N in d)for(var X=0,ee=d[N];X<ee.length;X+=1)S.push({stack:N,id:ee[X]});l.asyncAll(S,function(Ae,Ze){var nt=Ae.stack,Ct=Ae.id,Tt=m.entries[nt];Tt||(Tt=m.entries[nt]={glyphs:{},requests:{},ranges:{}});var Pt=Tt.glyphs[Ct];if(Pt===void 0){if(Pt=m._tinySDF(Tt,nt,Ct))return Tt.glyphs[Ct]=Pt,void Ze(null,{stack:nt,id:Ct,glyph:Pt});var tr=Math.floor(Ct/256);if(256*tr>65535)Ze(new Error("glyphs > 65535 not supported"));else if(Tt.ranges[tr])Ze(null,{stack:nt,id:Ct,glyph:Pt});else{var or=Tt.requests[tr];or||(or=Tt.requests[tr]=[],ke.loadGlyphRange(nt,tr,m.url,m.requestManager,function(gr,Yt){if(Yt){for(var br in Yt)m._doesCharSupportLocalGlyph(+br)||(Tt.glyphs[+br]=Yt[+br]);Tt.ranges[tr]=!0}for(var Lr=0,pn=or;Lr<pn.length;Lr+=1)(0,pn[Lr])(gr,Yt);delete Tt.requests[tr]})),or.push(function(gr,Yt){gr?Ze(gr):Yt&&Ze(null,{stack:nt,id:Ct,glyph:Yt[Ct]||null})})}}else Ze(null,{stack:nt,id:Ct,glyph:Pt})},function(Ae,Ze){if(Ae)_(Ae);else if(Ze){for(var nt={},Ct=0,Tt=Ze;Ct<Tt.length;Ct+=1){var Pt=Tt[Ct],tr=Pt.stack,or=Pt.id,gr=Pt.glyph;(nt[tr]||(nt[tr]={}))[or]=gr&&{id:gr.id,bitmap:gr.bitmap.clone(),metrics:gr.metrics}}_(null,nt)}})},ke.prototype._doesCharSupportLocalGlyph=function(d){return!!this.localIdeographFontFamily&&(l.isChar["CJK Unified Ideographs"](d)||l.isChar["Hangul Syllables"](d)||l.isChar.Hiragana(d)||l.isChar.Katakana(d))},ke.prototype._tinySDF=function(d,_,m){var S=this.localIdeographFontFamily;if(S&&this._doesCharSupportLocalGlyph(m)){var N=d.tinySDF;if(!N){var X="400";/bold/i.test(_)?X="900":/medium/i.test(_)?X="500":/light/i.test(_)&&(X="200"),N=d.tinySDF=new ke.TinySDF(24,3,8,.25,S,X)}return{id:m,bitmap:new l.AlphaImage({width:30,height:30},N.draw(String.fromCharCode(m))),metrics:{width:24,height:24,left:0,top:-8,advance:24}}}},ke.loadGlyphRange=function(d,_,m,S,N){var X=256*_,ee=X+255,Ae=S.transformRequest(S.normalizeGlyphsURL(m).replace("{fontstack}",d).replace("{range}",X+"-"+ee),l.ResourceType.Glyphs);l.getArrayBuffer(Ae,function(Ze,nt){if(Ze)N(Ze);else if(nt){for(var Ct={},Tt=0,Pt=l.parseGlyphPBF(nt);Tt<Pt.length;Tt+=1){var tr=Pt[Tt];Ct[tr.id]=tr}N(null,Ct)}})},ke.TinySDF=de;var we=function(){this.specification=l.styleSpec.light.position};we.prototype.possiblyEvaluate=function(d,_){return l.sphericalToCartesian(d.expression.evaluate(_))},we.prototype.interpolate=function(d,_,m){return{x:l.number(d.x,_.x,m),y:l.number(d.y,_.y,m),z:l.number(d.z,_.z,m)}};var Me=new l.Properties({anchor:new l.DataConstantProperty(l.styleSpec.light.anchor),position:new we,color:new l.DataConstantProperty(l.styleSpec.light.color),intensity:new l.DataConstantProperty(l.styleSpec.light.intensity)}),Xe=function(d){function _(m){d.call(this),this._transitionable=new l.Transitionable(Me),this.setLight(m),this._transitioning=this._transitionable.untransitioned()}return d&&(_.__proto__=d),(_.prototype=Object.create(d&&d.prototype)).constructor=_,_.prototype.getLight=function(){return this._transitionable.serialize()},_.prototype.setLight=function(m,S){if(S===void 0&&(S={}),!this._validate(l.validateLight,m,S))for(var N in m){var X=m[N];l.endsWith(N,"-transition")?this._transitionable.setTransition(N.slice(0,-11),X):this._transitionable.setValue(N,X)}},_.prototype.updateTransitions=function(m){this._transitioning=this._transitionable.transitioned(m,this._transitioning)},_.prototype.hasTransition=function(){return this._transitioning.hasTransition()},_.prototype.recalculate=function(m){this.properties=this._transitioning.possiblyEvaluate(m)},_.prototype._validate=function(m,S,N){return(!N||N.validate!==!1)&&l.emitValidationErrors(this,m.call(l.validateStyle,l.extend({value:S,style:{glyphs:!0,sprite:!0},styleSpec:l.styleSpec})))},_}(l.Evented),Ke=function(d,_){this.width=d,this.height=_,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}};Ke.prototype.getDash=function(d,_){var m=d.join(",")+String(_);return this.dashEntry[m]||(this.dashEntry[m]=this.addDash(d,_)),this.dashEntry[m]},Ke.prototype.getDashRanges=function(d,_,m){var S=[],N=d.length%2==1?-d[d.length-1]*m:0,X=d[0]*m,ee=!0;S.push({left:N,right:X,isDash:ee,zeroLength:d[0]===0});for(var Ae=d[0],Ze=1;Ze<d.length;Ze++){var nt=d[Ze];S.push({left:N=Ae*m,right:X=(Ae+=nt)*m,isDash:ee=!ee,zeroLength:nt===0})}return S},Ke.prototype.addRoundDash=function(d,_,m){for(var S=_/2,N=-m;N<=m;N++)for(var X=this.width*(this.nextRow+m+N),ee=0,Ae=d[ee],Ze=0;Ze<this.width;Ze++){Ze/Ae.right>1&&(Ae=d[++ee]);var nt=Math.abs(Ze-Ae.left),Ct=Math.abs(Ze-Ae.right),Tt=Math.min(nt,Ct),Pt=void 0,tr=N/m*(S+1);if(Ae.isDash){var or=S-Math.abs(tr);Pt=Math.sqrt(Tt*Tt+or*or)}else Pt=S-Math.sqrt(Tt*Tt+tr*tr);this.data[X+Ze]=Math.max(0,Math.min(255,Pt+128))}},Ke.prototype.addRegularDash=function(d){for(var _=d.length-1;_>=0;--_){var m=d[_],S=d[_+1];m.zeroLength?d.splice(_,1):S&&S.isDash===m.isDash&&(S.left=m.left,d.splice(_,1))}var N=d[0],X=d[d.length-1];N.isDash===X.isDash&&(N.left=X.left-this.width,X.right=N.right+this.width);for(var ee=this.width*this.nextRow,Ae=0,Ze=d[Ae],nt=0;nt<this.width;nt++){nt/Ze.right>1&&(Ze=d[++Ae]);var Ct=Math.abs(nt-Ze.left),Tt=Math.abs(nt-Ze.right),Pt=Math.min(Ct,Tt);this.data[ee+nt]=Math.max(0,Math.min(255,(Ze.isDash?Pt:-Pt)+128))}},Ke.prototype.addDash=function(d,_){var m=_?7:0,S=2*m+1;if(this.nextRow+S>this.height)return l.warnOnce("LineAtlas out of space"),null;for(var N=0,X=0;X<d.length;X++)N+=d[X];if(N!==0){var ee=this.width/N,Ae=this.getDashRanges(d,this.width,ee);_?this.addRoundDash(Ae,ee,m):this.addRegularDash(Ae)}var Ze={y:(this.nextRow+m+.5)/this.height,height:2*m/this.height,width:N};return this.nextRow+=S,this.dirty=!0,Ze},Ke.prototype.bind=function(d){var _=d.gl;this.texture?(_.bindTexture(_.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,_.texSubImage2D(_.TEXTURE_2D,0,0,0,this.width,this.height,_.ALPHA,_.UNSIGNED_BYTE,this.data))):(this.texture=_.createTexture(),_.bindTexture(_.TEXTURE_2D,this.texture),_.texParameteri(_.TEXTURE_2D,_.TEXTURE_WRAP_S,_.REPEAT),_.texParameteri(_.TEXTURE_2D,_.TEXTURE_WRAP_T,_.REPEAT),_.texParameteri(_.TEXTURE_2D,_.TEXTURE_MIN_FILTER,_.LINEAR),_.texParameteri(_.TEXTURE_2D,_.TEXTURE_MAG_FILTER,_.LINEAR),_.texImage2D(_.TEXTURE_2D,0,_.ALPHA,this.width,this.height,0,_.ALPHA,_.UNSIGNED_BYTE,this.data))};var At=function d(_,m){this.workerPool=_,this.actors=[],this.currentActor=0,this.id=l.uniqueId();for(var S=this.workerPool.acquire(this.id),N=0;N<S.length;N++){var X=new d.Actor(S[N],m,this.id);X.name="Worker "+N,this.actors.push(X)}};function mt(d,_,m){var S=function(N,X){if(N)return m(N);if(X){var ee=l.pick(l.extend(X,d),["tiles","minzoom","maxzoom","attribution","mapbox_logo","bounds","scheme","tileSize","encoding"]);X.vector_layers&&(ee.vectorLayers=X.vector_layers,ee.vectorLayerIds=ee.vectorLayers.map(function(Ae){return Ae.id})),ee.tiles=_.canonicalizeTileset(ee,d.url),m(null,ee)}};return d.url?l.getJSON(_.transformRequest(_.normalizeSourceURL(d.url),l.ResourceType.Source),S):l.browser.frame(function(){return S(null,d)})}At.prototype.broadcast=function(d,_,m){l.asyncAll(this.actors,function(S,N){S.send(d,_,N)},m=m||function(){})},At.prototype.getActor=function(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]},At.prototype.remove=function(){this.actors.forEach(function(d){d.remove()}),this.actors=[],this.workerPool.release(this.id)},At.Actor=l.Actor;var ie=function(d,_,m){this.bounds=l.LngLatBounds.convert(this.validateBounds(d)),this.minzoom=_||0,this.maxzoom=m||24};ie.prototype.validateBounds=function(d){return Array.isArray(d)&&d.length===4?[Math.max(-180,d[0]),Math.max(-90,d[1]),Math.min(180,d[2]),Math.min(90,d[3])]:[-180,-90,180,90]},ie.prototype.contains=function(d){var _=Math.pow(2,d.z),m=Math.floor(l.mercatorXfromLng(this.bounds.getWest())*_),S=Math.floor(l.mercatorYfromLat(this.bounds.getNorth())*_),N=Math.ceil(l.mercatorXfromLng(this.bounds.getEast())*_),X=Math.ceil(l.mercatorYfromLat(this.bounds.getSouth())*_);return d.x>=m&&d.x<N&&d.y>=S&&d.y<X};var oe=function(d){function _(m,S,N,X){if(d.call(this),this.id=m,this.dispatcher=N,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,l.extend(this,l.pick(S,["url","scheme","tileSize","promoteId"])),this._options=l.extend({type:"vector"},S),this._collectResourceTiming=S.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(X)}return d&&(_.__proto__=d),(_.prototype=Object.create(d&&d.prototype)).constructor=_,_.prototype.load=function(){var m=this;this._loaded=!1,this.fire(new l.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=mt(this._options,this.map._requestManager,function(S,N){m._tileJSONRequest=null,m._loaded=!0,S?m.fire(new l.ErrorEvent(S)):N&&(l.extend(m,N),N.bounds&&(m.tileBounds=new ie(N.bounds,m.minzoom,m.maxzoom)),l.postTurnstileEvent(N.tiles,m.map._requestManager._customAccessToken),l.postMapLoadEvent(N.tiles,m.map._getMapId(),m.map._requestManager._skuToken,m.map._requestManager._customAccessToken),m.fire(new l.Event("data",{dataType:"source",sourceDataType:"metadata"})),m.fire(new l.Event("data",{dataType:"source",sourceDataType:"content"})))})},_.prototype.loaded=function(){return this._loaded},_.prototype.hasTile=function(m){return!this.tileBounds||this.tileBounds.contains(m.canonical)},_.prototype.onAdd=function(m){this.map=m,this.load()},_.prototype.setSourceProperty=function(m){this._tileJSONRequest&&this._tileJSONRequest.cancel(),m(),this.map.style.sourceCaches[this.id].clearTiles(),this.load()},_.prototype.setTiles=function(m){var S=this;return this.setSourceProperty(function(){S._options.tiles=m}),this},_.prototype.setUrl=function(m){var S=this;return this.setSourceProperty(function(){S.url=m,S._options.url=m}),this},_.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},_.prototype.serialize=function(){return l.extend({},this._options)},_.prototype.loadTile=function(m,S){var N=this.map._requestManager.normalizeTileURL(m.tileID.canonical.url(this.tiles,this.scheme)),X={request:this.map._requestManager.transformRequest(N,l.ResourceType.Tile),uid:m.uid,tileID:m.tileID,zoom:m.tileID.overscaledZ,tileSize:this.tileSize*m.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:l.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};function ee(Ae,Ze){return delete m.request,m.aborted?S(null):Ae&&Ae.status!==404?S(Ae):(Ze&&Ze.resourceTiming&&(m.resourceTiming=Ze.resourceTiming),this.map._refreshExpiredTiles&&Ze&&m.setExpiryData(Ze),m.loadVectorData(Ze,this.map.painter),l.cacheEntryPossiblyAdded(this.dispatcher),S(null),void(m.reloadCallback&&(this.loadTile(m,m.reloadCallback),m.reloadCallback=null)))}X.request.collectResourceTiming=this._collectResourceTiming,m.actor&&m.state!=="expired"?m.state==="loading"?m.reloadCallback=S:m.request=m.actor.send("reloadTile",X,ee.bind(this)):(m.actor=this.dispatcher.getActor(),m.request=m.actor.send("loadTile",X,ee.bind(this)))},_.prototype.abortTile=function(m){m.request&&(m.request.cancel(),delete m.request),m.actor&&m.actor.send("abortTile",{uid:m.uid,type:this.type,source:this.id},void 0)},_.prototype.unloadTile=function(m){m.unloadVectorData(),m.actor&&m.actor.send("removeTile",{uid:m.uid,type:this.type,source:this.id},void 0)},_.prototype.hasTransition=function(){return!1},_}(l.Evented),he=function(d){function _(m,S,N,X){d.call(this),this.id=m,this.dispatcher=N,this.setEventedParent(X),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=l.extend({type:"raster"},S),l.extend(this,l.pick(S,["url","scheme","tileSize"]))}return d&&(_.__proto__=d),(_.prototype=Object.create(d&&d.prototype)).constructor=_,_.prototype.load=function(){var m=this;this._loaded=!1,this.fire(new l.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=mt(this._options,this.map._requestManager,function(S,N){m._tileJSONRequest=null,m._loaded=!0,S?m.fire(new l.ErrorEvent(S)):N&&(l.extend(m,N),N.bounds&&(m.tileBounds=new ie(N.bounds,m.minzoom,m.maxzoom)),l.postTurnstileEvent(N.tiles),l.postMapLoadEvent(N.tiles,m.map._getMapId(),m.map._requestManager._skuToken),m.fire(new l.Event("data",{dataType:"source",sourceDataType:"metadata"})),m.fire(new l.Event("data",{dataType:"source",sourceDataType:"content"})))})},_.prototype.loaded=function(){return this._loaded},_.prototype.onAdd=function(m){this.map=m,this.load()},_.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},_.prototype.serialize=function(){return l.extend({},this._options)},_.prototype.hasTile=function(m){return!this.tileBounds||this.tileBounds.contains(m.canonical)},_.prototype.loadTile=function(m,S){var N=this,X=this.map._requestManager.normalizeTileURL(m.tileID.canonical.url(this.tiles,this.scheme),this.tileSize);m.request=l.getImage(this.map._requestManager.transformRequest(X,l.ResourceType.Tile),function(ee,Ae){if(delete m.request,m.aborted)m.state="unloaded",S(null);else if(ee)m.state="errored",S(ee);else if(Ae){N.map._refreshExpiredTiles&&m.setExpiryData(Ae),delete Ae.cacheControl,delete Ae.expires;var Ze=N.map.painter.context,nt=Ze.gl;m.texture=N.map.painter.getTileTexture(Ae.width),m.texture?m.texture.update(Ae,{useMipmap:!0}):(m.texture=new l.Texture(Ze,Ae,nt.RGBA,{useMipmap:!0}),m.texture.bind(nt.LINEAR,nt.CLAMP_TO_EDGE,nt.LINEAR_MIPMAP_NEAREST),Ze.extTextureFilterAnisotropic&&nt.texParameterf(nt.TEXTURE_2D,Ze.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,Ze.extTextureFilterAnisotropicMax)),m.state="loaded",l.cacheEntryPossiblyAdded(N.dispatcher),S(null)}})},_.prototype.abortTile=function(m,S){m.request&&(m.request.cancel(),delete m.request),S()},_.prototype.unloadTile=function(m,S){m.texture&&this.map.painter.saveTileTexture(m.texture),S()},_.prototype.hasTransition=function(){return!1},_}(l.Evented),ye=function(d){function _(m,S,N,X){d.call(this,m,S,N,X),this.type="raster-dem",this.maxzoom=22,this._options=l.extend({type:"raster-dem"},S),this.encoding=S.encoding||"mapbox"}return d&&(_.__proto__=d),(_.prototype=Object.create(d&&d.prototype)).constructor=_,_.prototype.serialize=function(){return{type:"raster-dem",url:this.url,tileSize:this.tileSize,tiles:this.tiles,bounds:this.bounds,encoding:this.encoding}},_.prototype.loadTile=function(m,S){var N=this.map._requestManager.normalizeTileURL(m.tileID.canonical.url(this.tiles,this.scheme),this.tileSize);function X(ee,Ae){ee&&(m.state="errored",S(ee)),Ae&&(m.dem=Ae,m.needsHillshadePrepare=!0,m.state="loaded",S(null))}m.request=l.getImage(this.map._requestManager.transformRequest(N,l.ResourceType.Tile),function(ee,Ae){if(delete m.request,m.aborted)m.state="unloaded",S(null);else if(ee)m.state="errored",S(ee);else if(Ae){this.map._refreshExpiredTiles&&m.setExpiryData(Ae),delete Ae.cacheControl,delete Ae.expires;var Ze=l.window.ImageBitmap&&Ae instanceof l.window.ImageBitmap&&l.offscreenCanvasSupported()?Ae:l.browser.getImageData(Ae,1),nt={uid:m.uid,coord:m.tileID,source:this.id,rawImageData:Ze,encoding:this.encoding};m.actor&&m.state!=="expired"||(m.actor=this.dispatcher.getActor(),m.actor.send("loadDEMTile",nt,X.bind(this)))}}.bind(this)),m.neighboringTiles=this._getNeighboringTiles(m.tileID)},_.prototype._getNeighboringTiles=function(m){var S=m.canonical,N=Math.pow(2,S.z),X=(S.x-1+N)%N,ee=S.x===0?m.wrap-1:m.wrap,Ae=(S.x+1+N)%N,Ze=S.x+1===N?m.wrap+1:m.wrap,nt={};return nt[new l.OverscaledTileID(m.overscaledZ,ee,S.z,X,S.y).key]={backfilled:!1},nt[new l.OverscaledTileID(m.overscaledZ,Ze,S.z,Ae,S.y).key]={backfilled:!1},S.y>0&&(nt[new l.OverscaledTileID(m.overscaledZ,ee,S.z,X,S.y-1).key]={backfilled:!1},nt[new l.OverscaledTileID(m.overscaledZ,m.wrap,S.z,S.x,S.y-1).key]={backfilled:!1},nt[new l.OverscaledTileID(m.overscaledZ,Ze,S.z,Ae,S.y-1).key]={backfilled:!1}),S.y+1<N&&(nt[new l.OverscaledTileID(m.overscaledZ,ee,S.z,X,S.y+1).key]={backfilled:!1},nt[new l.OverscaledTileID(m.overscaledZ,m.wrap,S.z,S.x,S.y+1).key]={backfilled:!1},nt[new l.OverscaledTileID(m.overscaledZ,Ze,S.z,Ae,S.y+1).key]={backfilled:!1}),nt},_.prototype.unloadTile=function(m){m.demTexture&&this.map.painter.saveTileTexture(m.demTexture),m.fbo&&(m.fbo.destroy(),delete m.fbo),m.dem&&delete m.dem,delete m.neighboringTiles,m.state="unloaded",m.actor&&m.actor.send("removeDEMTile",{uid:m.uid,source:this.id})},_}(he),se=function(d){function _(m,S,N,X){d.call(this),this.id=m,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._loaded=!1,this.actor=N.getActor(),this.setEventedParent(X),this._data=S.data,this._options=l.extend({},S),this._collectResourceTiming=S.collectResourceTiming,this._resourceTiming=[],S.maxzoom!==void 0&&(this.maxzoom=S.maxzoom),S.type&&(this.type=S.type),S.attribution&&(this.attribution=S.attribution),this.promoteId=S.promoteId;var ee=l.EXTENT/this.tileSize;this.workerOptions=l.extend({source:this.id,cluster:S.cluster||!1,geojsonVtOptions:{buffer:(S.buffer!==void 0?S.buffer:128)*ee,tolerance:(S.tolerance!==void 0?S.tolerance:.375)*ee,extent:l.EXTENT,maxZoom:this.maxzoom,lineMetrics:S.lineMetrics||!1,generateId:S.generateId||!1},superclusterOptions:{maxZoom:S.clusterMaxZoom!==void 0?Math.min(S.clusterMaxZoom,this.maxzoom-1):this.maxzoom-1,minPoints:Math.max(2,S.clusterMinPoints||2),extent:l.EXTENT,radius:(S.clusterRadius||50)*ee,log:!1,generateId:S.generateId||!1},clusterProperties:S.clusterProperties,filter:S.filter},S.workerOptions)}return d&&(_.__proto__=d),(_.prototype=Object.create(d&&d.prototype)).constructor=_,_.prototype.load=function(){var m=this;this.fire(new l.Event("dataloading",{dataType:"source"})),this._updateWorkerData(function(S){if(S)m.fire(new l.ErrorEvent(S));else{var N={dataType:"source",sourceDataType:"metadata"};m._collectResourceTiming&&m._resourceTiming&&m._resourceTiming.length>0&&(N.resourceTiming=m._resourceTiming,m._resourceTiming=[]),m.fire(new l.Event("data",N))}})},_.prototype.onAdd=function(m){this.map=m,this.load()},_.prototype.setData=function(m){var S=this;return this._data=m,this.fire(new l.Event("dataloading",{dataType:"source"})),this._updateWorkerData(function(N){if(N)S.fire(new l.ErrorEvent(N));else{var X={dataType:"source",sourceDataType:"content"};S._collectResourceTiming&&S._resourceTiming&&S._resourceTiming.length>0&&(X.resourceTiming=S._resourceTiming,S._resourceTiming=[]),S.fire(new l.Event("data",X))}}),this},_.prototype.getClusterExpansionZoom=function(m,S){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:m,source:this.id},S),this},_.prototype.getClusterChildren=function(m,S){return this.actor.send("geojson.getClusterChildren",{clusterId:m,source:this.id},S),this},_.prototype.getClusterLeaves=function(m,S,N,X){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:m,limit:S,offset:N},X),this},_.prototype._updateWorkerData=function(m){var S=this;this._loaded=!1;var N=l.extend({},this.workerOptions),X=this._data;typeof X=="string"?(N.request=this.map._requestManager.transformRequest(l.browser.resolveURL(X),l.ResourceType.Source),N.request.collectResourceTiming=this._collectResourceTiming):N.data=JSON.stringify(X),this.actor.send(this.type+".loadData",N,function(ee,Ae){S._removed||Ae&&Ae.abandoned||(S._loaded=!0,Ae&&Ae.resourceTiming&&Ae.resourceTiming[S.id]&&(S._resourceTiming=Ae.resourceTiming[S.id].slice(0)),S.actor.send(S.type+".coalesce",{source:N.source},null),m(ee))})},_.prototype.loaded=function(){return this._loaded},_.prototype.loadTile=function(m,S){var N=this,X=m.actor?"reloadTile":"loadTile";m.actor=this.actor,m.request=this.actor.send(X,{type:this.type,uid:m.uid,tileID:m.tileID,zoom:m.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:l.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId},function(ee,Ae){return delete m.request,m.unloadVectorData(),m.aborted?S(null):ee?S(ee):(m.loadVectorData(Ae,N.map.painter,X==="reloadTile"),S(null))})},_.prototype.abortTile=function(m){m.request&&(m.request.cancel(),delete m.request),m.aborted=!0},_.prototype.unloadTile=function(m){m.unloadVectorData(),this.actor.send("removeTile",{uid:m.uid,type:this.type,source:this.id})},_.prototype.onRemove=function(){this._removed=!0,this.actor.send("removeSource",{type:this.type,source:this.id})},_.prototype.serialize=function(){return l.extend({},this._options,{type:this.type,data:this._data})},_.prototype.hasTransition=function(){return!1},_}(l.Evented),Ne=l.createLayout([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]),st=function(d){function _(m,S,N,X){d.call(this),this.id=m,this.dispatcher=N,this.coordinates=S.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(X),this.options=S}return d&&(_.__proto__=d),(_.prototype=Object.create(d&&d.prototype)).constructor=_,_.prototype.load=function(m,S){var N=this;this._loaded=!1,this.fire(new l.Event("dataloading",{dataType:"source"})),this.url=this.options.url,l.getImage(this.map._requestManager.transformRequest(this.url,l.ResourceType.Image),function(X,ee){N._loaded=!0,X?N.fire(new l.ErrorEvent(X)):ee&&(N.image=ee,m&&(N.coordinates=m),S&&S(),N._finishLoading())})},_.prototype.loaded=function(){return this._loaded},_.prototype.updateImage=function(m){var S=this;return this.image&&m.url?(this.options.url=m.url,this.load(m.coordinates,function(){S.texture=null}),this):this},_.prototype._finishLoading=function(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new l.Event("data",{dataType:"source",sourceDataType:"metadata"})))},_.prototype.onAdd=function(m){this.map=m,this.load()},_.prototype.setCoordinates=function(m){var S=this;this.coordinates=m;var N=m.map(l.MercatorCoordinate.fromLngLat);this.tileID=function(ee){for(var Ae=1/0,Ze=1/0,nt=-1/0,Ct=-1/0,Tt=0,Pt=ee;Tt<Pt.length;Tt+=1){var tr=Pt[Tt];Ae=Math.min(Ae,tr.x),Ze=Math.min(Ze,tr.y),nt=Math.max(nt,tr.x),Ct=Math.max(Ct,tr.y)}var or=Math.max(nt-Ae,Ct-Ze),gr=Math.max(0,Math.floor(-Math.log(or)/Math.LN2)),Yt=Math.pow(2,gr);return new l.CanonicalTileID(gr,Math.floor((Ae+nt)/2*Yt),Math.floor((Ze+Ct)/2*Yt))}(N),this.minzoom=this.maxzoom=this.tileID.z;var X=N.map(function(ee){return S.tileID.getTilePoint(ee)._round()});return this._boundsArray=new l.StructArrayLayout4i8,this._boundsArray.emplaceBack(X[0].x,X[0].y,0,0),this._boundsArray.emplaceBack(X[1].x,X[1].y,l.EXTENT,0),this._boundsArray.emplaceBack(X[3].x,X[3].y,0,l.EXTENT),this._boundsArray.emplaceBack(X[2].x,X[2].y,l.EXTENT,l.EXTENT),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new l.Event("data",{dataType:"source",sourceDataType:"content"})),this},_.prototype.prepare=function(){if(Object.keys(this.tiles).length!==0&&this.image){var m=this.map.painter.context,S=m.gl;for(var N in this.boundsBuffer||(this.boundsBuffer=m.createVertexBuffer(this._boundsArray,Ne.members)),this.boundsSegments||(this.boundsSegments=l.SegmentVector.simpleSegment(0,0,4,2)),this.texture||(this.texture=new l.Texture(m,this.image,S.RGBA),this.texture.bind(S.LINEAR,S.CLAMP_TO_EDGE)),this.tiles){var X=this.tiles[N];X.state!=="loaded"&&(X.state="loaded",X.texture=this.texture)}}},_.prototype.loadTile=function(m,S){this.tileID&&this.tileID.equals(m.tileID.canonical)?(this.tiles[String(m.tileID.wrap)]=m,m.buckets={},S(null)):(m.state="errored",S(null))},_.prototype.serialize=function(){return{type:"image",url:this.options.url,coordinates:this.coordinates}},_.prototype.hasTransition=function(){return!1},_}(l.Evented),Fe=function(d){function _(m,S,N,X){d.call(this,m,S,N,X),this.roundZoom=!0,this.type="video",this.options=S}return d&&(_.__proto__=d),(_.prototype=Object.create(d&&d.prototype)).constructor=_,_.prototype.load=function(){var m=this;this._loaded=!1;var S=this.options;this.urls=[];for(var N=0,X=S.urls;N<X.length;N+=1)this.urls.push(this.map._requestManager.transformRequest(X[N],l.ResourceType.Source).url);l.getVideo(this.urls,function(ee,Ae){m._loaded=!0,ee?m.fire(new l.ErrorEvent(ee)):Ae&&(m.video=Ae,m.video.loop=!0,m.video.addEventListener("playing",function(){m.map.triggerRepaint()}),m.map&&m.video.play(),m._finishLoading())})},_.prototype.pause=function(){this.video&&this.video.pause()},_.prototype.play=function(){this.video&&this.video.play()},_.prototype.seek=function(m){if(this.video){var S=this.video.seekable;m<S.start(0)||m>S.end(0)?this.fire(new l.ErrorEvent(new l.ValidationError("sources."+this.id,null,"Playback for this video can be set only between the "+S.start(0)+" and "+S.end(0)+"-second mark."))):this.video.currentTime=m}},_.prototype.getVideo=function(){return this.video},_.prototype.onAdd=function(m){this.map||(this.map=m,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))},_.prototype.prepare=function(){if(!(Object.keys(this.tiles).length===0||this.video.readyState<2)){var m=this.map.painter.context,S=m.gl;for(var N in this.boundsBuffer||(this.boundsBuffer=m.createVertexBuffer(this._boundsArray,Ne.members)),this.boundsSegments||(this.boundsSegments=l.SegmentVector.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(S.LINEAR,S.CLAMP_TO_EDGE),S.texSubImage2D(S.TEXTURE_2D,0,0,0,S.RGBA,S.UNSIGNED_BYTE,this.video)):(this.texture=new l.Texture(m,this.video,S.RGBA),this.texture.bind(S.LINEAR,S.CLAMP_TO_EDGE)),this.tiles){var X=this.tiles[N];X.state!=="loaded"&&(X.state="loaded",X.texture=this.texture)}}},_.prototype.serialize=function(){return{type:"video",urls:this.urls,coordinates:this.coordinates}},_.prototype.hasTransition=function(){return this.video&&!this.video.paused},_}(st),tt=function(d){function _(m,S,N,X){d.call(this,m,S,N,X),S.coordinates?Array.isArray(S.coordinates)&&S.coordinates.length===4&&!S.coordinates.some(function(ee){return!Array.isArray(ee)||ee.length!==2||ee.some(function(Ae){return typeof Ae!="number"})})||this.fire(new l.ErrorEvent(new l.ValidationError("sources."+m,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new l.ErrorEvent(new l.ValidationError("sources."+m,null,'missing required property "coordinates"'))),S.animate&&typeof S.animate!="boolean"&&this.fire(new l.ErrorEvent(new l.ValidationError("sources."+m,null,'optional "animate" property must be a boolean value'))),S.canvas?typeof S.canvas=="string"||S.canvas instanceof l.window.HTMLCanvasElement||this.fire(new l.ErrorEvent(new l.ValidationError("sources."+m,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new l.ErrorEvent(new l.ValidationError("sources."+m,null,'missing required property "canvas"'))),this.options=S,this.animate=S.animate===void 0||S.animate}return d&&(_.__proto__=d),(_.prototype=Object.create(d&&d.prototype)).constructor=_,_.prototype.load=function(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof l.window.HTMLCanvasElement?this.options.canvas:l.window.document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new l.ErrorEvent(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())},_.prototype.getCanvas=function(){return this.canvas},_.prototype.onAdd=function(m){this.map=m,this.load(),this.canvas&&this.animate&&this.play()},_.prototype.onRemove=function(){this.pause()},_.prototype.prepare=function(){var m=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,m=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,m=!0),!this._hasInvalidDimensions()&&Object.keys(this.tiles).length!==0){var S=this.map.painter.context,N=S.gl;for(var X in this.boundsBuffer||(this.boundsBuffer=S.createVertexBuffer(this._boundsArray,Ne.members)),this.boundsSegments||(this.boundsSegments=l.SegmentVector.simpleSegment(0,0,4,2)),this.texture?(m||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new l.Texture(S,this.canvas,N.RGBA,{premultiply:!0}),this.tiles){var ee=this.tiles[X];ee.state!=="loaded"&&(ee.state="loaded",ee.texture=this.texture)}}},_.prototype.serialize=function(){return{type:"canvas",coordinates:this.coordinates}},_.prototype.hasTransition=function(){return this._playing},_.prototype._hasInvalidDimensions=function(){for(var m=0,S=[this.canvas.width,this.canvas.height];m<S.length;m+=1){var N=S[m];if(isNaN(N)||N<=0)return!0}return!1},_}(st),Wt={vector:oe,raster:he,"raster-dem":ye,geojson:se,video:Fe,image:st,canvas:tt};function Pr(d,_){var m=l.identity([]);return l.translate(m,m,[1,1,0]),l.scale(m,m,[.5*d.width,.5*d.height,1]),l.multiply(m,m,d.calculatePosMatrix(_.toUnwrapped()))}function Qt(d,_,m,S,N,X){var ee=function(gr,Yt,br){if(gr)for(var Lr=0,pn=gr;Lr<pn.length;Lr+=1){var zn=Yt[pn[Lr]];if(zn&&zn.source===br&&zn.type==="fill-extrusion")return!0}else for(var Nn in Yt){var Xn=Yt[Nn];if(Xn.source===br&&Xn.type==="fill-extrusion")return!0}return!1}(N&&N.layers,_,d.id),Ae=X.maxPitchScaleFactor(),Ze=d.tilesIn(S,Ae,ee);Ze.sort(xr);for(var nt=[],Ct=0,Tt=Ze;Ct<Tt.length;Ct+=1){var Pt=Tt[Ct];nt.push({wrappedTileID:Pt.tileID.wrapped().key,queryResults:Pt.tile.queryRenderedFeatures(_,m,d._state,Pt.queryGeometry,Pt.cameraQueryGeometry,Pt.scale,N,X,Ae,Pr(d.transform,Pt.tileID))})}var tr=function(gr){for(var Yt={},br={},Lr=0,pn=gr;Lr<pn.length;Lr+=1){var zn=pn[Lr],Nn=zn.queryResults,Xn=zn.wrappedTileID,yi=br[Xn]=br[Xn]||{};for(var Li in Nn)for(var Ei=Nn[Li],Vi=yi[Li]=yi[Li]||{},Ea=Yt[Li]=Yt[Li]||[],Qa=0,Ga=Ei;Qa<Ga.length;Qa+=1){var io=Ga[Qa];Vi[io.featureIndex]||(Vi[io.featureIndex]=!0,Ea.push(io))}}return Yt}(nt);for(var or in tr)tr[or].forEach(function(gr){var Yt=gr.feature,br=d.getFeatureState(Yt.layer["source-layer"],Yt.id);Yt.source=Yt.layer.source,Yt.layer["source-layer"]&&(Yt.sourceLayer=Yt.layer["source-layer"]),Yt.state=br});return tr}function xr(d,_){var m=d.tileID,S=_.tileID;return m.overscaledZ-S.overscaledZ||m.canonical.y-S.canonical.y||m.wrap-S.wrap||m.canonical.x-S.canonical.x}var $r=function(d,_){this.max=d,this.onRemove=_,this.reset()};$r.prototype.reset=function(){for(var d in this.data)for(var _=0,m=this.data[d];_<m.length;_+=1){var S=m[_];S.timeout&&clearTimeout(S.timeout),this.onRemove(S.value)}return this.data={},this.order=[],this},$r.prototype.add=function(d,_,m){var S=this,N=d.wrapped().key;this.data[N]===void 0&&(this.data[N]=[]);var X={value:_,timeout:void 0};if(m!==void 0&&(X.timeout=setTimeout(function(){S.remove(d,X)},m)),this.data[N].push(X),this.order.push(N),this.order.length>this.max){var ee=this._getAndRemoveByKey(this.order[0]);ee&&this.onRemove(ee)}return this},$r.prototype.has=function(d){return d.wrapped().key in this.data},$r.prototype.getAndRemove=function(d){return this.has(d)?this._getAndRemoveByKey(d.wrapped().key):null},$r.prototype._getAndRemoveByKey=function(d){var _=this.data[d].shift();return _.timeout&&clearTimeout(_.timeout),this.data[d].length===0&&delete this.data[d],this.order.splice(this.order.indexOf(d),1),_.value},$r.prototype.getByKey=function(d){var _=this.data[d];return _?_[0].value:null},$r.prototype.get=function(d){return this.has(d)?this.data[d.wrapped().key][0].value:null},$r.prototype.remove=function(d,_){if(!this.has(d))return this;var m=d.wrapped().key,S=_===void 0?0:this.data[m].indexOf(_),N=this.data[m][S];return this.data[m].splice(S,1),N.timeout&&clearTimeout(N.timeout),this.data[m].length===0&&delete this.data[m],this.onRemove(N.value),this.order.splice(this.order.indexOf(m),1),this},$r.prototype.setMaxSize=function(d){for(this.max=d;this.order.length>this.max;){var _=this._getAndRemoveByKey(this.order[0]);_&&this.onRemove(_)}return this},$r.prototype.filter=function(d){var _=[];for(var m in this.data)for(var S=0,N=this.data[m];S<N.length;S+=1){var X=N[S];d(X.value)||_.push(X)}for(var ee=0,Ae=_;ee<Ae.length;ee+=1){var Ze=Ae[ee];this.remove(Ze.value.tileID,Ze)}};var Cr=function(d,_,m){this.context=d;var S=d.gl;this.buffer=S.createBuffer(),this.dynamicDraw=Boolean(m),this.context.unbindVAO(),d.bindElementBuffer.set(this.buffer),S.bufferData(S.ELEMENT_ARRAY_BUFFER,_.arrayBuffer,this.dynamicDraw?S.DYNAMIC_DRAW:S.STATIC_DRAW),this.dynamicDraw||delete _.arrayBuffer};Cr.prototype.bind=function(){this.context.bindElementBuffer.set(this.buffer)},Cr.prototype.updateData=function(d){var _=this.context.gl;this.context.unbindVAO(),this.bind(),_.bufferSubData(_.ELEMENT_ARRAY_BUFFER,0,d.arrayBuffer)},Cr.prototype.destroy=function(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)};var sn={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"},ot=function(d,_,m,S){this.length=_.length,this.attributes=m,this.itemSize=_.bytesPerElement,this.dynamicDraw=S,this.context=d;var N=d.gl;this.buffer=N.createBuffer(),d.bindVertexBuffer.set(this.buffer),N.bufferData(N.ARRAY_BUFFER,_.arrayBuffer,this.dynamicDraw?N.DYNAMIC_DRAW:N.STATIC_DRAW),this.dynamicDraw||delete _.arrayBuffer};ot.prototype.bind=function(){this.context.bindVertexBuffer.set(this.buffer)},ot.prototype.updateData=function(d){var _=this.context.gl;this.bind(),_.bufferSubData(_.ARRAY_BUFFER,0,d.arrayBuffer)},ot.prototype.enableAttributes=function(d,_){for(var m=0;m<this.attributes.length;m++){var S=_.attributes[this.attributes[m].name];S!==void 0&&d.enableVertexAttribArray(S)}},ot.prototype.setVertexAttribPointers=function(d,_,m){for(var S=0;S<this.attributes.length;S++){var N=this.attributes[S],X=_.attributes[N.name];X!==void 0&&d.vertexAttribPointer(X,N.components,d[sn[N.type]],!1,this.itemSize,N.offset+this.itemSize*(m||0))}},ot.prototype.destroy=function(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)};var _r=function(d){this.gl=d.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1};_r.prototype.get=function(){return this.current},_r.prototype.set=function(d){},_r.prototype.getDefault=function(){return this.default},_r.prototype.setDefault=function(){this.set(this.default)};var cr=function(d){function _(){d.apply(this,arguments)}return d&&(_.__proto__=d),(_.prototype=Object.create(d&&d.prototype)).constructor=_,_.prototype.getDefault=function(){return l.Color.transparent},_.prototype.set=function(m){var S=this.current;(m.r!==S.r||m.g!==S.g||m.b!==S.b||m.a!==S.a||this.dirty)&&(this.gl.clearColor(m.r,m.g,m.b,m.a),this.current=m,this.dirty=!1)},_}(_r),Vr=function(d){function _(){d.apply(this,arguments)}return d&&(_.__proto__=d),(_.prototype=Object.create(d&&d.prototype)).constructor=_,_.prototype.getDefault=function(){return 1},_.prototype.set=function(m){(m!==this.current||this.dirty)&&(this.gl.clearDepth(m),this.current=m,this.dirty=!1)},_}(_r),Qn=function(d){function _(){d.apply(this,arguments)}return d&&(_.__proto__=d),(_.prototype=Object.create(d&&d.prototype)).constructor=_,_.prototype.getDefault=function(){return 0},_.prototype.set=function(m){(m!==this.current||this.dirty)&&(this.gl.clearStencil(m),this.current=m,this.dirty=!1)},_}(_r),mn=function(d){function _(){d.apply(this,arguments)}return d&&(_.__proto__=d),(_.prototype=Object.create(d&&d.prototype)).constructor=_,_.prototype.getDefault=function(){return[!0,!0,!0,!0]},_.prototype.set=function(m){var S=this.current;(m[0]!==S[0]||m[1]!==S[1]||m[2]!==S[2]||m[3]!==S[3]||this.dirty)&&(this.gl.colorMask(m[0],m[1],m[2],m[3]),this.current=m,this.dirty=!1)},_}(_r),_n=function(d){function _(){d.apply(this,arguments)}return d&&(_.__proto__=d),(_.prototype=Object.create(d&&d.prototype)).constructor=_,_.prototype.getDefault=function(){return!0},_.prototype.set=function(m){(m!==this.current||this.dirty)&&(this.gl.depthMask(m),this.current=m,this.dirty=!1)},_}(_r),Yr=function(d){function _(){d.apply(this,arguments)}return d&&(_.__proto__=d),(_.prototype=Object.create(d&&d.prototype)).constructor=_,_.prototype.getDefault=function(){return 255},_.prototype.set=function(m){(m!==this.current||this.dirty)&&(this.gl.stencilMask(m),this.current=m,this.dirty=!1)},_}(_r),Fr=function(d){function _(){d.apply(this,arguments)}return d&&(_.__proto__=d),(_.prototype=Object.create(d&&d.prototype)).constructor=_,_.prototype.getDefault=function(){return{func:this.gl.ALWAYS,ref:0,mask:255}},_.prototype.set=function(m){var S=this.current;(m.func!==S.func||m.ref!==S.ref||m.mask!==S.mask||this.dirty)&&(this.gl.stencilFunc(m.func,m.ref,m.mask),this.current=m,this.dirty=!1)},_}(_r),kr=function(d){function _(){d.apply(this,arguments)}return d&&(_.__proto__=d),(_.prototype=Object.create(d&&d.prototype)).constructor=_,_.prototype.getDefault=function(){var m=this.gl;return[m.KEEP,m.KEEP,m.KEEP]},_.prototype.set=function(m){var S=this.current;(m[0]!==S[0]||m[1]!==S[1]||m[2]!==S[2]||this.dirty)&&(this.gl.stencilOp(m[0],m[1],m[2]),this.current=m,this.dirty=!1)},_}(_r),ft=function(d){function _(){d.apply(this,arguments)}return d&&(_.__proto__=d),(_.prototype=Object.create(d&&d.prototype)).constructor=_,_.prototype.getDefault=function(){return!1},_.prototype.set=function(m){if(m!==this.current||this.dirty){var S=this.gl;m?S.enable(S.STENCIL_TEST):S.disable(S.STENCIL_TEST),this.current=m,this.dirty=!1}},_}(_r),me=function(d){function _(){d.apply(this,arguments)}return d&&(_.__proto__=d),(_.prototype=Object.create(d&&d.prototype)).constructor=_,_.prototype.getDefault=function(){return[0,1]},_.prototype.set=function(m){var S=this.current;(m[0]!==S[0]||m[1]!==S[1]||this.dirty)&&(this.gl.depthRange(m[0],m[1]),this.current=m,this.dirty=!1)},_}(_r),ne=function(d){function _(){d.apply(this,arguments)}return d&&(_.__proto__=d),(_.prototype=Object.create(d&&d.prototype)).constructor=_,_.prototype.getDefault=function(){return!1},_.prototype.set=function(m){if(m!==this.current||this.dirty){var S=this.gl;m?S.enable(S.DEPTH_TEST):S.disable(S.DEPTH_TEST),this.current=m,this.dirty=!1}},_}(_r),fe=function(d){function _(){d.apply(this,arguments)}return d&&(_.__proto__=d),(_.prototype=Object.create(d&&d.prototype)).constructor=_,_.prototype.getDefault=function(){return this.gl.LESS},_.prototype.set=function(m){(m!==this.current||this.dirty)&&(this.gl.depthFunc(m),this.current=m,this.dirty=!1)},_}(_r),Q=function(d){function _(){d.apply(this,arguments)}return d&&(_.__proto__=d),(_.prototype=Object.create(d&&d.prototype)).constructor=_,_.prototype.getDefault=function(){return!1},_.prototype.set=function(m){if(m!==this.current||this.dirty){var S=this.gl;m?S.enable(S.BLEND):S.disable(S.BLEND),this.current=m,this.dirty=!1}},_}(_r),De=function(d){function _(){d.apply(this,arguments)}return d&&(_.__proto__=d),(_.prototype=Object.create(d&&d.prototype)).constructor=_,_.prototype.getDefault=function(){var m=this.gl;return[m.ONE,m.ZERO]},_.prototype.set=function(m){var S=this.current;(m[0]!==S[0]||m[1]!==S[1]||this.dirty)&&(this.gl.blendFunc(m[0],m[1]),this.current=m,this.dirty=!1)},_}(_r),dt=function(d){function _(){d.apply(this,arguments)}return d&&(_.__proto__=d),(_.prototype=Object.create(d&&d.prototype)).constructor=_,_.prototype.getDefault=function(){return l.Color.transparent},_.prototype.set=function(m){var S=this.current;(m.r!==S.r||m.g!==S.g||m.b!==S.b||m.a!==S.a||this.dirty)&&(this.gl.blendColor(m.r,m.g,m.b,m.a),this.current=m,this.dirty=!1)},_}(_r),Jt=function(d){function _(){d.apply(this,arguments)}return d&&(_.__proto__=d),(_.prototype=Object.create(d&&d.prototype)).constructor=_,_.prototype.getDefault=function(){return this.gl.FUNC_ADD},_.prototype.set=function(m){(m!==this.current||this.dirty)&&(this.gl.blendEquation(m),this.current=m,this.dirty=!1)},_}(_r),it=function(d){function _(){d.apply(this,arguments)}return d&&(_.__proto__=d),(_.prototype=Object.create(d&&d.prototype)).constructor=_,_.prototype.getDefault=function(){return!1},_.prototype.set=function(m){if(m!==this.current||this.dirty){var S=this.gl;m?S.enable(S.CULL_FACE):S.disable(S.CULL_FACE),this.current=m,this.dirty=!1}},_}(_r),lt=function(d){function _(){d.apply(this,arguments)}return d&&(_.__proto__=d),(_.prototype=Object.create(d&&d.prototype)).constructor=_,_.prototype.getDefault=function(){return this.gl.BACK},_.prototype.set=function(m){(m!==this.current||this.dirty)&&(this.gl.cullFace(m),this.current=m,this.dirty=!1)},_}(_r),qt=function(d){function _(){d.apply(this,arguments)}return d&&(_.__proto__=d),(_.prototype=Object.create(d&&d.prototype)).constructor=_,_.prototype.getDefault=function(){return this.gl.CCW},_.prototype.set=function(m){(m!==this.current||this.dirty)&&(this.gl.frontFace(m),this.current=m,this.dirty=!1)},_}(_r),pr=function(d){function _(){d.apply(this,arguments)}return d&&(_.__proto__=d),(_.prototype=Object.create(d&&d.prototype)).constructor=_,_.prototype.getDefault=function(){return null},_.prototype.set=function(m){(m!==this.current||this.dirty)&&(this.gl.useProgram(m),this.current=m,this.dirty=!1)},_}(_r),Hr=function(d){function _(){d.apply(this,arguments)}return d&&(_.__proto__=d),(_.prototype=Object.create(d&&d.prototype)).constructor=_,_.prototype.getDefault=function(){return this.gl.TEXTURE0},_.prototype.set=function(m){(m!==this.current||this.dirty)&&(this.gl.activeTexture(m),this.current=m,this.dirty=!1)},_}(_r),Xr=function(d){function _(){d.apply(this,arguments)}return d&&(_.__proto__=d),(_.prototype=Object.create(d&&d.prototype)).constructor=_,_.prototype.getDefault=function(){var m=this.gl;return[0,0,m.drawingBufferWidth,m.drawingBufferHeight]},_.prototype.set=function(m){var S=this.current;(m[0]!==S[0]||m[1]!==S[1]||m[2]!==S[2]||m[3]!==S[3]||this.dirty)&&(this.gl.viewport(m[0],m[1],m[2],m[3]),this.current=m,this.dirty=!1)},_}(_r),ce=function(d){function _(){d.apply(this,arguments)}return d&&(_.__proto__=d),(_.prototype=Object.create(d&&d.prototype)).constructor=_,_.prototype.getDefault=function(){return null},_.prototype.set=function(m){if(m!==this.current||this.dirty){var S=this.gl;S.bindFramebuffer(S.FRAMEBUFFER,m),this.current=m,this.dirty=!1}},_}(_r),xt=function(d){function _(){d.apply(this,arguments)}return d&&(_.__proto__=d),(_.prototype=Object.create(d&&d.prototype)).constructor=_,_.prototype.getDefault=function(){return null},_.prototype.set=function(m){if(m!==this.current||this.dirty){var S=this.gl;S.bindRenderbuffer(S.RENDERBUFFER,m),this.current=m,this.dirty=!1}},_}(_r),Gt=function(d){function _(){d.apply(this,arguments)}return d&&(_.__proto__=d),(_.prototype=Object.create(d&&d.prototype)).constructor=_,_.prototype.getDefault=function(){return null},_.prototype.set=function(m){if(m!==this.current||this.dirty){var S=this.gl;S.bindTexture(S.TEXTURE_2D,m),this.current=m,this.dirty=!1}},_}(_r),Ir=function(d){function _(){d.apply(this,arguments)}return d&&(_.__proto__=d),(_.prototype=Object.create(d&&d.prototype)).constructor=_,_.prototype.getDefault=function(){return null},_.prototype.set=function(m){if(m!==this.current||this.dirty){var S=this.gl;S.bindBuffer(S.ARRAY_BUFFER,m),this.current=m,this.dirty=!1}},_}(_r),nn=function(d){function _(){d.apply(this,arguments)}return d&&(_.__proto__=d),(_.prototype=Object.create(d&&d.prototype)).constructor=_,_.prototype.getDefault=function(){return null},_.prototype.set=function(m){var S=this.gl;S.bindBuffer(S.ELEMENT_ARRAY_BUFFER,m),this.current=m,this.dirty=!1},_}(_r),zi=function(d){function _(m){d.call(this,m),this.vao=m.extVertexArrayObject}return d&&(_.__proto__=d),(_.prototype=Object.create(d&&d.prototype)).constructor=_,_.prototype.getDefault=function(){return null},_.prototype.set=function(m){this.vao&&(m!==this.current||this.dirty)&&(this.vao.bindVertexArrayOES(m),this.current=m,this.dirty=!1)},_}(_r),Ui=function(d){function _(){d.apply(this,arguments)}return d&&(_.__proto__=d),(_.prototype=Object.create(d&&d.prototype)).constructor=_,_.prototype.getDefault=function(){return 4},_.prototype.set=function(m){if(m!==this.current||this.dirty){var S=this.gl;S.pixelStorei(S.UNPACK_ALIGNMENT,m),this.current=m,this.dirty=!1}},_}(_r),Pi=function(d){function _(){d.apply(this,arguments)}return d&&(_.__proto__=d),(_.prototype=Object.create(d&&d.prototype)).constructor=_,_.prototype.getDefault=function(){return!1},_.prototype.set=function(m){if(m!==this.current||this.dirty){var S=this.gl;S.pixelStorei(S.UNPACK_PREMULTIPLY_ALPHA_WEBGL,m),this.current=m,this.dirty=!1}},_}(_r),ka=function(d){function _(){d.apply(this,arguments)}return d&&(_.__proto__=d),(_.prototype=Object.create(d&&d.prototype)).constructor=_,_.prototype.getDefault=function(){return!1},_.prototype.set=function(m){if(m!==this.current||this.dirty){var S=this.gl;S.pixelStorei(S.UNPACK_FLIP_Y_WEBGL,m),this.current=m,this.dirty=!1}},_}(_r),Ti=function(d){function _(m,S){d.call(this,m),this.context=m,this.parent=S}return d&&(_.__proto__=d),(_.prototype=Object.create(d&&d.prototype)).constructor=_,_.prototype.getDefault=function(){return null},_}(_r),Ge=function(d){function _(){d.apply(this,arguments)}return d&&(_.__proto__=d),(_.prototype=Object.create(d&&d.prototype)).constructor=_,_.prototype.setDirty=function(){this.dirty=!0},_.prototype.set=function(m){if(m!==this.current||this.dirty){this.context.bindFramebuffer.set(this.parent);var S=this.gl;S.framebufferTexture2D(S.FRAMEBUFFER,S.COLOR_ATTACHMENT0,S.TEXTURE_2D,m,0),this.current=m,this.dirty=!1}},_}(Ti),et=function(d){function _(){d.apply(this,arguments)}return d&&(_.__proto__=d),(_.prototype=Object.create(d&&d.prototype)).constructor=_,_.prototype.set=function(m){if(m!==this.current||this.dirty){this.context.bindFramebuffer.set(this.parent);var S=this.gl;S.framebufferRenderbuffer(S.FRAMEBUFFER,S.DEPTH_ATTACHMENT,S.RENDERBUFFER,m),this.current=m,this.dirty=!1}},_}(Ti),gt=function(d,_,m,S){this.context=d,this.width=_,this.height=m;var N=this.framebuffer=d.gl.createFramebuffer();this.colorAttachment=new Ge(d,N),S&&(this.depthAttachment=new et(d,N))};gt.prototype.destroy=function(){var d=this.context.gl,_=this.colorAttachment.get();if(_&&d.deleteTexture(_),this.depthAttachment){var m=this.depthAttachment.get();m&&d.deleteRenderbuffer(m)}d.deleteFramebuffer(this.framebuffer)};var ht=function(d,_,m){this.func=d,this.mask=_,this.range=m};ht.ReadOnly=!1,ht.ReadWrite=!0,ht.disabled=new ht(519,ht.ReadOnly,[0,1]);var Et=function(d,_,m,S,N,X){this.test=d,this.ref=_,this.mask=m,this.fail=S,this.depthFail=N,this.pass=X};Et.disabled=new Et({func:519,mask:0},0,0,7680,7680,7680);var Zt=function(d,_,m){this.blendFunction=d,this.blendColor=_,this.mask=m};Zt.disabled=new Zt(Zt.Replace=[1,0],l.Color.transparent,[!1,!1,!1,!1]),Zt.unblended=new Zt(Zt.Replace,l.Color.transparent,[!0,!0,!0,!0]),Zt.alphaBlended=new Zt([1,771],l.Color.transparent,[!0,!0,!0,!0]);var sr=function(d,_,m){this.enable=d,this.mode=_,this.frontFace=m};sr.disabled=new sr(!1,1029,2305),sr.backCCW=new sr(!0,1029,2305);var bt=function(d){this.gl=d,this.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object"),this.clearColor=new cr(this),this.clearDepth=new Vr(this),this.clearStencil=new Qn(this),this.colorMask=new mn(this),this.depthMask=new _n(this),this.stencilMask=new Yr(this),this.stencilFunc=new Fr(this),this.stencilOp=new kr(this),this.stencilTest=new ft(this),this.depthRange=new me(this),this.depthTest=new ne(this),this.depthFunc=new fe(this),this.blend=new Q(this),this.blendFunc=new De(this),this.blendColor=new dt(this),this.blendEquation=new Jt(this),this.cullFace=new it(this),this.cullFaceSide=new lt(this),this.frontFace=new qt(this),this.program=new pr(this),this.activeTexture=new Hr(this),this.viewport=new Xr(this),this.bindFramebuffer=new ce(this),this.bindRenderbuffer=new xt(this),this.bindTexture=new Gt(this),this.bindVertexBuffer=new Ir(this),this.bindElementBuffer=new nn(this),this.bindVertexArrayOES=this.extVertexArrayObject&&new zi(this),this.pixelStoreUnpack=new Ui(this),this.pixelStoreUnpackPremultiplyAlpha=new Pi(this),this.pixelStoreUnpackFlipY=new ka(this),this.extTextureFilterAnisotropic=d.getExtension("EXT_texture_filter_anisotropic")||d.getExtension("MOZ_EXT_texture_filter_anisotropic")||d.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=d.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.extTextureHalfFloat=d.getExtension("OES_texture_half_float"),this.extTextureHalfFloat&&(d.getExtension("OES_texture_half_float_linear"),this.extRenderToTextureHalfFloat=d.getExtension("EXT_color_buffer_half_float")),this.extTimerQuery=d.getExtension("EXT_disjoint_timer_query"),this.maxTextureSize=d.getParameter(d.MAX_TEXTURE_SIZE)};bt.prototype.setDefault=function(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()},bt.prototype.setDirty=function(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.extVertexArrayObject&&(this.bindVertexArrayOES.dirty=!0),this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0},bt.prototype.createIndexBuffer=function(d,_){return new Cr(this,d,_)},bt.prototype.createVertexBuffer=function(d,_,m){return new ot(this,d,_,m)},bt.prototype.createRenderbuffer=function(d,_,m){var S=this.gl,N=S.createRenderbuffer();return this.bindRenderbuffer.set(N),S.renderbufferStorage(S.RENDERBUFFER,d,_,m),this.bindRenderbuffer.set(null),N},bt.prototype.createFramebuffer=function(d,_,m){return new gt(this,d,_,m)},bt.prototype.clear=function(d){var _=d.color,m=d.depth,S=this.gl,N=0;_&&(N|=S.COLOR_BUFFER_BIT,this.clearColor.set(_),this.colorMask.set([!0,!0,!0,!0])),m!==void 0&&(N|=S.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(m),this.depthMask.set(!0)),S.clear(N)},bt.prototype.setCullFace=function(d){d.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(d.mode),this.frontFace.set(d.frontFace))},bt.prototype.setDepthMode=function(d){d.func!==this.gl.ALWAYS||d.mask?(this.depthTest.set(!0),this.depthFunc.set(d.func),this.depthMask.set(d.mask),this.depthRange.set(d.range)):this.depthTest.set(!1)},bt.prototype.setStencilMode=function(d){d.test.func!==this.gl.ALWAYS||d.mask?(this.stencilTest.set(!0),this.stencilMask.set(d.mask),this.stencilOp.set([d.fail,d.depthFail,d.pass]),this.stencilFunc.set({func:d.test.func,ref:d.ref,mask:d.test.mask})):this.stencilTest.set(!1)},bt.prototype.setColorMode=function(d){l.deepEqual(d.blendFunction,Zt.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(d.blendFunction),this.blendColor.set(d.blendColor)),this.colorMask.set(d.mask)},bt.prototype.unbindVAO=function(){this.extVertexArrayObject&&this.bindVertexArrayOES.set(null)};var Ft=function(d){function _(m,S,N){var X=this;d.call(this),this.id=m,this.dispatcher=N,this.on("data",function(ee){ee.dataType==="source"&&ee.sourceDataType==="metadata"&&(X._sourceLoaded=!0),X._sourceLoaded&&!X._paused&&ee.dataType==="source"&&ee.sourceDataType==="content"&&(X.reload(),X.transform&&X.update(X.transform))}),this.on("error",function(){X._sourceErrored=!0}),this._source=function(ee,Ae,Ze,nt){var Ct=new Wt[Ae.type](ee,Ae,Ze,nt);if(Ct.id!==ee)throw new Error("Expected Source id to be "+ee+" instead of "+Ct.id);return l.bindAll(["load","abort","unload","serialize","prepare"],Ct),Ct}(m,S,N,this),this._tiles={},this._cache=new $r(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new l.SourceFeatureState}return d&&(_.__proto__=d),(_.prototype=Object.create(d&&d.prototype)).constructor=_,_.prototype.onAdd=function(m){this.map=m,this._maxTileCacheSize=m?m._maxTileCacheSize:null,this._source&&this._source.onAdd&&this._source.onAdd(m)},_.prototype.onRemove=function(m){this._source&&this._source.onRemove&&this._source.onRemove(m)},_.prototype.loaded=function(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;for(var m in this._tiles){var S=this._tiles[m];if(S.state!=="loaded"&&S.state!=="errored")return!1}return!0},_.prototype.getSource=function(){return this._source},_.prototype.pause=function(){this._paused=!0},_.prototype.resume=function(){if(this._paused){var m=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,m&&this.reload(),this.transform&&this.update(this.transform)}},_.prototype._loadTile=function(m,S){return this._source.loadTile(m,S)},_.prototype._unloadTile=function(m){if(this._source.unloadTile)return this._source.unloadTile(m,function(){})},_.prototype._abortTile=function(m){if(this._source.abortTile)return this._source.abortTile(m,function(){})},_.prototype.serialize=function(){return this._source.serialize()},_.prototype.prepare=function(m){for(var S in this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null),this._tiles){var N=this._tiles[S];N.upload(m),N.prepare(this.map.style.imageManager)}},_.prototype.getIds=function(){return l.values(this._tiles).map(function(m){return m.tileID}).sort(zr).map(function(m){return m.key})},_.prototype.getRenderableIds=function(m){var S=this,N=[];for(var X in this._tiles)this._isIdRenderable(X,m)&&N.push(this._tiles[X]);return m?N.sort(function(ee,Ae){var Ze=ee.tileID,nt=Ae.tileID,Ct=new l.Point(Ze.canonical.x,Ze.canonical.y)._rotate(S.transform.angle),Tt=new l.Point(nt.canonical.x,nt.canonical.y)._rotate(S.transform.angle);return Ze.overscaledZ-nt.overscaledZ||Tt.y-Ct.y||Tt.x-Ct.x}).map(function(ee){return ee.tileID.key}):N.map(function(ee){return ee.tileID}).sort(zr).map(function(ee){return ee.key})},_.prototype.hasRenderableParent=function(m){var S=this.findLoadedParent(m,0);return!!S&&this._isIdRenderable(S.tileID.key)},_.prototype._isIdRenderable=function(m,S){return this._tiles[m]&&this._tiles[m].hasData()&&!this._coveredTiles[m]&&(S||!this._tiles[m].holdingForFade())},_.prototype.reload=function(){if(this._paused)this._shouldReloadOnResume=!0;else for(var m in this._cache.reset(),this._tiles)this._tiles[m].state!=="errored"&&this._reloadTile(m,"reloading")},_.prototype._reloadTile=function(m,S){var N=this._tiles[m];N&&(N.state!=="loading"&&(N.state=S),this._loadTile(N,this._tileLoaded.bind(this,N,m,S)))},_.prototype._tileLoaded=function(m,S,N,X){if(X)return m.state="errored",void(X.status!==404?this._source.fire(new l.ErrorEvent(X,{tile:m})):this.update(this.transform));m.timeAdded=l.browser.now(),N==="expired"&&(m.refreshedUponExpiration=!0),this._setTileReloadTimer(S,m),this.getSource().type==="raster-dem"&&m.dem&&this._backfillDEM(m),this._state.initializeTileState(m,this.map?this.map.painter:null),this._source.fire(new l.Event("data",{dataType:"source",tile:m,coord:m.tileID}))},_.prototype._backfillDEM=function(m){for(var S=this.getRenderableIds(),N=0;N<S.length;N++){var X=S[N];if(m.neighboringTiles&&m.neighboringTiles[X]){var ee=this.getTileByID(X);Ae(m,ee),Ae(ee,m)}}function Ae(Ze,nt){Ze.needsHillshadePrepare=!0;var Ct=nt.tileID.canonical.x-Ze.tileID.canonical.x,Tt=nt.tileID.canonical.y-Ze.tileID.canonical.y,Pt=Math.pow(2,Ze.tileID.canonical.z),tr=nt.tileID.key;Ct===0&&Tt===0||Math.abs(Tt)>1||(Math.abs(Ct)>1&&(Math.abs(Ct+Pt)===1?Ct+=Pt:Math.abs(Ct-Pt)===1&&(Ct-=Pt)),nt.dem&&Ze.dem&&(Ze.dem.backfillBorder(nt.dem,Ct,Tt),Ze.neighboringTiles&&Ze.neighboringTiles[tr]&&(Ze.neighboringTiles[tr].backfilled=!0)))}},_.prototype.getTile=function(m){return this.getTileByID(m.key)},_.prototype.getTileByID=function(m){return this._tiles[m]},_.prototype._retainLoadedChildren=function(m,S,N,X){for(var ee in this._tiles){var Ae=this._tiles[ee];if(!(X[ee]||!Ae.hasData()||Ae.tileID.overscaledZ<=S||Ae.tileID.overscaledZ>N)){for(var Ze=Ae.tileID;Ae&&Ae.tileID.overscaledZ>S+1;){var nt=Ae.tileID.scaledTo(Ae.tileID.overscaledZ-1);(Ae=this._tiles[nt.key])&&Ae.hasData()&&(Ze=nt)}for(var Ct=Ze;Ct.overscaledZ>S;)if(m[(Ct=Ct.scaledTo(Ct.overscaledZ-1)).key]){X[Ze.key]=Ze;break}}}},_.prototype.findLoadedParent=function(m,S){if(m.key in this._loadedParentTiles){var N=this._loadedParentTiles[m.key];return N&&N.tileID.overscaledZ>=S?N:null}for(var X=m.overscaledZ-1;X>=S;X--){var ee=m.scaledTo(X),Ae=this._getLoadedTile(ee);if(Ae)return Ae}},_.prototype._getLoadedTile=function(m){var S=this._tiles[m.key];return S&&S.hasData()?S:this._cache.getByKey(m.wrapped().key)},_.prototype.updateCacheSize=function(m){var S=Math.ceil(m.width/this._source.tileSize)+1,N=Math.ceil(m.height/this._source.tileSize)+1,X=Math.floor(S*N*5),ee=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,X):X;this._cache.setMaxSize(ee)},_.prototype.handleWrapJump=function(m){var S=Math.round((m-(this._prevLng===void 0?m:this._prevLng))/360);if(this._prevLng=m,S){var N={};for(var X in this._tiles){var ee=this._tiles[X];ee.tileID=ee.tileID.unwrapTo(ee.tileID.wrap+S),N[ee.tileID.key]=ee}for(var Ae in this._tiles=N,this._timers)clearTimeout(this._timers[Ae]),delete this._timers[Ae];for(var Ze in this._tiles)this._setTileReloadTimer(Ze,this._tiles[Ze])}},_.prototype.update=function(m){var S=this;if(this.transform=m,this._sourceLoaded&&!this._paused){var N;this.updateCacheSize(m),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used?this._source.tileID?N=m.getVisibleUnwrappedCoordinates(this._source.tileID).map(function(yi){return new l.OverscaledTileID(yi.canonical.z,yi.wrap,yi.canonical.z,yi.canonical.x,yi.canonical.y)}):(N=m.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}),this._source.hasTile&&(N=N.filter(function(yi){return S._source.hasTile(yi)}))):N=[];var X=m.coveringZoomLevel(this._source),ee=Math.max(X-_.maxOverzooming,this._source.minzoom),Ae=Math.max(X+_.maxUnderzooming,this._source.minzoom),Ze=this._updateRetainedTiles(N,X);if(Jn(this._source.type)){for(var nt={},Ct={},Tt=0,Pt=Object.keys(Ze);Tt<Pt.length;Tt+=1){var tr=Pt[Tt],or=Ze[tr],gr=this._tiles[tr];if(gr&&!(gr.fadeEndTime&&gr.fadeEndTime<=l.browser.now())){var Yt=this.findLoadedParent(or,ee);Yt&&(this._addTile(Yt.tileID),nt[Yt.tileID.key]=Yt.tileID),Ct[tr]=or}}for(var br in this._retainLoadedChildren(Ct,X,Ae,Ze),nt)Ze[br]||(this._coveredTiles[br]=!0,Ze[br]=nt[br])}for(var Lr in Ze)this._tiles[Lr].clearFadeHold();for(var pn=0,zn=l.keysDifference(this._tiles,Ze);pn<zn.length;pn+=1){var Nn=zn[pn],Xn=this._tiles[Nn];Xn.hasSymbolBuckets&&!Xn.holdingForFade()?Xn.setHoldDuration(this.map._fadeDuration):Xn.hasSymbolBuckets&&!Xn.symbolFadeFinished()||this._removeTile(Nn)}this._updateLoadedParentTileCache()}},_.prototype.releaseSymbolFadeTiles=function(){for(var m in this._tiles)this._tiles[m].holdingForFade()&&this._removeTile(m)},_.prototype._updateRetainedTiles=function(m,S){for(var N={},X={},ee=Math.max(S-_.maxOverzooming,this._source.minzoom),Ae=Math.max(S+_.maxUnderzooming,this._source.minzoom),Ze={},nt=0,Ct=m;nt<Ct.length;nt+=1){var Tt=Ct[nt],Pt=this._addTile(Tt);N[Tt.key]=Tt,Pt.hasData()||S<this._source.maxzoom&&(Ze[Tt.key]=Tt)}this._retainLoadedChildren(Ze,S,Ae,N);for(var tr=0,or=m;tr<or.length;tr+=1){var gr=or[tr],Yt=this._tiles[gr.key];if(!Yt.hasData()){if(S+1>this._source.maxzoom){var br=gr.children(this._source.maxzoom)[0],Lr=this.getTile(br);if(Lr&&Lr.hasData()){N[br.key]=br;continue}}else{var pn=gr.children(this._source.maxzoom);if(N[pn[0].key]&&N[pn[1].key]&&N[pn[2].key]&&N[pn[3].key])continue}for(var zn=Yt.wasRequested(),Nn=gr.overscaledZ-1;Nn>=ee;--Nn){var Xn=gr.scaledTo(Nn);if(X[Xn.key]||(X[Xn.key]=!0,!(Yt=this.getTile(Xn))&&zn&&(Yt=this._addTile(Xn)),Yt&&(N[Xn.key]=Xn,zn=Yt.wasRequested(),Yt.hasData())))break}}}return N},_.prototype._updateLoadedParentTileCache=function(){for(var m in this._loadedParentTiles={},this._tiles){for(var S=[],N=void 0,X=this._tiles[m].tileID;X.overscaledZ>0;){if(X.key in this._loadedParentTiles){N=this._loadedParentTiles[X.key];break}S.push(X.key);var ee=X.scaledTo(X.overscaledZ-1);if(N=this._getLoadedTile(ee))break;X=ee}for(var Ae=0,Ze=S;Ae<Ze.length;Ae+=1)this._loadedParentTiles[Ze[Ae]]=N}},_.prototype._addTile=function(m){var S=this._tiles[m.key];if(S)return S;(S=this._cache.getAndRemove(m))&&(this._setTileReloadTimer(m.key,S),S.tileID=m,this._state.initializeTileState(S,this.map?this.map.painter:null),this._cacheTimers[m.key]&&(clearTimeout(this._cacheTimers[m.key]),delete this._cacheTimers[m.key],this._setTileReloadTimer(m.key,S)));var N=Boolean(S);return N||(S=new l.Tile(m,this._source.tileSize*m.overscaleFactor()),this._loadTile(S,this._tileLoaded.bind(this,S,m.key,S.state))),S?(S.uses++,this._tiles[m.key]=S,N||this._source.fire(new l.Event("dataloading",{tile:S,coord:S.tileID,dataType:"source"})),S):null},_.prototype._setTileReloadTimer=function(m,S){var N=this;m in this._timers&&(clearTimeout(this._timers[m]),delete this._timers[m]);var X=S.getExpiryTimeout();X&&(this._timers[m]=setTimeout(function(){N._reloadTile(m,"expired"),delete N._timers[m]},X))},_.prototype._removeTile=function(m){var S=this._tiles[m];S&&(S.uses--,delete this._tiles[m],this._timers[m]&&(clearTimeout(this._timers[m]),delete this._timers[m]),S.uses>0||(S.hasData()&&S.state!=="reloading"?this._cache.add(S.tileID,S,S.getExpiryTimeout()):(S.aborted=!0,this._abortTile(S),this._unloadTile(S))))},_.prototype.clearTiles=function(){for(var m in this._shouldReloadOnResume=!1,this._paused=!1,this._tiles)this._removeTile(m);this._cache.reset()},_.prototype.tilesIn=function(m,S,N){var X=this,ee=[],Ae=this.transform;if(!Ae)return ee;for(var Ze=N?Ae.getCameraQueryGeometry(m):m,nt=m.map(function(Nn){return Ae.pointCoordinate(Nn)}),Ct=Ze.map(function(Nn){return Ae.pointCoordinate(Nn)}),Tt=this.getIds(),Pt=1/0,tr=1/0,or=-1/0,gr=-1/0,Yt=0,br=Ct;Yt<br.length;Yt+=1){var Lr=br[Yt];Pt=Math.min(Pt,Lr.x),tr=Math.min(tr,Lr.y),or=Math.max(or,Lr.x),gr=Math.max(gr,Lr.y)}for(var pn=function(Nn){var Xn=X._tiles[Tt[Nn]];if(!Xn.holdingForFade()){var yi=Xn.tileID,Li=Math.pow(2,Ae.zoom-Xn.tileID.overscaledZ),Ei=S*Xn.queryPadding*l.EXTENT/Xn.tileSize/Li,Vi=[yi.getTilePoint(new l.MercatorCoordinate(Pt,tr)),yi.getTilePoint(new l.MercatorCoordinate(or,gr))];if(Vi[0].x-Ei<l.EXTENT&&Vi[0].y-Ei<l.EXTENT&&Vi[1].x+Ei>=0&&Vi[1].y+Ei>=0){var Ea=nt.map(function(Ga){return yi.getTilePoint(Ga)}),Qa=Ct.map(function(Ga){return yi.getTilePoint(Ga)});ee.push({tile:Xn,tileID:yi,queryGeometry:Ea,cameraQueryGeometry:Qa,scale:Li})}}},zn=0;zn<Tt.length;zn++)pn(zn);return ee},_.prototype.getVisibleCoordinates=function(m){for(var S=this,N=this.getRenderableIds(m).map(function(Ze){return S._tiles[Ze].tileID}),X=0,ee=N;X<ee.length;X+=1){var Ae=ee[X];Ae.posMatrix=this.transform.calculatePosMatrix(Ae.toUnwrapped())}return N},_.prototype.hasTransition=function(){if(this._source.hasTransition())return!0;if(Jn(this._source.type))for(var m in this._tiles){var S=this._tiles[m];if(S.fadeEndTime!==void 0&&S.fadeEndTime>=l.browser.now())return!0}return!1},_.prototype.setFeatureState=function(m,S,N){this._state.updateState(m=m||"_geojsonTileLayer",S,N)},_.prototype.removeFeatureState=function(m,S,N){this._state.removeFeatureState(m=m||"_geojsonTileLayer",S,N)},_.prototype.getFeatureState=function(m,S){return this._state.getState(m=m||"_geojsonTileLayer",S)},_.prototype.setDependencies=function(m,S,N){var X=this._tiles[m];X&&X.setDependencies(S,N)},_.prototype.reloadTilesForDependencies=function(m,S){for(var N in this._tiles)this._tiles[N].hasDependency(m,S)&&this._reloadTile(N,"reloading");this._cache.filter(function(X){return!X.hasDependency(m,S)})},_}(l.Evented);function zr(d,_){var m=Math.abs(2*d.wrap)-+(d.wrap<0),S=Math.abs(2*_.wrap)-+(_.wrap<0);return d.overscaledZ-_.overscaledZ||S-m||_.canonical.y-d.canonical.y||_.canonical.x-d.canonical.x}function Jn(d){return d==="raster"||d==="image"||d==="video"}function yn(){return new l.window.Worker(Ol.workerUrl)}Ft.maxOverzooming=10,Ft.maxUnderzooming=3;var tn="mapboxgl_preloaded_worker_pool",ni=function(){this.active={}};ni.prototype.acquire=function(d){if(!this.workers)for(this.workers=[];this.workers.length<ni.workerCount;)this.workers.push(new yn);return this.active[d]=!0,this.workers.slice()},ni.prototype.release=function(d){delete this.active[d],this.numActive()===0&&(this.workers.forEach(function(_){_.terminate()}),this.workers=null)},ni.prototype.isPreloaded=function(){return!!this.active[tn]},ni.prototype.numActive=function(){return Object.keys(this.active).length};var ta,fa=Math.floor(l.browser.hardwareConcurrency/2);function Mr(){return ta||(ta=new ni),ta}function Wr(d,_){var m={};for(var S in d)S!=="ref"&&(m[S]=d[S]);return l.refProperties.forEach(function(N){N in _&&(m[N]=_[N])}),m}function Zi(d){d=d.slice();for(var _=Object.create(null),m=0;m<d.length;m++)_[d[m].id]=d[m];for(var S=0;S<d.length;S++)"ref"in d[S]&&(d[S]=Wr(d[S],_[d[S].ref]));return d}ni.workerCount=Math.max(Math.min(fa,6),1);var Wi={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight"};function xo(d,_,m){m.push({command:Wi.addSource,args:[d,_[d]]})}function ua(d,_,m){_.push({command:Wi.removeSource,args:[d]}),m[d]=!0}function Ur(d,_,m,S){ua(d,m,S),xo(d,_,m)}function Jr(d,_,m){var S;for(S in d[m])if(d[m].hasOwnProperty(S)&&S!=="data"&&!l.deepEqual(d[m][S],_[m][S]))return!1;for(S in _[m])if(_[m].hasOwnProperty(S)&&S!=="data"&&!l.deepEqual(d[m][S],_[m][S]))return!1;return!0}function Eo(d,_,m,S,N,X){var ee;for(ee in _=_||{},d=d||{})d.hasOwnProperty(ee)&&(l.deepEqual(d[ee],_[ee])||m.push({command:X,args:[S,ee,_[ee],N]}));for(ee in _)_.hasOwnProperty(ee)&&!d.hasOwnProperty(ee)&&(l.deepEqual(d[ee],_[ee])||m.push({command:X,args:[S,ee,_[ee],N]}))}function Fo(d){return d.id}function So(d,_){return d[_.id]=_,d}var Xa=function(d,_){this.reset(d,_)};Xa.prototype.reset=function(d,_){this.points=d||[],this._distances=[0];for(var m=1;m<this.points.length;m++)this._distances[m]=this._distances[m-1]+this.points[m].dist(this.points[m-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(_||0,.5*this.length),this.paddedLength=this.length-2*this.padding},Xa.prototype.lerp=function(d){if(this.points.length===1)return this.points[0];d=l.clamp(d,0,1);for(var _=1,m=this._distances[_],S=d*this.paddedLength+this.padding;m<S&&_<this._distances.length;)m=this._distances[++_];var N=_-1,X=this._distances[N],ee=m-X,Ae=ee>0?(S-X)/ee:0;return this.points[N].mult(1-Ae).add(this.points[_].mult(Ae))};var Ko=function(d,_,m){var S=this.boxCells=[],N=this.circleCells=[];this.xCellCount=Math.ceil(d/m),this.yCellCount=Math.ceil(_/m);for(var X=0;X<this.xCellCount*this.yCellCount;X++)S.push([]),N.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=d,this.height=_,this.xScale=this.xCellCount/d,this.yScale=this.yCellCount/_,this.boxUid=0,this.circleUid=0};function No(d,_,m,S,N){var X=l.create();return _?(l.scale(X,X,[1/N,1/N,1]),m||l.rotateZ(X,X,S.angle)):l.multiply(X,S.labelPlaneMatrix,d),X}function ui(d,_,m,S,N){if(_){var X=l.clone(d);return l.scale(X,X,[N,N,1]),m||l.rotateZ(X,X,-S.angle),X}return S.glCoordMatrix}function jn(d,_){var m=[d.x,d.y,0,1];Xs(m,m,_);var S=m[3];return{point:new l.Point(m[0]/S,m[1]/S),signedDistanceFromCamera:S}}function rr(d,_){return .5+d/_*.5}function ps(d,_){var m=d[0]/d[3],S=d[1]/d[3];return m>=-_[0]&&m<=_[0]&&S>=-_[1]&&S<=_[1]}function er(d,_,m,S,N,X,ee,Ae){var Ze=S?d.textSizeData:d.iconSizeData,nt=l.evaluateSizeForZoom(Ze,m.transform.zoom),Ct=[256/m.width*2+1,256/m.height*2+1],Tt=S?d.text.dynamicLayoutVertexArray:d.icon.dynamicLayoutVertexArray;Tt.clear();for(var Pt=d.lineVertexArray,tr=S?d.text.placedSymbolArray:d.icon.placedSymbolArray,or=m.transform.width/m.transform.height,gr=!1,Yt=0;Yt<tr.length;Yt++){var br=tr.get(Yt);if(br.hidden||br.writingMode===l.WritingMode.vertical&&!gr)Ru(br.numGlyphs,Tt);else{gr=!1;var Lr=[br.anchorX,br.anchorY,0,1];if(l.transformMat4(Lr,Lr,_),ps(Lr,Ct)){var pn=rr(m.transform.cameraToCenterDistance,Lr[3]),zn=l.evaluateSizeForFeature(Ze,nt,br),Nn=ee?zn/pn:zn*pn,Xn=new l.Point(br.anchorX,br.anchorY),yi=jn(Xn,N).point,Li={},Ei=Os(br,Nn,!1,Ae,_,N,X,d.glyphOffsetArray,Pt,Tt,yi,Xn,Li,or);gr=Ei.useVertical,(Ei.notEnoughRoom||gr||Ei.needsFlipping&&Os(br,Nn,!0,Ae,_,N,X,d.glyphOffsetArray,Pt,Tt,yi,Xn,Li,or).notEnoughRoom)&&Ru(br.numGlyphs,Tt)}else Ru(br.numGlyphs,Tt)}}S?d.text.dynamicLayoutVertexBuffer.updateData(Tt):d.icon.dynamicLayoutVertexBuffer.updateData(Tt)}function $s(d,_,m,S,N,X,ee,Ae,Ze,nt,Ct){var Tt=Ae.glyphStartIndex+Ae.numGlyphs,Pt=Ae.lineStartIndex,tr=Ae.lineStartIndex+Ae.lineLength,or=_.getoffsetX(Ae.glyphStartIndex),gr=_.getoffsetX(Tt-1),Yt=bo(d*or,m,S,N,X,ee,Ae.segment,Pt,tr,Ze,nt,Ct);if(!Yt)return null;var br=bo(d*gr,m,S,N,X,ee,Ae.segment,Pt,tr,Ze,nt,Ct);return br?{first:Yt,last:br}:null}function Es(d,_,m,S){return d===l.WritingMode.horizontal&&Math.abs(m.y-_.y)>Math.abs(m.x-_.x)*S?{useVertical:!0}:(d===l.WritingMode.vertical?_.y<m.y:_.x>m.x)?{needsFlipping:!0}:null}function Os(d,_,m,S,N,X,ee,Ae,Ze,nt,Ct,Tt,Pt,tr){var or,gr=_/24,Yt=d.lineOffsetX*gr,br=d.lineOffsetY*gr;if(d.numGlyphs>1){var Lr=d.glyphStartIndex+d.numGlyphs,pn=d.lineStartIndex,zn=d.lineStartIndex+d.lineLength,Nn=$s(gr,Ae,Yt,br,m,Ct,Tt,d,Ze,X,Pt);if(!Nn)return{notEnoughRoom:!0};var Xn=jn(Nn.first.point,ee).point,yi=jn(Nn.last.point,ee).point;if(S&&!m){var Li=Es(d.writingMode,Xn,yi,tr);if(Li)return Li}or=[Nn.first];for(var Ei=d.glyphStartIndex+1;Ei<Lr-1;Ei++)or.push(bo(gr*Ae.getoffsetX(Ei),Yt,br,m,Ct,Tt,d.segment,pn,zn,Ze,X,Pt));or.push(Nn.last)}else{if(S&&!m){var Vi=jn(Tt,N).point,Ea=d.lineStartIndex+d.segment+1,Qa=new l.Point(Ze.getx(Ea),Ze.gety(Ea)),Ga=jn(Qa,N),io=Ga.signedDistanceFromCamera>0?Ga.point:xu(Tt,Qa,Vi,1,N),ya=Es(d.writingMode,Vi,io,tr);if(ya)return ya}var yo=bo(gr*Ae.getoffsetX(d.glyphStartIndex),Yt,br,m,Ct,Tt,d.segment,d.lineStartIndex,d.lineStartIndex+d.lineLength,Ze,X,Pt);if(!yo)return{notEnoughRoom:!0};or=[yo]}for(var _o=0,po=or;_o<po.length;_o+=1){var Ha=po[_o];l.addDynamicAttributes(nt,Ha.point,Ha.angle)}return{}}function xu(d,_,m,S,N){var X=jn(d.add(d.sub(_)._unit()),N).point,ee=m.sub(X);return m.add(ee._mult(S/ee.mag()))}function bo(d,_,m,S,N,X,ee,Ae,Ze,nt,Ct,Tt){var Pt=S?d-_:d+_,tr=Pt>0?1:-1,or=0;S&&(tr*=-1,or=Math.PI),tr<0&&(or+=Math.PI);for(var gr=tr>0?Ae+ee:Ae+ee+1,Yt=N,br=N,Lr=0,pn=0,zn=Math.abs(Pt),Nn=[];Lr+pn<=zn;){if((gr+=tr)<Ae||gr>=Ze)return null;if(br=Yt,Nn.push(Yt),(Yt=Tt[gr])===void 0){var Xn=new l.Point(nt.getx(gr),nt.gety(gr)),yi=jn(Xn,Ct);if(yi.signedDistanceFromCamera>0)Yt=Tt[gr]=yi.point;else{var Li=gr-tr;Yt=xu(Lr===0?X:new l.Point(nt.getx(Li),nt.gety(Li)),Xn,br,zn-Lr+1,Ct)}}Lr+=pn,pn=br.dist(Yt)}var Ei=(zn-Lr)/pn,Vi=Yt.sub(br),Ea=Vi.mult(Ei)._add(br);Ea._add(Vi._unit()._perp()._mult(m*tr));var Qa=or+Math.atan2(Yt.y-br.y,Yt.x-br.x);return Nn.push(Ea),{point:Ea,angle:Qa,path:Nn}}Ko.prototype.keysLength=function(){return this.boxKeys.length+this.circleKeys.length},Ko.prototype.insert=function(d,_,m,S,N){this._forEachCell(_,m,S,N,this._insertBoxCell,this.boxUid++),this.boxKeys.push(d),this.bboxes.push(_),this.bboxes.push(m),this.bboxes.push(S),this.bboxes.push(N)},Ko.prototype.insertCircle=function(d,_,m,S){this._forEachCell(_-S,m-S,_+S,m+S,this._insertCircleCell,this.circleUid++),this.circleKeys.push(d),this.circles.push(_),this.circles.push(m),this.circles.push(S)},Ko.prototype._insertBoxCell=function(d,_,m,S,N,X){this.boxCells[N].push(X)},Ko.prototype._insertCircleCell=function(d,_,m,S,N,X){this.circleCells[N].push(X)},Ko.prototype._query=function(d,_,m,S,N,X){if(m<0||d>this.width||S<0||_>this.height)return!N&&[];var ee=[];if(d<=0&&_<=0&&this.width<=m&&this.height<=S){if(N)return!0;for(var Ae=0;Ae<this.boxKeys.length;Ae++)ee.push({key:this.boxKeys[Ae],x1:this.bboxes[4*Ae],y1:this.bboxes[4*Ae+1],x2:this.bboxes[4*Ae+2],y2:this.bboxes[4*Ae+3]});for(var Ze=0;Ze<this.circleKeys.length;Ze++){var nt=this.circles[3*Ze],Ct=this.circles[3*Ze+1],Tt=this.circles[3*Ze+2];ee.push({key:this.circleKeys[Ze],x1:nt-Tt,y1:Ct-Tt,x2:nt+Tt,y2:Ct+Tt})}return X?ee.filter(X):ee}return this._forEachCell(d,_,m,S,this._queryCell,ee,{hitTest:N,seenUids:{box:{},circle:{}}},X),N?ee.length>0:ee},Ko.prototype._queryCircle=function(d,_,m,S,N){var X=d-m,ee=d+m,Ae=_-m,Ze=_+m;if(ee<0||X>this.width||Ze<0||Ae>this.height)return!S&&[];var nt=[];return this._forEachCell(X,Ae,ee,Ze,this._queryCellCircle,nt,{hitTest:S,circle:{x:d,y:_,radius:m},seenUids:{box:{},circle:{}}},N),S?nt.length>0:nt},Ko.prototype.query=function(d,_,m,S,N){return this._query(d,_,m,S,!1,N)},Ko.prototype.hitTest=function(d,_,m,S,N){return this._query(d,_,m,S,!0,N)},Ko.prototype.hitTestCircle=function(d,_,m,S){return this._queryCircle(d,_,m,!0,S)},Ko.prototype._queryCell=function(d,_,m,S,N,X,ee,Ae){var Ze=ee.seenUids,nt=this.boxCells[N];if(nt!==null)for(var Ct=this.bboxes,Tt=0,Pt=nt;Tt<Pt.length;Tt+=1){var tr=Pt[Tt];if(!Ze.box[tr]){Ze.box[tr]=!0;var or=4*tr;if(d<=Ct[or+2]&&_<=Ct[or+3]&&m>=Ct[or+0]&&S>=Ct[or+1]&&(!Ae||Ae(this.boxKeys[tr]))){if(ee.hitTest)return X.push(!0),!0;X.push({key:this.boxKeys[tr],x1:Ct[or],y1:Ct[or+1],x2:Ct[or+2],y2:Ct[or+3]})}}}var gr=this.circleCells[N];if(gr!==null)for(var Yt=this.circles,br=0,Lr=gr;br<Lr.length;br+=1){var pn=Lr[br];if(!Ze.circle[pn]){Ze.circle[pn]=!0;var zn=3*pn;if(this._circleAndRectCollide(Yt[zn],Yt[zn+1],Yt[zn+2],d,_,m,S)&&(!Ae||Ae(this.circleKeys[pn]))){if(ee.hitTest)return X.push(!0),!0;var Nn=Yt[zn],Xn=Yt[zn+1],yi=Yt[zn+2];X.push({key:this.circleKeys[pn],x1:Nn-yi,y1:Xn-yi,x2:Nn+yi,y2:Xn+yi})}}}},Ko.prototype._queryCellCircle=function(d,_,m,S,N,X,ee,Ae){var Ze=ee.circle,nt=ee.seenUids,Ct=this.boxCells[N];if(Ct!==null)for(var Tt=this.bboxes,Pt=0,tr=Ct;Pt<tr.length;Pt+=1){var or=tr[Pt];if(!nt.box[or]){nt.box[or]=!0;var gr=4*or;if(this._circleAndRectCollide(Ze.x,Ze.y,Ze.radius,Tt[gr+0],Tt[gr+1],Tt[gr+2],Tt[gr+3])&&(!Ae||Ae(this.boxKeys[or])))return X.push(!0),!0}}var Yt=this.circleCells[N];if(Yt!==null)for(var br=this.circles,Lr=0,pn=Yt;Lr<pn.length;Lr+=1){var zn=pn[Lr];if(!nt.circle[zn]){nt.circle[zn]=!0;var Nn=3*zn;if(this._circlesCollide(br[Nn],br[Nn+1],br[Nn+2],Ze.x,Ze.y,Ze.radius)&&(!Ae||Ae(this.circleKeys[zn])))return X.push(!0),!0}}},Ko.prototype._forEachCell=function(d,_,m,S,N,X,ee,Ae){for(var Ze=this._convertToXCellCoord(d),nt=this._convertToYCellCoord(_),Ct=this._convertToXCellCoord(m),Tt=this._convertToYCellCoord(S),Pt=Ze;Pt<=Ct;Pt++)for(var tr=nt;tr<=Tt;tr++)if(N.call(this,d,_,m,S,this.xCellCount*tr+Pt,X,ee,Ae))return},Ko.prototype._convertToXCellCoord=function(d){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(d*this.xScale)))},Ko.prototype._convertToYCellCoord=function(d){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(d*this.yScale)))},Ko.prototype._circlesCollide=function(d,_,m,S,N,X){var ee=S-d,Ae=N-_,Ze=m+X;return Ze*Ze>ee*ee+Ae*Ae},Ko.prototype._circleAndRectCollide=function(d,_,m,S,N,X,ee){var Ae=(X-S)/2,Ze=Math.abs(d-(S+Ae));if(Ze>Ae+m)return!1;var nt=(ee-N)/2,Ct=Math.abs(_-(N+nt));if(Ct>nt+m)return!1;if(Ze<=Ae||Ct<=nt)return!0;var Tt=Ze-Ae,Pt=Ct-nt;return Tt*Tt+Pt*Pt<=m*m};var ic=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function Ru(d,_){for(var m=0;m<d;m++){var S=_.length;_.resize(S+4),_.float32.set(ic,3*S)}}function Xs(d,_,m){var S=_[0],N=_[1];return d[0]=m[0]*S+m[4]*N+m[12],d[1]=m[1]*S+m[5]*N+m[13],d[3]=m[3]*S+m[7]*N+m[15],d}var Ys=function(d,_,m){_===void 0&&(_=new Ko(d.width+200,d.height+200,25)),m===void 0&&(m=new Ko(d.width+200,d.height+200,25)),this.transform=d,this.grid=_,this.ignoredGrid=m,this.pitchfactor=Math.cos(d._pitch)*d.cameraToCenterDistance,this.screenRightBoundary=d.width+100,this.screenBottomBoundary=d.height+100,this.gridRightBoundary=d.width+200,this.gridBottomBoundary=d.height+200};function rs(d,_,m){return _*(l.EXTENT/(d.tileSize*Math.pow(2,m-d.tileID.overscaledZ)))}Ys.prototype.placeCollisionBox=function(d,_,m,S,N){var X=this.projectAndGetPerspectiveRatio(S,d.anchorPointX,d.anchorPointY),ee=m*X.perspectiveRatio,Ae=d.x1*ee+X.point.x,Ze=d.y1*ee+X.point.y,nt=d.x2*ee+X.point.x,Ct=d.y2*ee+X.point.y;return!this.isInsideGrid(Ae,Ze,nt,Ct)||!_&&this.grid.hitTest(Ae,Ze,nt,Ct,N)?{box:[],offscreen:!1}:{box:[Ae,Ze,nt,Ct],offscreen:this.isOffscreen(Ae,Ze,nt,Ct)}},Ys.prototype.placeCollisionCircles=function(d,_,m,S,N,X,ee,Ae,Ze,nt,Ct,Tt,Pt){var tr=[],or=new l.Point(_.anchorX,_.anchorY),gr=jn(or,X),Yt=rr(this.transform.cameraToCenterDistance,gr.signedDistanceFromCamera),br=(nt?N/Yt:N*Yt)/l.ONE_EM,Lr=jn(or,ee).point,pn=$s(br,S,_.lineOffsetX*br,_.lineOffsetY*br,!1,Lr,or,_,m,ee,{}),zn=!1,Nn=!1,Xn=!0;if(pn){for(var yi=.5*Tt*Yt+Pt,Li=new l.Point(-100,-100),Ei=new l.Point(this.screenRightBoundary,this.screenBottomBoundary),Vi=new Xa,Ea=pn.first,Qa=pn.last,Ga=[],io=Ea.path.length-1;io>=1;io--)Ga.push(Ea.path[io]);for(var ya=1;ya<Qa.path.length;ya++)Ga.push(Qa.path[ya]);var yo=2.5*yi;if(Ae){var _o=Ga.map(function(Nt){return jn(Nt,Ae)});Ga=_o.some(function(Nt){return Nt.signedDistanceFromCamera<=0})?[]:_o.map(function(Nt){return Nt.point})}var po=[];if(Ga.length>0){for(var Ha=Ga[0].clone(),Ro=Ga[0].clone(),eo=1;eo<Ga.length;eo++)Ha.x=Math.min(Ha.x,Ga[eo].x),Ha.y=Math.min(Ha.y,Ga[eo].y),Ro.x=Math.max(Ro.x,Ga[eo].x),Ro.y=Math.max(Ro.y,Ga[eo].y);po=Ha.x>=Li.x&&Ro.x<=Ei.x&&Ha.y>=Li.y&&Ro.y<=Ei.y?[Ga]:Ro.x<Li.x||Ha.x>Ei.x||Ro.y<Li.y||Ha.y>Ei.y?[]:l.clipLine([Ga],Li.x,Li.y,Ei.x,Ei.y)}for(var Ia=0,Gu=po;Ia<Gu.length;Ia+=1){var co;Vi.reset(Gu[Ia],.25*yi),co=Vi.length<=.5*yi?1:Math.ceil(Vi.paddedLength/yo)+1;for(var es=0;es<co;es++){var ru=es/Math.max(co-1,1),pu=Vi.lerp(ru),Ts=pu.x+100,rl=pu.y+100;tr.push(Ts,rl,yi,0);var Nu=Ts-yi,zo=rl-yi,An=Ts+yi,vu=rl+yi;if(Xn=Xn&&this.isOffscreen(Nu,zo,An,vu),Nn=Nn||this.isInsideGrid(Nu,zo,An,vu),!d&&this.grid.hitTestCircle(Ts,rl,yi,Ct)&&(zn=!0,!Ze))return{circles:[],offscreen:!1,collisionDetected:zn}}}}return{circles:!Ze&&zn||!Nn?[]:tr,offscreen:Xn,collisionDetected:zn}},Ys.prototype.queryRenderedSymbols=function(d){if(d.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};for(var _=[],m=1/0,S=1/0,N=-1/0,X=-1/0,ee=0,Ae=d;ee<Ae.length;ee+=1){var Ze=Ae[ee],nt=new l.Point(Ze.x+100,Ze.y+100);m=Math.min(m,nt.x),S=Math.min(S,nt.y),N=Math.max(N,nt.x),X=Math.max(X,nt.y),_.push(nt)}for(var Ct={},Tt={},Pt=0,tr=this.grid.query(m,S,N,X).concat(this.ignoredGrid.query(m,S,N,X));Pt<tr.length;Pt+=1){var or=tr[Pt],gr=or.key;if(Ct[gr.bucketInstanceId]===void 0&&(Ct[gr.bucketInstanceId]={}),!Ct[gr.bucketInstanceId][gr.featureIndex]){var Yt=[new l.Point(or.x1,or.y1),new l.Point(or.x2,or.y1),new l.Point(or.x2,or.y2),new l.Point(or.x1,or.y2)];l.polygonIntersectsPolygon(_,Yt)&&(Ct[gr.bucketInstanceId][gr.featureIndex]=!0,Tt[gr.bucketInstanceId]===void 0&&(Tt[gr.bucketInstanceId]=[]),Tt[gr.bucketInstanceId].push(gr.featureIndex))}}return Tt},Ys.prototype.insertCollisionBox=function(d,_,m,S,N){(_?this.ignoredGrid:this.grid).insert({bucketInstanceId:m,featureIndex:S,collisionGroupID:N},d[0],d[1],d[2],d[3])},Ys.prototype.insertCollisionCircles=function(d,_,m,S,N){for(var X=_?this.ignoredGrid:this.grid,ee={bucketInstanceId:m,featureIndex:S,collisionGroupID:N},Ae=0;Ae<d.length;Ae+=4)X.insertCircle(ee,d[Ae],d[Ae+1],d[Ae+2])},Ys.prototype.projectAndGetPerspectiveRatio=function(d,_,m){var S=[_,m,0,1];return Xs(S,S,d),{point:new l.Point((S[0]/S[3]+1)/2*this.transform.width+100,(-S[1]/S[3]+1)/2*this.transform.height+100),perspectiveRatio:.5+this.transform.cameraToCenterDistance/S[3]*.5}},Ys.prototype.isOffscreen=function(d,_,m,S){return m<100||d>=this.screenRightBoundary||S<100||_>this.screenBottomBoundary},Ys.prototype.isInsideGrid=function(d,_,m,S){return m>=0&&d<this.gridRightBoundary&&S>=0&&_<this.gridBottomBoundary},Ys.prototype.getViewportMatrix=function(){var d=l.identity([]);return l.translate(d,d,[-100,-100,0]),d};var au=function(d,_,m,S){this.opacity=d?Math.max(0,Math.min(1,d.opacity+(d.placed?_:-_))):S&&m?1:0,this.placed=m};au.prototype.isHidden=function(){return this.opacity===0&&!this.placed};var Tu=function(d,_,m,S,N){this.text=new au(d?d.text:null,_,m,N),this.icon=new au(d?d.icon:null,_,S,N)};Tu.prototype.isHidden=function(){return this.text.isHidden()&&this.icon.isHidden()};var Cl=function(d,_,m){this.text=d,this.icon=_,this.skipFade=m},hu=function(){this.invProjMatrix=l.create(),this.viewportMatrix=l.create(),this.circles=[]},ou=function(d,_,m,S,N){this.bucketInstanceId=d,this.featureIndex=_,this.sourceLayerIndex=m,this.bucketIndex=S,this.tileID=N},ss=function(d){this.crossSourceCollisions=d,this.maxGroupID=0,this.collisionGroups={}};function nu(d,_,m,S,N){var X=l.getAnchorAlignment(d),ee=-(X.horizontalAlign-.5)*_,Ae=-(X.verticalAlign-.5)*m,Ze=l.evaluateVariableOffset(d,S);return new l.Point(ee+Ze[0]*N,Ae+Ze[1]*N)}function Pu(d,_,m,S,N,X){var ee=d.x1,Ae=d.x2,Ze=d.y1,nt=d.y2,Ct=d.anchorPointX,Tt=d.anchorPointY,Pt=new l.Point(_,m);return S&&Pt._rotate(N?X:-X),{x1:ee+Pt.x,y1:Ze+Pt.y,x2:Ae+Pt.x,y2:nt+Pt.y,anchorPointX:Ct,anchorPointY:Tt}}ss.prototype.get=function(d){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[d]){var _=++this.maxGroupID;this.collisionGroups[d]={ID:_,predicate:function(m){return m.collisionGroupID===_}}}return this.collisionGroups[d]};var Ks=function(d,_,m,S){this.transform=d.clone(),this.collisionIndex=new Ys(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=_,this.retainedQueryData={},this.collisionGroups=new ss(m),this.collisionCircleArrays={},this.prevPlacement=S,S&&(S.prevPlacement=void 0),this.placedOrientations={}};function $u(d,_,m,S,N){d.emplaceBack(_?1:0,m?1:0,S||0,N||0),d.emplaceBack(_?1:0,m?1:0,S||0,N||0),d.emplaceBack(_?1:0,m?1:0,S||0,N||0),d.emplaceBack(_?1:0,m?1:0,S||0,N||0)}Ks.prototype.getBucketParts=function(d,_,m,S){var N=m.getBucket(_),X=m.latestFeatureIndex;if(N&&X&&_.id===N.layerIds[0]){var ee=m.collisionBoxArray,Ae=N.layers[0].layout,Ze=Math.pow(2,this.transform.zoom-m.tileID.overscaledZ),nt=m.tileSize/l.EXTENT,Ct=this.transform.calculatePosMatrix(m.tileID.toUnwrapped()),Tt=Ae.get("text-pitch-alignment")==="map",Pt=Ae.get("text-rotation-alignment")==="map",tr=rs(m,1,this.transform.zoom),or=No(Ct,Tt,Pt,this.transform,tr),gr=null;if(Tt){var Yt=ui(Ct,Tt,Pt,this.transform,tr);gr=l.multiply([],this.transform.labelPlaneMatrix,Yt)}this.retainedQueryData[N.bucketInstanceId]=new ou(N.bucketInstanceId,X,N.sourceLayerIndex,N.index,m.tileID);var br={bucket:N,layout:Ae,posMatrix:Ct,textLabelPlaneMatrix:or,labelToScreenMatrix:gr,scale:Ze,textPixelRatio:nt,holdingForFade:m.holdingForFade(),collisionBoxArray:ee,partiallyEvaluatedTextSize:l.evaluateSizeForZoom(N.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(N.sourceID)};if(S)for(var Lr=0,pn=N.sortKeyRanges;Lr<pn.length;Lr+=1){var zn=pn[Lr];d.push({sortKey:zn.sortKey,symbolInstanceStart:zn.symbolInstanceStart,symbolInstanceEnd:zn.symbolInstanceEnd,parameters:br})}else d.push({symbolInstanceStart:0,symbolInstanceEnd:N.symbolInstances.length,parameters:br})}},Ks.prototype.attemptAnchorPlacement=function(d,_,m,S,N,X,ee,Ae,Ze,nt,Ct,Tt,Pt,tr,or){var gr,Yt=[Tt.textOffset0,Tt.textOffset1],br=nu(d,m,S,Yt,N),Lr=this.collisionIndex.placeCollisionBox(Pu(_,br.x,br.y,X,ee,this.transform.angle),Ct,Ae,Ze,nt.predicate);if(!or||this.collisionIndex.placeCollisionBox(Pu(or,br.x,br.y,X,ee,this.transform.angle),Ct,Ae,Ze,nt.predicate).box.length!==0)return Lr.box.length>0?(this.prevPlacement&&this.prevPlacement.variableOffsets[Tt.crossTileID]&&this.prevPlacement.placements[Tt.crossTileID]&&this.prevPlacement.placements[Tt.crossTileID].text&&(gr=this.prevPlacement.variableOffsets[Tt.crossTileID].anchor),this.variableOffsets[Tt.crossTileID]={textOffset:Yt,width:m,height:S,anchor:d,textBoxScale:N,prevAnchor:gr},this.markUsedJustification(Pt,d,Tt,tr),Pt.allowVerticalPlacement&&(this.markUsedOrientation(Pt,tr,Tt),this.placedOrientations[Tt.crossTileID]=tr),{shift:br,placedGlyphBoxes:Lr}):void 0},Ks.prototype.placeLayerBucketPart=function(d,_,m){var S=this,N=d.parameters,X=N.bucket,ee=N.layout,Ae=N.posMatrix,Ze=N.textLabelPlaneMatrix,nt=N.labelToScreenMatrix,Ct=N.textPixelRatio,Tt=N.holdingForFade,Pt=N.collisionBoxArray,tr=N.partiallyEvaluatedTextSize,or=N.collisionGroup,gr=ee.get("text-optional"),Yt=ee.get("icon-optional"),br=ee.get("text-allow-overlap"),Lr=ee.get("icon-allow-overlap"),pn=ee.get("text-rotation-alignment")==="map",zn=ee.get("text-pitch-alignment")==="map",Nn=ee.get("icon-text-fit")!=="none",Xn=ee.get("symbol-z-order")==="viewport-y",yi=br&&(Lr||!X.hasIconData()||Yt),Li=Lr&&(br||!X.hasTextData()||gr);!X.collisionArrays&&Pt&&X.deserializeCollisionBoxes(Pt);var Ei=function(ya,yo){if(!_[ya.crossTileID])if(Tt)S.placements[ya.crossTileID]=new Cl(!1,!1,!1);else{var _o,po=!1,Ha=!1,Ro=!0,eo=null,Ia={box:null,offscreen:null},Gu={box:null,offscreen:null},co=null,es=null,ru=0,pu=0,Ts=0;yo.textFeatureIndex?ru=yo.textFeatureIndex:ya.useRuntimeCollisionCircles&&(ru=ya.featureIndex),yo.verticalTextFeatureIndex&&(pu=yo.verticalTextFeatureIndex);var rl=yo.textBox;if(rl){var Nu=function(ts){var pl=l.WritingMode.horizontal;if(X.allowVerticalPlacement&&!ts&&S.prevPlacement){var Rl=S.prevPlacement.placedOrientations[ya.crossTileID];Rl&&(S.placedOrientations[ya.crossTileID]=Rl,S.markUsedOrientation(X,pl=Rl,ya))}return pl},zo=function(ts,pl){if(X.allowVerticalPlacement&&ya.numVerticalGlyphVertices>0&&yo.verticalTextBox)for(var Rl=0,qc=X.writingModes;Rl<qc.length&&(qc[Rl]===l.WritingMode.vertical?(Ia=pl(),Gu=Ia):Ia=ts(),!(Ia&&Ia.box&&Ia.box.length));Rl+=1);else Ia=ts()};if(ee.get("text-variable-anchor")){var An=ee.get("text-variable-anchor");if(S.prevPlacement&&S.prevPlacement.variableOffsets[ya.crossTileID]){var vu=S.prevPlacement.variableOffsets[ya.crossTileID];An.indexOf(vu.anchor)>0&&(An=An.filter(function(ts){return ts!==vu.anchor})).unshift(vu.anchor)}var Nt=function(ts,pl,Rl){for(var qc=ts.x2-ts.x1,ap=ts.y2-ts.y1,ef=ya.textBoxScale,wf=Nn&&!Lr?pl:null,tc={box:[],offscreen:!1},tf=br?2*An.length:An.length,Pl=0;Pl<tf;++Pl){var rf=S.attemptAnchorPlacement(An[Pl%An.length],ts,qc,ap,ef,pn,zn,Ct,Ae,or,Pl>=An.length,ya,X,Rl,wf);if(rf&&(tc=rf.placedGlyphBoxes)&&tc.box&&tc.box.length){po=!0,eo=rf.shift;break}}return tc};zo(function(){return Nt(rl,yo.iconBox,l.WritingMode.horizontal)},function(){var ts=yo.verticalTextBox;return X.allowVerticalPlacement&&!(Ia&&Ia.box&&Ia.box.length)&&ya.numVerticalGlyphVertices>0&&ts?Nt(ts,yo.verticalIconBox,l.WritingMode.vertical):{box:null,offscreen:null}}),Ia&&(po=Ia.box,Ro=Ia.offscreen);var gl=Nu(Ia&&Ia.box);if(!po&&S.prevPlacement){var Xu=S.prevPlacement.variableOffsets[ya.crossTileID];Xu&&(S.variableOffsets[ya.crossTileID]=Xu,S.markUsedJustification(X,Xu.anchor,ya,gl))}}else{var Sf=function(ts,pl){var Rl=S.collisionIndex.placeCollisionBox(ts,br,Ct,Ae,or.predicate);return Rl&&Rl.box&&Rl.box.length&&(S.markUsedOrientation(X,pl,ya),S.placedOrientations[ya.crossTileID]=pl),Rl};zo(function(){return Sf(rl,l.WritingMode.horizontal)},function(){var ts=yo.verticalTextBox;return X.allowVerticalPlacement&&ya.numVerticalGlyphVertices>0&&ts?Sf(ts,l.WritingMode.vertical):{box:null,offscreen:null}}),Nu(Ia&&Ia.box&&Ia.box.length)}}if(po=(_o=Ia)&&_o.box&&_o.box.length>0,Ro=_o&&_o.offscreen,ya.useRuntimeCollisionCircles){var ip=X.text.placedSymbolArray.get(ya.centerJustifiedTextSymbolIndex),Kc=l.evaluateSizeForFeature(X.textSizeData,tr,ip),fl=ee.get("text-padding");co=S.collisionIndex.placeCollisionCircles(br,ip,X.lineVertexArray,X.glyphOffsetArray,Kc,Ae,Ze,nt,m,zn,or.predicate,ya.collisionCircleDiameter,fl),po=br||co.circles.length>0&&!co.collisionDetected,Ro=Ro&&co.offscreen}if(yo.iconFeatureIndex&&(Ts=yo.iconFeatureIndex),yo.iconBox){var Qc=function(ts){var pl=Nn&&eo?Pu(ts,eo.x,eo.y,pn,zn,S.transform.angle):ts;return S.collisionIndex.placeCollisionBox(pl,Lr,Ct,Ae,or.predicate)};Ha=Gu&&Gu.box&&Gu.box.length&&yo.verticalIconBox?(es=Qc(yo.verticalIconBox)).box.length>0:(es=Qc(yo.iconBox)).box.length>0,Ro=Ro&&es.offscreen}var Sc=gr||ya.numHorizontalGlyphVertices===0&&ya.numVerticalGlyphVertices===0,Lu=Yt||ya.numIconVertices===0;if(Sc||Lu?Lu?Sc||(Ha=Ha&&po):po=Ha&&po:Ha=po=Ha&&po,po&&_o&&_o.box&&S.collisionIndex.insertCollisionBox(_o.box,ee.get("text-ignore-placement"),X.bucketInstanceId,Gu&&Gu.box&&pu?pu:ru,or.ID),Ha&&es&&S.collisionIndex.insertCollisionBox(es.box,ee.get("icon-ignore-placement"),X.bucketInstanceId,Ts,or.ID),co&&(po&&S.collisionIndex.insertCollisionCircles(co.circles,ee.get("text-ignore-placement"),X.bucketInstanceId,ru,or.ID),m)){var Fl=X.bucketInstanceId,fc=S.collisionCircleArrays[Fl];fc===void 0&&(fc=S.collisionCircleArrays[Fl]=new hu);for(var Jc=0;Jc<co.circles.length;Jc+=4)fc.circles.push(co.circles[Jc+0]),fc.circles.push(co.circles[Jc+1]),fc.circles.push(co.circles[Jc+2]),fc.circles.push(co.collisionDetected?1:0)}S.placements[ya.crossTileID]=new Cl(po||yi,Ha||Li,Ro||X.justReloaded),_[ya.crossTileID]=!0}};if(Xn)for(var Vi=X.getSortedSymbolIndexes(this.transform.angle),Ea=Vi.length-1;Ea>=0;--Ea){var Qa=Vi[Ea];Ei(X.symbolInstances.get(Qa),X.collisionArrays[Qa])}else for(var Ga=d.symbolInstanceStart;Ga<d.symbolInstanceEnd;Ga++)Ei(X.symbolInstances.get(Ga),X.collisionArrays[Ga]);if(m&&X.bucketInstanceId in this.collisionCircleArrays){var io=this.collisionCircleArrays[X.bucketInstanceId];l.invert(io.invProjMatrix,Ae),io.viewportMatrix=this.collisionIndex.getViewportMatrix()}X.justReloaded=!1},Ks.prototype.markUsedJustification=function(d,_,m,S){var N;N=S===l.WritingMode.vertical?m.verticalPlacedTextSymbolIndex:{left:m.leftJustifiedTextSymbolIndex,center:m.centerJustifiedTextSymbolIndex,right:m.rightJustifiedTextSymbolIndex}[l.getAnchorJustification(_)];for(var X=0,ee=[m.leftJustifiedTextSymbolIndex,m.centerJustifiedTextSymbolIndex,m.rightJustifiedTextSymbolIndex,m.verticalPlacedTextSymbolIndex];X<ee.length;X+=1){var Ae=ee[X];Ae>=0&&(d.text.placedSymbolArray.get(Ae).crossTileID=N>=0&&Ae!==N?0:m.crossTileID)}},Ks.prototype.markUsedOrientation=function(d,_,m){for(var S=_===l.WritingMode.horizontal||_===l.WritingMode.horizontalOnly?_:0,N=_===l.WritingMode.vertical?_:0,X=0,ee=[m.leftJustifiedTextSymbolIndex,m.centerJustifiedTextSymbolIndex,m.rightJustifiedTextSymbolIndex];X<ee.length;X+=1)d.text.placedSymbolArray.get(ee[X]).placedOrientation=S;m.verticalPlacedTextSymbolIndex&&(d.text.placedSymbolArray.get(m.verticalPlacedTextSymbolIndex).placedOrientation=N)},Ks.prototype.commit=function(d){this.commitTime=d,this.zoomAtLastRecencyCheck=this.transform.zoom;var _=this.prevPlacement,m=!1;this.prevZoomAdjustment=_?_.zoomAdjustment(this.transform.zoom):0;var S=_?_.symbolFadeChange(d):1,N=_?_.opacities:{},X=_?_.variableOffsets:{},ee=_?_.placedOrientations:{};for(var Ae in this.placements){var Ze=this.placements[Ae],nt=N[Ae];nt?(this.opacities[Ae]=new Tu(nt,S,Ze.text,Ze.icon),m=m||Ze.text!==nt.text.placed||Ze.icon!==nt.icon.placed):(this.opacities[Ae]=new Tu(null,S,Ze.text,Ze.icon,Ze.skipFade),m=m||Ze.text||Ze.icon)}for(var Ct in N){var Tt=N[Ct];if(!this.opacities[Ct]){var Pt=new Tu(Tt,S,!1,!1);Pt.isHidden()||(this.opacities[Ct]=Pt,m=m||Tt.text.placed||Tt.icon.placed)}}for(var tr in X)this.variableOffsets[tr]||!this.opacities[tr]||this.opacities[tr].isHidden()||(this.variableOffsets[tr]=X[tr]);for(var or in ee)this.placedOrientations[or]||!this.opacities[or]||this.opacities[or].isHidden()||(this.placedOrientations[or]=ee[or]);m?this.lastPlacementChangeTime=d:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=_?_.lastPlacementChangeTime:d)},Ks.prototype.updateLayerOpacities=function(d,_){for(var m={},S=0,N=_;S<N.length;S+=1){var X=N[S],ee=X.getBucket(d);ee&&X.latestFeatureIndex&&d.id===ee.layerIds[0]&&this.updateBucketOpacities(ee,m,X.collisionBoxArray)}},Ks.prototype.updateBucketOpacities=function(d,_,m){var S=this;d.hasTextData()&&d.text.opacityVertexArray.clear(),d.hasIconData()&&d.icon.opacityVertexArray.clear(),d.hasIconCollisionBoxData()&&d.iconCollisionBox.collisionVertexArray.clear(),d.hasTextCollisionBoxData()&&d.textCollisionBox.collisionVertexArray.clear();var N=d.layers[0].layout,X=new Tu(null,0,!1,!1,!0),ee=N.get("text-allow-overlap"),Ae=N.get("icon-allow-overlap"),Ze=N.get("text-variable-anchor"),nt=N.get("text-rotation-alignment")==="map",Ct=N.get("text-pitch-alignment")==="map",Tt=N.get("icon-text-fit")!=="none",Pt=new Tu(null,0,ee&&(Ae||!d.hasIconData()||N.get("icon-optional")),Ae&&(ee||!d.hasTextData()||N.get("text-optional")),!0);!d.collisionArrays&&m&&(d.hasIconCollisionBoxData()||d.hasTextCollisionBoxData())&&d.deserializeCollisionBoxes(m);for(var tr=function(br,Lr,pn){for(var zn=0;zn<Lr/4;zn++)br.opacityVertexArray.emplaceBack(pn)},or=function(br){var Lr=d.symbolInstances.get(br),pn=Lr.numHorizontalGlyphVertices,zn=Lr.numVerticalGlyphVertices,Nn=Lr.crossTileID,Xn=S.opacities[Nn];_[Nn]?Xn=X:Xn||(S.opacities[Nn]=Xn=Pt),_[Nn]=!0;var yi=Lr.numIconVertices>0,Li=S.placedOrientations[Lr.crossTileID],Ei=Li===l.WritingMode.vertical,Vi=Li===l.WritingMode.horizontal||Li===l.WritingMode.horizontalOnly;if(pn>0||zn>0){var Ea=Dn(Xn.text);tr(d.text,pn,Ei?Ai:Ea),tr(d.text,zn,Vi?Ai:Ea);var Qa=Xn.text.isHidden();[Lr.rightJustifiedTextSymbolIndex,Lr.centerJustifiedTextSymbolIndex,Lr.leftJustifiedTextSymbolIndex].forEach(function(Ia){Ia>=0&&(d.text.placedSymbolArray.get(Ia).hidden=Qa||Ei?1:0)}),Lr.verticalPlacedTextSymbolIndex>=0&&(d.text.placedSymbolArray.get(Lr.verticalPlacedTextSymbolIndex).hidden=Qa||Vi?1:0);var Ga=S.variableOffsets[Lr.crossTileID];Ga&&S.markUsedJustification(d,Ga.anchor,Lr,Li);var io=S.placedOrientations[Lr.crossTileID];io&&(S.markUsedJustification(d,"left",Lr,io),S.markUsedOrientation(d,io,Lr))}if(yi){var ya=Dn(Xn.icon),yo=!(Tt&&Lr.verticalPlacedIconSymbolIndex&&Ei);Lr.placedIconSymbolIndex>=0&&(tr(d.icon,Lr.numIconVertices,yo?ya:Ai),d.icon.placedSymbolArray.get(Lr.placedIconSymbolIndex).hidden=Xn.icon.isHidden()),Lr.verticalPlacedIconSymbolIndex>=0&&(tr(d.icon,Lr.numVerticalIconVertices,yo?Ai:ya),d.icon.placedSymbolArray.get(Lr.verticalPlacedIconSymbolIndex).hidden=Xn.icon.isHidden())}if(d.hasIconCollisionBoxData()||d.hasTextCollisionBoxData()){var _o=d.collisionArrays[br];if(_o){var po=new l.Point(0,0);if(_o.textBox||_o.verticalTextBox){var Ha=!0;if(Ze){var Ro=S.variableOffsets[Nn];Ro?(po=nu(Ro.anchor,Ro.width,Ro.height,Ro.textOffset,Ro.textBoxScale),nt&&po._rotate(Ct?S.transform.angle:-S.transform.angle)):Ha=!1}_o.textBox&&$u(d.textCollisionBox.collisionVertexArray,Xn.text.placed,!Ha||Ei,po.x,po.y),_o.verticalTextBox&&$u(d.textCollisionBox.collisionVertexArray,Xn.text.placed,!Ha||Vi,po.x,po.y)}var eo=Boolean(!Vi&&_o.verticalIconBox);_o.iconBox&&$u(d.iconCollisionBox.collisionVertexArray,Xn.icon.placed,eo,Tt?po.x:0,Tt?po.y:0),_o.verticalIconBox&&$u(d.iconCollisionBox.collisionVertexArray,Xn.icon.placed,!eo,Tt?po.x:0,Tt?po.y:0)}}},gr=0;gr<d.symbolInstances.length;gr++)or(gr);if(d.sortFeatures(this.transform.angle),this.retainedQueryData[d.bucketInstanceId]&&(this.retainedQueryData[d.bucketInstanceId].featureSortOrder=d.featureSortOrder),d.hasTextData()&&d.text.opacityVertexBuffer&&d.text.opacityVertexBuffer.updateData(d.text.opacityVertexArray),d.hasIconData()&&d.icon.opacityVertexBuffer&&d.icon.opacityVertexBuffer.updateData(d.icon.opacityVertexArray),d.hasIconCollisionBoxData()&&d.iconCollisionBox.collisionVertexBuffer&&d.iconCollisionBox.collisionVertexBuffer.updateData(d.iconCollisionBox.collisionVertexArray),d.hasTextCollisionBoxData()&&d.textCollisionBox.collisionVertexBuffer&&d.textCollisionBox.collisionVertexBuffer.updateData(d.textCollisionBox.collisionVertexArray),d.bucketInstanceId in this.collisionCircleArrays){var Yt=this.collisionCircleArrays[d.bucketInstanceId];d.placementInvProjMatrix=Yt.invProjMatrix,d.placementViewportMatrix=Yt.viewportMatrix,d.collisionCircleArray=Yt.circles,delete this.collisionCircleArrays[d.bucketInstanceId]}},Ks.prototype.symbolFadeChange=function(d){return this.fadeDuration===0?1:(d-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment},Ks.prototype.zoomAdjustment=function(d){return Math.max(0,(this.transform.zoom-d)/1.5)},Ks.prototype.hasTransitions=function(d){return this.stale||d-this.lastPlacementChangeTime<this.fadeDuration},Ks.prototype.stillRecent=function(d,_){var m=this.zoomAtLastRecencyCheck===_?1-this.zoomAdjustment(_):1;return this.zoomAtLastRecencyCheck=_,this.commitTime+this.fadeDuration*m>d},Ks.prototype.setStale=function(){this.stale=!0};var qe=Math.pow(2,25),Bt=Math.pow(2,24),ge=Math.pow(2,17),je=Math.pow(2,16),wt=Math.pow(2,9),nr=Math.pow(2,8),en=Math.pow(2,1);function Dn(d){if(d.opacity===0&&!d.placed)return 0;if(d.opacity===1&&d.placed)return 4294967295;var _=d.placed?1:0,m=Math.floor(127*d.opacity);return m*qe+_*Bt+m*ge+_*je+m*wt+_*nr+m*en+_}var Ai=0,na=function(d){this._sortAcrossTiles=d.layout.get("symbol-z-order")!=="viewport-y"&&d.layout.get("symbol-sort-key").constantOr(1)!==void 0,this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]};na.prototype.continuePlacement=function(d,_,m,S,N){for(var X=this._bucketParts;this._currentTileIndex<d.length;)if(_.getBucketParts(X,S,d[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,N())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,X.sort(function(ee,Ae){return ee.sortKey-Ae.sortKey}));this._currentPartIndex<X.length;)if(_.placeLayerBucketPart(X[this._currentPartIndex],this._seenCrossTileIDs,m),this._currentPartIndex++,N())return!0;return!1};var Aa=function(d,_,m,S,N,X,ee){this.placement=new Ks(d,N,X,ee),this._currentPlacementIndex=_.length-1,this._forceFullPlacement=m,this._showCollisionBoxes=S,this._done=!1};Aa.prototype.isDone=function(){return this._done},Aa.prototype.continuePlacement=function(d,_,m){for(var S=this,N=l.browser.now(),X=function(){var Ze=l.browser.now()-N;return!S._forceFullPlacement&&Ze>2};this._currentPlacementIndex>=0;){var ee=_[d[this._currentPlacementIndex]],Ae=this.placement.collisionIndex.transform.zoom;if(ee.type==="symbol"&&(!ee.minzoom||ee.minzoom<=Ae)&&(!ee.maxzoom||ee.maxzoom>Ae)){if(this._inProgressLayer||(this._inProgressLayer=new na(ee)),this._inProgressLayer.continuePlacement(m[ee.source],this.placement,this._showCollisionBoxes,ee,X))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0},Aa.prototype.commit=function(d){return this.placement.commit(d),this.placement};var Ta=512/l.EXTENT/2,Wa=function(d,_,m){this.tileID=d,this.indexedSymbolInstances={},this.bucketInstanceId=m;for(var S=0;S<_.length;S++){var N=_.get(S),X=N.key;this.indexedSymbolInstances[X]||(this.indexedSymbolInstances[X]=[]),this.indexedSymbolInstances[X].push({crossTileID:N.crossTileID,coord:this.getScaledCoordinates(N,d)})}};Wa.prototype.getScaledCoordinates=function(d,_){var m=Ta/Math.pow(2,_.canonical.z-this.tileID.canonical.z);return{x:Math.floor((_.canonical.x*l.EXTENT+d.anchorX)*m),y:Math.floor((_.canonical.y*l.EXTENT+d.anchorY)*m)}},Wa.prototype.findMatches=function(d,_,m){for(var S=this.tileID.canonical.z<_.canonical.z?1:Math.pow(2,this.tileID.canonical.z-_.canonical.z),N=0;N<d.length;N++){var X=d.get(N);if(!X.crossTileID){var ee=this.indexedSymbolInstances[X.key];if(ee)for(var Ae=this.getScaledCoordinates(X,_),Ze=0,nt=ee;Ze<nt.length;Ze+=1){var Ct=nt[Ze];if(Math.abs(Ct.coord.x-Ae.x)<=S&&Math.abs(Ct.coord.y-Ae.y)<=S&&!m[Ct.crossTileID]){m[Ct.crossTileID]=!0,X.crossTileID=Ct.crossTileID;break}}}}};var Co=function(){this.maxCrossTileID=0};Co.prototype.generate=function(){return++this.maxCrossTileID};var lo=function(){this.indexes={},this.usedCrossTileIDs={},this.lng=0};lo.prototype.handleWrapJump=function(d){var _=Math.round((d-this.lng)/360);if(_!==0)for(var m in this.indexes){var S=this.indexes[m],N={};for(var X in S){var ee=S[X];ee.tileID=ee.tileID.unwrapTo(ee.tileID.wrap+_),N[ee.tileID.key]=ee}this.indexes[m]=N}this.lng=d},lo.prototype.addBucket=function(d,_,m){if(this.indexes[d.overscaledZ]&&this.indexes[d.overscaledZ][d.key]){if(this.indexes[d.overscaledZ][d.key].bucketInstanceId===_.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(d.overscaledZ,this.indexes[d.overscaledZ][d.key])}for(var S=0;S<_.symbolInstances.length;S++)_.symbolInstances.get(S).crossTileID=0;this.usedCrossTileIDs[d.overscaledZ]||(this.usedCrossTileIDs[d.overscaledZ]={});var N=this.usedCrossTileIDs[d.overscaledZ];for(var X in this.indexes){var ee=this.indexes[X];if(Number(X)>d.overscaledZ)for(var Ae in ee){var Ze=ee[Ae];Ze.tileID.isChildOf(d)&&Ze.findMatches(_.symbolInstances,d,N)}else{var nt=ee[d.scaledTo(Number(X)).key];nt&&nt.findMatches(_.symbolInstances,d,N)}}for(var Ct=0;Ct<_.symbolInstances.length;Ct++){var Tt=_.symbolInstances.get(Ct);Tt.crossTileID||(Tt.crossTileID=m.generate(),N[Tt.crossTileID]=!0)}return this.indexes[d.overscaledZ]===void 0&&(this.indexes[d.overscaledZ]={}),this.indexes[d.overscaledZ][d.key]=new Wa(d,_.symbolInstances,_.bucketInstanceId),!0},lo.prototype.removeBucketCrossTileIDs=function(d,_){for(var m in _.indexedSymbolInstances)for(var S=0,N=_.indexedSymbolInstances[m];S<N.length;S+=1)delete this.usedCrossTileIDs[d][N[S].crossTileID]},lo.prototype.removeStaleBuckets=function(d){var _=!1;for(var m in this.indexes){var S=this.indexes[m];for(var N in S)d[S[N].bucketInstanceId]||(this.removeBucketCrossTileIDs(m,S[N]),delete S[N],_=!0)}return _};var Vo=function(){this.layerIndexes={},this.crossTileIDs=new Co,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}};Vo.prototype.addLayer=function(d,_,m){var S=this.layerIndexes[d.id];S===void 0&&(S=this.layerIndexes[d.id]=new lo);var N=!1,X={};S.handleWrapJump(m);for(var ee=0,Ae=_;ee<Ae.length;ee+=1){var Ze=Ae[ee],nt=Ze.getBucket(d);nt&&d.id===nt.layerIds[0]&&(nt.bucketInstanceId||(nt.bucketInstanceId=++this.maxBucketInstanceId),S.addBucket(Ze.tileID,nt,this.crossTileIDs)&&(N=!0),X[nt.bucketInstanceId]=!0)}return S.removeStaleBuckets(X)&&(N=!0),N},Vo.prototype.pruneUnusedLayers=function(d){var _={};for(var m in d.forEach(function(S){_[S]=!0}),this.layerIndexes)_[m]||delete this.layerIndexes[m]};var gs=function(d,_){return l.emitValidationErrors(d,_&&_.filter(function(m){return m.identifier!=="source.canvas"}))},su=l.pick(Wi,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData"]),Zu=l.pick(Wi,["setCenter","setZoom","setBearing","setPitch"]),Ss=function(){var d={},_=l.styleSpec.$version;for(var m in l.styleSpec.$root){var S,N=l.styleSpec.$root[m];N.required&&(S=m==="version"?_:N.type==="array"?[]:{})!=null&&(d[m]=S)}return d}(),Us=function(d){function _(m,S){var N=this;S===void 0&&(S={}),d.call(this),this.map=m,this.dispatcher=new At(Mr(),this),this.imageManager=new be,this.imageManager.setEventedParent(this),this.glyphManager=new ke(m._requestManager,S.localIdeographFontFamily),this.lineAtlas=new Ke(256,512),this.crossTileSymbolIndex=new Vo,this._layers={},this._serializedLayers={},this._order=[],this.sourceCaches={},this.zoomHistory=new l.ZoomHistory,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("setReferrer",l.getReferrer());var X=this;this._rtlTextPluginCallback=_.registerForPluginStateChange(function(ee){X.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:ee.pluginStatus,pluginURL:ee.pluginURL},function(Ae,Ze){if(l.triggerPluginCompletionEvent(Ae),Ze&&Ze.every(function(Ct){return Ct}))for(var nt in X.sourceCaches)X.sourceCaches[nt].reload()})}),this.on("data",function(ee){if(ee.dataType==="source"&&ee.sourceDataType==="metadata"){var Ae=N.sourceCaches[ee.sourceId];if(Ae){var Ze=Ae.getSource();if(Ze&&Ze.vectorLayerIds)for(var nt in N._layers){var Ct=N._layers[nt];Ct.source===Ze.id&&N._validateLayer(Ct)}}}})}return d&&(_.__proto__=d),(_.prototype=Object.create(d&&d.prototype)).constructor=_,_.prototype.loadURL=function(m,S){var N=this;S===void 0&&(S={}),this.fire(new l.Event("dataloading",{dataType:"style"}));var X=typeof S.validate=="boolean"?S.validate:!l.isMapboxURL(m);m=this.map._requestManager.normalizeStyleURL(m,S.accessToken);var ee=this.map._requestManager.transformRequest(m,l.ResourceType.Style);this._request=l.getJSON(ee,function(Ae,Ze){N._request=null,Ae?N.fire(new l.ErrorEvent(Ae)):Ze&&N._load(Ze,X)})},_.prototype.loadJSON=function(m,S){var N=this;S===void 0&&(S={}),this.fire(new l.Event("dataloading",{dataType:"style"})),this._request=l.browser.frame(function(){N._request=null,N._load(m,S.validate!==!1)})},_.prototype.loadEmpty=function(){this.fire(new l.Event("dataloading",{dataType:"style"})),this._load(Ss,!1)},_.prototype._load=function(m,S){if(!S||!gs(this,l.validateStyle(m))){for(var N in this._loaded=!0,this.stylesheet=m,m.sources)this.addSource(N,m.sources[N],{validate:!1});m.sprite?this._loadSprite(m.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(m.glyphs);var X=Zi(this.stylesheet.layers);this._order=X.map(function(nt){return nt.id}),this._layers={},this._serializedLayers={};for(var ee=0,Ae=X;ee<Ae.length;ee+=1){var Ze=Ae[ee];(Ze=l.createStyleLayer(Ze)).setEventedParent(this,{layer:{id:Ze.id}}),this._layers[Ze.id]=Ze,this._serializedLayers[Ze.id]=Ze.serialize()}this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order)),this.light=new Xe(this.stylesheet.light),this.fire(new l.Event("data",{dataType:"style"})),this.fire(new l.Event("style.load"))}},_.prototype._loadSprite=function(m){var S=this;this._spriteRequest=function(N,X,ee){var Ae,Ze,nt,Ct=l.browser.devicePixelRatio>1?"@2x":"",Tt=l.getJSON(X.transformRequest(X.normalizeSpriteURL(N,Ct,".json"),l.ResourceType.SpriteJSON),function(or,gr){Tt=null,nt||(nt=or,Ae=gr,tr())}),Pt=l.getImage(X.transformRequest(X.normalizeSpriteURL(N,Ct,".png"),l.ResourceType.SpriteImage),function(or,gr){Pt=null,nt||(nt=or,Ze=gr,tr())});function tr(){if(nt)ee(nt);else if(Ae&&Ze){var or=l.browser.getImageData(Ze),gr={};for(var Yt in Ae){var br=Ae[Yt],Lr=br.width,pn=br.height,zn=br.x,Nn=br.y,Xn=br.sdf,yi=br.pixelRatio,Li=br.stretchX,Ei=br.stretchY,Vi=br.content,Ea=new l.RGBAImage({width:Lr,height:pn});l.RGBAImage.copy(or,Ea,{x:zn,y:Nn},{x:0,y:0},{width:Lr,height:pn}),gr[Yt]={data:Ea,pixelRatio:yi,sdf:Xn,stretchX:Li,stretchY:Ei,content:Vi}}ee(null,gr)}}return{cancel:function(){Tt&&(Tt.cancel(),Tt=null),Pt&&(Pt.cancel(),Pt=null)}}}(m,this.map._requestManager,function(N,X){if(S._spriteRequest=null,N)S.fire(new l.ErrorEvent(N));else if(X)for(var ee in X)S.imageManager.addImage(ee,X[ee]);S.imageManager.setLoaded(!0),S._availableImages=S.imageManager.listImages(),S.dispatcher.broadcast("setImages",S._availableImages),S.fire(new l.Event("data",{dataType:"style"}))})},_.prototype._validateLayer=function(m){var S=this.sourceCaches[m.source];if(S){var N=m.sourceLayer;if(N){var X=S.getSource();(X.type==="geojson"||X.vectorLayerIds&&X.vectorLayerIds.indexOf(N)===-1)&&this.fire(new l.ErrorEvent(new Error('Source layer "'+N+'" does not exist on source "'+X.id+'" as specified by style layer "'+m.id+'"')))}}},_.prototype.loaded=function(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(var m in this.sourceCaches)if(!this.sourceCaches[m].loaded())return!1;return!!this.imageManager.isLoaded()},_.prototype._serializeLayers=function(m){for(var S=[],N=0,X=m;N<X.length;N+=1){var ee=this._layers[X[N]];ee.type!=="custom"&&S.push(ee.serialize())}return S},_.prototype.hasTransitions=function(){if(this.light&&this.light.hasTransition())return!0;for(var m in this.sourceCaches)if(this.sourceCaches[m].hasTransition())return!0;for(var S in this._layers)if(this._layers[S].hasTransition())return!0;return!1},_.prototype._checkLoaded=function(){if(!this._loaded)throw new Error("Style is not done loading")},_.prototype.update=function(m){if(this._loaded){var S=this._changed;if(this._changed){var N=Object.keys(this._updatedLayers),X=Object.keys(this._removedLayers);for(var ee in(N.length||X.length)&&this._updateWorkerLayers(N,X),this._updatedSources){var Ae=this._updatedSources[ee];Ae==="reload"?this._reloadSource(ee):Ae==="clear"&&this._clearSource(ee)}for(var Ze in this._updateTilesForChangedImages(),this._updatedPaintProps)this._layers[Ze].updateTransitions(m);this.light.updateTransitions(m),this._resetUpdates()}var nt={};for(var Ct in this.sourceCaches){var Tt=this.sourceCaches[Ct];nt[Ct]=Tt.used,Tt.used=!1}for(var Pt=0,tr=this._order;Pt<tr.length;Pt+=1){var or=this._layers[tr[Pt]];or.recalculate(m,this._availableImages),!or.isHidden(m.zoom)&&or.source&&(this.sourceCaches[or.source].used=!0)}for(var gr in nt){var Yt=this.sourceCaches[gr];nt[gr]!==Yt.used&&Yt.fire(new l.Event("data",{sourceDataType:"visibility",dataType:"source",sourceId:gr}))}this.light.recalculate(m),this.z=m.zoom,S&&this.fire(new l.Event("data",{dataType:"style"}))}},_.prototype._updateTilesForChangedImages=function(){var m=Object.keys(this._changedImages);if(m.length){for(var S in this.sourceCaches)this.sourceCaches[S].reloadTilesForDependencies(["icons","patterns"],m);this._changedImages={}}},_.prototype._updateWorkerLayers=function(m,S){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(m),removedIds:S})},_.prototype._resetUpdates=function(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={}},_.prototype.setState=function(m){var S=this;if(this._checkLoaded(),gs(this,l.validateStyle(m)))return!1;(m=l.clone$1(m)).layers=Zi(m.layers);var N=function(ee,Ae){if(!ee)return[{command:Wi.setStyle,args:[Ae]}];var Ze=[];try{if(!l.deepEqual(ee.version,Ae.version))return[{command:Wi.setStyle,args:[Ae]}];l.deepEqual(ee.center,Ae.center)||Ze.push({command:Wi.setCenter,args:[Ae.center]}),l.deepEqual(ee.zoom,Ae.zoom)||Ze.push({command:Wi.setZoom,args:[Ae.zoom]}),l.deepEqual(ee.bearing,Ae.bearing)||Ze.push({command:Wi.setBearing,args:[Ae.bearing]}),l.deepEqual(ee.pitch,Ae.pitch)||Ze.push({command:Wi.setPitch,args:[Ae.pitch]}),l.deepEqual(ee.sprite,Ae.sprite)||Ze.push({command:Wi.setSprite,args:[Ae.sprite]}),l.deepEqual(ee.glyphs,Ae.glyphs)||Ze.push({command:Wi.setGlyphs,args:[Ae.glyphs]}),l.deepEqual(ee.transition,Ae.transition)||Ze.push({command:Wi.setTransition,args:[Ae.transition]}),l.deepEqual(ee.light,Ae.light)||Ze.push({command:Wi.setLight,args:[Ae.light]});var nt={},Ct=[];(function(Pt,tr,or,gr){var Yt;for(Yt in tr=tr||{},Pt=Pt||{})Pt.hasOwnProperty(Yt)&&(tr.hasOwnProperty(Yt)||ua(Yt,or,gr));for(Yt in tr)tr.hasOwnProperty(Yt)&&(Pt.hasOwnProperty(Yt)?l.deepEqual(Pt[Yt],tr[Yt])||(Pt[Yt].type==="geojson"&&tr[Yt].type==="geojson"&&Jr(Pt,tr,Yt)?or.push({command:Wi.setGeoJSONSourceData,args:[Yt,tr[Yt].data]}):Ur(Yt,tr,or,gr)):xo(Yt,tr,or))})(ee.sources,Ae.sources,Ct,nt);var Tt=[];ee.layers&&ee.layers.forEach(function(Pt){nt[Pt.source]?Ze.push({command:Wi.removeLayer,args:[Pt.id]}):Tt.push(Pt)}),Ze=Ze.concat(Ct),function(Pt,tr,or){tr=tr||[];var gr,Yt,br,Lr,pn,zn,Nn,Xn=(Pt=Pt||[]).map(Fo),yi=tr.map(Fo),Li=Pt.reduce(So,{}),Ei=tr.reduce(So,{}),Vi=Xn.slice(),Ea=Object.create(null);for(gr=0,Yt=0;gr<Xn.length;gr++)Ei.hasOwnProperty(br=Xn[gr])?Yt++:(or.push({command:Wi.removeLayer,args:[br]}),Vi.splice(Vi.indexOf(br,Yt),1));for(gr=0,Yt=0;gr<yi.length;gr++)Vi[Vi.length-1-gr]!==(br=yi[yi.length-1-gr])&&(Li.hasOwnProperty(br)?(or.push({command:Wi.removeLayer,args:[br]}),Vi.splice(Vi.lastIndexOf(br,Vi.length-Yt),1)):Yt++,or.push({command:Wi.addLayer,args:[Ei[br],zn=Vi[Vi.length-gr]]}),Vi.splice(Vi.length-gr,0,br),Ea[br]=!0);for(gr=0;gr<yi.length;gr++)if(Lr=Li[br=yi[gr]],pn=Ei[br],!Ea[br]&&!l.deepEqual(Lr,pn))if(l.deepEqual(Lr.source,pn.source)&&l.deepEqual(Lr["source-layer"],pn["source-layer"])&&l.deepEqual(Lr.type,pn.type)){for(Nn in Eo(Lr.layout,pn.layout,or,br,null,Wi.setLayoutProperty),Eo(Lr.paint,pn.paint,or,br,null,Wi.setPaintProperty),l.deepEqual(Lr.filter,pn.filter)||or.push({command:Wi.setFilter,args:[br,pn.filter]}),l.deepEqual(Lr.minzoom,pn.minzoom)&&l.deepEqual(Lr.maxzoom,pn.maxzoom)||or.push({command:Wi.setLayerZoomRange,args:[br,pn.minzoom,pn.maxzoom]}),Lr)Lr.hasOwnProperty(Nn)&&Nn!=="layout"&&Nn!=="paint"&&Nn!=="filter"&&Nn!=="metadata"&&Nn!=="minzoom"&&Nn!=="maxzoom"&&(Nn.indexOf("paint.")===0?Eo(Lr[Nn],pn[Nn],or,br,Nn.slice(6),Wi.setPaintProperty):l.deepEqual(Lr[Nn],pn[Nn])||or.push({command:Wi.setLayerProperty,args:[br,Nn,pn[Nn]]}));for(Nn in pn)pn.hasOwnProperty(Nn)&&!Lr.hasOwnProperty(Nn)&&Nn!=="layout"&&Nn!=="paint"&&Nn!=="filter"&&Nn!=="metadata"&&Nn!=="minzoom"&&Nn!=="maxzoom"&&(Nn.indexOf("paint.")===0?Eo(Lr[Nn],pn[Nn],or,br,Nn.slice(6),Wi.setPaintProperty):l.deepEqual(Lr[Nn],pn[Nn])||or.push({command:Wi.setLayerProperty,args:[br,Nn,pn[Nn]]}))}else or.push({command:Wi.removeLayer,args:[br]}),zn=Vi[Vi.lastIndexOf(br)+1],or.push({command:Wi.addLayer,args:[pn,zn]})}(Tt,Ae.layers,Ze)}catch(Pt){console.warn("Unable to compute style diff:",Pt),Ze=[{command:Wi.setStyle,args:[Ae]}]}return Ze}(this.serialize(),m).filter(function(ee){return!(ee.command in Zu)});if(N.length===0)return!1;var X=N.filter(function(ee){return!(ee.command in su)});if(X.length>0)throw new Error("Unimplemented: "+X.map(function(ee){return ee.command}).join(", ")+".");return N.forEach(function(ee){ee.command!=="setTransition"&&S[ee.command].apply(S,ee.args)}),this.stylesheet=m,!0},_.prototype.addImage=function(m,S){if(this.getImage(m))return this.fire(new l.ErrorEvent(new Error("An image with this name already exists.")));this.imageManager.addImage(m,S),this._afterImageUpdated(m)},_.prototype.updateImage=function(m,S){this.imageManager.updateImage(m,S)},_.prototype.getImage=function(m){return this.imageManager.getImage(m)},_.prototype.removeImage=function(m){if(!this.getImage(m))return this.fire(new l.ErrorEvent(new Error("No image with this name exists.")));this.imageManager.removeImage(m),this._afterImageUpdated(m)},_.prototype._afterImageUpdated=function(m){this._availableImages=this.imageManager.listImages(),this._changedImages[m]=!0,this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new l.Event("data",{dataType:"style"}))},_.prototype.listImages=function(){return this._checkLoaded(),this.imageManager.listImages()},_.prototype.addSource=function(m,S,N){var X=this;if(N===void 0&&(N={}),this._checkLoaded(),this.sourceCaches[m]!==void 0)throw new Error("There is already a source with this ID");if(!S.type)throw new Error("The type property must be defined, but only the following properties were given: "+Object.keys(S).join(", ")+".");if(!(["vector","raster","geojson","video","image"].indexOf(S.type)>=0&&this._validate(l.validateStyle.source,"sources."+m,S,null,N))){this.map&&this.map._collectResourceTiming&&(S.collectResourceTiming=!0);var ee=this.sourceCaches[m]=new Ft(m,S,this.dispatcher);ee.style=this,ee.setEventedParent(this,function(){return{isSourceLoaded:X.loaded(),source:ee.serialize(),sourceId:m}}),ee.onAdd(this.map),this._changed=!0}},_.prototype.removeSource=function(m){if(this._checkLoaded(),this.sourceCaches[m]===void 0)throw new Error("There is no source with this ID");for(var S in this._layers)if(this._layers[S].source===m)return this.fire(new l.ErrorEvent(new Error('Source "'+m+'" cannot be removed while layer "'+S+'" is using it.')));var N=this.sourceCaches[m];delete this.sourceCaches[m],delete this._updatedSources[m],N.fire(new l.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:m})),N.setEventedParent(null),N.clearTiles(),N.onRemove&&N.onRemove(this.map),this._changed=!0},_.prototype.setGeoJSONSourceData=function(m,S){this._checkLoaded(),this.sourceCaches[m].getSource().setData(S),this._changed=!0},_.prototype.getSource=function(m){return this.sourceCaches[m]&&this.sourceCaches[m].getSource()},_.prototype.addLayer=function(m,S,N){N===void 0&&(N={}),this._checkLoaded();var X=m.id;if(this.getLayer(X))this.fire(new l.ErrorEvent(new Error('Layer with id "'+X+'" already exists on this map')));else{var ee;if(m.type==="custom"){if(gs(this,l.validateCustomStyleLayer(m)))return;ee=l.createStyleLayer(m)}else{if(typeof m.source=="object"&&(this.addSource(X,m.source),m=l.clone$1(m),m=l.extend(m,{source:X})),this._validate(l.validateStyle.layer,"layers."+X,m,{arrayIndex:-1},N))return;ee=l.createStyleLayer(m),this._validateLayer(ee),ee.setEventedParent(this,{layer:{id:X}}),this._serializedLayers[ee.id]=ee.serialize()}var Ae=S?this._order.indexOf(S):this._order.length;if(S&&Ae===-1)this.fire(new l.ErrorEvent(new Error('Layer with id "'+S+'" does not exist on this map.')));else{if(this._order.splice(Ae,0,X),this._layerOrderChanged=!0,this._layers[X]=ee,this._removedLayers[X]&&ee.source&&ee.type!=="custom"){var Ze=this._removedLayers[X];delete this._removedLayers[X],Ze.type!==ee.type?this._updatedSources[ee.source]="clear":(this._updatedSources[ee.source]="reload",this.sourceCaches[ee.source].pause())}this._updateLayer(ee),ee.onAdd&&ee.onAdd(this.map)}}},_.prototype.moveLayer=function(m,S){if(this._checkLoaded(),this._changed=!0,this._layers[m]){if(m!==S){var N=this._order.indexOf(m);this._order.splice(N,1);var X=S?this._order.indexOf(S):this._order.length;S&&X===-1?this.fire(new l.ErrorEvent(new Error('Layer with id "'+S+'" does not exist on this map.'))):(this._order.splice(X,0,m),this._layerOrderChanged=!0)}}else this.fire(new l.ErrorEvent(new Error("The layer '"+m+"' does not exist in the map's style and cannot be moved.")))},_.prototype.removeLayer=function(m){this._checkLoaded();var S=this._layers[m];if(S){S.setEventedParent(null);var N=this._order.indexOf(m);this._order.splice(N,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[m]=S,delete this._layers[m],delete this._serializedLayers[m],delete this._updatedLayers[m],delete this._updatedPaintProps[m],S.onRemove&&S.onRemove(this.map)}else this.fire(new l.ErrorEvent(new Error("The layer '"+m+"' does not exist in the map's style and cannot be removed.")))},_.prototype.getLayer=function(m){return this._layers[m]},_.prototype.hasLayer=function(m){return m in this._layers},_.prototype.setLayerZoomRange=function(m,S,N){this._checkLoaded();var X=this.getLayer(m);X?X.minzoom===S&&X.maxzoom===N||(S!=null&&(X.minzoom=S),N!=null&&(X.maxzoom=N),this._updateLayer(X)):this.fire(new l.ErrorEvent(new Error("The layer '"+m+"' does not exist in the map's style and cannot have zoom extent.")))},_.prototype.setFilter=function(m,S,N){N===void 0&&(N={}),this._checkLoaded();var X=this.getLayer(m);if(X){if(!l.deepEqual(X.filter,S))return S==null?(X.filter=void 0,void this._updateLayer(X)):void(this._validate(l.validateStyle.filter,"layers."+X.id+".filter",S,null,N)||(X.filter=l.clone$1(S),this._updateLayer(X)))}else this.fire(new l.ErrorEvent(new Error("The layer '"+m+"' does not exist in the map's style and cannot be filtered.")))},_.prototype.getFilter=function(m){return l.clone$1(this.getLayer(m).filter)},_.prototype.setLayoutProperty=function(m,S,N,X){X===void 0&&(X={}),this._checkLoaded();var ee=this.getLayer(m);ee?l.deepEqual(ee.getLayoutProperty(S),N)||(ee.setLayoutProperty(S,N,X),this._updateLayer(ee)):this.fire(new l.ErrorEvent(new Error("The layer '"+m+"' does not exist in the map's style and cannot be styled.")))},_.prototype.getLayoutProperty=function(m,S){var N=this.getLayer(m);if(N)return N.getLayoutProperty(S);this.fire(new l.ErrorEvent(new Error("The layer '"+m+"' does not exist in the map's style.")))},_.prototype.setPaintProperty=function(m,S,N,X){X===void 0&&(X={}),this._checkLoaded();var ee=this.getLayer(m);ee?l.deepEqual(ee.getPaintProperty(S),N)||(ee.setPaintProperty(S,N,X)&&this._updateLayer(ee),this._changed=!0,this._updatedPaintProps[m]=!0):this.fire(new l.ErrorEvent(new Error("The layer '"+m+"' does not exist in the map's style and cannot be styled.")))},_.prototype.getPaintProperty=function(m,S){return this.getLayer(m).getPaintProperty(S)},_.prototype.setFeatureState=function(m,S){this._checkLoaded();var N=m.source,X=m.sourceLayer,ee=this.sourceCaches[N];if(ee!==void 0){var Ae=ee.getSource().type;Ae==="geojson"&&X?this.fire(new l.ErrorEvent(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):Ae!=="vector"||X?(m.id===void 0&&this.fire(new l.ErrorEvent(new Error("The feature id parameter must be provided."))),ee.setFeatureState(X,m.id,S)):this.fire(new l.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new l.ErrorEvent(new Error("The source '"+N+"' does not exist in the map's style.")))},_.prototype.removeFeatureState=function(m,S){this._checkLoaded();var N=m.source,X=this.sourceCaches[N];if(X!==void 0){var ee=X.getSource().type,Ae=ee==="vector"?m.sourceLayer:void 0;ee!=="vector"||Ae?S&&typeof m.id!="string"&&typeof m.id!="number"?this.fire(new l.ErrorEvent(new Error("A feature id is required to remove its specific state property."))):X.removeFeatureState(Ae,m.id,S):this.fire(new l.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new l.ErrorEvent(new Error("The source '"+N+"' does not exist in the map's style.")))},_.prototype.getFeatureState=function(m){this._checkLoaded();var S=m.source,N=m.sourceLayer,X=this.sourceCaches[S];if(X!==void 0){if(X.getSource().type!=="vector"||N)return m.id===void 0&&this.fire(new l.ErrorEvent(new Error("The feature id parameter must be provided."))),X.getFeatureState(N,m.id);this.fire(new l.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new l.ErrorEvent(new Error("The source '"+S+"' does not exist in the map's style.")))},_.prototype.getTransition=function(){return l.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)},_.prototype.serialize=function(){return l.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,sources:l.mapObject(this.sourceCaches,function(m){return m.serialize()}),layers:this._serializeLayers(this._order)},function(m){return m!==void 0})},_.prototype._updateLayer=function(m){this._updatedLayers[m.id]=!0,m.source&&!this._updatedSources[m.source]&&this.sourceCaches[m.source].getSource().type!=="raster"&&(this._updatedSources[m.source]="reload",this.sourceCaches[m.source].pause()),this._changed=!0},_.prototype._flattenAndSortRenderedFeatures=function(m){for(var S=this,N=function(Li){return S._layers[Li].type==="fill-extrusion"},X={},ee=[],Ae=this._order.length-1;Ae>=0;Ae--){var Ze=this._order[Ae];if(N(Ze)){X[Ze]=Ae;for(var nt=0,Ct=m;nt<Ct.length;nt+=1){var Tt=Ct[nt][Ze];if(Tt)for(var Pt=0,tr=Tt;Pt<tr.length;Pt+=1)ee.push(tr[Pt])}}}ee.sort(function(Li,Ei){return Ei.intersectionZ-Li.intersectionZ});for(var or=[],gr=this._order.length-1;gr>=0;gr--){var Yt=this._order[gr];if(N(Yt))for(var br=ee.length-1;br>=0;br--){var Lr=ee[br].feature;if(X[Lr.layer.id]<gr)break;or.push(Lr),ee.pop()}else for(var pn=0,zn=m;pn<zn.length;pn+=1){var Nn=zn[pn][Yt];if(Nn)for(var Xn=0,yi=Nn;Xn<yi.length;Xn+=1)or.push(yi[Xn].feature)}}return or},_.prototype.queryRenderedFeatures=function(m,S,N){S&&S.filter&&this._validate(l.validateStyle.filter,"queryRenderedFeatures.filter",S.filter,null,S);var X={};if(S&&S.layers){if(!Array.isArray(S.layers))return this.fire(new l.ErrorEvent(new Error("parameters.layers must be an Array."))),[];for(var ee=0,Ae=S.layers;ee<Ae.length;ee+=1){var Ze=Ae[ee],nt=this._layers[Ze];if(!nt)return this.fire(new l.ErrorEvent(new Error("The layer '"+Ze+"' does not exist in the map's style and cannot be queried for features."))),[];X[nt.source]=!0}}var Ct=[];for(var Tt in S.availableImages=this._availableImages,this.sourceCaches)S.layers&&!X[Tt]||Ct.push(Qt(this.sourceCaches[Tt],this._layers,this._serializedLayers,m,S,N));return this.placement&&Ct.push(function(Pt,tr,or,gr,Yt,br,Lr){for(var pn={},zn=br.queryRenderedSymbols(gr),Nn=[],Xn=0,yi=Object.keys(zn).map(Number);Xn<yi.length;Xn+=1)Nn.push(Lr[yi[Xn]]);Nn.sort(xr);for(var Li=function(){var Ga=Vi[Ei],io=Ga.featureIndex.lookupSymbolFeatures(zn[Ga.bucketInstanceId],tr,Ga.bucketIndex,Ga.sourceLayerIndex,Yt.filter,Yt.layers,Yt.availableImages,Pt);for(var ya in io){var yo=pn[ya]=pn[ya]||[],_o=io[ya];_o.sort(function(Ro,eo){var Ia=Ga.featureSortOrder;if(Ia){var Gu=Ia.indexOf(Ro.featureIndex);return Ia.indexOf(eo.featureIndex)-Gu}return eo.featureIndex-Ro.featureIndex});for(var po=0,Ha=_o;po<Ha.length;po+=1)yo.push(Ha[po])}},Ei=0,Vi=Nn;Ei<Vi.length;Ei+=1)Li();var Ea=function(Ga){pn[Ga].forEach(function(io){var ya=io.feature,yo=or[Pt[Ga].source].getFeatureState(ya.layer["source-layer"],ya.id);ya.source=ya.layer.source,ya.layer["source-layer"]&&(ya.sourceLayer=ya.layer["source-layer"]),ya.state=yo})};for(var Qa in pn)Ea(Qa);return pn}(this._layers,this._serializedLayers,this.sourceCaches,m,S,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(Ct)},_.prototype.querySourceFeatures=function(m,S){S&&S.filter&&this._validate(l.validateStyle.filter,"querySourceFeatures.filter",S.filter,null,S);var N=this.sourceCaches[m];return N?function(X,ee){for(var Ae=X.getRenderableIds().map(function(tr){return X.getTileByID(tr)}),Ze=[],nt={},Ct=0;Ct<Ae.length;Ct++){var Tt=Ae[Ct],Pt=Tt.tileID.canonical.key;nt[Pt]||(nt[Pt]=!0,Tt.querySourceFeatures(Ze,ee))}return Ze}(N,S):[]},_.prototype.addSourceType=function(m,S,N){return _.getSourceType(m)?N(new Error('A source type called "'+m+'" already exists.')):(_.setSourceType(m,S),S.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:m,url:S.workerSourceURL},N):N(null,null))},_.prototype.getLight=function(){return this.light.getLight()},_.prototype.setLight=function(m,S){S===void 0&&(S={}),this._checkLoaded();var N=this.light.getLight(),X=!1;for(var ee in m)if(!l.deepEqual(m[ee],N[ee])){X=!0;break}if(X){var Ae={now:l.browser.now(),transition:l.extend({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(m,S),this.light.updateTransitions(Ae)}},_.prototype._validate=function(m,S,N,X,ee){return ee===void 0&&(ee={}),(!ee||ee.validate!==!1)&&gs(this,m.call(l.validateStyle,l.extend({key:S,style:this.serialize(),value:N,styleSpec:l.styleSpec},X)))},_.prototype._remove=function(){for(var m in this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),l.evented.off("pluginStateChange",this._rtlTextPluginCallback),this._layers)this._layers[m].setEventedParent(null);for(var S in this.sourceCaches)this.sourceCaches[S].clearTiles(),this.sourceCaches[S].setEventedParent(null);this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove()},_.prototype._clearSource=function(m){this.sourceCaches[m].clearTiles()},_.prototype._reloadSource=function(m){this.sourceCaches[m].resume(),this.sourceCaches[m].reload()},_.prototype._updateSources=function(m){for(var S in this.sourceCaches)this.sourceCaches[S].update(m)},_.prototype._generateCollisionBoxes=function(){for(var m in this.sourceCaches)this._reloadSource(m)},_.prototype._updatePlacement=function(m,S,N,X,ee){ee===void 0&&(ee=!1);for(var Ae=!1,Ze=!1,nt={},Ct=0,Tt=this._order;Ct<Tt.length;Ct+=1){var Pt=this._layers[Tt[Ct]];if(Pt.type==="symbol"){if(!nt[Pt.source]){var tr=this.sourceCaches[Pt.source];nt[Pt.source]=tr.getRenderableIds(!0).map(function(Lr){return tr.getTileByID(Lr)}).sort(function(Lr,pn){return pn.tileID.overscaledZ-Lr.tileID.overscaledZ||(Lr.tileID.isLessThan(pn.tileID)?-1:1)})}var or=this.crossTileSymbolIndex.addLayer(Pt,nt[Pt.source],m.center.lng);Ae=Ae||or}}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((ee=ee||this._layerOrderChanged||N===0)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(l.browser.now(),m.zoom))&&(this.pauseablePlacement=new Aa(m,this._order,ee,S,N,X,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,nt),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(l.browser.now()),Ze=!0),Ae&&this.pauseablePlacement.placement.setStale()),Ze||Ae)for(var gr=0,Yt=this._order;gr<Yt.length;gr+=1){var br=this._layers[Yt[gr]];br.type==="symbol"&&this.placement.updateLayerOpacities(br,nt[br.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(l.browser.now())},_.prototype._releaseSymbolFadeTiles=function(){for(var m in this.sourceCaches)this.sourceCaches[m].releaseSymbolFadeTiles()},_.prototype.getImages=function(m,S,N){this.imageManager.getImages(S.icons,N),this._updateTilesForChangedImages();var X=this.sourceCaches[S.source];X&&X.setDependencies(S.tileID.key,S.type,S.icons)},_.prototype.getGlyphs=function(m,S,N){this.glyphManager.getGlyphs(S.stacks,N)},_.prototype.getResource=function(m,S,N){return l.makeRequest(S,N)},_}(l.Evented);Us.getSourceType=function(d){return Wt[d]},Us.setSourceType=function(d,_){Wt[d]=_},Us.registerForPluginStateChange=l.registerForPluginStateChange;var ys=l.createLayout([{name:"a_pos",type:"Int16",components:2}]),Oo=To(`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif`,`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}`),qo=To(`uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),Rc=To(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),Hl=To(`varying vec3 v_data;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,0,1);} else {gl_Position=u_matrix*vec4(circle_center,0,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`),sf=To("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),Bf=To(`uniform highp float u_intensity;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,0,1);gl_Position=u_matrix*pos;}`),zf=To(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(0.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),ac=To("varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}","attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_anchor_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);gl_Position=u_matrix*vec4(a_pos,0.0,1.0);gl_Position.xy+=(a_extrude+a_shift)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}"),dc=To("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),O=To("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,0,1);}"),q=To(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_FragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);}`),Le=To(`varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),ve=To(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),ct=To(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`),Lt=To(`varying vec4 v_color;void main() {gl_FragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`),hr=To(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`),lr=To(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),Gr=To(`uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;
#define PI 3.141592653589793
void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"),ii=To(`uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}`),fi=To(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,v_uv);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_uv_x;attribute float a_split_index;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}`),Na=To(`uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`),vo=To(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}`),Va=To(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),ha=To(`uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0),0.0,1.0);v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;v_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));}`),$o=To(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset),0.0,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`),ms=To(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale),0.0,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`);function To(d,_){var m=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,S=_.match(/attribute ([\w]+) ([\w]+)/g),N=d.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),X=_.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),ee=X?X.concat(N):N,Ae={};return{fragmentSource:d=d.replace(m,function(Ze,nt,Ct,Tt,Pt){return Ae[Pt]=!0,nt==="define"?`
#ifndef HAS_UNIFORM_u_`+Pt+`
varying `+Ct+" "+Tt+" "+Pt+`;
#else
uniform `+Ct+" "+Tt+" u_"+Pt+`;
#endif
`:`
#ifdef HAS_UNIFORM_u_`+Pt+`
    `+Ct+" "+Tt+" "+Pt+" = u_"+Pt+`;
#endif
`}),vertexSource:_=_.replace(m,function(Ze,nt,Ct,Tt,Pt){var tr=Tt==="float"?"vec2":"vec4",or=Pt.match(/color/)?"color":tr;return Ae[Pt]?nt==="define"?`
#ifndef HAS_UNIFORM_u_`+Pt+`
uniform lowp float u_`+Pt+`_t;
attribute `+Ct+" "+tr+" a_"+Pt+`;
varying `+Ct+" "+Tt+" "+Pt+`;
#else
uniform `+Ct+" "+Tt+" u_"+Pt+`;
#endif
`:or==="vec4"?`
#ifndef HAS_UNIFORM_u_`+Pt+`
    `+Pt+" = a_"+Pt+`;
#else
    `+Ct+" "+Tt+" "+Pt+" = u_"+Pt+`;
#endif
`:`
#ifndef HAS_UNIFORM_u_`+Pt+`
    `+Pt+" = unpack_mix_"+or+"(a_"+Pt+", u_"+Pt+`_t);
#else
    `+Ct+" "+Tt+" "+Pt+" = u_"+Pt+`;
#endif
`:nt==="define"?`
#ifndef HAS_UNIFORM_u_`+Pt+`
uniform lowp float u_`+Pt+`_t;
attribute `+Ct+" "+tr+" a_"+Pt+`;
#else
uniform `+Ct+" "+Tt+" u_"+Pt+`;
#endif
`:or==="vec4"?`
#ifndef HAS_UNIFORM_u_`+Pt+`
    `+Ct+" "+Tt+" "+Pt+" = a_"+Pt+`;
#else
    `+Ct+" "+Tt+" "+Pt+" = u_"+Pt+`;
#endif
`:`
#ifndef HAS_UNIFORM_u_`+Pt+`
    `+Ct+" "+Tt+" "+Pt+" = unpack_mix_"+or+"(a_"+Pt+", u_"+Pt+`_t);
#else
    `+Ct+" "+Tt+" "+Pt+" = u_"+Pt+`;
#endif
`}),staticAttributes:S,staticUniforms:ee}}var Qs=Object.freeze({__proto__:null,prelude:Oo,background:qo,backgroundPattern:Rc,circle:Hl,clippingMask:sf,heatmap:Bf,heatmapTexture:zf,collisionBox:ac,collisionCircle:dc,debug:O,fill:q,fillOutline:Le,fillOutlinePattern:ve,fillPattern:ct,fillExtrusion:Lt,fillExtrusionPattern:hr,hillshadePrepare:lr,hillshade:Gr,line:ii,lineGradient:fi,linePattern:Na,lineSDF:vo,raster:Va,symbolIcon:ha,symbolSDF:$o,symbolTextAndIcon:ms}),Wl=function(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null};function Pc(d){for(var _=[],m=0;m<d.length;m++)if(d[m]!==null){var S=d[m].split(" ");_.push(S.pop())}return _}Wl.prototype.bind=function(d,_,m,S,N,X,ee,Ae){this.context=d;for(var Ze=this.boundPaintVertexBuffers.length!==S.length,nt=0;!Ze&&nt<S.length;nt++)this.boundPaintVertexBuffers[nt]!==S[nt]&&(Ze=!0);d.extVertexArrayObject&&this.vao&&this.boundProgram===_&&this.boundLayoutVertexBuffer===m&&!Ze&&this.boundIndexBuffer===N&&this.boundVertexOffset===X&&this.boundDynamicVertexBuffer===ee&&this.boundDynamicVertexBuffer2===Ae?(d.bindVertexArrayOES.set(this.vao),ee&&ee.bind(),N&&N.dynamicDraw&&N.bind(),Ae&&Ae.bind()):this.freshBind(_,m,S,N,X,ee,Ae)},Wl.prototype.freshBind=function(d,_,m,S,N,X,ee){var Ae,Ze=d.numAttributes,nt=this.context,Ct=nt.gl;if(nt.extVertexArrayObject)this.vao&&this.destroy(),this.vao=nt.extVertexArrayObject.createVertexArrayOES(),nt.bindVertexArrayOES.set(this.vao),Ae=0,this.boundProgram=d,this.boundLayoutVertexBuffer=_,this.boundPaintVertexBuffers=m,this.boundIndexBuffer=S,this.boundVertexOffset=N,this.boundDynamicVertexBuffer=X,this.boundDynamicVertexBuffer2=ee;else{Ae=nt.currentNumAttributes||0;for(var Tt=Ze;Tt<Ae;Tt++)Ct.disableVertexAttribArray(Tt)}_.enableAttributes(Ct,d);for(var Pt=0,tr=m;Pt<tr.length;Pt+=1)tr[Pt].enableAttributes(Ct,d);X&&X.enableAttributes(Ct,d),ee&&ee.enableAttributes(Ct,d),_.bind(),_.setVertexAttribPointers(Ct,d,N);for(var or=0,gr=m;or<gr.length;or+=1){var Yt=gr[or];Yt.bind(),Yt.setVertexAttribPointers(Ct,d,N)}X&&(X.bind(),X.setVertexAttribPointers(Ct,d,N)),S&&S.bind(),ee&&(ee.bind(),ee.setVertexAttribPointers(Ct,d,N)),nt.currentNumAttributes=Ze},Wl.prototype.destroy=function(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)};var Js=function(d,_,m,S,N,X){var ee=d.gl;this.program=ee.createProgram();for(var Ae=Pc(m.staticAttributes),Ze=S?S.getBinderAttributes():[],nt=Ae.concat(Ze),Ct=m.staticUniforms?Pc(m.staticUniforms):[],Tt=S?S.getBinderUniforms():[],Pt=[],tr=0,or=Ct.concat(Tt);tr<or.length;tr+=1){var gr=or[tr];Pt.indexOf(gr)<0&&Pt.push(gr)}var Yt=S?S.defines():[];X&&Yt.push("#define OVERDRAW_INSPECTOR;");var br=Yt.concat(Oo.fragmentSource,m.fragmentSource).join(`
`),Lr=Yt.concat(Oo.vertexSource,m.vertexSource).join(`
`),pn=ee.createShader(ee.FRAGMENT_SHADER);if(ee.isContextLost())this.failedToCreate=!0;else{ee.shaderSource(pn,br),ee.compileShader(pn),ee.attachShader(this.program,pn);var zn=ee.createShader(ee.VERTEX_SHADER);if(ee.isContextLost())this.failedToCreate=!0;else{ee.shaderSource(zn,Lr),ee.compileShader(zn),ee.attachShader(this.program,zn),this.attributes={};var Nn={};this.numAttributes=nt.length;for(var Xn=0;Xn<this.numAttributes;Xn++)nt[Xn]&&(ee.bindAttribLocation(this.program,Xn,nt[Xn]),this.attributes[nt[Xn]]=Xn);ee.linkProgram(this.program),ee.deleteShader(zn),ee.deleteShader(pn);for(var yi=0;yi<Pt.length;yi++){var Li=Pt[yi];if(Li&&!Nn[Li]){var Ei=ee.getUniformLocation(this.program,Li);Ei&&(Nn[Li]=Ei)}}this.fixedUniforms=N(d,Nn),this.binderUniforms=S?S.getUniforms(d,Nn):[]}}};function Tl(d,_,m){var S=1/rs(m,1,_.transform.tileZoom),N=Math.pow(2,m.tileID.overscaledZ),X=m.tileSize*Math.pow(2,_.transform.tileZoom)/N,ee=X*(m.tileID.canonical.x+m.tileID.wrap*N),Ae=X*m.tileID.canonical.y;return{u_image:0,u_texsize:m.imageAtlasTexture.size,u_scale:[S,d.fromScale,d.toScale],u_fade:d.t,u_pixel_coord_upper:[ee>>16,Ae>>16],u_pixel_coord_lower:[65535&ee,65535&Ae]}}Js.prototype.draw=function(d,_,m,S,N,X,ee,Ae,Ze,nt,Ct,Tt,Pt,tr,or,gr){var Yt,br=d.gl;if(!this.failedToCreate){for(var Lr in d.program.set(this.program),d.setDepthMode(m),d.setStencilMode(S),d.setColorMode(N),d.setCullFace(X),this.fixedUniforms)this.fixedUniforms[Lr].set(ee[Lr]);tr&&tr.setUniforms(d,this.binderUniforms,Tt,{zoom:Pt});for(var pn=(Yt={},Yt[br.LINES]=2,Yt[br.TRIANGLES]=3,Yt[br.LINE_STRIP]=1,Yt)[_],zn=0,Nn=Ct.get();zn<Nn.length;zn+=1){var Xn=Nn[zn],yi=Xn.vaos||(Xn.vaos={});(yi[Ae]||(yi[Ae]=new Wl)).bind(d,this,Ze,tr?tr.getPaintVertexBuffers():[],nt,Xn.vertexOffset,or,gr),br.drawElements(_,Xn.primitiveLength*pn,br.UNSIGNED_SHORT,Xn.primitiveOffset*pn*2)}}};var bf=function(d,_,m,S){var N=_.style.light,X=N.properties.get("position"),ee=[X.x,X.y,X.z],Ae=l.create$1();N.properties.get("anchor")==="viewport"&&l.fromRotation(Ae,-_.transform.angle),l.transformMat3(ee,ee,Ae);var Ze=N.properties.get("color");return{u_matrix:d,u_lightpos:ee,u_lightintensity:N.properties.get("intensity"),u_lightcolor:[Ze.r,Ze.g,Ze.b],u_vertical_gradient:+m,u_opacity:S}},Zc=function(d,_,m,S,N,X,ee){return l.extend(bf(d,_,m,S),Tl(X,_,ee),{u_height_factor:-Math.pow(2,N.overscaledZ)/ee.tileSize/8})},vc=function(d){return{u_matrix:d}},jc=function(d,_,m,S){return l.extend(vc(d),Tl(m,_,S))},bu=function(d,_){return{u_matrix:d,u_world:_}},cp=function(d,_,m,S,N){return l.extend(jc(d,_,m,S),{u_world:N})},Yf=function(d,_,m,S){var N,X,ee=d.transform;if(S.paint.get("circle-pitch-alignment")==="map"){var Ae=rs(m,1,ee.zoom);N=!0,X=[Ae,Ae]}else N=!1,X=ee.pixelsToGLUnits;return{u_camera_to_center_distance:ee.cameraToCenterDistance,u_scale_with_map:+(S.paint.get("circle-pitch-scale")==="map"),u_matrix:d.translatePosMatrix(_.posMatrix,m,S.paint.get("circle-translate"),S.paint.get("circle-translate-anchor")),u_pitch_with_map:+N,u_device_pixel_ratio:l.browser.devicePixelRatio,u_extrude_scale:X}},Ju=function(d,_,m){var S=rs(m,1,_.zoom),N=Math.pow(2,_.zoom-m.tileID.overscaledZ),X=m.tileID.overscaleFactor();return{u_matrix:d,u_camera_to_center_distance:_.cameraToCenterDistance,u_pixels_to_tile_units:S,u_extrude_scale:[_.pixelsToGLUnits[0]/(S*N),_.pixelsToGLUnits[1]/(S*N)],u_overscale_factor:X}},Vc=function(d,_,m){return{u_matrix:d,u_inv_matrix:_,u_camera_to_center_distance:m.cameraToCenterDistance,u_viewport_size:[m.width,m.height]}},Gc=function(d,_,m){return m===void 0&&(m=1),{u_matrix:d,u_color:_,u_overlay:0,u_overlay_scale:m}},ju=function(d){return{u_matrix:d}},fp=function(d,_,m,S){return{u_matrix:d,u_extrude_scale:rs(_,1,m),u_intensity:S}},$l=function(d,_,m){var S=d.transform;return{u_matrix:Xl(d,_,m),u_ratio:1/rs(_,1,S.zoom),u_device_pixel_ratio:l.browser.devicePixelRatio,u_units_to_pixels:[1/S.pixelsToGLUnits[0],1/S.pixelsToGLUnits[1]]}},Rs=function(d,_,m,S){return l.extend($l(d,_,m),{u_image:0,u_image_height:S})},Ml=function(d,_,m,S){var N=d.transform,X=Hc(_,N);return{u_matrix:Xl(d,_,m),u_texsize:_.imageAtlasTexture.size,u_ratio:1/rs(_,1,N.zoom),u_device_pixel_ratio:l.browser.devicePixelRatio,u_image:0,u_scale:[X,S.fromScale,S.toScale],u_fade:S.t,u_units_to_pixels:[1/N.pixelsToGLUnits[0],1/N.pixelsToGLUnits[1]]}},Ef=function(d,_,m,S,N){var X=d.lineAtlas,ee=Hc(_,d.transform),Ae=m.layout.get("line-cap")==="round",Ze=X.getDash(S.from,Ae),nt=X.getDash(S.to,Ae),Ct=Ze.width*N.fromScale,Tt=nt.width*N.toScale;return l.extend($l(d,_,m),{u_patternscale_a:[ee/Ct,-Ze.height/2],u_patternscale_b:[ee/Tt,-nt.height/2],u_sdfgamma:X.width/(256*Math.min(Ct,Tt)*l.browser.devicePixelRatio)/2,u_image:0,u_tex_y_a:Ze.y,u_tex_y_b:nt.y,u_mix:N.t})};function Hc(d,_){return 1/rs(d,1,_.tileZoom)}function Xl(d,_,m){return d.translatePosMatrix(_.tileID.posMatrix,_,m.paint.get("line-translate"),m.paint.get("line-translate-anchor"))}var ah=function(d,_,m,S,N){return{u_matrix:d,u_tl_parent:_,u_scale_parent:m,u_buffer_scale:1,u_fade_t:S.mix,u_opacity:S.opacity*N.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:N.paint.get("raster-brightness-min"),u_brightness_high:N.paint.get("raster-brightness-max"),u_saturation_factor:(ee=N.paint.get("raster-saturation"),ee>0?1-1/(1.001-ee):-ee),u_contrast_factor:(X=N.paint.get("raster-contrast"),X>0?1/(1-X):1+X),u_spin_weights:Kf(N.paint.get("raster-hue-rotate"))};var X,ee};function Kf(d){d*=Math.PI/180;var _=Math.sin(d),m=Math.cos(d);return[(2*m+1)/3,(-Math.sqrt(3)*_-m+1)/3,(Math.sqrt(3)*_-m+1)/3]}var Ll,Wc=function(d,_,m,S,N,X,ee,Ae,Ze,nt){var Ct=N.transform;return{u_is_size_zoom_constant:+(d==="constant"||d==="source"),u_is_size_feature_constant:+(d==="constant"||d==="camera"),u_size_t:_?_.uSizeT:0,u_size:_?_.uSize:0,u_camera_to_center_distance:Ct.cameraToCenterDistance,u_pitch:Ct.pitch/360*2*Math.PI,u_rotate_symbol:+m,u_aspect_ratio:Ct.width/Ct.height,u_fade_change:N.options.fadeDuration?N.symbolFadeChange:1,u_matrix:X,u_label_plane_matrix:ee,u_coord_matrix:Ae,u_is_text:+Ze,u_pitch_with_map:+S,u_texsize:nt,u_texture:0}},uu=function(d,_,m,S,N,X,ee,Ae,Ze,nt,Ct){var Tt=N.transform;return l.extend(Wc(d,_,m,S,N,X,ee,Ae,Ze,nt),{u_gamma_scale:S?Math.cos(Tt._pitch)*Tt.cameraToCenterDistance:1,u_device_pixel_ratio:l.browser.devicePixelRatio,u_is_halo:+Ct})},hs=function(d,_,m,S,N,X,ee,Ae,Ze,nt){return l.extend(uu(d,_,m,S,N,X,ee,Ae,!0,Ze,!0),{u_texsize_icon:nt,u_texture_icon:1})},kc=function(d,_,m){return{u_matrix:d,u_opacity:_,u_color:m}},oc=function(d,_,m,S,N,X){return l.extend(function(ee,Ae,Ze,nt){var Ct=Ze.imageManager.getPattern(ee.from.toString()),Tt=Ze.imageManager.getPattern(ee.to.toString()),Pt=Ze.imageManager.getPixelSize(),tr=Pt.width,or=Pt.height,gr=Math.pow(2,nt.tileID.overscaledZ),Yt=nt.tileSize*Math.pow(2,Ze.transform.tileZoom)/gr,br=Yt*(nt.tileID.canonical.x+nt.tileID.wrap*gr),Lr=Yt*nt.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:Ct.tl,u_pattern_br_a:Ct.br,u_pattern_tl_b:Tt.tl,u_pattern_br_b:Tt.br,u_texsize:[tr,or],u_mix:Ae.t,u_pattern_size_a:Ct.displaySize,u_pattern_size_b:Tt.displaySize,u_scale_a:Ae.fromScale,u_scale_b:Ae.toScale,u_tile_units_to_pixels:1/rs(nt,1,Ze.transform.tileZoom),u_pixel_coord_upper:[br>>16,Lr>>16],u_pixel_coord_lower:[65535&br,65535&Lr]}}(S,X,m,N),{u_matrix:d,u_opacity:_})},uf={fillExtrusion:function(d,_){return{u_matrix:new l.UniformMatrix4f(d,_.u_matrix),u_lightpos:new l.Uniform3f(d,_.u_lightpos),u_lightintensity:new l.Uniform1f(d,_.u_lightintensity),u_lightcolor:new l.Uniform3f(d,_.u_lightcolor),u_vertical_gradient:new l.Uniform1f(d,_.u_vertical_gradient),u_opacity:new l.Uniform1f(d,_.u_opacity)}},fillExtrusionPattern:function(d,_){return{u_matrix:new l.UniformMatrix4f(d,_.u_matrix),u_lightpos:new l.Uniform3f(d,_.u_lightpos),u_lightintensity:new l.Uniform1f(d,_.u_lightintensity),u_lightcolor:new l.Uniform3f(d,_.u_lightcolor),u_vertical_gradient:new l.Uniform1f(d,_.u_vertical_gradient),u_height_factor:new l.Uniform1f(d,_.u_height_factor),u_image:new l.Uniform1i(d,_.u_image),u_texsize:new l.Uniform2f(d,_.u_texsize),u_pixel_coord_upper:new l.Uniform2f(d,_.u_pixel_coord_upper),u_pixel_coord_lower:new l.Uniform2f(d,_.u_pixel_coord_lower),u_scale:new l.Uniform3f(d,_.u_scale),u_fade:new l.Uniform1f(d,_.u_fade),u_opacity:new l.Uniform1f(d,_.u_opacity)}},fill:function(d,_){return{u_matrix:new l.UniformMatrix4f(d,_.u_matrix)}},fillPattern:function(d,_){return{u_matrix:new l.UniformMatrix4f(d,_.u_matrix),u_image:new l.Uniform1i(d,_.u_image),u_texsize:new l.Uniform2f(d,_.u_texsize),u_pixel_coord_upper:new l.Uniform2f(d,_.u_pixel_coord_upper),u_pixel_coord_lower:new l.Uniform2f(d,_.u_pixel_coord_lower),u_scale:new l.Uniform3f(d,_.u_scale),u_fade:new l.Uniform1f(d,_.u_fade)}},fillOutline:function(d,_){return{u_matrix:new l.UniformMatrix4f(d,_.u_matrix),u_world:new l.Uniform2f(d,_.u_world)}},fillOutlinePattern:function(d,_){return{u_matrix:new l.UniformMatrix4f(d,_.u_matrix),u_world:new l.Uniform2f(d,_.u_world),u_image:new l.Uniform1i(d,_.u_image),u_texsize:new l.Uniform2f(d,_.u_texsize),u_pixel_coord_upper:new l.Uniform2f(d,_.u_pixel_coord_upper),u_pixel_coord_lower:new l.Uniform2f(d,_.u_pixel_coord_lower),u_scale:new l.Uniform3f(d,_.u_scale),u_fade:new l.Uniform1f(d,_.u_fade)}},circle:function(d,_){return{u_camera_to_center_distance:new l.Uniform1f(d,_.u_camera_to_center_distance),u_scale_with_map:new l.Uniform1i(d,_.u_scale_with_map),u_pitch_with_map:new l.Uniform1i(d,_.u_pitch_with_map),u_extrude_scale:new l.Uniform2f(d,_.u_extrude_scale),u_device_pixel_ratio:new l.Uniform1f(d,_.u_device_pixel_ratio),u_matrix:new l.UniformMatrix4f(d,_.u_matrix)}},collisionBox:function(d,_){return{u_matrix:new l.UniformMatrix4f(d,_.u_matrix),u_camera_to_center_distance:new l.Uniform1f(d,_.u_camera_to_center_distance),u_pixels_to_tile_units:new l.Uniform1f(d,_.u_pixels_to_tile_units),u_extrude_scale:new l.Uniform2f(d,_.u_extrude_scale),u_overscale_factor:new l.Uniform1f(d,_.u_overscale_factor)}},collisionCircle:function(d,_){return{u_matrix:new l.UniformMatrix4f(d,_.u_matrix),u_inv_matrix:new l.UniformMatrix4f(d,_.u_inv_matrix),u_camera_to_center_distance:new l.Uniform1f(d,_.u_camera_to_center_distance),u_viewport_size:new l.Uniform2f(d,_.u_viewport_size)}},debug:function(d,_){return{u_color:new l.UniformColor(d,_.u_color),u_matrix:new l.UniformMatrix4f(d,_.u_matrix),u_overlay:new l.Uniform1i(d,_.u_overlay),u_overlay_scale:new l.Uniform1f(d,_.u_overlay_scale)}},clippingMask:function(d,_){return{u_matrix:new l.UniformMatrix4f(d,_.u_matrix)}},heatmap:function(d,_){return{u_extrude_scale:new l.Uniform1f(d,_.u_extrude_scale),u_intensity:new l.Uniform1f(d,_.u_intensity),u_matrix:new l.UniformMatrix4f(d,_.u_matrix)}},heatmapTexture:function(d,_){return{u_matrix:new l.UniformMatrix4f(d,_.u_matrix),u_world:new l.Uniform2f(d,_.u_world),u_image:new l.Uniform1i(d,_.u_image),u_color_ramp:new l.Uniform1i(d,_.u_color_ramp),u_opacity:new l.Uniform1f(d,_.u_opacity)}},hillshade:function(d,_){return{u_matrix:new l.UniformMatrix4f(d,_.u_matrix),u_image:new l.Uniform1i(d,_.u_image),u_latrange:new l.Uniform2f(d,_.u_latrange),u_light:new l.Uniform2f(d,_.u_light),u_shadow:new l.UniformColor(d,_.u_shadow),u_highlight:new l.UniformColor(d,_.u_highlight),u_accent:new l.UniformColor(d,_.u_accent)}},hillshadePrepare:function(d,_){return{u_matrix:new l.UniformMatrix4f(d,_.u_matrix),u_image:new l.Uniform1i(d,_.u_image),u_dimension:new l.Uniform2f(d,_.u_dimension),u_zoom:new l.Uniform1f(d,_.u_zoom),u_unpack:new l.Uniform4f(d,_.u_unpack)}},line:function(d,_){return{u_matrix:new l.UniformMatrix4f(d,_.u_matrix),u_ratio:new l.Uniform1f(d,_.u_ratio),u_device_pixel_ratio:new l.Uniform1f(d,_.u_device_pixel_ratio),u_units_to_pixels:new l.Uniform2f(d,_.u_units_to_pixels)}},lineGradient:function(d,_){return{u_matrix:new l.UniformMatrix4f(d,_.u_matrix),u_ratio:new l.Uniform1f(d,_.u_ratio),u_device_pixel_ratio:new l.Uniform1f(d,_.u_device_pixel_ratio),u_units_to_pixels:new l.Uniform2f(d,_.u_units_to_pixels),u_image:new l.Uniform1i(d,_.u_image),u_image_height:new l.Uniform1f(d,_.u_image_height)}},linePattern:function(d,_){return{u_matrix:new l.UniformMatrix4f(d,_.u_matrix),u_texsize:new l.Uniform2f(d,_.u_texsize),u_ratio:new l.Uniform1f(d,_.u_ratio),u_device_pixel_ratio:new l.Uniform1f(d,_.u_device_pixel_ratio),u_image:new l.Uniform1i(d,_.u_image),u_units_to_pixels:new l.Uniform2f(d,_.u_units_to_pixels),u_scale:new l.Uniform3f(d,_.u_scale),u_fade:new l.Uniform1f(d,_.u_fade)}},lineSDF:function(d,_){return{u_matrix:new l.UniformMatrix4f(d,_.u_matrix),u_ratio:new l.Uniform1f(d,_.u_ratio),u_device_pixel_ratio:new l.Uniform1f(d,_.u_device_pixel_ratio),u_units_to_pixels:new l.Uniform2f(d,_.u_units_to_pixels),u_patternscale_a:new l.Uniform2f(d,_.u_patternscale_a),u_patternscale_b:new l.Uniform2f(d,_.u_patternscale_b),u_sdfgamma:new l.Uniform1f(d,_.u_sdfgamma),u_image:new l.Uniform1i(d,_.u_image),u_tex_y_a:new l.Uniform1f(d,_.u_tex_y_a),u_tex_y_b:new l.Uniform1f(d,_.u_tex_y_b),u_mix:new l.Uniform1f(d,_.u_mix)}},raster:function(d,_){return{u_matrix:new l.UniformMatrix4f(d,_.u_matrix),u_tl_parent:new l.Uniform2f(d,_.u_tl_parent),u_scale_parent:new l.Uniform1f(d,_.u_scale_parent),u_buffer_scale:new l.Uniform1f(d,_.u_buffer_scale),u_fade_t:new l.Uniform1f(d,_.u_fade_t),u_opacity:new l.Uniform1f(d,_.u_opacity),u_image0:new l.Uniform1i(d,_.u_image0),u_image1:new l.Uniform1i(d,_.u_image1),u_brightness_low:new l.Uniform1f(d,_.u_brightness_low),u_brightness_high:new l.Uniform1f(d,_.u_brightness_high),u_saturation_factor:new l.Uniform1f(d,_.u_saturation_factor),u_contrast_factor:new l.Uniform1f(d,_.u_contrast_factor),u_spin_weights:new l.Uniform3f(d,_.u_spin_weights)}},symbolIcon:function(d,_){return{u_is_size_zoom_constant:new l.Uniform1i(d,_.u_is_size_zoom_constant),u_is_size_feature_constant:new l.Uniform1i(d,_.u_is_size_feature_constant),u_size_t:new l.Uniform1f(d,_.u_size_t),u_size:new l.Uniform1f(d,_.u_size),u_camera_to_center_distance:new l.Uniform1f(d,_.u_camera_to_center_distance),u_pitch:new l.Uniform1f(d,_.u_pitch),u_rotate_symbol:new l.Uniform1i(d,_.u_rotate_symbol),u_aspect_ratio:new l.Uniform1f(d,_.u_aspect_ratio),u_fade_change:new l.Uniform1f(d,_.u_fade_change),u_matrix:new l.UniformMatrix4f(d,_.u_matrix),u_label_plane_matrix:new l.UniformMatrix4f(d,_.u_label_plane_matrix),u_coord_matrix:new l.UniformMatrix4f(d,_.u_coord_matrix),u_is_text:new l.Uniform1i(d,_.u_is_text),u_pitch_with_map:new l.Uniform1i(d,_.u_pitch_with_map),u_texsize:new l.Uniform2f(d,_.u_texsize),u_texture:new l.Uniform1i(d,_.u_texture)}},symbolSDF:function(d,_){return{u_is_size_zoom_constant:new l.Uniform1i(d,_.u_is_size_zoom_constant),u_is_size_feature_constant:new l.Uniform1i(d,_.u_is_size_feature_constant),u_size_t:new l.Uniform1f(d,_.u_size_t),u_size:new l.Uniform1f(d,_.u_size),u_camera_to_center_distance:new l.Uniform1f(d,_.u_camera_to_center_distance),u_pitch:new l.Uniform1f(d,_.u_pitch),u_rotate_symbol:new l.Uniform1i(d,_.u_rotate_symbol),u_aspect_ratio:new l.Uniform1f(d,_.u_aspect_ratio),u_fade_change:new l.Uniform1f(d,_.u_fade_change),u_matrix:new l.UniformMatrix4f(d,_.u_matrix),u_label_plane_matrix:new l.UniformMatrix4f(d,_.u_label_plane_matrix),u_coord_matrix:new l.UniformMatrix4f(d,_.u_coord_matrix),u_is_text:new l.Uniform1i(d,_.u_is_text),u_pitch_with_map:new l.Uniform1i(d,_.u_pitch_with_map),u_texsize:new l.Uniform2f(d,_.u_texsize),u_texture:new l.Uniform1i(d,_.u_texture),u_gamma_scale:new l.Uniform1f(d,_.u_gamma_scale),u_device_pixel_ratio:new l.Uniform1f(d,_.u_device_pixel_ratio),u_is_halo:new l.Uniform1i(d,_.u_is_halo)}},symbolTextAndIcon:function(d,_){return{u_is_size_zoom_constant:new l.Uniform1i(d,_.u_is_size_zoom_constant),u_is_size_feature_constant:new l.Uniform1i(d,_.u_is_size_feature_constant),u_size_t:new l.Uniform1f(d,_.u_size_t),u_size:new l.Uniform1f(d,_.u_size),u_camera_to_center_distance:new l.Uniform1f(d,_.u_camera_to_center_distance),u_pitch:new l.Uniform1f(d,_.u_pitch),u_rotate_symbol:new l.Uniform1i(d,_.u_rotate_symbol),u_aspect_ratio:new l.Uniform1f(d,_.u_aspect_ratio),u_fade_change:new l.Uniform1f(d,_.u_fade_change),u_matrix:new l.UniformMatrix4f(d,_.u_matrix),u_label_plane_matrix:new l.UniformMatrix4f(d,_.u_label_plane_matrix),u_coord_matrix:new l.UniformMatrix4f(d,_.u_coord_matrix),u_is_text:new l.Uniform1i(d,_.u_is_text),u_pitch_with_map:new l.Uniform1i(d,_.u_pitch_with_map),u_texsize:new l.Uniform2f(d,_.u_texsize),u_texsize_icon:new l.Uniform2f(d,_.u_texsize_icon),u_texture:new l.Uniform1i(d,_.u_texture),u_texture_icon:new l.Uniform1i(d,_.u_texture_icon),u_gamma_scale:new l.Uniform1f(d,_.u_gamma_scale),u_device_pixel_ratio:new l.Uniform1f(d,_.u_device_pixel_ratio),u_is_halo:new l.Uniform1i(d,_.u_is_halo)}},background:function(d,_){return{u_matrix:new l.UniformMatrix4f(d,_.u_matrix),u_opacity:new l.Uniform1f(d,_.u_opacity),u_color:new l.UniformColor(d,_.u_color)}},backgroundPattern:function(d,_){return{u_matrix:new l.UniformMatrix4f(d,_.u_matrix),u_opacity:new l.Uniform1f(d,_.u_opacity),u_image:new l.Uniform1i(d,_.u_image),u_pattern_tl_a:new l.Uniform2f(d,_.u_pattern_tl_a),u_pattern_br_a:new l.Uniform2f(d,_.u_pattern_br_a),u_pattern_tl_b:new l.Uniform2f(d,_.u_pattern_tl_b),u_pattern_br_b:new l.Uniform2f(d,_.u_pattern_br_b),u_texsize:new l.Uniform2f(d,_.u_texsize),u_mix:new l.Uniform1f(d,_.u_mix),u_pattern_size_a:new l.Uniform2f(d,_.u_pattern_size_a),u_pattern_size_b:new l.Uniform2f(d,_.u_pattern_size_b),u_scale_a:new l.Uniform1f(d,_.u_scale_a),u_scale_b:new l.Uniform1f(d,_.u_scale_b),u_pixel_coord_upper:new l.Uniform2f(d,_.u_pixel_coord_upper),u_pixel_coord_lower:new l.Uniform2f(d,_.u_pixel_coord_lower),u_tile_units_to_pixels:new l.Uniform1f(d,_.u_tile_units_to_pixels)}}};function mc(d,_,m,S,N,X,ee){for(var Ae=d.context,Ze=Ae.gl,nt=d.useProgram("collisionBox"),Ct=[],Tt=0,Pt=0,tr=0;tr<S.length;tr++){var or=S[tr],gr=_.getTile(or),Yt=gr.getBucket(m);if(Yt){var br=or.posMatrix;N[0]===0&&N[1]===0||(br=d.translatePosMatrix(or.posMatrix,gr,N,X));var Lr=ee?Yt.textCollisionBox:Yt.iconCollisionBox,pn=Yt.collisionCircleArray;if(pn.length>0){var zn=l.create(),Nn=br;l.mul(zn,Yt.placementInvProjMatrix,d.transform.glCoordMatrix),l.mul(zn,zn,Yt.placementViewportMatrix),Ct.push({circleArray:pn,circleOffset:Pt,transform:Nn,invTransform:zn}),Pt=Tt+=pn.length/4}Lr&&nt.draw(Ae,Ze.LINES,ht.disabled,Et.disabled,d.colorModeForRenderPass(),sr.disabled,Ju(br,d.transform,gr),m.id,Lr.layoutVertexBuffer,Lr.indexBuffer,Lr.segments,null,d.transform.zoom,null,null,Lr.collisionVertexBuffer)}}if(ee&&Ct.length){var Xn=d.useProgram("collisionCircle"),yi=new l.StructArrayLayout2f1f2i16;yi.resize(4*Tt),yi._trim();for(var Li=0,Ei=0,Vi=Ct;Ei<Vi.length;Ei+=1)for(var Ea=Vi[Ei],Qa=0;Qa<Ea.circleArray.length/4;Qa++){var Ga=4*Qa,io=Ea.circleArray[Ga+0],ya=Ea.circleArray[Ga+1],yo=Ea.circleArray[Ga+2],_o=Ea.circleArray[Ga+3];yi.emplace(Li++,io,ya,yo,_o,0),yi.emplace(Li++,io,ya,yo,_o,1),yi.emplace(Li++,io,ya,yo,_o,2),yi.emplace(Li++,io,ya,yo,_o,3)}(!Ll||Ll.length<2*Tt)&&(Ll=function(co){var es=2*co,ru=new l.StructArrayLayout3ui6;ru.resize(es),ru._trim();for(var pu=0;pu<es;pu++){var Ts=6*pu;ru.uint16[Ts+0]=4*pu+0,ru.uint16[Ts+1]=4*pu+1,ru.uint16[Ts+2]=4*pu+2,ru.uint16[Ts+3]=4*pu+2,ru.uint16[Ts+4]=4*pu+3,ru.uint16[Ts+5]=4*pu+0}return ru}(Tt));for(var po=Ae.createIndexBuffer(Ll,!0),Ha=Ae.createVertexBuffer(yi,l.collisionCircleLayout.members,!0),Ro=0,eo=Ct;Ro<eo.length;Ro+=1){var Ia=eo[Ro],Gu=Vc(Ia.transform,Ia.invTransform,d.transform);Xn.draw(Ae,Ze.TRIANGLES,ht.disabled,Et.disabled,d.colorModeForRenderPass(),sr.disabled,Gu,m.id,Ha,po,l.SegmentVector.simpleSegment(0,2*Ia.circleOffset,Ia.circleArray.length,Ia.circleArray.length/2),null,d.transform.zoom,null,null,null)}Ha.destroy(),po.destroy()}}var ds=l.identity(new Float32Array(16));function sc(d,_,m,S,N,X){var ee=l.getAnchorAlignment(d),Ae=-(ee.horizontalAlign-.5)*_,Ze=-(ee.verticalAlign-.5)*m,nt=l.evaluateVariableOffset(d,S);return new l.Point((Ae/N+nt[0])*X,(Ze/N+nt[1])*X)}function vl(d,_,m,S,N,X,ee,Ae,Ze,nt,Ct){var Tt=d.text.placedSymbolArray,Pt=d.text.dynamicLayoutVertexArray,tr=d.icon.dynamicLayoutVertexArray,or={};Pt.clear();for(var gr=0;gr<Tt.length;gr++){var Yt=Tt.get(gr),br=Yt.hidden||!Yt.crossTileID||d.allowVerticalPlacement&&!Yt.placedOrientation?null:S[Yt.crossTileID];if(br){var Lr=new l.Point(Yt.anchorX,Yt.anchorY),pn=jn(Lr,m?Ae:ee),zn=rr(X.cameraToCenterDistance,pn.signedDistanceFromCamera),Nn=N.evaluateSizeForFeature(d.textSizeData,nt,Yt)*zn/l.ONE_EM;m&&(Nn*=d.tilePixelRatio/Ze);for(var Xn=sc(br.anchor,br.width,br.height,br.textOffset,br.textBoxScale,Nn),yi=m?jn(Lr.add(Xn),ee).point:pn.point.add(_?Xn.rotate(-X.angle):Xn),Li=d.allowVerticalPlacement&&Yt.placedOrientation===l.WritingMode.vertical?Math.PI/2:0,Ei=0;Ei<Yt.numGlyphs;Ei++)l.addDynamicAttributes(Pt,yi,Li);Ct&&Yt.associatedIconIndex>=0&&(or[Yt.associatedIconIndex]={shiftedAnchor:yi,angle:Li})}else Ru(Yt.numGlyphs,Pt)}if(Ct){tr.clear();for(var Vi=d.icon.placedSymbolArray,Ea=0;Ea<Vi.length;Ea++){var Qa=Vi.get(Ea);if(Qa.hidden)Ru(Qa.numGlyphs,tr);else{var Ga=or[Ea];if(Ga)for(var io=0;io<Qa.numGlyphs;io++)l.addDynamicAttributes(tr,Ga.shiftedAnchor,Ga.angle);else Ru(Qa.numGlyphs,tr)}}d.icon.dynamicLayoutVertexBuffer.updateData(tr)}d.text.dynamicLayoutVertexBuffer.updateData(Pt)}function pp(d,_,m){return m.iconsInText&&_?"symbolTextAndIcon":d?"symbolSDF":"symbolIcon"}function Lc(d,_,m,S,N,X,ee,Ae,Ze,nt,Ct,Tt){for(var Pt=d.context,tr=Pt.gl,or=d.transform,gr=Ae==="map",Yt=Ze==="map",br=gr&&m.layout.get("symbol-placement")!=="point",Lr=gr&&!Yt&&!br,pn=m.layout.get("symbol-sort-key").constantOr(1)!==void 0,zn=!1,Nn=d.depthModeForSublayer(0,ht.ReadOnly),Xn=m.layout.get("text-variable-anchor"),yi=[],Li=0,Ei=S;Li<Ei.length;Li+=1){var Vi=Ei[Li],Ea=_.getTile(Vi),Qa=Ea.getBucket(m);if(Qa){var Ga=N?Qa.text:Qa.icon;if(Ga&&Ga.segments.get().length){var io=Ga.programConfigurations.get(m.id),ya=N||Qa.sdfIcons,yo=N?Qa.textSizeData:Qa.iconSizeData,_o=Yt||or.pitch!==0,po=d.useProgram(pp(ya,N,Qa),io),Ha=l.evaluateSizeForZoom(yo,or.zoom),Ro=void 0,eo=[0,0],Ia=void 0,Gu=void 0,co=null,es=void 0;if(N)Ia=Ea.glyphAtlasTexture,Gu=tr.LINEAR,Ro=Ea.glyphAtlasTexture.size,Qa.iconsInText&&(eo=Ea.imageAtlasTexture.size,co=Ea.imageAtlasTexture,es=_o||d.options.rotating||d.options.zooming||yo.kind==="composite"||yo.kind==="camera"?tr.LINEAR:tr.NEAREST);else{var ru=m.layout.get("icon-size").constantOr(0)!==1||Qa.iconsNeedLinear;Ia=Ea.imageAtlasTexture,Gu=ya||d.options.rotating||d.options.zooming||ru||_o?tr.LINEAR:tr.NEAREST,Ro=Ea.imageAtlasTexture.size}var pu=rs(Ea,1,d.transform.zoom),Ts=No(Vi.posMatrix,Yt,gr,d.transform,pu),rl=ui(Vi.posMatrix,Yt,gr,d.transform,pu),Nu=Xn&&Qa.hasTextData(),zo=m.layout.get("icon-text-fit")!=="none"&&Nu&&Qa.hasIconData();br&&er(Qa,Vi.posMatrix,d,N,Ts,rl,Yt,nt);var An=d.translatePosMatrix(Vi.posMatrix,Ea,X,ee),vu=br||N&&Xn||zo?ds:Ts,Nt=d.translatePosMatrix(rl,Ea,X,ee,!0),gl=ya&&m.paint.get(N?"text-halo-width":"icon-halo-width").constantOr(1)!==0,Xu={program:po,buffers:Ga,uniformValues:ya?Qa.iconsInText?hs(yo.kind,Ha,Lr,Yt,d,An,vu,Nt,Ro,eo):uu(yo.kind,Ha,Lr,Yt,d,An,vu,Nt,N,Ro,!0):Wc(yo.kind,Ha,Lr,Yt,d,An,vu,Nt,N,Ro),atlasTexture:Ia,atlasTextureIcon:co,atlasInterpolation:Gu,atlasInterpolationIcon:es,isSDF:ya,hasHalo:gl};if(pn&&Qa.canOverlap){zn=!0;for(var Sf=0,ip=Ga.segments.get();Sf<ip.length;Sf+=1){var Kc=ip[Sf];yi.push({segments:new l.SegmentVector([Kc]),sortKey:Kc.sortKey,state:Xu})}}else yi.push({segments:Ga.segments,sortKey:0,state:Xu})}}}zn&&yi.sort(function(fc,Jc){return fc.sortKey-Jc.sortKey});for(var fl=0,Qc=yi;fl<Qc.length;fl+=1){var Sc=Qc[fl],Lu=Sc.state;if(Pt.activeTexture.set(tr.TEXTURE0),Lu.atlasTexture.bind(Lu.atlasInterpolation,tr.CLAMP_TO_EDGE),Lu.atlasTextureIcon&&(Pt.activeTexture.set(tr.TEXTURE1),Lu.atlasTextureIcon&&Lu.atlasTextureIcon.bind(Lu.atlasInterpolationIcon,tr.CLAMP_TO_EDGE)),Lu.isSDF){var Fl=Lu.uniformValues;Lu.hasHalo&&(Fl.u_is_halo=1,uc(Lu.buffers,Sc.segments,m,d,Lu.program,Nn,Ct,Tt,Fl)),Fl.u_is_halo=0}uc(Lu.buffers,Sc.segments,m,d,Lu.program,Nn,Ct,Tt,Lu.uniformValues)}}function uc(d,_,m,S,N,X,ee,Ae,Ze){var nt=S.context;N.draw(nt,nt.gl.TRIANGLES,X,ee,Ae,sr.disabled,Ze,m.id,d.layoutVertexBuffer,d.indexBuffer,_,m.paint,S.transform.zoom,d.programConfigurations.get(m.id),d.dynamicLayoutVertexBuffer,d.opacityVertexBuffer)}function Qf(d,_,m,S,N,X,ee){var Ae,Ze,nt,Ct,Tt,Pt=d.context.gl,tr=m.paint.get("fill-pattern"),or=tr&&tr.constantOr(1),gr=m.getCrossfadeParameters();ee?(Ze=or&&!m.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",Ae=Pt.LINES):(Ze=or?"fillPattern":"fill",Ae=Pt.TRIANGLES);for(var Yt=0,br=S;Yt<br.length;Yt+=1){var Lr=br[Yt],pn=_.getTile(Lr);if(!or||pn.patternsLoaded()){var zn=pn.getBucket(m);if(zn){var Nn=zn.programConfigurations.get(m.id),Xn=d.useProgram(Ze,Nn);or&&(d.context.activeTexture.set(Pt.TEXTURE0),pn.imageAtlasTexture.bind(Pt.LINEAR,Pt.CLAMP_TO_EDGE),Nn.updatePaintBuffers(gr));var yi=tr.constantOr(null);if(yi&&pn.imageAtlas){var Li=pn.imageAtlas,Ei=Li.patternPositions[yi.to.toString()],Vi=Li.patternPositions[yi.from.toString()];Ei&&Vi&&Nn.setConstantPatternPositions(Ei,Vi)}var Ea=d.translatePosMatrix(Lr.posMatrix,pn,m.paint.get("fill-translate"),m.paint.get("fill-translate-anchor"));if(ee){Ct=zn.indexBuffer2,Tt=zn.segments2;var Qa=[Pt.drawingBufferWidth,Pt.drawingBufferHeight];nt=Ze==="fillOutlinePattern"&&or?cp(Ea,d,gr,pn,Qa):bu(Ea,Qa)}else Ct=zn.indexBuffer,Tt=zn.segments,nt=or?jc(Ea,d,gr,pn):vc(Ea);Xn.draw(d.context,Ae,N,d.stencilModeForClipping(Lr),X,sr.disabled,nt,m.id,zn.layoutVertexBuffer,Ct,Tt,m.paint,d.transform.zoom,Nn)}}}}function Yl(d,_,m,S,N,X,ee){for(var Ae=d.context,Ze=Ae.gl,nt=m.paint.get("fill-extrusion-pattern"),Ct=nt.constantOr(1),Tt=m.getCrossfadeParameters(),Pt=m.paint.get("fill-extrusion-opacity"),tr=0,or=S;tr<or.length;tr+=1){var gr=or[tr],Yt=_.getTile(gr),br=Yt.getBucket(m);if(br){var Lr=br.programConfigurations.get(m.id),pn=d.useProgram(Ct?"fillExtrusionPattern":"fillExtrusion",Lr);Ct&&(d.context.activeTexture.set(Ze.TEXTURE0),Yt.imageAtlasTexture.bind(Ze.LINEAR,Ze.CLAMP_TO_EDGE),Lr.updatePaintBuffers(Tt));var zn=nt.constantOr(null);if(zn&&Yt.imageAtlas){var Nn=Yt.imageAtlas,Xn=Nn.patternPositions[zn.to.toString()],yi=Nn.patternPositions[zn.from.toString()];Xn&&yi&&Lr.setConstantPatternPositions(Xn,yi)}var Li=d.translatePosMatrix(gr.posMatrix,Yt,m.paint.get("fill-extrusion-translate"),m.paint.get("fill-extrusion-translate-anchor")),Ei=m.paint.get("fill-extrusion-vertical-gradient"),Vi=Ct?Zc(Li,d,Ei,Pt,gr,Tt,Yt):bf(Li,d,Ei,Pt);pn.draw(Ae,Ae.gl.TRIANGLES,N,X,ee,sr.backCCW,Vi,m.id,br.layoutVertexBuffer,br.indexBuffer,br.segments,m.paint,d.transform.zoom,Lr)}}}function Dc(d,_,m,S,N,X){var ee=d.context,Ae=ee.gl,Ze=_.fbo;if(Ze){var nt=d.useProgram("hillshade");ee.activeTexture.set(Ae.TEXTURE0),Ae.bindTexture(Ae.TEXTURE_2D,Ze.colorAttachment.get());var Ct=function(Tt,Pt,tr){var or=tr.paint.get("hillshade-shadow-color"),gr=tr.paint.get("hillshade-highlight-color"),Yt=tr.paint.get("hillshade-accent-color"),br=tr.paint.get("hillshade-illumination-direction")*(Math.PI/180);tr.paint.get("hillshade-illumination-anchor")==="viewport"&&(br-=Tt.transform.angle);var Lr,pn,zn,Nn=!Tt.options.moving;return{u_matrix:Tt.transform.calculatePosMatrix(Pt.tileID.toUnwrapped(),Nn),u_image:0,u_latrange:(Lr=Pt.tileID,pn=Math.pow(2,Lr.canonical.z),zn=Lr.canonical.y,[new l.MercatorCoordinate(0,zn/pn).toLngLat().lat,new l.MercatorCoordinate(0,(zn+1)/pn).toLngLat().lat]),u_light:[tr.paint.get("hillshade-exaggeration"),br],u_shadow:or,u_highlight:gr,u_accent:Yt}}(d,_,m);nt.draw(ee,Ae.TRIANGLES,S,N,X,sr.disabled,Ct,m.id,d.rasterBoundsBuffer,d.quadTriangleIndexBuffer,d.rasterBoundsSegments)}}function Jf(d,_,m,S,N,X){var ee=d.context,Ae=ee.gl,Ze=_.dem;if(Ze&&Ze.data){var nt=Ze.dim,Ct=Ze.stride,Tt=Ze.getPixels();if(ee.activeTexture.set(Ae.TEXTURE1),ee.pixelStoreUnpackPremultiplyAlpha.set(!1),_.demTexture=_.demTexture||d.getTileTexture(Ct),_.demTexture){var Pt=_.demTexture;Pt.update(Tt,{premultiply:!1}),Pt.bind(Ae.NEAREST,Ae.CLAMP_TO_EDGE)}else _.demTexture=new l.Texture(ee,Tt,Ae.RGBA,{premultiply:!1}),_.demTexture.bind(Ae.NEAREST,Ae.CLAMP_TO_EDGE);ee.activeTexture.set(Ae.TEXTURE0);var tr=_.fbo;if(!tr){var or=new l.Texture(ee,{width:nt,height:nt,data:null},Ae.RGBA);or.bind(Ae.LINEAR,Ae.CLAMP_TO_EDGE),(tr=_.fbo=ee.createFramebuffer(nt,nt,!0)).colorAttachment.set(or.texture)}ee.bindFramebuffer.set(tr.framebuffer),ee.viewport.set([0,0,nt,nt]),d.useProgram("hillshadePrepare").draw(ee,Ae.TRIANGLES,S,N,X,sr.disabled,function(gr,Yt){var br=Yt.stride,Lr=l.create();return l.ortho(Lr,0,l.EXTENT,-l.EXTENT,0,0,1),l.translate(Lr,Lr,[0,-l.EXTENT,0]),{u_matrix:Lr,u_image:1,u_dimension:[br,br],u_zoom:gr.overscaledZ,u_unpack:Yt.getUnpackVector()}}(_.tileID,Ze),m.id,d.rasterBoundsBuffer,d.quadTriangleIndexBuffer,d.rasterBoundsSegments),_.needsHillshadePrepare=!1}}function gc(d,_,m,S,N){var X=S.paint.get("raster-fade-duration");if(X>0){var ee=l.browser.now(),Ae=(ee-d.timeAdded)/X,Ze=_?(ee-_.timeAdded)/X:-1,nt=m.getSource(),Ct=N.coveringZoomLevel({tileSize:nt.tileSize,roundZoom:nt.roundZoom}),Tt=!_||Math.abs(_.tileID.overscaledZ-Ct)>Math.abs(d.tileID.overscaledZ-Ct),Pt=Tt&&d.refreshedUponExpiration?1:l.clamp(Tt?Ae:1-Ze,0,1);return d.refreshedUponExpiration&&Ae>=1&&(d.refreshedUponExpiration=!1),_?{opacity:1,mix:1-Pt}:{opacity:Pt,mix:0}}return{opacity:1,mix:0}}var $c=new l.Color(1,0,0,1),Fc=new l.Color(0,1,0,1),Kl=new l.Color(0,0,1,1),Ql=new l.Color(1,0,1,1),Uf=new l.Color(0,1,1,1);function qf(d,_,m,S){qu(d,0,_+m/2,d.transform.width,m,S)}function ep(d,_,m,S){qu(d,_-m/2,0,m,d.transform.height,S)}function qu(d,_,m,S,N,X){var ee=d.context,Ae=ee.gl;Ae.enable(Ae.SCISSOR_TEST),Ae.scissor(_*l.browser.devicePixelRatio,m*l.browser.devicePixelRatio,S*l.browser.devicePixelRatio,N*l.browser.devicePixelRatio),ee.clear({color:X}),Ae.disable(Ae.SCISSOR_TEST)}function Zf(d,_,m){var S=d.context,N=S.gl,X=m.posMatrix,ee=d.useProgram("debug"),Ae=ht.disabled,Ze=Et.disabled,nt=d.colorModeForRenderPass();S.activeTexture.set(N.TEXTURE0),d.emptyTexture.bind(N.LINEAR,N.CLAMP_TO_EDGE),ee.draw(S,N.LINE_STRIP,Ae,Ze,nt,sr.disabled,Gc(X,l.Color.red),"$debug",d.debugBuffer,d.tileBorderIndexBuffer,d.debugSegments);var Ct=_.getTileByID(m.key).latestRawTileData,Tt=Math.floor((Ct&&Ct.byteLength||0)/1024),Pt=_.getTile(m).tileSize,tr=512/Math.min(Pt,512)*(m.overscaledZ/d.transform.zoom)*.5,or=m.canonical.toString();m.overscaledZ!==m.canonical.z&&(or+=" => "+m.overscaledZ),function(gr,Yt){gr.initDebugOverlayCanvas();var br=gr.debugOverlayCanvas,Lr=gr.context.gl,pn=gr.debugOverlayCanvas.getContext("2d");pn.clearRect(0,0,br.width,br.height),pn.shadowColor="white",pn.shadowBlur=2,pn.lineWidth=1.5,pn.strokeStyle="white",pn.textBaseline="top",pn.font="bold 36px Open Sans, sans-serif",pn.fillText(Yt,5,5),pn.strokeText(Yt,5,5),gr.debugOverlayTexture.update(br),gr.debugOverlayTexture.bind(Lr.LINEAR,Lr.CLAMP_TO_EDGE)}(d,or+" "+Tt+"kb"),ee.draw(S,N.TRIANGLES,Ae,Ze,Zt.alphaBlended,sr.disabled,Gc(X,l.Color.transparent,tr),"$debug",d.debugBuffer,d.quadTriangleIndexBuffer,d.debugSegments)}var vs={symbol:function(d,_,m,S,N){if(d.renderPass==="translucent"){var X=Et.disabled,ee=d.colorModeForRenderPass();m.layout.get("text-variable-anchor")&&function(Ae,Ze,nt,Ct,Tt,Pt,tr){for(var or=Ze.transform,gr=Tt==="map",Yt=Pt==="map",br=0,Lr=Ae;br<Lr.length;br+=1){var pn=Lr[br],zn=Ct.getTile(pn),Nn=zn.getBucket(nt);if(Nn&&Nn.text&&Nn.text.segments.get().length){var Xn=l.evaluateSizeForZoom(Nn.textSizeData,or.zoom),yi=rs(zn,1,Ze.transform.zoom),Li=No(pn.posMatrix,Yt,gr,Ze.transform,yi),Ei=nt.layout.get("icon-text-fit")!=="none"&&Nn.hasIconData();if(Xn){var Vi=Math.pow(2,or.zoom-zn.tileID.overscaledZ);vl(Nn,gr,Yt,tr,l.symbolSize,or,Li,pn.posMatrix,Vi,Xn,Ei)}}}}(S,d,m,_,m.layout.get("text-rotation-alignment"),m.layout.get("text-pitch-alignment"),N),m.paint.get("icon-opacity").constantOr(1)!==0&&Lc(d,_,m,S,!1,m.paint.get("icon-translate"),m.paint.get("icon-translate-anchor"),m.layout.get("icon-rotation-alignment"),m.layout.get("icon-pitch-alignment"),m.layout.get("icon-keep-upright"),X,ee),m.paint.get("text-opacity").constantOr(1)!==0&&Lc(d,_,m,S,!0,m.paint.get("text-translate"),m.paint.get("text-translate-anchor"),m.layout.get("text-rotation-alignment"),m.layout.get("text-pitch-alignment"),m.layout.get("text-keep-upright"),X,ee),_.map.showCollisionBoxes&&(mc(d,_,m,S,m.paint.get("text-translate"),m.paint.get("text-translate-anchor"),!0),mc(d,_,m,S,m.paint.get("icon-translate"),m.paint.get("icon-translate-anchor"),!1))}},circle:function(d,_,m,S){if(d.renderPass==="translucent"){var N=m.paint.get("circle-opacity"),X=m.paint.get("circle-stroke-width"),ee=m.paint.get("circle-stroke-opacity"),Ae=m.layout.get("circle-sort-key").constantOr(1)!==void 0;if(N.constantOr(1)!==0||X.constantOr(1)!==0&&ee.constantOr(1)!==0){for(var Ze=d.context,nt=Ze.gl,Ct=d.depthModeForSublayer(0,ht.ReadOnly),Tt=Et.disabled,Pt=d.colorModeForRenderPass(),tr=[],or=0;or<S.length;or++){var gr=S[or],Yt=_.getTile(gr),br=Yt.getBucket(m);if(br){var Lr=br.programConfigurations.get(m.id),pn={programConfiguration:Lr,program:d.useProgram("circle",Lr),layoutVertexBuffer:br.layoutVertexBuffer,indexBuffer:br.indexBuffer,uniformValues:Yf(d,gr,Yt,m)};if(Ae)for(var zn=0,Nn=br.segments.get();zn<Nn.length;zn+=1){var Xn=Nn[zn];tr.push({segments:new l.SegmentVector([Xn]),sortKey:Xn.sortKey,state:pn})}else tr.push({segments:br.segments,sortKey:0,state:pn})}}Ae&&tr.sort(function(Ea,Qa){return Ea.sortKey-Qa.sortKey});for(var yi=0,Li=tr;yi<Li.length;yi+=1){var Ei=Li[yi],Vi=Ei.state;Vi.program.draw(Ze,nt.TRIANGLES,Ct,Tt,Pt,sr.disabled,Vi.uniformValues,m.id,Vi.layoutVertexBuffer,Vi.indexBuffer,Ei.segments,m.paint,d.transform.zoom,Vi.programConfiguration)}}}},heatmap:function(d,_,m,S){if(m.paint.get("heatmap-opacity")!==0)if(d.renderPass==="offscreen"){var N=d.context,X=N.gl,ee=Et.disabled,Ae=new Zt([X.ONE,X.ONE],l.Color.transparent,[!0,!0,!0,!0]);(function(tr,or,gr){var Yt=tr.gl;tr.activeTexture.set(Yt.TEXTURE1),tr.viewport.set([0,0,or.width/4,or.height/4]);var br=gr.heatmapFbo;if(br)Yt.bindTexture(Yt.TEXTURE_2D,br.colorAttachment.get()),tr.bindFramebuffer.set(br.framebuffer);else{var Lr=Yt.createTexture();Yt.bindTexture(Yt.TEXTURE_2D,Lr),Yt.texParameteri(Yt.TEXTURE_2D,Yt.TEXTURE_WRAP_S,Yt.CLAMP_TO_EDGE),Yt.texParameteri(Yt.TEXTURE_2D,Yt.TEXTURE_WRAP_T,Yt.CLAMP_TO_EDGE),Yt.texParameteri(Yt.TEXTURE_2D,Yt.TEXTURE_MIN_FILTER,Yt.LINEAR),Yt.texParameteri(Yt.TEXTURE_2D,Yt.TEXTURE_MAG_FILTER,Yt.LINEAR),br=gr.heatmapFbo=tr.createFramebuffer(or.width/4,or.height/4,!1),function(pn,zn,Nn,Xn){var yi=pn.gl;yi.texImage2D(yi.TEXTURE_2D,0,yi.RGBA,zn.width/4,zn.height/4,0,yi.RGBA,pn.extRenderToTextureHalfFloat?pn.extTextureHalfFloat.HALF_FLOAT_OES:yi.UNSIGNED_BYTE,null),Xn.colorAttachment.set(Nn)}(tr,or,Lr,br)}})(N,d,m),N.clear({color:l.Color.transparent});for(var Ze=0;Ze<S.length;Ze++){var nt=S[Ze];if(!_.hasRenderableParent(nt)){var Ct=_.getTile(nt),Tt=Ct.getBucket(m);if(Tt){var Pt=Tt.programConfigurations.get(m.id);d.useProgram("heatmap",Pt).draw(N,X.TRIANGLES,ht.disabled,ee,Ae,sr.disabled,fp(nt.posMatrix,Ct,d.transform.zoom,m.paint.get("heatmap-intensity")),m.id,Tt.layoutVertexBuffer,Tt.indexBuffer,Tt.segments,m.paint,d.transform.zoom,Pt)}}}N.viewport.set([0,0,d.width,d.height])}else d.renderPass==="translucent"&&(d.context.setColorMode(d.colorModeForRenderPass()),function(tr,or){var gr=tr.context,Yt=gr.gl,br=or.heatmapFbo;if(br){gr.activeTexture.set(Yt.TEXTURE0),Yt.bindTexture(Yt.TEXTURE_2D,br.colorAttachment.get()),gr.activeTexture.set(Yt.TEXTURE1);var Lr=or.colorRampTexture;Lr||(Lr=or.colorRampTexture=new l.Texture(gr,or.colorRamp,Yt.RGBA)),Lr.bind(Yt.LINEAR,Yt.CLAMP_TO_EDGE),tr.useProgram("heatmapTexture").draw(gr,Yt.TRIANGLES,ht.disabled,Et.disabled,tr.colorModeForRenderPass(),sr.disabled,function(pn,zn,Nn,Xn){var yi=l.create();l.ortho(yi,0,pn.width,pn.height,0,0,1);var Li=pn.context.gl;return{u_matrix:yi,u_world:[Li.drawingBufferWidth,Li.drawingBufferHeight],u_image:0,u_color_ramp:1,u_opacity:zn.paint.get("heatmap-opacity")}}(tr,or),or.id,tr.viewportBuffer,tr.quadTriangleIndexBuffer,tr.viewportSegments,or.paint,tr.transform.zoom)}}(d,m))},line:function(d,_,m,S){if(d.renderPass==="translucent"){var N=m.paint.get("line-opacity"),X=m.paint.get("line-width");if(N.constantOr(1)!==0&&X.constantOr(1)!==0)for(var ee=d.depthModeForSublayer(0,ht.ReadOnly),Ae=d.colorModeForRenderPass(),Ze=m.paint.get("line-dasharray"),nt=m.paint.get("line-pattern"),Ct=nt.constantOr(1),Tt=m.paint.get("line-gradient"),Pt=m.getCrossfadeParameters(),tr=Ct?"linePattern":Ze?"lineSDF":Tt?"lineGradient":"line",or=d.context,gr=or.gl,Yt=!0,br=0,Lr=S;br<Lr.length;br+=1){var pn=Lr[br],zn=_.getTile(pn);if(!Ct||zn.patternsLoaded()){var Nn=zn.getBucket(m);if(Nn){var Xn=Nn.programConfigurations.get(m.id),yi=d.context.program.get(),Li=d.useProgram(tr,Xn),Ei=Yt||Li.program!==yi,Vi=nt.constantOr(null);if(Vi&&zn.imageAtlas){var Ea=zn.imageAtlas,Qa=Ea.patternPositions[Vi.to.toString()],Ga=Ea.patternPositions[Vi.from.toString()];Qa&&Ga&&Xn.setConstantPatternPositions(Qa,Ga)}var io=Ct?Ml(d,zn,m,Pt):Ze?Ef(d,zn,m,Ze,Pt):Tt?Rs(d,zn,m,Nn.lineClipsArray.length):$l(d,zn,m);if(Ct)or.activeTexture.set(gr.TEXTURE0),zn.imageAtlasTexture.bind(gr.LINEAR,gr.CLAMP_TO_EDGE),Xn.updatePaintBuffers(Pt);else if(Ze&&(Ei||d.lineAtlas.dirty))or.activeTexture.set(gr.TEXTURE0),d.lineAtlas.bind(or);else if(Tt){var ya=Nn.gradients[m.id],yo=ya.texture;if(m.gradientVersion!==ya.version){var _o=256;if(m.stepInterpolant){var po=_.getSource().maxzoom,Ha=pn.canonical.z===po?Math.ceil(1<<d.transform.maxZoom-pn.canonical.z):1;_o=l.clamp(l.nextPowerOfTwo(Nn.maxLineLength/l.EXTENT*1024*Ha),256,or.maxTextureSize)}ya.gradient=l.renderColorRamp({expression:m.gradientExpression(),evaluationKey:"lineProgress",resolution:_o,image:ya.gradient||void 0,clips:Nn.lineClipsArray}),ya.texture?ya.texture.update(ya.gradient):ya.texture=new l.Texture(or,ya.gradient,gr.RGBA),ya.version=m.gradientVersion,yo=ya.texture}or.activeTexture.set(gr.TEXTURE0),yo.bind(m.stepInterpolant?gr.NEAREST:gr.LINEAR,gr.CLAMP_TO_EDGE)}Li.draw(or,gr.TRIANGLES,ee,d.stencilModeForClipping(pn),Ae,sr.disabled,io,m.id,Nn.layoutVertexBuffer,Nn.indexBuffer,Nn.segments,m.paint,d.transform.zoom,Xn,Nn.layoutVertexBuffer2),Yt=!1}}}}},fill:function(d,_,m,S){var N=m.paint.get("fill-color"),X=m.paint.get("fill-opacity");if(X.constantOr(1)!==0){var ee=d.colorModeForRenderPass(),Ae=m.paint.get("fill-pattern"),Ze=d.opaquePassEnabledForLayer()&&!Ae.constantOr(1)&&N.constantOr(l.Color.transparent).a===1&&X.constantOr(0)===1?"opaque":"translucent";if(d.renderPass===Ze){var nt=d.depthModeForSublayer(1,d.renderPass==="opaque"?ht.ReadWrite:ht.ReadOnly);Qf(d,_,m,S,nt,ee,!1)}if(d.renderPass==="translucent"&&m.paint.get("fill-antialias")){var Ct=d.depthModeForSublayer(m.getPaintProperty("fill-outline-color")?2:0,ht.ReadOnly);Qf(d,_,m,S,Ct,ee,!0)}}},"fill-extrusion":function(d,_,m,S){var N=m.paint.get("fill-extrusion-opacity");if(N!==0&&d.renderPass==="translucent"){var X=new ht(d.context.gl.LEQUAL,ht.ReadWrite,d.depthRangeFor3D);if(N!==1||m.paint.get("fill-extrusion-pattern").constantOr(1))Yl(d,_,m,S,X,Et.disabled,Zt.disabled),Yl(d,_,m,S,X,d.stencilModeFor3D(),d.colorModeForRenderPass());else{var ee=d.colorModeForRenderPass();Yl(d,_,m,S,X,Et.disabled,ee)}}},hillshade:function(d,_,m,S){if(d.renderPass==="offscreen"||d.renderPass==="translucent"){for(var N=d.context,X=d.depthModeForSublayer(0,ht.ReadOnly),ee=d.colorModeForRenderPass(),Ae=d.renderPass==="translucent"?d.stencilConfigForOverlap(S):[{},S],Ze=Ae[0],nt=0,Ct=Ae[1];nt<Ct.length;nt+=1){var Tt=Ct[nt],Pt=_.getTile(Tt);Pt.needsHillshadePrepare&&d.renderPass==="offscreen"?Jf(d,Pt,m,X,Et.disabled,ee):d.renderPass==="translucent"&&Dc(d,Pt,m,X,Ze[Tt.overscaledZ],ee)}N.viewport.set([0,0,d.width,d.height])}},raster:function(d,_,m,S){if(d.renderPass==="translucent"&&m.paint.get("raster-opacity")!==0&&S.length)for(var N=d.context,X=N.gl,ee=_.getSource(),Ae=d.useProgram("raster"),Ze=d.colorModeForRenderPass(),nt=ee instanceof st?[{},S]:d.stencilConfigForOverlap(S),Ct=nt[0],Tt=nt[1],Pt=Tt[Tt.length-1].overscaledZ,tr=!d.options.moving,or=0,gr=Tt;or<gr.length;or+=1){var Yt=gr[or],br=d.depthModeForSublayer(Yt.overscaledZ-Pt,m.paint.get("raster-opacity")===1?ht.ReadWrite:ht.ReadOnly,X.LESS),Lr=_.getTile(Yt),pn=d.transform.calculatePosMatrix(Yt.toUnwrapped(),tr);Lr.registerFadeDuration(m.paint.get("raster-fade-duration"));var zn=_.findLoadedParent(Yt,0),Nn=gc(Lr,zn,_,m,d.transform),Xn=void 0,yi=void 0,Li=m.paint.get("raster-resampling")==="nearest"?X.NEAREST:X.LINEAR;N.activeTexture.set(X.TEXTURE0),Lr.texture.bind(Li,X.CLAMP_TO_EDGE,X.LINEAR_MIPMAP_NEAREST),N.activeTexture.set(X.TEXTURE1),zn?(zn.texture.bind(Li,X.CLAMP_TO_EDGE,X.LINEAR_MIPMAP_NEAREST),Xn=Math.pow(2,zn.tileID.overscaledZ-Lr.tileID.overscaledZ),yi=[Lr.tileID.canonical.x*Xn%1,Lr.tileID.canonical.y*Xn%1]):Lr.texture.bind(Li,X.CLAMP_TO_EDGE,X.LINEAR_MIPMAP_NEAREST);var Ei=ah(pn,yi||[0,0],Xn||1,Nn,m);ee instanceof st?Ae.draw(N,X.TRIANGLES,br,Et.disabled,Ze,sr.disabled,Ei,m.id,ee.boundsBuffer,d.quadTriangleIndexBuffer,ee.boundsSegments):Ae.draw(N,X.TRIANGLES,br,Ct[Yt.overscaledZ],Ze,sr.disabled,Ei,m.id,d.rasterBoundsBuffer,d.quadTriangleIndexBuffer,d.rasterBoundsSegments)}},background:function(d,_,m){var S=m.paint.get("background-color"),N=m.paint.get("background-opacity");if(N!==0){var X=d.context,ee=X.gl,Ae=d.transform,Ze=Ae.tileSize,nt=m.paint.get("background-pattern");if(!d.isPatternMissing(nt)){var Ct=!nt&&S.a===1&&N===1&&d.opaquePassEnabledForLayer()?"opaque":"translucent";if(d.renderPass===Ct){var Tt=Et.disabled,Pt=d.depthModeForSublayer(0,Ct==="opaque"?ht.ReadWrite:ht.ReadOnly),tr=d.colorModeForRenderPass(),or=d.useProgram(nt?"backgroundPattern":"background"),gr=Ae.coveringTiles({tileSize:Ze});nt&&(X.activeTexture.set(ee.TEXTURE0),d.imageManager.bind(d.context));for(var Yt=m.getCrossfadeParameters(),br=0,Lr=gr;br<Lr.length;br+=1){var pn=Lr[br],zn=d.transform.calculatePosMatrix(pn.toUnwrapped()),Nn=nt?oc(zn,N,d,nt,{tileID:pn,tileSize:Ze},Yt):kc(zn,N,S);or.draw(X,ee.TRIANGLES,Pt,Tt,tr,sr.disabled,Nn,m.id,d.tileExtentBuffer,d.quadTriangleIndexBuffer,d.tileExtentSegments)}}}}},debug:function(d,_,m){for(var S=0;S<m.length;S++)Zf(d,_,m[S])},custom:function(d,_,m){var S=d.context,N=m.implementation;if(d.renderPass==="offscreen"){var X=N.prerender;X&&(d.setCustomLayerDefaults(),S.setColorMode(d.colorModeForRenderPass()),X.call(N,S.gl,d.transform.customLayerMatrix()),S.setDirty(),d.setBaseState())}else if(d.renderPass==="translucent"){d.setCustomLayerDefaults(),S.setColorMode(d.colorModeForRenderPass()),S.setStencilMode(Et.disabled);var ee=N.renderingMode==="3d"?new ht(d.context.gl.LEQUAL,ht.ReadWrite,d.depthRangeFor3D):d.depthModeForSublayer(0,ht.ReadOnly);S.setDepthMode(ee),N.render(S.gl,d.transform.customLayerMatrix()),S.setDirty(),d.setBaseState(),S.bindFramebuffer.set(null)}}},Kr=function(d,_){this.context=new bt(d),this.transform=_,this._tileTextures={},this.setup(),this.numSublayers=Ft.maxUnderzooming+Ft.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new Vo,this.gpuTimers={}};Kr.prototype.resize=function(d,_){if(this.width=d*l.browser.devicePixelRatio,this.height=_*l.browser.devicePixelRatio,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(var m=0,S=this.style._order;m<S.length;m+=1)this.style._layers[S[m]].resize()},Kr.prototype.setup=function(){var d=this.context,_=new l.StructArrayLayout2i4;_.emplaceBack(0,0),_.emplaceBack(l.EXTENT,0),_.emplaceBack(0,l.EXTENT),_.emplaceBack(l.EXTENT,l.EXTENT),this.tileExtentBuffer=d.createVertexBuffer(_,ys.members),this.tileExtentSegments=l.SegmentVector.simpleSegment(0,0,4,2);var m=new l.StructArrayLayout2i4;m.emplaceBack(0,0),m.emplaceBack(l.EXTENT,0),m.emplaceBack(0,l.EXTENT),m.emplaceBack(l.EXTENT,l.EXTENT),this.debugBuffer=d.createVertexBuffer(m,ys.members),this.debugSegments=l.SegmentVector.simpleSegment(0,0,4,5);var S=new l.StructArrayLayout4i8;S.emplaceBack(0,0,0,0),S.emplaceBack(l.EXTENT,0,l.EXTENT,0),S.emplaceBack(0,l.EXTENT,0,l.EXTENT),S.emplaceBack(l.EXTENT,l.EXTENT,l.EXTENT,l.EXTENT),this.rasterBoundsBuffer=d.createVertexBuffer(S,Ne.members),this.rasterBoundsSegments=l.SegmentVector.simpleSegment(0,0,4,2);var N=new l.StructArrayLayout2i4;N.emplaceBack(0,0),N.emplaceBack(1,0),N.emplaceBack(0,1),N.emplaceBack(1,1),this.viewportBuffer=d.createVertexBuffer(N,ys.members),this.viewportSegments=l.SegmentVector.simpleSegment(0,0,4,2);var X=new l.StructArrayLayout1ui2;X.emplaceBack(0),X.emplaceBack(1),X.emplaceBack(3),X.emplaceBack(2),X.emplaceBack(0),this.tileBorderIndexBuffer=d.createIndexBuffer(X);var ee=new l.StructArrayLayout3ui6;ee.emplaceBack(0,1,2),ee.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=d.createIndexBuffer(ee),this.emptyTexture=new l.Texture(d,{width:1,height:1,data:new Uint8Array([0,0,0,0])},d.gl.RGBA);var Ae=this.context.gl;this.stencilClearMode=new Et({func:Ae.ALWAYS,mask:0},0,255,Ae.ZERO,Ae.ZERO,Ae.ZERO)},Kr.prototype.clearStencil=function(){var d=this.context,_=d.gl;this.nextStencilID=1,this.currentStencilSource=void 0;var m=l.create();l.ortho(m,0,this.width,this.height,0,0,1),l.scale(m,m,[_.drawingBufferWidth,_.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(d,_.TRIANGLES,ht.disabled,this.stencilClearMode,Zt.disabled,sr.disabled,ju(m),"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)},Kr.prototype._renderTileClippingMasks=function(d,_){if(this.currentStencilSource!==d.source&&d.isTileClipped()&&_&&_.length){this.currentStencilSource=d.source;var m=this.context,S=m.gl;this.nextStencilID+_.length>256&&this.clearStencil(),m.setColorMode(Zt.disabled),m.setDepthMode(ht.disabled);var N=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(var X=0,ee=_;X<ee.length;X+=1){var Ae=ee[X],Ze=this._tileClippingMaskIDs[Ae.key]=this.nextStencilID++;N.draw(m,S.TRIANGLES,ht.disabled,new Et({func:S.ALWAYS,mask:0},Ze,255,S.KEEP,S.KEEP,S.REPLACE),Zt.disabled,sr.disabled,ju(Ae.posMatrix),"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}},Kr.prototype.stencilModeFor3D=function(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();var d=this.nextStencilID++,_=this.context.gl;return new Et({func:_.NOTEQUAL,mask:255},d,255,_.KEEP,_.KEEP,_.REPLACE)},Kr.prototype.stencilModeForClipping=function(d){var _=this.context.gl;return new Et({func:_.EQUAL,mask:255},this._tileClippingMaskIDs[d.key],0,_.KEEP,_.KEEP,_.REPLACE)},Kr.prototype.stencilConfigForOverlap=function(d){var _,m=this.context.gl,S=d.sort(function(Ze,nt){return nt.overscaledZ-Ze.overscaledZ}),N=S[S.length-1].overscaledZ,X=S[0].overscaledZ-N+1;if(X>1){this.currentStencilSource=void 0,this.nextStencilID+X>256&&this.clearStencil();for(var ee={},Ae=0;Ae<X;Ae++)ee[Ae+N]=new Et({func:m.GEQUAL,mask:255},Ae+this.nextStencilID,255,m.KEEP,m.KEEP,m.REPLACE);return this.nextStencilID+=X,[ee,S]}return[(_={},_[N]=Et.disabled,_),S]},Kr.prototype.colorModeForRenderPass=function(){var d=this.context.gl;return this._showOverdrawInspector?new Zt([d.CONSTANT_COLOR,d.ONE],new l.Color(.125,.125,.125,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?Zt.unblended:Zt.alphaBlended},Kr.prototype.depthModeForSublayer=function(d,_,m){if(!this.opaquePassEnabledForLayer())return ht.disabled;var S=1-((1+this.currentLayer)*this.numSublayers+d)*this.depthEpsilon;return new ht(m||this.context.gl.LEQUAL,_,[S,S])},Kr.prototype.opaquePassEnabledForLayer=function(){return this.currentLayer<this.opaquePassCutoff},Kr.prototype.render=function(d,_){var m=this;this.style=d,this.options=_,this.lineAtlas=d.lineAtlas,this.imageManager=d.imageManager,this.glyphManager=d.glyphManager,this.symbolFadeChange=d.placement.symbolFadeChange(l.browser.now()),this.imageManager.beginFrame();var S=this.style._order,N=this.style.sourceCaches;for(var X in N){var ee=N[X];ee.used&&ee.prepare(this.context)}var Ae,Ze,nt={},Ct={},Tt={};for(var Pt in N){var tr=N[Pt];nt[Pt]=tr.getVisibleCoordinates(),Ct[Pt]=nt[Pt].slice().reverse(),Tt[Pt]=tr.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(var or=0;or<S.length;or++)if(this.style._layers[S[or]].is3D()){this.opaquePassCutoff=or;break}this.renderPass="offscreen";for(var gr=0,Yt=S;gr<Yt.length;gr+=1){var br=this.style._layers[Yt[gr]];if(br.hasOffscreenPass()&&!br.isHidden(this.transform.zoom)){var Lr=Ct[br.source];(br.type==="custom"||Lr.length)&&this.renderLayer(this,N[br.source],br,Lr)}}for(this.context.bindFramebuffer.set(null),this.context.clear({color:_.showOverdrawInspector?l.Color.black:l.Color.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=_.showOverdrawInspector,this.depthRangeFor3D=[0,1-(d._order.length+2)*this.numSublayers*this.depthEpsilon],this.renderPass="opaque",this.currentLayer=S.length-1;this.currentLayer>=0;this.currentLayer--){var pn=this.style._layers[S[this.currentLayer]],zn=N[pn.source],Nn=nt[pn.source];this._renderTileClippingMasks(pn,Nn),this.renderLayer(this,zn,pn,Nn)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<S.length;this.currentLayer++){var Xn=this.style._layers[S[this.currentLayer]],yi=N[Xn.source],Li=(Xn.type==="symbol"?Tt:Ct)[Xn.source];this._renderTileClippingMasks(Xn,nt[Xn.source]),this.renderLayer(this,yi,Xn,Li)}this.options.showTileBoundaries&&(l.values(this.style._layers).forEach(function(Ei){Ei.source&&!Ei.isHidden(m.transform.zoom)&&(Ei.source!==(Ze&&Ze.id)&&(Ze=m.style.sourceCaches[Ei.source]),(!Ae||Ae.getSource().maxzoom<Ze.getSource().maxzoom)&&(Ae=Ze))}),Ae&&vs.debug(this,Ae,Ae.getVisibleCoordinates())),this.options.showPadding&&function(Ei){var Vi=Ei.transform.padding;qf(Ei,Ei.transform.height-(Vi.top||0),3,$c),qf(Ei,Vi.bottom||0,3,Fc),ep(Ei,Vi.left||0,3,Kl),ep(Ei,Ei.transform.width-(Vi.right||0),3,Ql);var Ea=Ei.transform.centerPoint;(function(Qa,Ga,io,ya){qu(Qa,Ga-1,io-10,2,20,ya),qu(Qa,Ga-10,io-1,20,2,ya)})(Ei,Ea.x,Ei.transform.height-Ea.y,Uf)}(this),this.context.setDefault()},Kr.prototype.renderLayer=function(d,_,m,S){m.isHidden(this.transform.zoom)||(m.type==="background"||m.type==="custom"||S.length)&&(this.id=m.id,this.gpuTimingStart(m),vs[m.type](d,_,m,S,this.style.placement.variableOffsets),this.gpuTimingEnd())},Kr.prototype.gpuTimingStart=function(d){if(this.options.gpuTiming){var _=this.context.extTimerQuery,m=this.gpuTimers[d.id];m||(m=this.gpuTimers[d.id]={calls:0,cpuTime:0,query:_.createQueryEXT()}),m.calls++,_.beginQueryEXT(_.TIME_ELAPSED_EXT,m.query)}},Kr.prototype.gpuTimingEnd=function(){if(this.options.gpuTiming){var d=this.context.extTimerQuery;d.endQueryEXT(d.TIME_ELAPSED_EXT)}},Kr.prototype.collectGpuTimers=function(){var d=this.gpuTimers;return this.gpuTimers={},d},Kr.prototype.queryGpuTimers=function(d){var _={};for(var m in d){var S=d[m],N=this.context.extTimerQuery,X=N.getQueryObjectEXT(S.query,N.QUERY_RESULT_EXT)/1e6;N.deleteQueryEXT(S.query),_[m]=X}return _},Kr.prototype.translatePosMatrix=function(d,_,m,S,N){if(!m[0]&&!m[1])return d;var X=N?S==="map"?this.transform.angle:0:S==="viewport"?-this.transform.angle:0;if(X){var ee=Math.sin(X),Ae=Math.cos(X);m=[m[0]*Ae-m[1]*ee,m[0]*ee+m[1]*Ae]}var Ze=[N?m[0]:rs(_,m[0],this.transform.zoom),N?m[1]:rs(_,m[1],this.transform.zoom),0],nt=new Float32Array(16);return l.translate(nt,d,Ze),nt},Kr.prototype.saveTileTexture=function(d){var _=this._tileTextures[d.size[0]];_?_.push(d):this._tileTextures[d.size[0]]=[d]},Kr.prototype.getTileTexture=function(d){var _=this._tileTextures[d];return _&&_.length>0?_.pop():null},Kr.prototype.isPatternMissing=function(d){if(!d)return!1;if(!d.from||!d.to)return!0;var _=this.imageManager.getPattern(d.from.toString()),m=this.imageManager.getPattern(d.to.toString());return!_||!m},Kr.prototype.useProgram=function(d,_){this.cache=this.cache||{};var m=""+d+(_?_.cacheKey:"")+(this._showOverdrawInspector?"/overdraw":"");return this.cache[m]||(this.cache[m]=new Js(this.context,d,Qs[d],_,uf[d],this._showOverdrawInspector)),this.cache[m]},Kr.prototype.setCustomLayerDefaults=function(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()},Kr.prototype.setBaseState=function(){var d=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(d.FUNC_ADD)},Kr.prototype.initDebugOverlayCanvas=function(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=l.window.document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new l.Texture(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))},Kr.prototype.destroy=function(){this.emptyTexture.destroy(),this.debugOverlayTexture&&this.debugOverlayTexture.destroy()};var vi=function(d,_){this.points=d,this.planes=_};vi.fromInvProjectionMatrix=function(d,_,m){var S=Math.pow(2,m),N=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(function(ee){return l.transformMat4([],ee,d)}).map(function(ee){return l.scale$1([],ee,1/ee[3]/_*S)}),X=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(function(ee){var Ae=l.sub([],N[ee[0]],N[ee[1]]),Ze=l.sub([],N[ee[2]],N[ee[1]]),nt=l.normalize([],l.cross([],Ae,Ze)),Ct=-l.dot(nt,N[ee[1]]);return nt.concat(Ct)});return new vi(N,X)};var ei=function(d,_){this.min=d,this.max=_,this.center=l.scale$2([],l.add([],this.min,this.max),.5)};ei.prototype.quadrant=function(d){for(var _=[d%2==0,d<2],m=l.clone$2(this.min),S=l.clone$2(this.max),N=0;N<_.length;N++)m[N]=_[N]?this.min[N]:this.center[N],S[N]=_[N]?this.center[N]:this.max[N];return S[2]=this.max[2],new ei(m,S)},ei.prototype.distanceX=function(d){return Math.max(Math.min(this.max[0],d[0]),this.min[0])-d[0]},ei.prototype.distanceY=function(d){return Math.max(Math.min(this.max[1],d[1]),this.min[1])-d[1]},ei.prototype.intersects=function(d){for(var _=[[this.min[0],this.min[1],0,1],[this.max[0],this.min[1],0,1],[this.max[0],this.max[1],0,1],[this.min[0],this.max[1],0,1]],m=!0,S=0;S<d.planes.length;S++){for(var N=d.planes[S],X=0,ee=0;ee<_.length;ee++)X+=l.dot$1(N,_[ee])>=0;if(X===0)return 0;X!==_.length&&(m=!1)}if(m)return 2;for(var Ae=0;Ae<3;Ae++){for(var Ze=Number.MAX_VALUE,nt=-Number.MAX_VALUE,Ct=0;Ct<d.points.length;Ct++){var Tt=d.points[Ct][Ae]-this.min[Ae];Ze=Math.min(Ze,Tt),nt=Math.max(nt,Tt)}if(nt<0||Ze>this.max[Ae]-this.min[Ae])return 0}return 1};var xi=function(d,_,m,S){if(d===void 0&&(d=0),_===void 0&&(_=0),m===void 0&&(m=0),S===void 0&&(S=0),isNaN(d)||d<0||isNaN(_)||_<0||isNaN(m)||m<0||isNaN(S)||S<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=d,this.bottom=_,this.left=m,this.right=S};xi.prototype.interpolate=function(d,_,m){return _.top!=null&&d.top!=null&&(this.top=l.number(d.top,_.top,m)),_.bottom!=null&&d.bottom!=null&&(this.bottom=l.number(d.bottom,_.bottom,m)),_.left!=null&&d.left!=null&&(this.left=l.number(d.left,_.left,m)),_.right!=null&&d.right!=null&&(this.right=l.number(d.right,_.right,m)),this},xi.prototype.getCenter=function(d,_){var m=l.clamp((this.left+d-this.right)/2,0,d),S=l.clamp((this.top+_-this.bottom)/2,0,_);return new l.Point(m,S)},xi.prototype.equals=function(d){return this.top===d.top&&this.bottom===d.bottom&&this.left===d.left&&this.right===d.right},xi.prototype.clone=function(){return new xi(this.top,this.bottom,this.left,this.right)},xi.prototype.toJSON=function(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}};var da=function(d,_,m,S,N){this.tileSize=512,this.maxValidLatitude=85.051129,this._renderWorldCopies=N===void 0||N,this._minZoom=d||0,this._maxZoom=_||22,this._minPitch=m==null?0:m,this._maxPitch=S==null?60:S,this.setMaxBounds(),this.width=0,this.height=0,this._center=new l.LngLat(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new xi,this._posMatrixCache={},this._alignedPosMatrixCache={}},uo={minZoom:{configurable:!0},maxZoom:{configurable:!0},minPitch:{configurable:!0},maxPitch:{configurable:!0},renderWorldCopies:{configurable:!0},worldSize:{configurable:!0},centerOffset:{configurable:!0},size:{configurable:!0},bearing:{configurable:!0},pitch:{configurable:!0},fov:{configurable:!0},zoom:{configurable:!0},center:{configurable:!0},padding:{configurable:!0},centerPoint:{configurable:!0},unmodified:{configurable:!0},point:{configurable:!0}};da.prototype.clone=function(){var d=new da(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return d.tileSize=this.tileSize,d.latRange=this.latRange,d.width=this.width,d.height=this.height,d._center=this._center,d.zoom=this.zoom,d.angle=this.angle,d._fov=this._fov,d._pitch=this._pitch,d._unmodified=this._unmodified,d._edgeInsets=this._edgeInsets.clone(),d._calcMatrices(),d},uo.minZoom.get=function(){return this._minZoom},uo.minZoom.set=function(d){this._minZoom!==d&&(this._minZoom=d,this.zoom=Math.max(this.zoom,d))},uo.maxZoom.get=function(){return this._maxZoom},uo.maxZoom.set=function(d){this._maxZoom!==d&&(this._maxZoom=d,this.zoom=Math.min(this.zoom,d))},uo.minPitch.get=function(){return this._minPitch},uo.minPitch.set=function(d){this._minPitch!==d&&(this._minPitch=d,this.pitch=Math.max(this.pitch,d))},uo.maxPitch.get=function(){return this._maxPitch},uo.maxPitch.set=function(d){this._maxPitch!==d&&(this._maxPitch=d,this.pitch=Math.min(this.pitch,d))},uo.renderWorldCopies.get=function(){return this._renderWorldCopies},uo.renderWorldCopies.set=function(d){d===void 0?d=!0:d===null&&(d=!1),this._renderWorldCopies=d},uo.worldSize.get=function(){return this.tileSize*this.scale},uo.centerOffset.get=function(){return this.centerPoint._sub(this.size._div(2))},uo.size.get=function(){return new l.Point(this.width,this.height)},uo.bearing.get=function(){return-this.angle/Math.PI*180},uo.bearing.set=function(d){var _=-l.wrap(d,-180,180)*Math.PI/180;this.angle!==_&&(this._unmodified=!1,this.angle=_,this._calcMatrices(),this.rotationMatrix=l.create$2(),l.rotate(this.rotationMatrix,this.rotationMatrix,this.angle))},uo.pitch.get=function(){return this._pitch/Math.PI*180},uo.pitch.set=function(d){var _=l.clamp(d,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==_&&(this._unmodified=!1,this._pitch=_,this._calcMatrices())},uo.fov.get=function(){return this._fov/Math.PI*180},uo.fov.set=function(d){d=Math.max(.01,Math.min(60,d)),this._fov!==d&&(this._unmodified=!1,this._fov=d/180*Math.PI,this._calcMatrices())},uo.zoom.get=function(){return this._zoom},uo.zoom.set=function(d){var _=Math.min(Math.max(d,this.minZoom),this.maxZoom);this._zoom!==_&&(this._unmodified=!1,this._zoom=_,this.scale=this.zoomScale(_),this.tileZoom=Math.floor(_),this.zoomFraction=_-this.tileZoom,this._constrain(),this._calcMatrices())},uo.center.get=function(){return this._center},uo.center.set=function(d){d.lat===this._center.lat&&d.lng===this._center.lng||(this._unmodified=!1,this._center=d,this._constrain(),this._calcMatrices())},uo.padding.get=function(){return this._edgeInsets.toJSON()},uo.padding.set=function(d){this._edgeInsets.equals(d)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,d,1),this._calcMatrices())},uo.centerPoint.get=function(){return this._edgeInsets.getCenter(this.width,this.height)},da.prototype.isPaddingEqual=function(d){return this._edgeInsets.equals(d)},da.prototype.interpolatePadding=function(d,_,m){this._unmodified=!1,this._edgeInsets.interpolate(d,_,m),this._constrain(),this._calcMatrices()},da.prototype.coveringZoomLevel=function(d){var _=(d.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/d.tileSize));return Math.max(0,_)},da.prototype.getVisibleUnwrappedCoordinates=function(d){var _=[new l.UnwrappedTileID(0,d)];if(this._renderWorldCopies)for(var m=this.pointCoordinate(new l.Point(0,0)),S=this.pointCoordinate(new l.Point(this.width,0)),N=this.pointCoordinate(new l.Point(this.width,this.height)),X=this.pointCoordinate(new l.Point(0,this.height)),ee=Math.floor(Math.min(m.x,S.x,N.x,X.x)),Ae=Math.floor(Math.max(m.x,S.x,N.x,X.x)),Ze=ee-1;Ze<=Ae+1;Ze++)Ze!==0&&_.push(new l.UnwrappedTileID(Ze,d));return _},da.prototype.coveringTiles=function(d){var _=this.coveringZoomLevel(d),m=_;if(d.minzoom!==void 0&&_<d.minzoom)return[];d.maxzoom!==void 0&&_>d.maxzoom&&(_=d.maxzoom);var S=l.MercatorCoordinate.fromLngLat(this.center),N=Math.pow(2,_),X=[N*S.x,N*S.y,0],ee=vi.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,_),Ae=d.minzoom||0;this.pitch<=60&&this._edgeInsets.top<.1&&(Ae=_);var Ze=function(Ei){return{aabb:new ei([Ei*N,0,0],[(Ei+1)*N,N,0]),zoom:0,x:0,y:0,wrap:Ei,fullyVisible:!1}},nt=[],Ct=[],Tt=_,Pt=d.reparseOverscaled?m:_;if(this._renderWorldCopies)for(var tr=1;tr<=3;tr++)nt.push(Ze(-tr)),nt.push(Ze(tr));for(nt.push(Ze(0));nt.length>0;){var or=nt.pop(),gr=or.x,Yt=or.y,br=or.fullyVisible;if(!br){var Lr=or.aabb.intersects(ee);if(Lr===0)continue;br=Lr===2}var pn=or.aabb.distanceX(X),zn=or.aabb.distanceY(X),Nn=Math.max(Math.abs(pn),Math.abs(zn));if(or.zoom===Tt||Nn>3+(1<<Tt-or.zoom)-2&&or.zoom>=Ae)Ct.push({tileID:new l.OverscaledTileID(or.zoom===Tt?Pt:or.zoom,or.wrap,or.zoom,gr,Yt),distanceSq:l.sqrLen([X[0]-.5-gr,X[1]-.5-Yt])});else for(var Xn=0;Xn<4;Xn++){var yi=(gr<<1)+Xn%2,Li=(Yt<<1)+(Xn>>1);nt.push({aabb:or.aabb.quadrant(Xn),zoom:or.zoom+1,x:yi,y:Li,wrap:or.wrap,fullyVisible:br})}}return Ct.sort(function(Ei,Vi){return Ei.distanceSq-Vi.distanceSq}).map(function(Ei){return Ei.tileID})},da.prototype.resize=function(d,_){this.width=d,this.height=_,this.pixelsToGLUnits=[2/d,-2/_],this._constrain(),this._calcMatrices()},uo.unmodified.get=function(){return this._unmodified},da.prototype.zoomScale=function(d){return Math.pow(2,d)},da.prototype.scaleZoom=function(d){return Math.log(d)/Math.LN2},da.prototype.project=function(d){var _=l.clamp(d.lat,-this.maxValidLatitude,this.maxValidLatitude);return new l.Point(l.mercatorXfromLng(d.lng)*this.worldSize,l.mercatorYfromLat(_)*this.worldSize)},da.prototype.unproject=function(d){return new l.MercatorCoordinate(d.x/this.worldSize,d.y/this.worldSize).toLngLat()},uo.point.get=function(){return this.project(this.center)},da.prototype.setLocationAtPoint=function(d,_){var m=this.pointCoordinate(_),S=this.pointCoordinate(this.centerPoint),N=this.locationCoordinate(d),X=new l.MercatorCoordinate(N.x-(m.x-S.x),N.y-(m.y-S.y));this.center=this.coordinateLocation(X),this._renderWorldCopies&&(this.center=this.center.wrap())},da.prototype.locationPoint=function(d){return this.coordinatePoint(this.locationCoordinate(d))},da.prototype.pointLocation=function(d){return this.coordinateLocation(this.pointCoordinate(d))},da.prototype.locationCoordinate=function(d){return l.MercatorCoordinate.fromLngLat(d)},da.prototype.coordinateLocation=function(d){return d.toLngLat()},da.prototype.pointCoordinate=function(d){var _=[d.x,d.y,0,1],m=[d.x,d.y,1,1];l.transformMat4(_,_,this.pixelMatrixInverse),l.transformMat4(m,m,this.pixelMatrixInverse);var S=_[3],N=m[3],X=_[1]/S,ee=m[1]/N,Ae=_[2]/S,Ze=m[2]/N,nt=Ae===Ze?0:(0-Ae)/(Ze-Ae);return new l.MercatorCoordinate(l.number(_[0]/S,m[0]/N,nt)/this.worldSize,l.number(X,ee,nt)/this.worldSize)},da.prototype.coordinatePoint=function(d){var _=[d.x*this.worldSize,d.y*this.worldSize,0,1];return l.transformMat4(_,_,this.pixelMatrix),new l.Point(_[0]/_[3],_[1]/_[3])},da.prototype.getBounds=function(){return new l.LngLatBounds().extend(this.pointLocation(new l.Point(0,0))).extend(this.pointLocation(new l.Point(this.width,0))).extend(this.pointLocation(new l.Point(this.width,this.height))).extend(this.pointLocation(new l.Point(0,this.height)))},da.prototype.getMaxBounds=function(){return this.latRange&&this.latRange.length===2&&this.lngRange&&this.lngRange.length===2?new l.LngLatBounds([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null},da.prototype.setMaxBounds=function(d){d?(this.lngRange=[d.getWest(),d.getEast()],this.latRange=[d.getSouth(),d.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-this.maxValidLatitude,this.maxValidLatitude])},da.prototype.calculatePosMatrix=function(d,_){_===void 0&&(_=!1);var m=d.key,S=_?this._alignedPosMatrixCache:this._posMatrixCache;if(S[m])return S[m];var N=d.canonical,X=this.worldSize/this.zoomScale(N.z),ee=N.x+Math.pow(2,N.z)*d.wrap,Ae=l.identity(new Float64Array(16));return l.translate(Ae,Ae,[ee*X,N.y*X,0]),l.scale(Ae,Ae,[X/l.EXTENT,X/l.EXTENT,1]),l.multiply(Ae,_?this.alignedProjMatrix:this.projMatrix,Ae),S[m]=new Float32Array(Ae),S[m]},da.prototype.customLayerMatrix=function(){return this.mercatorMatrix.slice()},da.prototype._constrain=function(){if(this.center&&this.width&&this.height&&!this._constraining){this._constraining=!0;var d,_,m,S,N=-90,X=90,ee=-180,Ae=180,Ze=this.size,nt=this._unmodified;if(this.latRange){var Ct=this.latRange;N=l.mercatorYfromLat(Ct[1])*this.worldSize,d=(X=l.mercatorYfromLat(Ct[0])*this.worldSize)-N<Ze.y?Ze.y/(X-N):0}if(this.lngRange){var Tt=this.lngRange;ee=l.mercatorXfromLng(Tt[0])*this.worldSize,_=(Ae=l.mercatorXfromLng(Tt[1])*this.worldSize)-ee<Ze.x?Ze.x/(Ae-ee):0}var Pt=this.point,tr=Math.max(_||0,d||0);if(tr)return this.center=this.unproject(new l.Point(_?(Ae+ee)/2:Pt.x,d?(X+N)/2:Pt.y)),this.zoom+=this.scaleZoom(tr),this._unmodified=nt,void(this._constraining=!1);if(this.latRange){var or=Pt.y,gr=Ze.y/2;or-gr<N&&(S=N+gr),or+gr>X&&(S=X-gr)}if(this.lngRange){var Yt=Pt.x,br=Ze.x/2;Yt-br<ee&&(m=ee+br),Yt+br>Ae&&(m=Ae-br)}m===void 0&&S===void 0||(this.center=this.unproject(new l.Point(m!==void 0?m:Pt.x,S!==void 0?S:Pt.y))),this._unmodified=nt,this._constraining=!1}},da.prototype._calcMatrices=function(){if(this.height){var d=this.centerOffset;this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height;var _=Math.PI/2+this._pitch,m=this._fov*(.5+d.y/this.height),S=Math.sin(m)*this.cameraToCenterDistance/Math.sin(l.clamp(Math.PI-_-m,.01,Math.PI-.01)),N=this.point,X=N.x,ee=N.y,Ae=1.01*(Math.cos(Math.PI/2-this._pitch)*S+this.cameraToCenterDistance),Ze=this.height/50,nt=new Float64Array(16);l.perspective(nt,this._fov,this.width/this.height,Ze,Ae),nt[8]=2*-d.x/this.width,nt[9]=2*d.y/this.height,l.scale(nt,nt,[1,-1,1]),l.translate(nt,nt,[0,0,-this.cameraToCenterDistance]),l.rotateX(nt,nt,this._pitch),l.rotateZ(nt,nt,this.angle),l.translate(nt,nt,[-X,-ee,0]),this.mercatorMatrix=l.scale([],nt,[this.worldSize,this.worldSize,this.worldSize]),l.scale(nt,nt,[1,1,l.mercatorZfromAltitude(1,this.center.lat)*this.worldSize,1]),this.projMatrix=nt,this.invProjMatrix=l.invert([],this.projMatrix);var Ct=this.width%2/2,Tt=this.height%2/2,Pt=Math.cos(this.angle),tr=Math.sin(this.angle),or=X-Math.round(X)+Pt*Ct+tr*Tt,gr=ee-Math.round(ee)+Pt*Tt+tr*Ct,Yt=new Float64Array(nt);if(l.translate(Yt,Yt,[or>.5?or-1:or,gr>.5?gr-1:gr,0]),this.alignedProjMatrix=Yt,nt=l.create(),l.scale(nt,nt,[this.width/2,-this.height/2,1]),l.translate(nt,nt,[1,-1,0]),this.labelPlaneMatrix=nt,nt=l.create(),l.scale(nt,nt,[1,-1,1]),l.translate(nt,nt,[-1,-1,0]),l.scale(nt,nt,[2/this.width,2/this.height,1]),this.glCoordMatrix=nt,this.pixelMatrix=l.multiply(new Float64Array(16),this.labelPlaneMatrix,this.projMatrix),!(nt=l.invert(new Float64Array(16),this.pixelMatrix)))throw new Error("failed to invert matrix");this.pixelMatrixInverse=nt,this._posMatrixCache={},this._alignedPosMatrixCache={}}},da.prototype.maxPitchScaleFactor=function(){if(!this.pixelMatrixInverse)return 1;var d=this.pointCoordinate(new l.Point(0,0)),_=[d.x*this.worldSize,d.y*this.worldSize,0,1];return l.transformMat4(_,_,this.pixelMatrix)[3]/this.cameraToCenterDistance},da.prototype.getCameraPoint=function(){var d=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new l.Point(0,d))},da.prototype.getCameraQueryGeometry=function(d){var _=this.getCameraPoint();if(d.length===1)return[d[0],_];for(var m=_.x,S=_.y,N=_.x,X=_.y,ee=0,Ae=d;ee<Ae.length;ee+=1){var Ze=Ae[ee];m=Math.min(m,Ze.x),S=Math.min(S,Ze.y),N=Math.max(N,Ze.x),X=Math.max(X,Ze.y)}return[new l.Point(m,S),new l.Point(N,S),new l.Point(N,X),new l.Point(m,X),new l.Point(m,S)]},Object.defineProperties(da.prototype,uo);var Ua=function(d){var _,m,S,N;this._hashName=d&&encodeURIComponent(d),l.bindAll(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=(_=this._updateHashUnthrottled.bind(this),m=!1,S=null,N=function(){S=null,m&&(_(),S=setTimeout(N,300),m=!1)},function(){return m=!0,S||N(),S})};Ua.prototype.addTo=function(d){return this._map=d,l.window.addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this},Ua.prototype.remove=function(){return l.window.removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this},Ua.prototype.getHashString=function(d){var _=this._map.getCenter(),m=Math.round(100*this._map.getZoom())/100,S=Math.ceil((m*Math.LN2+Math.log(512/360/.5))/Math.LN10),N=Math.pow(10,S),X=Math.round(_.lng*N)/N,ee=Math.round(_.lat*N)/N,Ae=this._map.getBearing(),Ze=this._map.getPitch(),nt="";if(nt+=d?"/"+X+"/"+ee+"/"+m:m+"/"+ee+"/"+X,(Ae||Ze)&&(nt+="/"+Math.round(10*Ae)/10),Ze&&(nt+="/"+Math.round(Ze)),this._hashName){var Ct=this._hashName,Tt=!1,Pt=l.window.location.hash.slice(1).split("&").map(function(tr){var or=tr.split("=")[0];return or===Ct?(Tt=!0,or+"="+nt):tr}).filter(function(tr){return tr});return Tt||Pt.push(Ct+"="+nt),"#"+Pt.join("&")}return"#"+nt},Ua.prototype._getCurrentHash=function(){var d,_=this,m=l.window.location.hash.replace("#","");return this._hashName?(m.split("&").map(function(S){return S.split("=")}).forEach(function(S){S[0]===_._hashName&&(d=S)}),(d&&d[1]||"").split("/")):m.split("/")},Ua.prototype._onHashChange=function(){var d=this._getCurrentHash();if(d.length>=3&&!d.some(function(m){return isNaN(m)})){var _=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(d[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+d[2],+d[1]],zoom:+d[0],bearing:_,pitch:+(d[4]||0)}),!0}return!1},Ua.prototype._updateHashUnthrottled=function(){var d=l.window.location.href.replace(/(#.+)?$/,this.getHashString());try{l.window.history.replaceState(l.window.history.state,null,d)}catch(_){}};var ns={linearity:.3,easing:l.bezier(0,0,.3,1)},Vu=l.extend({deceleration:2500,maxSpeed:1400},ns),lc=l.extend({deceleration:20,maxSpeed:1400},ns),yc=l.extend({deceleration:1e3,maxSpeed:360},ns),tp=l.extend({deceleration:1e3,maxSpeed:90},ns),_c=function(d){this._map=d,this.clear()};function Jl(d,_){(!d.duration||d.duration<_.duration)&&(d.duration=_.duration,d.easing=_.easing)}function ml(d,_,m){var S=m.maxSpeed,N=m.linearity,X=m.deceleration,ee=l.clamp(d*N/(_/1e3),-S,S),Ae=Math.abs(ee)/(X*N);return{easing:m.easing,duration:1e3*Ae,amount:ee*(Ae/2)}}_c.prototype.clear=function(){this._inertiaBuffer=[]},_c.prototype.record=function(d){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:l.browser.now(),settings:d})},_c.prototype._drainInertiaBuffer=function(){for(var d=this._inertiaBuffer,_=l.browser.now();d.length>0&&_-d[0].time>160;)d.shift()},_c.prototype._onMoveEnd=function(d){if(this._drainInertiaBuffer(),!(this._inertiaBuffer.length<2)){for(var _={zoom:0,bearing:0,pitch:0,pan:new l.Point(0,0),pinchAround:void 0,around:void 0},m=0,S=this._inertiaBuffer;m<S.length;m+=1){var N=S[m].settings;_.zoom+=N.zoomDelta||0,_.bearing+=N.bearingDelta||0,_.pitch+=N.pitchDelta||0,N.panDelta&&_.pan._add(N.panDelta),N.around&&(_.around=N.around),N.pinchAround&&(_.pinchAround=N.pinchAround)}var X=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,ee={};if(_.pan.mag()){var Ae=ml(_.pan.mag(),X,l.extend({},Vu,d||{}));ee.offset=_.pan.mult(Ae.amount/_.pan.mag()),ee.center=this._map.transform.center,Jl(ee,Ae)}if(_.zoom){var Ze=ml(_.zoom,X,lc);ee.zoom=this._map.transform.zoom+Ze.amount,Jl(ee,Ze)}if(_.bearing){var nt=ml(_.bearing,X,yc);ee.bearing=this._map.transform.bearing+l.clamp(nt.amount,-179,179),Jl(ee,nt)}if(_.pitch){var Ct=ml(_.pitch,X,tp);ee.pitch=this._map.transform.pitch+Ct.amount,Jl(ee,Ct)}if(ee.zoom||ee.bearing){var Tt=_.pinchAround===void 0?_.around:_.pinchAround;ee.around=Tt?this._map.unproject(Tt):this._map.getCenter()}return this.clear(),l.extend(ee,{noMoveStart:!0})}};var lu=function(d){function _(S,N,X,ee){ee===void 0&&(ee={});var Ae=A.mousePos(N.getCanvasContainer(),X),Ze=N.unproject(Ae);d.call(this,S,l.extend({point:Ae,lngLat:Ze,originalEvent:X},ee)),this._defaultPrevented=!1,this.target=N}d&&(_.__proto__=d),(_.prototype=Object.create(d&&d.prototype)).constructor=_;var m={defaultPrevented:{configurable:!0}};return _.prototype.preventDefault=function(){this._defaultPrevented=!0},m.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(_.prototype,m),_}(l.Event),_s=function(d){function _(S,N,X){var ee=S==="touchend"?X.changedTouches:X.touches,Ae=A.touchPos(N.getCanvasContainer(),ee),Ze=Ae.map(function(Tt){return N.unproject(Tt)}),nt=Ae.reduce(function(Tt,Pt,tr,or){return Tt.add(Pt.div(or.length))},new l.Point(0,0)),Ct=N.unproject(nt);d.call(this,S,{points:Ae,point:nt,lngLats:Ze,lngLat:Ct,originalEvent:X}),this._defaultPrevented=!1}d&&(_.__proto__=d),(_.prototype=Object.create(d&&d.prototype)).constructor=_;var m={defaultPrevented:{configurable:!0}};return _.prototype.preventDefault=function(){this._defaultPrevented=!0},m.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(_.prototype,m),_}(l.Event),jf=function(d){function _(S,N,X){d.call(this,S,{originalEvent:X}),this._defaultPrevented=!1}d&&(_.__proto__=d),(_.prototype=Object.create(d&&d.prototype)).constructor=_;var m={defaultPrevented:{configurable:!0}};return _.prototype.preventDefault=function(){this._defaultPrevented=!0},m.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(_.prototype,m),_}(l.Event),qs=function(d,_){this._map=d,this._clickTolerance=_.clickTolerance};qs.prototype.reset=function(){delete this._mousedownPos},qs.prototype.wheel=function(d){return this._firePreventable(new jf(d.type,this._map,d))},qs.prototype.mousedown=function(d,_){return this._mousedownPos=_,this._firePreventable(new lu(d.type,this._map,d))},qs.prototype.mouseup=function(d){this._map.fire(new lu(d.type,this._map,d))},qs.prototype.click=function(d,_){this._mousedownPos&&this._mousedownPos.dist(_)>=this._clickTolerance||this._map.fire(new lu(d.type,this._map,d))},qs.prototype.dblclick=function(d){return this._firePreventable(new lu(d.type,this._map,d))},qs.prototype.mouseover=function(d){this._map.fire(new lu(d.type,this._map,d))},qs.prototype.mouseout=function(d){this._map.fire(new lu(d.type,this._map,d))},qs.prototype.touchstart=function(d){return this._firePreventable(new _s(d.type,this._map,d))},qs.prototype.touchmove=function(d){this._map.fire(new _s(d.type,this._map,d))},qs.prototype.touchend=function(d){this._map.fire(new _s(d.type,this._map,d))},qs.prototype.touchcancel=function(d){this._map.fire(new _s(d.type,this._map,d))},qs.prototype._firePreventable=function(d){if(this._map.fire(d),d.defaultPrevented)return{}},qs.prototype.isEnabled=function(){return!0},qs.prototype.isActive=function(){return!1},qs.prototype.enable=function(){},qs.prototype.disable=function(){};var ji=function(d){this._map=d};ji.prototype.reset=function(){this._delayContextMenu=!1,delete this._contextMenuEvent},ji.prototype.mousemove=function(d){this._map.fire(new lu(d.type,this._map,d))},ji.prototype.mousedown=function(){this._delayContextMenu=!0},ji.prototype.mouseup=function(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new lu("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)},ji.prototype.contextmenu=function(d){this._delayContextMenu?this._contextMenuEvent=d:this._map.fire(new lu(d.type,this._map,d)),this._map.listens("contextmenu")&&d.preventDefault()},ji.prototype.isEnabled=function(){return!0},ji.prototype.isActive=function(){return!1},ji.prototype.enable=function(){},ji.prototype.disable=function(){};var Gs=function(d,_){this._map=d,this._el=d.getCanvasContainer(),this._container=d.getContainer(),this._clickTolerance=_.clickTolerance||1};function ql(d,_){for(var m={},S=0;S<d.length;S++)m[d[S].identifier]=_[S];return m}Gs.prototype.isEnabled=function(){return!!this._enabled},Gs.prototype.isActive=function(){return!!this._active},Gs.prototype.enable=function(){this.isEnabled()||(this._enabled=!0)},Gs.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)},Gs.prototype.mousedown=function(d,_){this.isEnabled()&&d.shiftKey&&d.button===0&&(A.disableDrag(),this._startPos=this._lastPos=_,this._active=!0)},Gs.prototype.mousemoveWindow=function(d,_){if(this._active){var m=_;if(!(this._lastPos.equals(m)||!this._box&&m.dist(this._startPos)<this._clickTolerance)){var S=this._startPos;this._lastPos=m,this._box||(this._box=A.create("div","mapboxgl-boxzoom",this._container),this._container.classList.add("mapboxgl-crosshair"),this._fireEvent("boxzoomstart",d));var N=Math.min(S.x,m.x),X=Math.max(S.x,m.x),ee=Math.min(S.y,m.y),Ae=Math.max(S.y,m.y);A.setTransform(this._box,"translate("+N+"px,"+ee+"px)"),this._box.style.width=X-N+"px",this._box.style.height=Ae-ee+"px"}}},Gs.prototype.mouseupWindow=function(d,_){var m=this;if(this._active&&d.button===0){var S=this._startPos,N=_;if(this.reset(),A.suppressClick(),S.x!==N.x||S.y!==N.y)return this._map.fire(new l.Event("boxzoomend",{originalEvent:d})),{cameraAnimation:function(X){return X.fitScreenCoordinates(S,N,m._map.getBearing(),{linear:!0})}};this._fireEvent("boxzoomcancel",d)}},Gs.prototype.keydown=function(d){this._active&&d.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",d))},Gs.prototype.blur=function(){this.reset()},Gs.prototype.reset=function(){this._active=!1,this._container.classList.remove("mapboxgl-crosshair"),this._box&&(A.remove(this._box),this._box=null),A.enableDrag(),delete this._startPos,delete this._lastPos},Gs.prototype._fireEvent=function(d,_){return this._map.fire(new l.Event(d,{originalEvent:_}))};var Xc=function(d){this.reset(),this.numTouches=d.numTouches};Xc.prototype.reset=function(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1},Xc.prototype.touchstart=function(d,_,m){(this.centroid||m.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===void 0&&(this.startTime=d.timeStamp),m.length===this.numTouches&&(this.centroid=function(S){for(var N=new l.Point(0,0),X=0,ee=S;X<ee.length;X+=1)N._add(ee[X]);return N.div(S.length)}(_),this.touches=ql(m,_)))},Xc.prototype.touchmove=function(d,_,m){if(!this.aborted&&this.centroid){var S=ql(m,_);for(var N in this.touches){var X=S[N];(!X||X.dist(this.touches[N])>30)&&(this.aborted=!0)}}},Xc.prototype.touchend=function(d,_,m){if((!this.centroid||d.timeStamp-this.startTime>500)&&(this.aborted=!0),m.length===0){var S=!this.aborted&&this.centroid;if(this.reset(),S)return S}};var Il=function(d){this.singleTap=new Xc(d),this.numTaps=d.numTaps,this.reset()};Il.prototype.reset=function(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()},Il.prototype.touchstart=function(d,_,m){this.singleTap.touchstart(d,_,m)},Il.prototype.touchmove=function(d,_,m){this.singleTap.touchmove(d,_,m)},Il.prototype.touchend=function(d,_,m){var S=this.singleTap.touchend(d,_,m);if(S){var N=d.timeStamp-this.lastTime<500,X=!this.lastTap||this.lastTap.dist(S)<30;if(N&&X||this.reset(),this.count++,this.lastTime=d.timeStamp,this.lastTap=S,this.count===this.numTaps)return this.reset(),S}};var ku=function(){this._zoomIn=new Il({numTouches:1,numTaps:2}),this._zoomOut=new Il({numTouches:2,numTaps:1}),this.reset()};ku.prototype.reset=function(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()},ku.prototype.touchstart=function(d,_,m){this._zoomIn.touchstart(d,_,m),this._zoomOut.touchstart(d,_,m)},ku.prototype.touchmove=function(d,_,m){this._zoomIn.touchmove(d,_,m),this._zoomOut.touchmove(d,_,m)},ku.prototype.touchend=function(d,_,m){var S=this,N=this._zoomIn.touchend(d,_,m),X=this._zoomOut.touchend(d,_,m);return N?(this._active=!0,d.preventDefault(),setTimeout(function(){return S.reset()},0),{cameraAnimation:function(ee){return ee.easeTo({duration:300,zoom:ee.getZoom()+1,around:ee.unproject(N)},{originalEvent:d})}}):X?(this._active=!0,d.preventDefault(),setTimeout(function(){return S.reset()},0),{cameraAnimation:function(ee){return ee.easeTo({duration:300,zoom:ee.getZoom()-1,around:ee.unproject(X)},{originalEvent:d})}}):void 0},ku.prototype.touchcancel=function(){this.reset()},ku.prototype.enable=function(){this._enabled=!0},ku.prototype.disable=function(){this._enabled=!1,this.reset()},ku.prototype.isEnabled=function(){return this._enabled},ku.prototype.isActive=function(){return this._active};var ec={0:1,2:2},ia=function(d){this.reset(),this._clickTolerance=d.clickTolerance||1};ia.prototype.blur=function(){this.reset()},ia.prototype.reset=function(){this._active=!1,this._moved=!1,delete this._lastPoint,delete this._eventButton},ia.prototype._correctButton=function(d,_){return!1},ia.prototype._move=function(d,_){return{}},ia.prototype.mousedown=function(d,_){if(!this._lastPoint){var m=A.mouseButton(d);this._correctButton(d,m)&&(this._lastPoint=_,this._eventButton=m)}},ia.prototype.mousemoveWindow=function(d,_){var m=this._lastPoint;if(m){if(d.preventDefault(),function(S,N){var X=ec[N];return S.buttons===void 0||(S.buttons&X)!==X}(d,this._eventButton))this.reset();else if(this._moved||!(_.dist(m)<this._clickTolerance))return this._moved=!0,this._lastPoint=_,this._move(m,_)}},ia.prototype.mouseupWindow=function(d){this._lastPoint&&A.mouseButton(d)===this._eventButton&&(this._moved&&A.suppressClick(),this.reset())},ia.prototype.enable=function(){this._enabled=!0},ia.prototype.disable=function(){this._enabled=!1,this.reset()},ia.prototype.isEnabled=function(){return this._enabled},ia.prototype.isActive=function(){return this._active};var lf=function(d){function _(){d.apply(this,arguments)}return d&&(_.__proto__=d),(_.prototype=Object.create(d&&d.prototype)).constructor=_,_.prototype.mousedown=function(m,S){d.prototype.mousedown.call(this,m,S),this._lastPoint&&(this._active=!0)},_.prototype._correctButton=function(m,S){return S===0&&!m.ctrlKey},_.prototype._move=function(m,S){return{around:S,panDelta:S.sub(m)}},_}(ia),xc=function(d){function _(){d.apply(this,arguments)}return d&&(_.__proto__=d),(_.prototype=Object.create(d&&d.prototype)).constructor=_,_.prototype._correctButton=function(m,S){return S===0&&m.ctrlKey||S===2},_.prototype._move=function(m,S){var N=.8*(S.x-m.x);if(N)return this._active=!0,{bearingDelta:N}},_.prototype.contextmenu=function(m){m.preventDefault()},_}(ia),cc=function(d){function _(){d.apply(this,arguments)}return d&&(_.__proto__=d),(_.prototype=Object.create(d&&d.prototype)).constructor=_,_.prototype._correctButton=function(m,S){return S===0&&m.ctrlKey||S===2},_.prototype._move=function(m,S){var N=-.5*(S.y-m.y);if(N)return this._active=!0,{pitchDelta:N}},_.prototype.contextmenu=function(m){m.preventDefault()},_}(ia),Ps=function(d){this._minTouches=1,this._clickTolerance=d.clickTolerance||1,this.reset()};Ps.prototype.reset=function(){this._active=!1,this._touches={},this._sum=new l.Point(0,0)},Ps.prototype.touchstart=function(d,_,m){return this._calculateTransform(d,_,m)},Ps.prototype.touchmove=function(d,_,m){if(this._active&&!(m.length<this._minTouches))return d.preventDefault(),this._calculateTransform(d,_,m)},Ps.prototype.touchend=function(d,_,m){this._calculateTransform(d,_,m),this._active&&m.length<this._minTouches&&this.reset()},Ps.prototype.touchcancel=function(){this.reset()},Ps.prototype._calculateTransform=function(d,_,m){m.length>0&&(this._active=!0);var S=ql(m,_),N=new l.Point(0,0),X=new l.Point(0,0),ee=0;for(var Ae in S){var Ze=S[Ae],nt=this._touches[Ae];nt&&(N._add(Ze),X._add(Ze.sub(nt)),ee++,S[Ae]=Ze)}if(this._touches=S,!(ee<this._minTouches)&&X.mag()){var Ct=X.div(ee);if(this._sum._add(Ct),!(this._sum.mag()<this._clickTolerance))return{around:N.div(ee),panDelta:Ct}}},Ps.prototype.enable=function(){this._enabled=!0},Ps.prototype.disable=function(){this._enabled=!1,this.reset()},Ps.prototype.isEnabled=function(){return this._enabled},Ps.prototype.isActive=function(){return this._active};var ol=function(){this.reset()};function Yc(d,_,m){for(var S=0;S<d.length;S++)if(d[S].identifier===m)return _[S]}function Eu(d,_){return Math.log(d/_)/Math.LN2}ol.prototype.reset=function(){this._active=!1,delete this._firstTwoTouches},ol.prototype._start=function(d){},ol.prototype._move=function(d,_,m){return{}},ol.prototype.touchstart=function(d,_,m){this._firstTwoTouches||m.length<2||(this._firstTwoTouches=[m[0].identifier,m[1].identifier],this._start([_[0],_[1]]))},ol.prototype.touchmove=function(d,_,m){if(this._firstTwoTouches){d.preventDefault();var S=this._firstTwoTouches,N=S[1],X=Yc(m,_,S[0]),ee=Yc(m,_,N);if(X&&ee){var Ae=this._aroundCenter?null:X.add(ee).div(2);return this._move([X,ee],Ae,d)}}},ol.prototype.touchend=function(d,_,m){if(this._firstTwoTouches){var S=this._firstTwoTouches,N=S[1],X=Yc(m,_,S[0]),ee=Yc(m,_,N);X&&ee||(this._active&&A.suppressClick(),this.reset())}},ol.prototype.touchcancel=function(){this.reset()},ol.prototype.enable=function(d){this._enabled=!0,this._aroundCenter=!!d&&d.around==="center"},ol.prototype.disable=function(){this._enabled=!1,this.reset()},ol.prototype.isEnabled=function(){return this._enabled},ol.prototype.isActive=function(){return this._active};var el=function(d){function _(){d.apply(this,arguments)}return d&&(_.__proto__=d),(_.prototype=Object.create(d&&d.prototype)).constructor=_,_.prototype.reset=function(){d.prototype.reset.call(this),delete this._distance,delete this._startDistance},_.prototype._start=function(m){this._startDistance=this._distance=m[0].dist(m[1])},_.prototype._move=function(m,S){var N=this._distance;if(this._distance=m[0].dist(m[1]),this._active||!(Math.abs(Eu(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:Eu(this._distance,N),pinchAround:S}},_}(ol);function bc(d,_){return 180*d.angleWith(_)/Math.PI}var Vf=function(d){function _(){d.apply(this,arguments)}return d&&(_.__proto__=d),(_.prototype=Object.create(d&&d.prototype)).constructor=_,_.prototype.reset=function(){d.prototype.reset.call(this),delete this._minDiameter,delete this._startVector,delete this._vector},_.prototype._start=function(m){this._startVector=this._vector=m[0].sub(m[1]),this._minDiameter=m[0].dist(m[1])},_.prototype._move=function(m,S){var N=this._vector;if(this._vector=m[0].sub(m[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:bc(this._vector,N),pinchAround:S}},_.prototype._isBelowThreshold=function(m){this._minDiameter=Math.min(this._minDiameter,m.mag());var S=25/(Math.PI*this._minDiameter)*360,N=bc(m,this._startVector);return Math.abs(N)<S},_}(ol);function qr(d){return Math.abs(d.y)>Math.abs(d.x)}var ri=function(d){function _(){d.apply(this,arguments)}return d&&(_.__proto__=d),(_.prototype=Object.create(d&&d.prototype)).constructor=_,_.prototype.reset=function(){d.prototype.reset.call(this),this._valid=void 0,delete this._firstMove,delete this._lastPoints},_.prototype._start=function(m){this._lastPoints=m,qr(m[0].sub(m[1]))&&(this._valid=!1)},_.prototype._move=function(m,S,N){var X=m[0].sub(this._lastPoints[0]),ee=m[1].sub(this._lastPoints[1]);if(this._valid=this.gestureBeginsVertically(X,ee,N.timeStamp),this._valid)return this._lastPoints=m,this._active=!0,{pitchDelta:(X.y+ee.y)/2*-.5}},_.prototype.gestureBeginsVertically=function(m,S,N){if(this._valid!==void 0)return this._valid;var X=m.mag()>=2,ee=S.mag()>=2;if(X||ee){if(!X||!ee)return this._firstMove===void 0&&(this._firstMove=N),N-this._firstMove<100&&void 0;var Ae=m.y>0==S.y>0;return qr(m)&&qr(S)&&Ae}},_}(ol),Kn={panStep:100,bearingStep:15,pitchStep:10},Vn=function(){var d=Kn;this._panStep=d.panStep,this._bearingStep=d.bearingStep,this._pitchStep=d.pitchStep,this._rotationDisabled=!1};function Ri(d){return d*(2-d)}Vn.prototype.blur=function(){this.reset()},Vn.prototype.reset=function(){this._active=!1},Vn.prototype.keydown=function(d){var _=this;if(!(d.altKey||d.ctrlKey||d.metaKey)){var m=0,S=0,N=0,X=0,ee=0;switch(d.keyCode){case 61:case 107:case 171:case 187:m=1;break;case 189:case 109:case 173:m=-1;break;case 37:d.shiftKey?S=-1:(d.preventDefault(),X=-1);break;case 39:d.shiftKey?S=1:(d.preventDefault(),X=1);break;case 38:d.shiftKey?N=1:(d.preventDefault(),ee=-1);break;case 40:d.shiftKey?N=-1:(d.preventDefault(),ee=1);break;default:return}return this._rotationDisabled&&(S=0,N=0),{cameraAnimation:function(Ae){var Ze=Ae.getZoom();Ae.easeTo({duration:300,easeId:"keyboardHandler",easing:Ri,zoom:m?Math.round(Ze)+m*(d.shiftKey?2:1):Ze,bearing:Ae.getBearing()+S*_._bearingStep,pitch:Ae.getPitch()+N*_._pitchStep,offset:[-X*_._panStep,-ee*_._panStep],center:Ae.getCenter()},{originalEvent:d})}}}},Vn.prototype.enable=function(){this._enabled=!0},Vn.prototype.disable=function(){this._enabled=!1,this.reset()},Vn.prototype.isEnabled=function(){return this._enabled},Vn.prototype.isActive=function(){return this._active},Vn.prototype.disableRotation=function(){this._rotationDisabled=!0},Vn.prototype.enableRotation=function(){this._rotationDisabled=!1};var li=function(d,_){this._map=d,this._el=d.getCanvasContainer(),this._handler=_,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=1/450,l.bindAll(["_onTimeout"],this)};li.prototype.setZoomRate=function(d){this._defaultZoomRate=d},li.prototype.setWheelZoomRate=function(d){this._wheelZoomRate=d},li.prototype.isEnabled=function(){return!!this._enabled},li.prototype.isActive=function(){return!!this._active||this._finishTimeout!==void 0},li.prototype.isZooming=function(){return!!this._zooming},li.prototype.enable=function(d){this.isEnabled()||(this._enabled=!0,this._aroundCenter=d&&d.around==="center")},li.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)},li.prototype.wheel=function(d){if(this.isEnabled()){var _=d.deltaMode===l.window.WheelEvent.DOM_DELTA_LINE?40*d.deltaY:d.deltaY,m=l.browser.now(),S=m-(this._lastWheelEventTime||0);this._lastWheelEventTime=m,_!==0&&_%4.000244140625==0?this._type="wheel":_!==0&&Math.abs(_)<4?this._type="trackpad":S>400?(this._type=null,this._lastValue=_,this._timeout=setTimeout(this._onTimeout,40,d)):this._type||(this._type=Math.abs(S*_)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,_+=this._lastValue)),d.shiftKey&&_&&(_/=4),this._type&&(this._lastWheelEvent=d,this._delta-=_,this._active||this._start(d)),d.preventDefault()}},li.prototype._onTimeout=function(d){this._type="wheel",this._delta-=this._lastValue,this._active||this._start(d)},li.prototype._start=function(d){if(this._delta){this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);var _=A.mousePos(this._el,d);this._around=l.LngLat.convert(this._aroundCenter?this._map.getCenter():this._map.unproject(_)),this._aroundPoint=this._map.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame())}},li.prototype.renderFrame=function(){var d=this;if(this._frameId&&(this._frameId=null,this.isActive())){var _=this._map.transform;if(this._delta!==0){var m=this._type==="wheel"&&Math.abs(this._delta)>4.000244140625?this._wheelZoomRate:this._defaultZoomRate,S=2/(1+Math.exp(-Math.abs(this._delta*m)));this._delta<0&&S!==0&&(S=1/S);var N=typeof this._targetZoom=="number"?_.zoomScale(this._targetZoom):_.scale;this._targetZoom=Math.min(_.maxZoom,Math.max(_.minZoom,_.scaleZoom(N*S))),this._type==="wheel"&&(this._startZoom=_.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}var X,ee=typeof this._targetZoom=="number"?this._targetZoom:_.zoom,Ae=this._startZoom,Ze=this._easing,nt=!1;if(this._type==="wheel"&&Ae&&Ze){var Ct=Math.min((l.browser.now()-this._lastWheelEventTime)/200,1),Tt=Ze(Ct);X=l.number(Ae,ee,Tt),Ct<1?this._frameId||(this._frameId=!0):nt=!0}else X=ee,nt=!0;return this._active=!0,nt&&(this._active=!1,this._finishTimeout=setTimeout(function(){d._zooming=!1,d._handler._triggerRenderFrame(),delete d._targetZoom,delete d._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!nt,zoomDelta:X-_.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}},li.prototype._smoothOutEasing=function(d){var _=l.ease;if(this._prevEase){var m=this._prevEase,S=(l.browser.now()-m.start)/m.duration,N=m.easing(S+.01)-m.easing(S),X=.27/Math.sqrt(N*N+1e-4)*.01,ee=Math.sqrt(.0729-X*X);_=l.bezier(X,ee,.25,1)}return this._prevEase={start:l.browser.now(),duration:d,easing:_},_},li.prototype.blur=function(){this.reset()},li.prototype.reset=function(){this._active=!1};var ga=function(d,_){this._clickZoom=d,this._tapZoom=_};ga.prototype.enable=function(){this._clickZoom.enable(),this._tapZoom.enable()},ga.prototype.disable=function(){this._clickZoom.disable(),this._tapZoom.disable()},ga.prototype.isEnabled=function(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()},ga.prototype.isActive=function(){return this._clickZoom.isActive()||this._tapZoom.isActive()};var Ka=function(){this.reset()};Ka.prototype.reset=function(){this._active=!1},Ka.prototype.blur=function(){this.reset()},Ka.prototype.dblclick=function(d,_){return d.preventDefault(),{cameraAnimation:function(m){m.easeTo({duration:300,zoom:m.getZoom()+(d.shiftKey?-1:1),around:m.unproject(_)},{originalEvent:d})}}},Ka.prototype.enable=function(){this._enabled=!0},Ka.prototype.disable=function(){this._enabled=!1,this.reset()},Ka.prototype.isEnabled=function(){return this._enabled},Ka.prototype.isActive=function(){return this._active};var Ma=function(){this._tap=new Il({numTouches:1,numTaps:1}),this.reset()};Ma.prototype.reset=function(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,this._tap.reset()},Ma.prototype.touchstart=function(d,_,m){this._swipePoint||(this._tapTime&&d.timeStamp-this._tapTime>500&&this.reset(),this._tapTime?m.length>0&&(this._swipePoint=_[0],this._swipeTouch=m[0].identifier):this._tap.touchstart(d,_,m))},Ma.prototype.touchmove=function(d,_,m){if(this._tapTime){if(this._swipePoint){if(m[0].identifier!==this._swipeTouch)return;var S=_[0],N=S.y-this._swipePoint.y;return this._swipePoint=S,d.preventDefault(),this._active=!0,{zoomDelta:N/128}}}else this._tap.touchmove(d,_,m)},Ma.prototype.touchend=function(d,_,m){this._tapTime?this._swipePoint&&m.length===0&&this.reset():this._tap.touchend(d,_,m)&&(this._tapTime=d.timeStamp)},Ma.prototype.touchcancel=function(){this.reset()},Ma.prototype.enable=function(){this._enabled=!0},Ma.prototype.disable=function(){this._enabled=!1,this.reset()},Ma.prototype.isEnabled=function(){return this._enabled},Ma.prototype.isActive=function(){return this._active};var Bo=function(d,_,m){this._el=d,this._mousePan=_,this._touchPan=m};Bo.prototype.enable=function(d){this._inertiaOptions=d||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("mapboxgl-touch-drag-pan")},Bo.prototype.disable=function(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("mapboxgl-touch-drag-pan")},Bo.prototype.isEnabled=function(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()},Bo.prototype.isActive=function(){return this._mousePan.isActive()||this._touchPan.isActive()};var As=function(d,_,m){this._pitchWithRotate=d.pitchWithRotate,this._mouseRotate=_,this._mousePitch=m};As.prototype.enable=function(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()},As.prototype.disable=function(){this._mouseRotate.disable(),this._mousePitch.disable()},As.prototype.isEnabled=function(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())},As.prototype.isActive=function(){return this._mouseRotate.isActive()||this._mousePitch.isActive()};var Su=function(d,_,m,S){this._el=d,this._touchZoom=_,this._touchRotate=m,this._tapDragZoom=S,this._rotationDisabled=!1,this._enabled=!0};Su.prototype.enable=function(d){this._touchZoom.enable(d),this._rotationDisabled||this._touchRotate.enable(d),this._tapDragZoom.enable(),this._el.classList.add("mapboxgl-touch-zoom-rotate")},Su.prototype.disable=function(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("mapboxgl-touch-zoom-rotate")},Su.prototype.isEnabled=function(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()},Su.prototype.isActive=function(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()},Su.prototype.disableRotation=function(){this._rotationDisabled=!0,this._touchRotate.disable()},Su.prototype.enableRotation=function(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()};var cu=function(d){return d.zoom||d.drag||d.pitch||d.rotate},tl=function(d){function _(){d.apply(this,arguments)}return d&&(_.__proto__=d),(_.prototype=Object.create(d&&d.prototype)).constructor=_,_}(l.Event);function Pa(d){return d.panDelta&&d.panDelta.mag()||d.zoomDelta||d.bearingDelta||d.pitchDelta}var la=function(d,_){this._map=d,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new _c(d),this._bearingSnap=_.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(_),l.bindAll(["handleEvent","handleWindowEvent"],this);var m=this._el;this._listeners=[[m,"touchstart",{passive:!0}],[m,"touchmove",{passive:!1}],[m,"touchend",void 0],[m,"touchcancel",void 0],[m,"mousedown",void 0],[m,"mousemove",void 0],[m,"mouseup",void 0],[l.window.document,"mousemove",{capture:!0}],[l.window.document,"mouseup",void 0],[m,"mouseover",void 0],[m,"mouseout",void 0],[m,"dblclick",void 0],[m,"click",void 0],[m,"keydown",{capture:!1}],[m,"keyup",void 0],[m,"wheel",{passive:!1}],[m,"contextmenu",void 0],[l.window,"blur",void 0]];for(var S=0,N=this._listeners;S<N.length;S+=1){var X=N[S],ee=X[0];A.addEventListener(ee,X[1],ee===l.window.document?this.handleWindowEvent:this.handleEvent,X[2])}};la.prototype.destroy=function(){for(var d=0,_=this._listeners;d<_.length;d+=1){var m=_[d],S=m[0];A.removeEventListener(S,m[1],S===l.window.document?this.handleWindowEvent:this.handleEvent,m[2])}},la.prototype._addDefaultHandlers=function(d){var _=this._map,m=_.getCanvasContainer();this._add("mapEvent",new qs(_,d));var S=_.boxZoom=new Gs(_,d);this._add("boxZoom",S);var N=new ku,X=new Ka;_.doubleClickZoom=new ga(X,N),this._add("tapZoom",N),this._add("clickZoom",X);var ee=new Ma;this._add("tapDragZoom",ee);var Ae=_.touchPitch=new ri;this._add("touchPitch",Ae);var Ze=new xc(d),nt=new cc(d);_.dragRotate=new As(d,Ze,nt),this._add("mouseRotate",Ze,["mousePitch"]),this._add("mousePitch",nt,["mouseRotate"]);var Ct=new lf(d),Tt=new Ps(d);_.dragPan=new Bo(m,Ct,Tt),this._add("mousePan",Ct),this._add("touchPan",Tt,["touchZoom","touchRotate"]);var Pt=new Vf,tr=new el;_.touchZoomRotate=new Su(m,tr,Pt,ee),this._add("touchRotate",Pt,["touchPan","touchZoom"]),this._add("touchZoom",tr,["touchPan","touchRotate"]);var or=_.scrollZoom=new li(_,this);this._add("scrollZoom",or,["mousePan"]);var gr=_.keyboard=new Vn;this._add("keyboard",gr),this._add("blockableMapEvent",new ji(_));for(var Yt=0,br=["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"];Yt<br.length;Yt+=1){var Lr=br[Yt];d.interactive&&d[Lr]&&_[Lr].enable(d[Lr])}},la.prototype._add=function(d,_,m){this._handlers.push({handlerName:d,handler:_,allowed:m}),this._handlersById[d]=_},la.prototype.stop=function(d){if(!this._updatingCamera){for(var _=0,m=this._handlers;_<m.length;_+=1)m[_].handler.reset();this._inertia.clear(),this._fireEvents({},{},d),this._changes=[]}},la.prototype.isActive=function(){for(var d=0,_=this._handlers;d<_.length;d+=1)if(_[d].handler.isActive())return!0;return!1},la.prototype.isZooming=function(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()},la.prototype.isRotating=function(){return!!this._eventsInProgress.rotate},la.prototype.isMoving=function(){return Boolean(cu(this._eventsInProgress))||this.isZooming()},la.prototype._blockedByActive=function(d,_,m){for(var S in d)if(S!==m&&(!_||_.indexOf(S)<0))return!0;return!1},la.prototype.handleWindowEvent=function(d){this.handleEvent(d,d.type+"Window")},la.prototype._getMapTouches=function(d){for(var _=[],m=0,S=d;m<S.length;m+=1){var N=S[m];this._el.contains(N.target)&&_.push(N)}return _},la.prototype.handleEvent=function(d,_){this._updatingCamera=!0;for(var m=d.type==="renderFrame"?void 0:d,S={needsRenderFrame:!1},N={},X={},ee=d.touches?this._getMapTouches(d.touches):void 0,Ae=ee?A.touchPos(this._el,ee):A.mousePos(this._el,d),Ze=0,nt=this._handlers;Ze<nt.length;Ze+=1){var Ct=nt[Ze],Tt=Ct.handlerName,Pt=Ct.handler,tr=Ct.allowed;if(Pt.isEnabled()){var or=void 0;this._blockedByActive(X,tr,Tt)?Pt.reset():Pt[_||d.type]&&(or=Pt[_||d.type](d,Ae,ee),this.mergeHandlerResult(S,N,or,Tt,m),or&&or.needsRenderFrame&&this._triggerRenderFrame()),(or||Pt.isActive())&&(X[Tt]=Pt)}}var gr={};for(var Yt in this._previousActiveHandlers)X[Yt]||(gr[Yt]=m);this._previousActiveHandlers=X,(Object.keys(gr).length||Pa(S))&&(this._changes.push([S,N,gr]),this._triggerRenderFrame()),(Object.keys(X).length||Pa(S))&&this._map._stop(!0),this._updatingCamera=!1;var br=S.cameraAnimation;br&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],br(this._map))},la.prototype.mergeHandlerResult=function(d,_,m,S,N){if(m){l.extend(d,m);var X={handlerName:S,originalEvent:m.originalEvent||N};m.zoomDelta!==void 0&&(_.zoom=X),m.panDelta!==void 0&&(_.drag=X),m.pitchDelta!==void 0&&(_.pitch=X),m.bearingDelta!==void 0&&(_.rotate=X)}},la.prototype._applyChanges=function(){for(var d={},_={},m={},S=0,N=this._changes;S<N.length;S+=1){var X=N[S],ee=X[0],Ae=X[1],Ze=X[2];ee.panDelta&&(d.panDelta=(d.panDelta||new l.Point(0,0))._add(ee.panDelta)),ee.zoomDelta&&(d.zoomDelta=(d.zoomDelta||0)+ee.zoomDelta),ee.bearingDelta&&(d.bearingDelta=(d.bearingDelta||0)+ee.bearingDelta),ee.pitchDelta&&(d.pitchDelta=(d.pitchDelta||0)+ee.pitchDelta),ee.around!==void 0&&(d.around=ee.around),ee.pinchAround!==void 0&&(d.pinchAround=ee.pinchAround),ee.noInertia&&(d.noInertia=ee.noInertia),l.extend(_,Ae),l.extend(m,Ze)}this._updateMapTransform(d,_,m),this._changes=[]},la.prototype._updateMapTransform=function(d,_,m){var S=this._map,N=S.transform;if(!Pa(d))return this._fireEvents(_,m,!0);var X=d.panDelta,ee=d.zoomDelta,Ae=d.bearingDelta,Ze=d.pitchDelta,nt=d.around,Ct=d.pinchAround;Ct!==void 0&&(nt=Ct),S._stop(!0),nt=nt||S.transform.centerPoint;var Tt=N.pointLocation(X?nt.sub(X):nt);Ae&&(N.bearing+=Ae),Ze&&(N.pitch+=Ze),ee&&(N.zoom+=ee),N.setLocationAtPoint(Tt,nt),this._map._update(),d.noInertia||this._inertia.record(d),this._fireEvents(_,m,!0)},la.prototype._fireEvents=function(d,_,m){var S=this,N=cu(this._eventsInProgress),X=cu(d),ee={};for(var Ae in d)this._eventsInProgress[Ae]||(ee[Ae+"start"]=d[Ae].originalEvent),this._eventsInProgress[Ae]=d[Ae];for(var Ze in!N&&X&&this._fireEvent("movestart",X.originalEvent),ee)this._fireEvent(Ze,ee[Ze]);for(var nt in X&&this._fireEvent("move",X.originalEvent),d)this._fireEvent(nt,d[nt].originalEvent);var Ct,Tt={};for(var Pt in this._eventsInProgress){var tr=this._eventsInProgress[Pt],or=tr.handlerName,gr=tr.originalEvent;this._handlersById[or].isActive()||(delete this._eventsInProgress[Pt],Tt[Pt+"end"]=Ct=_[or]||gr)}for(var Yt in Tt)this._fireEvent(Yt,Tt[Yt]);var br=cu(this._eventsInProgress);if(m&&(N||X)&&!br){this._updatingCamera=!0;var Lr=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),pn=function(zn){return zn!==0&&-S._bearingSnap<zn&&zn<S._bearingSnap};Lr?(pn(Lr.bearing||this._map.getBearing())&&(Lr.bearing=0),this._map.easeTo(Lr,{originalEvent:Ct})):(this._map.fire(new l.Event("moveend",{originalEvent:Ct})),pn(this._map.getBearing())&&this._map.resetNorth()),this._updatingCamera=!1}},la.prototype._fireEvent=function(d,_){this._map.fire(new l.Event(d,_?{originalEvent:_}:{}))},la.prototype._requestFrame=function(){var d=this;return this._map.triggerRepaint(),this._map._renderTaskQueue.add(function(_){delete d._frameId,d.handleEvent(new tl("renderFrame",{timeStamp:_})),d._applyChanges()})},la.prototype._triggerRenderFrame=function(){this._frameId===void 0&&(this._frameId=this._requestFrame())};var sl=function(d){function _(m,S){d.call(this),this._moving=!1,this._zooming=!1,this.transform=m,this._bearingSnap=S.bearingSnap,l.bindAll(["_renderFrameCallback"],this)}return d&&(_.__proto__=d),(_.prototype=Object.create(d&&d.prototype)).constructor=_,_.prototype.getCenter=function(){return new l.LngLat(this.transform.center.lng,this.transform.center.lat)},_.prototype.setCenter=function(m,S){return this.jumpTo({center:m},S)},_.prototype.panBy=function(m,S,N){return m=l.Point.convert(m).mult(-1),this.panTo(this.transform.center,l.extend({offset:m},S),N)},_.prototype.panTo=function(m,S,N){return this.easeTo(l.extend({center:m},S),N)},_.prototype.getZoom=function(){return this.transform.zoom},_.prototype.setZoom=function(m,S){return this.jumpTo({zoom:m},S),this},_.prototype.zoomTo=function(m,S,N){return this.easeTo(l.extend({zoom:m},S),N)},_.prototype.zoomIn=function(m,S){return this.zoomTo(this.getZoom()+1,m,S),this},_.prototype.zoomOut=function(m,S){return this.zoomTo(this.getZoom()-1,m,S),this},_.prototype.getBearing=function(){return this.transform.bearing},_.prototype.setBearing=function(m,S){return this.jumpTo({bearing:m},S),this},_.prototype.getPadding=function(){return this.transform.padding},_.prototype.setPadding=function(m,S){return this.jumpTo({padding:m},S),this},_.prototype.rotateTo=function(m,S,N){return this.easeTo(l.extend({bearing:m},S),N)},_.prototype.resetNorth=function(m,S){return this.rotateTo(0,l.extend({duration:1e3},m),S),this},_.prototype.resetNorthPitch=function(m,S){return this.easeTo(l.extend({bearing:0,pitch:0,duration:1e3},m),S),this},_.prototype.snapToNorth=function(m,S){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(m,S):this},_.prototype.getPitch=function(){return this.transform.pitch},_.prototype.setPitch=function(m,S){return this.jumpTo({pitch:m},S),this},_.prototype.cameraForBounds=function(m,S){m=l.LngLatBounds.convert(m);var N=S&&S.bearing||0;return this._cameraForBoxAndBearing(m.getNorthWest(),m.getSouthEast(),N,S)},_.prototype._cameraForBoxAndBearing=function(m,S,N,X){var ee={top:0,bottom:0,right:0,left:0};if(typeof(X=l.extend({padding:ee,offset:[0,0],maxZoom:this.transform.maxZoom},X)).padding=="number"){var Ae=X.padding;X.padding={top:Ae,bottom:Ae,right:Ae,left:Ae}}X.padding=l.extend(ee,X.padding);var Ze=this.transform,nt=Ze.padding,Ct=Ze.project(l.LngLat.convert(m)),Tt=Ze.project(l.LngLat.convert(S)),Pt=Ct.rotate(-N*Math.PI/180),tr=Tt.rotate(-N*Math.PI/180),or=new l.Point(Math.max(Pt.x,tr.x),Math.max(Pt.y,tr.y)),gr=new l.Point(Math.min(Pt.x,tr.x),Math.min(Pt.y,tr.y)),Yt=or.sub(gr),br=(Ze.width-(nt.left+nt.right+X.padding.left+X.padding.right))/Yt.x,Lr=(Ze.height-(nt.top+nt.bottom+X.padding.top+X.padding.bottom))/Yt.y;if(!(Lr<0||br<0)){var pn=Math.min(Ze.scaleZoom(Ze.scale*Math.min(br,Lr)),X.maxZoom),zn=typeof X.offset.x=="number"?new l.Point(X.offset.x,X.offset.y):l.Point.convert(X.offset),Nn=new l.Point((X.padding.left-X.padding.right)/2,(X.padding.top-X.padding.bottom)/2).rotate(N*Math.PI/180),Xn=zn.add(Nn).mult(Ze.scale/Ze.zoomScale(pn));return{center:Ze.unproject(Ct.add(Tt).div(2).sub(Xn)),zoom:pn,bearing:N}}l.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.")},_.prototype.fitBounds=function(m,S,N){return this._fitInternal(this.cameraForBounds(m,S),S,N)},_.prototype.fitScreenCoordinates=function(m,S,N,X,ee){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(l.Point.convert(m)),this.transform.pointLocation(l.Point.convert(S)),N,X),X,ee)},_.prototype._fitInternal=function(m,S,N){return m?(delete(S=l.extend(m,S)).padding,S.linear?this.easeTo(S,N):this.flyTo(S,N)):this},_.prototype.jumpTo=function(m,S){this.stop();var N=this.transform,X=!1,ee=!1,Ae=!1;return"zoom"in m&&N.zoom!==+m.zoom&&(X=!0,N.zoom=+m.zoom),m.center!==void 0&&(N.center=l.LngLat.convert(m.center)),"bearing"in m&&N.bearing!==+m.bearing&&(ee=!0,N.bearing=+m.bearing),"pitch"in m&&N.pitch!==+m.pitch&&(Ae=!0,N.pitch=+m.pitch),m.padding==null||N.isPaddingEqual(m.padding)||(N.padding=m.padding),this.fire(new l.Event("movestart",S)).fire(new l.Event("move",S)),X&&this.fire(new l.Event("zoomstart",S)).fire(new l.Event("zoom",S)).fire(new l.Event("zoomend",S)),ee&&this.fire(new l.Event("rotatestart",S)).fire(new l.Event("rotate",S)).fire(new l.Event("rotateend",S)),Ae&&this.fire(new l.Event("pitchstart",S)).fire(new l.Event("pitch",S)).fire(new l.Event("pitchend",S)),this.fire(new l.Event("moveend",S))},_.prototype.easeTo=function(m,S){var N=this;this._stop(!1,m.easeId),((m=l.extend({offset:[0,0],duration:500,easing:l.ease},m)).animate===!1||!m.essential&&l.browser.prefersReducedMotion)&&(m.duration=0);var X=this.transform,ee=this.getZoom(),Ae=this.getBearing(),Ze=this.getPitch(),nt=this.getPadding(),Ct="zoom"in m?+m.zoom:ee,Tt="bearing"in m?this._normalizeBearing(m.bearing,Ae):Ae,Pt="pitch"in m?+m.pitch:Ze,tr="padding"in m?m.padding:X.padding,or=l.Point.convert(m.offset),gr=X.centerPoint.add(or),Yt=X.pointLocation(gr),br=l.LngLat.convert(m.center||Yt);this._normalizeCenter(br);var Lr,pn,zn=X.project(Yt),Nn=X.project(br).sub(zn),Xn=X.zoomScale(Ct-ee);m.around&&(Lr=l.LngLat.convert(m.around),pn=X.locationPoint(Lr));var yi={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||Ct!==ee,this._rotating=this._rotating||Ae!==Tt,this._pitching=this._pitching||Pt!==Ze,this._padding=!X.isPaddingEqual(tr),this._easeId=m.easeId,this._prepareEase(S,m.noMoveStart,yi),this._ease(function(Li){if(N._zooming&&(X.zoom=l.number(ee,Ct,Li)),N._rotating&&(X.bearing=l.number(Ae,Tt,Li)),N._pitching&&(X.pitch=l.number(Ze,Pt,Li)),N._padding&&(X.interpolatePadding(nt,tr,Li),gr=X.centerPoint.add(or)),Lr)X.setLocationAtPoint(Lr,pn);else{var Ei=X.zoomScale(X.zoom-ee),Vi=Ct>ee?Math.min(2,Xn):Math.max(.5,Xn),Ea=Math.pow(Vi,1-Li),Qa=X.unproject(zn.add(Nn.mult(Li*Ea)).mult(Ei));X.setLocationAtPoint(X.renderWorldCopies?Qa.wrap():Qa,gr)}N._fireMoveEvents(S)},function(Li){N._afterEase(S,Li)},m),this},_.prototype._prepareEase=function(m,S,N){N===void 0&&(N={}),this._moving=!0,S||N.moving||this.fire(new l.Event("movestart",m)),this._zooming&&!N.zooming&&this.fire(new l.Event("zoomstart",m)),this._rotating&&!N.rotating&&this.fire(new l.Event("rotatestart",m)),this._pitching&&!N.pitching&&this.fire(new l.Event("pitchstart",m))},_.prototype._fireMoveEvents=function(m){this.fire(new l.Event("move",m)),this._zooming&&this.fire(new l.Event("zoom",m)),this._rotating&&this.fire(new l.Event("rotate",m)),this._pitching&&this.fire(new l.Event("pitch",m))},_.prototype._afterEase=function(m,S){if(!this._easeId||!S||this._easeId!==S){delete this._easeId;var N=this._zooming,X=this._rotating,ee=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,N&&this.fire(new l.Event("zoomend",m)),X&&this.fire(new l.Event("rotateend",m)),ee&&this.fire(new l.Event("pitchend",m)),this.fire(new l.Event("moveend",m))}},_.prototype.flyTo=function(m,S){var N=this;if(!m.essential&&l.browser.prefersReducedMotion){var X=l.pick(m,["center","zoom","bearing","pitch","around"]);return this.jumpTo(X,S)}this.stop(),m=l.extend({offset:[0,0],speed:1.2,curve:1.42,easing:l.ease},m);var ee=this.transform,Ae=this.getZoom(),Ze=this.getBearing(),nt=this.getPitch(),Ct=this.getPadding(),Tt="zoom"in m?l.clamp(+m.zoom,ee.minZoom,ee.maxZoom):Ae,Pt="bearing"in m?this._normalizeBearing(m.bearing,Ze):Ze,tr="pitch"in m?+m.pitch:nt,or="padding"in m?m.padding:ee.padding,gr=ee.zoomScale(Tt-Ae),Yt=l.Point.convert(m.offset),br=ee.centerPoint.add(Yt),Lr=ee.pointLocation(br),pn=l.LngLat.convert(m.center||Lr);this._normalizeCenter(pn);var zn=ee.project(Lr),Nn=ee.project(pn).sub(zn),Xn=m.curve,yi=Math.max(ee.width,ee.height),Li=yi/gr,Ei=Nn.mag();if("minZoom"in m){var Vi=l.clamp(Math.min(m.minZoom,Ae,Tt),ee.minZoom,ee.maxZoom),Ea=yi/ee.zoomScale(Vi-Ae);Xn=Math.sqrt(Ea/Ei*2)}var Qa=Xn*Xn;function Ga(eo){var Ia=(Li*Li-yi*yi+(eo?-1:1)*Qa*Qa*Ei*Ei)/(2*(eo?Li:yi)*Qa*Ei);return Math.log(Math.sqrt(Ia*Ia+1)-Ia)}function io(eo){return(Math.exp(eo)-Math.exp(-eo))/2}function ya(eo){return(Math.exp(eo)+Math.exp(-eo))/2}var yo=Ga(0),_o=function(eo){return ya(yo)/ya(yo+Xn*eo)},po=function(eo){return yi*((ya(yo)*(io(Ia=yo+Xn*eo)/ya(Ia))-io(yo))/Qa)/Ei;var Ia},Ha=(Ga(1)-yo)/Xn;if(Math.abs(Ei)<1e-6||!isFinite(Ha)){if(Math.abs(yi-Li)<1e-6)return this.easeTo(m,S);var Ro=Li<yi?-1:1;Ha=Math.abs(Math.log(Li/yi))/Xn,po=function(){return 0},_o=function(eo){return Math.exp(Ro*Xn*eo)}}return m.duration="duration"in m?+m.duration:1e3*Ha/("screenSpeed"in m?+m.screenSpeed/Xn:+m.speed),m.maxDuration&&m.duration>m.maxDuration&&(m.duration=0),this._zooming=!0,this._rotating=Ze!==Pt,this._pitching=tr!==nt,this._padding=!ee.isPaddingEqual(or),this._prepareEase(S,!1),this._ease(function(eo){var Ia=eo*Ha,Gu=1/_o(Ia);ee.zoom=eo===1?Tt:Ae+ee.scaleZoom(Gu),N._rotating&&(ee.bearing=l.number(Ze,Pt,eo)),N._pitching&&(ee.pitch=l.number(nt,tr,eo)),N._padding&&(ee.interpolatePadding(Ct,or,eo),br=ee.centerPoint.add(Yt));var co=eo===1?pn:ee.unproject(zn.add(Nn.mult(po(Ia))).mult(Gu));ee.setLocationAtPoint(ee.renderWorldCopies?co.wrap():co,br),N._fireMoveEvents(S)},function(){return N._afterEase(S)},m),this},_.prototype.isEasing=function(){return!!this._easeFrameId},_.prototype.stop=function(){return this._stop()},_.prototype._stop=function(m,S){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){var N=this._onEaseEnd;delete this._onEaseEnd,N.call(this,S)}if(!m){var X=this.handlers;X&&X.stop(!1)}return this},_.prototype._ease=function(m,S,N){N.animate===!1||N.duration===0?(m(1),S()):(this._easeStart=l.browser.now(),this._easeOptions=N,this._onEaseFrame=m,this._onEaseEnd=S,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))},_.prototype._renderFrameCallback=function(){var m=Math.min((l.browser.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(m)),m<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},_.prototype._normalizeBearing=function(m,S){m=l.wrap(m,-180,180);var N=Math.abs(m-S);return Math.abs(m-360-S)<N&&(m-=360),Math.abs(m+360-S)<N&&(m+=360),m},_.prototype._normalizeCenter=function(m){var S=this.transform;if(S.renderWorldCopies&&!S.lngRange){var N=m.lng-S.center.lng;m.lng+=N>180?-360:N<-180?360:0}},_}(l.Evented),us=function(d){d===void 0&&(d={}),this.options=d,l.bindAll(["_toggleAttribution","_updateEditLink","_updateData","_updateCompact"],this)};us.prototype.getDefaultPosition=function(){return"bottom-right"},us.prototype.onAdd=function(d){var _=this.options&&this.options.compact;return this._map=d,this._container=A.create("div","mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._compactButton=A.create("button","mapboxgl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=A.create("div","mapboxgl-ctrl-attrib-inner",this._container),this._innerContainer.setAttribute("role","list"),_&&this._container.classList.add("mapboxgl-compact"),this._updateAttributions(),this._updateEditLink(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("moveend",this._updateEditLink),_===void 0&&(this._map.on("resize",this._updateCompact),this._updateCompact()),this._container},us.prototype.onRemove=function(){A.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("moveend",this._updateEditLink),this._map.off("resize",this._updateCompact),this._map=void 0,this._attribHTML=void 0},us.prototype._setElementTitle=function(d,_){var m=this._map._getUIString("AttributionControl."+_);d.title=m,d.setAttribute("aria-label",m)},us.prototype._toggleAttribution=function(){this._container.classList.contains("mapboxgl-compact-show")?(this._container.classList.remove("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-pressed","false")):(this._container.classList.add("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-pressed","true"))},us.prototype._updateEditLink=function(){var d=this._editLink;d||(d=this._editLink=this._container.querySelector(".mapbox-improve-map"));var _=[{key:"owner",value:this.styleOwner},{key:"id",value:this.styleId},{key:"access_token",value:this._map._requestManager._customAccessToken||l.config.ACCESS_TOKEN}];if(d){var m=_.reduce(function(S,N,X){return N.value&&(S+=N.key+"="+N.value+(X<_.length-1?"&":"")),S},"?");d.href=l.config.FEEDBACK_URL+"/"+m+(this._map._hash?this._map._hash.getHashString(!0):""),d.rel="noopener nofollow",this._setElementTitle(d,"MapFeedback")}},us.prototype._updateData=function(d){!d||d.sourceDataType!=="metadata"&&d.sourceDataType!=="visibility"&&d.dataType!=="style"||(this._updateAttributions(),this._updateEditLink())},us.prototype._updateAttributions=function(){if(this._map.style){var d=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?d=d.concat(this.options.customAttribution.map(function(Ae){return typeof Ae!="string"?"":Ae})):typeof this.options.customAttribution=="string"&&d.push(this.options.customAttribution)),this._map.style.stylesheet){var _=this._map.style.stylesheet;this.styleOwner=_.owner,this.styleId=_.id}var m=this._map.style.sourceCaches;for(var S in m){var N=m[S];if(N.used){var X=N.getSource();X.attribution&&d.indexOf(X.attribution)<0&&d.push(X.attribution)}}d.sort(function(Ae,Ze){return Ae.length-Ze.length});var ee=(d=d.filter(function(Ae,Ze){for(var nt=Ze+1;nt<d.length;nt++)if(d[nt].indexOf(Ae)>=0)return!1;return!0})).join(" | ");ee!==this._attribHTML&&(this._attribHTML=ee,d.length?(this._innerContainer.innerHTML=ee,this._container.classList.remove("mapboxgl-attrib-empty")):this._container.classList.add("mapboxgl-attrib-empty"),this._editLink=null)}},us.prototype._updateCompact=function(){this._map.getCanvasContainer().offsetWidth<=640?this._container.classList.add("mapboxgl-compact"):this._container.classList.remove("mapboxgl-compact","mapboxgl-compact-show")};var wu=function(){l.bindAll(["_updateLogo"],this),l.bindAll(["_updateCompact"],this)};wu.prototype.onAdd=function(d){this._map=d,this._container=A.create("div","mapboxgl-ctrl");var _=A.create("a","mapboxgl-ctrl-logo");return _.target="_blank",_.rel="noopener nofollow",_.href="https://www.mapbox.com/",_.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),_.setAttribute("rel","noopener nofollow"),this._container.appendChild(_),this._container.style.display="none",this._map.on("sourcedata",this._updateLogo),this._updateLogo(),this._map.on("resize",this._updateCompact),this._updateCompact(),this._container},wu.prototype.onRemove=function(){A.remove(this._container),this._map.off("sourcedata",this._updateLogo),this._map.off("resize",this._updateCompact)},wu.prototype.getDefaultPosition=function(){return"bottom-left"},wu.prototype._updateLogo=function(d){d&&d.sourceDataType!=="metadata"||(this._container.style.display=this._logoRequired()?"block":"none")},wu.prototype._logoRequired=function(){if(this._map.style){var d=this._map.style.sourceCaches;for(var _ in d)if(d[_].getSource().mapbox_logo)return!0;return!1}},wu.prototype._updateCompact=function(){var d=this._container.children;if(d.length){var _=d[0];this._map.getCanvasContainer().offsetWidth<250?_.classList.add("mapboxgl-compact"):_.classList.remove("mapboxgl-compact")}};var Zs=function(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1};Zs.prototype.add=function(d){var _=++this._id;return this._queue.push({callback:d,id:_,cancelled:!1}),_},Zs.prototype.remove=function(d){for(var _=this._currentlyRunning,m=0,S=_?this._queue.concat(_):this._queue;m<S.length;m+=1){var N=S[m];if(N.id===d)return void(N.cancelled=!0)}},Zs.prototype.run=function(d){d===void 0&&(d=0);var _=this._currentlyRunning=this._queue;this._queue=[];for(var m=0,S=_;m<S.length;m+=1){var N=S[m];if(!N.cancelled&&(N.callback(d),this._cleared))break}this._cleared=!1,this._currentlyRunning=!1},Zs.prototype.clear=function(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]};var ul={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm"},Ec=l.window.HTMLImageElement,cf=l.window.HTMLElement,ws=l.window.ImageBitmap,Qo={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",transformRequest:null,accessToken:null,fadeDuration:300,crossSourceCollisions:!0},ff=function(d){function _(S){var N=this;if((S=l.extend({},Qo,S)).minZoom!=null&&S.maxZoom!=null&&S.minZoom>S.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(S.minPitch!=null&&S.maxPitch!=null&&S.minPitch>S.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(S.minPitch!=null&&S.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(S.maxPitch!=null&&S.maxPitch>60)throw new Error("maxPitch must be less than or equal to 60");var X=new da(S.minZoom,S.maxZoom,S.minPitch,S.maxPitch,S.renderWorldCopies);if(d.call(this,X,S),this._interactive=S.interactive,this._maxTileCacheSize=S.maxTileCacheSize,this._failIfMajorPerformanceCaveat=S.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=S.preserveDrawingBuffer,this._antialias=S.antialias,this._trackResize=S.trackResize,this._bearingSnap=S.bearingSnap,this._refreshExpiredTiles=S.refreshExpiredTiles,this._fadeDuration=S.fadeDuration,this._crossSourceCollisions=S.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=S.collectResourceTiming,this._renderTaskQueue=new Zs,this._controls=[],this._mapId=l.uniqueId(),this._locale=l.extend({},ul,S.locale),this._clickTolerance=S.clickTolerance,this._requestManager=new l.RequestManager(S.transformRequest,S.accessToken),typeof S.container=="string"){if(this._container=l.window.document.getElementById(S.container),!this._container)throw new Error("Container '"+S.container+"' not found.")}else{if(!(S.container instanceof cf))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=S.container}if(S.maxBounds&&this.setMaxBounds(S.maxBounds),l.bindAll(["_onWindowOnline","_onWindowResize","_onMapScroll","_contextLost","_contextRestored"],this),this._setupContainer(),this._setupPainter(),this.painter===void 0)throw new Error("Failed to initialize WebGL.");this.on("move",function(){return N._update(!1)}),this.on("moveend",function(){return N._update(!1)}),this.on("zoom",function(){return N._update(!0)}),l.window!==void 0&&(l.window.addEventListener("online",this._onWindowOnline,!1),l.window.addEventListener("resize",this._onWindowResize,!1),l.window.addEventListener("orientationchange",this._onWindowResize,!1)),this.handlers=new la(this,S),this._hash=S.hash&&new Ua(typeof S.hash=="string"&&S.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:S.center,zoom:S.zoom,bearing:S.bearing,pitch:S.pitch}),S.bounds&&(this.resize(),this.fitBounds(S.bounds,l.extend({},S.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=S.localIdeographFontFamily,S.style&&this.setStyle(S.style,{localIdeographFontFamily:S.localIdeographFontFamily}),S.attributionControl&&this.addControl(new us({customAttribution:S.customAttribution})),this.addControl(new wu,S.logoPosition),this.on("style.load",function(){N.transform.unmodified&&N.jumpTo(N.style.stylesheet)}),this.on("data",function(ee){N._update(ee.dataType==="style"),N.fire(new l.Event(ee.dataType+"data",ee))}),this.on("dataloading",function(ee){N.fire(new l.Event(ee.dataType+"dataloading",ee))})}d&&(_.__proto__=d),(_.prototype=Object.create(d&&d.prototype)).constructor=_;var m={showTileBoundaries:{configurable:!0},showPadding:{configurable:!0},showCollisionBoxes:{configurable:!0},showOverdrawInspector:{configurable:!0},repaint:{configurable:!0},vertices:{configurable:!0},version:{configurable:!0}};return _.prototype._getMapId=function(){return this._mapId},_.prototype.addControl=function(S,N){if(N===void 0&&(N=S.getDefaultPosition?S.getDefaultPosition():"top-right"),!S||!S.onAdd)return this.fire(new l.ErrorEvent(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));var X=S.onAdd(this);this._controls.push(S);var ee=this._controlPositions[N];return N.indexOf("bottom")!==-1?ee.insertBefore(X,ee.firstChild):ee.appendChild(X),this},_.prototype.removeControl=function(S){if(!S||!S.onRemove)return this.fire(new l.ErrorEvent(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));var N=this._controls.indexOf(S);return N>-1&&this._controls.splice(N,1),S.onRemove(this),this},_.prototype.hasControl=function(S){return this._controls.indexOf(S)>-1},_.prototype.resize=function(S){var N=this._containerDimensions(),X=N[0],ee=N[1];if(X===this.transform.width&&ee===this.transform.height)return this;this._resizeCanvas(X,ee),this.transform.resize(X,ee),this.painter.resize(X,ee);var Ae=!this._moving;return Ae&&this.fire(new l.Event("movestart",S)).fire(new l.Event("move",S)),this.fire(new l.Event("resize",S)),Ae&&this.fire(new l.Event("moveend",S)),this},_.prototype.getBounds=function(){return this.transform.getBounds()},_.prototype.getMaxBounds=function(){return this.transform.getMaxBounds()},_.prototype.setMaxBounds=function(S){return this.transform.setMaxBounds(l.LngLatBounds.convert(S)),this._update()},_.prototype.setMinZoom=function(S){if((S=S==null?-2:S)>=-2&&S<=this.transform.maxZoom)return this.transform.minZoom=S,this._update(),this.getZoom()<S&&this.setZoom(S),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")},_.prototype.getMinZoom=function(){return this.transform.minZoom},_.prototype.setMaxZoom=function(S){if((S=S==null?22:S)>=this.transform.minZoom)return this.transform.maxZoom=S,this._update(),this.getZoom()>S&&this.setZoom(S),this;throw new Error("maxZoom must be greater than the current minZoom")},_.prototype.getMaxZoom=function(){return this.transform.maxZoom},_.prototype.setMinPitch=function(S){if((S=S==null?0:S)<0)throw new Error("minPitch must be greater than or equal to 0");if(S>=0&&S<=this.transform.maxPitch)return this.transform.minPitch=S,this._update(),this.getPitch()<S&&this.setPitch(S),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")},_.prototype.getMinPitch=function(){return this.transform.minPitch},_.prototype.setMaxPitch=function(S){if((S=S==null?60:S)>60)throw new Error("maxPitch must be less than or equal to 60");if(S>=this.transform.minPitch)return this.transform.maxPitch=S,this._update(),this.getPitch()>S&&this.setPitch(S),this;throw new Error("maxPitch must be greater than the current minPitch")},_.prototype.getMaxPitch=function(){return this.transform.maxPitch},_.prototype.getRenderWorldCopies=function(){return this.transform.renderWorldCopies},_.prototype.setRenderWorldCopies=function(S){return this.transform.renderWorldCopies=S,this._update()},_.prototype.project=function(S){return this.transform.locationPoint(l.LngLat.convert(S))},_.prototype.unproject=function(S){return this.transform.pointLocation(l.Point.convert(S))},_.prototype.isMoving=function(){return this._moving||this.handlers.isMoving()},_.prototype.isZooming=function(){return this._zooming||this.handlers.isZooming()},_.prototype.isRotating=function(){return this._rotating||this.handlers.isRotating()},_.prototype._createDelegatedListener=function(S,N,X){var ee,Ae=this;if(S==="mouseenter"||S==="mouseover"){var Ze=!1;return{layer:N,listener:X,delegates:{mousemove:function(Ct){var Tt=Ae.getLayer(N)?Ae.queryRenderedFeatures(Ct.point,{layers:[N]}):[];Tt.length?Ze||(Ze=!0,X.call(Ae,new lu(S,Ae,Ct.originalEvent,{features:Tt}))):Ze=!1},mouseout:function(){Ze=!1}}}}if(S==="mouseleave"||S==="mouseout"){var nt=!1;return{layer:N,listener:X,delegates:{mousemove:function(Ct){(Ae.getLayer(N)?Ae.queryRenderedFeatures(Ct.point,{layers:[N]}):[]).length?nt=!0:nt&&(nt=!1,X.call(Ae,new lu(S,Ae,Ct.originalEvent)))},mouseout:function(Ct){nt&&(nt=!1,X.call(Ae,new lu(S,Ae,Ct.originalEvent)))}}}}return{layer:N,listener:X,delegates:(ee={},ee[S]=function(Ct){var Tt=Ae.getLayer(N)?Ae.queryRenderedFeatures(Ct.point,{layers:[N]}):[];Tt.length&&(Ct.features=Tt,X.call(Ae,Ct),delete Ct.features)},ee)}},_.prototype.on=function(S,N,X){if(X===void 0)return d.prototype.on.call(this,S,N);var ee=this._createDelegatedListener(S,N,X);for(var Ae in this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[S]=this._delegatedListeners[S]||[],this._delegatedListeners[S].push(ee),ee.delegates)this.on(Ae,ee.delegates[Ae]);return this},_.prototype.once=function(S,N,X){if(X===void 0)return d.prototype.once.call(this,S,N);var ee=this._createDelegatedListener(S,N,X);for(var Ae in ee.delegates)this.once(Ae,ee.delegates[Ae]);return this},_.prototype.off=function(S,N,X){var ee=this;return X===void 0?d.prototype.off.call(this,S,N):(this._delegatedListeners&&this._delegatedListeners[S]&&function(Ae){for(var Ze=Ae[S],nt=0;nt<Ze.length;nt++){var Ct=Ze[nt];if(Ct.layer===N&&Ct.listener===X){for(var Tt in Ct.delegates)ee.off(Tt,Ct.delegates[Tt]);return Ze.splice(nt,1),ee}}}(this._delegatedListeners),this)},_.prototype.queryRenderedFeatures=function(S,N){if(!this.style)return[];var X;if(N!==void 0||S===void 0||S instanceof l.Point||Array.isArray(S)||(N=S,S=void 0),N=N||{},(S=S||[[0,0],[this.transform.width,this.transform.height]])instanceof l.Point||typeof S[0]=="number")X=[l.Point.convert(S)];else{var ee=l.Point.convert(S[0]),Ae=l.Point.convert(S[1]);X=[ee,new l.Point(Ae.x,ee.y),Ae,new l.Point(ee.x,Ae.y),ee]}return this.style.queryRenderedFeatures(X,N,this.transform)},_.prototype.querySourceFeatures=function(S,N){return this.style.querySourceFeatures(S,N)},_.prototype.setStyle=function(S,N){return(N=l.extend({},{localIdeographFontFamily:this._localIdeographFontFamily},N)).diff!==!1&&N.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&S?(this._diffStyle(S,N),this):(this._localIdeographFontFamily=N.localIdeographFontFamily,this._updateStyle(S,N))},_.prototype._getUIString=function(S){var N=this._locale[S];if(N==null)throw new Error("Missing UI string '"+S+"'");return N},_.prototype._updateStyle=function(S,N){return this.style&&(this.style.setEventedParent(null),this.style._remove()),S?(this.style=new Us(this,N||{}),this.style.setEventedParent(this,{style:this.style}),typeof S=="string"?this.style.loadURL(S):this.style.loadJSON(S),this):(delete this.style,this)},_.prototype._lazyInitEmptyStyle=function(){this.style||(this.style=new Us(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())},_.prototype._diffStyle=function(S,N){var X=this;if(typeof S=="string"){var ee=this._requestManager.normalizeStyleURL(S),Ae=this._requestManager.transformRequest(ee,l.ResourceType.Style);l.getJSON(Ae,function(Ze,nt){Ze?X.fire(new l.ErrorEvent(Ze)):nt&&X._updateDiff(nt,N)})}else typeof S=="object"&&this._updateDiff(S,N)},_.prototype._updateDiff=function(S,N){try{this.style.setState(S)&&this._update(!0)}catch(X){l.warnOnce("Unable to perform style diff: "+(X.message||X.error||X)+".  Rebuilding the style from scratch."),this._updateStyle(S,N)}},_.prototype.getStyle=function(){if(this.style)return this.style.serialize()},_.prototype.isStyleLoaded=function(){return this.style?this.style.loaded():l.warnOnce("There is no style added to the map.")},_.prototype.addSource=function(S,N){return this._lazyInitEmptyStyle(),this.style.addSource(S,N),this._update(!0)},_.prototype.isSourceLoaded=function(S){var N=this.style&&this.style.sourceCaches[S];if(N!==void 0)return N.loaded();this.fire(new l.ErrorEvent(new Error("There is no source with ID '"+S+"'")))},_.prototype.areTilesLoaded=function(){var S=this.style&&this.style.sourceCaches;for(var N in S){var X=S[N]._tiles;for(var ee in X){var Ae=X[ee];if(Ae.state!=="loaded"&&Ae.state!=="errored")return!1}}return!0},_.prototype.addSourceType=function(S,N,X){return this._lazyInitEmptyStyle(),this.style.addSourceType(S,N,X)},_.prototype.removeSource=function(S){return this.style.removeSource(S),this._update(!0)},_.prototype.getSource=function(S){return this.style.getSource(S)},_.prototype.addImage=function(S,N,X){X===void 0&&(X={});var ee=X.pixelRatio;ee===void 0&&(ee=1);var Ae=X.sdf;Ae===void 0&&(Ae=!1);var Ze=X.stretchX,nt=X.stretchY,Ct=X.content;if(this._lazyInitEmptyStyle(),N instanceof Ec||ws&&N instanceof ws){var Tt=l.browser.getImageData(N);this.style.addImage(S,{data:new l.RGBAImage({width:Tt.width,height:Tt.height},Tt.data),pixelRatio:ee,stretchX:Ze,stretchY:nt,content:Ct,sdf:Ae,version:0})}else{if(N.width===void 0||N.height===void 0)return this.fire(new l.ErrorEvent(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));var Pt=N;this.style.addImage(S,{data:new l.RGBAImage({width:N.width,height:N.height},new Uint8Array(N.data)),pixelRatio:ee,stretchX:Ze,stretchY:nt,content:Ct,sdf:Ae,version:0,userImage:Pt}),Pt.onAdd&&Pt.onAdd(this,S)}},_.prototype.updateImage=function(S,N){var X=this.style.getImage(S);if(!X)return this.fire(new l.ErrorEvent(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));var ee=N instanceof Ec||ws&&N instanceof ws?l.browser.getImageData(N):N,Ae=ee.width,Ze=ee.height,nt=ee.data;return Ae===void 0||Ze===void 0?this.fire(new l.ErrorEvent(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`"))):Ae!==X.data.width||Ze!==X.data.height?this.fire(new l.ErrorEvent(new Error("The width and height of the updated image must be that same as the previous version of the image"))):(X.data.replace(nt,!(N instanceof Ec||ws&&N instanceof ws)),void this.style.updateImage(S,X))},_.prototype.hasImage=function(S){return S?!!this.style.getImage(S):(this.fire(new l.ErrorEvent(new Error("Missing required image id"))),!1)},_.prototype.removeImage=function(S){this.style.removeImage(S)},_.prototype.loadImage=function(S,N){l.getImage(this._requestManager.transformRequest(S,l.ResourceType.Image),N)},_.prototype.listImages=function(){return this.style.listImages()},_.prototype.addLayer=function(S,N){return this._lazyInitEmptyStyle(),this.style.addLayer(S,N),this._update(!0)},_.prototype.moveLayer=function(S,N){return this.style.moveLayer(S,N),this._update(!0)},_.prototype.removeLayer=function(S){return this.style.removeLayer(S),this._update(!0)},_.prototype.getLayer=function(S){return this.style.getLayer(S)},_.prototype.setLayerZoomRange=function(S,N,X){return this.style.setLayerZoomRange(S,N,X),this._update(!0)},_.prototype.setFilter=function(S,N,X){return X===void 0&&(X={}),this.style.setFilter(S,N,X),this._update(!0)},_.prototype.getFilter=function(S){return this.style.getFilter(S)},_.prototype.setPaintProperty=function(S,N,X,ee){return ee===void 0&&(ee={}),this.style.setPaintProperty(S,N,X,ee),this._update(!0)},_.prototype.getPaintProperty=function(S,N){return this.style.getPaintProperty(S,N)},_.prototype.setLayoutProperty=function(S,N,X,ee){return ee===void 0&&(ee={}),this.style.setLayoutProperty(S,N,X,ee),this._update(!0)},_.prototype.getLayoutProperty=function(S,N){return this.style.getLayoutProperty(S,N)},_.prototype.setLight=function(S,N){return N===void 0&&(N={}),this._lazyInitEmptyStyle(),this.style.setLight(S,N),this._update(!0)},_.prototype.getLight=function(){return this.style.getLight()},_.prototype.setFeatureState=function(S,N){return this.style.setFeatureState(S,N),this._update()},_.prototype.removeFeatureState=function(S,N){return this.style.removeFeatureState(S,N),this._update()},_.prototype.getFeatureState=function(S){return this.style.getFeatureState(S)},_.prototype.getContainer=function(){return this._container},_.prototype.getCanvasContainer=function(){return this._canvasContainer},_.prototype.getCanvas=function(){return this._canvas},_.prototype._containerDimensions=function(){var S=0,N=0;return this._container&&(S=this._container.clientWidth||400,N=this._container.clientHeight||300),[S,N]},_.prototype._detectMissingCSS=function(){l.window.getComputedStyle(this._missingCSSCanary).getPropertyValue("background-color")!=="rgb(250, 128, 114)"&&l.warnOnce("This page appears to be missing CSS declarations for Mapbox GL JS, which may cause the map to display incorrectly. Please ensure your page includes mapbox-gl.css, as described in https://www.mapbox.com/mapbox-gl-js/api/.")},_.prototype._setupContainer=function(){var S=this._container;S.classList.add("mapboxgl-map"),(this._missingCSSCanary=A.create("div","mapboxgl-canary",S)).style.visibility="hidden",this._detectMissingCSS();var N=this._canvasContainer=A.create("div","mapboxgl-canvas-container",S);this._interactive&&N.classList.add("mapboxgl-interactive"),this._canvas=A.create("canvas","mapboxgl-canvas",N),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label","Map"),this._canvas.setAttribute("role","region");var X=this._containerDimensions();this._resizeCanvas(X[0],X[1]);var ee=this._controlContainer=A.create("div","mapboxgl-control-container",S),Ae=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(function(Ze){Ae[Ze]=A.create("div","mapboxgl-ctrl-"+Ze,ee)}),this._container.addEventListener("scroll",this._onMapScroll,!1)},_.prototype._resizeCanvas=function(S,N){var X=l.browser.devicePixelRatio||1;this._canvas.width=X*S,this._canvas.height=X*N,this._canvas.style.width=S+"px",this._canvas.style.height=N+"px"},_.prototype._setupPainter=function(){var S=l.extend({},R.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1}),N=this._canvas.getContext("webgl",S)||this._canvas.getContext("experimental-webgl",S);N?(this.painter=new Kr(N,this.transform),l.webpSupported.testSupport(N)):this.fire(new l.ErrorEvent(new Error("Failed to initialize WebGL")))},_.prototype._contextLost=function(S){S.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new l.Event("webglcontextlost",{originalEvent:S}))},_.prototype._contextRestored=function(S){this._setupPainter(),this.resize(),this._update(),this.fire(new l.Event("webglcontextrestored",{originalEvent:S}))},_.prototype._onMapScroll=function(S){if(S.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1},_.prototype.loaded=function(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()},_.prototype._update=function(S){return this.style?(this._styleDirty=this._styleDirty||S,this._sourcesDirty=!0,this.triggerRepaint(),this):this},_.prototype._requestRenderFrame=function(S){return this._update(),this._renderTaskQueue.add(S)},_.prototype._cancelRenderFrame=function(S){this._renderTaskQueue.remove(S)},_.prototype._render=function(S){var N,X=this,ee=0,Ae=this.painter.context.extTimerQuery;if(this.listens("gpu-timing-frame")&&(N=Ae.createQueryEXT(),Ae.beginQueryEXT(Ae.TIME_ELAPSED_EXT,N),ee=l.browser.now()),this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(S),!this._removed){var Ze=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;var nt=this.transform.zoom,Ct=l.browser.now();this.style.zoomHistory.update(nt,Ct);var Tt=new l.EvaluationParameters(nt,{now:Ct,fadeDuration:this._fadeDuration,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),Pt=Tt.crossFadingFactor();Pt===1&&Pt===this._crossFadingFactor||(Ze=!0,this._crossFadingFactor=Pt),this.style.update(Tt)}if(this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,this._fadeDuration,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:this._fadeDuration,showPadding:this.showPadding,gpuTiming:!!this.listens("gpu-timing-layer")}),this.fire(new l.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,this.fire(new l.Event("load"))),this.style&&(this.style.hasTransitions()||Ze)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),this.listens("gpu-timing-frame")){var tr=l.browser.now()-ee;Ae.endQueryEXT(Ae.TIME_ELAPSED_EXT,N),setTimeout(function(){var Yt=Ae.getQueryObjectEXT(N,Ae.QUERY_RESULT_EXT)/1e6;Ae.deleteQueryEXT(N),X.fire(new l.Event("gpu-timing-frame",{cpuTime:tr,gpuTime:Yt}))},50)}if(this.listens("gpu-timing-layer")){var or=this.painter.collectGpuTimers();setTimeout(function(){var Yt=X.painter.queryGpuTimers(or);X.fire(new l.Event("gpu-timing-layer",{layerTimes:Yt}))},50)}var gr=this._sourcesDirty||this._styleDirty||this._placementDirty;return gr||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new l.Event("idle")),!this._loaded||this._fullyLoaded||gr||(this._fullyLoaded=!0),this}},_.prototype.remove=function(){this._hash&&this._hash.remove();for(var S=0,N=this._controls;S<N.length;S+=1)N[S].onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),l.window!==void 0&&(l.window.removeEventListener("resize",this._onWindowResize,!1),l.window.removeEventListener("orientationchange",this._onWindowResize,!1),l.window.removeEventListener("online",this._onWindowOnline,!1));var X=this.painter.context.gl.getExtension("WEBGL_lose_context");X&&X.loseContext(),Du(this._canvasContainer),Du(this._controlContainer),Du(this._missingCSSCanary),this._container.classList.remove("mapboxgl-map"),this._removed=!0,this.fire(new l.Event("remove"))},_.prototype.triggerRepaint=function(){var S=this;this.style&&!this._frame&&(this._frame=l.browser.frame(function(N){S._frame=null,S._render(N)}))},_.prototype._onWindowOnline=function(){this._update()},_.prototype._onWindowResize=function(S){this._trackResize&&this.resize({originalEvent:S})._update()},m.showTileBoundaries.get=function(){return!!this._showTileBoundaries},m.showTileBoundaries.set=function(S){this._showTileBoundaries!==S&&(this._showTileBoundaries=S,this._update())},m.showPadding.get=function(){return!!this._showPadding},m.showPadding.set=function(S){this._showPadding!==S&&(this._showPadding=S,this._update())},m.showCollisionBoxes.get=function(){return!!this._showCollisionBoxes},m.showCollisionBoxes.set=function(S){this._showCollisionBoxes!==S&&(this._showCollisionBoxes=S,S?this.style._generateCollisionBoxes():this._update())},m.showOverdrawInspector.get=function(){return!!this._showOverdrawInspector},m.showOverdrawInspector.set=function(S){this._showOverdrawInspector!==S&&(this._showOverdrawInspector=S,this._update())},m.repaint.get=function(){return!!this._repaint},m.repaint.set=function(S){this._repaint!==S&&(this._repaint=S,this.triggerRepaint())},m.vertices.get=function(){return!!this._vertices},m.vertices.set=function(S){this._vertices=S,this._update()},_.prototype._setCacheLimits=function(S,N){l.setCacheLimits(S,N)},m.version.get=function(){return l.version},Object.defineProperties(_.prototype,m),_}(sl);function Du(d){d.parentNode&&d.parentNode.removeChild(d)}var du={showCompass:!0,showZoom:!0,visualizePitch:!1},ll=function(d){var _=this;this.options=l.extend({},du,d),this._container=A.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",function(m){return m.preventDefault()}),this.options.showZoom&&(l.bindAll(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("mapboxgl-ctrl-zoom-in",function(m){return _._map.zoomIn({},{originalEvent:m})}),A.create("span","mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden",!0),this._zoomOutButton=this._createButton("mapboxgl-ctrl-zoom-out",function(m){return _._map.zoomOut({},{originalEvent:m})}),A.create("span","mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden",!0)),this.options.showCompass&&(l.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("mapboxgl-ctrl-compass",function(m){_.options.visualizePitch?_._map.resetNorthPitch({},{originalEvent:m}):_._map.resetNorth({},{originalEvent:m})}),this._compassIcon=A.create("span","mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden",!0))};ll.prototype._updateZoomButtons=function(){var d=this._map.getZoom(),_=d===this._map.getMaxZoom(),m=d===this._map.getMinZoom();this._zoomInButton.disabled=_,this._zoomOutButton.disabled=m,this._zoomInButton.setAttribute("aria-disabled",_.toString()),this._zoomOutButton.setAttribute("aria-disabled",m.toString())},ll.prototype._rotateCompassArrow=function(){var d=this.options.visualizePitch?"scale("+1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)+") rotateX("+this._map.transform.pitch+"deg) rotateZ("+this._map.transform.angle*(180/Math.PI)+"deg)":"rotate("+this._map.transform.angle*(180/Math.PI)+"deg)";this._compassIcon.style.transform=d},ll.prototype.onAdd=function(d){return this._map=d,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new eu(this._map,this._compass,this.options.visualizePitch)),this._container},ll.prototype.onRemove=function(){A.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map},ll.prototype._createButton=function(d,_){var m=A.create("button",d,this._container);return m.type="button",m.addEventListener("click",_),m},ll.prototype._setButtonTitle=function(d,_){var m=this._map._getUIString("NavigationControl."+_);d.title=m,d.setAttribute("aria-label",m)};var eu=function(d,_,m){m===void 0&&(m=!1),this._clickTolerance=10,this.element=_,this.mouseRotate=new xc({clickTolerance:d.dragRotate._mouseRotate._clickTolerance}),this.map=d,m&&(this.mousePitch=new cc({clickTolerance:d.dragRotate._mousePitch._clickTolerance})),l.bindAll(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","reset"],this),A.addEventListener(_,"mousedown",this.mousedown),A.addEventListener(_,"touchstart",this.touchstart,{passive:!1}),A.addEventListener(_,"touchmove",this.touchmove),A.addEventListener(_,"touchend",this.touchend),A.addEventListener(_,"touchcancel",this.reset)};function Rt(d,_,m){if(d=new l.LngLat(d.lng,d.lat),_){var S=new l.LngLat(d.lng-360,d.lat),N=new l.LngLat(d.lng+360,d.lat),X=m.locationPoint(d).distSqr(_);m.locationPoint(S).distSqr(_)<X?d=S:m.locationPoint(N).distSqr(_)<X&&(d=N)}for(;Math.abs(d.lng-m.center.lng)>180;){var ee=m.locationPoint(d);if(ee.x>=0&&ee.y>=0&&ee.x<=m.width&&ee.y<=m.height)break;d.lng>m.center.lng?d.lng-=360:d.lng+=360}return d}eu.prototype.down=function(d,_){this.mouseRotate.mousedown(d,_),this.mousePitch&&this.mousePitch.mousedown(d,_),A.disableDrag()},eu.prototype.move=function(d,_){var m=this.map,S=this.mouseRotate.mousemoveWindow(d,_);if(S&&S.bearingDelta&&m.setBearing(m.getBearing()+S.bearingDelta),this.mousePitch){var N=this.mousePitch.mousemoveWindow(d,_);N&&N.pitchDelta&&m.setPitch(m.getPitch()+N.pitchDelta)}},eu.prototype.off=function(){var d=this.element;A.removeEventListener(d,"mousedown",this.mousedown),A.removeEventListener(d,"touchstart",this.touchstart,{passive:!1}),A.removeEventListener(d,"touchmove",this.touchmove),A.removeEventListener(d,"touchend",this.touchend),A.removeEventListener(d,"touchcancel",this.reset),this.offTemp()},eu.prototype.offTemp=function(){A.enableDrag(),A.removeEventListener(l.window,"mousemove",this.mousemove),A.removeEventListener(l.window,"mouseup",this.mouseup)},eu.prototype.mousedown=function(d){this.down(l.extend({},d,{ctrlKey:!0,preventDefault:function(){return d.preventDefault()}}),A.mousePos(this.element,d)),A.addEventListener(l.window,"mousemove",this.mousemove),A.addEventListener(l.window,"mouseup",this.mouseup)},eu.prototype.mousemove=function(d){this.move(d,A.mousePos(this.element,d))},eu.prototype.mouseup=function(d){this.mouseRotate.mouseupWindow(d),this.mousePitch&&this.mousePitch.mouseupWindow(d),this.offTemp()},eu.prototype.touchstart=function(d){d.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=A.touchPos(this.element,d.targetTouches)[0],this.down({type:"mousedown",button:0,ctrlKey:!0,preventDefault:function(){return d.preventDefault()}},this._startPos))},eu.prototype.touchmove=function(d){d.targetTouches.length!==1?this.reset():(this._lastPos=A.touchPos(this.element,d.targetTouches)[0],this.move({preventDefault:function(){return d.preventDefault()}},this._lastPos))},eu.prototype.touchend=function(d){d.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),this.reset()},eu.prototype.reset=function(){this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()};var mo={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function xs(d,_,m){var S=d.classList;for(var N in mo)S.remove("mapboxgl-"+m+"-anchor-"+N);S.add("mapboxgl-"+m+"-anchor-"+_)}var tu,Mo=function(d){function _(m,S){if(d.call(this),(m instanceof l.window.HTMLElement||S)&&(m=l.extend({element:m},S)),l.bindAll(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress"],this),this._anchor=m&&m.anchor||"center",this._color=m&&m.color||"#3FB1CE",this._scale=m&&m.scale||1,this._draggable=m&&m.draggable||!1,this._clickTolerance=m&&m.clickTolerance||0,this._isDragging=!1,this._state="inactive",this._rotation=m&&m.rotation||0,this._rotationAlignment=m&&m.rotationAlignment||"auto",this._pitchAlignment=m&&m.pitchAlignment&&m.pitchAlignment!=="auto"?m.pitchAlignment:this._rotationAlignment,m&&m.element)this._element=m.element,this._offset=l.Point.convert(m&&m.offset||[0,0]);else{this._defaultMarker=!0,this._element=A.create("div"),this._element.setAttribute("aria-label","Map marker");var N=A.createNS("http://www.w3.org/2000/svg","svg");N.setAttributeNS(null,"display","block"),N.setAttributeNS(null,"height","41px"),N.setAttributeNS(null,"width","27px"),N.setAttributeNS(null,"viewBox","0 0 27 41");var X=A.createNS("http://www.w3.org/2000/svg","g");X.setAttributeNS(null,"stroke","none"),X.setAttributeNS(null,"stroke-width","1"),X.setAttributeNS(null,"fill","none"),X.setAttributeNS(null,"fill-rule","evenodd");var ee=A.createNS("http://www.w3.org/2000/svg","g");ee.setAttributeNS(null,"fill-rule","nonzero");var Ae=A.createNS("http://www.w3.org/2000/svg","g");Ae.setAttributeNS(null,"transform","translate(3.0, 29.0)"),Ae.setAttributeNS(null,"fill","#000000");for(var Ze=0,nt=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];Ze<nt.length;Ze+=1){var Ct=nt[Ze],Tt=A.createNS("http://www.w3.org/2000/svg","ellipse");Tt.setAttributeNS(null,"opacity","0.04"),Tt.setAttributeNS(null,"cx","10.5"),Tt.setAttributeNS(null,"cy","5.80029008"),Tt.setAttributeNS(null,"rx",Ct.rx),Tt.setAttributeNS(null,"ry",Ct.ry),Ae.appendChild(Tt)}var Pt=A.createNS("http://www.w3.org/2000/svg","g");Pt.setAttributeNS(null,"fill",this._color);var tr=A.createNS("http://www.w3.org/2000/svg","path");tr.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),Pt.appendChild(tr);var or=A.createNS("http://www.w3.org/2000/svg","g");or.setAttributeNS(null,"opacity","0.25"),or.setAttributeNS(null,"fill","#000000");var gr=A.createNS("http://www.w3.org/2000/svg","path");gr.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),or.appendChild(gr);var Yt=A.createNS("http://www.w3.org/2000/svg","g");Yt.setAttributeNS(null,"transform","translate(6.0, 7.0)"),Yt.setAttributeNS(null,"fill","#FFFFFF");var br=A.createNS("http://www.w3.org/2000/svg","g");br.setAttributeNS(null,"transform","translate(8.0, 8.0)");var Lr=A.createNS("http://www.w3.org/2000/svg","circle");Lr.setAttributeNS(null,"fill","#000000"),Lr.setAttributeNS(null,"opacity","0.25"),Lr.setAttributeNS(null,"cx","5.5"),Lr.setAttributeNS(null,"cy","5.5"),Lr.setAttributeNS(null,"r","5.4999962");var pn=A.createNS("http://www.w3.org/2000/svg","circle");pn.setAttributeNS(null,"fill","#FFFFFF"),pn.setAttributeNS(null,"cx","5.5"),pn.setAttributeNS(null,"cy","5.5"),pn.setAttributeNS(null,"r","5.4999962"),br.appendChild(Lr),br.appendChild(pn),ee.appendChild(Ae),ee.appendChild(Pt),ee.appendChild(or),ee.appendChild(Yt),ee.appendChild(br),N.appendChild(ee),N.setAttributeNS(null,"height",41*this._scale+"px"),N.setAttributeNS(null,"width",27*this._scale+"px"),this._element.appendChild(N),this._offset=l.Point.convert(m&&m.offset||[0,-14])}this._element.classList.add("mapboxgl-marker"),this._element.addEventListener("dragstart",function(zn){zn.preventDefault()}),this._element.addEventListener("mousedown",function(zn){zn.preventDefault()}),xs(this._element,this._anchor,"marker"),this._popup=null}return d&&(_.__proto__=d),(_.prototype=Object.create(d&&d.prototype)).constructor=_,_.prototype.addTo=function(m){return this.remove(),this._map=m,m.getCanvasContainer().appendChild(this._element),m.on("move",this._update),m.on("moveend",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this},_.prototype.remove=function(){return this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),A.remove(this._element),this._popup&&this._popup.remove(),this},_.prototype.getLngLat=function(){return this._lngLat},_.prototype.setLngLat=function(m){return this._lngLat=l.LngLat.convert(m),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this},_.prototype.getElement=function(){return this._element},_.prototype.setPopup=function(m){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),m){if(!("offset"in m.options)){var S=Math.sqrt(Math.pow(13.5,2)/2);m.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[S,-1*(24.6+S)],"bottom-right":[-S,-1*(24.6+S)],left:[13.5,-24.6],right:[-13.5,-24.6]}:this._offset}this._popup=m,this._lngLat&&this._popup.setLngLat(this._lngLat),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this},_.prototype._onKeyPress=function(m){var S=m.code,N=m.charCode||m.keyCode;S!=="Space"&&S!=="Enter"&&N!==32&&N!==13||this.togglePopup()},_.prototype._onMapClick=function(m){var S=m.originalEvent.target,N=this._element;this._popup&&(S===N||N.contains(S))&&this.togglePopup()},_.prototype.getPopup=function(){return this._popup},_.prototype.togglePopup=function(){var m=this._popup;return m?(m.isOpen()?m.remove():m.addTo(this._map),this):this},_.prototype._update=function(m){if(this._map){this._map.transform.renderWorldCopies&&(this._lngLat=Rt(this._lngLat,this._pos,this._map.transform)),this._pos=this._map.project(this._lngLat)._add(this._offset);var S="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?S="rotateZ("+this._rotation+"deg)":this._rotationAlignment==="map"&&(S="rotateZ("+(this._rotation-this._map.getBearing())+"deg)");var N="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?N="rotateX(0deg)":this._pitchAlignment==="map"&&(N="rotateX("+this._map.getPitch()+"deg)"),m&&m.type!=="moveend"||(this._pos=this._pos.round()),A.setTransform(this._element,mo[this._anchor]+" translate("+this._pos.x+"px, "+this._pos.y+"px) "+N+" "+S)}},_.prototype.getOffset=function(){return this._offset},_.prototype.setOffset=function(m){return this._offset=l.Point.convert(m),this._update(),this},_.prototype._onMove=function(m){if(!this._isDragging){var S=this._clickTolerance||this._map._clickTolerance;this._isDragging=m.point.dist(this._pointerdownPos)>=S}this._isDragging&&(this._pos=m.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new l.Event("dragstart"))),this.fire(new l.Event("drag")))},_.prototype._onUp=function(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new l.Event("dragend")),this._state="inactive"},_.prototype._addDragHandler=function(m){this._element.contains(m.originalEvent.target)&&(m.preventDefault(),this._positionDelta=m.point.sub(this._pos).add(this._offset),this._pointerdownPos=m.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},_.prototype.setDraggable=function(m){return this._draggable=!!m,this._map&&(m?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this},_.prototype.isDraggable=function(){return this._draggable},_.prototype.setRotation=function(m){return this._rotation=m||0,this._update(),this},_.prototype.getRotation=function(){return this._rotation},_.prototype.setRotationAlignment=function(m){return this._rotationAlignment=m||"auto",this._update(),this},_.prototype.getRotationAlignment=function(){return this._rotationAlignment},_.prototype.setPitchAlignment=function(m){return this._pitchAlignment=m&&m!=="auto"?m:this._rotationAlignment,this._update(),this},_.prototype.getPitchAlignment=function(){return this._pitchAlignment},_}(l.Evented),rp={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0},pf=0,np=!1,cl=function(d){function _(m){d.call(this),this.options=l.extend({},rp,m),l.bindAll(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker"],this)}return d&&(_.__proto__=d),(_.prototype=Object.create(d&&d.prototype)).constructor=_,_.prototype.onAdd=function(m){var S;return this._map=m,this._container=A.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),S=this._setupUI,tu!==void 0?S(tu):l.window.navigator.permissions!==void 0?l.window.navigator.permissions.query({name:"geolocation"}).then(function(N){S(tu=N.state!=="denied")}):S(tu=!!l.window.navigator.geolocation),this._container},_.prototype.onRemove=function(){this._geolocationWatchID!==void 0&&(l.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),A.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,pf=0,np=!1},_.prototype._isOutOfMapMaxBounds=function(m){var S=this._map.getMaxBounds(),N=m.coords;return S&&(N.longitude<S.getWest()||N.longitude>S.getEast()||N.latitude<S.getSouth()||N.latitude>S.getNorth())},_.prototype._setErrorState=function(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting")}},_.prototype._onSuccess=function(m){if(this._map){if(this._isOutOfMapMaxBounds(m))return this._setErrorState(),this.fire(new l.Event("outofmaxbounds",m)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=m,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background")}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(m),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(m),this.options.showUserLocation&&this._dotElement.classList.remove("mapboxgl-user-location-dot-stale"),this.fire(new l.Event("geolocate",m)),this._finish()}},_.prototype._updateCamera=function(m){var S=new l.LngLat(m.coords.longitude,m.coords.latitude),N=m.coords.accuracy,X=this._map.getBearing(),ee=l.extend({bearing:X},this.options.fitBoundsOptions);this._map.fitBounds(S.toBounds(N),ee,{geolocateSource:!0})},_.prototype._updateMarker=function(m){if(m){var S=new l.LngLat(m.coords.longitude,m.coords.latitude);this._accuracyCircleMarker.setLngLat(S).addTo(this._map),this._userLocationDotMarker.setLngLat(S).addTo(this._map),this._accuracy=m.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},_.prototype._updateCircleRadius=function(){var m=this._map._container.clientHeight/2,S=this._map.unproject([0,m]),N=this._map.unproject([1,m]),X=S.distanceTo(N),ee=Math.ceil(2*this._accuracy/X);this._circleElement.style.width=ee+"px",this._circleElement.style.height=ee+"px"},_.prototype._onZoom=function(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()},_.prototype._onError=function(m){if(this._map){if(this.options.trackUserLocation)if(m.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;var S=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=S,this._geolocateButton.setAttribute("aria-label",S),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(m.code===3&&np)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("mapboxgl-user-location-dot-stale"),this.fire(new l.Event("error",m)),this._finish()}},_.prototype._finish=function(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},_.prototype._setupUI=function(m){var S=this;if(this._container.addEventListener("contextmenu",function(ee){return ee.preventDefault()}),this._geolocateButton=A.create("button","mapboxgl-ctrl-geolocate",this._container),A.create("span","mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden",!0),this._geolocateButton.type="button",m===!1){l.warnOnce("Geolocation support is not available so the GeolocateControl will be disabled.");var N=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=N,this._geolocateButton.setAttribute("aria-label",N)}else{var X=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.title=X,this._geolocateButton.setAttribute("aria-label",X)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=A.create("div","mapboxgl-user-location-dot"),this._userLocationDotMarker=new Mo(this._dotElement),this._circleElement=A.create("div","mapboxgl-user-location-accuracy-circle"),this._accuracyCircleMarker=new Mo({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",function(ee){ee.geolocateSource||S._watchState!=="ACTIVE_LOCK"||ee.originalEvent&&ee.originalEvent.type==="resize"||(S._watchState="BACKGROUND",S._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background"),S._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),S.fire(new l.Event("trackuserlocationend")))})},_.prototype.trigger=function(){if(!this._setup)return l.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new l.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":pf--,np=!1,this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this.fire(new l.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new l.Event("trackuserlocationstart"))}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"BACKGROUND":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break;case"BACKGROUND_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error")}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){var m;this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),++pf>1?(m={maximumAge:6e5,timeout:0},np=!0):(m=this.options.positionOptions,np=!1),this._geolocationWatchID=l.window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,m)}}else l.window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0},_.prototype._clearWatch=function(){l.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)},_}(l.Evented),Dl={maxWidth:100,unit:"metric"},Cs=function(d){this.options=l.extend({},Dl,d),l.bindAll(["_onMove","setUnit"],this)};function fu(d,_,m){var S=m&&m.maxWidth||100,N=d._container.clientHeight/2,X=d.unproject([0,N]),ee=d.unproject([S,N]),Ae=X.distanceTo(ee);if(m&&m.unit==="imperial"){var Ze=3.2808*Ae;Ze>5280?Zl(_,S,Ze/5280,d._getUIString("ScaleControl.Miles")):Zl(_,S,Ze,d._getUIString("ScaleControl.Feet"))}else m&&m.unit==="nautical"?Zl(_,S,Ae/1852,d._getUIString("ScaleControl.NauticalMiles")):Ae>=1e3?Zl(_,S,Ae/1e3,d._getUIString("ScaleControl.Kilometers")):Zl(_,S,Ae,d._getUIString("ScaleControl.Meters"))}function Zl(d,_,m,S){var N,X,ee,Ae=(N=m,(X=Math.pow(10,(""+Math.floor(N)).length-1))*(ee=(ee=N/X)>=10?10:ee>=5?5:ee>=3?3:ee>=2?2:ee>=1?1:function(Ze){var nt=Math.pow(10,Math.ceil(-Math.log(Ze)/Math.LN10));return Math.round(Ze*nt)/nt}(ee)));d.style.width=_*(Ae/m)+"px",d.innerHTML=Ae+"&nbsp;"+S}Cs.prototype.getDefaultPosition=function(){return"bottom-left"},Cs.prototype._onMove=function(){fu(this._map,this._container,this.options)},Cs.prototype.onAdd=function(d){return this._map=d,this._container=A.create("div","mapboxgl-ctrl mapboxgl-ctrl-scale",d.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container},Cs.prototype.onRemove=function(){A.remove(this._container),this._map.off("move",this._onMove),this._map=void 0},Cs.prototype.setUnit=function(d){this.options.unit=d,fu(this._map,this._container,this.options)};var Mu=function(d){this._fullscreen=!1,d&&d.container&&(d.container instanceof l.window.HTMLElement?this._container=d.container:l.warnOnce("Full screen control 'container' must be a DOM element.")),l.bindAll(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in l.window.document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in l.window.document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in l.window.document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in l.window.document&&(this._fullscreenchange="MSFullscreenChange")};Mu.prototype.onAdd=function(d){return this._map=d,this._container||(this._container=this._map.getContainer()),this._controlContainer=A.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",l.warnOnce("This device does not support fullscreen mode.")),this._controlContainer},Mu.prototype.onRemove=function(){A.remove(this._controlContainer),this._map=null,l.window.document.removeEventListener(this._fullscreenchange,this._changeIcon)},Mu.prototype._checkFullscreenSupport=function(){return!!(l.window.document.fullscreenEnabled||l.window.document.mozFullScreenEnabled||l.window.document.msFullscreenEnabled||l.window.document.webkitFullscreenEnabled)},Mu.prototype._setupUI=function(){var d=this._fullscreenButton=A.create("button","mapboxgl-ctrl-fullscreen",this._controlContainer);A.create("span","mapboxgl-ctrl-icon",d).setAttribute("aria-hidden",!0),d.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),l.window.document.addEventListener(this._fullscreenchange,this._changeIcon)},Mu.prototype._updateTitle=function(){var d=this._getTitle();this._fullscreenButton.setAttribute("aria-label",d),this._fullscreenButton.title=d},Mu.prototype._getTitle=function(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")},Mu.prototype._isFullscreen=function(){return this._fullscreen},Mu.prototype._changeIcon=function(){(l.window.document.fullscreenElement||l.window.document.mozFullScreenElement||l.window.document.webkitFullscreenElement||l.window.document.msFullscreenElement)===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle())},Mu.prototype._onClickFullscreen=function(){this._isFullscreen()?l.window.document.exitFullscreen?l.window.document.exitFullscreen():l.window.document.mozCancelFullScreen?l.window.document.mozCancelFullScreen():l.window.document.msExitFullscreen?l.window.document.msExitFullscreen():l.window.document.webkitCancelFullScreen&&l.window.document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()};var Fu={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px"},Nc=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", "),hf=function(d){function _(m){d.call(this),this.options=l.extend(Object.create(Fu),m),l.bindAll(["_update","_onClose","remove","_onMouseMove","_onMouseUp","_onDrag"],this)}return d&&(_.__proto__=d),(_.prototype=Object.create(d&&d.prototype)).constructor=_,_.prototype.addTo=function(m){return this._map&&this.remove(),this._map=m,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")):this._map.on("move",this._update),this.fire(new l.Event("open")),this},_.prototype.isOpen=function(){return!!this._map},_.prototype.remove=function(){return this._content&&A.remove(this._content),this._container&&(A.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),delete this._map),this.fire(new l.Event("close")),this},_.prototype.getLngLat=function(){return this._lngLat},_.prototype.setLngLat=function(m){return this._lngLat=l.LngLat.convert(m),this._pos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.remove("mapboxgl-track-pointer")),this},_.prototype.trackPointer=function(){return this._trackPointer=!0,this._pos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")),this},_.prototype.getElement=function(){return this._container},_.prototype.setText=function(m){return this.setDOMContent(l.window.document.createTextNode(m))},_.prototype.setHTML=function(m){var S,N=l.window.document.createDocumentFragment(),X=l.window.document.createElement("body");for(X.innerHTML=m;S=X.firstChild;)N.appendChild(S);return this.setDOMContent(N)},_.prototype.getMaxWidth=function(){return this._container&&this._container.style.maxWidth},_.prototype.setMaxWidth=function(m){return this.options.maxWidth=m,this._update(),this},_.prototype.setDOMContent=function(m){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=A.create("div","mapboxgl-popup-content",this._container);return this._content.appendChild(m),this._createCloseButton(),this._update(),this._focusFirstElement(),this},_.prototype.addClassName=function(m){this._container&&this._container.classList.add(m)},_.prototype.removeClassName=function(m){this._container&&this._container.classList.remove(m)},_.prototype.setOffset=function(m){return this.options.offset=m,this._update(),this},_.prototype.toggleClassName=function(m){if(this._container)return this._container.classList.toggle(m)},_.prototype._createCloseButton=function(){this.options.closeButton&&(this._closeButton=A.create("button","mapboxgl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))},_.prototype._onMouseUp=function(m){this._update(m.point)},_.prototype._onMouseMove=function(m){this._update(m.point)},_.prototype._onDrag=function(m){this._update(m.point)},_.prototype._update=function(m){var S=this;if(this._map&&(this._lngLat||this._trackPointer)&&this._content&&(this._container||(this._container=A.create("div","mapboxgl-popup",this._map.getContainer()),this._tip=A.create("div","mapboxgl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className&&this.options.className.split(" ").forEach(function(Tt){return S._container.classList.add(Tt)}),this._trackPointer&&this._container.classList.add("mapboxgl-popup-track-pointer")),this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._map.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=Rt(this._lngLat,this._pos,this._map.transform)),!this._trackPointer||m)){var N=this._pos=this._trackPointer&&m?m:this._map.project(this._lngLat),X=this.options.anchor,ee=function Tt(Pt){if(Pt){if(typeof Pt=="number"){var tr=Math.round(Math.sqrt(.5*Math.pow(Pt,2)));return{center:new l.Point(0,0),top:new l.Point(0,Pt),"top-left":new l.Point(tr,tr),"top-right":new l.Point(-tr,tr),bottom:new l.Point(0,-Pt),"bottom-left":new l.Point(tr,-tr),"bottom-right":new l.Point(-tr,-tr),left:new l.Point(Pt,0),right:new l.Point(-Pt,0)}}if(Pt instanceof l.Point||Array.isArray(Pt)){var or=l.Point.convert(Pt);return{center:or,top:or,"top-left":or,"top-right":or,bottom:or,"bottom-left":or,"bottom-right":or,left:or,right:or}}return{center:l.Point.convert(Pt.center||[0,0]),top:l.Point.convert(Pt.top||[0,0]),"top-left":l.Point.convert(Pt["top-left"]||[0,0]),"top-right":l.Point.convert(Pt["top-right"]||[0,0]),bottom:l.Point.convert(Pt.bottom||[0,0]),"bottom-left":l.Point.convert(Pt["bottom-left"]||[0,0]),"bottom-right":l.Point.convert(Pt["bottom-right"]||[0,0]),left:l.Point.convert(Pt.left||[0,0]),right:l.Point.convert(Pt.right||[0,0])}}return Tt(new l.Point(0,0))}(this.options.offset);if(!X){var Ae,Ze=this._container.offsetWidth,nt=this._container.offsetHeight;Ae=N.y+ee.bottom.y<nt?["top"]:N.y>this._map.transform.height-nt?["bottom"]:[],N.x<Ze/2?Ae.push("left"):N.x>this._map.transform.width-Ze/2&&Ae.push("right"),X=Ae.length===0?"bottom":Ae.join("-")}var Ct=N.add(ee[X]).round();A.setTransform(this._container,mo[X]+" translate("+Ct.x+"px,"+Ct.y+"px)"),xs(this._container,X,"popup")}},_.prototype._focusFirstElement=function(){if(this.options.focusAfterOpen&&this._container){var m=this._container.querySelector(Nc);m&&m.focus()}},_.prototype._onClose=function(){this.remove()},_}(l.Evented),Ol={version:l.version,supported:R,setRTLTextPlugin:l.setRTLTextPlugin,getRTLTextPluginStatus:l.getRTLTextPluginStatus,Map:ff,NavigationControl:ll,GeolocateControl:cl,AttributionControl:us,ScaleControl:Cs,FullscreenControl:Mu,Popup:hf,Marker:Mo,Style:Us,LngLat:l.LngLat,LngLatBounds:l.LngLatBounds,Point:l.Point,MercatorCoordinate:l.MercatorCoordinate,Evented:l.Evented,config:l.config,prewarm:function(){Mr().acquire(tn)},clearPrewarmedResources:function(){var d=ta;d&&(d.isPreloaded()&&d.numActive()===1?(d.release(tn),ta=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},get accessToken(){return l.config.ACCESS_TOKEN},set accessToken(d){l.config.ACCESS_TOKEN=d},get baseApiUrl(){return l.config.API_URL},set baseApiUrl(d){l.config.API_URL=d},get workerCount(){return ni.workerCount},set workerCount(d){ni.workerCount=d},get maxParallelImageRequests(){return l.config.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(d){l.config.MAX_PARALLEL_IMAGE_REQUESTS=d},clearStorage:function(d){l.clearTileCache(d)},workerUrl:""};return Ol}),w})},63713:function(U,F,c){"use strict";U.exports=v;var w=c(30551);function v(ie){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(ie)?ie:new Uint8Array(ie||0),this.pos=0,this.type=0,this.length=this.buf.length}v.Varint=0,v.Fixed64=1,v.Bytes=2,v.Fixed32=5;var l=(1<<16)*(1<<16),R=1/l,A=12,D=typeof TextDecoder=="undefined"?null:new TextDecoder("utf8");v.prototype={destroy:function(){this.buf=null},readFields:function(ie,oe,he){for(he=he||this.length;this.pos<he;){var ye=this.readVarint(),se=ye>>3,Ne=this.pos;this.type=ye&7,ie(se,oe,this),this.pos===Ne&&this.skip(ye)}return oe},readMessage:function(ie,oe){return this.readFields(ie,oe,this.readVarint()+this.pos)},readFixed32:function(){var ie=we(this.buf,this.pos);return this.pos+=4,ie},readSFixed32:function(){var ie=Xe(this.buf,this.pos);return this.pos+=4,ie},readFixed64:function(){var ie=we(this.buf,this.pos)+we(this.buf,this.pos+4)*l;return this.pos+=8,ie},readSFixed64:function(){var ie=we(this.buf,this.pos)+Xe(this.buf,this.pos+4)*l;return this.pos+=8,ie},readFloat:function(){var ie=w.read(this.buf,this.pos,!0,23,4);return this.pos+=4,ie},readDouble:function(){var ie=w.read(this.buf,this.pos,!0,52,8);return this.pos+=8,ie},readVarint:function(ie){var oe=this.buf,he,ye;return ye=oe[this.pos++],he=ye&127,ye<128||(ye=oe[this.pos++],he|=(ye&127)<<7,ye<128)||(ye=oe[this.pos++],he|=(ye&127)<<14,ye<128)||(ye=oe[this.pos++],he|=(ye&127)<<21,ye<128)?he:(ye=oe[this.pos],he|=(ye&15)<<28,k(he,ie,this))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var ie=this.readVarint();return ie%2===1?(ie+1)/-2:ie/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var ie=this.readVarint()+this.pos,oe=this.pos;return this.pos=ie,ie-oe>=A&&D?At(this.buf,oe,ie):Ke(this.buf,oe,ie)},readBytes:function(){var ie=this.readVarint()+this.pos,oe=this.buf.subarray(this.pos,ie);return this.pos=ie,oe},readPackedVarint:function(ie,oe){if(this.type!==v.Bytes)return ie.push(this.readVarint(oe));var he=B(this);for(ie=ie||[];this.pos<he;)ie.push(this.readVarint(oe));return ie},readPackedSVarint:function(ie){if(this.type!==v.Bytes)return ie.push(this.readSVarint());var oe=B(this);for(ie=ie||[];this.pos<oe;)ie.push(this.readSVarint());return ie},readPackedBoolean:function(ie){if(this.type!==v.Bytes)return ie.push(this.readBoolean());var oe=B(this);for(ie=ie||[];this.pos<oe;)ie.push(this.readBoolean());return ie},readPackedFloat:function(ie){if(this.type!==v.Bytes)return ie.push(this.readFloat());var oe=B(this);for(ie=ie||[];this.pos<oe;)ie.push(this.readFloat());return ie},readPackedDouble:function(ie){if(this.type!==v.Bytes)return ie.push(this.readDouble());var oe=B(this);for(ie=ie||[];this.pos<oe;)ie.push(this.readDouble());return ie},readPackedFixed32:function(ie){if(this.type!==v.Bytes)return ie.push(this.readFixed32());var oe=B(this);for(ie=ie||[];this.pos<oe;)ie.push(this.readFixed32());return ie},readPackedSFixed32:function(ie){if(this.type!==v.Bytes)return ie.push(this.readSFixed32());var oe=B(this);for(ie=ie||[];this.pos<oe;)ie.push(this.readSFixed32());return ie},readPackedFixed64:function(ie){if(this.type!==v.Bytes)return ie.push(this.readFixed64());var oe=B(this);for(ie=ie||[];this.pos<oe;)ie.push(this.readFixed64());return ie},readPackedSFixed64:function(ie){if(this.type!==v.Bytes)return ie.push(this.readSFixed64());var oe=B(this);for(ie=ie||[];this.pos<oe;)ie.push(this.readSFixed64());return ie},skip:function(ie){var oe=ie&7;if(oe===v.Varint)for(;this.buf[this.pos++]>127;);else if(oe===v.Bytes)this.pos=this.readVarint()+this.pos;else if(oe===v.Fixed32)this.pos+=4;else if(oe===v.Fixed64)this.pos+=8;else throw new Error("Unimplemented type: "+oe)},writeTag:function(ie,oe){this.writeVarint(ie<<3|oe)},realloc:function(ie){for(var oe=this.length||16;oe<this.pos+ie;)oe*=2;if(oe!==this.length){var he=new Uint8Array(oe);he.set(this.buf),this.buf=he,this.length=oe}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(ie){this.realloc(4),Me(this.buf,ie,this.pos),this.pos+=4},writeSFixed32:function(ie){this.realloc(4),Me(this.buf,ie,this.pos),this.pos+=4},writeFixed64:function(ie){this.realloc(8),Me(this.buf,ie&-1,this.pos),Me(this.buf,Math.floor(ie*R),this.pos+4),this.pos+=8},writeSFixed64:function(ie){this.realloc(8),Me(this.buf,ie&-1,this.pos),Me(this.buf,Math.floor(ie*R),this.pos+4),this.pos+=8},writeVarint:function(ie){if(ie=+ie||0,ie>268435455||ie<0){Z(ie,this);return}this.realloc(4),this.buf[this.pos++]=ie&127|(ie>127?128:0),!(ie<=127)&&(this.buf[this.pos++]=(ie>>>=7)&127|(ie>127?128:0),!(ie<=127)&&(this.buf[this.pos++]=(ie>>>=7)&127|(ie>127?128:0),!(ie<=127)&&(this.buf[this.pos++]=ie>>>7&127)))},writeSVarint:function(ie){this.writeVarint(ie<0?-ie*2-1:ie*2)},writeBoolean:function(ie){this.writeVarint(Boolean(ie))},writeString:function(ie){ie=String(ie),this.realloc(ie.length*4),this.pos++;var oe=this.pos;this.pos=mt(this.buf,ie,this.pos);var he=this.pos-oe;he>=128&&te(oe,he,this),this.pos=oe-1,this.writeVarint(he),this.pos+=he},writeFloat:function(ie){this.realloc(4),w.write(this.buf,ie,this.pos,!0,23,4),this.pos+=4},writeDouble:function(ie){this.realloc(8),w.write(this.buf,ie,this.pos,!0,52,8),this.pos+=8},writeBytes:function(ie){var oe=ie.length;this.writeVarint(oe),this.realloc(oe);for(var he=0;he<oe;he++)this.buf[this.pos++]=ie[he]},writeRawMessage:function(ie,oe){this.pos++;var he=this.pos;ie(oe,this);var ye=this.pos-he;ye>=128&&te(he,ye,this),this.pos=he-1,this.writeVarint(ye),this.pos+=ye},writeMessage:function(ie,oe,he){this.writeTag(ie,v.Bytes),this.writeRawMessage(oe,he)},writePackedVarint:function(ie,oe){oe.length&&this.writeMessage(ie,le,oe)},writePackedSVarint:function(ie,oe){oe.length&&this.writeMessage(ie,be,oe)},writePackedBoolean:function(ie,oe){oe.length&&this.writeMessage(ie,Oe,oe)},writePackedFloat:function(ie,oe){oe.length&&this.writeMessage(ie,de,oe)},writePackedDouble:function(ie,oe){oe.length&&this.writeMessage(ie,pe,oe)},writePackedFixed32:function(ie,oe){oe.length&&this.writeMessage(ie,xe,oe)},writePackedSFixed32:function(ie,oe){oe.length&&this.writeMessage(ie,Ve,oe)},writePackedFixed64:function(ie,oe){oe.length&&this.writeMessage(ie,K,oe)},writePackedSFixed64:function(ie,oe){oe.length&&this.writeMessage(ie,ke,oe)},writeBytesField:function(ie,oe){this.writeTag(ie,v.Bytes),this.writeBytes(oe)},writeFixed32Field:function(ie,oe){this.writeTag(ie,v.Fixed32),this.writeFixed32(oe)},writeSFixed32Field:function(ie,oe){this.writeTag(ie,v.Fixed32),this.writeSFixed32(oe)},writeFixed64Field:function(ie,oe){this.writeTag(ie,v.Fixed64),this.writeFixed64(oe)},writeSFixed64Field:function(ie,oe){this.writeTag(ie,v.Fixed64),this.writeSFixed64(oe)},writeVarintField:function(ie,oe){this.writeTag(ie,v.Varint),this.writeVarint(oe)},writeSVarintField:function(ie,oe){this.writeTag(ie,v.Varint),this.writeSVarint(oe)},writeStringField:function(ie,oe){this.writeTag(ie,v.Bytes),this.writeString(oe)},writeFloatField:function(ie,oe){this.writeTag(ie,v.Fixed32),this.writeFloat(oe)},writeDoubleField:function(ie,oe){this.writeTag(ie,v.Fixed64),this.writeDouble(oe)},writeBooleanField:function(ie,oe){this.writeVarintField(ie,Boolean(oe))}};function k(ie,oe,he){var ye=he.buf,se,Ne;if(Ne=ye[he.pos++],se=(Ne&112)>>4,Ne<128||(Ne=ye[he.pos++],se|=(Ne&127)<<3,Ne<128)||(Ne=ye[he.pos++],se|=(Ne&127)<<10,Ne<128)||(Ne=ye[he.pos++],se|=(Ne&127)<<17,Ne<128)||(Ne=ye[he.pos++],se|=(Ne&127)<<24,Ne<128)||(Ne=ye[he.pos++],se|=(Ne&1)<<31,Ne<128))return z(ie,se,oe);throw new Error("Expected varint not more than 10 bytes")}function B(ie){return ie.type===v.Bytes?ie.readVarint()+ie.pos:ie.pos+1}function z(ie,oe,he){return he?oe*4294967296+(ie>>>0):(oe>>>0)*4294967296+(ie>>>0)}function Z(ie,oe){var he,ye;if(ie>=0?(he=ie%4294967296|0,ye=ie/4294967296|0):(he=~(-ie%4294967296),ye=~(-ie/4294967296),he^4294967295?he=he+1|0:(he=0,ye=ye+1|0)),ie>=18446744073709552e3||ie<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");oe.realloc(10),W(he,ye,oe),Y(ye,oe)}function W(ie,oe,he){he.buf[he.pos++]=ie&127|128,ie>>>=7,he.buf[he.pos++]=ie&127|128,ie>>>=7,he.buf[he.pos++]=ie&127|128,ie>>>=7,he.buf[he.pos++]=ie&127|128,ie>>>=7,he.buf[he.pos]=ie&127}function Y(ie,oe){var he=(ie&7)<<4;oe.buf[oe.pos++]|=he|((ie>>>=3)?128:0),ie&&(oe.buf[oe.pos++]=ie&127|((ie>>>=7)?128:0),ie&&(oe.buf[oe.pos++]=ie&127|((ie>>>=7)?128:0),ie&&(oe.buf[oe.pos++]=ie&127|((ie>>>=7)?128:0),ie&&(oe.buf[oe.pos++]=ie&127|((ie>>>=7)?128:0),ie&&(oe.buf[oe.pos++]=ie&127)))))}function te(ie,oe,he){var ye=oe<=16383?1:oe<=2097151?2:oe<=268435455?3:Math.floor(Math.log(oe)/(Math.LN2*7));he.realloc(ye);for(var se=he.pos-1;se>=ie;se--)he.buf[se+ye]=he.buf[se]}function le(ie,oe){for(var he=0;he<ie.length;he++)oe.writeVarint(ie[he])}function be(ie,oe){for(var he=0;he<ie.length;he++)oe.writeSVarint(ie[he])}function de(ie,oe){for(var he=0;he<ie.length;he++)oe.writeFloat(ie[he])}function pe(ie,oe){for(var he=0;he<ie.length;he++)oe.writeDouble(ie[he])}function Oe(ie,oe){for(var he=0;he<ie.length;he++)oe.writeBoolean(ie[he])}function xe(ie,oe){for(var he=0;he<ie.length;he++)oe.writeFixed32(ie[he])}function Ve(ie,oe){for(var he=0;he<ie.length;he++)oe.writeSFixed32(ie[he])}function K(ie,oe){for(var he=0;he<ie.length;he++)oe.writeFixed64(ie[he])}function ke(ie,oe){for(var he=0;he<ie.length;he++)oe.writeSFixed64(ie[he])}function we(ie,oe){return(ie[oe]|ie[oe+1]<<8|ie[oe+2]<<16)+ie[oe+3]*16777216}function Me(ie,oe,he){ie[he]=oe,ie[he+1]=oe>>>8,ie[he+2]=oe>>>16,ie[he+3]=oe>>>24}function Xe(ie,oe){return(ie[oe]|ie[oe+1]<<8|ie[oe+2]<<16)+(ie[oe+3]<<24)}function Ke(ie,oe,he){for(var ye="",se=oe;se<he;){var Ne=ie[se],st=null,Fe=Ne>239?4:Ne>223?3:Ne>191?2:1;if(se+Fe>he)break;var tt,Wt,Pr;Fe===1?Ne<128&&(st=Ne):Fe===2?(tt=ie[se+1],(tt&192)===128&&(st=(Ne&31)<<6|tt&63,st<=127&&(st=null))):Fe===3?(tt=ie[se+1],Wt=ie[se+2],(tt&192)===128&&(Wt&192)===128&&(st=(Ne&15)<<12|(tt&63)<<6|Wt&63,(st<=2047||st>=55296&&st<=57343)&&(st=null))):Fe===4&&(tt=ie[se+1],Wt=ie[se+2],Pr=ie[se+3],(tt&192)===128&&(Wt&192)===128&&(Pr&192)===128&&(st=(Ne&15)<<18|(tt&63)<<12|(Wt&63)<<6|Pr&63,(st<=65535||st>=1114112)&&(st=null))),st===null?(st=65533,Fe=1):st>65535&&(st-=65536,ye+=String.fromCharCode(st>>>10&1023|55296),st=56320|st&1023),ye+=String.fromCharCode(st),se+=Fe}return ye}function At(ie,oe,he){return D.decode(ie.subarray(oe,he))}function mt(ie,oe,he){for(var ye=0,se,Ne;ye<oe.length;ye++){if(se=oe.charCodeAt(ye),se>55295&&se<57344)if(Ne)if(se<56320){ie[he++]=239,ie[he++]=191,ie[he++]=189,Ne=se;continue}else se=Ne-55296<<10|se-56320|65536,Ne=null;else{se>56319||ye+1===oe.length?(ie[he++]=239,ie[he++]=191,ie[he++]=189):Ne=se;continue}else Ne&&(ie[he++]=239,ie[he++]=191,ie[he++]=189,Ne=null);se<128?ie[he++]=se:(se<2048?ie[he++]=se>>6|192:(se<65536?ie[he++]=se>>12|224:(ie[he++]=se>>18|240,ie[he++]=se>>12&63|128),ie[he++]=se>>6&63|128),ie[he++]=se&63|128)}return he}},23167:function(U,F,c){var w=c(14224);(function(v,l){U.exports=l()})(this,function(){"use strict";function v(ft,me){if(!(ft instanceof me))throw new TypeError("Cannot call a class as a function")}function l(ft,me){for(var ne=0;ne<me.length;ne++){var fe=me[ne];fe.enumerable=fe.enumerable||!1,fe.configurable=!0,"value"in fe&&(fe.writable=!0),Object.defineProperty(ft,fe.key,fe)}}function R(ft,me,ne){return me&&l(ft.prototype,me),ne&&l(ft,ne),ft}var A=function(){function ft(me,ne){this.next=null,this.key=me,this.data=ne,this.left=null,this.right=null}return ft}();function D(ft,me){return ft>me?1:ft<me?-1:0}function k(ft,me,ne){for(var fe=new A(null,null),Q=fe,De=fe;;){var dt=ne(ft,me.key);if(dt<0){if(me.left===null)break;if(ne(ft,me.left.key)<0){var Jt=me.left;if(me.left=Jt.right,Jt.right=me,me=Jt,me.left===null)break}De.left=me,De=me,me=me.left}else if(dt>0){if(me.right===null)break;if(ne(ft,me.right.key)>0){var Jt=me.right;if(me.right=Jt.left,Jt.left=me,me=Jt,me.right===null)break}Q.right=me,Q=me,me=me.right}else break}return Q.right=me.left,De.left=me.right,me.left=fe.right,me.right=fe.left,me}function B(ft,me,ne,fe){var Q=new A(ft,me);if(ne===null)return Q.left=Q.right=null,Q;ne=k(ft,ne,fe);var De=fe(ft,ne.key);return De<0?(Q.left=ne.left,Q.right=ne,ne.left=null):De>=0&&(Q.right=ne.right,Q.left=ne,ne.right=null),Q}function z(ft,me,ne){var fe=null,Q=null;if(me){me=k(ft,me,ne);var De=ne(me.key,ft);De===0?(fe=me.left,Q=me.right):De<0?(Q=me.right,me.right=null,fe=me):(fe=me.left,me.left=null,Q=me)}return{left:fe,right:Q}}function Z(ft,me,ne){return me===null?ft:(ft===null||(me=k(ft.key,me,ne),me.left=ft),me)}function W(ft,me,ne,fe,Q){if(ft){fe(""+me+(ne?"\u2514\u2500\u2500 ":"\u251C\u2500\u2500 ")+Q(ft)+`
`);var De=me+(ne?"    ":"\u2502   ");ft.left&&W(ft.left,De,!1,fe,Q),ft.right&&W(ft.right,De,!0,fe,Q)}}var Y=function(){function ft(me){me===void 0&&(me=D),this._root=null,this._size=0,this._comparator=me}return ft.prototype.insert=function(me,ne){return this._size++,this._root=B(me,ne,this._root,this._comparator)},ft.prototype.add=function(me,ne){var fe=new A(me,ne);this._root===null&&(fe.left=fe.right=null,this._size++,this._root=fe);var Q=this._comparator,De=k(me,this._root,Q),dt=Q(me,De.key);return dt===0?this._root=De:(dt<0?(fe.left=De.left,fe.right=De,De.left=null):dt>0&&(fe.right=De.right,fe.left=De,De.right=null),this._size++,this._root=fe),this._root},ft.prototype.remove=function(me){this._root=this._remove(me,this._root,this._comparator)},ft.prototype._remove=function(me,ne,fe){var Q;if(ne===null)return null;ne=k(me,ne,fe);var De=fe(me,ne.key);return De===0?(ne.left===null?Q=ne.right:(Q=k(me,ne.left,fe),Q.right=ne.right),this._size--,Q):ne},ft.prototype.pop=function(){var me=this._root;if(me){for(;me.left;)me=me.left;return this._root=k(me.key,this._root,this._comparator),this._root=this._remove(me.key,this._root,this._comparator),{key:me.key,data:me.data}}return null},ft.prototype.findStatic=function(me){for(var ne=this._root,fe=this._comparator;ne;){var Q=fe(me,ne.key);if(Q===0)return ne;Q<0?ne=ne.left:ne=ne.right}return null},ft.prototype.find=function(me){return this._root&&(this._root=k(me,this._root,this._comparator),this._comparator(me,this._root.key)!==0)?null:this._root},ft.prototype.contains=function(me){for(var ne=this._root,fe=this._comparator;ne;){var Q=fe(me,ne.key);if(Q===0)return!0;Q<0?ne=ne.left:ne=ne.right}return!1},ft.prototype.forEach=function(me,ne){for(var fe=this._root,Q=[],De=!1;!De;)fe!==null?(Q.push(fe),fe=fe.left):Q.length!==0?(fe=Q.pop(),me.call(ne,fe),fe=fe.right):De=!0;return this},ft.prototype.range=function(me,ne,fe,Q){for(var De=[],dt=this._comparator,Jt=this._root,it;De.length!==0||Jt;)if(Jt)De.push(Jt),Jt=Jt.left;else{if(Jt=De.pop(),it=dt(Jt.key,ne),it>0)break;if(dt(Jt.key,me)>=0&&fe.call(Q,Jt))return this;Jt=Jt.right}return this},ft.prototype.keys=function(){var me=[];return this.forEach(function(ne){var fe=ne.key;return me.push(fe)}),me},ft.prototype.values=function(){var me=[];return this.forEach(function(ne){var fe=ne.data;return me.push(fe)}),me},ft.prototype.min=function(){return this._root?this.minNode(this._root).key:null},ft.prototype.max=function(){return this._root?this.maxNode(this._root).key:null},ft.prototype.minNode=function(me){if(me===void 0&&(me=this._root),me)for(;me.left;)me=me.left;return me},ft.prototype.maxNode=function(me){if(me===void 0&&(me=this._root),me)for(;me.right;)me=me.right;return me},ft.prototype.at=function(me){for(var ne=this._root,fe=!1,Q=0,De=[];!fe;)if(ne)De.push(ne),ne=ne.left;else if(De.length>0){if(ne=De.pop(),Q===me)return ne;Q++,ne=ne.right}else fe=!0;return null},ft.prototype.next=function(me){var ne=this._root,fe=null;if(me.right){for(fe=me.right;fe.left;)fe=fe.left;return fe}for(var Q=this._comparator;ne;){var De=Q(me.key,ne.key);if(De===0)break;De<0?(fe=ne,ne=ne.left):ne=ne.right}return fe},ft.prototype.prev=function(me){var ne=this._root,fe=null;if(me.left!==null){for(fe=me.left;fe.right;)fe=fe.right;return fe}for(var Q=this._comparator;ne;){var De=Q(me.key,ne.key);if(De===0)break;De<0?ne=ne.left:(fe=ne,ne=ne.right)}return fe},ft.prototype.clear=function(){return this._root=null,this._size=0,this},ft.prototype.toList=function(){return be(this._root)},ft.prototype.load=function(me,ne,fe){ne===void 0&&(ne=[]),fe===void 0&&(fe=!1);var Q=me.length,De=this._comparator;if(fe&&Oe(me,ne,0,Q-1,De),this._root===null)this._root=te(me,ne,0,Q),this._size=Q;else{var dt=pe(this.toList(),le(me,ne),De);Q=this._size+Q,this._root=de({head:dt},0,Q)}return this},ft.prototype.isEmpty=function(){return this._root===null},Object.defineProperty(ft.prototype,"size",{get:function(){return this._size},enumerable:!0,configurable:!0}),Object.defineProperty(ft.prototype,"root",{get:function(){return this._root},enumerable:!0,configurable:!0}),ft.prototype.toString=function(me){me===void 0&&(me=function(Q){return String(Q.key)});var ne=[];return W(this._root,"",!0,function(fe){return ne.push(fe)},me),ne.join("")},ft.prototype.update=function(me,ne,fe){var Q=this._comparator,De=z(me,this._root,Q),dt=De.left,Jt=De.right;Q(me,ne)<0?Jt=B(ne,fe,Jt,Q):dt=B(ne,fe,dt,Q),this._root=Z(dt,Jt,Q)},ft.prototype.split=function(me){return z(me,this._root,this._comparator)},ft}();function te(ft,me,ne,fe){var Q=fe-ne;if(Q>0){var De=ne+Math.floor(Q/2),dt=ft[De],Jt=me[De],it=new A(dt,Jt);return it.left=te(ft,me,ne,De),it.right=te(ft,me,De+1,fe),it}return null}function le(ft,me){for(var ne=new A(null,null),fe=ne,Q=0;Q<ft.length;Q++)fe=fe.next=new A(ft[Q],me[Q]);return fe.next=null,ne.next}function be(ft){for(var me=ft,ne=[],fe=!1,Q=new A(null,null),De=Q;!fe;)me?(ne.push(me),me=me.left):ne.length>0?(me=De=De.next=ne.pop(),me=me.right):fe=!0;return De.next=null,Q.next}function de(ft,me,ne){var fe=ne-me;if(fe>0){var Q=me+Math.floor(fe/2),De=de(ft,me,Q),dt=ft.head;return dt.left=De,ft.head=ft.head.next,dt.right=de(ft,Q+1,ne),dt}return null}function pe(ft,me,ne){for(var fe=new A(null,null),Q=fe,De=ft,dt=me;De!==null&&dt!==null;)ne(De.key,dt.key)<0?(Q.next=De,De=De.next):(Q.next=dt,dt=dt.next),Q=Q.next;return De!==null?Q.next=De:dt!==null&&(Q.next=dt),fe.next}function Oe(ft,me,ne,fe,Q){if(!(ne>=fe)){for(var De=ft[ne+fe>>1],dt=ne-1,Jt=fe+1;;){do dt++;while(Q(ft[dt],De)<0);do Jt--;while(Q(ft[Jt],De)>0);if(dt>=Jt)break;var it=ft[dt];ft[dt]=ft[Jt],ft[Jt]=it,it=me[dt],me[dt]=me[Jt],me[Jt]=it}Oe(ft,me,ne,Jt,Q),Oe(ft,me,Jt+1,fe,Q)}}var xe=function(me,ne){return me.ll.x<=ne.x&&ne.x<=me.ur.x&&me.ll.y<=ne.y&&ne.y<=me.ur.y},Ve=function(me,ne){if(ne.ur.x<me.ll.x||me.ur.x<ne.ll.x||ne.ur.y<me.ll.y||me.ur.y<ne.ll.y)return null;var fe=me.ll.x<ne.ll.x?ne.ll.x:me.ll.x,Q=me.ur.x<ne.ur.x?me.ur.x:ne.ur.x,De=me.ll.y<ne.ll.y?ne.ll.y:me.ll.y,dt=me.ur.y<ne.ur.y?me.ur.y:ne.ur.y;return{ll:{x:fe,y:De},ur:{x:Q,y:dt}}},K=Number.EPSILON;K===void 0&&(K=Math.pow(2,-52));var ke=K*K,we=function(me,ne){if(-K<me&&me<K&&-K<ne&&ne<K)return 0;var fe=me-ne;return fe*fe<ke*me*ne?0:me<ne?-1:1},Me=function(){function ft(){v(this,ft),this.reset()}return R(ft,[{key:"reset",value:function(){this.xRounder=new Xe,this.yRounder=new Xe}},{key:"round",value:function(ne,fe){return{x:this.xRounder.round(ne),y:this.yRounder.round(fe)}}}]),ft}(),Xe=function(){function ft(){v(this,ft),this.tree=new Y,this.round(0)}return R(ft,[{key:"round",value:function(ne){var fe=this.tree.add(ne),Q=this.tree.prev(fe);if(Q!==null&&we(fe.key,Q.key)===0)return this.tree.remove(ne),Q.key;var De=this.tree.next(fe);return De!==null&&we(fe.key,De.key)===0?(this.tree.remove(ne),De.key):ne}}]),ft}(),Ke=new Me,At=function(me,ne){return me.x*ne.y-me.y*ne.x},mt=function(me,ne){return me.x*ne.x+me.y*ne.y},ie=function(me,ne,fe){var Q={x:ne.x-me.x,y:ne.y-me.y},De={x:fe.x-me.x,y:fe.y-me.y},dt=At(Q,De);return we(dt,0)},oe=function(me){return Math.sqrt(mt(me,me))},he=function(me,ne,fe){var Q={x:ne.x-me.x,y:ne.y-me.y},De={x:fe.x-me.x,y:fe.y-me.y};return At(De,Q)/oe(De)/oe(Q)},ye=function(me,ne,fe){var Q={x:ne.x-me.x,y:ne.y-me.y},De={x:fe.x-me.x,y:fe.y-me.y};return mt(De,Q)/oe(De)/oe(Q)},se=function(me,ne,fe){return ne.y===0?null:{x:me.x+ne.x/ne.y*(fe-me.y),y:fe}},Ne=function(me,ne,fe){return ne.x===0?null:{x:fe,y:me.y+ne.y/ne.x*(fe-me.x)}},st=function(me,ne,fe,Q){if(ne.x===0)return Ne(fe,Q,me.x);if(Q.x===0)return Ne(me,ne,fe.x);if(ne.y===0)return se(fe,Q,me.y);if(Q.y===0)return se(me,ne,fe.y);var De=At(ne,Q);if(De==0)return null;var dt={x:fe.x-me.x,y:fe.y-me.y},Jt=At(dt,ne)/De,it=At(dt,Q)/De,lt=me.x+it*ne.x,qt=fe.x+Jt*Q.x,pr=me.y+it*ne.y,Hr=fe.y+Jt*Q.y,Xr=(lt+qt)/2,ce=(pr+Hr)/2;return{x:Xr,y:ce}},Fe=function(){R(ft,null,[{key:"compare",value:function(ne,fe){var Q=ft.comparePoints(ne.point,fe.point);return Q!==0?Q:(ne.point!==fe.point&&ne.link(fe),ne.isLeft!==fe.isLeft?ne.isLeft?1:-1:Wt.compare(ne.segment,fe.segment))}},{key:"comparePoints",value:function(ne,fe){return ne.x<fe.x?-1:ne.x>fe.x?1:ne.y<fe.y?-1:ne.y>fe.y?1:0}}]);function ft(me,ne){v(this,ft),me.events===void 0?me.events=[this]:me.events.push(this),this.point=me,this.isLeft=ne}return R(ft,[{key:"link",value:function(ne){if(ne.point===this.point)throw new Error("Tried to link already linked events");for(var fe=ne.point.events,Q=0,De=fe.length;Q<De;Q++){var dt=fe[Q];this.point.events.push(dt),dt.point=this.point}this.checkForConsuming()}},{key:"checkForConsuming",value:function(){for(var ne=this.point.events.length,fe=0;fe<ne;fe++){var Q=this.point.events[fe];if(Q.segment.consumedBy===void 0)for(var De=fe+1;De<ne;De++){var dt=this.point.events[De];dt.consumedBy===void 0&&Q.otherSE.point.events===dt.otherSE.point.events&&Q.segment.consume(dt.segment)}}}},{key:"getAvailableLinkedEvents",value:function(){for(var ne=[],fe=0,Q=this.point.events.length;fe<Q;fe++){var De=this.point.events[fe];De!==this&&!De.segment.ringOut&&De.segment.isInResult()&&ne.push(De)}return ne}},{key:"getLeftmostComparator",value:function(ne){var fe=this,Q=new Map,De=function(Jt){var it=Jt.otherSE;Q.set(Jt,{sine:he(fe.point,ne.point,it.point),cosine:ye(fe.point,ne.point,it.point)})};return function(dt,Jt){Q.has(dt)||De(dt),Q.has(Jt)||De(Jt);var it=Q.get(dt),lt=it.sine,qt=it.cosine,pr=Q.get(Jt),Hr=pr.sine,Xr=pr.cosine;return lt>=0&&Hr>=0?qt<Xr?1:qt>Xr?-1:0:lt<0&&Hr<0?qt<Xr?-1:qt>Xr?1:0:Hr<lt?-1:Hr>lt?1:0}}}]),ft}(),tt=0,Wt=function(){R(ft,null,[{key:"compare",value:function(ne,fe){var Q=ne.leftSE.point.x,De=fe.leftSE.point.x,dt=ne.rightSE.point.x,Jt=fe.rightSE.point.x;if(Jt<Q)return 1;if(dt<De)return-1;var it=ne.leftSE.point.y,lt=fe.leftSE.point.y,qt=ne.rightSE.point.y,pr=fe.rightSE.point.y;if(Q<De){if(lt<it&&lt<qt)return 1;if(lt>it&&lt>qt)return-1;var Hr=ne.comparePoint(fe.leftSE.point);if(Hr<0)return 1;if(Hr>0)return-1;var Xr=fe.comparePoint(ne.rightSE.point);return Xr!==0?Xr:-1}if(Q>De){if(it<lt&&it<pr)return-1;if(it>lt&&it>pr)return 1;var ce=fe.comparePoint(ne.leftSE.point);if(ce!==0)return ce;var xt=ne.comparePoint(fe.rightSE.point);return xt<0?1:xt>0?-1:1}if(it<lt)return-1;if(it>lt)return 1;if(dt<Jt){var Gt=fe.comparePoint(ne.rightSE.point);if(Gt!==0)return Gt}if(dt>Jt){var Ir=ne.comparePoint(fe.rightSE.point);if(Ir<0)return 1;if(Ir>0)return-1}if(dt!==Jt){var nn=qt-it,zi=dt-Q,Ui=pr-lt,Pi=Jt-De;if(nn>zi&&Ui<Pi)return 1;if(nn<zi&&Ui>Pi)return-1}return dt>Jt?1:dt<Jt||qt<pr?-1:qt>pr?1:ne.id<fe.id?-1:ne.id>fe.id?1:0}}]);function ft(me,ne,fe,Q){v(this,ft),this.id=++tt,this.leftSE=me,me.segment=this,me.otherSE=ne,this.rightSE=ne,ne.segment=this,ne.otherSE=me,this.rings=fe,this.windings=Q}return R(ft,[{key:"replaceRightSE",value:function(ne){this.rightSE=ne,this.rightSE.segment=this,this.rightSE.otherSE=this.leftSE,this.leftSE.otherSE=this.rightSE}},{key:"bbox",value:function(){var ne=this.leftSE.point.y,fe=this.rightSE.point.y;return{ll:{x:this.leftSE.point.x,y:ne<fe?ne:fe},ur:{x:this.rightSE.point.x,y:ne>fe?ne:fe}}}},{key:"vector",value:function(){return{x:this.rightSE.point.x-this.leftSE.point.x,y:this.rightSE.point.y-this.leftSE.point.y}}},{key:"isAnEndpoint",value:function(ne){return ne.x===this.leftSE.point.x&&ne.y===this.leftSE.point.y||ne.x===this.rightSE.point.x&&ne.y===this.rightSE.point.y}},{key:"comparePoint",value:function(ne){if(this.isAnEndpoint(ne))return 0;var fe=this.leftSE.point,Q=this.rightSE.point,De=this.vector();if(fe.x===Q.x)return ne.x===fe.x?0:ne.x<fe.x?1:-1;var dt=(ne.y-fe.y)/De.y,Jt=fe.x+dt*De.x;if(ne.x===Jt)return 0;var it=(ne.x-fe.x)/De.x,lt=fe.y+it*De.y;return ne.y===lt?0:ne.y<lt?-1:1}},{key:"getIntersection",value:function(ne){var fe=this.bbox(),Q=ne.bbox(),De=Ve(fe,Q);if(De===null)return null;var dt=this.leftSE.point,Jt=this.rightSE.point,it=ne.leftSE.point,lt=ne.rightSE.point,qt=xe(fe,it)&&this.comparePoint(it)===0,pr=xe(Q,dt)&&ne.comparePoint(dt)===0,Hr=xe(fe,lt)&&this.comparePoint(lt)===0,Xr=xe(Q,Jt)&&ne.comparePoint(Jt)===0;if(pr&&qt)return Xr&&!Hr?Jt:!Xr&&Hr?lt:null;if(pr)return Hr&&dt.x===lt.x&&dt.y===lt.y?null:dt;if(qt)return Xr&&Jt.x===it.x&&Jt.y===it.y?null:it;if(Xr&&Hr)return null;if(Xr)return Jt;if(Hr)return lt;var ce=st(dt,this.vector(),it,ne.vector());return ce===null||!xe(De,ce)?null:Ke.round(ce.x,ce.y)}},{key:"split",value:function(ne){var fe=[],Q=ne.events!==void 0,De=new Fe(ne,!0),dt=new Fe(ne,!1),Jt=this.rightSE;this.replaceRightSE(dt),fe.push(dt),fe.push(De);var it=new ft(De,Jt,this.rings.slice(),this.windings.slice());return Fe.comparePoints(it.leftSE.point,it.rightSE.point)>0&&it.swapEvents(),Fe.comparePoints(this.leftSE.point,this.rightSE.point)>0&&this.swapEvents(),Q&&(De.checkForConsuming(),dt.checkForConsuming()),fe}},{key:"swapEvents",value:function(){var ne=this.rightSE;this.rightSE=this.leftSE,this.leftSE=ne,this.leftSE.isLeft=!0,this.rightSE.isLeft=!1;for(var fe=0,Q=this.windings.length;fe<Q;fe++)this.windings[fe]*=-1}},{key:"consume",value:function(ne){for(var fe=this,Q=ne;fe.consumedBy;)fe=fe.consumedBy;for(;Q.consumedBy;)Q=Q.consumedBy;var De=ft.compare(fe,Q);if(De!==0){if(De>0){var dt=fe;fe=Q,Q=dt}if(fe.prev===Q){var Jt=fe;fe=Q,Q=Jt}for(var it=0,lt=Q.rings.length;it<lt;it++){var qt=Q.rings[it],pr=Q.windings[it],Hr=fe.rings.indexOf(qt);Hr===-1?(fe.rings.push(qt),fe.windings.push(pr)):fe.windings[Hr]+=pr}Q.rings=null,Q.windings=null,Q.consumedBy=fe,Q.leftSE.consumedBy=fe.leftSE,Q.rightSE.consumedBy=fe.rightSE}}},{key:"prevInResult",value:function(){return this._prevInResult!==void 0?this._prevInResult:(this.prev?this.prev.isInResult()?this._prevInResult=this.prev:this._prevInResult=this.prev.prevInResult():this._prevInResult=null,this._prevInResult)}},{key:"beforeState",value:function(){if(this._beforeState!==void 0)return this._beforeState;if(!this.prev)this._beforeState={rings:[],windings:[],multiPolys:[]};else{var ne=this.prev.consumedBy||this.prev;this._beforeState=ne.afterState()}return this._beforeState}},{key:"afterState",value:function(){if(this._afterState!==void 0)return this._afterState;var ne=this.beforeState();this._afterState={rings:ne.rings.slice(0),windings:ne.windings.slice(0),multiPolys:[]};for(var fe=this._afterState.rings,Q=this._afterState.windings,De=this._afterState.multiPolys,dt=0,Jt=this.rings.length;dt<Jt;dt++){var it=this.rings[dt],lt=this.windings[dt],qt=fe.indexOf(it);qt===-1?(fe.push(it),Q.push(lt)):Q[qt]+=lt}for(var pr=[],Hr=[],Xr=0,ce=fe.length;Xr<ce;Xr++)if(Q[Xr]!==0){var xt=fe[Xr],Gt=xt.poly;if(Hr.indexOf(Gt)===-1)if(xt.isExterior)pr.push(Gt);else{Hr.indexOf(Gt)===-1&&Hr.push(Gt);var Ir=pr.indexOf(xt.poly);Ir!==-1&&pr.splice(Ir,1)}}for(var nn=0,zi=pr.length;nn<zi;nn++){var Ui=pr[nn].multiPoly;De.indexOf(Ui)===-1&&De.push(Ui)}return this._afterState}},{key:"isInResult",value:function(){if(this.consumedBy)return!1;if(this._isInResult!==void 0)return this._isInResult;var ne=this.beforeState().multiPolys,fe=this.afterState().multiPolys;switch(Qn.type){case"union":{var Q=ne.length===0,De=fe.length===0;this._isInResult=Q!==De;break}case"intersection":{var dt,Jt;ne.length<fe.length?(dt=ne.length,Jt=fe.length):(dt=fe.length,Jt=ne.length),this._isInResult=Jt===Qn.numMultiPolys&&dt<Jt;break}case"xor":{var it=Math.abs(ne.length-fe.length);this._isInResult=it%2===1;break}case"difference":{var lt=function(pr){return pr.length===1&&pr[0].isSubject};this._isInResult=lt(ne)!==lt(fe);break}default:throw new Error("Unrecognized operation type found ".concat(Qn.type))}return this._isInResult}}],[{key:"fromRing",value:function(ne,fe,Q){var De,dt,Jt,it=Fe.comparePoints(ne,fe);if(it<0)De=ne,dt=fe,Jt=1;else if(it>0)De=fe,dt=ne,Jt=-1;else throw new Error("Tried to create degenerate segment at [".concat(ne.x,", ").concat(ne.y,"]"));var lt=new Fe(De,!0),qt=new Fe(dt,!1);return new ft(lt,qt,[Q],[Jt])}}]),ft}(),Pr=function(){function ft(me,ne,fe){if(v(this,ft),!Array.isArray(me)||me.length===0)throw new Error("Input geometry is not a valid Polygon or MultiPolygon");if(this.poly=ne,this.isExterior=fe,this.segments=[],typeof me[0][0]!="number"||typeof me[0][1]!="number")throw new Error("Input geometry is not a valid Polygon or MultiPolygon");var Q=Ke.round(me[0][0],me[0][1]);this.bbox={ll:{x:Q.x,y:Q.y},ur:{x:Q.x,y:Q.y}};for(var De=Q,dt=1,Jt=me.length;dt<Jt;dt++){if(typeof me[dt][0]!="number"||typeof me[dt][1]!="number")throw new Error("Input geometry is not a valid Polygon or MultiPolygon");var it=Ke.round(me[dt][0],me[dt][1]);it.x===De.x&&it.y===De.y||(this.segments.push(Wt.fromRing(De,it,this)),it.x<this.bbox.ll.x&&(this.bbox.ll.x=it.x),it.y<this.bbox.ll.y&&(this.bbox.ll.y=it.y),it.x>this.bbox.ur.x&&(this.bbox.ur.x=it.x),it.y>this.bbox.ur.y&&(this.bbox.ur.y=it.y),De=it)}(Q.x!==De.x||Q.y!==De.y)&&this.segments.push(Wt.fromRing(De,Q,this))}return R(ft,[{key:"getSweepEvents",value:function(){for(var ne=[],fe=0,Q=this.segments.length;fe<Q;fe++){var De=this.segments[fe];ne.push(De.leftSE),ne.push(De.rightSE)}return ne}}]),ft}(),Qt=function(){function ft(me,ne){if(v(this,ft),!Array.isArray(me))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");this.exteriorRing=new Pr(me[0],this,!0),this.bbox={ll:{x:this.exteriorRing.bbox.ll.x,y:this.exteriorRing.bbox.ll.y},ur:{x:this.exteriorRing.bbox.ur.x,y:this.exteriorRing.bbox.ur.y}},this.interiorRings=[];for(var fe=1,Q=me.length;fe<Q;fe++){var De=new Pr(me[fe],this,!1);De.bbox.ll.x<this.bbox.ll.x&&(this.bbox.ll.x=De.bbox.ll.x),De.bbox.ll.y<this.bbox.ll.y&&(this.bbox.ll.y=De.bbox.ll.y),De.bbox.ur.x>this.bbox.ur.x&&(this.bbox.ur.x=De.bbox.ur.x),De.bbox.ur.y>this.bbox.ur.y&&(this.bbox.ur.y=De.bbox.ur.y),this.interiorRings.push(De)}this.multiPoly=ne}return R(ft,[{key:"getSweepEvents",value:function(){for(var ne=this.exteriorRing.getSweepEvents(),fe=0,Q=this.interiorRings.length;fe<Q;fe++)for(var De=this.interiorRings[fe].getSweepEvents(),dt=0,Jt=De.length;dt<Jt;dt++)ne.push(De[dt]);return ne}}]),ft}(),xr=function(){function ft(me,ne){if(v(this,ft),!Array.isArray(me))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");try{typeof me[0][0][0]=="number"&&(me=[me])}catch(dt){}this.polys=[],this.bbox={ll:{x:Number.POSITIVE_INFINITY,y:Number.POSITIVE_INFINITY},ur:{x:Number.NEGATIVE_INFINITY,y:Number.NEGATIVE_INFINITY}};for(var fe=0,Q=me.length;fe<Q;fe++){var De=new Qt(me[fe],this);De.bbox.ll.x<this.bbox.ll.x&&(this.bbox.ll.x=De.bbox.ll.x),De.bbox.ll.y<this.bbox.ll.y&&(this.bbox.ll.y=De.bbox.ll.y),De.bbox.ur.x>this.bbox.ur.x&&(this.bbox.ur.x=De.bbox.ur.x),De.bbox.ur.y>this.bbox.ur.y&&(this.bbox.ur.y=De.bbox.ur.y),this.polys.push(De)}this.isSubject=ne}return R(ft,[{key:"getSweepEvents",value:function(){for(var ne=[],fe=0,Q=this.polys.length;fe<Q;fe++)for(var De=this.polys[fe].getSweepEvents(),dt=0,Jt=De.length;dt<Jt;dt++)ne.push(De[dt]);return ne}}]),ft}(),$r=function(){R(ft,null,[{key:"factory",value:function(ne){for(var fe=[],Q=0,De=ne.length;Q<De;Q++){var dt=ne[Q];if(!(!dt.isInResult()||dt.ringOut)){for(var Jt=null,it=dt.leftSE,lt=dt.rightSE,qt=[it],pr=it.point,Hr=[];Jt=it,it=lt,qt.push(it),it.point!==pr;)for(;;){var Xr=it.getAvailableLinkedEvents();if(Xr.length===0){var ce=qt[0].point,xt=qt[qt.length-1].point;throw new Error("Unable to complete output ring starting at [".concat(ce.x,",")+" ".concat(ce.y,"]. Last matching segment found ends at")+" [".concat(xt.x,", ").concat(xt.y,"]."))}if(Xr.length===1){lt=Xr[0].otherSE;break}for(var Gt=null,Ir=0,nn=Hr.length;Ir<nn;Ir++)if(Hr[Ir].point===it.point){Gt=Ir;break}if(Gt!==null){var zi=Hr.splice(Gt)[0],Ui=qt.splice(zi.index);Ui.unshift(Ui[0].otherSE),fe.push(new ft(Ui.reverse()));continue}Hr.push({index:qt.length,point:it.point});var Pi=it.getLeftmostComparator(Jt);lt=Xr.sort(Pi)[0].otherSE;break}fe.push(new ft(qt))}}return fe}}]);function ft(me){v(this,ft),this.events=me;for(var ne=0,fe=me.length;ne<fe;ne++)me[ne].segment.ringOut=this;this.poly=null}return R(ft,[{key:"getGeom",value:function(){for(var ne=this.events[0].point,fe=[ne],Q=1,De=this.events.length-1;Q<De;Q++){var dt=this.events[Q].point,Jt=this.events[Q+1].point;ie(dt,ne,Jt)!==0&&(fe.push(dt),ne=dt)}if(fe.length===1)return null;var it=fe[0],lt=fe[1];ie(it,ne,lt)===0&&fe.shift(),fe.push(fe[0]);for(var qt=this.isExteriorRing()?1:-1,pr=this.isExteriorRing()?0:fe.length-1,Hr=this.isExteriorRing()?fe.length:-1,Xr=[],ce=pr;ce!=Hr;ce+=qt)Xr.push([fe[ce].x,fe[ce].y]);return Xr}},{key:"isExteriorRing",value:function(){if(this._isExteriorRing===void 0){var ne=this.enclosingRing();this._isExteriorRing=ne?!ne.isExteriorRing():!0}return this._isExteriorRing}},{key:"enclosingRing",value:function(){return this._enclosingRing===void 0&&(this._enclosingRing=this._calcEnclosingRing()),this._enclosingRing}},{key:"_calcEnclosingRing",value:function(){for(var ne=this.events[0],fe=1,Q=this.events.length;fe<Q;fe++){var De=this.events[fe];Fe.compare(ne,De)>0&&(ne=De)}for(var dt=ne.segment.prevInResult(),Jt=dt?dt.prevInResult():null;;){if(!dt)return null;if(!Jt)return dt.ringOut;if(Jt.ringOut!==dt.ringOut)return Jt.ringOut.enclosingRing()!==dt.ringOut?dt.ringOut:dt.ringOut.enclosingRing();dt=Jt.prevInResult(),Jt=dt?dt.prevInResult():null}}}]),ft}(),Cr=function(){function ft(me){v(this,ft),this.exteriorRing=me,me.poly=this,this.interiorRings=[]}return R(ft,[{key:"addInterior",value:function(ne){this.interiorRings.push(ne),ne.poly=this}},{key:"getGeom",value:function(){var ne=[this.exteriorRing.getGeom()];if(ne[0]===null)return null;for(var fe=0,Q=this.interiorRings.length;fe<Q;fe++){var De=this.interiorRings[fe].getGeom();De!==null&&ne.push(De)}return ne}}]),ft}(),sn=function(){function ft(me){v(this,ft),this.rings=me,this.polys=this._composePolys(me)}return R(ft,[{key:"getGeom",value:function(){for(var ne=[],fe=0,Q=this.polys.length;fe<Q;fe++){var De=this.polys[fe].getGeom();De!==null&&ne.push(De)}return ne}},{key:"_composePolys",value:function(ne){for(var fe=[],Q=0,De=ne.length;Q<De;Q++){var dt=ne[Q];if(!dt.poly)if(dt.isExteriorRing())fe.push(new Cr(dt));else{var Jt=dt.enclosingRing();Jt.poly||fe.push(new Cr(Jt)),Jt.poly.addInterior(dt)}}return fe}}]),ft}(),ot=function(){function ft(me){var ne=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Wt.compare;v(this,ft),this.queue=me,this.tree=new Y(ne),this.segments=[]}return R(ft,[{key:"process",value:function(ne){var fe=ne.segment,Q=[];if(ne.consumedBy)return ne.isLeft?this.queue.remove(ne.otherSE):this.tree.remove(fe),Q;var De=ne.isLeft?this.tree.insert(fe):this.tree.find(fe);if(!De)throw new Error("Unable to find segment #".concat(fe.id," ")+"[".concat(fe.leftSE.point.x,", ").concat(fe.leftSE.point.y,"] -> ")+"[".concat(fe.rightSE.point.x,", ").concat(fe.rightSE.point.y,"] ")+"in SweepLine tree. Please submit a bug report.");for(var dt=De,Jt=De,it=void 0,lt=void 0;it===void 0;)dt=this.tree.prev(dt),dt===null?it=null:dt.key.consumedBy===void 0&&(it=dt.key);for(;lt===void 0;)Jt=this.tree.next(Jt),Jt===null?lt=null:Jt.key.consumedBy===void 0&&(lt=Jt.key);if(ne.isLeft){var qt=null;if(it){var pr=it.getIntersection(fe);if(pr!==null&&(fe.isAnEndpoint(pr)||(qt=pr),!it.isAnEndpoint(pr)))for(var Hr=this._splitSafely(it,pr),Xr=0,ce=Hr.length;Xr<ce;Xr++)Q.push(Hr[Xr])}var xt=null;if(lt){var Gt=lt.getIntersection(fe);if(Gt!==null&&(fe.isAnEndpoint(Gt)||(xt=Gt),!lt.isAnEndpoint(Gt)))for(var Ir=this._splitSafely(lt,Gt),nn=0,zi=Ir.length;nn<zi;nn++)Q.push(Ir[nn])}if(qt!==null||xt!==null){var Ui=null;if(qt===null)Ui=xt;else if(xt===null)Ui=qt;else{var Pi=Fe.comparePoints(qt,xt);Ui=Pi<=0?qt:xt}this.queue.remove(fe.rightSE),Q.push(fe.rightSE);for(var ka=fe.split(Ui),Ti=0,Ge=ka.length;Ti<Ge;Ti++)Q.push(ka[Ti])}Q.length>0?(this.tree.remove(fe),Q.push(ne)):(this.segments.push(fe),fe.prev=it)}else{if(it&&lt){var et=it.getIntersection(lt);if(et!==null){if(!it.isAnEndpoint(et))for(var gt=this._splitSafely(it,et),ht=0,Et=gt.length;ht<Et;ht++)Q.push(gt[ht]);if(!lt.isAnEndpoint(et))for(var Zt=this._splitSafely(lt,et),sr=0,bt=Zt.length;sr<bt;sr++)Q.push(Zt[sr])}}this.tree.remove(fe)}return Q}},{key:"_splitSafely",value:function(ne,fe){this.tree.remove(ne);var Q=ne.rightSE;this.queue.remove(Q);var De=ne.split(fe);return De.push(Q),ne.consumedBy===void 0&&this.tree.insert(ne),De}}]),ft}(),_r=typeof w!="undefined"&&{NODE_ENV:"production",PUBLIC_PATH:"/dumi2-template/"}.POLYGON_CLIPPING_MAX_QUEUE_SIZE||1e6,cr=typeof w!="undefined"&&{NODE_ENV:"production",PUBLIC_PATH:"/dumi2-template/"}.POLYGON_CLIPPING_MAX_SWEEPLINE_SEGMENTS||1e6,Vr=function(){function ft(){v(this,ft)}return R(ft,[{key:"run",value:function(ne,fe,Q){Qn.type=ne,Ke.reset();for(var De=[new xr(fe,!0)],dt=0,Jt=Q.length;dt<Jt;dt++)De.push(new xr(Q[dt],!1));if(Qn.numMultiPolys=De.length,Qn.type==="difference")for(var it=De[0],lt=1;lt<De.length;)Ve(De[lt].bbox,it.bbox)!==null?lt++:De.splice(lt,1);if(Qn.type==="intersection"){for(var qt=0,pr=De.length;qt<pr;qt++)for(var Hr=De[qt],Xr=qt+1,ce=De.length;Xr<ce;Xr++)if(Ve(Hr.bbox,De[Xr].bbox)===null)return[]}for(var xt=new Y(Fe.compare),Gt=0,Ir=De.length;Gt<Ir;Gt++)for(var nn=De[Gt].getSweepEvents(),zi=0,Ui=nn.length;zi<Ui;zi++)if(xt.insert(nn[zi]),xt.size>_r)throw new Error("Infinite loop when putting segment endpoints in a priority queue (queue size too big). Please file a bug report.");for(var Pi=new ot(xt),ka=xt.size,Ti=xt.pop();Ti;){var Ge=Ti.key;if(xt.size===ka){var et=Ge.segment;throw new Error("Unable to pop() ".concat(Ge.isLeft?"left":"right"," SweepEvent ")+"[".concat(Ge.point.x,", ").concat(Ge.point.y,"] from segment #").concat(et.id," ")+"[".concat(et.leftSE.point.x,", ").concat(et.leftSE.point.y,"] -> ")+"[".concat(et.rightSE.point.x,", ").concat(et.rightSE.point.y,"] from queue. ")+"Please file a bug report.")}if(xt.size>_r)throw new Error("Infinite loop when passing sweep line over endpoints (queue size too big). Please file a bug report.");if(Pi.segments.length>cr)throw new Error("Infinite loop when passing sweep line over endpoints (too many sweep line segments). Please file a bug report.");for(var gt=Pi.process(Ge),ht=0,Et=gt.length;ht<Et;ht++){var Zt=gt[ht];Zt.consumedBy===void 0&&xt.insert(Zt)}ka=xt.size,Ti=xt.pop()}Ke.reset();var sr=$r.factory(Pi.segments),bt=new sn(sr);return bt.getGeom()}}]),ft}(),Qn=new Vr,mn=function(me){for(var ne=arguments.length,fe=new Array(ne>1?ne-1:0),Q=1;Q<ne;Q++)fe[Q-1]=arguments[Q];return Qn.run("union",me,fe)},_n=function(me){for(var ne=arguments.length,fe=new Array(ne>1?ne-1:0),Q=1;Q<ne;Q++)fe[Q-1]=arguments[Q];return Qn.run("intersection",me,fe)},Yr=function(me){for(var ne=arguments.length,fe=new Array(ne>1?ne-1:0),Q=1;Q<ne;Q++)fe[Q-1]=arguments[Q];return Qn.run("xor",me,fe)},Fr=function(me){for(var ne=arguments.length,fe=new Array(ne>1?ne-1:0),Q=1;Q<ne;Q++)fe[Q-1]=arguments[Q];return Qn.run("difference",me,fe)},kr={union:mn,intersection:_n,xor:Yr,difference:Fr};return kr})},14224:function(U){var F=U.exports={},c,w;function v(){throw new Error("setTimeout has not been defined")}function l(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?c=setTimeout:c=v}catch(le){c=v}try{typeof clearTimeout=="function"?w=clearTimeout:w=l}catch(le){w=l}})();function R(le){if(c===setTimeout)return setTimeout(le,0);if((c===v||!c)&&setTimeout)return c=setTimeout,setTimeout(le,0);try{return c(le,0)}catch(be){try{return c.call(null,le,0)}catch(de){return c.call(this,le,0)}}}function A(le){if(w===clearTimeout)return clearTimeout(le);if((w===l||!w)&&clearTimeout)return w=clearTimeout,clearTimeout(le);try{return w(le)}catch(be){try{return w.call(null,le)}catch(de){return w.call(this,le)}}}var D=[],k=!1,B,z=-1;function Z(){!k||!B||(k=!1,B.length?D=B.concat(D):z=-1,D.length&&W())}function W(){if(!k){var le=R(Z);k=!0;for(var be=D.length;be;){for(B=D,D=[];++z<be;)B&&B[z].run();z=-1,be=D.length}B=null,k=!1,A(le)}}F.nextTick=function(le){var be=new Array(arguments.length-1);if(arguments.length>1)for(var de=1;de<arguments.length;de++)be[de-1]=arguments[de];D.push(new Y(le,be)),D.length===1&&!k&&R(W)};function Y(le,be){this.fun=le,this.array=be}Y.prototype.run=function(){this.fun.apply(null,this.array)},F.title="browser",F.browser=!0,F.env={},F.argv=[],F.version="",F.versions={};function te(){}F.on=te,F.addListener=te,F.once=te,F.off=te,F.removeListener=te,F.removeAllListeners=te,F.emit=te,F.prependListener=te,F.prependOnceListener=te,F.listeners=function(le){return[]},F.binding=function(le){throw new Error("process.binding is not supported")},F.cwd=function(){return"/"},F.chdir=function(le){throw new Error("process.chdir is not supported")},F.umask=function(){return 0}},74049:function(U,F,c){"use strict";var w=c(36257);function v(){}function l(){}l.resetWarningCache=v,U.exports=function(){function R(k,B,z,Z,W,Y){if(Y!==w){var te=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw te.name="Invariant Violation",te}}R.isRequired=R;function A(){return R}var D={array:R,bigint:R,bool:R,func:R,number:R,object:R,string:R,symbol:R,any:R,arrayOf:A,element:R,elementType:R,instanceOf:A,node:R,objectOf:A,oneOf:A,oneOfType:A,shape:A,exact:A,checkPropTypes:l,resetWarningCache:v};return D.PropTypes=D,D}},40507:function(U,F,c){if(!1)var w,v;else U.exports=c(74049)()},36257:function(U){"use strict";var F="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";U.exports=F},6481:function(U,F){"use strict";F.Z=`import { PointLayer, Scene } from '@antv/l7';

export function draw3dBar(scene: Scene) {
  fetch(
    'https://gw.alipayobjects.com/os/basement_prod/893d1d5f-11d9-45f3-8322-ee9140d288ae.json',
  )
    .then((res) => res.json())
    .then((data) => {
      const pointLayer = new PointLayer({})
        .source(data, {
          parser: {
            type: 'json',
            x: 'longitude',
            y: 'latitude',
          },
        })
        .animate(true)
        .active(true)
        .shape('name', [
          'cylinder',
          'triangleColumn',
          'hexagonColumn',
          'squareColumn',
        ])
        .size('unit_price', (h) => {
          return [6, 6, h / 500];
        })
        .color('name', ['#739DFF', '#61FCBF', '#FFDE74', '#FF896F']);

      scene.addLayer(pointLayer);
    });
}
`},72435:function(U,F){"use strict";F.Z=`import { LineLayer, PointLayer, PolygonLayer, Scene } from '@antv/l7';

export function drawText(scene: Scene) {
  fetch(
    // 'https://gw.alipayobjects.com/os/bmw-prod/1981b358-28d8-4a2f-9c74-a857d5925ef1.json' //  \u83B7\u53D6\u884C\u653F\u533A\u5212P\u5662\u5229\u7528
    'https://gw.alipayobjects.com/os/bmw-prod/d6da7ac1-8b4f-4a55-93ea-e81aa08f0cf3.json',
  )
    .then((res) => res.json())
    .then((data) => {
      const chinaPolygonLayer = new PolygonLayer({
        autoFit: true,
      }).source(data);

      chinaPolygonLayer
        .color('name', [
          'rgb(239,243,255)',
          'rgb(189,215,231)',
          'rgb(107,174,214)',
          'rgb(49,130,189)',
          'rgb(8,81,156)',
        ])
        .shape('fill')
        .style({
          opacity: 1,
        });
      //  \u56FE\u5C42\u8FB9\u754C
      const layer2 = new LineLayer({
        zIndex: 2,
      })
        .source(data)
        .color('rgb(93,112,146)')
        .size(0.6)
        .style({
          opacity: 1,
        });

      scene.addLayer(chinaPolygonLayer);
      scene.addLayer(layer2);
    });
  fetch(
    'https://gw.alipayobjects.com/os/bmw-prod/c4a6aa9d-8923-4193-a695-455fd8f6638c.json', //  \u6807\u6CE8\u6570\u636E
  )
    .then((res) => res.json())
    .then((data) => {
      const labelLayer = new PointLayer({
        zIndex: 5,
      })
        .source(data, {
          parser: {
            type: 'json',
            coordinates: 'center',
          },
        })
        .color('#fff')
        .shape('name', 'text')
        .size(12)
        .style({
          opacity: 1,
          stroke: '#fff',
          strokeWidth: 0,
          padding: [5, 5],
          textAllowOverlap: false,
        });

      scene.addLayer(labelLayer);
    });
}
`},49085:function(U,F){"use strict";F.Z=`import { Scene } from '@antv/l7';
import { NextMap } from 'dumi2-template';
import React from 'react';
import { drawText } from '../drawText';
import { fitBounds } from '../fitBounds';
const initProps = {
  pitch: 0,
  style: 'blank',
  center: [116.368652, 39.93866],
  zoom: 10.07,
};
export default function Page() {
  const onLoad = (scene: Scene) => {
    fitBounds(scene, 'map1');
    drawText(scene);
  };
  return <NextMap id="map1" config={initProps} onLoad={onLoad}></NextMap>;
}
`},71104:function(U,F){"use strict";F.Z=`import { Scene } from '@antv/l7';
import { NextMap } from 'dumi2-template';
import React from 'react';
import { draw3dBar } from '../draw3DBar';
const initProps = {
  pitch: 66.02383,
  center: [121.400257, 31.25287],
  zoom: 14.55,
};
export default function Page() {
  const onLoad = (scene: Scene) => {
    draw3dBar(scene);
  };
  return (
    <NextMap
      id="map2"
      config={initProps}
      onLoad={onLoad}
      isChina={true}
    ></NextMap>
  );
}
`},12511:function(U,F){"use strict";F.Z=`import { Scene } from '@antv/l7';

export function fitBounds(scene: Scene, id: string) {
  document.querySelector(id)?.addEventListener(
    'click',
    () => {
      scene.fitBounds([
        [112, 32],
        [114, 35],
      ]);
    },
    false,
  );
}
`},92015:function(U,F,c){"use strict";function w(ke){return w=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(we){return typeof we}:function(we){return we&&typeof Symbol=="function"&&we.constructor===Symbol&&we!==Symbol.prototype?"symbol":typeof we},w(ke)}Object.defineProperty(F,"__esModule",{value:!0}),F.CopyToClipboard=void 0;var v=A(c(50959)),l=A(c(874)),R=["text","onCopy","options","children"];function A(ke){return ke&&ke.__esModule?ke:{default:ke}}function D(ke,we){var Me=Object.keys(ke);if(Object.getOwnPropertySymbols){var Xe=Object.getOwnPropertySymbols(ke);we&&(Xe=Xe.filter(function(Ke){return Object.getOwnPropertyDescriptor(ke,Ke).enumerable})),Me.push.apply(Me,Xe)}return Me}function k(ke){for(var we=1;we<arguments.length;we++){var Me=arguments[we]!=null?arguments[we]:{};we%2?D(Object(Me),!0).forEach(function(Xe){Ve(ke,Xe,Me[Xe])}):Object.getOwnPropertyDescriptors?Object.defineProperties(ke,Object.getOwnPropertyDescriptors(Me)):D(Object(Me)).forEach(function(Xe){Object.defineProperty(ke,Xe,Object.getOwnPropertyDescriptor(Me,Xe))})}return ke}function B(ke,we){if(ke==null)return{};var Me=z(ke,we),Xe,Ke;if(Object.getOwnPropertySymbols){var At=Object.getOwnPropertySymbols(ke);for(Ke=0;Ke<At.length;Ke++)Xe=At[Ke],!(we.indexOf(Xe)>=0)&&(!Object.prototype.propertyIsEnumerable.call(ke,Xe)||(Me[Xe]=ke[Xe]))}return Me}function z(ke,we){if(ke==null)return{};var Me={},Xe=Object.keys(ke),Ke,At;for(At=0;At<Xe.length;At++)Ke=Xe[At],!(we.indexOf(Ke)>=0)&&(Me[Ke]=ke[Ke]);return Me}function Z(ke,we){if(!(ke instanceof we))throw new TypeError("Cannot call a class as a function")}function W(ke,we){for(var Me=0;Me<we.length;Me++){var Xe=we[Me];Xe.enumerable=Xe.enumerable||!1,Xe.configurable=!0,"value"in Xe&&(Xe.writable=!0),Object.defineProperty(ke,Xe.key,Xe)}}function Y(ke,we,Me){return we&&W(ke.prototype,we),Me&&W(ke,Me),Object.defineProperty(ke,"prototype",{writable:!1}),ke}function te(ke,we){if(typeof we!="function"&&we!==null)throw new TypeError("Super expression must either be null or a function");ke.prototype=Object.create(we&&we.prototype,{constructor:{value:ke,writable:!0,configurable:!0}}),Object.defineProperty(ke,"prototype",{writable:!1}),we&&le(ke,we)}function le(ke,we){return le=Object.setPrototypeOf||function(Xe,Ke){return Xe.__proto__=Ke,Xe},le(ke,we)}function be(ke){var we=Oe();return function(){var Xe=xe(ke),Ke;if(we){var At=xe(this).constructor;Ke=Reflect.construct(Xe,arguments,At)}else Ke=Xe.apply(this,arguments);return de(this,Ke)}}function de(ke,we){if(we&&(w(we)==="object"||typeof we=="function"))return we;if(we!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return pe(ke)}function pe(ke){if(ke===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return ke}function Oe(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(ke){return!1}}function xe(ke){return xe=Object.setPrototypeOf?Object.getPrototypeOf:function(Me){return Me.__proto__||Object.getPrototypeOf(Me)},xe(ke)}function Ve(ke,we,Me){return we in ke?Object.defineProperty(ke,we,{value:Me,enumerable:!0,configurable:!0,writable:!0}):ke[we]=Me,ke}var K=function(ke){te(Me,ke);var we=be(Me);function Me(){var Xe;Z(this,Me);for(var Ke=arguments.length,At=new Array(Ke),mt=0;mt<Ke;mt++)At[mt]=arguments[mt];return Xe=we.call.apply(we,[this].concat(At)),Ve(pe(Xe),"onClick",function(ie){var oe=Xe.props,he=oe.text,ye=oe.onCopy,se=oe.children,Ne=oe.options,st=v.default.Children.only(se),Fe=(0,l.default)(he,Ne);ye&&ye(he,Fe),st&&st.props&&typeof st.props.onClick=="function"&&st.props.onClick(ie)}),Xe}return Y(Me,[{key:"render",value:function(){var Ke=this.props,At=Ke.text,mt=Ke.onCopy,ie=Ke.options,oe=Ke.children,he=B(Ke,R),ye=v.default.Children.only(oe);return v.default.cloneElement(ye,k(k({},he),{},{onClick:this.onClick}))}}]),Me}(v.default.PureComponent);F.CopyToClipboard=K,Ve(K,"defaultProps",{onCopy:void 0,options:void 0})},90943:function(U,F,c){"use strict";var w=c(92015),v=w.CopyToClipboard;v.CopyToClipboard=v,U.exports=v},53746:function(U,F,c){"use strict";var w=c(50959),v=c(22962);function l(p){for(var y="https://reactjs.org/docs/error-decoder.html?invariant="+p,C=1;C<arguments.length;C++)y+="&args[]="+encodeURIComponent(arguments[C]);return"Minified React error #"+p+"; visit "+y+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var R=new Set,A={};function D(p,y){k(p,y),k(p+"Capture",y)}function k(p,y){for(A[p]=y,p=0;p<y.length;p++)R.add(y[p])}var B=!(typeof window=="undefined"||typeof window.document=="undefined"||typeof window.document.createElement=="undefined"),z=Object.prototype.hasOwnProperty,Z=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,W={},Y={};function te(p){return z.call(Y,p)?!0:z.call(W,p)?!1:Z.test(p)?Y[p]=!0:(W[p]=!0,!1)}function le(p,y,C,V){if(C!==null&&C.type===0)return!1;switch(typeof y){case"function":case"symbol":return!0;case"boolean":return V?!1:C!==null?!C.acceptsBooleans:(p=p.toLowerCase().slice(0,5),p!=="data-"&&p!=="aria-");default:return!1}}function be(p,y,C,V){if(y===null||typeof y=="undefined"||le(p,y,C,V))return!0;if(V)return!1;if(C!==null)switch(C.type){case 3:return!y;case 4:return y===!1;case 5:return isNaN(y);case 6:return isNaN(y)||1>y}return!1}function de(p,y,C,V,ae,Ie,ut){this.acceptsBooleans=y===2||y===3||y===4,this.attributeName=V,this.attributeNamespace=ae,this.mustUseProperty=C,this.propertyName=p,this.type=y,this.sanitizeURL=Ie,this.removeEmptyString=ut}var pe={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(p){pe[p]=new de(p,0,!1,p,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(p){var y=p[0];pe[y]=new de(y,1,!1,p[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(p){pe[p]=new de(p,2,!1,p.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(p){pe[p]=new de(p,2,!1,p,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(p){pe[p]=new de(p,3,!1,p.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(p){pe[p]=new de(p,3,!0,p,null,!1,!1)}),["capture","download"].forEach(function(p){pe[p]=new de(p,4,!1,p,null,!1,!1)}),["cols","rows","size","span"].forEach(function(p){pe[p]=new de(p,6,!1,p,null,!1,!1)}),["rowSpan","start"].forEach(function(p){pe[p]=new de(p,5,!1,p.toLowerCase(),null,!1,!1)});var Oe=/[\-:]([a-z])/g;function xe(p){return p[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(p){var y=p.replace(Oe,xe);pe[y]=new de(y,1,!1,p,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(p){var y=p.replace(Oe,xe);pe[y]=new de(y,1,!1,p,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(p){var y=p.replace(Oe,xe);pe[y]=new de(y,1,!1,p,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(p){pe[p]=new de(p,1,!1,p.toLowerCase(),null,!1,!1)}),pe.xlinkHref=new de("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(p){pe[p]=new de(p,1,!1,p.toLowerCase(),null,!0,!0)});function Ve(p,y,C,V){var ae=pe.hasOwnProperty(y)?pe[y]:null;(ae!==null?ae.type!==0:V||!(2<y.length)||y[0]!=="o"&&y[0]!=="O"||y[1]!=="n"&&y[1]!=="N")&&(be(y,C,ae,V)&&(C=null),V||ae===null?te(y)&&(C===null?p.removeAttribute(y):p.setAttribute(y,""+C)):ae.mustUseProperty?p[ae.propertyName]=C===null?ae.type===3?!1:"":C:(y=ae.attributeName,V=ae.attributeNamespace,C===null?p.removeAttribute(y):(ae=ae.type,C=ae===3||ae===4&&C===!0?"":""+C,V?p.setAttributeNS(V,y,C):p.setAttribute(y,C))))}var K=w.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,ke=Symbol.for("react.element"),we=Symbol.for("react.portal"),Me=Symbol.for("react.fragment"),Xe=Symbol.for("react.strict_mode"),Ke=Symbol.for("react.profiler"),At=Symbol.for("react.provider"),mt=Symbol.for("react.context"),ie=Symbol.for("react.forward_ref"),oe=Symbol.for("react.suspense"),he=Symbol.for("react.suspense_list"),ye=Symbol.for("react.memo"),se=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var Ne=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var st=Symbol.iterator;function Fe(p){return p===null||typeof p!="object"?null:(p=st&&p[st]||p["@@iterator"],typeof p=="function"?p:null)}var tt=Object.assign,Wt;function Pr(p){if(Wt===void 0)try{throw Error()}catch(C){var y=C.stack.trim().match(/\n( *(at )?)/);Wt=y&&y[1]||""}return`
`+Wt+p}var Qt=!1;function xr(p,y){if(!p||Qt)return"";Qt=!0;var C=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(y)if(y=function(){throw Error()},Object.defineProperty(y.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(y,[])}catch(fn){var V=fn}Reflect.construct(p,[],y)}else{try{y.call()}catch(fn){V=fn}p.call(y.prototype)}else{try{throw Error()}catch(fn){V=fn}p()}}catch(fn){if(fn&&V&&typeof fn.stack=="string"){for(var ae=fn.stack.split(`
`),Ie=V.stack.split(`
`),ut=ae.length-1,zt=Ie.length-1;1<=ut&&0<=zt&&ae[ut]!==Ie[zt];)zt--;for(;1<=ut&&0<=zt;ut--,zt--)if(ae[ut]!==Ie[zt]){if(ut!==1||zt!==1)do if(ut--,zt--,0>zt||ae[ut]!==Ie[zt]){var wr=`
`+ae[ut].replace(" at new "," at ");return p.displayName&&wr.includes("<anonymous>")&&(wr=wr.replace("<anonymous>",p.displayName)),wr}while(1<=ut&&0<=zt);break}}}finally{Qt=!1,Error.prepareStackTrace=C}return(p=p?p.displayName||p.name:"")?Pr(p):""}function $r(p){switch(p.tag){case 5:return Pr(p.type);case 16:return Pr("Lazy");case 13:return Pr("Suspense");case 19:return Pr("SuspenseList");case 0:case 2:case 15:return p=xr(p.type,!1),p;case 11:return p=xr(p.type.render,!1),p;case 1:return p=xr(p.type,!0),p;default:return""}}function Cr(p){if(p==null)return null;if(typeof p=="function")return p.displayName||p.name||null;if(typeof p=="string")return p;switch(p){case Me:return"Fragment";case we:return"Portal";case Ke:return"Profiler";case Xe:return"StrictMode";case oe:return"Suspense";case he:return"SuspenseList"}if(typeof p=="object")switch(p.$$typeof){case mt:return(p.displayName||"Context")+".Consumer";case At:return(p._context.displayName||"Context")+".Provider";case ie:var y=p.render;return p=p.displayName,p||(p=y.displayName||y.name||"",p=p!==""?"ForwardRef("+p+")":"ForwardRef"),p;case ye:return y=p.displayName||null,y!==null?y:Cr(p.type)||"Memo";case se:y=p._payload,p=p._init;try{return Cr(p(y))}catch(C){}}return null}function sn(p){var y=p.type;switch(p.tag){case 24:return"Cache";case 9:return(y.displayName||"Context")+".Consumer";case 10:return(y._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return p=y.render,p=p.displayName||p.name||"",y.displayName||(p!==""?"ForwardRef("+p+")":"ForwardRef");case 7:return"Fragment";case 5:return y;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Cr(y);case 8:return y===Xe?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof y=="function")return y.displayName||y.name||null;if(typeof y=="string")return y}return null}function ot(p){switch(typeof p){case"boolean":case"number":case"string":case"undefined":return p;case"object":return p;default:return""}}function _r(p){var y=p.type;return(p=p.nodeName)&&p.toLowerCase()==="input"&&(y==="checkbox"||y==="radio")}function cr(p){var y=_r(p)?"checked":"value",C=Object.getOwnPropertyDescriptor(p.constructor.prototype,y),V=""+p[y];if(!p.hasOwnProperty(y)&&typeof C!="undefined"&&typeof C.get=="function"&&typeof C.set=="function"){var ae=C.get,Ie=C.set;return Object.defineProperty(p,y,{configurable:!0,get:function(){return ae.call(this)},set:function(ut){V=""+ut,Ie.call(this,ut)}}),Object.defineProperty(p,y,{enumerable:C.enumerable}),{getValue:function(){return V},setValue:function(ut){V=""+ut},stopTracking:function(){p._valueTracker=null,delete p[y]}}}}function Vr(p){p._valueTracker||(p._valueTracker=cr(p))}function Qn(p){if(!p)return!1;var y=p._valueTracker;if(!y)return!0;var C=y.getValue(),V="";return p&&(V=_r(p)?p.checked?"true":"false":p.value),p=V,p!==C?(y.setValue(p),!0):!1}function mn(p){if(p=p||(typeof document!="undefined"?document:void 0),typeof p=="undefined")return null;try{return p.activeElement||p.body}catch(y){return p.body}}function _n(p,y){var C=y.checked;return tt({},y,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:C!=null?C:p._wrapperState.initialChecked})}function Yr(p,y){var C=y.defaultValue==null?"":y.defaultValue,V=y.checked!=null?y.checked:y.defaultChecked;C=ot(y.value!=null?y.value:C),p._wrapperState={initialChecked:V,initialValue:C,controlled:y.type==="checkbox"||y.type==="radio"?y.checked!=null:y.value!=null}}function Fr(p,y){y=y.checked,y!=null&&Ve(p,"checked",y,!1)}function kr(p,y){Fr(p,y);var C=ot(y.value),V=y.type;if(C!=null)V==="number"?(C===0&&p.value===""||p.value!=C)&&(p.value=""+C):p.value!==""+C&&(p.value=""+C);else if(V==="submit"||V==="reset"){p.removeAttribute("value");return}y.hasOwnProperty("value")?me(p,y.type,C):y.hasOwnProperty("defaultValue")&&me(p,y.type,ot(y.defaultValue)),y.checked==null&&y.defaultChecked!=null&&(p.defaultChecked=!!y.defaultChecked)}function ft(p,y,C){if(y.hasOwnProperty("value")||y.hasOwnProperty("defaultValue")){var V=y.type;if(!(V!=="submit"&&V!=="reset"||y.value!==void 0&&y.value!==null))return;y=""+p._wrapperState.initialValue,C||y===p.value||(p.value=y),p.defaultValue=y}C=p.name,C!==""&&(p.name=""),p.defaultChecked=!!p._wrapperState.initialChecked,C!==""&&(p.name=C)}function me(p,y,C){(y!=="number"||mn(p.ownerDocument)!==p)&&(C==null?p.defaultValue=""+p._wrapperState.initialValue:p.defaultValue!==""+C&&(p.defaultValue=""+C))}var ne=Array.isArray;function fe(p,y,C,V){if(p=p.options,y){y={};for(var ae=0;ae<C.length;ae++)y["$"+C[ae]]=!0;for(C=0;C<p.length;C++)ae=y.hasOwnProperty("$"+p[C].value),p[C].selected!==ae&&(p[C].selected=ae),ae&&V&&(p[C].defaultSelected=!0)}else{for(C=""+ot(C),y=null,ae=0;ae<p.length;ae++){if(p[ae].value===C){p[ae].selected=!0,V&&(p[ae].defaultSelected=!0);return}y!==null||p[ae].disabled||(y=p[ae])}y!==null&&(y.selected=!0)}}function Q(p,y){if(y.dangerouslySetInnerHTML!=null)throw Error(l(91));return tt({},y,{value:void 0,defaultValue:void 0,children:""+p._wrapperState.initialValue})}function De(p,y){var C=y.value;if(C==null){if(C=y.children,y=y.defaultValue,C!=null){if(y!=null)throw Error(l(92));if(ne(C)){if(1<C.length)throw Error(l(93));C=C[0]}y=C}y==null&&(y=""),C=y}p._wrapperState={initialValue:ot(C)}}function dt(p,y){var C=ot(y.value),V=ot(y.defaultValue);C!=null&&(C=""+C,C!==p.value&&(p.value=C),y.defaultValue==null&&p.defaultValue!==C&&(p.defaultValue=C)),V!=null&&(p.defaultValue=""+V)}function Jt(p){var y=p.textContent;y===p._wrapperState.initialValue&&y!==""&&y!==null&&(p.value=y)}function it(p){switch(p){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function lt(p,y){return p==null||p==="http://www.w3.org/1999/xhtml"?it(y):p==="http://www.w3.org/2000/svg"&&y==="foreignObject"?"http://www.w3.org/1999/xhtml":p}var qt,pr=function(p){return typeof MSApp!="undefined"&&MSApp.execUnsafeLocalFunction?function(y,C,V,ae){MSApp.execUnsafeLocalFunction(function(){return p(y,C,V,ae)})}:p}(function(p,y){if(p.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in p)p.innerHTML=y;else{for(qt=qt||document.createElement("div"),qt.innerHTML="<svg>"+y.valueOf().toString()+"</svg>",y=qt.firstChild;p.firstChild;)p.removeChild(p.firstChild);for(;y.firstChild;)p.appendChild(y.firstChild)}});function Hr(p,y){if(y){var C=p.firstChild;if(C&&C===p.lastChild&&C.nodeType===3){C.nodeValue=y;return}}p.textContent=y}var Xr={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},ce=["Webkit","ms","Moz","O"];Object.keys(Xr).forEach(function(p){ce.forEach(function(y){y=y+p.charAt(0).toUpperCase()+p.substring(1),Xr[y]=Xr[p]})});function xt(p,y,C){return y==null||typeof y=="boolean"||y===""?"":C||typeof y!="number"||y===0||Xr.hasOwnProperty(p)&&Xr[p]?(""+y).trim():y+"px"}function Gt(p,y){p=p.style;for(var C in y)if(y.hasOwnProperty(C)){var V=C.indexOf("--")===0,ae=xt(C,y[C],V);C==="float"&&(C="cssFloat"),V?p.setProperty(C,ae):p[C]=ae}}var Ir=tt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function nn(p,y){if(y){if(Ir[p]&&(y.children!=null||y.dangerouslySetInnerHTML!=null))throw Error(l(137,p));if(y.dangerouslySetInnerHTML!=null){if(y.children!=null)throw Error(l(60));if(typeof y.dangerouslySetInnerHTML!="object"||!("__html"in y.dangerouslySetInnerHTML))throw Error(l(61))}if(y.style!=null&&typeof y.style!="object")throw Error(l(62))}}function zi(p,y){if(p.indexOf("-")===-1)return typeof y.is=="string";switch(p){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ui=null;function Pi(p){return p=p.target||p.srcElement||window,p.correspondingUseElement&&(p=p.correspondingUseElement),p.nodeType===3?p.parentNode:p}var ka=null,Ti=null,Ge=null;function et(p){if(p=Mo(p)){if(typeof ka!="function")throw Error(l(280));var y=p.stateNode;y&&(y=pf(y),ka(p.stateNode,p.type,y))}}function gt(p){Ti?Ge?Ge.push(p):Ge=[p]:Ti=p}function ht(){if(Ti){var p=Ti,y=Ge;if(Ge=Ti=null,et(p),y)for(p=0;p<y.length;p++)et(y[p])}}function Et(p,y){return p(y)}function Zt(){}var sr=!1;function bt(p,y,C){if(sr)return p(y,C);sr=!0;try{return Et(p,y,C)}finally{sr=!1,(Ti!==null||Ge!==null)&&(Zt(),ht())}}function Ft(p,y){var C=p.stateNode;if(C===null)return null;var V=pf(C);if(V===null)return null;C=V[y];e:switch(y){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(V=!V.disabled)||(p=p.type,V=!(p==="button"||p==="input"||p==="select"||p==="textarea")),p=!V;break e;default:p=!1}if(p)return null;if(C&&typeof C!="function")throw Error(l(231,y,typeof C));return C}var zr=!1;if(B)try{var Jn={};Object.defineProperty(Jn,"passive",{get:function(){zr=!0}}),window.addEventListener("test",Jn,Jn),window.removeEventListener("test",Jn,Jn)}catch(p){zr=!1}function yn(p,y,C,V,ae,Ie,ut,zt,wr){var fn=Array.prototype.slice.call(arguments,3);try{y.apply(C,fn)}catch(pi){this.onError(pi)}}var tn=!1,ni=null,ta=!1,fa=null,Mr={onError:function(p){tn=!0,ni=p}};function Wr(p,y,C,V,ae,Ie,ut,zt,wr){tn=!1,ni=null,yn.apply(Mr,arguments)}function Zi(p,y,C,V,ae,Ie,ut,zt,wr){if(Wr.apply(this,arguments),tn){if(tn){var fn=ni;tn=!1,ni=null}else throw Error(l(198));ta||(ta=!0,fa=fn)}}function Wi(p){var y=p,C=p;if(p.alternate)for(;y.return;)y=y.return;else{p=y;do y=p,(y.flags&4098)!==0&&(C=y.return),p=y.return;while(p)}return y.tag===3?C:null}function xo(p){if(p.tag===13){var y=p.memoizedState;if(y===null&&(p=p.alternate,p!==null&&(y=p.memoizedState)),y!==null)return y.dehydrated}return null}function ua(p){if(Wi(p)!==p)throw Error(l(188))}function Ur(p){var y=p.alternate;if(!y){if(y=Wi(p),y===null)throw Error(l(188));return y!==p?null:p}for(var C=p,V=y;;){var ae=C.return;if(ae===null)break;var Ie=ae.alternate;if(Ie===null){if(V=ae.return,V!==null){C=V;continue}break}if(ae.child===Ie.child){for(Ie=ae.child;Ie;){if(Ie===C)return ua(ae),p;if(Ie===V)return ua(ae),y;Ie=Ie.sibling}throw Error(l(188))}if(C.return!==V.return)C=ae,V=Ie;else{for(var ut=!1,zt=ae.child;zt;){if(zt===C){ut=!0,C=ae,V=Ie;break}if(zt===V){ut=!0,V=ae,C=Ie;break}zt=zt.sibling}if(!ut){for(zt=Ie.child;zt;){if(zt===C){ut=!0,C=Ie,V=ae;break}if(zt===V){ut=!0,V=Ie,C=ae;break}zt=zt.sibling}if(!ut)throw Error(l(189))}}if(C.alternate!==V)throw Error(l(190))}if(C.tag!==3)throw Error(l(188));return C.stateNode.current===C?p:y}function Jr(p){return p=Ur(p),p!==null?Eo(p):null}function Eo(p){if(p.tag===5||p.tag===6)return p;for(p=p.child;p!==null;){var y=Eo(p);if(y!==null)return y;p=p.sibling}return null}var Fo=v.unstable_scheduleCallback,So=v.unstable_cancelCallback,Xa=v.unstable_shouldYield,Ko=v.unstable_requestPaint,No=v.unstable_now,ui=v.unstable_getCurrentPriorityLevel,jn=v.unstable_ImmediatePriority,rr=v.unstable_UserBlockingPriority,ps=v.unstable_NormalPriority,er=v.unstable_LowPriority,$s=v.unstable_IdlePriority,Es=null,Os=null;function xu(p){if(Os&&typeof Os.onCommitFiberRoot=="function")try{Os.onCommitFiberRoot(Es,p,void 0,(p.current.flags&128)===128)}catch(y){}}var bo=Math.clz32?Math.clz32:Xs,ic=Math.log,Ru=Math.LN2;function Xs(p){return p>>>=0,p===0?32:31-(ic(p)/Ru|0)|0}var Ys=64,rs=4194304;function au(p){switch(p&-p){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return p&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return p&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return p}}function Tu(p,y){var C=p.pendingLanes;if(C===0)return 0;var V=0,ae=p.suspendedLanes,Ie=p.pingedLanes,ut=C&268435455;if(ut!==0){var zt=ut&~ae;zt!==0?V=au(zt):(Ie&=ut,Ie!==0&&(V=au(Ie)))}else ut=C&~ae,ut!==0?V=au(ut):Ie!==0&&(V=au(Ie));if(V===0)return 0;if(y!==0&&y!==V&&(y&ae)===0&&(ae=V&-V,Ie=y&-y,ae>=Ie||ae===16&&(Ie&4194240)!==0))return y;if((V&4)!==0&&(V|=C&16),y=p.entangledLanes,y!==0)for(p=p.entanglements,y&=V;0<y;)C=31-bo(y),ae=1<<C,V|=p[C],y&=~ae;return V}function Cl(p,y){switch(p){case 1:case 2:case 4:return y+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return y+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function hu(p,y){for(var C=p.suspendedLanes,V=p.pingedLanes,ae=p.expirationTimes,Ie=p.pendingLanes;0<Ie;){var ut=31-bo(Ie),zt=1<<ut,wr=ae[ut];wr===-1?((zt&C)===0||(zt&V)!==0)&&(ae[ut]=Cl(zt,y)):wr<=y&&(p.expiredLanes|=zt),Ie&=~zt}}function ou(p){return p=p.pendingLanes&-1073741825,p!==0?p:p&1073741824?1073741824:0}function ss(){var p=Ys;return Ys<<=1,(Ys&4194240)===0&&(Ys=64),p}function nu(p){for(var y=[],C=0;31>C;C++)y.push(p);return y}function Pu(p,y,C){p.pendingLanes|=y,y!==536870912&&(p.suspendedLanes=0,p.pingedLanes=0),p=p.eventTimes,y=31-bo(y),p[y]=C}function Ks(p,y){var C=p.pendingLanes&~y;p.pendingLanes=y,p.suspendedLanes=0,p.pingedLanes=0,p.expiredLanes&=y,p.mutableReadLanes&=y,p.entangledLanes&=y,y=p.entanglements;var V=p.eventTimes;for(p=p.expirationTimes;0<C;){var ae=31-bo(C),Ie=1<<ae;y[ae]=0,V[ae]=-1,p[ae]=-1,C&=~Ie}}function $u(p,y){var C=p.entangledLanes|=y;for(p=p.entanglements;C;){var V=31-bo(C),ae=1<<V;ae&y|p[V]&y&&(p[V]|=y),C&=~ae}}var qe=0;function Bt(p){return p&=-p,1<p?4<p?(p&268435455)!==0?16:536870912:4:1}var ge,je,wt,nr,en,Dn=!1,Ai=[],na=null,Aa=null,Ta=null,Wa=new Map,Co=new Map,lo=[],Vo="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function gs(p,y){switch(p){case"focusin":case"focusout":na=null;break;case"dragenter":case"dragleave":Aa=null;break;case"mouseover":case"mouseout":Ta=null;break;case"pointerover":case"pointerout":Wa.delete(y.pointerId);break;case"gotpointercapture":case"lostpointercapture":Co.delete(y.pointerId)}}function su(p,y,C,V,ae,Ie){return p===null||p.nativeEvent!==Ie?(p={blockedOn:y,domEventName:C,eventSystemFlags:V,nativeEvent:Ie,targetContainers:[ae]},y!==null&&(y=Mo(y),y!==null&&je(y)),p):(p.eventSystemFlags|=V,y=p.targetContainers,ae!==null&&y.indexOf(ae)===-1&&y.push(ae),p)}function Zu(p,y,C,V,ae){switch(y){case"focusin":return na=su(na,p,y,C,V,ae),!0;case"dragenter":return Aa=su(Aa,p,y,C,V,ae),!0;case"mouseover":return Ta=su(Ta,p,y,C,V,ae),!0;case"pointerover":var Ie=ae.pointerId;return Wa.set(Ie,su(Wa.get(Ie)||null,p,y,C,V,ae)),!0;case"gotpointercapture":return Ie=ae.pointerId,Co.set(Ie,su(Co.get(Ie)||null,p,y,C,V,ae)),!0}return!1}function Ss(p){var y=tu(p.target);if(y!==null){var C=Wi(y);if(C!==null){if(y=C.tag,y===13){if(y=xo(C),y!==null){p.blockedOn=y,en(p.priority,function(){wt(C)});return}}else if(y===3&&C.stateNode.current.memoizedState.isDehydrated){p.blockedOn=C.tag===3?C.stateNode.containerInfo:null;return}}}p.blockedOn=null}function Us(p){if(p.blockedOn!==null)return!1;for(var y=p.targetContainers;0<y.length;){var C=O(p.domEventName,p.eventSystemFlags,y[0],p.nativeEvent);if(C===null){C=p.nativeEvent;var V=new C.constructor(C.type,C);Ui=V,C.target.dispatchEvent(V),Ui=null}else return y=Mo(C),y!==null&&je(y),p.blockedOn=C,!1;y.shift()}return!0}function ys(p,y,C){Us(p)&&C.delete(y)}function Oo(){Dn=!1,na!==null&&Us(na)&&(na=null),Aa!==null&&Us(Aa)&&(Aa=null),Ta!==null&&Us(Ta)&&(Ta=null),Wa.forEach(ys),Co.forEach(ys)}function qo(p,y){p.blockedOn===y&&(p.blockedOn=null,Dn||(Dn=!0,v.unstable_scheduleCallback(v.unstable_NormalPriority,Oo)))}function Rc(p){function y(ae){return qo(ae,p)}if(0<Ai.length){qo(Ai[0],p);for(var C=1;C<Ai.length;C++){var V=Ai[C];V.blockedOn===p&&(V.blockedOn=null)}}for(na!==null&&qo(na,p),Aa!==null&&qo(Aa,p),Ta!==null&&qo(Ta,p),Wa.forEach(y),Co.forEach(y),C=0;C<lo.length;C++)V=lo[C],V.blockedOn===p&&(V.blockedOn=null);for(;0<lo.length&&(C=lo[0],C.blockedOn===null);)Ss(C),C.blockedOn===null&&lo.shift()}var Hl=K.ReactCurrentBatchConfig,sf=!0;function Bf(p,y,C,V){var ae=qe,Ie=Hl.transition;Hl.transition=null;try{qe=1,ac(p,y,C,V)}finally{qe=ae,Hl.transition=Ie}}function zf(p,y,C,V){var ae=qe,Ie=Hl.transition;Hl.transition=null;try{qe=4,ac(p,y,C,V)}finally{qe=ae,Hl.transition=Ie}}function ac(p,y,C,V){if(sf){var ae=O(p,y,C,V);if(ae===null)li(p,y,V,dc,C),gs(p,V);else if(Zu(ae,p,y,C,V))V.stopPropagation();else if(gs(p,V),y&4&&-1<Vo.indexOf(p)){for(;ae!==null;){var Ie=Mo(ae);if(Ie!==null&&ge(Ie),Ie=O(p,y,C,V),Ie===null&&li(p,y,V,dc,C),Ie===ae)break;ae=Ie}ae!==null&&V.stopPropagation()}else li(p,y,V,null,C)}}var dc=null;function O(p,y,C,V){if(dc=null,p=Pi(V),p=tu(p),p!==null)if(y=Wi(p),y===null)p=null;else if(C=y.tag,C===13){if(p=xo(y),p!==null)return p;p=null}else if(C===3){if(y.stateNode.current.memoizedState.isDehydrated)return y.tag===3?y.stateNode.containerInfo:null;p=null}else y!==p&&(p=null);return dc=p,null}function q(p){switch(p){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(ui()){case jn:return 1;case rr:return 4;case ps:case er:return 16;case $s:return 536870912;default:return 16}default:return 16}}var Le=null,ve=null,ct=null;function Lt(){if(ct)return ct;var p,y=ve,C=y.length,V,ae="value"in Le?Le.value:Le.textContent,Ie=ae.length;for(p=0;p<C&&y[p]===ae[p];p++);var ut=C-p;for(V=1;V<=ut&&y[C-V]===ae[Ie-V];V++);return ct=ae.slice(p,1<V?1-V:void 0)}function hr(p){var y=p.keyCode;return"charCode"in p?(p=p.charCode,p===0&&y===13&&(p=13)):p=y,p===10&&(p=13),32<=p||p===13?p:0}function lr(){return!0}function Gr(){return!1}function ii(p){function y(C,V,ae,Ie,ut){this._reactName=C,this._targetInst=ae,this.type=V,this.nativeEvent=Ie,this.target=ut,this.currentTarget=null;for(var zt in p)p.hasOwnProperty(zt)&&(C=p[zt],this[zt]=C?C(Ie):Ie[zt]);return this.isDefaultPrevented=(Ie.defaultPrevented!=null?Ie.defaultPrevented:Ie.returnValue===!1)?lr:Gr,this.isPropagationStopped=Gr,this}return tt(y.prototype,{preventDefault:function(){this.defaultPrevented=!0;var C=this.nativeEvent;C&&(C.preventDefault?C.preventDefault():typeof C.returnValue!="unknown"&&(C.returnValue=!1),this.isDefaultPrevented=lr)},stopPropagation:function(){var C=this.nativeEvent;C&&(C.stopPropagation?C.stopPropagation():typeof C.cancelBubble!="unknown"&&(C.cancelBubble=!0),this.isPropagationStopped=lr)},persist:function(){},isPersistent:lr}),y}var fi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(p){return p.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Na=ii(fi),vo=tt({},fi,{view:0,detail:0}),Va=ii(vo),ha,$o,ms,To=tt({},vo,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ju,button:0,buttons:0,relatedTarget:function(p){return p.relatedTarget===void 0?p.fromElement===p.srcElement?p.toElement:p.fromElement:p.relatedTarget},movementX:function(p){return"movementX"in p?p.movementX:(p!==ms&&(ms&&p.type==="mousemove"?(ha=p.screenX-ms.screenX,$o=p.screenY-ms.screenY):$o=ha=0,ms=p),ha)},movementY:function(p){return"movementY"in p?p.movementY:$o}}),Qs=ii(To),Wl=tt({},To,{dataTransfer:0}),Pc=ii(Wl),Js=tt({},vo,{relatedTarget:0}),Tl=ii(Js),bf=tt({},fi,{animationName:0,elapsedTime:0,pseudoElement:0}),Zc=ii(bf),vc=tt({},fi,{clipboardData:function(p){return"clipboardData"in p?p.clipboardData:window.clipboardData}}),jc=ii(vc),bu=tt({},fi,{data:0}),cp=ii(bu),Yf={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Ju={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Vc={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Gc(p){var y=this.nativeEvent;return y.getModifierState?y.getModifierState(p):(p=Vc[p])?!!y[p]:!1}function ju(){return Gc}var fp=tt({},vo,{key:function(p){if(p.key){var y=Yf[p.key]||p.key;if(y!=="Unidentified")return y}return p.type==="keypress"?(p=hr(p),p===13?"Enter":String.fromCharCode(p)):p.type==="keydown"||p.type==="keyup"?Ju[p.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ju,charCode:function(p){return p.type==="keypress"?hr(p):0},keyCode:function(p){return p.type==="keydown"||p.type==="keyup"?p.keyCode:0},which:function(p){return p.type==="keypress"?hr(p):p.type==="keydown"||p.type==="keyup"?p.keyCode:0}}),$l=ii(fp),Rs=tt({},To,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ml=ii(Rs),Ef=tt({},vo,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ju}),Hc=ii(Ef),Xl=tt({},fi,{propertyName:0,elapsedTime:0,pseudoElement:0}),ah=ii(Xl),Kf=tt({},To,{deltaX:function(p){return"deltaX"in p?p.deltaX:"wheelDeltaX"in p?-p.wheelDeltaX:0},deltaY:function(p){return"deltaY"in p?p.deltaY:"wheelDeltaY"in p?-p.wheelDeltaY:"wheelDelta"in p?-p.wheelDelta:0},deltaZ:0,deltaMode:0}),Ll=ii(Kf),Wc=[9,13,27,32],uu=B&&"CompositionEvent"in window,hs=null;B&&"documentMode"in document&&(hs=document.documentMode);var kc=B&&"TextEvent"in window&&!hs,oc=B&&(!uu||hs&&8<hs&&11>=hs),uf=String.fromCharCode(32),mc=!1;function ds(p,y){switch(p){case"keyup":return Wc.indexOf(y.keyCode)!==-1;case"keydown":return y.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function sc(p){return p=p.detail,typeof p=="object"&&"data"in p?p.data:null}var vl=!1;function pp(p,y){switch(p){case"compositionend":return sc(y);case"keypress":return y.which!==32?null:(mc=!0,uf);case"textInput":return p=y.data,p===uf&&mc?null:p;default:return null}}function Lc(p,y){if(vl)return p==="compositionend"||!uu&&ds(p,y)?(p=Lt(),ct=ve=Le=null,vl=!1,p):null;switch(p){case"paste":return null;case"keypress":if(!(y.ctrlKey||y.altKey||y.metaKey)||y.ctrlKey&&y.altKey){if(y.char&&1<y.char.length)return y.char;if(y.which)return String.fromCharCode(y.which)}return null;case"compositionend":return oc&&y.locale!=="ko"?null:y.data;default:return null}}var uc={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Qf(p){var y=p&&p.nodeName&&p.nodeName.toLowerCase();return y==="input"?!!uc[p.type]:y==="textarea"}function Yl(p,y,C,V){gt(V),y=Ka(y,"onChange"),0<y.length&&(C=new Na("onChange","change",null,C,V),p.push({event:C,listeners:y}))}var Dc=null,Jf=null;function gc(p){Vf(p,0)}function $c(p){var y=rp(p);if(Qn(y))return p}function Fc(p,y){if(p==="change")return y}var Kl=!1;if(B){var Ql;if(B){var Uf="oninput"in document;if(!Uf){var qf=document.createElement("div");qf.setAttribute("oninput","return;"),Uf=typeof qf.oninput=="function"}Ql=Uf}else Ql=!1;Kl=Ql&&(!document.documentMode||9<document.documentMode)}function ep(){Dc&&(Dc.detachEvent("onpropertychange",qu),Jf=Dc=null)}function qu(p){if(p.propertyName==="value"&&$c(Jf)){var y=[];Yl(y,Jf,p,Pi(p)),bt(gc,y)}}function Zf(p,y,C){p==="focusin"?(ep(),Dc=y,Jf=C,Dc.attachEvent("onpropertychange",qu)):p==="focusout"&&ep()}function vs(p){if(p==="selectionchange"||p==="keyup"||p==="keydown")return $c(Jf)}function Kr(p,y){if(p==="click")return $c(y)}function vi(p,y){if(p==="input"||p==="change")return $c(y)}function ei(p,y){return p===y&&(p!==0||1/p===1/y)||p!==p&&y!==y}var xi=typeof Object.is=="function"?Object.is:ei;function da(p,y){if(xi(p,y))return!0;if(typeof p!="object"||p===null||typeof y!="object"||y===null)return!1;var C=Object.keys(p),V=Object.keys(y);if(C.length!==V.length)return!1;for(V=0;V<C.length;V++){var ae=C[V];if(!z.call(y,ae)||!xi(p[ae],y[ae]))return!1}return!0}function uo(p){for(;p&&p.firstChild;)p=p.firstChild;return p}function Ua(p,y){var C=uo(p);p=0;for(var V;C;){if(C.nodeType===3){if(V=p+C.textContent.length,p<=y&&V>=y)return{node:C,offset:y-p};p=V}e:{for(;C;){if(C.nextSibling){C=C.nextSibling;break e}C=C.parentNode}C=void 0}C=uo(C)}}function ns(p,y){return p&&y?p===y?!0:p&&p.nodeType===3?!1:y&&y.nodeType===3?ns(p,y.parentNode):"contains"in p?p.contains(y):p.compareDocumentPosition?!!(p.compareDocumentPosition(y)&16):!1:!1}function Vu(){for(var p=window,y=mn();y instanceof p.HTMLIFrameElement;){try{var C=typeof y.contentWindow.location.href=="string"}catch(V){C=!1}if(C)p=y.contentWindow;else break;y=mn(p.document)}return y}function lc(p){var y=p&&p.nodeName&&p.nodeName.toLowerCase();return y&&(y==="input"&&(p.type==="text"||p.type==="search"||p.type==="tel"||p.type==="url"||p.type==="password")||y==="textarea"||p.contentEditable==="true")}function yc(p){var y=Vu(),C=p.focusedElem,V=p.selectionRange;if(y!==C&&C&&C.ownerDocument&&ns(C.ownerDocument.documentElement,C)){if(V!==null&&lc(C)){if(y=V.start,p=V.end,p===void 0&&(p=y),"selectionStart"in C)C.selectionStart=y,C.selectionEnd=Math.min(p,C.value.length);else if(p=(y=C.ownerDocument||document)&&y.defaultView||window,p.getSelection){p=p.getSelection();var ae=C.textContent.length,Ie=Math.min(V.start,ae);V=V.end===void 0?Ie:Math.min(V.end,ae),!p.extend&&Ie>V&&(ae=V,V=Ie,Ie=ae),ae=Ua(C,Ie);var ut=Ua(C,V);ae&&ut&&(p.rangeCount!==1||p.anchorNode!==ae.node||p.anchorOffset!==ae.offset||p.focusNode!==ut.node||p.focusOffset!==ut.offset)&&(y=y.createRange(),y.setStart(ae.node,ae.offset),p.removeAllRanges(),Ie>V?(p.addRange(y),p.extend(ut.node,ut.offset)):(y.setEnd(ut.node,ut.offset),p.addRange(y)))}}for(y=[],p=C;p=p.parentNode;)p.nodeType===1&&y.push({element:p,left:p.scrollLeft,top:p.scrollTop});for(typeof C.focus=="function"&&C.focus(),C=0;C<y.length;C++)p=y[C],p.element.scrollLeft=p.left,p.element.scrollTop=p.top}}var tp=B&&"documentMode"in document&&11>=document.documentMode,_c=null,Jl=null,ml=null,lu=!1;function _s(p,y,C){var V=C.window===C?C.document:C.nodeType===9?C:C.ownerDocument;lu||_c==null||_c!==mn(V)||(V=_c,"selectionStart"in V&&lc(V)?V={start:V.selectionStart,end:V.selectionEnd}:(V=(V.ownerDocument&&V.ownerDocument.defaultView||window).getSelection(),V={anchorNode:V.anchorNode,anchorOffset:V.anchorOffset,focusNode:V.focusNode,focusOffset:V.focusOffset}),ml&&da(ml,V)||(ml=V,V=Ka(Jl,"onSelect"),0<V.length&&(y=new Na("onSelect","select",null,y,C),p.push({event:y,listeners:V}),y.target=_c)))}function jf(p,y){var C={};return C[p.toLowerCase()]=y.toLowerCase(),C["Webkit"+p]="webkit"+y,C["Moz"+p]="moz"+y,C}var qs={animationend:jf("Animation","AnimationEnd"),animationiteration:jf("Animation","AnimationIteration"),animationstart:jf("Animation","AnimationStart"),transitionend:jf("Transition","TransitionEnd")},ji={},Gs={};B&&(Gs=document.createElement("div").style,"AnimationEvent"in window||(delete qs.animationend.animation,delete qs.animationiteration.animation,delete qs.animationstart.animation),"TransitionEvent"in window||delete qs.transitionend.transition);function ql(p){if(ji[p])return ji[p];if(!qs[p])return p;var y=qs[p],C;for(C in y)if(y.hasOwnProperty(C)&&C in Gs)return ji[p]=y[C];return p}var Xc=ql("animationend"),Il=ql("animationiteration"),ku=ql("animationstart"),ec=ql("transitionend"),ia=new Map,lf="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function xc(p,y){ia.set(p,y),D(y,[p])}for(var cc=0;cc<lf.length;cc++){var Ps=lf[cc],ol=Ps.toLowerCase(),Yc=Ps[0].toUpperCase()+Ps.slice(1);xc(ol,"on"+Yc)}xc(Xc,"onAnimationEnd"),xc(Il,"onAnimationIteration"),xc(ku,"onAnimationStart"),xc("dblclick","onDoubleClick"),xc("focusin","onFocus"),xc("focusout","onBlur"),xc(ec,"onTransitionEnd"),k("onMouseEnter",["mouseout","mouseover"]),k("onMouseLeave",["mouseout","mouseover"]),k("onPointerEnter",["pointerout","pointerover"]),k("onPointerLeave",["pointerout","pointerover"]),D("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),D("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),D("onBeforeInput",["compositionend","keypress","textInput","paste"]),D("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),D("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),D("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Eu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),el=new Set("cancel close invalid load scroll toggle".split(" ").concat(Eu));function bc(p,y,C){var V=p.type||"unknown-event";p.currentTarget=C,Zi(V,y,void 0,p),p.currentTarget=null}function Vf(p,y){y=(y&4)!==0;for(var C=0;C<p.length;C++){var V=p[C],ae=V.event;V=V.listeners;e:{var Ie=void 0;if(y)for(var ut=V.length-1;0<=ut;ut--){var zt=V[ut],wr=zt.instance,fn=zt.currentTarget;if(zt=zt.listener,wr!==Ie&&ae.isPropagationStopped())break e;bc(ae,zt,fn),Ie=wr}else for(ut=0;ut<V.length;ut++){if(zt=V[ut],wr=zt.instance,fn=zt.currentTarget,zt=zt.listener,wr!==Ie&&ae.isPropagationStopped())break e;bc(ae,zt,fn),Ie=wr}}}if(ta)throw p=fa,ta=!1,fa=null,p}function qr(p,y){var C=y[Rt];C===void 0&&(C=y[Rt]=new Set);var V=p+"__bubble";C.has(V)||(Ri(y,p,2,!1),C.add(V))}function ri(p,y,C){var V=0;y&&(V|=4),Ri(C,p,V,y)}var Kn="_reactListening"+Math.random().toString(36).slice(2);function Vn(p){if(!p[Kn]){p[Kn]=!0,R.forEach(function(C){C!=="selectionchange"&&(el.has(C)||ri(C,!1,p),ri(C,!0,p))});var y=p.nodeType===9?p:p.ownerDocument;y===null||y[Kn]||(y[Kn]=!0,ri("selectionchange",!1,y))}}function Ri(p,y,C,V){switch(q(y)){case 1:var ae=Bf;break;case 4:ae=zf;break;default:ae=ac}C=ae.bind(null,y,C,p),ae=void 0,!zr||y!=="touchstart"&&y!=="touchmove"&&y!=="wheel"||(ae=!0),V?ae!==void 0?p.addEventListener(y,C,{capture:!0,passive:ae}):p.addEventListener(y,C,!0):ae!==void 0?p.addEventListener(y,C,{passive:ae}):p.addEventListener(y,C,!1)}function li(p,y,C,V,ae){var Ie=V;if((y&1)===0&&(y&2)===0&&V!==null)e:for(;;){if(V===null)return;var ut=V.tag;if(ut===3||ut===4){var zt=V.stateNode.containerInfo;if(zt===ae||zt.nodeType===8&&zt.parentNode===ae)break;if(ut===4)for(ut=V.return;ut!==null;){var wr=ut.tag;if((wr===3||wr===4)&&(wr=ut.stateNode.containerInfo,wr===ae||wr.nodeType===8&&wr.parentNode===ae))return;ut=ut.return}for(;zt!==null;){if(ut=tu(zt),ut===null)return;if(wr=ut.tag,wr===5||wr===6){V=Ie=ut;continue e}zt=zt.parentNode}}V=V.return}bt(function(){var fn=Ie,pi=Pi(C),$n=[];e:{var hi=ia.get(p);if(hi!==void 0){var ca=Na,Ra=p;switch(p){case"keypress":if(hr(C)===0)break e;case"keydown":case"keyup":ca=$l;break;case"focusin":Ra="focus",ca=Tl;break;case"focusout":Ra="blur",ca=Tl;break;case"beforeblur":case"afterblur":ca=Tl;break;case"click":if(C.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ca=Qs;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ca=Pc;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ca=Hc;break;case Xc:case Il:case ku:ca=Zc;break;case ec:ca=ah;break;case"scroll":ca=Va;break;case"wheel":ca=Ll;break;case"copy":case"cut":case"paste":ca=jc;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ca=Ml}var Da=(y&4)!==0,os=!Da&&p==="scroll",gn=Da?hi!==null?hi+"Capture":null:hi;Da=[];for(var Qr=fn,In;Qr!==null;){In=Qr;var ra=In.stateNode;if(In.tag===5&&ra!==null&&(In=ra,gn!==null&&(ra=Ft(Qr,gn),ra!=null&&Da.push(ga(Qr,ra,In)))),os)break;Qr=Qr.return}0<Da.length&&(hi=new ca(hi,Ra,null,C,pi),$n.push({event:hi,listeners:Da}))}}if((y&7)===0){e:{if(hi=p==="mouseover"||p==="pointerover",ca=p==="mouseout"||p==="pointerout",hi&&C!==Ui&&(Ra=C.relatedTarget||C.fromElement)&&(tu(Ra)||Ra[eu]))break e;if((ca||hi)&&(hi=pi.window===pi?pi:(hi=pi.ownerDocument)?hi.defaultView||hi.parentWindow:window,ca?(Ra=C.relatedTarget||C.toElement,ca=fn,Ra=Ra?tu(Ra):null,Ra!==null&&(os=Wi(Ra),Ra!==os||Ra.tag!==5&&Ra.tag!==6)&&(Ra=null)):(ca=null,Ra=fn),ca!==Ra)){if(Da=Qs,ra="onMouseLeave",gn="onMouseEnter",Qr="mouse",(p==="pointerout"||p==="pointerover")&&(Da=Ml,ra="onPointerLeave",gn="onPointerEnter",Qr="pointer"),os=ca==null?hi:rp(ca),In=Ra==null?hi:rp(Ra),hi=new Da(ra,Qr+"leave",ca,C,pi),hi.target=os,hi.relatedTarget=In,ra=null,tu(pi)===fn&&(Da=new Da(gn,Qr+"enter",Ra,C,pi),Da.target=In,Da.relatedTarget=os,ra=Da),os=ra,ca&&Ra)t:{for(Da=ca,gn=Ra,Qr=0,In=Da;In;In=Ma(In))Qr++;for(In=0,ra=gn;ra;ra=Ma(ra))In++;for(;0<Qr-In;)Da=Ma(Da),Qr--;for(;0<In-Qr;)gn=Ma(gn),In--;for(;Qr--;){if(Da===gn||gn!==null&&Da===gn.alternate)break t;Da=Ma(Da),gn=Ma(gn)}Da=null}else Da=null;ca!==null&&Bo($n,hi,ca,Da,!1),Ra!==null&&os!==null&&Bo($n,os,Ra,Da,!0)}}e:{if(hi=fn?rp(fn):window,ca=hi.nodeName&&hi.nodeName.toLowerCase(),ca==="select"||ca==="input"&&hi.type==="file")var Ba=Fc;else if(Qf(hi))if(Kl)Ba=vi;else{Ba=vs;var ho=Zf}else(ca=hi.nodeName)&&ca.toLowerCase()==="input"&&(hi.type==="checkbox"||hi.type==="radio")&&(Ba=Kr);if(Ba&&(Ba=Ba(p,fn))){Yl($n,Ba,C,pi);break e}ho&&ho(p,hi,fn),p==="focusout"&&(ho=hi._wrapperState)&&ho.controlled&&hi.type==="number"&&me(hi,"number",hi.value)}switch(ho=fn?rp(fn):window,p){case"focusin":(Qf(ho)||ho.contentEditable==="true")&&(_c=ho,Jl=fn,ml=null);break;case"focusout":ml=Jl=_c=null;break;case"mousedown":lu=!0;break;case"contextmenu":case"mouseup":case"dragend":lu=!1,_s($n,C,pi);break;case"selectionchange":if(tp)break;case"keydown":case"keyup":_s($n,C,pi)}var ro;if(uu)e:{switch(p){case"compositionstart":var go="onCompositionStart";break e;case"compositionend":go="onCompositionEnd";break e;case"compositionupdate":go="onCompositionUpdate";break e}go=void 0}else vl?ds(p,C)&&(go="onCompositionEnd"):p==="keydown"&&C.keyCode===229&&(go="onCompositionStart");go&&(oc&&C.locale!=="ko"&&(vl||go!=="onCompositionStart"?go==="onCompositionEnd"&&vl&&(ro=Lt()):(Le=pi,ve="value"in Le?Le.value:Le.textContent,vl=!0)),ho=Ka(fn,go),0<ho.length&&(go=new cp(go,p,null,C,pi),$n.push({event:go,listeners:ho}),ro?go.data=ro:(ro=sc(C),ro!==null&&(go.data=ro)))),(ro=kc?pp(p,C):Lc(p,C))&&(fn=Ka(fn,"onBeforeInput"),0<fn.length&&(pi=new cp("onBeforeInput","beforeinput",null,C,pi),$n.push({event:pi,listeners:fn}),pi.data=ro))}Vf($n,y)})}function ga(p,y,C){return{instance:p,listener:y,currentTarget:C}}function Ka(p,y){for(var C=y+"Capture",V=[];p!==null;){var ae=p,Ie=ae.stateNode;ae.tag===5&&Ie!==null&&(ae=Ie,Ie=Ft(p,C),Ie!=null&&V.unshift(ga(p,Ie,ae)),Ie=Ft(p,y),Ie!=null&&V.push(ga(p,Ie,ae))),p=p.return}return V}function Ma(p){if(p===null)return null;do p=p.return;while(p&&p.tag!==5);return p||null}function Bo(p,y,C,V,ae){for(var Ie=y._reactName,ut=[];C!==null&&C!==V;){var zt=C,wr=zt.alternate,fn=zt.stateNode;if(wr!==null&&wr===V)break;zt.tag===5&&fn!==null&&(zt=fn,ae?(wr=Ft(C,Ie),wr!=null&&ut.unshift(ga(C,wr,zt))):ae||(wr=Ft(C,Ie),wr!=null&&ut.push(ga(C,wr,zt)))),C=C.return}ut.length!==0&&p.push({event:y,listeners:ut})}var As=/\r\n?/g,Su=/\u0000|\uFFFD/g;function cu(p){return(typeof p=="string"?p:""+p).replace(As,`
`).replace(Su,"")}function tl(p,y,C){if(y=cu(y),cu(p)!==y&&C)throw Error(l(425))}function Pa(){}var la=null,sl=null;function us(p,y){return p==="textarea"||p==="noscript"||typeof y.children=="string"||typeof y.children=="number"||typeof y.dangerouslySetInnerHTML=="object"&&y.dangerouslySetInnerHTML!==null&&y.dangerouslySetInnerHTML.__html!=null}var wu=typeof setTimeout=="function"?setTimeout:void 0,Zs=typeof clearTimeout=="function"?clearTimeout:void 0,ul=typeof Promise=="function"?Promise:void 0,Ec=typeof queueMicrotask=="function"?queueMicrotask:typeof ul!="undefined"?function(p){return ul.resolve(null).then(p).catch(cf)}:wu;function cf(p){setTimeout(function(){throw p})}function ws(p,y){var C=y,V=0;do{var ae=C.nextSibling;if(p.removeChild(C),ae&&ae.nodeType===8)if(C=ae.data,C==="/$"){if(V===0){p.removeChild(ae),Rc(y);return}V--}else C!=="$"&&C!=="$?"&&C!=="$!"||V++;C=ae}while(C);Rc(y)}function Qo(p){for(;p!=null;p=p.nextSibling){var y=p.nodeType;if(y===1||y===3)break;if(y===8){if(y=p.data,y==="$"||y==="$!"||y==="$?")break;if(y==="/$")return null}}return p}function ff(p){p=p.previousSibling;for(var y=0;p;){if(p.nodeType===8){var C=p.data;if(C==="$"||C==="$!"||C==="$?"){if(y===0)return p;y--}else C==="/$"&&y++}p=p.previousSibling}return null}var Du=Math.random().toString(36).slice(2),du="__reactFiber$"+Du,ll="__reactProps$"+Du,eu="__reactContainer$"+Du,Rt="__reactEvents$"+Du,mo="__reactListeners$"+Du,xs="__reactHandles$"+Du;function tu(p){var y=p[du];if(y)return y;for(var C=p.parentNode;C;){if(y=C[eu]||C[du]){if(C=y.alternate,y.child!==null||C!==null&&C.child!==null)for(p=ff(p);p!==null;){if(C=p[du])return C;p=ff(p)}return y}p=C,C=p.parentNode}return null}function Mo(p){return p=p[du]||p[eu],!p||p.tag!==5&&p.tag!==6&&p.tag!==13&&p.tag!==3?null:p}function rp(p){if(p.tag===5||p.tag===6)return p.stateNode;throw Error(l(33))}function pf(p){return p[ll]||null}var np=[],cl=-1;function Dl(p){return{current:p}}function Cs(p){0>cl||(p.current=np[cl],np[cl]=null,cl--)}function fu(p,y){cl++,np[cl]=p.current,p.current=y}var Zl={},Mu=Dl(Zl),Fu=Dl(!1),Nc=Zl;function hf(p,y){var C=p.type.contextTypes;if(!C)return Zl;var V=p.stateNode;if(V&&V.__reactInternalMemoizedUnmaskedChildContext===y)return V.__reactInternalMemoizedMaskedChildContext;var ae={},Ie;for(Ie in C)ae[Ie]=y[Ie];return V&&(p=p.stateNode,p.__reactInternalMemoizedUnmaskedChildContext=y,p.__reactInternalMemoizedMaskedChildContext=ae),ae}function Ol(p){return p=p.childContextTypes,p!=null}function d(){Cs(Fu),Cs(Mu)}function _(p,y,C){if(Mu.current!==Zl)throw Error(l(168));fu(Mu,y),fu(Fu,C)}function m(p,y,C){var V=p.stateNode;if(y=y.childContextTypes,typeof V.getChildContext!="function")return C;V=V.getChildContext();for(var ae in V)if(!(ae in y))throw Error(l(108,sn(p)||"Unknown",ae));return tt({},C,V)}function S(p){return p=(p=p.stateNode)&&p.__reactInternalMemoizedMergedChildContext||Zl,Nc=Mu.current,fu(Mu,p),fu(Fu,Fu.current),!0}function N(p,y,C){var V=p.stateNode;if(!V)throw Error(l(169));C?(p=m(p,y,Nc),V.__reactInternalMemoizedMergedChildContext=p,Cs(Fu),Cs(Mu),fu(Mu,p)):Cs(Fu),fu(Fu,C)}var X=null,ee=!1,Ae=!1;function Ze(p){X===null?X=[p]:X.push(p)}function nt(p){ee=!0,Ze(p)}function Ct(){if(!Ae&&X!==null){Ae=!0;var p=0,y=qe;try{var C=X;for(qe=1;p<C.length;p++){var V=C[p];do V=V(!0);while(V!==null)}X=null,ee=!1}catch(ae){throw X!==null&&(X=X.slice(p+1)),Fo(jn,Ct),ae}finally{qe=y,Ae=!1}}return null}var Tt=[],Pt=0,tr=null,or=0,gr=[],Yt=0,br=null,Lr=1,pn="";function zn(p,y){Tt[Pt++]=or,Tt[Pt++]=tr,tr=p,or=y}function Nn(p,y,C){gr[Yt++]=Lr,gr[Yt++]=pn,gr[Yt++]=br,br=p;var V=Lr;p=pn;var ae=32-bo(V)-1;V&=~(1<<ae),C+=1;var Ie=32-bo(y)+ae;if(30<Ie){var ut=ae-ae%5;Ie=(V&(1<<ut)-1).toString(32),V>>=ut,ae-=ut,Lr=1<<32-bo(y)+ae|C<<ae|V,pn=Ie+p}else Lr=1<<Ie|C<<ae|V,pn=p}function Xn(p){p.return!==null&&(zn(p,1),Nn(p,1,0))}function yi(p){for(;p===tr;)tr=Tt[--Pt],Tt[Pt]=null,or=Tt[--Pt],Tt[Pt]=null;for(;p===br;)br=gr[--Yt],gr[Yt]=null,pn=gr[--Yt],gr[Yt]=null,Lr=gr[--Yt],gr[Yt]=null}var Li=null,Ei=null,Vi=!1,Ea=null;function Qa(p,y){var C=Tc(5,null,null,0);C.elementType="DELETED",C.stateNode=y,C.return=p,y=p.deletions,y===null?(p.deletions=[C],p.flags|=16):y.push(C)}function Ga(p,y){switch(p.tag){case 5:var C=p.type;return y=y.nodeType!==1||C.toLowerCase()!==y.nodeName.toLowerCase()?null:y,y!==null?(p.stateNode=y,Li=p,Ei=Qo(y.firstChild),!0):!1;case 6:return y=p.pendingProps===""||y.nodeType!==3?null:y,y!==null?(p.stateNode=y,Li=p,Ei=null,!0):!1;case 13:return y=y.nodeType!==8?null:y,y!==null?(C=br!==null?{id:Lr,overflow:pn}:null,p.memoizedState={dehydrated:y,treeContext:C,retryLane:1073741824},C=Tc(18,null,null,0),C.stateNode=y,C.return=p,p.child=C,Li=p,Ei=null,!0):!1;default:return!1}}function io(p){return(p.mode&1)!==0&&(p.flags&128)===0}function ya(p){if(Vi){var y=Ei;if(y){var C=y;if(!Ga(p,y)){if(io(p))throw Error(l(418));y=Qo(C.nextSibling);var V=Li;y&&Ga(p,y)?Qa(V,C):(p.flags=p.flags&-4097|2,Vi=!1,Li=p)}}else{if(io(p))throw Error(l(418));p.flags=p.flags&-4097|2,Vi=!1,Li=p}}}function yo(p){for(p=p.return;p!==null&&p.tag!==5&&p.tag!==3&&p.tag!==13;)p=p.return;Li=p}function _o(p){if(p!==Li)return!1;if(!Vi)return yo(p),Vi=!0,!1;var y;if((y=p.tag!==3)&&!(y=p.tag!==5)&&(y=p.type,y=y!=="head"&&y!=="body"&&!us(p.type,p.memoizedProps)),y&&(y=Ei)){if(io(p))throw po(),Error(l(418));for(;y;)Qa(p,y),y=Qo(y.nextSibling)}if(yo(p),p.tag===13){if(p=p.memoizedState,p=p!==null?p.dehydrated:null,!p)throw Error(l(317));e:{for(p=p.nextSibling,y=0;p;){if(p.nodeType===8){var C=p.data;if(C==="/$"){if(y===0){Ei=Qo(p.nextSibling);break e}y--}else C!=="$"&&C!=="$!"&&C!=="$?"||y++}p=p.nextSibling}Ei=null}}else Ei=Li?Qo(p.stateNode.nextSibling):null;return!0}function po(){for(var p=Ei;p;)p=Qo(p.nextSibling)}function Ha(){Ei=Li=null,Vi=!1}function Ro(p){Ea===null?Ea=[p]:Ea.push(p)}var eo=K.ReactCurrentBatchConfig;function Ia(p,y){if(p&&p.defaultProps){y=tt({},y),p=p.defaultProps;for(var C in p)y[C]===void 0&&(y[C]=p[C]);return y}return y}var Gu=Dl(null),co=null,es=null,ru=null;function pu(){ru=es=co=null}function Ts(p){var y=Gu.current;Cs(Gu),p._currentValue=y}function rl(p,y,C){for(;p!==null;){var V=p.alternate;if((p.childLanes&y)!==y?(p.childLanes|=y,V!==null&&(V.childLanes|=y)):V!==null&&(V.childLanes&y)!==y&&(V.childLanes|=y),p===C)break;p=p.return}}function Nu(p,y){co=p,ru=es=null,p=p.dependencies,p!==null&&p.firstContext!==null&&((p.lanes&y)!==0&&(Ot=!0),p.firstContext=null)}function zo(p){var y=p._currentValue;if(ru!==p)if(p={context:p,memoizedValue:y,next:null},es===null){if(co===null)throw Error(l(308));es=p,co.dependencies={lanes:0,firstContext:p}}else es=es.next=p;return y}var An=null;function vu(p){An===null?An=[p]:An.push(p)}function Nt(p,y,C,V){var ae=y.interleaved;return ae===null?(C.next=C,vu(y)):(C.next=ae.next,ae.next=C),y.interleaved=C,gl(p,V)}function gl(p,y){p.lanes|=y;var C=p.alternate;for(C!==null&&(C.lanes|=y),C=p,p=p.return;p!==null;)p.childLanes|=y,C=p.alternate,C!==null&&(C.childLanes|=y),C=p,p=p.return;return C.tag===3?C.stateNode:null}var Xu=!1;function Sf(p){p.updateQueue={baseState:p.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function ip(p,y){p=p.updateQueue,y.updateQueue===p&&(y.updateQueue={baseState:p.baseState,firstBaseUpdate:p.firstBaseUpdate,lastBaseUpdate:p.lastBaseUpdate,shared:p.shared,effects:p.effects})}function Kc(p,y){return{eventTime:p,lane:y,tag:0,payload:null,callback:null,next:null}}function fl(p,y,C){var V=p.updateQueue;if(V===null)return null;if(V=V.shared,(Io&2)!==0){var ae=V.pending;return ae===null?y.next=y:(y.next=ae.next,ae.next=y),V.pending=y,gl(p,C)}return ae=V.interleaved,ae===null?(y.next=y,vu(V)):(y.next=ae.next,ae.next=y),V.interleaved=y,gl(p,C)}function Qc(p,y,C){if(y=y.updateQueue,y!==null&&(y=y.shared,(C&4194240)!==0)){var V=y.lanes;V&=p.pendingLanes,C|=V,y.lanes=C,$u(p,C)}}function Sc(p,y){var C=p.updateQueue,V=p.alternate;if(V!==null&&(V=V.updateQueue,C===V)){var ae=null,Ie=null;if(C=C.firstBaseUpdate,C!==null){do{var ut={eventTime:C.eventTime,lane:C.lane,tag:C.tag,payload:C.payload,callback:C.callback,next:null};Ie===null?ae=Ie=ut:Ie=Ie.next=ut,C=C.next}while(C!==null);Ie===null?ae=Ie=y:Ie=Ie.next=y}else ae=Ie=y;C={baseState:V.baseState,firstBaseUpdate:ae,lastBaseUpdate:Ie,shared:V.shared,effects:V.effects},p.updateQueue=C;return}p=C.lastBaseUpdate,p===null?C.firstBaseUpdate=y:p.next=y,C.lastBaseUpdate=y}function Lu(p,y,C,V){var ae=p.updateQueue;Xu=!1;var Ie=ae.firstBaseUpdate,ut=ae.lastBaseUpdate,zt=ae.shared.pending;if(zt!==null){ae.shared.pending=null;var wr=zt,fn=wr.next;wr.next=null,ut===null?Ie=fn:ut.next=fn,ut=wr;var pi=p.alternate;pi!==null&&(pi=pi.updateQueue,zt=pi.lastBaseUpdate,zt!==ut&&(zt===null?pi.firstBaseUpdate=fn:zt.next=fn,pi.lastBaseUpdate=wr))}if(Ie!==null){var $n=ae.baseState;ut=0,pi=fn=wr=null,zt=Ie;do{var hi=zt.lane,ca=zt.eventTime;if((V&hi)===hi){pi!==null&&(pi=pi.next={eventTime:ca,lane:0,tag:zt.tag,payload:zt.payload,callback:zt.callback,next:null});e:{var Ra=p,Da=zt;switch(hi=y,ca=C,Da.tag){case 1:if(Ra=Da.payload,typeof Ra=="function"){$n=Ra.call(ca,$n,hi);break e}$n=Ra;break e;case 3:Ra.flags=Ra.flags&-65537|128;case 0:if(Ra=Da.payload,hi=typeof Ra=="function"?Ra.call(ca,$n,hi):Ra,hi==null)break e;$n=tt({},$n,hi);break e;case 2:Xu=!0}}zt.callback!==null&&zt.lane!==0&&(p.flags|=64,hi=ae.effects,hi===null?ae.effects=[zt]:hi.push(zt))}else ca={eventTime:ca,lane:hi,tag:zt.tag,payload:zt.payload,callback:zt.callback,next:null},pi===null?(fn=pi=ca,wr=$n):pi=pi.next=ca,ut|=hi;if(zt=zt.next,zt===null){if(zt=ae.shared.pending,zt===null)break;hi=zt,zt=hi.next,hi.next=null,ae.lastBaseUpdate=hi,ae.shared.pending=null}}while(1);if(pi===null&&(wr=$n),ae.baseState=wr,ae.firstBaseUpdate=fn,ae.lastBaseUpdate=pi,y=ae.shared.interleaved,y!==null){ae=y;do ut|=ae.lane,ae=ae.next;while(ae!==y)}else Ie===null&&(ae.shared.lanes=0);Xo|=ut,p.lanes=ut,p.memoizedState=$n}}function Fl(p,y,C){if(p=y.effects,y.effects=null,p!==null)for(y=0;y<p.length;y++){var V=p[y],ae=V.callback;if(ae!==null){if(V.callback=null,V=C,typeof ae!="function")throw Error(l(191,ae));ae.call(V)}}}var fc=new w.Component().refs;function Jc(p,y,C,V){y=p.memoizedState,C=C(V,y),C=C==null?y:tt({},y,C),p.memoizedState=C,p.lanes===0&&(p.updateQueue.baseState=C)}var ts={isMounted:function(p){return(p=p._reactInternals)?Wi(p)===p:!1},enqueueSetState:function(p,y,C){p=p._reactInternals;var V=jt(),ae=rn(p),Ie=Kc(V,ae);Ie.payload=y,C!=null&&(Ie.callback=C),y=fl(p,Ie,ae),y!==null&&(jr(y,p,ae,V),Qc(y,p,ae))},enqueueReplaceState:function(p,y,C){p=p._reactInternals;var V=jt(),ae=rn(p),Ie=Kc(V,ae);Ie.tag=1,Ie.payload=y,C!=null&&(Ie.callback=C),y=fl(p,Ie,ae),y!==null&&(jr(y,p,ae,V),Qc(y,p,ae))},enqueueForceUpdate:function(p,y){p=p._reactInternals;var C=jt(),V=rn(p),ae=Kc(C,V);ae.tag=2,y!=null&&(ae.callback=y),y=fl(p,ae,V),y!==null&&(jr(y,p,V,C),Qc(y,p,V))}};function pl(p,y,C,V,ae,Ie,ut){return p=p.stateNode,typeof p.shouldComponentUpdate=="function"?p.shouldComponentUpdate(V,Ie,ut):y.prototype&&y.prototype.isPureReactComponent?!da(C,V)||!da(ae,Ie):!0}function Rl(p,y,C){var V=!1,ae=Zl,Ie=y.contextType;return typeof Ie=="object"&&Ie!==null?Ie=zo(Ie):(ae=Ol(y)?Nc:Mu.current,V=y.contextTypes,Ie=(V=V!=null)?hf(p,ae):Zl),y=new y(C,Ie),p.memoizedState=y.state!==null&&y.state!==void 0?y.state:null,y.updater=ts,p.stateNode=y,y._reactInternals=p,V&&(p=p.stateNode,p.__reactInternalMemoizedUnmaskedChildContext=ae,p.__reactInternalMemoizedMaskedChildContext=Ie),y}function qc(p,y,C,V){p=y.state,typeof y.componentWillReceiveProps=="function"&&y.componentWillReceiveProps(C,V),typeof y.UNSAFE_componentWillReceiveProps=="function"&&y.UNSAFE_componentWillReceiveProps(C,V),y.state!==p&&ts.enqueueReplaceState(y,y.state,null)}function ap(p,y,C,V){var ae=p.stateNode;ae.props=C,ae.state=p.memoizedState,ae.refs=fc,Sf(p);var Ie=y.contextType;typeof Ie=="object"&&Ie!==null?ae.context=zo(Ie):(Ie=Ol(y)?Nc:Mu.current,ae.context=hf(p,Ie)),ae.state=p.memoizedState,Ie=y.getDerivedStateFromProps,typeof Ie=="function"&&(Jc(p,y,Ie,C),ae.state=p.memoizedState),typeof y.getDerivedStateFromProps=="function"||typeof ae.getSnapshotBeforeUpdate=="function"||typeof ae.UNSAFE_componentWillMount!="function"&&typeof ae.componentWillMount!="function"||(y=ae.state,typeof ae.componentWillMount=="function"&&ae.componentWillMount(),typeof ae.UNSAFE_componentWillMount=="function"&&ae.UNSAFE_componentWillMount(),y!==ae.state&&ts.enqueueReplaceState(ae,ae.state,null),Lu(p,C,ae,V),ae.state=p.memoizedState),typeof ae.componentDidMount=="function"&&(p.flags|=4194308)}function ef(p,y,C){if(p=C.ref,p!==null&&typeof p!="function"&&typeof p!="object"){if(C._owner){if(C=C._owner,C){if(C.tag!==1)throw Error(l(309));var V=C.stateNode}if(!V)throw Error(l(147,p));var ae=V,Ie=""+p;return y!==null&&y.ref!==null&&typeof y.ref=="function"&&y.ref._stringRef===Ie?y.ref:(y=function(ut){var zt=ae.refs;zt===fc&&(zt=ae.refs={}),ut===null?delete zt[Ie]:zt[Ie]=ut},y._stringRef=Ie,y)}if(typeof p!="string")throw Error(l(284));if(!C._owner)throw Error(l(290,p))}return p}function wf(p,y){throw p=Object.prototype.toString.call(y),Error(l(31,p==="[object Object]"?"object with keys {"+Object.keys(y).join(", ")+"}":p))}function tc(p){var y=p._init;return y(p._payload)}function tf(p){function y(gn,Qr){if(p){var In=gn.deletions;In===null?(gn.deletions=[Qr],gn.flags|=16):In.push(Qr)}}function C(gn,Qr){if(!p)return null;for(;Qr!==null;)y(gn,Qr),Qr=Qr.sibling;return null}function V(gn,Qr){for(gn=new Map;Qr!==null;)Qr.key!==null?gn.set(Qr.key,Qr):gn.set(Qr.index,Qr),Qr=Qr.sibling;return gn}function ae(gn,Qr){return gn=Cp(gn,Qr),gn.index=0,gn.sibling=null,gn}function Ie(gn,Qr,In){return gn.index=In,p?(In=gn.alternate,In!==null?(In=In.index,In<Qr?(gn.flags|=2,Qr):In):(gn.flags|=2,Qr)):(gn.flags|=1048576,Qr)}function ut(gn){return p&&gn.alternate===null&&(gn.flags|=2),gn}function zt(gn,Qr,In,ra){return Qr===null||Qr.tag!==6?(Qr=a(In,gn.mode,ra),Qr.return=gn,Qr):(Qr=ae(Qr,In),Qr.return=gn,Qr)}function wr(gn,Qr,In,ra){var Ba=In.type;return Ba===Me?pi(gn,Qr,In.props.children,ra,In.key):Qr!==null&&(Qr.elementType===Ba||typeof Ba=="object"&&Ba!==null&&Ba.$$typeof===se&&tc(Ba)===Qr.type)?(ra=ae(Qr,In.props),ra.ref=ef(gn,Qr,In),ra.return=gn,ra):(ra=zl(In.type,In.key,In.props,null,gn.mode,ra),ra.ref=ef(gn,Qr,In),ra.return=gn,ra)}function fn(gn,Qr,In,ra){return Qr===null||Qr.tag!==4||Qr.stateNode.containerInfo!==In.containerInfo||Qr.stateNode.implementation!==In.implementation?(Qr=s(In,gn.mode,ra),Qr.return=gn,Qr):(Qr=ae(Qr,In.children||[]),Qr.return=gn,Qr)}function pi(gn,Qr,In,ra,Ba){return Qr===null||Qr.tag!==7?(Qr=Ff(In,gn.mode,ra,Ba),Qr.return=gn,Qr):(Qr=ae(Qr,In),Qr.return=gn,Qr)}function $n(gn,Qr,In){if(typeof Qr=="string"&&Qr!==""||typeof Qr=="number")return Qr=a(""+Qr,gn.mode,In),Qr.return=gn,Qr;if(typeof Qr=="object"&&Qr!==null){switch(Qr.$$typeof){case ke:return In=zl(Qr.type,Qr.key,Qr.props,null,gn.mode,In),In.ref=ef(gn,null,Qr),In.return=gn,In;case we:return Qr=s(Qr,gn.mode,In),Qr.return=gn,Qr;case se:var ra=Qr._init;return $n(gn,ra(Qr._payload),In)}if(ne(Qr)||Fe(Qr))return Qr=Ff(Qr,gn.mode,In,null),Qr.return=gn,Qr;wf(gn,Qr)}return null}function hi(gn,Qr,In,ra){var Ba=Qr!==null?Qr.key:null;if(typeof In=="string"&&In!==""||typeof In=="number")return Ba!==null?null:zt(gn,Qr,""+In,ra);if(typeof In=="object"&&In!==null){switch(In.$$typeof){case ke:return In.key===Ba?wr(gn,Qr,In,ra):null;case we:return In.key===Ba?fn(gn,Qr,In,ra):null;case se:return Ba=In._init,hi(gn,Qr,Ba(In._payload),ra)}if(ne(In)||Fe(In))return Ba!==null?null:pi(gn,Qr,In,ra,null);wf(gn,In)}return null}function ca(gn,Qr,In,ra,Ba){if(typeof ra=="string"&&ra!==""||typeof ra=="number")return gn=gn.get(In)||null,zt(Qr,gn,""+ra,Ba);if(typeof ra=="object"&&ra!==null){switch(ra.$$typeof){case ke:return gn=gn.get(ra.key===null?In:ra.key)||null,wr(Qr,gn,ra,Ba);case we:return gn=gn.get(ra.key===null?In:ra.key)||null,fn(Qr,gn,ra,Ba);case se:var ho=ra._init;return ca(gn,Qr,In,ho(ra._payload),Ba)}if(ne(ra)||Fe(ra))return gn=gn.get(In)||null,pi(Qr,gn,ra,Ba,null);wf(Qr,ra)}return null}function Ra(gn,Qr,In,ra){for(var Ba=null,ho=null,ro=Qr,go=Qr=0,wo=null;ro!==null&&go<In.length;go++){ro.index>go?(wo=ro,ro=null):wo=ro.sibling;var Ao=hi(gn,ro,In[go],ra);if(Ao===null){ro===null&&(ro=wo);break}p&&ro&&Ao.alternate===null&&y(gn,ro),Qr=Ie(Ao,Qr,go),ho===null?Ba=Ao:ho.sibling=Ao,ho=Ao,ro=wo}if(go===In.length)return C(gn,ro),Vi&&zn(gn,go),Ba;if(ro===null){for(;go<In.length;go++)ro=$n(gn,In[go],ra),ro!==null&&(Qr=Ie(ro,Qr,go),ho===null?Ba=ro:ho.sibling=ro,ho=ro);return Vi&&zn(gn,go),Ba}for(ro=V(gn,ro);go<In.length;go++)wo=ca(ro,gn,go,In[go],ra),wo!==null&&(p&&wo.alternate!==null&&ro.delete(wo.key===null?go:wo.key),Qr=Ie(wo,Qr,go),ho===null?Ba=wo:ho.sibling=wo,ho=wo);return p&&ro.forEach(function(Fs){return y(gn,Fs)}),Vi&&zn(gn,go),Ba}function Da(gn,Qr,In,ra){var Ba=Fe(In);if(typeof Ba!="function")throw Error(l(150));if(In=Ba.call(In),In==null)throw Error(l(151));for(var ho=Ba=null,ro=Qr,go=Qr=0,wo=null,Ao=In.next();ro!==null&&!Ao.done;go++,Ao=In.next()){ro.index>go?(wo=ro,ro=null):wo=ro.sibling;var Fs=hi(gn,ro,Ao.value,ra);if(Fs===null){ro===null&&(ro=wo);break}p&&ro&&Fs.alternate===null&&y(gn,ro),Qr=Ie(Fs,Qr,go),ho===null?Ba=Fs:ho.sibling=Fs,ho=Fs,ro=wo}if(Ao.done)return C(gn,ro),Vi&&zn(gn,go),Ba;if(ro===null){for(;!Ao.done;go++,Ao=In.next())Ao=$n(gn,Ao.value,ra),Ao!==null&&(Qr=Ie(Ao,Qr,go),ho===null?Ba=Ao:ho.sibling=Ao,ho=Ao);return Vi&&zn(gn,go),Ba}for(ro=V(gn,ro);!Ao.done;go++,Ao=In.next())Ao=ca(ro,gn,go,Ao.value,ra),Ao!==null&&(p&&Ao.alternate!==null&&ro.delete(Ao.key===null?go:Ao.key),Qr=Ie(Ao,Qr,go),ho===null?Ba=Ao:ho.sibling=Ao,ho=Ao);return p&&ro.forEach(function(Ws){return y(gn,Ws)}),Vi&&zn(gn,go),Ba}function os(gn,Qr,In,ra){if(typeof In=="object"&&In!==null&&In.type===Me&&In.key===null&&(In=In.props.children),typeof In=="object"&&In!==null){switch(In.$$typeof){case ke:e:{for(var Ba=In.key,ho=Qr;ho!==null;){if(ho.key===Ba){if(Ba=In.type,Ba===Me){if(ho.tag===7){C(gn,ho.sibling),Qr=ae(ho,In.props.children),Qr.return=gn,gn=Qr;break e}}else if(ho.elementType===Ba||typeof Ba=="object"&&Ba!==null&&Ba.$$typeof===se&&tc(Ba)===ho.type){C(gn,ho.sibling),Qr=ae(ho,In.props),Qr.ref=ef(gn,ho,In),Qr.return=gn,gn=Qr;break e}C(gn,ho);break}else y(gn,ho);ho=ho.sibling}In.type===Me?(Qr=Ff(In.props.children,gn.mode,ra,In.key),Qr.return=gn,gn=Qr):(ra=zl(In.type,In.key,In.props,null,gn.mode,ra),ra.ref=ef(gn,Qr,In),ra.return=gn,gn=ra)}return ut(gn);case we:e:{for(ho=In.key;Qr!==null;){if(Qr.key===ho)if(Qr.tag===4&&Qr.stateNode.containerInfo===In.containerInfo&&Qr.stateNode.implementation===In.implementation){C(gn,Qr.sibling),Qr=ae(Qr,In.children||[]),Qr.return=gn,gn=Qr;break e}else{C(gn,Qr);break}else y(gn,Qr);Qr=Qr.sibling}Qr=s(In,gn.mode,ra),Qr.return=gn,gn=Qr}return ut(gn);case se:return ho=In._init,os(gn,Qr,ho(In._payload),ra)}if(ne(In))return Ra(gn,Qr,In,ra);if(Fe(In))return Da(gn,Qr,In,ra);wf(gn,In)}return typeof In=="string"&&In!==""||typeof In=="number"?(In=""+In,Qr!==null&&Qr.tag===6?(C(gn,Qr.sibling),Qr=ae(Qr,In),Qr.return=gn,gn=Qr):(C(gn,Qr),Qr=a(In,gn.mode,ra),Qr.return=gn,gn=Qr),ut(gn)):C(gn,Qr)}return os}var Pl=tf(!0),rf=tf(!1),Af={},Yu=Dl(Af),mu=Dl(Af),nf=Dl(Af);function Cf(p){if(p===Af)throw Error(l(174));return p}function wp(p,y){switch(fu(nf,y),fu(mu,p),fu(Yu,Af),p=y.nodeType,p){case 9:case 11:y=(y=y.documentElement)?y.namespaceURI:lt(null,"");break;default:p=p===8?y.parentNode:y,y=p.namespaceURI||null,p=p.tagName,y=lt(y,p)}Cs(Yu),fu(Yu,y)}function Gf(){Cs(Yu),Cs(mu),Cs(nf)}function zp(p){Cf(nf.current);var y=Cf(Yu.current),C=lt(y,p.type);y!==C&&(fu(mu,p),fu(Yu,C))}function Tf(p){mu.current===p&&(Cs(Yu),Cs(mu))}var ks=Dl(0);function Mf(p){for(var y=p;y!==null;){if(y.tag===13){var C=y.memoizedState;if(C!==null&&(C=C.dehydrated,C===null||C.data==="$?"||C.data==="$!"))return y}else if(y.tag===19&&y.memoizedProps.revealOrder!==void 0){if((y.flags&128)!==0)return y}else if(y.child!==null){y.child.return=y,y=y.child;continue}if(y===p)break;for(;y.sibling===null;){if(y.return===null||y.return===p)return null;y=y.return}y.sibling.return=y.return,y=y.sibling}return null}var Yp=[];function Up(){for(var p=0;p<Yp.length;p++)Yp[p]._workInProgressVersionPrimary=null;Yp.length=0}var Jo=K.ReactCurrentDispatcher,Ap=K.ReactCurrentBatchConfig,op=0,gu=null,nl=null,il=null,hp=!1,wc=!1,Zp=0,jp=0;function rc(){throw Error(l(321))}function dp(p,y){if(y===null)return!1;for(var C=0;C<y.length&&C<p.length;C++)if(!xi(p[C],y[C]))return!1;return!0}function oh(p,y,C,V,ae,Ie){if(op=Ie,gu=y,y.memoizedState=null,y.updateQueue=null,y.lanes=0,Jo.current=p===null||p.memoizedState===null?Uh:Zh,p=C(V,ae),wc){Ie=0;do{if(wc=!1,Zp=0,25<=Ie)throw Error(l(301));Ie+=1,il=nl=null,y.updateQueue=null,Jo.current=Df,p=C(V,ae)}while(wc)}if(Jo.current=pc,y=nl!==null&&nl.next!==null,op=0,il=nl=gu=null,hp=!1,y)throw Error(l(300));return p}function Ms(){var p=Zp!==0;return Zp=0,p}function kl(){var p={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return il===null?gu.memoizedState=il=p:il=il.next=p,il}function Bc(){if(nl===null){var p=gu.alternate;p=p!==null?p.memoizedState:null}else p=nl.next;var y=il===null?gu.memoizedState:il.next;if(y!==null)il=y,nl=p;else{if(p===null)throw Error(l(310));nl=p,p={memoizedState:nl.memoizedState,baseState:nl.baseState,baseQueue:nl.baseQueue,queue:nl.queue,next:null},il===null?gu.memoizedState=il=p:il=il.next=p}return il}function vp(p,y){return typeof y=="function"?y(p):y}function Hf(p){var y=Bc(),C=y.queue;if(C===null)throw Error(l(311));C.lastRenderedReducer=p;var V=nl,ae=V.baseQueue,Ie=C.pending;if(Ie!==null){if(ae!==null){var ut=ae.next;ae.next=Ie.next,Ie.next=ut}V.baseQueue=ae=Ie,C.pending=null}if(ae!==null){Ie=ae.next,V=V.baseState;var zt=ut=null,wr=null,fn=Ie;do{var pi=fn.lane;if((op&pi)===pi)wr!==null&&(wr=wr.next={lane:0,action:fn.action,hasEagerState:fn.hasEagerState,eagerState:fn.eagerState,next:null}),V=fn.hasEagerState?fn.eagerState:p(V,fn.action);else{var $n={lane:pi,action:fn.action,hasEagerState:fn.hasEagerState,eagerState:fn.eagerState,next:null};wr===null?(zt=wr=$n,ut=V):wr=wr.next=$n,gu.lanes|=pi,Xo|=pi}fn=fn.next}while(fn!==null&&fn!==Ie);wr===null?ut=V:wr.next=zt,xi(V,y.memoizedState)||(Ot=!0),y.memoizedState=V,y.baseState=ut,y.baseQueue=wr,C.lastRenderedState=V}if(p=C.interleaved,p!==null){ae=p;do Ie=ae.lane,gu.lanes|=Ie,Xo|=Ie,ae=ae.next;while(ae!==p)}else ae===null&&(C.lanes=0);return[y.memoizedState,C.dispatch]}function mp(p){var y=Bc(),C=y.queue;if(C===null)throw Error(l(311));C.lastRenderedReducer=p;var V=C.dispatch,ae=C.pending,Ie=y.memoizedState;if(ae!==null){C.pending=null;var ut=ae=ae.next;do Ie=p(Ie,ut.action),ut=ut.next;while(ut!==ae);xi(Ie,y.memoizedState)||(Ot=!0),y.memoizedState=Ie,y.baseQueue===null&&(y.baseState=Ie),C.lastRenderedState=Ie}return[Ie,V]}function gp(){}function Vp(p,y){var C=gu,V=Bc(),ae=y(),Ie=!xi(V.memoizedState,ae);if(Ie&&(V.memoizedState=ae,Ot=!0),V=V.queue,He(af.bind(null,C,V,p),[p]),V.getSnapshot!==y||Ie||il!==null&&il.memoizedState.tag&1){if(C.flags|=2048,df(9,Of.bind(null,C,V,ae,y),void 0,null),Go===null)throw Error(l(349));(op&30)!==0||If(C,y,ae)}return ae}function If(p,y,C){p.flags|=16384,p={getSnapshot:y,value:C},y=gu.updateQueue,y===null?(y={lastEffect:null,stores:null},gu.updateQueue=y,y.stores=[p]):(C=y.stores,C===null?y.stores=[p]:C.push(p))}function Of(p,y,C,V){y.value=C,y.getSnapshot=V,sh(y)&&zc(p)}function af(p,y,C){return C(function(){sh(y)&&zc(p)})}function sh(p){var y=p.getSnapshot;p=p.value;try{var C=y();return!xi(p,C)}catch(V){return!0}}function zc(p){var y=gl(p,1);y!==null&&jr(y,p,1,-1)}function yp(p){var y=kl();return typeof p=="function"&&(p=p()),y.memoizedState=y.baseState=p,p={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:vp,lastRenderedState:p},y.queue=p,p=p.dispatch=Uc.bind(null,gu,p),[y.memoizedState,p]}function df(p,y,C,V){return p={tag:p,create:y,destroy:C,deps:V,next:null},y=gu.updateQueue,y===null?(y={lastEffect:null,stores:null},gu.updateQueue=y,y.lastEffect=p.next=p):(C=y.lastEffect,C===null?y.lastEffect=p.next=p:(V=C.next,C.next=p,p.next=V,y.lastEffect=p)),p}function _p(){return Bc().memoizedState}function Rf(p,y,C,V){var ae=kl();gu.flags|=p,ae.memoizedState=df(1|y,C,void 0,V===void 0?null:V)}function xp(p,y,C,V){var ae=Bc();V=V===void 0?null:V;var Ie=void 0;if(nl!==null){var ut=nl.memoizedState;if(Ie=ut.destroy,V!==null&&dp(V,ut.deps)){ae.memoizedState=df(y,C,Ie,V);return}}gu.flags|=p,ae.memoizedState=df(1|y,C,Ie,V)}function hl(p,y){return Rf(8390656,8,p,y)}function He(p,y){return xp(2048,8,p,y)}function Au(p,y){return xp(4,2,p,y)}function yl(p,y){return xp(4,4,p,y)}function bp(p,y){if(typeof y=="function")return p=p(),y(p),function(){y(null)};if(y!=null)return p=p(),y.current=p,function(){y.current=null}}function Kp(p,y,C){return C=C!=null?C.concat([p]):null,xp(4,4,bp.bind(null,y,p),C)}function Ku(){}function Ac(p,y){var C=Bc();y=y===void 0?null:y;var V=C.memoizedState;return V!==null&&y!==null&&dp(y,V[1])?V[0]:(C.memoizedState=[p,y],p)}function kh(p,y){var C=Bc();y=y===void 0?null:y;var V=C.memoizedState;return V!==null&&y!==null&&dp(y,V[1])?V[0]:(p=p(),C.memoizedState=[p,y],p)}function ls(p,y,C){return(op&21)===0?(p.baseState&&(p.baseState=!1,Ot=!0),p.memoizedState=C):(xi(C,y)||(C=ss(),gu.lanes|=C,Xo|=C,p.baseState=!0),y)}function uh(p,y){var C=qe;qe=C!==0&&4>C?C:4,p(!0);var V=Ap.transition;Ap.transition={};try{p(!1),y()}finally{qe=C,Ap.transition=V}}function Pf(){return Bc().memoizedState}function kf(p,y,C){var V=rn(p);if(C={lane:V,action:C,hasEagerState:!1,eagerState:null,next:null},al(p))Lf(y,C);else if(C=Nt(p,y,C,V),C!==null){var ae=jt();jr(C,p,V,ae),Wf(C,y,V)}}function Uc(p,y,C){var V=rn(p),ae={lane:V,action:C,hasEagerState:!1,eagerState:null,next:null};if(al(p))Lf(y,ae);else{var Ie=p.alternate;if(p.lanes===0&&(Ie===null||Ie.lanes===0)&&(Ie=y.lastRenderedReducer,Ie!==null))try{var ut=y.lastRenderedState,zt=Ie(ut,C);if(ae.hasEagerState=!0,ae.eagerState=zt,xi(zt,ut)){var wr=y.interleaved;wr===null?(ae.next=ae,vu(y)):(ae.next=wr.next,wr.next=ae),y.interleaved=ae;return}}catch(fn){}finally{}C=Nt(p,y,ae,V),C!==null&&(ae=jt(),jr(C,p,V,ae),Wf(C,y,V))}}function al(p){var y=p.alternate;return p===gu||y!==null&&y===gu}function Lf(p,y){wc=hp=!0;var C=p.pending;C===null?y.next=y:(y.next=C.next,C.next=y),p.pending=y}function Wf(p,y,C){if((C&4194240)!==0){var V=y.lanes;V&=p.pendingLanes,C|=V,y.lanes=C,$u(p,C)}}var pc={readContext:zo,useCallback:rc,useContext:rc,useEffect:rc,useImperativeHandle:rc,useInsertionEffect:rc,useLayoutEffect:rc,useMemo:rc,useReducer:rc,useRef:rc,useState:rc,useDebugValue:rc,useDeferredValue:rc,useTransition:rc,useMutableSource:rc,useSyncExternalStore:rc,useId:rc,unstable_isNewReconciler:!1},Uh={readContext:zo,useCallback:function(p,y){return kl().memoizedState=[p,y===void 0?null:y],p},useContext:zo,useEffect:hl,useImperativeHandle:function(p,y,C){return C=C!=null?C.concat([p]):null,Rf(4194308,4,bp.bind(null,y,p),C)},useLayoutEffect:function(p,y){return Rf(4194308,4,p,y)},useInsertionEffect:function(p,y){return Rf(4,2,p,y)},useMemo:function(p,y){var C=kl();return y=y===void 0?null:y,p=p(),C.memoizedState=[p,y],p},useReducer:function(p,y,C){var V=kl();return y=C!==void 0?C(y):y,V.memoizedState=V.baseState=y,p={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:p,lastRenderedState:y},V.queue=p,p=p.dispatch=kf.bind(null,gu,p),[V.memoizedState,p]},useRef:function(p){var y=kl();return p={current:p},y.memoizedState=p},useState:yp,useDebugValue:Ku,useDeferredValue:function(p){return kl().memoizedState=p},useTransition:function(){var p=yp(!1),y=p[0];return p=uh.bind(null,p[1]),kl().memoizedState=p,[y,p]},useMutableSource:function(){},useSyncExternalStore:function(p,y,C){var V=gu,ae=kl();if(Vi){if(C===void 0)throw Error(l(407));C=C()}else{if(C=y(),Go===null)throw Error(l(349));(op&30)!==0||If(V,y,C)}ae.memoizedState=C;var Ie={value:C,getSnapshot:y};return ae.queue=Ie,hl(af.bind(null,V,Ie,p),[p]),V.flags|=2048,df(9,Of.bind(null,V,Ie,C,y),void 0,null),C},useId:function(){var p=kl(),y=Go.identifierPrefix;if(Vi){var C=pn,V=Lr;C=(V&~(1<<32-bo(V)-1)).toString(32)+C,y=":"+y+"R"+C,C=Zp++,0<C&&(y+="H"+C.toString(32)),y+=":"}else C=jp++,y=":"+y+"r"+C.toString(32)+":";return p.memoizedState=y},unstable_isNewReconciler:!1},Zh={readContext:zo,useCallback:Ac,useContext:zo,useEffect:He,useImperativeHandle:Kp,useInsertionEffect:Au,useLayoutEffect:yl,useMemo:kh,useReducer:Hf,useRef:_p,useState:function(){return Hf(vp)},useDebugValue:Ku,useDeferredValue:function(p){var y=Bc();return ls(y,nl.memoizedState,p)},useTransition:function(){var p=Hf(vp)[0],y=Bc().memoizedState;return[p,y]},useMutableSource:gp,useSyncExternalStore:Vp,useId:Pf,unstable_isNewReconciler:!1},Df={readContext:zo,useCallback:Ac,useContext:zo,useEffect:He,useImperativeHandle:Kp,useInsertionEffect:Au,useLayoutEffect:yl,useMemo:kh,useReducer:mp,useRef:_p,useState:function(){return mp(vp)},useDebugValue:Ku,useDeferredValue:function(p){var y=Bc();return nl===null?y.memoizedState=p:ls(y,nl.memoizedState,p)},useTransition:function(){var p=mp(vp)[0],y=Bc().memoizedState;return[p,y]},useMutableSource:gp,useSyncExternalStore:Vp,useId:Pf,unstable_isNewReconciler:!1};function vf(p,y){try{var C="",V=y;do C+=$r(V),V=V.return;while(V);var ae=C}catch(Ie){ae=`
Error generating stack: `+Ie.message+`
`+Ie.stack}return{value:p,source:y,stack:ae,digest:null}}function Ep(p,y,C){return{value:p,source:null,stack:C!=null?C:null,digest:y!=null?y:null}}function H(p,y){try{console.error(y.value)}catch(C){setTimeout(function(){throw C})}}var ue=typeof WeakMap=="function"?WeakMap:Map;function _e(p,y,C){C=Kc(-1,C),C.tag=3,C.payload={element:null};var V=y.value;return C.callback=function(){Ht||(Ht=!0,Mt=V),H(p,y)},C}function Be(p,y,C){C=Kc(-1,C),C.tag=3;var V=p.type.getDerivedStateFromError;if(typeof V=="function"){var ae=y.value;C.payload=function(){return V(ae)},C.callback=function(){H(p,y)}}var Ie=p.stateNode;return Ie!==null&&typeof Ie.componentDidCatch=="function"&&(C.callback=function(){H(p,y),typeof V!="function"&&(yr===null?yr=new Set([this]):yr.add(this));var ut=y.stack;this.componentDidCatch(y.value,{componentStack:ut!==null?ut:""})}),C}function rt(p,y,C){var V=p.pingCache;if(V===null){V=p.pingCache=new ue;var ae=new Set;V.set(y,ae)}else ae=V.get(y),ae===void 0&&(ae=new Set,V.set(y,ae));ae.has(C)||(ae.add(C),p=jl.bind(null,p,y,C),y.then(p,p))}function at(p){do{var y;if((y=p.tag===13)&&(y=p.memoizedState,y=y!==null?y.dehydrated!==null:!0),y)return p;p=p.return}while(p!==null);return null}function Ue(p,y,C,V,ae){return(p.mode&1)===0?(p===y?p.flags|=65536:(p.flags|=128,C.flags|=131072,C.flags&=-52805,C.tag===1&&(C.alternate===null?C.tag=17:(y=Kc(-1,1),y.tag=2,fl(C,y,1))),C.lanes|=1),p):(p.flags|=65536,p.lanes=ae,p)}var Xt=K.ReactCurrentOwner,Ot=!1;function vr(p,y,C,V){y.child=p===null?rf(y,null,C,V):Pl(y,p.child,C,V)}function xn(p,y,C,V,ae){C=C.render;var Ie=y.ref;return Nu(y,ae),V=oh(p,y,C,V,Ie,ae),C=Ms(),p!==null&&!Ot?(y.updateQueue=p.updateQueue,y.flags&=-2053,p.lanes&=~ae,Vt(p,y,ae)):(Vi&&C&&Xn(y),y.flags|=1,vr(p,y,V,ae),y.child)}function Pn(p,y,C,V,ae){if(p===null){var Ie=C.type;return typeof Ie=="function"&&!Jp(Ie)&&Ie.defaultProps===void 0&&C.compare===null&&C.defaultProps===void 0?(y.tag=15,y.type=Ie,ti(p,y,Ie,V,ae)):(p=zl(C.type,null,V,y,y.mode,ae),p.ref=y.ref,p.return=y,y.child=p)}if(Ie=p.child,(p.lanes&ae)===0){var ut=Ie.memoizedProps;if(C=C.compare,C=C!==null?C:da,C(ut,V)&&p.ref===y.ref)return Vt(p,y,ae)}return y.flags|=1,p=Cp(Ie,V),p.ref=y.ref,p.return=y,y.child=p}function ti(p,y,C,V,ae){if(p!==null){var Ie=p.memoizedProps;if(da(Ie,V)&&p.ref===y.ref)if(Ot=!1,y.pendingProps=V=Ie,(p.lanes&ae)!==0)(p.flags&131072)!==0&&(Ot=!0);else return y.lanes=p.lanes,Vt(p,y,ae)}return Ni(p,y,C,V,ae)}function Yn(p,y,C){var V=y.pendingProps,ae=V.children,Ie=p!==null?p.memoizedState:null;if(V.mode==="hidden")if((y.mode&1)===0)y.memoizedState={baseLanes:0,cachePool:null,transitions:null},fu(iu,so),so|=C;else{if((C&1073741824)===0)return p=Ie!==null?Ie.baseLanes|C:C,y.lanes=y.childLanes=1073741824,y.memoizedState={baseLanes:p,cachePool:null,transitions:null},y.updateQueue=null,fu(iu,so),so|=p,null;y.memoizedState={baseLanes:0,cachePool:null,transitions:null},V=Ie!==null?Ie.baseLanes:C,fu(iu,so),so|=V}else Ie!==null?(V=Ie.baseLanes|C,y.memoizedState=null):V=C,fu(iu,so),so|=V;return vr(p,y,ae,C),y.child}function On(p,y){var C=y.ref;(p===null&&C!==null||p!==null&&p.ref!==C)&&(y.flags|=512,y.flags|=2097152)}function Ni(p,y,C,V,ae){var Ie=Ol(C)?Nc:Mu.current;return Ie=hf(y,Ie),Nu(y,ae),C=oh(p,y,C,V,Ie,ae),V=Ms(),p!==null&&!Ot?(y.updateQueue=p.updateQueue,y.flags&=-2053,p.lanes&=~ae,Vt(p,y,ae)):(Vi&&V&&Xn(y),y.flags|=1,vr(p,y,C,ae),y.child)}function Bi(p,y,C,V,ae){if(Ol(C)){var Ie=!0;S(y)}else Ie=!1;if(Nu(y,ae),y.stateNode===null)pt(p,y),Rl(y,C,V),ap(y,C,V,ae),V=!0;else if(p===null){var ut=y.stateNode,zt=y.memoizedProps;ut.props=zt;var wr=ut.context,fn=C.contextType;typeof fn=="object"&&fn!==null?fn=zo(fn):(fn=Ol(C)?Nc:Mu.current,fn=hf(y,fn));var pi=C.getDerivedStateFromProps,$n=typeof pi=="function"||typeof ut.getSnapshotBeforeUpdate=="function";$n||typeof ut.UNSAFE_componentWillReceiveProps!="function"&&typeof ut.componentWillReceiveProps!="function"||(zt!==V||wr!==fn)&&qc(y,ut,V,fn),Xu=!1;var hi=y.memoizedState;ut.state=hi,Lu(y,V,ut,ae),wr=y.memoizedState,zt!==V||hi!==wr||Fu.current||Xu?(typeof pi=="function"&&(Jc(y,C,pi,V),wr=y.memoizedState),(zt=Xu||pl(y,C,zt,V,hi,wr,fn))?($n||typeof ut.UNSAFE_componentWillMount!="function"&&typeof ut.componentWillMount!="function"||(typeof ut.componentWillMount=="function"&&ut.componentWillMount(),typeof ut.UNSAFE_componentWillMount=="function"&&ut.UNSAFE_componentWillMount()),typeof ut.componentDidMount=="function"&&(y.flags|=4194308)):(typeof ut.componentDidMount=="function"&&(y.flags|=4194308),y.memoizedProps=V,y.memoizedState=wr),ut.props=V,ut.state=wr,ut.context=fn,V=zt):(typeof ut.componentDidMount=="function"&&(y.flags|=4194308),V=!1)}else{ut=y.stateNode,ip(p,y),zt=y.memoizedProps,fn=y.type===y.elementType?zt:Ia(y.type,zt),ut.props=fn,$n=y.pendingProps,hi=ut.context,wr=C.contextType,typeof wr=="object"&&wr!==null?wr=zo(wr):(wr=Ol(C)?Nc:Mu.current,wr=hf(y,wr));var ca=C.getDerivedStateFromProps;(pi=typeof ca=="function"||typeof ut.getSnapshotBeforeUpdate=="function")||typeof ut.UNSAFE_componentWillReceiveProps!="function"&&typeof ut.componentWillReceiveProps!="function"||(zt!==$n||hi!==wr)&&qc(y,ut,V,wr),Xu=!1,hi=y.memoizedState,ut.state=hi,Lu(y,V,ut,ae);var Ra=y.memoizedState;zt!==$n||hi!==Ra||Fu.current||Xu?(typeof ca=="function"&&(Jc(y,C,ca,V),Ra=y.memoizedState),(fn=Xu||pl(y,C,fn,V,hi,Ra,wr)||!1)?(pi||typeof ut.UNSAFE_componentWillUpdate!="function"&&typeof ut.componentWillUpdate!="function"||(typeof ut.componentWillUpdate=="function"&&ut.componentWillUpdate(V,Ra,wr),typeof ut.UNSAFE_componentWillUpdate=="function"&&ut.UNSAFE_componentWillUpdate(V,Ra,wr)),typeof ut.componentDidUpdate=="function"&&(y.flags|=4),typeof ut.getSnapshotBeforeUpdate=="function"&&(y.flags|=1024)):(typeof ut.componentDidUpdate!="function"||zt===p.memoizedProps&&hi===p.memoizedState||(y.flags|=4),typeof ut.getSnapshotBeforeUpdate!="function"||zt===p.memoizedProps&&hi===p.memoizedState||(y.flags|=1024),y.memoizedProps=V,y.memoizedState=Ra),ut.props=V,ut.state=Ra,ut.context=wr,V=fn):(typeof ut.componentDidUpdate!="function"||zt===p.memoizedProps&&hi===p.memoizedState||(y.flags|=4),typeof ut.getSnapshotBeforeUpdate!="function"||zt===p.memoizedProps&&hi===p.memoizedState||(y.flags|=1024),V=!1)}return ki(p,y,C,V,Ie,ae)}function ki(p,y,C,V,ae,Ie){On(p,y);var ut=(y.flags&128)!==0;if(!V&&!ut)return ae&&N(y,C,!1),Vt(p,y,Ie);V=y.stateNode,Xt.current=y;var zt=ut&&typeof C.getDerivedStateFromError!="function"?null:V.render();return y.flags|=1,p!==null&&ut?(y.child=Pl(y,p.child,null,Ie),y.child=Pl(y,null,zt,Ie)):vr(p,y,zt,Ie),y.memoizedState=V.state,ae&&N(y,C,!0),y.child}function Gi(p){var y=p.stateNode;y.pendingContext?_(p,y.pendingContext,y.pendingContext!==y.context):y.context&&_(p,y.context,!1),wp(p,y.containerInfo)}function Di(p,y,C,V,ae){return Ha(),Ro(ae),y.flags|=256,vr(p,y,C,V),y.child}var Fi={dehydrated:null,treeContext:null,retryLane:0};function bi(p){return{baseLanes:p,cachePool:null,transitions:null}}function qi(p,y,C){var V=y.pendingProps,ae=ks.current,Ie=!1,ut=(y.flags&128)!==0,zt;if((zt=ut)||(zt=p!==null&&p.memoizedState===null?!1:(ae&2)!==0),zt?(Ie=!0,y.flags&=-129):(p===null||p.memoizedState!==null)&&(ae|=1),fu(ks,ae&1),p===null)return ya(y),p=y.memoizedState,p!==null&&(p=p.dehydrated,p!==null)?((y.mode&1)===0?y.lanes=1:p.data==="$!"?y.lanes=8:y.lanes=1073741824,null):(ut=V.children,p=V.fallback,Ie?(V=y.mode,Ie=y.child,ut={mode:"hidden",children:ut},(V&1)===0&&Ie!==null?(Ie.childLanes=0,Ie.pendingProps=ut):Ie=Vh(ut,V,0,null),p=Ff(p,V,C,null),Ie.return=y,p.return=y,Ie.sibling=p,y.child=Ie,y.child.memoizedState=bi(C),y.memoizedState=Fi,p):di(y,ut));if(ae=p.memoizedState,ae!==null&&(zt=ae.dehydrated,zt!==null))return _a(p,y,ut,V,zt,ae,C);if(Ie){Ie=V.fallback,ut=y.mode,ae=p.child,zt=ae.sibling;var wr={mode:"hidden",children:V.children};return(ut&1)===0&&y.child!==ae?(V=y.child,V.childLanes=0,V.pendingProps=wr,y.deletions=null):(V=Cp(ae,wr),V.subtreeFlags=ae.subtreeFlags&14680064),zt!==null?Ie=Cp(zt,Ie):(Ie=Ff(Ie,ut,C,null),Ie.flags|=2),Ie.return=y,V.return=y,V.sibling=Ie,y.child=V,V=Ie,Ie=y.child,ut=p.child.memoizedState,ut=ut===null?bi(C):{baseLanes:ut.baseLanes|C,cachePool:null,transitions:ut.transitions},Ie.memoizedState=ut,Ie.childLanes=p.childLanes&~C,y.memoizedState=Fi,V}return Ie=p.child,p=Ie.sibling,V=Cp(Ie,{mode:"visible",children:V.children}),(y.mode&1)===0&&(V.lanes=C),V.return=y,V.sibling=null,p!==null&&(C=y.deletions,C===null?(y.deletions=[p],y.flags|=16):C.push(p)),y.child=V,y.memoizedState=null,V}function di(p,y){return y=Vh({mode:"visible",children:y},p.mode,0,null),y.return=p,p.child=y}function ba(p,y,C,V){return V!==null&&Ro(V),Pl(y,p.child,null,C),p=di(y,y.pendingProps.children),p.flags|=2,y.memoizedState=null,p}function _a(p,y,C,V,ae,Ie,ut){if(C)return y.flags&256?(y.flags&=-257,V=Ep(Error(l(422))),ba(p,y,ut,V)):y.memoizedState!==null?(y.child=p.child,y.flags|=128,null):(Ie=V.fallback,ae=y.mode,V=Vh({mode:"visible",children:V.children},ae,0,null),Ie=Ff(Ie,ae,ut,null),Ie.flags|=2,V.return=y,Ie.return=y,V.sibling=Ie,y.child=V,(y.mode&1)!==0&&Pl(y,p.child,null,ut),y.child.memoizedState=bi(ut),y.memoizedState=Fi,Ie);if((y.mode&1)===0)return ba(p,y,ut,null);if(ae.data==="$!"){if(V=ae.nextSibling&&ae.nextSibling.dataset,V)var zt=V.dgst;return V=zt,Ie=Error(l(419)),V=Ep(Ie,V,void 0),ba(p,y,ut,V)}if(zt=(ut&p.childLanes)!==0,Ot||zt){if(V=Go,V!==null){switch(ut&-ut){case 4:ae=2;break;case 16:ae=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:ae=32;break;case 536870912:ae=268435456;break;default:ae=0}ae=(ae&(V.suspendedLanes|ut))!==0?0:ae,ae!==0&&ae!==Ie.retryLane&&(Ie.retryLane=ae,gl(p,ae),jr(V,p,ae,-1))}return Lo(),V=Ep(Error(l(421))),ba(p,y,ut,V)}return ae.data==="$?"?(y.flags|=128,y.child=p.child,y=Qp.bind(null,p),ae._reactRetry=y,null):(p=Ie.treeContext,Ei=Qo(ae.nextSibling),Li=y,Vi=!0,Ea=null,p!==null&&(gr[Yt++]=Lr,gr[Yt++]=pn,gr[Yt++]=br,Lr=p.id,pn=p.overflow,br=y),y=di(y,V.children),y.flags|=4096,y)}function Ya(p,y,C){p.lanes|=y;var V=p.alternate;V!==null&&(V.lanes|=y),rl(p.return,y,C)}function Te(p,y,C,V,ae){var Ie=p.memoizedState;Ie===null?p.memoizedState={isBackwards:y,rendering:null,renderingStartTime:0,last:V,tail:C,tailMode:ae}:(Ie.isBackwards=y,Ie.rendering=null,Ie.renderingStartTime=0,Ie.last=V,Ie.tail=C,Ie.tailMode=ae)}function Qe(p,y,C){var V=y.pendingProps,ae=V.revealOrder,Ie=V.tail;if(vr(p,y,V.children,C),V=ks.current,(V&2)!==0)V=V&1|2,y.flags|=128;else{if(p!==null&&(p.flags&128)!==0)e:for(p=y.child;p!==null;){if(p.tag===13)p.memoizedState!==null&&Ya(p,C,y);else if(p.tag===19)Ya(p,C,y);else if(p.child!==null){p.child.return=p,p=p.child;continue}if(p===y)break e;for(;p.sibling===null;){if(p.return===null||p.return===y)break e;p=p.return}p.sibling.return=p.return,p=p.sibling}V&=1}if(fu(ks,V),(y.mode&1)===0)y.memoizedState=null;else switch(ae){case"forwards":for(C=y.child,ae=null;C!==null;)p=C.alternate,p!==null&&Mf(p)===null&&(ae=C),C=C.sibling;C=ae,C===null?(ae=y.child,y.child=null):(ae=C.sibling,C.sibling=null),Te(y,!1,ae,C,Ie);break;case"backwards":for(C=null,ae=y.child,y.child=null;ae!==null;){if(p=ae.alternate,p!==null&&Mf(p)===null){y.child=ae;break}p=ae.sibling,ae.sibling=C,C=ae,ae=p}Te(y,!0,C,null,Ie);break;case"together":Te(y,!1,null,null,void 0);break;default:y.memoizedState=null}return y.child}function pt(p,y){(y.mode&1)===0&&p!==null&&(p.alternate=null,y.alternate=null,y.flags|=2)}function Vt(p,y,C){if(p!==null&&(y.dependencies=p.dependencies),Xo|=y.lanes,(C&y.childLanes)===0)return null;if(p!==null&&y.child!==p.child)throw Error(l(153));if(y.child!==null){for(p=y.child,C=Cp(p,p.pendingProps),y.child=C,C.return=y;p.sibling!==null;)p=p.sibling,C=C.sibling=Cp(p,p.pendingProps),C.return=y;C.sibling=null}return y.child}function Sr(p,y,C){switch(y.tag){case 3:Gi(y),Ha();break;case 5:zp(y);break;case 1:Ol(y.type)&&S(y);break;case 4:wp(y,y.stateNode.containerInfo);break;case 10:var V=y.type._context,ae=y.memoizedProps.value;fu(Gu,V._currentValue),V._currentValue=ae;break;case 13:if(V=y.memoizedState,V!==null)return V.dehydrated!==null?(fu(ks,ks.current&1),y.flags|=128,null):(C&y.child.childLanes)!==0?qi(p,y,C):(fu(ks,ks.current&1),p=Vt(p,y,C),p!==null?p.sibling:null);fu(ks,ks.current&1);break;case 19:if(V=(C&y.childLanes)!==0,(p.flags&128)!==0){if(V)return Qe(p,y,C);y.flags|=128}if(ae=y.memoizedState,ae!==null&&(ae.rendering=null,ae.tail=null,ae.lastEffect=null),fu(ks,ks.current),V)break;return null;case 22:case 23:return y.lanes=0,Yn(p,y,C)}return Vt(p,y,C)}var dr,Ar,hn,Tn;dr=function(p,y){for(var C=y.child;C!==null;){if(C.tag===5||C.tag===6)p.appendChild(C.stateNode);else if(C.tag!==4&&C.child!==null){C.child.return=C,C=C.child;continue}if(C===y)break;for(;C.sibling===null;){if(C.return===null||C.return===y)return;C=C.return}C.sibling.return=C.return,C=C.sibling}},Ar=function(){},hn=function(p,y,C,V){var ae=p.memoizedProps;if(ae!==V){p=y.stateNode,Cf(Yu.current);var Ie=null;switch(C){case"input":ae=_n(p,ae),V=_n(p,V),Ie=[];break;case"select":ae=tt({},ae,{value:void 0}),V=tt({},V,{value:void 0}),Ie=[];break;case"textarea":ae=Q(p,ae),V=Q(p,V),Ie=[];break;default:typeof ae.onClick!="function"&&typeof V.onClick=="function"&&(p.onclick=Pa)}nn(C,V);var ut;C=null;for(fn in ae)if(!V.hasOwnProperty(fn)&&ae.hasOwnProperty(fn)&&ae[fn]!=null)if(fn==="style"){var zt=ae[fn];for(ut in zt)zt.hasOwnProperty(ut)&&(C||(C={}),C[ut]="")}else fn!=="dangerouslySetInnerHTML"&&fn!=="children"&&fn!=="suppressContentEditableWarning"&&fn!=="suppressHydrationWarning"&&fn!=="autoFocus"&&(A.hasOwnProperty(fn)?Ie||(Ie=[]):(Ie=Ie||[]).push(fn,null));for(fn in V){var wr=V[fn];if(zt=ae!=null?ae[fn]:void 0,V.hasOwnProperty(fn)&&wr!==zt&&(wr!=null||zt!=null))if(fn==="style")if(zt){for(ut in zt)!zt.hasOwnProperty(ut)||wr&&wr.hasOwnProperty(ut)||(C||(C={}),C[ut]="");for(ut in wr)wr.hasOwnProperty(ut)&&zt[ut]!==wr[ut]&&(C||(C={}),C[ut]=wr[ut])}else C||(Ie||(Ie=[]),Ie.push(fn,C)),C=wr;else fn==="dangerouslySetInnerHTML"?(wr=wr?wr.__html:void 0,zt=zt?zt.__html:void 0,wr!=null&&zt!==wr&&(Ie=Ie||[]).push(fn,wr)):fn==="children"?typeof wr!="string"&&typeof wr!="number"||(Ie=Ie||[]).push(fn,""+wr):fn!=="suppressContentEditableWarning"&&fn!=="suppressHydrationWarning"&&(A.hasOwnProperty(fn)?(wr!=null&&fn==="onScroll"&&qr("scroll",p),Ie||zt===wr||(Ie=[])):(Ie=Ie||[]).push(fn,wr))}C&&(Ie=Ie||[]).push("style",C);var fn=Ie;(y.updateQueue=fn)&&(y.flags|=4)}},Tn=function(p,y,C,V){C!==V&&(y.flags|=4)};function Hn(p,y){if(!Vi)switch(p.tailMode){case"hidden":y=p.tail;for(var C=null;y!==null;)y.alternate!==null&&(C=y),y=y.sibling;C===null?p.tail=null:C.sibling=null;break;case"collapsed":C=p.tail;for(var V=null;C!==null;)C.alternate!==null&&(V=C),C=C.sibling;V===null?y||p.tail===null?p.tail=null:p.tail.sibling=null:V.sibling=null}}function Bn(p){var y=p.alternate!==null&&p.alternate.child===p.child,C=0,V=0;if(y)for(var ae=p.child;ae!==null;)C|=ae.lanes|ae.childLanes,V|=ae.subtreeFlags&14680064,V|=ae.flags&14680064,ae.return=p,ae=ae.sibling;else for(ae=p.child;ae!==null;)C|=ae.lanes|ae.childLanes,V|=ae.subtreeFlags,V|=ae.flags,ae.return=p,ae=ae.sibling;return p.subtreeFlags|=V,p.childLanes=C,y}function bn(p,y,C){var V=y.pendingProps;switch(yi(y),y.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Bn(y),null;case 1:return Ol(y.type)&&d(),Bn(y),null;case 3:return V=y.stateNode,Gf(),Cs(Fu),Cs(Mu),Up(),V.pendingContext&&(V.context=V.pendingContext,V.pendingContext=null),(p===null||p.child===null)&&(_o(y)?y.flags|=4:p===null||p.memoizedState.isDehydrated&&(y.flags&256)===0||(y.flags|=1024,Ea!==null&&(sa(Ea),Ea=null))),Ar(p,y),Bn(y),null;case 5:Tf(y);var ae=Cf(nf.current);if(C=y.type,p!==null&&y.stateNode!=null)hn(p,y,C,V,ae),p.ref!==y.ref&&(y.flags|=512,y.flags|=2097152);else{if(!V){if(y.stateNode===null)throw Error(l(166));return Bn(y),null}if(p=Cf(Yu.current),_o(y)){V=y.stateNode,C=y.type;var Ie=y.memoizedProps;switch(V[du]=y,V[ll]=Ie,p=(y.mode&1)!==0,C){case"dialog":qr("cancel",V),qr("close",V);break;case"iframe":case"object":case"embed":qr("load",V);break;case"video":case"audio":for(ae=0;ae<Eu.length;ae++)qr(Eu[ae],V);break;case"source":qr("error",V);break;case"img":case"image":case"link":qr("error",V),qr("load",V);break;case"details":qr("toggle",V);break;case"input":Yr(V,Ie),qr("invalid",V);break;case"select":V._wrapperState={wasMultiple:!!Ie.multiple},qr("invalid",V);break;case"textarea":De(V,Ie),qr("invalid",V)}nn(C,Ie),ae=null;for(var ut in Ie)if(Ie.hasOwnProperty(ut)){var zt=Ie[ut];ut==="children"?typeof zt=="string"?V.textContent!==zt&&(Ie.suppressHydrationWarning!==!0&&tl(V.textContent,zt,p),ae=["children",zt]):typeof zt=="number"&&V.textContent!==""+zt&&(Ie.suppressHydrationWarning!==!0&&tl(V.textContent,zt,p),ae=["children",""+zt]):A.hasOwnProperty(ut)&&zt!=null&&ut==="onScroll"&&qr("scroll",V)}switch(C){case"input":Vr(V),ft(V,Ie,!0);break;case"textarea":Vr(V),Jt(V);break;case"select":case"option":break;default:typeof Ie.onClick=="function"&&(V.onclick=Pa)}V=ae,y.updateQueue=V,V!==null&&(y.flags|=4)}else{ut=ae.nodeType===9?ae:ae.ownerDocument,p==="http://www.w3.org/1999/xhtml"&&(p=it(C)),p==="http://www.w3.org/1999/xhtml"?C==="script"?(p=ut.createElement("div"),p.innerHTML="<script><\/script>",p=p.removeChild(p.firstChild)):typeof V.is=="string"?p=ut.createElement(C,{is:V.is}):(p=ut.createElement(C),C==="select"&&(ut=p,V.multiple?ut.multiple=!0:V.size&&(ut.size=V.size))):p=ut.createElementNS(p,C),p[du]=y,p[ll]=V,dr(p,y,!1,!1),y.stateNode=p;e:{switch(ut=zi(C,V),C){case"dialog":qr("cancel",p),qr("close",p),ae=V;break;case"iframe":case"object":case"embed":qr("load",p),ae=V;break;case"video":case"audio":for(ae=0;ae<Eu.length;ae++)qr(Eu[ae],p);ae=V;break;case"source":qr("error",p),ae=V;break;case"img":case"image":case"link":qr("error",p),qr("load",p),ae=V;break;case"details":qr("toggle",p),ae=V;break;case"input":Yr(p,V),ae=_n(p,V),qr("invalid",p);break;case"option":ae=V;break;case"select":p._wrapperState={wasMultiple:!!V.multiple},ae=tt({},V,{value:void 0}),qr("invalid",p);break;case"textarea":De(p,V),ae=Q(p,V),qr("invalid",p);break;default:ae=V}nn(C,ae),zt=ae;for(Ie in zt)if(zt.hasOwnProperty(Ie)){var wr=zt[Ie];Ie==="style"?Gt(p,wr):Ie==="dangerouslySetInnerHTML"?(wr=wr?wr.__html:void 0,wr!=null&&pr(p,wr)):Ie==="children"?typeof wr=="string"?(C!=="textarea"||wr!=="")&&Hr(p,wr):typeof wr=="number"&&Hr(p,""+wr):Ie!=="suppressContentEditableWarning"&&Ie!=="suppressHydrationWarning"&&Ie!=="autoFocus"&&(A.hasOwnProperty(Ie)?wr!=null&&Ie==="onScroll"&&qr("scroll",p):wr!=null&&Ve(p,Ie,wr,ut))}switch(C){case"input":Vr(p),ft(p,V,!1);break;case"textarea":Vr(p),Jt(p);break;case"option":V.value!=null&&p.setAttribute("value",""+ot(V.value));break;case"select":p.multiple=!!V.multiple,Ie=V.value,Ie!=null?fe(p,!!V.multiple,Ie,!1):V.defaultValue!=null&&fe(p,!!V.multiple,V.defaultValue,!0);break;default:typeof ae.onClick=="function"&&(p.onclick=Pa)}switch(C){case"button":case"input":case"select":case"textarea":V=!!V.autoFocus;break e;case"img":V=!0;break e;default:V=!1}}V&&(y.flags|=4)}y.ref!==null&&(y.flags|=512,y.flags|=2097152)}return Bn(y),null;case 6:if(p&&y.stateNode!=null)Tn(p,y,p.memoizedProps,V);else{if(typeof V!="string"&&y.stateNode===null)throw Error(l(166));if(C=Cf(nf.current),Cf(Yu.current),_o(y)){if(V=y.stateNode,C=y.memoizedProps,V[du]=y,(Ie=V.nodeValue!==C)&&(p=Li,p!==null))switch(p.tag){case 3:tl(V.nodeValue,C,(p.mode&1)!==0);break;case 5:p.memoizedProps.suppressHydrationWarning!==!0&&tl(V.nodeValue,C,(p.mode&1)!==0)}Ie&&(y.flags|=4)}else V=(C.nodeType===9?C:C.ownerDocument).createTextNode(V),V[du]=y,y.stateNode=V}return Bn(y),null;case 13:if(Cs(ks),V=y.memoizedState,p===null||p.memoizedState!==null&&p.memoizedState.dehydrated!==null){if(Vi&&Ei!==null&&(y.mode&1)!==0&&(y.flags&128)===0)po(),Ha(),y.flags|=98560,Ie=!1;else if(Ie=_o(y),V!==null&&V.dehydrated!==null){if(p===null){if(!Ie)throw Error(l(318));if(Ie=y.memoizedState,Ie=Ie!==null?Ie.dehydrated:null,!Ie)throw Error(l(317));Ie[du]=y}else Ha(),(y.flags&128)===0&&(y.memoizedState=null),y.flags|=4;Bn(y),Ie=!1}else Ea!==null&&(sa(Ea),Ea=null),Ie=!0;if(!Ie)return y.flags&65536?y:null}return(y.flags&128)!==0?(y.lanes=C,y):(V=V!==null,V!==(p!==null&&p.memoizedState!==null)&&V&&(y.child.flags|=8192,(y.mode&1)!==0&&(p===null||(ks.current&1)!==0?Oa===0&&(Oa=3):Lo())),y.updateQueue!==null&&(y.flags|=4),Bn(y),null);case 4:return Gf(),Ar(p,y),p===null&&Vn(y.stateNode.containerInfo),Bn(y),null;case 10:return Ts(y.type._context),Bn(y),null;case 17:return Ol(y.type)&&d(),Bn(y),null;case 19:if(Cs(ks),Ie=y.memoizedState,Ie===null)return Bn(y),null;if(V=(y.flags&128)!==0,ut=Ie.rendering,ut===null)if(V)Hn(Ie,!1);else{if(Oa!==0||p!==null&&(p.flags&128)!==0)for(p=y.child;p!==null;){if(ut=Mf(p),ut!==null){for(y.flags|=128,Hn(Ie,!1),V=ut.updateQueue,V!==null&&(y.updateQueue=V,y.flags|=4),y.subtreeFlags=0,V=C,C=y.child;C!==null;)Ie=C,p=V,Ie.flags&=14680066,ut=Ie.alternate,ut===null?(Ie.childLanes=0,Ie.lanes=p,Ie.child=null,Ie.subtreeFlags=0,Ie.memoizedProps=null,Ie.memoizedState=null,Ie.updateQueue=null,Ie.dependencies=null,Ie.stateNode=null):(Ie.childLanes=ut.childLanes,Ie.lanes=ut.lanes,Ie.child=ut.child,Ie.subtreeFlags=0,Ie.deletions=null,Ie.memoizedProps=ut.memoizedProps,Ie.memoizedState=ut.memoizedState,Ie.updateQueue=ut.updateQueue,Ie.type=ut.type,p=ut.dependencies,Ie.dependencies=p===null?null:{lanes:p.lanes,firstContext:p.firstContext}),C=C.sibling;return fu(ks,ks.current&1|2),y.child}p=p.sibling}Ie.tail!==null&&No()>oa&&(y.flags|=128,V=!0,Hn(Ie,!1),y.lanes=4194304)}else{if(!V)if(p=Mf(ut),p!==null){if(y.flags|=128,V=!0,C=p.updateQueue,C!==null&&(y.updateQueue=C,y.flags|=4),Hn(Ie,!0),Ie.tail===null&&Ie.tailMode==="hidden"&&!ut.alternate&&!Vi)return Bn(y),null}else 2*No()-Ie.renderingStartTime>oa&&C!==1073741824&&(y.flags|=128,V=!0,Hn(Ie,!1),y.lanes=4194304);Ie.isBackwards?(ut.sibling=y.child,y.child=ut):(C=Ie.last,C!==null?C.sibling=ut:y.child=ut,Ie.last=ut)}return Ie.tail!==null?(y=Ie.tail,Ie.rendering=y,Ie.tail=y.sibling,Ie.renderingStartTime=No(),y.sibling=null,C=ks.current,fu(ks,V?C&1|2:C&1),y):(Bn(y),null);case 22:case 23:return Sa(),V=y.memoizedState!==null,p!==null&&p.memoizedState!==null!==V&&(y.flags|=8192),V&&(y.mode&1)!==0?(so&1073741824)!==0&&(Bn(y),y.subtreeFlags&6&&(y.flags|=8192)):Bn(y),null;case 24:return null;case 25:return null}throw Error(l(156,y.tag))}function En(p,y){switch(yi(y),y.tag){case 1:return Ol(y.type)&&d(),p=y.flags,p&65536?(y.flags=p&-65537|128,y):null;case 3:return Gf(),Cs(Fu),Cs(Mu),Up(),p=y.flags,(p&65536)!==0&&(p&128)===0?(y.flags=p&-65537|128,y):null;case 5:return Tf(y),null;case 13:if(Cs(ks),p=y.memoizedState,p!==null&&p.dehydrated!==null){if(y.alternate===null)throw Error(l(340));Ha()}return p=y.flags,p&65536?(y.flags=p&-65537|128,y):null;case 19:return Cs(ks),null;case 4:return Gf(),null;case 10:return Ts(y.type._context),null;case 22:case 23:return Sa(),null;case 24:return null;default:return null}}var Mn=!1,Un=!1,Nr=typeof WeakSet=="function"?WeakSet:Set,Er=null;function oi(p,y){var C=p.ref;if(C!==null)if(typeof C=="function")try{C(null)}catch(V){Bl(p,y,V)}else C.current=null}function wi(p,y,C){try{C()}catch(V){Bl(p,y,V)}}var Wn=!1;function ci(p,y){if(la=sf,p=Vu(),lc(p)){if("selectionStart"in p)var C={start:p.selectionStart,end:p.selectionEnd};else e:{C=(C=p.ownerDocument)&&C.defaultView||window;var V=C.getSelection&&C.getSelection();if(V&&V.rangeCount!==0){C=V.anchorNode;var ae=V.anchorOffset,Ie=V.focusNode;V=V.focusOffset;try{C.nodeType,Ie.nodeType}catch(ra){C=null;break e}var ut=0,zt=-1,wr=-1,fn=0,pi=0,$n=p,hi=null;t:for(;;){for(var ca;$n!==C||ae!==0&&$n.nodeType!==3||(zt=ut+ae),$n!==Ie||V!==0&&$n.nodeType!==3||(wr=ut+V),$n.nodeType===3&&(ut+=$n.nodeValue.length),(ca=$n.firstChild)!==null;)hi=$n,$n=ca;for(;;){if($n===p)break t;if(hi===C&&++fn===ae&&(zt=ut),hi===Ie&&++pi===V&&(wr=ut),(ca=$n.nextSibling)!==null)break;$n=hi,hi=$n.parentNode}$n=ca}C=zt===-1||wr===-1?null:{start:zt,end:wr}}else C=null}C=C||{start:0,end:0}}else C=null;for(sl={focusedElem:p,selectionRange:C},sf=!1,Er=y;Er!==null;)if(y=Er,p=y.child,(y.subtreeFlags&1028)!==0&&p!==null)p.return=y,Er=p;else for(;Er!==null;){y=Er;try{var Ra=y.alternate;if((y.flags&1024)!==0)switch(y.tag){case 0:case 11:case 15:break;case 1:if(Ra!==null){var Da=Ra.memoizedProps,os=Ra.memoizedState,gn=y.stateNode,Qr=gn.getSnapshotBeforeUpdate(y.elementType===y.type?Da:Ia(y.type,Da),os);gn.__reactInternalSnapshotBeforeUpdate=Qr}break;case 3:var In=y.stateNode.containerInfo;In.nodeType===1?In.textContent="":In.nodeType===9&&In.documentElement&&In.removeChild(In.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(l(163))}}catch(ra){Bl(y,y.return,ra)}if(p=y.sibling,p!==null){p.return=y.return,Er=p;break}Er=y.return}return Ra=Wn,Wn=!1,Ra}function Mi(p,y,C){var V=y.updateQueue;if(V=V!==null?V.lastEffect:null,V!==null){var ae=V=V.next;do{if((ae.tag&p)===p){var Ie=ae.destroy;ae.destroy=void 0,Ie!==void 0&&wi(y,C,Ie)}ae=ae.next}while(ae!==V)}}function Xi(p,y){if(y=y.updateQueue,y=y!==null?y.lastEffect:null,y!==null){var C=y=y.next;do{if((C.tag&p)===p){var V=C.create;C.destroy=V()}C=C.next}while(C!==y)}}function Rn(p){var y=p.ref;if(y!==null){var C=p.stateNode;switch(p.tag){case 5:p=C;break;default:p=C}typeof y=="function"?y(p):y.current=p}}function kn(p){var y=p.alternate;y!==null&&(p.alternate=null,kn(y)),p.child=null,p.deletions=null,p.sibling=null,p.tag===5&&(y=p.stateNode,y!==null&&(delete y[du],delete y[ll],delete y[Rt],delete y[mo],delete y[xs])),p.stateNode=null,p.return=null,p.dependencies=null,p.memoizedProps=null,p.memoizedState=null,p.pendingProps=null,p.stateNode=null,p.updateQueue=null}function Si(p){return p.tag===5||p.tag===3||p.tag===4}function mi(p){e:for(;;){for(;p.sibling===null;){if(p.return===null||Si(p.return))return null;p=p.return}for(p.sibling.return=p.return,p=p.sibling;p.tag!==5&&p.tag!==6&&p.tag!==18;){if(p.flags&2||p.child===null||p.tag===4)continue e;p.child.return=p,p=p.child}if(!(p.flags&2))return p.stateNode}}function qn(p,y,C){var V=p.tag;if(V===5||V===6)p=p.stateNode,y?C.nodeType===8?C.parentNode.insertBefore(p,y):C.insertBefore(p,y):(C.nodeType===8?(y=C.parentNode,y.insertBefore(p,C)):(y=C,y.appendChild(p)),C=C._reactRootContainer,C!=null||y.onclick!==null||(y.onclick=Pa));else if(V!==4&&(p=p.child,p!==null))for(qn(p,y,C),p=p.sibling;p!==null;)qn(p,y,C),p=p.sibling}function Ii(p,y,C){var V=p.tag;if(V===5||V===6)p=p.stateNode,y?C.insertBefore(p,y):C.appendChild(p);else if(V!==4&&(p=p.child,p!==null))for(Ii(p,y,C),p=p.sibling;p!==null;)Ii(p,y,C),p=p.sibling}var _i=null,ao=!1;function La(p,y,C){for(C=C.child;C!==null;)Qi(p,y,C),C=C.sibling}function Qi(p,y,C){if(Os&&typeof Os.onCommitFiberUnmount=="function")try{Os.onCommitFiberUnmount(Es,C)}catch(zt){}switch(C.tag){case 5:Un||oi(C,y);case 6:var V=_i,ae=ao;_i=null,La(p,y,C),_i=V,ao=ae,_i!==null&&(ao?(p=_i,C=C.stateNode,p.nodeType===8?p.parentNode.removeChild(C):p.removeChild(C)):_i.removeChild(C.stateNode));break;case 18:_i!==null&&(ao?(p=_i,C=C.stateNode,p.nodeType===8?ws(p.parentNode,C):p.nodeType===1&&ws(p,C),Rc(p)):ws(_i,C.stateNode));break;case 4:V=_i,ae=ao,_i=C.stateNode.containerInfo,ao=!0,La(p,y,C),_i=V,ao=ae;break;case 0:case 11:case 14:case 15:if(!Un&&(V=C.updateQueue,V!==null&&(V=V.lastEffect,V!==null))){ae=V=V.next;do{var Ie=ae,ut=Ie.destroy;Ie=Ie.tag,ut!==void 0&&((Ie&2)!==0||(Ie&4)!==0)&&wi(C,y,ut),ae=ae.next}while(ae!==V)}La(p,y,C);break;case 1:if(!Un&&(oi(C,y),V=C.stateNode,typeof V.componentWillUnmount=="function"))try{V.props=C.memoizedProps,V.state=C.memoizedState,V.componentWillUnmount()}catch(zt){Bl(C,y,zt)}La(p,y,C);break;case 21:La(p,y,C);break;case 22:C.mode&1?(Un=(V=Un)||C.memoizedState!==null,La(p,y,C),Un=V):La(p,y,C);break;default:La(p,y,C)}}function aa(p){var y=p.updateQueue;if(y!==null){p.updateQueue=null;var C=p.stateNode;C===null&&(C=p.stateNode=new Nr),y.forEach(function(V){var ae=Qh.bind(null,p,V);C.has(V)||(C.add(V),V.then(ae,ae))})}}function Fa(p,y){var C=y.deletions;if(C!==null)for(var V=0;V<C.length;V++){var ae=C[V];try{var Ie=p,ut=y,zt=ut;e:for(;zt!==null;){switch(zt.tag){case 5:_i=zt.stateNode,ao=!1;break e;case 3:_i=zt.stateNode.containerInfo,ao=!0;break e;case 4:_i=zt.stateNode.containerInfo,ao=!0;break e}zt=zt.return}if(_i===null)throw Error(l(160));Qi(Ie,ut,ae),_i=null,ao=!1;var wr=ae.alternate;wr!==null&&(wr.return=null),ae.return=null}catch(fn){Bl(ae,y,fn)}}if(y.subtreeFlags&12854)for(y=y.child;y!==null;)$a(y,p),y=y.sibling}function $a(p,y){var C=p.alternate,V=p.flags;switch(p.tag){case 0:case 11:case 14:case 15:if(Fa(y,p),oo(p),V&4){try{Mi(3,p,p.return),Xi(3,p)}catch(Da){Bl(p,p.return,Da)}try{Mi(5,p,p.return)}catch(Da){Bl(p,p.return,Da)}}break;case 1:Fa(y,p),oo(p),V&512&&C!==null&&oi(C,C.return);break;case 5:if(Fa(y,p),oo(p),V&512&&C!==null&&oi(C,C.return),p.flags&32){var ae=p.stateNode;try{Hr(ae,"")}catch(Da){Bl(p,p.return,Da)}}if(V&4&&(ae=p.stateNode,ae!=null)){var Ie=p.memoizedProps,ut=C!==null?C.memoizedProps:Ie,zt=p.type,wr=p.updateQueue;if(p.updateQueue=null,wr!==null)try{zt==="input"&&Ie.type==="radio"&&Ie.name!=null&&Fr(ae,Ie),zi(zt,ut);var fn=zi(zt,Ie);for(ut=0;ut<wr.length;ut+=2){var pi=wr[ut],$n=wr[ut+1];pi==="style"?Gt(ae,$n):pi==="dangerouslySetInnerHTML"?pr(ae,$n):pi==="children"?Hr(ae,$n):Ve(ae,pi,$n,fn)}switch(zt){case"input":kr(ae,Ie);break;case"textarea":dt(ae,Ie);break;case"select":var hi=ae._wrapperState.wasMultiple;ae._wrapperState.wasMultiple=!!Ie.multiple;var ca=Ie.value;ca!=null?fe(ae,!!Ie.multiple,ca,!1):hi!==!!Ie.multiple&&(Ie.defaultValue!=null?fe(ae,!!Ie.multiple,Ie.defaultValue,!0):fe(ae,!!Ie.multiple,Ie.multiple?[]:"",!1))}ae[ll]=Ie}catch(Da){Bl(p,p.return,Da)}}break;case 6:if(Fa(y,p),oo(p),V&4){if(p.stateNode===null)throw Error(l(162));ae=p.stateNode,Ie=p.memoizedProps;try{ae.nodeValue=Ie}catch(Da){Bl(p,p.return,Da)}}break;case 3:if(Fa(y,p),oo(p),V&4&&C!==null&&C.memoizedState.isDehydrated)try{Rc(y.containerInfo)}catch(Da){Bl(p,p.return,Da)}break;case 4:Fa(y,p),oo(p);break;case 13:Fa(y,p),oo(p),ae=p.child,ae.flags&8192&&(Ie=ae.memoizedState!==null,ae.stateNode.isHidden=Ie,!Ie||ae.alternate!==null&&ae.alternate.memoizedState!==null||(un=No())),V&4&&aa(p);break;case 22:if(pi=C!==null&&C.memoizedState!==null,p.mode&1?(Un=(fn=Un)||pi,Fa(y,p),Un=fn):Fa(y,p),oo(p),V&8192){if(fn=p.memoizedState!==null,(p.stateNode.isHidden=fn)&&!pi&&(p.mode&1)!==0)for(Er=p,pi=p.child;pi!==null;){for($n=Er=pi;Er!==null;){switch(hi=Er,ca=hi.child,hi.tag){case 0:case 11:case 14:case 15:Mi(4,hi,hi.return);break;case 1:oi(hi,hi.return);var Ra=hi.stateNode;if(typeof Ra.componentWillUnmount=="function"){V=hi,C=hi.return;try{y=V,Ra.props=y.memoizedProps,Ra.state=y.memoizedState,Ra.componentWillUnmount()}catch(Da){Bl(V,C,Da)}}break;case 5:oi(hi,hi.return);break;case 22:if(hi.memoizedState!==null){js($n);continue}}ca!==null?(ca.return=hi,Er=ca):js($n)}pi=pi.sibling}e:for(pi=null,$n=p;;){if($n.tag===5){if(pi===null){pi=$n;try{ae=$n.stateNode,fn?(Ie=ae.style,typeof Ie.setProperty=="function"?Ie.setProperty("display","none","important"):Ie.display="none"):(zt=$n.stateNode,wr=$n.memoizedProps.style,ut=wr!=null&&wr.hasOwnProperty("display")?wr.display:null,zt.style.display=xt("display",ut))}catch(Da){Bl(p,p.return,Da)}}}else if($n.tag===6){if(pi===null)try{$n.stateNode.nodeValue=fn?"":$n.memoizedProps}catch(Da){Bl(p,p.return,Da)}}else if(($n.tag!==22&&$n.tag!==23||$n.memoizedState===null||$n===p)&&$n.child!==null){$n.child.return=$n,$n=$n.child;continue}if($n===p)break e;for(;$n.sibling===null;){if($n.return===null||$n.return===p)break e;pi===$n&&(pi=null),$n=$n.return}pi===$n&&(pi=null),$n.sibling.return=$n.return,$n=$n.sibling}}break;case 19:Fa(y,p),oo(p),V&4&&aa(p);break;case 21:break;default:Fa(y,p),oo(p)}}function oo(p){var y=p.flags;if(y&2){try{e:{for(var C=p.return;C!==null;){if(Si(C)){var V=C;break e}C=C.return}throw Error(l(160))}switch(V.tag){case 5:var ae=V.stateNode;V.flags&32&&(Hr(ae,""),V.flags&=-33);var Ie=mi(p);Ii(p,Ie,ae);break;case 3:case 4:var ut=V.stateNode.containerInfo,zt=mi(p);qn(p,zt,ut);break;default:throw Error(l(161))}}catch(wr){Bl(p,p.return,wr)}p.flags&=-3}y&4096&&(p.flags&=-4097)}function is(p,y,C){Er=p,Yo(p,y,C)}function Yo(p,y,C){for(var V=(p.mode&1)!==0;Er!==null;){var ae=Er,Ie=ae.child;if(ae.tag===22&&V){var ut=ae.memoizedState!==null||Mn;if(!ut){var zt=ae.alternate,wr=zt!==null&&zt.memoizedState!==null||Un;zt=Mn;var fn=Un;if(Mn=ut,(Un=wr)&&!fn)for(Er=ae;Er!==null;)ut=Er,wr=ut.child,ut.tag===22&&ut.memoizedState!==null?Uo(ae):wr!==null?(wr.return=ut,Er=wr):Uo(ae);for(;Ie!==null;)Er=Ie,Yo(Ie,y,C),Ie=Ie.sibling;Er=ae,Mn=zt,Un=fn}Po(p,y,C)}else(ae.subtreeFlags&8772)!==0&&Ie!==null?(Ie.return=ae,Er=Ie):Po(p,y,C)}}function Po(p){for(;Er!==null;){var y=Er;if((y.flags&8772)!==0){var C=y.alternate;try{if((y.flags&8772)!==0)switch(y.tag){case 0:case 11:case 15:Un||Xi(5,y);break;case 1:var V=y.stateNode;if(y.flags&4&&!Un)if(C===null)V.componentDidMount();else{var ae=y.elementType===y.type?C.memoizedProps:Ia(y.type,C.memoizedProps);V.componentDidUpdate(ae,C.memoizedState,V.__reactInternalSnapshotBeforeUpdate)}var Ie=y.updateQueue;Ie!==null&&Fl(y,Ie,V);break;case 3:var ut=y.updateQueue;if(ut!==null){if(C=null,y.child!==null)switch(y.child.tag){case 5:C=y.child.stateNode;break;case 1:C=y.child.stateNode}Fl(y,ut,C)}break;case 5:var zt=y.stateNode;if(C===null&&y.flags&4){C=zt;var wr=y.memoizedProps;switch(y.type){case"button":case"input":case"select":case"textarea":wr.autoFocus&&C.focus();break;case"img":wr.src&&(C.src=wr.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(y.memoizedState===null){var fn=y.alternate;if(fn!==null){var pi=fn.memoizedState;if(pi!==null){var $n=pi.dehydrated;$n!==null&&Rc($n)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(l(163))}Un||y.flags&512&&Rn(y)}catch(hi){Bl(y,y.return,hi)}}if(y===p){Er=null;break}if(C=y.sibling,C!==null){C.return=y.return,Er=C;break}Er=y.return}}function js(p){for(;Er!==null;){var y=Er;if(y===p){Er=null;break}var C=y.sibling;if(C!==null){C.return=y.return,Er=C;break}Er=y.return}}function Uo(p){for(;Er!==null;){var y=Er;try{switch(y.tag){case 0:case 11:case 15:var C=y.return;try{Xi(4,y)}catch(wr){Bl(y,C,wr)}break;case 1:var V=y.stateNode;if(typeof V.componentDidMount=="function"){var ae=y.return;try{V.componentDidMount()}catch(wr){Bl(y,ae,wr)}}var Ie=y.return;try{Rn(y)}catch(wr){Bl(y,Ie,wr)}break;case 5:var ut=y.return;try{Rn(y)}catch(wr){Bl(y,ut,wr)}}}catch(wr){Bl(y,y.return,wr)}if(y===p){Er=null;break}var zt=y.sibling;if(zt!==null){zt.return=y.return,Er=zt;break}Er=y.return}}var cs=Math.ceil,Vs=K.ReactCurrentDispatcher,Ls=K.ReactCurrentOwner,Zo=K.ReactCurrentBatchConfig,Io=0,Go=null,Za=null,as=0,so=0,iu=Dl(0),Oa=0,ko=null,Xo=0,Hs=0,jo=0,Dt=null,an=null,un=0,oa=1/0,Do=null,Ht=!1,Mt=null,yr=null,Zr=!1,Sn=null,Or=0,ir=0,Br=null,kt=-1,fr=0;function jt(){return(Io&6)!==0?No():kt!==-1?kt:kt=No()}function rn(p){return(p.mode&1)===0?1:(Io&2)!==0&&as!==0?as&-as:eo.transition!==null?(fr===0&&(fr=ss()),fr):(p=qe,p!==0||(p=window.event,p=p===void 0?16:q(p.type)),p)}function jr(p,y,C,V){if(50<ir)throw ir=0,Br=null,Error(l(185));Pu(p,C,V),((Io&2)===0||p!==Go)&&(p===Go&&((Io&2)===0&&(Hs|=C),Oa===4&&xa(p,as)),Cn(p,V),C===1&&Io===0&&(y.mode&1)===0&&(oa=No()+500,ee&&Ct()))}function Cn(p,y){var C=p.callbackNode;hu(p,y);var V=Tu(p,p===Go?as:0);if(V===0)C!==null&&So(C),p.callbackNode=null,p.callbackPriority=0;else if(y=V&-V,p.callbackPriority!==y){if(C!=null&&So(C),y===1)p.tag===0?nt(va.bind(null,p)):Ze(va.bind(null,p)),Ec(function(){(Io&6)===0&&Ct()}),C=null;else{switch(Bt(V)){case 1:C=jn;break;case 4:C=rr;break;case 16:C=ps;break;case 536870912:C=$s;break;default:C=ps}C=Jh(C,Ci.bind(null,p))}p.callbackPriority=y,p.callbackNode=C}}function Ci(p,y){if(kt=-1,fr=0,(Io&6)!==0)throw Error(l(327));var C=p.callbackNode;if($f()&&p.callbackNode!==C)return null;var V=Tu(p,p===Go?as:0);if(V===0)return null;if((V&30)!==0||(V&p.expiredLanes)!==0||y)y=Ja(p,V);else{y=V;var ae=Io;Io|=2;var Ie=_l();(Go!==p||as!==y)&&(Do=null,oa=No()+500,to(p,y));do try{Uu();break}catch(zt){Is(p,zt)}while(1);pu(),Vs.current=Ie,Io=ae,Za!==null?y=0:(Go=null,as=0,y=Oa)}if(y!==0){if(y===2&&(ae=ou(p),ae!==0&&(V=ae,y=Oi(p,ae))),y===1)throw C=ko,to(p,0),xa(p,V),Cn(p,No()),C;if(y===6)xa(p,V);else{if(ae=p.current.alternate,(V&30)===0&&!$i(ae)&&(y=Ja(p,V),y===2&&(Ie=ou(p),Ie!==0&&(V=Ie,y=Oi(p,Ie))),y===1))throw C=ko,to(p,0),xa(p,V),Cn(p,No()),C;switch(p.finishedWork=ae,p.finishedLanes=V,y){case 0:case 1:throw Error(l(345));case 2:mf(p,an,Do);break;case 3:if(xa(p,V),(V&130023424)===V&&(y=un+500-No(),10<y)){if(Tu(p,0)!==0)break;if(ae=p.suspendedLanes,(ae&V)!==V){jt(),p.pingedLanes|=p.suspendedLanes&ae;break}p.timeoutHandle=wu(mf.bind(null,p,an,Do),y);break}mf(p,an,Do);break;case 4:if(xa(p,V),(V&4194240)===V)break;for(y=p.eventTimes,ae=-1;0<V;){var ut=31-bo(V);Ie=1<<ut,ut=y[ut],ut>ae&&(ae=ut),V&=~Ie}if(V=ae,V=No()-V,V=(120>V?120:480>V?480:1080>V?1080:1920>V?1920:3e3>V?3e3:4320>V?4320:1960*cs(V/1960))-V,10<V){p.timeoutHandle=wu(mf.bind(null,p,an,Do),V);break}mf(p,an,Do);break;case 5:mf(p,an,Do);break;default:throw Error(l(329))}}}return Cn(p,No()),p.callbackNode===C?Ci.bind(null,p):null}function Oi(p,y){var C=Dt;return p.current.memoizedState.isDehydrated&&(to(p,y).flags|=256),p=Ja(p,y),p!==2&&(y=an,an=C,y!==null&&sa(y)),p}function sa(p){an===null?an=p:an.push.apply(an,p)}function $i(p){for(var y=p;;){if(y.flags&16384){var C=y.updateQueue;if(C!==null&&(C=C.stores,C!==null))for(var V=0;V<C.length;V++){var ae=C[V],Ie=ae.getSnapshot;ae=ae.value;try{if(!xi(Ie(),ae))return!1}catch(ut){return!1}}}if(C=y.child,y.subtreeFlags&16384&&C!==null)C.return=y,y=C;else{if(y===p)break;for(;y.sibling===null;){if(y.return===null||y.return===p)return!0;y=y.return}y.sibling.return=y.return,y=y.sibling}}return!0}function xa(p,y){for(y&=~jo,y&=~Hs,p.suspendedLanes|=y,p.pingedLanes&=~y,p=p.expirationTimes;0<y;){var C=31-bo(y),V=1<<C;p[C]=-1,y&=~V}}function va(p){if((Io&6)!==0)throw Error(l(327));$f();var y=Tu(p,0);if((y&1)===0)return Cn(p,No()),null;var C=Ja(p,y);if(p.tag!==0&&C===2){var V=ou(p);V!==0&&(y=V,C=Oi(p,V))}if(C===1)throw C=ko,to(p,0),xa(p,y),Cn(p,No()),C;if(C===6)throw Error(l(345));return p.finishedWork=p.current.alternate,p.finishedLanes=y,mf(p,an,Do),Cn(p,No()),null}function Ca(p,y){var C=Io;Io|=1;try{return p(y)}finally{Io=C,Io===0&&(oa=No()+500,ee&&Ct())}}function pa(p){Sn!==null&&Sn.tag===0&&(Io&6)===0&&$f();var y=Io;Io|=1;var C=Zo.transition,V=qe;try{if(Zo.transition=null,qe=1,p)return p()}finally{qe=V,Zo.transition=C,Io=y,(Io&6)===0&&Ct()}}function Sa(){so=iu.current,Cs(iu)}function to(p,y){p.finishedWork=null,p.finishedLanes=0;var C=p.timeoutHandle;if(C!==-1&&(p.timeoutHandle=-1,Zs(C)),Za!==null)for(C=Za.return;C!==null;){var V=C;switch(yi(V),V.tag){case 1:V=V.type.childContextTypes,V!=null&&d();break;case 3:Gf(),Cs(Fu),Cs(Mu),Up();break;case 5:Tf(V);break;case 4:Gf();break;case 13:Cs(ks);break;case 19:Cs(ks);break;case 10:Ts(V.type._context);break;case 22:case 23:Sa()}C=C.return}if(Go=p,Za=p=Cp(p.current,null),as=so=y,Oa=0,ko=null,jo=Hs=Xo=0,an=Dt=null,An!==null){for(y=0;y<An.length;y++)if(C=An[y],V=C.interleaved,V!==null){C.interleaved=null;var ae=V.next,Ie=C.pending;if(Ie!==null){var ut=Ie.next;Ie.next=ae,V.next=ut}C.pending=V}An=null}return p}function Is(p,y){do{var C=Za;try{if(pu(),Jo.current=pc,hp){for(var V=gu.memoizedState;V!==null;){var ae=V.queue;ae!==null&&(ae.pending=null),V=V.next}hp=!1}if(op=0,il=nl=gu=null,wc=!1,Zp=0,Ls.current=null,C===null||C.return===null){Oa=1,ko=y,Za=null;break}e:{var Ie=p,ut=C.return,zt=C,wr=y;if(y=as,zt.flags|=32768,wr!==null&&typeof wr=="object"&&typeof wr.then=="function"){var fn=wr,pi=zt,$n=pi.tag;if((pi.mode&1)===0&&($n===0||$n===11||$n===15)){var hi=pi.alternate;hi?(pi.updateQueue=hi.updateQueue,pi.memoizedState=hi.memoizedState,pi.lanes=hi.lanes):(pi.updateQueue=null,pi.memoizedState=null)}var ca=at(ut);if(ca!==null){ca.flags&=-257,Ue(ca,ut,zt,Ie,y),ca.mode&1&&rt(Ie,fn,y),y=ca,wr=fn;var Ra=y.updateQueue;if(Ra===null){var Da=new Set;Da.add(wr),y.updateQueue=Da}else Ra.add(wr);break e}else{if((y&1)===0){rt(Ie,fn,y),Lo();break e}wr=Error(l(426))}}else if(Vi&&zt.mode&1){var os=at(ut);if(os!==null){(os.flags&65536)===0&&(os.flags|=256),Ue(os,ut,zt,Ie,y),Ro(vf(wr,zt));break e}}Ie=wr=vf(wr,zt),Oa!==4&&(Oa=2),Dt===null?Dt=[Ie]:Dt.push(Ie),Ie=ut;do{switch(Ie.tag){case 3:Ie.flags|=65536,y&=-y,Ie.lanes|=y;var gn=_e(Ie,wr,y);Sc(Ie,gn);break e;case 1:zt=wr;var Qr=Ie.type,In=Ie.stateNode;if((Ie.flags&128)===0&&(typeof Qr.getDerivedStateFromError=="function"||In!==null&&typeof In.componentDidCatch=="function"&&(yr===null||!yr.has(In)))){Ie.flags|=65536,y&=-y,Ie.lanes|=y;var ra=Be(Ie,zt,y);Sc(Ie,ra);break e}}Ie=Ie.return}while(Ie!==null)}Nl(C)}catch(Ba){y=Ba,Za===C&&C!==null&&(Za=C=C.return);continue}break}while(1)}function _l(){var p=Vs.current;return Vs.current=pc,p===null?pc:p}function Lo(){(Oa===0||Oa===3||Oa===2)&&(Oa=4),Go===null||(Xo&268435455)===0&&(Hs&268435455)===0||xa(Go,as)}function Ja(p,y){var C=Io;Io|=2;var V=_l();(Go!==p||as!==y)&&(Do=null,to(p,y));do try{Cu();break}catch(ae){Is(p,ae)}while(1);if(pu(),Io=C,Vs.current=V,Za!==null)throw Error(l(261));return Go=null,as=0,Oa}function Cu(){for(;Za!==null;)dl(Za)}function Uu(){for(;Za!==null&&!Xa();)dl(Za)}function dl(p){var y=jh(p.alternate,p,so);p.memoizedProps=p.pendingProps,y===null?Nl(p):Za=y,Ls.current=null}function Nl(p){var y=p;do{var C=y.alternate;if(p=y.return,(y.flags&32768)===0){if(C=bn(C,y,so),C!==null){Za=C;return}}else{if(C=En(C,y),C!==null){C.flags&=32767,Za=C;return}if(p!==null)p.flags|=32768,p.subtreeFlags=0,p.deletions=null;else{Oa=6,Za=null;return}}if(y=y.sibling,y!==null){Za=y;return}Za=y=p}while(y!==null);Oa===0&&(Oa=5)}function mf(p,y,C){var V=qe,ae=Zo.transition;try{Zo.transition=null,qe=1,Cc(p,y,C,V)}finally{Zo.transition=ae,qe=V}return null}function Cc(p,y,C,V){do $f();while(Sn!==null);if((Io&6)!==0)throw Error(l(327));C=p.finishedWork;var ae=p.finishedLanes;if(C===null)return null;if(p.finishedWork=null,p.finishedLanes=0,C===p.current)throw Error(l(177));p.callbackNode=null,p.callbackPriority=0;var Ie=C.lanes|C.childLanes;if(Ks(p,Ie),p===Go&&(Za=Go=null,as=0),(C.subtreeFlags&2064)===0&&(C.flags&2064)===0||Zr||(Zr=!0,Jh(ps,function(){return $f(),null})),Ie=(C.flags&15990)!==0,(C.subtreeFlags&15990)!==0||Ie){Ie=Zo.transition,Zo.transition=null;var ut=qe;qe=1;var zt=Io;Io|=4,Ls.current=null,ci(p,C),$a(C,p),yc(sl),sf=!!la,sl=la=null,p.current=C,is(C,p,ae),Ko(),Io=zt,qe=ut,Zo.transition=Ie}else p.current=C;if(Zr&&(Zr=!1,Sn=p,Or=ae),Ie=p.pendingLanes,Ie===0&&(yr=null),xu(C.stateNode,V),Cn(p,No()),y!==null)for(V=p.onRecoverableError,C=0;C<y.length;C++)ae=y[C],V(ae.value,{componentStack:ae.stack,digest:ae.digest});if(Ht)throw Ht=!1,p=Mt,Mt=null,p;return(Or&1)!==0&&p.tag!==0&&$f(),Ie=p.pendingLanes,(Ie&1)!==0?p===Br?ir++:(ir=0,Br=p):ir=0,Ct(),null}function $f(){if(Sn!==null){var p=Bt(Or),y=Zo.transition,C=qe;try{if(Zo.transition=null,qe=16>p?16:p,Sn===null)var V=!1;else{if(p=Sn,Sn=null,Or=0,(Io&6)!==0)throw Error(l(331));var ae=Io;for(Io|=4,Er=p.current;Er!==null;){var Ie=Er,ut=Ie.child;if((Er.flags&16)!==0){var zt=Ie.deletions;if(zt!==null){for(var wr=0;wr<zt.length;wr++){var fn=zt[wr];for(Er=fn;Er!==null;){var pi=Er;switch(pi.tag){case 0:case 11:case 15:Mi(8,pi,Ie)}var $n=pi.child;if($n!==null)$n.return=pi,Er=$n;else for(;Er!==null;){pi=Er;var hi=pi.sibling,ca=pi.return;if(kn(pi),pi===fn){Er=null;break}if(hi!==null){hi.return=ca,Er=hi;break}Er=ca}}}var Ra=Ie.alternate;if(Ra!==null){var Da=Ra.child;if(Da!==null){Ra.child=null;do{var os=Da.sibling;Da.sibling=null,Da=os}while(Da!==null)}}Er=Ie}}if((Ie.subtreeFlags&2064)!==0&&ut!==null)ut.return=Ie,Er=ut;else e:for(;Er!==null;){if(Ie=Er,(Ie.flags&2048)!==0)switch(Ie.tag){case 0:case 11:case 15:Mi(9,Ie,Ie.return)}var gn=Ie.sibling;if(gn!==null){gn.return=Ie.return,Er=gn;break e}Er=Ie.return}}var Qr=p.current;for(Er=Qr;Er!==null;){ut=Er;var In=ut.child;if((ut.subtreeFlags&2064)!==0&&In!==null)In.return=ut,Er=In;else e:for(ut=Qr;Er!==null;){if(zt=Er,(zt.flags&2048)!==0)try{switch(zt.tag){case 0:case 11:case 15:Xi(9,zt)}}catch(Ba){Bl(zt,zt.return,Ba)}if(zt===ut){Er=null;break e}var ra=zt.sibling;if(ra!==null){ra.return=zt.return,Er=ra;break e}Er=zt.return}}if(Io=ae,Ct(),Os&&typeof Os.onPostCommitFiberRoot=="function")try{Os.onPostCommitFiberRoot(Es,p)}catch(Ba){}V=!0}return V}finally{qe=C,Zo.transition=y}}return!1}function lh(p,y,C){y=vf(C,y),y=_e(p,y,1),p=fl(p,y,1),y=jt(),p!==null&&(Pu(p,1,y),Cn(p,y))}function Bl(p,y,C){if(p.tag===3)lh(p,p,C);else for(;y!==null;){if(y.tag===3){lh(y,p,C);break}else if(y.tag===1){var V=y.stateNode;if(typeof y.type.getDerivedStateFromError=="function"||typeof V.componentDidCatch=="function"&&(yr===null||!yr.has(V))){p=vf(C,p),p=Be(y,p,1),y=fl(y,p,1),p=jt(),y!==null&&(Pu(y,1,p),Cn(y,p));break}}y=y.return}}function jl(p,y,C){var V=p.pingCache;V!==null&&V.delete(y),y=jt(),p.pingedLanes|=p.suspendedLanes&C,Go===p&&(as&C)===C&&(Oa===4||Oa===3&&(as&130023424)===as&&500>No()-un?to(p,0):jo|=C),Cn(p,y)}function Lh(p,y){y===0&&((p.mode&1)===0?y=1:(y=rs,rs<<=1,(rs&130023424)===0&&(rs=4194304)));var C=jt();p=gl(p,y),p!==null&&(Pu(p,y,C),Cn(p,C))}function Qp(p){var y=p.memoizedState,C=0;y!==null&&(C=y.retryLane),Lh(p,C)}function Qh(p,y){var C=0;switch(p.tag){case 13:var V=p.stateNode,ae=p.memoizedState;ae!==null&&(C=ae.retryLane);break;case 19:V=p.stateNode;break;default:throw Error(l(314))}V!==null&&V.delete(y),Lh(p,C)}var jh;jh=function(p,y,C){if(p!==null)if(p.memoizedProps!==y.pendingProps||Fu.current)Ot=!0;else{if((p.lanes&C)===0&&(y.flags&128)===0)return Ot=!1,Sr(p,y,C);Ot=(p.flags&131072)!==0}else Ot=!1,Vi&&(y.flags&1048576)!==0&&Nn(y,or,y.index);switch(y.lanes=0,y.tag){case 2:var V=y.type;pt(p,y),p=y.pendingProps;var ae=hf(y,Mu.current);Nu(y,C),ae=oh(null,y,V,p,ae,C);var Ie=Ms();return y.flags|=1,typeof ae=="object"&&ae!==null&&typeof ae.render=="function"&&ae.$$typeof===void 0?(y.tag=1,y.memoizedState=null,y.updateQueue=null,Ol(V)?(Ie=!0,S(y)):Ie=!1,y.memoizedState=ae.state!==null&&ae.state!==void 0?ae.state:null,Sf(y),ae.updater=ts,y.stateNode=ae,ae._reactInternals=y,ap(y,V,p,C),y=ki(null,y,V,!0,Ie,C)):(y.tag=0,Vi&&Ie&&Xn(y),vr(null,y,ae,C),y=y.child),y;case 16:V=y.elementType;e:{switch(pt(p,y),p=y.pendingProps,ae=V._init,V=ae(V._payload),y.type=V,ae=y.tag=Ld(V),p=Ia(V,p),ae){case 0:y=Ni(null,y,V,p,C);break e;case 1:y=Bi(null,y,V,p,C);break e;case 11:y=xn(null,y,V,p,C);break e;case 14:y=Pn(null,y,V,Ia(V.type,p),C);break e}throw Error(l(306,V,""))}return y;case 0:return V=y.type,ae=y.pendingProps,ae=y.elementType===V?ae:Ia(V,ae),Ni(p,y,V,ae,C);case 1:return V=y.type,ae=y.pendingProps,ae=y.elementType===V?ae:Ia(V,ae),Bi(p,y,V,ae,C);case 3:e:{if(Gi(y),p===null)throw Error(l(387));V=y.pendingProps,Ie=y.memoizedState,ae=Ie.element,ip(p,y),Lu(y,V,null,C);var ut=y.memoizedState;if(V=ut.element,Ie.isDehydrated)if(Ie={element:V,isDehydrated:!1,cache:ut.cache,pendingSuspenseBoundaries:ut.pendingSuspenseBoundaries,transitions:ut.transitions},y.updateQueue.baseState=Ie,y.memoizedState=Ie,y.flags&256){ae=vf(Error(l(423)),y),y=Di(p,y,V,C,ae);break e}else if(V!==ae){ae=vf(Error(l(424)),y),y=Di(p,y,V,C,ae);break e}else for(Ei=Qo(y.stateNode.containerInfo.firstChild),Li=y,Vi=!0,Ea=null,C=rf(y,null,V,C),y.child=C;C;)C.flags=C.flags&-3|4096,C=C.sibling;else{if(Ha(),V===ae){y=Vt(p,y,C);break e}vr(p,y,V,C)}y=y.child}return y;case 5:return zp(y),p===null&&ya(y),V=y.type,ae=y.pendingProps,Ie=p!==null?p.memoizedProps:null,ut=ae.children,us(V,ae)?ut=null:Ie!==null&&us(V,Ie)&&(y.flags|=32),On(p,y),vr(p,y,ut,C),y.child;case 6:return p===null&&ya(y),null;case 13:return qi(p,y,C);case 4:return wp(y,y.stateNode.containerInfo),V=y.pendingProps,p===null?y.child=Pl(y,null,V,C):vr(p,y,V,C),y.child;case 11:return V=y.type,ae=y.pendingProps,ae=y.elementType===V?ae:Ia(V,ae),xn(p,y,V,ae,C);case 7:return vr(p,y,y.pendingProps,C),y.child;case 8:return vr(p,y,y.pendingProps.children,C),y.child;case 12:return vr(p,y,y.pendingProps.children,C),y.child;case 10:e:{if(V=y.type._context,ae=y.pendingProps,Ie=y.memoizedProps,ut=ae.value,fu(Gu,V._currentValue),V._currentValue=ut,Ie!==null)if(xi(Ie.value,ut)){if(Ie.children===ae.children&&!Fu.current){y=Vt(p,y,C);break e}}else for(Ie=y.child,Ie!==null&&(Ie.return=y);Ie!==null;){var zt=Ie.dependencies;if(zt!==null){ut=Ie.child;for(var wr=zt.firstContext;wr!==null;){if(wr.context===V){if(Ie.tag===1){wr=Kc(-1,C&-C),wr.tag=2;var fn=Ie.updateQueue;if(fn!==null){fn=fn.shared;var pi=fn.pending;pi===null?wr.next=wr:(wr.next=pi.next,pi.next=wr),fn.pending=wr}}Ie.lanes|=C,wr=Ie.alternate,wr!==null&&(wr.lanes|=C),rl(Ie.return,C,y),zt.lanes|=C;break}wr=wr.next}}else if(Ie.tag===10)ut=Ie.type===y.type?null:Ie.child;else if(Ie.tag===18){if(ut=Ie.return,ut===null)throw Error(l(341));ut.lanes|=C,zt=ut.alternate,zt!==null&&(zt.lanes|=C),rl(ut,C,y),ut=Ie.sibling}else ut=Ie.child;if(ut!==null)ut.return=Ie;else for(ut=Ie;ut!==null;){if(ut===y){ut=null;break}if(Ie=ut.sibling,Ie!==null){Ie.return=ut.return,ut=Ie;break}ut=ut.return}Ie=ut}vr(p,y,ae.children,C),y=y.child}return y;case 9:return ae=y.type,V=y.pendingProps.children,Nu(y,C),ae=zo(ae),V=V(ae),y.flags|=1,vr(p,y,V,C),y.child;case 14:return V=y.type,ae=Ia(V,y.pendingProps),ae=Ia(V.type,ae),Pn(p,y,V,ae,C);case 15:return ti(p,y,y.type,y.pendingProps,C);case 17:return V=y.type,ae=y.pendingProps,ae=y.elementType===V?ae:Ia(V,ae),pt(p,y),y.tag=1,Ol(V)?(p=!0,S(y)):p=!1,Nu(y,C),Rl(y,V,ae),ap(y,V,ae,C),ki(null,y,V,!0,p,C);case 19:return Qe(p,y,C);case 22:return Yn(p,y,C)}throw Error(l(156,y.tag))};function Jh(p,y){return Fo(p,y)}function wh(p,y,C,V){this.tag=p,this.key=C,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=y,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=V,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Tc(p,y,C,V){return new wh(p,y,C,V)}function Jp(p){return p=p.prototype,!(!p||!p.isReactComponent)}function Ld(p){if(typeof p=="function")return Jp(p)?1:0;if(p!=null){if(p=p.$$typeof,p===ie)return 11;if(p===ye)return 14}return 2}function Cp(p,y){var C=p.alternate;return C===null?(C=Tc(p.tag,y,p.key,p.mode),C.elementType=p.elementType,C.type=p.type,C.stateNode=p.stateNode,C.alternate=p,p.alternate=C):(C.pendingProps=y,C.type=p.type,C.flags=0,C.subtreeFlags=0,C.deletions=null),C.flags=p.flags&14680064,C.childLanes=p.childLanes,C.lanes=p.lanes,C.child=p.child,C.memoizedProps=p.memoizedProps,C.memoizedState=p.memoizedState,C.updateQueue=p.updateQueue,y=p.dependencies,C.dependencies=y===null?null:{lanes:y.lanes,firstContext:y.firstContext},C.sibling=p.sibling,C.index=p.index,C.ref=p.ref,C}function zl(p,y,C,V,ae,Ie){var ut=2;if(V=p,typeof p=="function")Jp(p)&&(ut=1);else if(typeof p=="string")ut=5;else e:switch(p){case Me:return Ff(C.children,ae,Ie,y);case Xe:ut=8,ae|=8;break;case Ke:return p=Tc(12,C,y,ae|2),p.elementType=Ke,p.lanes=Ie,p;case oe:return p=Tc(13,C,y,ae),p.elementType=oe,p.lanes=Ie,p;case he:return p=Tc(19,C,y,ae),p.elementType=he,p.lanes=Ie,p;case Ne:return Vh(C,ae,Ie,y);default:if(typeof p=="object"&&p!==null)switch(p.$$typeof){case At:ut=10;break e;case mt:ut=9;break e;case ie:ut=11;break e;case ye:ut=14;break e;case se:ut=16,V=null;break e}throw Error(l(130,p==null?p:typeof p,""))}return y=Tc(ut,C,y,ae),y.elementType=p,y.type=V,y.lanes=Ie,y}function Ff(p,y,C,V){return p=Tc(7,p,V,y),p.lanes=C,p}function Vh(p,y,C,V){return p=Tc(22,p,V,y),p.elementType=Ne,p.lanes=C,p.stateNode={isHidden:!1},p}function a(p,y,C){return p=Tc(6,p,null,y),p.lanes=C,p}function s(p,y,C){return y=Tc(4,p.children!==null?p.children:[],p.key,y),y.lanes=C,y.stateNode={containerInfo:p.containerInfo,pendingChildren:null,implementation:p.implementation},y}function h(p,y,C,V,ae){this.tag=y,this.containerInfo=p,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=nu(0),this.expirationTimes=nu(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=nu(0),this.identifierPrefix=V,this.onRecoverableError=ae,this.mutableSourceEagerHydrationData=null}function E(p,y,C,V,ae,Ie,ut,zt,wr){return p=new h(p,y,C,zt,wr),y===1?(y=1,Ie===!0&&(y|=8)):y=0,Ie=Tc(3,null,null,y),p.current=Ie,Ie.stateNode=p,Ie.memoizedState={element:V,isDehydrated:C,cache:null,transitions:null,pendingSuspenseBoundaries:null},Sf(Ie),p}function M(p,y,C){var V=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:we,key:V==null?null:""+V,children:p,containerInfo:y,implementation:C}}function L(p){if(!p)return Zl;p=p._reactInternals;e:{if(Wi(p)!==p||p.tag!==1)throw Error(l(170));var y=p;do{switch(y.tag){case 3:y=y.stateNode.context;break e;case 1:if(Ol(y.type)){y=y.stateNode.__reactInternalMemoizedMergedChildContext;break e}}y=y.return}while(y!==null);throw Error(l(171))}if(p.tag===1){var C=p.type;if(Ol(C))return m(p,C,y)}return y}function j(p,y,C,V,ae,Ie,ut,zt,wr){return p=E(C,V,!0,p,ae,Ie,ut,zt,wr),p.context=L(null),C=p.current,V=jt(),ae=rn(C),Ie=Kc(V,ae),Ie.callback=y!=null?y:null,fl(C,Ie,ae),p.current.lanes=ae,Pu(p,ae,V),Cn(p,V),p}function re(p,y,C,V){var ae=y.current,Ie=jt(),ut=rn(ae);return C=L(C),y.context===null?y.context=C:y.pendingContext=C,y=Kc(Ie,ut),y.payload={element:p},V=V===void 0?null:V,V!==null&&(y.callback=V),p=fl(ae,y,ut),p!==null&&(jr(p,ae,ut,Ie),Qc(p,ae,ut)),ut}function Ce(p){if(p=p.current,!p.child)return null;switch(p.child.tag){case 5:return p.child.stateNode;default:return p.child.stateNode}}function ze(p,y){if(p=p.memoizedState,p!==null&&p.dehydrated!==null){var C=p.retryLane;p.retryLane=C!==0&&C<y?C:y}}function We(p,y){ze(p,y),(p=p.alternate)&&ze(p,y)}function Je(){return null}var _t=typeof reportError=="function"?reportError:function(p){console.error(p)};function It(p){this._internalRoot=p}ar.prototype.render=It.prototype.render=function(p){var y=this._internalRoot;if(y===null)throw Error(l(409));re(p,y,null,null)},ar.prototype.unmount=It.prototype.unmount=function(){var p=this._internalRoot;if(p!==null){this._internalRoot=null;var y=p.containerInfo;pa(function(){re(null,p,null,null)}),y[eu]=null}};function ar(p){this._internalRoot=p}ar.prototype.unstable_scheduleHydration=function(p){if(p){var y=nr();p={blockedOn:null,target:p,priority:y};for(var C=0;C<lo.length&&y!==0&&y<lo[C].priority;C++);lo.splice(C,0,p),C===0&&Ss(p)}};function ur(p){return!(!p||p.nodeType!==1&&p.nodeType!==9&&p.nodeType!==11)}function Rr(p){return!(!p||p.nodeType!==1&&p.nodeType!==9&&p.nodeType!==11&&(p.nodeType!==8||p.nodeValue!==" react-mount-point-unstable "))}function mr(){}function cn(p,y,C,V,ae){if(ae){if(typeof V=="function"){var Ie=V;V=function(){var fn=Ce(ut);Ie.call(fn)}}var ut=j(y,V,p,0,null,!1,!1,"",mr);return p._reactRootContainer=ut,p[eu]=ut.current,Vn(p.nodeType===8?p.parentNode:p),pa(),ut}for(;ae=p.lastChild;)p.removeChild(ae);if(typeof V=="function"){var zt=V;V=function(){var fn=Ce(wr);zt.call(fn)}}var wr=E(p,0,!1,null,null,!1,!1,"",mr);return p._reactRootContainer=wr,p[eu]=wr.current,Vn(p.nodeType===8?p.parentNode:p),pa(function(){re(y,wr,C,V)}),wr}function wn(p,y,C,V,ae){var Ie=C._reactRootContainer;if(Ie){var ut=Ie;if(typeof ae=="function"){var zt=ae;ae=function(){var wr=Ce(ut);zt.call(wr)}}re(y,ut,p,ae)}else ut=cn(C,y,p,ae,V);return Ce(ut)}ge=function(p){switch(p.tag){case 3:var y=p.stateNode;if(y.current.memoizedState.isDehydrated){var C=au(y.pendingLanes);C!==0&&($u(y,C|1),Cn(y,No()),(Io&6)===0&&(oa=No()+500,Ct()))}break;case 13:pa(function(){var V=gl(p,1);if(V!==null){var ae=jt();jr(V,p,1,ae)}}),We(p,1)}},je=function(p){if(p.tag===13){var y=gl(p,134217728);if(y!==null){var C=jt();jr(y,p,134217728,C)}We(p,134217728)}},wt=function(p){if(p.tag===13){var y=rn(p),C=gl(p,y);if(C!==null){var V=jt();jr(C,p,y,V)}We(p,y)}},nr=function(){return qe},en=function(p,y){var C=qe;try{return qe=p,y()}finally{qe=C}},ka=function(p,y,C){switch(y){case"input":if(kr(p,C),y=C.name,C.type==="radio"&&y!=null){for(C=p;C.parentNode;)C=C.parentNode;for(C=C.querySelectorAll("input[name="+JSON.stringify(""+y)+'][type="radio"]'),y=0;y<C.length;y++){var V=C[y];if(V!==p&&V.form===p.form){var ae=pf(V);if(!ae)throw Error(l(90));Qn(V),kr(V,ae)}}}break;case"textarea":dt(p,C);break;case"select":y=C.value,y!=null&&fe(p,!!C.multiple,y,!1)}},Et=Ca,Zt=pa;var Gn={usingClientEntryPoint:!1,Events:[Mo,rp,pf,gt,ht,Ca]},Zn={findFiberByHostInstance:tu,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},gi={bundleType:Zn.bundleType,version:Zn.version,rendererPackageName:Zn.rendererPackageName,rendererConfig:Zn.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:K.ReactCurrentDispatcher,findHostInstanceByFiber:function(p){return p=Jr(p),p===null?null:p.stateNode},findFiberByHostInstance:Zn.findFiberByHostInstance||Je,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__!="undefined"){var Yi=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Yi.isDisabled&&Yi.supportsFiber)try{Es=Yi.inject(gi),Os=Yi}catch(p){}}F.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Gn,F.createPortal=function(p,y){var C=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!ur(y))throw Error(l(200));return M(p,y,null,C)},F.createRoot=function(p,y){if(!ur(p))throw Error(l(299));var C=!1,V="",ae=_t;return y!=null&&(y.unstable_strictMode===!0&&(C=!0),y.identifierPrefix!==void 0&&(V=y.identifierPrefix),y.onRecoverableError!==void 0&&(ae=y.onRecoverableError)),y=E(p,1,!1,null,null,C,!1,V,ae),p[eu]=y.current,Vn(p.nodeType===8?p.parentNode:p),new It(y)},F.findDOMNode=function(p){if(p==null)return null;if(p.nodeType===1)return p;var y=p._reactInternals;if(y===void 0)throw typeof p.render=="function"?Error(l(188)):(p=Object.keys(p).join(","),Error(l(268,p)));return p=Jr(y),p=p===null?null:p.stateNode,p},F.flushSync=function(p){return pa(p)},F.hydrate=function(p,y,C){if(!Rr(y))throw Error(l(200));return wn(null,p,y,!0,C)},F.hydrateRoot=function(p,y,C){if(!ur(p))throw Error(l(405));var V=C!=null&&C.hydratedSources||null,ae=!1,Ie="",ut=_t;if(C!=null&&(C.unstable_strictMode===!0&&(ae=!0),C.identifierPrefix!==void 0&&(Ie=C.identifierPrefix),C.onRecoverableError!==void 0&&(ut=C.onRecoverableError)),y=j(y,null,p,1,C!=null?C:null,ae,!1,Ie,ut),p[eu]=y.current,Vn(p),V)for(p=0;p<V.length;p++)C=V[p],ae=C._getVersion,ae=ae(C._source),y.mutableSourceEagerHydrationData==null?y.mutableSourceEagerHydrationData=[C,ae]:y.mutableSourceEagerHydrationData.push(C,ae);return new ar(y)},F.render=function(p,y,C){if(!Rr(y))throw Error(l(200));return wn(null,p,y,!1,C)},F.unmountComponentAtNode=function(p){if(!Rr(p))throw Error(l(40));return p._reactRootContainer?(pa(function(){wn(null,null,p,!1,function(){p._reactRootContainer=null,p[eu]=null})}),!0):!1},F.unstable_batchedUpdates=Ca,F.unstable_renderSubtreeIntoContainer=function(p,y,C,V){if(!Rr(C))throw Error(l(200));if(p==null||p._reactInternals===void 0)throw Error(l(38));return wn(p,y,C,!1,V)},F.version="18.2.0-next-9e3b772b8-20220608"},44478:function(U,F,c){"use strict";var w=c(10422);if(!0)F.createRoot=w.createRoot,F.hydrateRoot=w.hydrateRoot;else var v},10422:function(U,F,c){"use strict";function w(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__=="undefined"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(w)}catch(v){console.error(v)}}w(),U.exports=c(53746)},60481:function(U,F,c){(function(w,v){v(F,c(50959))})(this,function(w,v){"use strict";function l(Y){if(Y&&Y.__esModule)return Y;var te=Object.create(null);return Y&&Object.keys(Y).forEach(function(le){if(le!=="default"){var be=Object.getOwnPropertyDescriptor(Y,le);Object.defineProperty(te,le,be.get?be:{enumerable:!0,get:function(){return Y[le]}})}}),te.default=Y,Object.freeze(te)}var R=l(v);function A(Y,te){return A=Object.setPrototypeOf||function(be,de){return be.__proto__=de,be},A(Y,te)}function D(Y,te){Y.prototype=Object.create(te.prototype),Y.prototype.constructor=Y,A(Y,te)}var k=function(te,le){return te===void 0&&(te=[]),le===void 0&&(le=[]),te.length!==le.length||te.some(function(be,de){return!Object.is(be,le[de])})},B={error:null},z=function(Y){D(te,Y);function te(){for(var be,de=arguments.length,pe=new Array(de),Oe=0;Oe<de;Oe++)pe[Oe]=arguments[Oe];return be=Y.call.apply(Y,[this].concat(pe))||this,be.state=B,be.resetErrorBoundary=function(){for(var xe,Ve=arguments.length,K=new Array(Ve),ke=0;ke<Ve;ke++)K[ke]=arguments[ke];be.props.onReset==null||(xe=be.props).onReset.apply(xe,K),be.reset()},be}te.getDerivedStateFromError=function(de){return{error:de}};var le=te.prototype;return le.reset=function(){this.setState(B)},le.componentDidCatch=function(de,pe){var Oe,xe;(Oe=(xe=this.props).onError)==null||Oe.call(xe,de,pe)},le.componentDidUpdate=function(de,pe){var Oe=this.state.error,xe=this.props.resetKeys;if(Oe!==null&&pe.error!==null&&k(de.resetKeys,xe)){var Ve,K;(Ve=(K=this.props).onResetKeysChange)==null||Ve.call(K,de.resetKeys,xe),this.reset()}},le.render=function(){var de=this.state.error,pe=this.props,Oe=pe.fallbackRender,xe=pe.FallbackComponent,Ve=pe.fallback;if(de!==null){var K={error:de,resetErrorBoundary:this.resetErrorBoundary};if(R.isValidElement(Ve))return Ve;if(typeof Oe=="function")return Oe(K);if(xe)return R.createElement(xe,K);throw new Error("react-error-boundary requires either a fallback, fallbackRender, or FallbackComponent prop")}return this.props.children},te}(R.Component);function Z(Y,te){var le=function(pe){return R.createElement(z,te,R.createElement(Y,pe))},be=Y.displayName||Y.name||"Unknown";return le.displayName="withErrorBoundary("+be+")",le}function W(Y){var te=R.useState(null),le=te[0],be=te[1];if(Y!=null)throw Y;if(le!=null)throw le;return be}w.ErrorBoundary=z,w.useErrorHandler=W,w.withErrorBoundary=Z,Object.defineProperty(w,"__esModule",{value:!0})})},61970:function(U){var F=typeof Element!="undefined",c=typeof Map=="function",w=typeof Set=="function",v=typeof ArrayBuffer=="function"&&!!ArrayBuffer.isView;function l(R,A){if(R===A)return!0;if(R&&A&&typeof R=="object"&&typeof A=="object"){if(R.constructor!==A.constructor)return!1;var D,k,B;if(Array.isArray(R)){if(D=R.length,D!=A.length)return!1;for(k=D;k--!==0;)if(!l(R[k],A[k]))return!1;return!0}var z;if(c&&R instanceof Map&&A instanceof Map){if(R.size!==A.size)return!1;for(z=R.entries();!(k=z.next()).done;)if(!A.has(k.value[0]))return!1;for(z=R.entries();!(k=z.next()).done;)if(!l(k.value[1],A.get(k.value[0])))return!1;return!0}if(w&&R instanceof Set&&A instanceof Set){if(R.size!==A.size)return!1;for(z=R.entries();!(k=z.next()).done;)if(!A.has(k.value[0]))return!1;return!0}if(v&&ArrayBuffer.isView(R)&&ArrayBuffer.isView(A)){if(D=R.length,D!=A.length)return!1;for(k=D;k--!==0;)if(R[k]!==A[k])return!1;return!0}if(R.constructor===RegExp)return R.source===A.source&&R.flags===A.flags;if(R.valueOf!==Object.prototype.valueOf)return R.valueOf()===A.valueOf();if(R.toString!==Object.prototype.toString)return R.toString()===A.toString();if(B=Object.keys(R),D=B.length,D!==Object.keys(A).length)return!1;for(k=D;k--!==0;)if(!Object.prototype.hasOwnProperty.call(A,B[k]))return!1;if(F&&R instanceof Element)return!1;for(k=D;k--!==0;)if(!((B[k]==="_owner"||B[k]==="__v"||B[k]==="__o")&&R.$$typeof)&&!l(R[B[k]],A[B[k]]))return!1;return!0}return R!==R&&A!==A}U.exports=function(A,D){try{return l(A,D)}catch(k){if((k.message||"").match(/stack|recursion/i))return console.warn("react-fast-compare cannot handle circular refs"),!1;throw k}}},87593:function(U,F,c){"use strict";c.d(F,{B6:function(){return Cr},ql:function(){return _n}});var w=c(50959),v=c(40507),l=c.n(v),R=c(61970),A=c.n(R),D=c(53670),k=c.n(D),B=c(50631),z=c.n(B);function Z(){return Z=Object.assign||function(Yr){for(var Fr=1;Fr<arguments.length;Fr++){var kr=arguments[Fr];for(var ft in kr)Object.prototype.hasOwnProperty.call(kr,ft)&&(Yr[ft]=kr[ft])}return Yr},Z.apply(this,arguments)}function W(Yr,Fr){Yr.prototype=Object.create(Fr.prototype),Yr.prototype.constructor=Yr,Y(Yr,Fr)}function Y(Yr,Fr){return Y=Object.setPrototypeOf||function(kr,ft){return kr.__proto__=ft,kr},Y(Yr,Fr)}function te(Yr,Fr){if(Yr==null)return{};var kr,ft,me={},ne=Object.keys(Yr);for(ft=0;ft<ne.length;ft++)Fr.indexOf(kr=ne[ft])>=0||(me[kr]=Yr[kr]);return me}var le={BASE:"base",BODY:"body",HEAD:"head",HTML:"html",LINK:"link",META:"meta",NOSCRIPT:"noscript",SCRIPT:"script",STYLE:"style",TITLE:"title",FRAGMENT:"Symbol(react.fragment)"},be={rel:["amphtml","canonical","alternate"]},de={type:["application/ld+json"]},pe={charset:"",name:["robots","description"],property:["og:type","og:title","og:url","og:image","og:image:alt","og:description","twitter:url","twitter:title","twitter:description","twitter:image","twitter:image:alt","twitter:card","twitter:site"]},Oe=Object.keys(le).map(function(Yr){return le[Yr]}),xe={accesskey:"accessKey",charset:"charSet",class:"className",contenteditable:"contentEditable",contextmenu:"contextMenu","http-equiv":"httpEquiv",itemprop:"itemProp",tabindex:"tabIndex"},Ve=Object.keys(xe).reduce(function(Yr,Fr){return Yr[xe[Fr]]=Fr,Yr},{}),K=function(Yr,Fr){for(var kr=Yr.length-1;kr>=0;kr-=1){var ft=Yr[kr];if(Object.prototype.hasOwnProperty.call(ft,Fr))return ft[Fr]}return null},ke=function(Yr){var Fr=K(Yr,le.TITLE),kr=K(Yr,"titleTemplate");if(Array.isArray(Fr)&&(Fr=Fr.join("")),kr&&Fr)return kr.replace(/%s/g,function(){return Fr});var ft=K(Yr,"defaultTitle");return Fr||ft||void 0},we=function(Yr){return K(Yr,"onChangeClientState")||function(){}},Me=function(Yr,Fr){return Fr.filter(function(kr){return kr[Yr]!==void 0}).map(function(kr){return kr[Yr]}).reduce(function(kr,ft){return Z({},kr,ft)},{})},Xe=function(Yr,Fr){return Fr.filter(function(kr){return kr[le.BASE]!==void 0}).map(function(kr){return kr[le.BASE]}).reverse().reduce(function(kr,ft){if(!kr.length)for(var me=Object.keys(ft),ne=0;ne<me.length;ne+=1){var fe=me[ne].toLowerCase();if(Yr.indexOf(fe)!==-1&&ft[fe])return kr.concat(ft)}return kr},[])},Ke=function(Yr,Fr,kr){var ft={};return kr.filter(function(me){return!!Array.isArray(me[Yr])||(me[Yr]!==void 0&&console&&typeof console.warn=="function"&&console.warn("Helmet: "+Yr+' should be of type "Array". Instead found type "'+typeof me[Yr]+'"'),!1)}).map(function(me){return me[Yr]}).reverse().reduce(function(me,ne){var fe={};ne.filter(function(it){for(var lt,qt=Object.keys(it),pr=0;pr<qt.length;pr+=1){var Hr=qt[pr],Xr=Hr.toLowerCase();Fr.indexOf(Xr)===-1||lt==="rel"&&it[lt].toLowerCase()==="canonical"||Xr==="rel"&&it[Xr].toLowerCase()==="stylesheet"||(lt=Xr),Fr.indexOf(Hr)===-1||Hr!=="innerHTML"&&Hr!=="cssText"&&Hr!=="itemprop"||(lt=Hr)}if(!lt||!it[lt])return!1;var ce=it[lt].toLowerCase();return ft[lt]||(ft[lt]={}),fe[lt]||(fe[lt]={}),!ft[lt][ce]&&(fe[lt][ce]=!0,!0)}).reverse().forEach(function(it){return me.push(it)});for(var Q=Object.keys(fe),De=0;De<Q.length;De+=1){var dt=Q[De],Jt=Z({},ft[dt],fe[dt]);ft[dt]=Jt}return me},[]).reverse()},At=function(Yr,Fr){if(Array.isArray(Yr)&&Yr.length){for(var kr=0;kr<Yr.length;kr+=1)if(Yr[kr][Fr])return!0}return!1},mt=function(Yr){return Array.isArray(Yr)?Yr.join(""):Yr},ie=function(Yr,Fr){return Array.isArray(Yr)?Yr.reduce(function(kr,ft){return function(me,ne){for(var fe=Object.keys(me),Q=0;Q<fe.length;Q+=1)if(ne[fe[Q]]&&ne[fe[Q]].includes(me[fe[Q]]))return!0;return!1}(ft,Fr)?kr.priority.push(ft):kr.default.push(ft),kr},{priority:[],default:[]}):{default:Yr}},oe=function(Yr,Fr){var kr;return Z({},Yr,((kr={})[Fr]=void 0,kr))},he=[le.NOSCRIPT,le.SCRIPT,le.STYLE],ye=function(Yr,Fr){return Fr===void 0&&(Fr=!0),Fr===!1?String(Yr):String(Yr).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;")},se=function(Yr){return Object.keys(Yr).reduce(function(Fr,kr){var ft=Yr[kr]!==void 0?kr+'="'+Yr[kr]+'"':""+kr;return Fr?Fr+" "+ft:ft},"")},Ne=function(Yr,Fr){return Fr===void 0&&(Fr={}),Object.keys(Yr).reduce(function(kr,ft){return kr[xe[ft]||ft]=Yr[ft],kr},Fr)},st=function(Yr,Fr){return Fr.map(function(kr,ft){var me,ne=((me={key:ft})["data-rh"]=!0,me);return Object.keys(kr).forEach(function(fe){var Q=xe[fe]||fe;Q==="innerHTML"||Q==="cssText"?ne.dangerouslySetInnerHTML={__html:kr.innerHTML||kr.cssText}:ne[Q]=kr[fe]}),w.createElement(Yr,ne)})},Fe=function(Yr,Fr,kr){switch(Yr){case le.TITLE:return{toComponent:function(){return me=Fr.titleAttributes,(ne={key:ft=Fr.title})["data-rh"]=!0,fe=Ne(me,ne),[w.createElement(le.TITLE,fe,ft)];var ft,me,ne,fe},toString:function(){return function(ft,me,ne,fe){var Q=se(ne),De=mt(me);return Q?"<"+ft+' data-rh="true" '+Q+">"+ye(De,fe)+"</"+ft+">":"<"+ft+' data-rh="true">'+ye(De,fe)+"</"+ft+">"}(Yr,Fr.title,Fr.titleAttributes,kr)}};case"bodyAttributes":case"htmlAttributes":return{toComponent:function(){return Ne(Fr)},toString:function(){return se(Fr)}};default:return{toComponent:function(){return st(Yr,Fr)},toString:function(){return function(ft,me,ne){return me.reduce(function(fe,Q){var De=Object.keys(Q).filter(function(it){return!(it==="innerHTML"||it==="cssText")}).reduce(function(it,lt){var qt=Q[lt]===void 0?lt:lt+'="'+ye(Q[lt],ne)+'"';return it?it+" "+qt:qt},""),dt=Q.innerHTML||Q.cssText||"",Jt=he.indexOf(ft)===-1;return fe+"<"+ft+' data-rh="true" '+De+(Jt?"/>":">"+dt+"</"+ft+">")},"")}(Yr,Fr,kr)}}}},tt=function(Yr){var Fr=Yr.baseTag,kr=Yr.bodyAttributes,ft=Yr.encode,me=Yr.htmlAttributes,ne=Yr.noscriptTags,fe=Yr.styleTags,Q=Yr.title,De=Q===void 0?"":Q,dt=Yr.titleAttributes,Jt=Yr.linkTags,it=Yr.metaTags,lt=Yr.scriptTags,qt={toComponent:function(){},toString:function(){return""}};if(Yr.prioritizeSeoTags){var pr=function(Hr){var Xr=Hr.linkTags,ce=Hr.scriptTags,xt=Hr.encode,Gt=ie(Hr.metaTags,pe),Ir=ie(Xr,be),nn=ie(ce,de);return{priorityMethods:{toComponent:function(){return[].concat(st(le.META,Gt.priority),st(le.LINK,Ir.priority),st(le.SCRIPT,nn.priority))},toString:function(){return Fe(le.META,Gt.priority,xt)+" "+Fe(le.LINK,Ir.priority,xt)+" "+Fe(le.SCRIPT,nn.priority,xt)}},metaTags:Gt.default,linkTags:Ir.default,scriptTags:nn.default}}(Yr);qt=pr.priorityMethods,Jt=pr.linkTags,it=pr.metaTags,lt=pr.scriptTags}return{priority:qt,base:Fe(le.BASE,Fr,ft),bodyAttributes:Fe("bodyAttributes",kr,ft),htmlAttributes:Fe("htmlAttributes",me,ft),link:Fe(le.LINK,Jt,ft),meta:Fe(le.META,it,ft),noscript:Fe(le.NOSCRIPT,ne,ft),script:Fe(le.SCRIPT,lt,ft),style:Fe(le.STYLE,fe,ft),title:Fe(le.TITLE,{title:De,titleAttributes:dt},ft)}},Wt=[],Pr=function(Yr,Fr){var kr=this;Fr===void 0&&(Fr=typeof document!="undefined"),this.instances=[],this.value={setHelmet:function(ft){kr.context.helmet=ft},helmetInstances:{get:function(){return kr.canUseDOM?Wt:kr.instances},add:function(ft){(kr.canUseDOM?Wt:kr.instances).push(ft)},remove:function(ft){var me=(kr.canUseDOM?Wt:kr.instances).indexOf(ft);(kr.canUseDOM?Wt:kr.instances).splice(me,1)}}},this.context=Yr,this.canUseDOM=Fr,Fr||(Yr.helmet=tt({baseTag:[],bodyAttributes:{},encodeSpecialCharacters:!0,htmlAttributes:{},linkTags:[],metaTags:[],noscriptTags:[],scriptTags:[],styleTags:[],title:"",titleAttributes:{}}))},Qt=w.createContext({}),xr=l().shape({setHelmet:l().func,helmetInstances:l().shape({get:l().func,add:l().func,remove:l().func})}),$r=typeof document!="undefined",Cr=function(Yr){function Fr(kr){var ft;return(ft=Yr.call(this,kr)||this).helmetData=new Pr(ft.props.context,Fr.canUseDOM),ft}return W(Fr,Yr),Fr.prototype.render=function(){return w.createElement(Qt.Provider,{value:this.helmetData.value},this.props.children)},Fr}(w.Component);Cr.canUseDOM=$r,Cr.propTypes={context:l().shape({helmet:l().shape()}),children:l().node.isRequired},Cr.defaultProps={context:{}},Cr.displayName="HelmetProvider";var sn=function(Yr,Fr){var kr,ft=document.head||document.querySelector(le.HEAD),me=ft.querySelectorAll(Yr+"[data-rh]"),ne=[].slice.call(me),fe=[];return Fr&&Fr.length&&Fr.forEach(function(Q){var De=document.createElement(Yr);for(var dt in Q)Object.prototype.hasOwnProperty.call(Q,dt)&&(dt==="innerHTML"?De.innerHTML=Q.innerHTML:dt==="cssText"?De.styleSheet?De.styleSheet.cssText=Q.cssText:De.appendChild(document.createTextNode(Q.cssText)):De.setAttribute(dt,Q[dt]===void 0?"":Q[dt]));De.setAttribute("data-rh","true"),ne.some(function(Jt,it){return kr=it,De.isEqualNode(Jt)})?ne.splice(kr,1):fe.push(De)}),ne.forEach(function(Q){return Q.parentNode.removeChild(Q)}),fe.forEach(function(Q){return ft.appendChild(Q)}),{oldTags:ne,newTags:fe}},ot=function(Yr,Fr){var kr=document.getElementsByTagName(Yr)[0];if(kr){for(var ft=kr.getAttribute("data-rh"),me=ft?ft.split(","):[],ne=[].concat(me),fe=Object.keys(Fr),Q=0;Q<fe.length;Q+=1){var De=fe[Q],dt=Fr[De]||"";kr.getAttribute(De)!==dt&&kr.setAttribute(De,dt),me.indexOf(De)===-1&&me.push(De);var Jt=ne.indexOf(De);Jt!==-1&&ne.splice(Jt,1)}for(var it=ne.length-1;it>=0;it-=1)kr.removeAttribute(ne[it]);me.length===ne.length?kr.removeAttribute("data-rh"):kr.getAttribute("data-rh")!==fe.join(",")&&kr.setAttribute("data-rh",fe.join(","))}},_r=function(Yr,Fr){var kr=Yr.baseTag,ft=Yr.htmlAttributes,me=Yr.linkTags,ne=Yr.metaTags,fe=Yr.noscriptTags,Q=Yr.onChangeClientState,De=Yr.scriptTags,dt=Yr.styleTags,Jt=Yr.title,it=Yr.titleAttributes;ot(le.BODY,Yr.bodyAttributes),ot(le.HTML,ft),function(Hr,Xr){Hr!==void 0&&document.title!==Hr&&(document.title=mt(Hr)),ot(le.TITLE,Xr)}(Jt,it);var lt={baseTag:sn(le.BASE,kr),linkTags:sn(le.LINK,me),metaTags:sn(le.META,ne),noscriptTags:sn(le.NOSCRIPT,fe),scriptTags:sn(le.SCRIPT,De),styleTags:sn(le.STYLE,dt)},qt={},pr={};Object.keys(lt).forEach(function(Hr){var Xr=lt[Hr],ce=Xr.newTags,xt=Xr.oldTags;ce.length&&(qt[Hr]=ce),xt.length&&(pr[Hr]=lt[Hr].oldTags)}),Fr&&Fr(),Q(Yr,qt,pr)},cr=null,Vr=function(Yr){function Fr(){for(var ft,me=arguments.length,ne=new Array(me),fe=0;fe<me;fe++)ne[fe]=arguments[fe];return(ft=Yr.call.apply(Yr,[this].concat(ne))||this).rendered=!1,ft}W(Fr,Yr);var kr=Fr.prototype;return kr.shouldComponentUpdate=function(ft){return!z()(ft,this.props)},kr.componentDidUpdate=function(){this.emitChange()},kr.componentWillUnmount=function(){this.props.context.helmetInstances.remove(this),this.emitChange()},kr.emitChange=function(){var ft,me,ne=this.props.context,fe=ne.setHelmet,Q=null,De=(ft=ne.helmetInstances.get().map(function(dt){var Jt=Z({},dt.props);return delete Jt.context,Jt}),{baseTag:Xe(["href"],ft),bodyAttributes:Me("bodyAttributes",ft),defer:K(ft,"defer"),encode:K(ft,"encodeSpecialCharacters"),htmlAttributes:Me("htmlAttributes",ft),linkTags:Ke(le.LINK,["rel","href"],ft),metaTags:Ke(le.META,["name","charset","http-equiv","property","itemprop"],ft),noscriptTags:Ke(le.NOSCRIPT,["innerHTML"],ft),onChangeClientState:we(ft),scriptTags:Ke(le.SCRIPT,["src","innerHTML"],ft),styleTags:Ke(le.STYLE,["cssText"],ft),title:ke(ft),titleAttributes:Me("titleAttributes",ft),prioritizeSeoTags:At(ft,"prioritizeSeoTags")});Cr.canUseDOM?(me=De,cr&&cancelAnimationFrame(cr),me.defer?cr=requestAnimationFrame(function(){_r(me,function(){cr=null})}):(_r(me),cr=null)):tt&&(Q=tt(De)),fe(Q)},kr.init=function(){this.rendered||(this.rendered=!0,this.props.context.helmetInstances.add(this),this.emitChange())},kr.render=function(){return this.init(),null},Fr}(w.Component);Vr.propTypes={context:xr.isRequired},Vr.displayName="HelmetDispatcher";var Qn=["children"],mn=["children"],_n=function(Yr){function Fr(){return Yr.apply(this,arguments)||this}W(Fr,Yr);var kr=Fr.prototype;return kr.shouldComponentUpdate=function(ft){return!A()(oe(this.props,"helmetData"),oe(ft,"helmetData"))},kr.mapNestedChildrenToProps=function(ft,me){if(!me)return null;switch(ft.type){case le.SCRIPT:case le.NOSCRIPT:return{innerHTML:me};case le.STYLE:return{cssText:me};default:throw new Error("<"+ft.type+" /> elements are self-closing and can not contain children. Refer to our API for more information.")}},kr.flattenArrayTypeChildren=function(ft){var me,ne=ft.child,fe=ft.arrayTypeChildren;return Z({},fe,((me={})[ne.type]=[].concat(fe[ne.type]||[],[Z({},ft.newChildProps,this.mapNestedChildrenToProps(ne,ft.nestedChildren))]),me))},kr.mapObjectTypeChildren=function(ft){var me,ne,fe=ft.child,Q=ft.newProps,De=ft.newChildProps,dt=ft.nestedChildren;switch(fe.type){case le.TITLE:return Z({},Q,((me={})[fe.type]=dt,me.titleAttributes=Z({},De),me));case le.BODY:return Z({},Q,{bodyAttributes:Z({},De)});case le.HTML:return Z({},Q,{htmlAttributes:Z({},De)});default:return Z({},Q,((ne={})[fe.type]=Z({},De),ne))}},kr.mapArrayTypeChildrenToProps=function(ft,me){var ne=Z({},me);return Object.keys(ft).forEach(function(fe){var Q;ne=Z({},ne,((Q={})[fe]=ft[fe],Q))}),ne},kr.warnOnInvalidChildren=function(ft,me){return k()(Oe.some(function(ne){return ft.type===ne}),typeof ft.type=="function"?"You may be attempting to nest <Helmet> components within each other, which is not allowed. Refer to our API for more information.":"Only elements types "+Oe.join(", ")+" are allowed. Helmet does not support rendering <"+ft.type+"> elements. Refer to our API for more information."),k()(!me||typeof me=="string"||Array.isArray(me)&&!me.some(function(ne){return typeof ne!="string"}),"Helmet expects a string as a child of <"+ft.type+">. Did you forget to wrap your children in braces? ( <"+ft.type+">{``}</"+ft.type+"> ) Refer to our API for more information."),!0},kr.mapChildrenToProps=function(ft,me){var ne=this,fe={};return w.Children.forEach(ft,function(Q){if(Q&&Q.props){var De=Q.props,dt=De.children,Jt=te(De,Qn),it=Object.keys(Jt).reduce(function(qt,pr){return qt[Ve[pr]||pr]=Jt[pr],qt},{}),lt=Q.type;switch(typeof lt=="symbol"?lt=lt.toString():ne.warnOnInvalidChildren(Q,dt),lt){case le.FRAGMENT:me=ne.mapChildrenToProps(dt,me);break;case le.LINK:case le.META:case le.NOSCRIPT:case le.SCRIPT:case le.STYLE:fe=ne.flattenArrayTypeChildren({child:Q,arrayTypeChildren:fe,newChildProps:it,nestedChildren:dt});break;default:me=ne.mapObjectTypeChildren({child:Q,newProps:me,newChildProps:it,nestedChildren:dt})}}}),this.mapArrayTypeChildrenToProps(fe,me)},kr.render=function(){var ft=this.props,me=ft.children,ne=te(ft,mn),fe=Z({},ne),Q=ne.helmetData;return me&&(fe=this.mapChildrenToProps(me,fe)),!Q||Q instanceof Pr||(Q=new Pr(Q.context,Q.instances)),Q?w.createElement(Vr,Z({},fe,{context:Q.value,helmetData:void 0})):w.createElement(Qt.Consumer,null,function(De){return w.createElement(Vr,Z({},fe,{context:De}))})},Fr}(w.Component);_n.propTypes={base:l().object,bodyAttributes:l().object,children:l().oneOfType([l().arrayOf(l().node),l().node]),defaultTitle:l().string,defer:l().bool,encodeSpecialCharacters:l().bool,htmlAttributes:l().object,link:l().arrayOf(l().object),meta:l().arrayOf(l().object),noscript:l().arrayOf(l().object),onChangeClientState:l().func,script:l().arrayOf(l().object),style:l().arrayOf(l().object),title:l().string,titleAttributes:l().object,titleTemplate:l().string,prioritizeSeoTags:l().bool,helmetData:l().object},_n.defaultProps={defer:!0,encodeSpecialCharacters:!0,prioritizeSeoTags:!1},_n.displayName="Helmet"},20266:function(U,F,c){"use strict";c.d(F,{_y:function(){return z},zt:function(){return B}});var w=c(50959),v=c(72535),l=c.n(v);function R(W){return W.displayName||W.name||"Component"}var A=w.createContext(null),D=A.Consumer,k=A.Provider,B=k,z=A;function Z(W,Y){var te=Y||{},le=te.intlPropName,be=le===void 0?"intl":le,de=te.forwardRef,pe=de===void 0?!1:de,Oe=te.enforceContext,xe=Oe===void 0?!0:Oe,Ve=function(K){return React.createElement(D,null,function(ke){var we;xe&&invariantIntlContext(ke);var Me=(we={},we[be]=ke,we);return React.createElement(W,__assign({},K,Me,{ref:pe?K.forwardedRef:null}))})};return Ve.displayName="injectIntl(".concat(R(W),")"),Ve.WrappedComponent=W,pe?hoistNonReactStatics(React.forwardRef(function(K,ke){return React.createElement(Ve,__assign({},K,{forwardedRef:ke}))}),W):hoistNonReactStatics(Ve,W)}},37759:function(U,F,c){"use strict";c.d(F,{Z0:function(){return D},dt:function(){return k},lq:function(){return A},wU:function(){return B}});var w=c(34254),v=c(50959),l=c(6848),R=c(5734);function A(z){(0,l.kG)(z,"[React Intl] Could not find required `intl` object. <IntlProvider> needs to exist in the component ancestry.")}var D=(0,w.pi)((0,w.pi)({},R.Z0),{textComponent:v.Fragment});function k(z){return function(Z){return z(v.Children.toArray(Z))}}function B(z,Z){if(z===Z)return!0;if(!z||!Z)return!1;var W=Object.keys(z),Y=Object.keys(Z),te=W.length;if(Y.length!==te)return!1;for(var le=0;le<te;le++){var be=W[le];if(z[be]!==Z[be]||!Object.prototype.hasOwnProperty.call(Z,be))return!1}return!0}},60198:function(U,F){"use strict";var c=typeof Symbol=="function"&&Symbol.for,w=c?Symbol.for("react.element"):60103,v=c?Symbol.for("react.portal"):60106,l=c?Symbol.for("react.fragment"):60107,R=c?Symbol.for("react.strict_mode"):60108,A=c?Symbol.for("react.profiler"):60114,D=c?Symbol.for("react.provider"):60109,k=c?Symbol.for("react.context"):60110,B=c?Symbol.for("react.async_mode"):60111,z=c?Symbol.for("react.concurrent_mode"):60111,Z=c?Symbol.for("react.forward_ref"):60112,W=c?Symbol.for("react.suspense"):60113,Y=c?Symbol.for("react.suspense_list"):60120,te=c?Symbol.for("react.memo"):60115,le=c?Symbol.for("react.lazy"):60116,be=c?Symbol.for("react.block"):60121,de=c?Symbol.for("react.fundamental"):60117,pe=c?Symbol.for("react.responder"):60118,Oe=c?Symbol.for("react.scope"):60119;function xe(K){if(typeof K=="object"&&K!==null){var ke=K.$$typeof;switch(ke){case w:switch(K=K.type,K){case B:case z:case l:case A:case R:case W:return K;default:switch(K=K&&K.$$typeof,K){case k:case Z:case le:case te:case D:return K;default:return ke}}case v:return ke}}}function Ve(K){return xe(K)===z}F.AsyncMode=B,F.ConcurrentMode=z,F.ContextConsumer=k,F.ContextProvider=D,F.Element=w,F.ForwardRef=Z,F.Fragment=l,F.Lazy=le,F.Memo=te,F.Portal=v,F.Profiler=A,F.StrictMode=R,F.Suspense=W,F.isAsyncMode=function(K){return Ve(K)||xe(K)===B},F.isConcurrentMode=Ve,F.isContextConsumer=function(K){return xe(K)===k},F.isContextProvider=function(K){return xe(K)===D},F.isElement=function(K){return typeof K=="object"&&K!==null&&K.$$typeof===w},F.isForwardRef=function(K){return xe(K)===Z},F.isFragment=function(K){return xe(K)===l},F.isLazy=function(K){return xe(K)===le},F.isMemo=function(K){return xe(K)===te},F.isPortal=function(K){return xe(K)===v},F.isProfiler=function(K){return xe(K)===A},F.isStrictMode=function(K){return xe(K)===R},F.isSuspense=function(K){return xe(K)===W},F.isValidElementType=function(K){return typeof K=="string"||typeof K=="function"||K===l||K===z||K===A||K===R||K===W||K===Y||typeof K=="object"&&K!==null&&(K.$$typeof===le||K.$$typeof===te||K.$$typeof===D||K.$$typeof===k||K.$$typeof===Z||K.$$typeof===de||K.$$typeof===pe||K.$$typeof===Oe||K.$$typeof===be)},F.typeOf=xe},56237:function(U,F,c){"use strict";U.exports=c(60198)},44492:function(U,F,c){"use strict";c.d(F,{F0:function(){return Fr},Fg:function(){return mn},Gn:function(){return Z},TH:function(){return Wt},UO:function(){return ot},V$:function(){return cr},WU:function(){return _r},fp:function(){return W},j3:function(){return _n},oQ:function(){return Fe},pC:function(){return sn},s0:function(){return xr}});var w=c(18280),v=c(50959);const l=(0,v.createContext)(null),R=(0,v.createContext)(null),A=(0,v.createContext)({outlet:null,matches:[]});function D(ne,fe){if(!ne)throw new Error(fe)}function k(ne,fe){if(!ne){typeof console!="undefined"&&console.warn(fe);try{throw new Error(fe)}catch(Q){}}}const B={};function z(ne,fe,Q){!fe&&!B[ne]&&(B[ne]=!0)}function Z(ne,fe){return fe===void 0&&(fe={}),ne.replace(/:(\w+)/g,(Q,De)=>(fe[De]==null&&D(!1),fe[De])).replace(/\/*\*$/,Q=>fe["*"]==null?"":fe["*"].replace(/^\/*/,"/"))}function W(ne,fe,Q){Q===void 0&&(Q="/");let De=typeof fe=="string"?(0,w.cP)(fe):fe,dt=he(De.pathname||"/",Q);if(dt==null)return null;let Jt=Y(ne);te(Jt);let it=null;for(let lt=0;it==null&&lt<Jt.length;++lt)it=we(Jt[lt],dt);return it}function Y(ne,fe,Q,De){return fe===void 0&&(fe=[]),Q===void 0&&(Q=[]),De===void 0&&(De=""),ne.forEach((dt,Jt)=>{let it={relativePath:dt.path||"",caseSensitive:dt.caseSensitive===!0,childrenIndex:Jt,route:dt};it.relativePath.startsWith("/")&&(it.relativePath.startsWith(De)||D(!1),it.relativePath=it.relativePath.slice(De.length));let lt=ye([De,it.relativePath]),qt=Q.concat(it);dt.children&&dt.children.length>0&&(dt.index===!0&&D(!1),Y(dt.children,fe,qt,lt)),!(dt.path==null&&!dt.index)&&fe.push({path:lt,score:K(lt,dt.index),routesMeta:qt})}),fe}function te(ne){ne.sort((fe,Q)=>fe.score!==Q.score?Q.score-fe.score:ke(fe.routesMeta.map(De=>De.childrenIndex),Q.routesMeta.map(De=>De.childrenIndex)))}const le=/^:\w+$/,be=3,de=2,pe=1,Oe=10,xe=-2,Ve=ne=>ne==="*";function K(ne,fe){let Q=ne.split("/"),De=Q.length;return Q.some(Ve)&&(De+=xe),fe&&(De+=de),Q.filter(dt=>!Ve(dt)).reduce((dt,Jt)=>dt+(le.test(Jt)?be:Jt===""?pe:Oe),De)}function ke(ne,fe){return ne.length===fe.length&&ne.slice(0,-1).every((De,dt)=>De===fe[dt])?ne[ne.length-1]-fe[fe.length-1]:0}function we(ne,fe){let{routesMeta:Q}=ne,De={},dt="/",Jt=[];for(let it=0;it<Q.length;++it){let lt=Q[it],qt=it===Q.length-1,pr=dt==="/"?fe:fe.slice(dt.length)||"/",Hr=Me({path:lt.relativePath,caseSensitive:lt.caseSensitive,end:qt},pr);if(!Hr)return null;Object.assign(De,Hr.params);let Xr=lt.route;Jt.push({params:De,pathname:ye([dt,Hr.pathname]),pathnameBase:se(ye([dt,Hr.pathnameBase])),route:Xr}),Hr.pathnameBase!=="/"&&(dt=ye([dt,Hr.pathnameBase]))}return Jt}function Me(ne,fe){typeof ne=="string"&&(ne={path:ne,caseSensitive:!1,end:!0});let[Q,De]=Xe(ne.path,ne.caseSensitive,ne.end),dt=fe.match(Q);if(!dt)return null;let Jt=dt[0],it=Jt.replace(/(.)\/+$/,"$1"),lt=dt.slice(1);return{params:De.reduce((pr,Hr,Xr)=>{if(Hr==="*"){let ce=lt[Xr]||"";it=Jt.slice(0,Jt.length-ce.length).replace(/(.)\/+$/,"$1")}return pr[Hr]=Ke(lt[Xr]||"",Hr),pr},{}),pathname:Jt,pathnameBase:it,pattern:ne}}function Xe(ne,fe,Q){fe===void 0&&(fe=!1),Q===void 0&&(Q=!0);let De=[],dt="^"+ne.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^$?{}|()[\]]/g,"\\$&").replace(/:(\w+)/g,(it,lt)=>(De.push(lt),"([^\\/]+)"));return ne.endsWith("*")?(De.push("*"),dt+=ne==="*"||ne==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):dt+=Q?"\\/*$":"(?:(?=[.~-]|%[0-9A-F]{2})|\\b|\\/|$)",[new RegExp(dt,fe?void 0:"i"),De]}function Ke(ne,fe){try{return decodeURIComponent(ne)}catch(Q){return ne}}function At(ne,fe){fe===void 0&&(fe="/");let{pathname:Q,search:De="",hash:dt=""}=typeof ne=="string"?(0,w.cP)(ne):ne;return{pathname:Q?Q.startsWith("/")?Q:mt(Q,fe):fe,search:Ne(De),hash:st(dt)}}function mt(ne,fe){let Q=fe.replace(/\/+$/,"").split("/");return ne.split("/").forEach(dt=>{dt===".."?Q.length>1&&Q.pop():dt!=="."&&Q.push(dt)}),Q.length>1?Q.join("/"):"/"}function ie(ne,fe,Q){let De=typeof ne=="string"?(0,w.cP)(ne):ne,dt=ne===""||De.pathname===""?"/":De.pathname,Jt;if(dt==null)Jt=Q;else{let lt=fe.length-1;if(dt.startsWith("..")){let qt=dt.split("/");for(;qt[0]==="..";)qt.shift(),lt-=1;De.pathname=qt.join("/")}Jt=lt>=0?fe[lt]:"/"}let it=At(De,Jt);return dt&&dt!=="/"&&dt.endsWith("/")&&!it.pathname.endsWith("/")&&(it.pathname+="/"),it}function oe(ne){return ne===""||ne.pathname===""?"/":typeof ne=="string"?(0,w.cP)(ne).pathname:ne.pathname}function he(ne,fe){if(fe==="/")return ne;if(!ne.toLowerCase().startsWith(fe.toLowerCase()))return null;let Q=ne.charAt(fe.length);return Q&&Q!=="/"?null:ne.slice(fe.length)||"/"}const ye=ne=>ne.join("/").replace(/\/\/+/g,"/"),se=ne=>ne.replace(/\/+$/,"").replace(/^\/*/,"/"),Ne=ne=>!ne||ne==="?"?"":ne.startsWith("?")?ne:"?"+ne,st=ne=>!ne||ne==="#"?"":ne.startsWith("#")?ne:"#"+ne;function Fe(ne){tt()||D(!1);let{basename:fe,navigator:Q}=(0,v.useContext)(l),{hash:De,pathname:dt,search:Jt}=_r(ne),it=dt;if(fe!=="/"){let lt=oe(ne),qt=lt!=null&&lt.endsWith("/");it=dt==="/"?fe+(qt?"/":""):ye([fe,dt])}return Q.createHref({pathname:it,search:Jt,hash:De})}function tt(){return(0,v.useContext)(R)!=null}function Wt(){return tt()||D(!1),(0,v.useContext)(R).location}function Pr(){return useContext(R).navigationType}function Qt(ne){tt()||D(!1);let{pathname:fe}=Wt();return useMemo(()=>Me(ne,fe),[fe,ne])}function xr(){tt()||D(!1);let{basename:ne,navigator:fe}=(0,v.useContext)(l),{matches:Q}=(0,v.useContext)(A),{pathname:De}=Wt(),dt=JSON.stringify(Q.map(lt=>lt.pathnameBase)),Jt=(0,v.useRef)(!1);return(0,v.useEffect)(()=>{Jt.current=!0}),(0,v.useCallback)(function(lt,qt){if(qt===void 0&&(qt={}),!Jt.current)return;if(typeof lt=="number"){fe.go(lt);return}let pr=ie(lt,JSON.parse(dt),De);ne!=="/"&&(pr.pathname=ye([ne,pr.pathname])),(qt.replace?fe.replace:fe.push)(pr,qt.state)},[ne,fe,dt,De])}const $r=(0,v.createContext)(null);function Cr(){return useContext($r)}function sn(ne){let fe=(0,v.useContext)(A).outlet;return fe&&(0,v.createElement)($r.Provider,{value:ne},fe)}function ot(){let{matches:ne}=(0,v.useContext)(A),fe=ne[ne.length-1];return fe?fe.params:{}}function _r(ne){let{matches:fe}=(0,v.useContext)(A),{pathname:Q}=Wt(),De=JSON.stringify(fe.map(dt=>dt.pathnameBase));return(0,v.useMemo)(()=>ie(ne,JSON.parse(De),Q),[ne,De,Q])}function cr(ne,fe){tt()||D(!1);let{matches:Q}=(0,v.useContext)(A),De=Q[Q.length-1],dt=De?De.params:{},Jt=De?De.pathname:"/",it=De?De.pathnameBase:"/",lt=De&&De.route,qt=Wt(),pr;if(fe){var Hr;let Gt=typeof fe=="string"?(0,w.cP)(fe):fe;it==="/"||((Hr=Gt.pathname)==null?void 0:Hr.startsWith(it))||D(!1),pr=Gt}else pr=qt;let Xr=pr.pathname||"/",ce=it==="/"?Xr:Xr.slice(it.length)||"/",xt=W(ne,{pathname:ce});return Vr(xt&&xt.map(Gt=>Object.assign({},Gt,{params:Object.assign({},dt,Gt.params),pathname:ye([it,Gt.pathname]),pathnameBase:Gt.pathnameBase==="/"?it:ye([it,Gt.pathnameBase])})),Q)}function Vr(ne,fe){return fe===void 0&&(fe=[]),ne==null?null:ne.reduceRight((Q,De,dt)=>(0,v.createElement)(A.Provider,{children:De.route.element!==void 0?De.route.element:Q,value:{outlet:Q,matches:fe.concat(ne.slice(0,dt+1))}}),null)}function Qn(ne){let{basename:fe,children:Q,initialEntries:De,initialIndex:dt}=ne,Jt=useRef();Jt.current==null&&(Jt.current=createMemoryHistory({initialEntries:De,initialIndex:dt}));let it=Jt.current,[lt,qt]=useState({action:it.action,location:it.location});return useLayoutEffect(()=>it.listen(qt),[it]),createElement(Fr,{basename:fe,children:Q,location:lt.location,navigationType:lt.action,navigator:it})}function mn(ne){let{to:fe,replace:Q,state:De}=ne;tt()||D(!1);let dt=xr();return(0,v.useEffect)(()=>{dt(fe,{replace:Q,state:De})}),null}function _n(ne){return sn(ne.context)}function Yr(ne){D(!1)}function Fr(ne){let{basename:fe="/",children:Q=null,location:De,navigationType:dt=w.aU.Pop,navigator:Jt,static:it=!1}=ne;tt()&&D(!1);let lt=se(fe),qt=(0,v.useMemo)(()=>({basename:lt,navigator:Jt,static:it}),[lt,Jt,it]);typeof De=="string"&&(De=(0,w.cP)(De));let{pathname:pr="/",search:Hr="",hash:Xr="",state:ce=null,key:xt="default"}=De,Gt=(0,v.useMemo)(()=>{let Ir=he(pr,lt);return Ir==null?null:{pathname:Ir,search:Hr,hash:Xr,state:ce,key:xt}},[lt,pr,Hr,Xr,ce,xt]);return Gt==null?null:(0,v.createElement)(l.Provider,{value:qt},(0,v.createElement)(R.Provider,{children:Q,value:{location:Gt,navigationType:dt}}))}function kr(ne){let{children:fe,location:Q}=ne;return cr(ft(fe),Q)}function ft(ne){let fe=[];return Children.forEach(ne,Q=>{if(!isValidElement(Q))return;if(Q.type===Fragment){fe.push.apply(fe,ft(Q.props.children));return}Q.type!==Yr&&D(!1);let De={caseSensitive:Q.props.caseSensitive,element:Q.props.element,index:Q.props.index,path:Q.props.path};Q.props.children&&(De.children=ft(Q.props.children)),fe.push(De)}),fe}function me(ne){return Vr(ne)}},3354:function(U,F,c){"use strict";var w=c(50959),v=Symbol.for("react.element"),l=Symbol.for("react.fragment"),R=Object.prototype.hasOwnProperty,A=w.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,D={key:!0,ref:!0,__self:!0,__source:!0};function k(B,z,Z){var W,Y={},te=null,le=null;Z!==void 0&&(te=""+Z),z.key!==void 0&&(te=""+z.key),z.ref!==void 0&&(le=z.ref);for(W in z)R.call(z,W)&&!D.hasOwnProperty(W)&&(Y[W]=z[W]);if(B&&B.defaultProps)for(W in z=B.defaultProps,z)Y[W]===void 0&&(Y[W]=z[W]);return{$$typeof:v,type:B,key:te,ref:le,props:Y,_owner:A.current}}F.Fragment=l,F.jsx=k,F.jsxs=k},95257:function(U,F){"use strict";var c=Symbol.for("react.element"),w=Symbol.for("react.portal"),v=Symbol.for("react.fragment"),l=Symbol.for("react.strict_mode"),R=Symbol.for("react.profiler"),A=Symbol.for("react.provider"),D=Symbol.for("react.context"),k=Symbol.for("react.forward_ref"),B=Symbol.for("react.suspense"),z=Symbol.for("react.memo"),Z=Symbol.for("react.lazy"),W=Symbol.iterator;function Y(Fe){return Fe===null||typeof Fe!="object"?null:(Fe=W&&Fe[W]||Fe["@@iterator"],typeof Fe=="function"?Fe:null)}var te={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},le=Object.assign,be={};function de(Fe,tt,Wt){this.props=Fe,this.context=tt,this.refs=be,this.updater=Wt||te}de.prototype.isReactComponent={},de.prototype.setState=function(Fe,tt){if(typeof Fe!="object"&&typeof Fe!="function"&&Fe!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,Fe,tt,"setState")},de.prototype.forceUpdate=function(Fe){this.updater.enqueueForceUpdate(this,Fe,"forceUpdate")};function pe(){}pe.prototype=de.prototype;function Oe(Fe,tt,Wt){this.props=Fe,this.context=tt,this.refs=be,this.updater=Wt||te}var xe=Oe.prototype=new pe;xe.constructor=Oe,le(xe,de.prototype),xe.isPureReactComponent=!0;var Ve=Array.isArray,K=Object.prototype.hasOwnProperty,ke={current:null},we={key:!0,ref:!0,__self:!0,__source:!0};function Me(Fe,tt,Wt){var Pr,Qt={},xr=null,$r=null;if(tt!=null)for(Pr in tt.ref!==void 0&&($r=tt.ref),tt.key!==void 0&&(xr=""+tt.key),tt)K.call(tt,Pr)&&!we.hasOwnProperty(Pr)&&(Qt[Pr]=tt[Pr]);var Cr=arguments.length-2;if(Cr===1)Qt.children=Wt;else if(1<Cr){for(var sn=Array(Cr),ot=0;ot<Cr;ot++)sn[ot]=arguments[ot+2];Qt.children=sn}if(Fe&&Fe.defaultProps)for(Pr in Cr=Fe.defaultProps,Cr)Qt[Pr]===void 0&&(Qt[Pr]=Cr[Pr]);return{$$typeof:c,type:Fe,key:xr,ref:$r,props:Qt,_owner:ke.current}}function Xe(Fe,tt){return{$$typeof:c,type:Fe.type,key:tt,ref:Fe.ref,props:Fe.props,_owner:Fe._owner}}function Ke(Fe){return typeof Fe=="object"&&Fe!==null&&Fe.$$typeof===c}function At(Fe){var tt={"=":"=0",":":"=2"};return"$"+Fe.replace(/[=:]/g,function(Wt){return tt[Wt]})}var mt=/\/+/g;function ie(Fe,tt){return typeof Fe=="object"&&Fe!==null&&Fe.key!=null?At(""+Fe.key):tt.toString(36)}function oe(Fe,tt,Wt,Pr,Qt){var xr=typeof Fe;(xr==="undefined"||xr==="boolean")&&(Fe=null);var $r=!1;if(Fe===null)$r=!0;else switch(xr){case"string":case"number":$r=!0;break;case"object":switch(Fe.$$typeof){case c:case w:$r=!0}}if($r)return $r=Fe,Qt=Qt($r),Fe=Pr===""?"."+ie($r,0):Pr,Ve(Qt)?(Wt="",Fe!=null&&(Wt=Fe.replace(mt,"$&/")+"/"),oe(Qt,tt,Wt,"",function(ot){return ot})):Qt!=null&&(Ke(Qt)&&(Qt=Xe(Qt,Wt+(!Qt.key||$r&&$r.key===Qt.key?"":(""+Qt.key).replace(mt,"$&/")+"/")+Fe)),tt.push(Qt)),1;if($r=0,Pr=Pr===""?".":Pr+":",Ve(Fe))for(var Cr=0;Cr<Fe.length;Cr++){xr=Fe[Cr];var sn=Pr+ie(xr,Cr);$r+=oe(xr,tt,Wt,sn,Qt)}else if(sn=Y(Fe),typeof sn=="function")for(Fe=sn.call(Fe),Cr=0;!(xr=Fe.next()).done;)xr=xr.value,sn=Pr+ie(xr,Cr++),$r+=oe(xr,tt,Wt,sn,Qt);else if(xr==="object")throw tt=String(Fe),Error("Objects are not valid as a React child (found: "+(tt==="[object Object]"?"object with keys {"+Object.keys(Fe).join(", ")+"}":tt)+"). If you meant to render a collection of children, use an array instead.");return $r}function he(Fe,tt,Wt){if(Fe==null)return Fe;var Pr=[],Qt=0;return oe(Fe,Pr,"","",function(xr){return tt.call(Wt,xr,Qt++)}),Pr}function ye(Fe){if(Fe._status===-1){var tt=Fe._result;tt=tt(),tt.then(function(Wt){(Fe._status===0||Fe._status===-1)&&(Fe._status=1,Fe._result=Wt)},function(Wt){(Fe._status===0||Fe._status===-1)&&(Fe._status=2,Fe._result=Wt)}),Fe._status===-1&&(Fe._status=0,Fe._result=tt)}if(Fe._status===1)return Fe._result.default;throw Fe._result}var se={current:null},Ne={transition:null},st={ReactCurrentDispatcher:se,ReactCurrentBatchConfig:Ne,ReactCurrentOwner:ke};F.Children={map:he,forEach:function(Fe,tt,Wt){he(Fe,function(){tt.apply(this,arguments)},Wt)},count:function(Fe){var tt=0;return he(Fe,function(){tt++}),tt},toArray:function(Fe){return he(Fe,function(tt){return tt})||[]},only:function(Fe){if(!Ke(Fe))throw Error("React.Children.only expected to receive a single React element child.");return Fe}},F.Component=de,F.Fragment=v,F.Profiler=R,F.PureComponent=Oe,F.StrictMode=l,F.Suspense=B,F.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=st,F.cloneElement=function(Fe,tt,Wt){if(Fe==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+Fe+".");var Pr=le({},Fe.props),Qt=Fe.key,xr=Fe.ref,$r=Fe._owner;if(tt!=null){if(tt.ref!==void 0&&(xr=tt.ref,$r=ke.current),tt.key!==void 0&&(Qt=""+tt.key),Fe.type&&Fe.type.defaultProps)var Cr=Fe.type.defaultProps;for(sn in tt)K.call(tt,sn)&&!we.hasOwnProperty(sn)&&(Pr[sn]=tt[sn]===void 0&&Cr!==void 0?Cr[sn]:tt[sn])}var sn=arguments.length-2;if(sn===1)Pr.children=Wt;else if(1<sn){Cr=Array(sn);for(var ot=0;ot<sn;ot++)Cr[ot]=arguments[ot+2];Pr.children=Cr}return{$$typeof:c,type:Fe.type,key:Qt,ref:xr,props:Pr,_owner:$r}},F.createContext=function(Fe){return Fe={$$typeof:D,_currentValue:Fe,_currentValue2:Fe,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},Fe.Provider={$$typeof:A,_context:Fe},Fe.Consumer=Fe},F.createElement=Me,F.createFactory=function(Fe){var tt=Me.bind(null,Fe);return tt.type=Fe,tt},F.createRef=function(){return{current:null}},F.forwardRef=function(Fe){return{$$typeof:k,render:Fe}},F.isValidElement=Ke,F.lazy=function(Fe){return{$$typeof:Z,_payload:{_status:-1,_result:Fe},_init:ye}},F.memo=function(Fe,tt){return{$$typeof:z,type:Fe,compare:tt===void 0?null:tt}},F.startTransition=function(Fe){var tt=Ne.transition;Ne.transition={};try{Fe()}finally{Ne.transition=tt}},F.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},F.useCallback=function(Fe,tt){return se.current.useCallback(Fe,tt)},F.useContext=function(Fe){return se.current.useContext(Fe)},F.useDebugValue=function(){},F.useDeferredValue=function(Fe){return se.current.useDeferredValue(Fe)},F.useEffect=function(Fe,tt){return se.current.useEffect(Fe,tt)},F.useId=function(){return se.current.useId()},F.useImperativeHandle=function(Fe,tt,Wt){return se.current.useImperativeHandle(Fe,tt,Wt)},F.useInsertionEffect=function(Fe,tt){return se.current.useInsertionEffect(Fe,tt)},F.useLayoutEffect=function(Fe,tt){return se.current.useLayoutEffect(Fe,tt)},F.useMemo=function(Fe,tt){return se.current.useMemo(Fe,tt)},F.useReducer=function(Fe,tt,Wt){return se.current.useReducer(Fe,tt,Wt)},F.useRef=function(Fe){return se.current.useRef(Fe)},F.useState=function(Fe){return se.current.useState(Fe)},F.useSyncExternalStore=function(Fe,tt,Wt){return se.current.useSyncExternalStore(Fe,tt,Wt)},F.useTransition=function(){return se.current.useTransition()},F.version="18.2.0"},50959:function(U,F,c){"use strict";U.exports=c(95257)},11527:function(U,F,c){"use strict";U.exports=c(3354)},96485:function(U,F,c){var w=c(14224);var v;(function(l){(function(R){var A=typeof c.g=="object"?c.g:typeof self=="object"?self:typeof this=="object"?this:Function("return this;")(),D=k(l);typeof A.Reflect=="undefined"?A.Reflect=l:D=k(A.Reflect,D),R(D);function k(B,z){return function(Z,W){typeof B[Z]!="function"&&Object.defineProperty(B,Z,{configurable:!0,writable:!0,value:W}),z&&z(Z,W)}}})(function(R){var A=Object.prototype.hasOwnProperty,D=typeof Symbol=="function",k=D&&typeof Symbol.toPrimitive!="undefined"?Symbol.toPrimitive:"@@toPrimitive",B=D&&typeof Symbol.iterator!="undefined"?Symbol.iterator:"@@iterator",z=typeof Object.create=="function",Z={__proto__:[]}instanceof Array,W=!z&&!Z,Y={create:z?function(){return Jt(Object.create(null))}:Z?function(){return Jt({__proto__:null})}:function(){return Jt({})},has:W?function(it,lt){return A.call(it,lt)}:function(it,lt){return lt in it},get:W?function(it,lt){return A.call(it,lt)?it[lt]:void 0}:function(it,lt){return it[lt]}},te=Object.getPrototypeOf(Function),le=typeof w=="object"&&{NODE_ENV:"production",PUBLIC_PATH:"/dumi2-template/"}&&{NODE_ENV:"production",PUBLIC_PATH:"/dumi2-template/"}.REFLECT_METADATA_USE_MAP_POLYFILL==="true",be=!le&&typeof Map=="function"&&typeof Map.prototype.entries=="function"?Map:Q(),de=!le&&typeof Set=="function"&&typeof Set.prototype.entries=="function"?Set:De(),pe=!le&&typeof WeakMap=="function"?WeakMap:dt(),Oe=new pe;function xe(it,lt,qt,pr){if(Qt(qt)){if(!Qn(it))throw new TypeError;if(!_n(lt))throw new TypeError;return ie(it,lt)}else{if(!Qn(it))throw new TypeError;if(!Cr(lt))throw new TypeError;if(!Cr(pr)&&!Qt(pr)&&!xr(pr))throw new TypeError;return xr(pr)&&(pr=void 0),qt=Vr(qt),oe(it,lt,qt,pr)}}R("decorate",xe);function Ve(it,lt){function qt(pr,Hr){if(!Cr(pr))throw new TypeError;if(!Qt(Hr)&&!Yr(Hr))throw new TypeError;Fe(it,lt,pr,Hr)}return qt}R("metadata",Ve);function K(it,lt,qt,pr){if(!Cr(qt))throw new TypeError;return Qt(pr)||(pr=Vr(pr)),Fe(it,lt,qt,pr)}R("defineMetadata",K);function ke(it,lt,qt){if(!Cr(lt))throw new TypeError;return Qt(qt)||(qt=Vr(qt)),ye(it,lt,qt)}R("hasMetadata",ke);function we(it,lt,qt){if(!Cr(lt))throw new TypeError;return Qt(qt)||(qt=Vr(qt)),se(it,lt,qt)}R("hasOwnMetadata",we);function Me(it,lt,qt){if(!Cr(lt))throw new TypeError;return Qt(qt)||(qt=Vr(qt)),Ne(it,lt,qt)}R("getMetadata",Me);function Xe(it,lt,qt){if(!Cr(lt))throw new TypeError;return Qt(qt)||(qt=Vr(qt)),st(it,lt,qt)}R("getOwnMetadata",Xe);function Ke(it,lt){if(!Cr(it))throw new TypeError;return Qt(lt)||(lt=Vr(lt)),tt(it,lt)}R("getMetadataKeys",Ke);function At(it,lt){if(!Cr(it))throw new TypeError;return Qt(lt)||(lt=Vr(lt)),Wt(it,lt)}R("getOwnMetadataKeys",At);function mt(it,lt,qt){if(!Cr(lt))throw new TypeError;Qt(qt)||(qt=Vr(qt));var pr=he(lt,qt,!1);if(Qt(pr)||!pr.delete(it))return!1;if(pr.size>0)return!0;var Hr=Oe.get(lt);return Hr.delete(qt),Hr.size>0||Oe.delete(lt),!0}R("deleteMetadata",mt);function ie(it,lt){for(var qt=it.length-1;qt>=0;--qt){var pr=it[qt],Hr=pr(lt);if(!Qt(Hr)&&!xr(Hr)){if(!_n(Hr))throw new TypeError;lt=Hr}}return lt}function oe(it,lt,qt,pr){for(var Hr=it.length-1;Hr>=0;--Hr){var Xr=it[Hr],ce=Xr(lt,qt,pr);if(!Qt(ce)&&!xr(ce)){if(!Cr(ce))throw new TypeError;pr=ce}}return pr}function he(it,lt,qt){var pr=Oe.get(it);if(Qt(pr)){if(!qt)return;pr=new be,Oe.set(it,pr)}var Hr=pr.get(lt);if(Qt(Hr)){if(!qt)return;Hr=new be,pr.set(lt,Hr)}return Hr}function ye(it,lt,qt){var pr=se(it,lt,qt);if(pr)return!0;var Hr=fe(lt);return xr(Hr)?!1:ye(it,Hr,qt)}function se(it,lt,qt){var pr=he(lt,qt,!1);return Qt(pr)?!1:_r(pr.has(it))}function Ne(it,lt,qt){var pr=se(it,lt,qt);if(pr)return st(it,lt,qt);var Hr=fe(lt);if(!xr(Hr))return Ne(it,Hr,qt)}function st(it,lt,qt){var pr=he(lt,qt,!1);if(!Qt(pr))return pr.get(it)}function Fe(it,lt,qt,pr){var Hr=he(qt,pr,!0);Hr.set(it,lt)}function tt(it,lt){var qt=Wt(it,lt),pr=fe(it);if(pr===null)return qt;var Hr=tt(pr,lt);if(Hr.length<=0)return qt;if(qt.length<=0)return Hr;for(var Xr=new de,ce=[],xt=0,Gt=qt;xt<Gt.length;xt++){var Ir=Gt[xt],nn=Xr.has(Ir);nn||(Xr.add(Ir),ce.push(Ir))}for(var zi=0,Ui=Hr;zi<Ui.length;zi++){var Ir=Ui[zi],nn=Xr.has(Ir);nn||(Xr.add(Ir),ce.push(Ir))}return ce}function Wt(it,lt){var qt=[],pr=he(it,lt,!1);if(Qt(pr))return qt;for(var Hr=pr.keys(),Xr=kr(Hr),ce=0;;){var xt=me(Xr);if(!xt)return qt.length=ce,qt;var Gt=ft(xt);try{qt[ce]=Gt}catch(Ir){try{ne(Xr)}finally{throw Ir}}ce++}}function Pr(it){if(it===null)return 1;switch(typeof it){case"undefined":return 0;case"boolean":return 2;case"string":return 3;case"symbol":return 4;case"number":return 5;case"object":return it===null?1:6;default:return 6}}function Qt(it){return it===void 0}function xr(it){return it===null}function $r(it){return typeof it=="symbol"}function Cr(it){return typeof it=="object"?it!==null:typeof it=="function"}function sn(it,lt){switch(Pr(it)){case 0:return it;case 1:return it;case 2:return it;case 3:return it;case 4:return it;case 5:return it}var qt=lt===3?"string":lt===5?"number":"default",pr=Fr(it,k);if(pr!==void 0){var Hr=pr.call(it,qt);if(Cr(Hr))throw new TypeError;return Hr}return ot(it,qt==="default"?"number":qt)}function ot(it,lt){if(lt==="string"){var qt=it.toString;if(mn(qt)){var pr=qt.call(it);if(!Cr(pr))return pr}var Hr=it.valueOf;if(mn(Hr)){var pr=Hr.call(it);if(!Cr(pr))return pr}}else{var Hr=it.valueOf;if(mn(Hr)){var pr=Hr.call(it);if(!Cr(pr))return pr}var Xr=it.toString;if(mn(Xr)){var pr=Xr.call(it);if(!Cr(pr))return pr}}throw new TypeError}function _r(it){return!!it}function cr(it){return""+it}function Vr(it){var lt=sn(it,3);return $r(lt)?lt:cr(lt)}function Qn(it){return Array.isArray?Array.isArray(it):it instanceof Object?it instanceof Array:Object.prototype.toString.call(it)==="[object Array]"}function mn(it){return typeof it=="function"}function _n(it){return typeof it=="function"}function Yr(it){switch(Pr(it)){case 3:return!0;case 4:return!0;default:return!1}}function Fr(it,lt){var qt=it[lt];if(qt!=null){if(!mn(qt))throw new TypeError;return qt}}function kr(it){var lt=Fr(it,B);if(!mn(lt))throw new TypeError;var qt=lt.call(it);if(!Cr(qt))throw new TypeError;return qt}function ft(it){return it.value}function me(it){var lt=it.next();return lt.done?!1:lt}function ne(it){var lt=it.return;lt&&lt.call(it)}function fe(it){var lt=Object.getPrototypeOf(it);if(typeof it!="function"||it===te||lt!==te)return lt;var qt=it.prototype,pr=qt&&Object.getPrototypeOf(qt);if(pr==null||pr===Object.prototype)return lt;var Hr=pr.constructor;return typeof Hr!="function"||Hr===it?lt:Hr}function Q(){var it={},lt=[],qt=function(){function ce(xt,Gt,Ir){this._index=0,this._keys=xt,this._values=Gt,this._selector=Ir}return ce.prototype["@@iterator"]=function(){return this},ce.prototype[B]=function(){return this},ce.prototype.next=function(){var xt=this._index;if(xt>=0&&xt<this._keys.length){var Gt=this._selector(this._keys[xt],this._values[xt]);return xt+1>=this._keys.length?(this._index=-1,this._keys=lt,this._values=lt):this._index++,{value:Gt,done:!1}}return{value:void 0,done:!0}},ce.prototype.throw=function(xt){throw this._index>=0&&(this._index=-1,this._keys=lt,this._values=lt),xt},ce.prototype.return=function(xt){return this._index>=0&&(this._index=-1,this._keys=lt,this._values=lt),{value:xt,done:!0}},ce}();return function(){function ce(){this._keys=[],this._values=[],this._cacheKey=it,this._cacheIndex=-2}return Object.defineProperty(ce.prototype,"size",{get:function(){return this._keys.length},enumerable:!0,configurable:!0}),ce.prototype.has=function(xt){return this._find(xt,!1)>=0},ce.prototype.get=function(xt){var Gt=this._find(xt,!1);return Gt>=0?this._values[Gt]:void 0},ce.prototype.set=function(xt,Gt){var Ir=this._find(xt,!0);return this._values[Ir]=Gt,this},ce.prototype.delete=function(xt){var Gt=this._find(xt,!1);if(Gt>=0){for(var Ir=this._keys.length,nn=Gt+1;nn<Ir;nn++)this._keys[nn-1]=this._keys[nn],this._values[nn-1]=this._values[nn];return this._keys.length--,this._values.length--,xt===this._cacheKey&&(this._cacheKey=it,this._cacheIndex=-2),!0}return!1},ce.prototype.clear=function(){this._keys.length=0,this._values.length=0,this._cacheKey=it,this._cacheIndex=-2},ce.prototype.keys=function(){return new qt(this._keys,this._values,pr)},ce.prototype.values=function(){return new qt(this._keys,this._values,Hr)},ce.prototype.entries=function(){return new qt(this._keys,this._values,Xr)},ce.prototype["@@iterator"]=function(){return this.entries()},ce.prototype[B]=function(){return this.entries()},ce.prototype._find=function(xt,Gt){return this._cacheKey!==xt&&(this._cacheIndex=this._keys.indexOf(this._cacheKey=xt)),this._cacheIndex<0&&Gt&&(this._cacheIndex=this._keys.length,this._keys.push(xt),this._values.push(void 0)),this._cacheIndex},ce}();function pr(ce,xt){return ce}function Hr(ce,xt){return xt}function Xr(ce,xt){return[ce,xt]}}function De(){return function(){function it(){this._map=new be}return Object.defineProperty(it.prototype,"size",{get:function(){return this._map.size},enumerable:!0,configurable:!0}),it.prototype.has=function(lt){return this._map.has(lt)},it.prototype.add=function(lt){return this._map.set(lt,lt),this},it.prototype.delete=function(lt){return this._map.delete(lt)},it.prototype.clear=function(){this._map.clear()},it.prototype.keys=function(){return this._map.keys()},it.prototype.values=function(){return this._map.values()},it.prototype.entries=function(){return this._map.entries()},it.prototype["@@iterator"]=function(){return this.keys()},it.prototype[B]=function(){return this.keys()},it}()}function dt(){var it=16,lt=Y.create(),qt=pr();return function(){function Gt(){this._key=pr()}return Gt.prototype.has=function(Ir){var nn=Hr(Ir,!1);return nn!==void 0?Y.has(nn,this._key):!1},Gt.prototype.get=function(Ir){var nn=Hr(Ir,!1);return nn!==void 0?Y.get(nn,this._key):void 0},Gt.prototype.set=function(Ir,nn){var zi=Hr(Ir,!0);return zi[this._key]=nn,this},Gt.prototype.delete=function(Ir){var nn=Hr(Ir,!1);return nn!==void 0?delete nn[this._key]:!1},Gt.prototype.clear=function(){this._key=pr()},Gt}();function pr(){var Gt;do Gt="@@WeakMap@@"+xt();while(Y.has(lt,Gt));return lt[Gt]=!0,Gt}function Hr(Gt,Ir){if(!A.call(Gt,qt)){if(!Ir)return;Object.defineProperty(Gt,qt,{value:Y.create()})}return Gt[qt]}function Xr(Gt,Ir){for(var nn=0;nn<Ir;++nn)Gt[nn]=Math.random()*255|0;return Gt}function ce(Gt){return typeof Uint8Array=="function"?typeof crypto!="undefined"?crypto.getRandomValues(new Uint8Array(Gt)):typeof msCrypto!="undefined"?msCrypto.getRandomValues(new Uint8Array(Gt)):Xr(new Uint8Array(Gt),Gt):Xr(new Array(Gt),Gt)}function xt(){var Gt=ce(it);Gt[6]=Gt[6]&79|64,Gt[8]=Gt[8]&191|128;for(var Ir="",nn=0;nn<it;++nn){var zi=Gt[nn];(nn===4||nn===6||nn===8)&&(Ir+="-"),zi<16&&(Ir+="0"),Ir+=zi.toString(16).toLowerCase()}return Ir}}function Jt(it){return it.__=void 0,delete it.__,it}})})(v||(v={}))},77410:function(U){var F=function(c){"use strict";var w=Object.prototype,v=w.hasOwnProperty,l,R=typeof Symbol=="function"?Symbol:{},A=R.iterator||"@@iterator",D=R.asyncIterator||"@@asyncIterator",k=R.toStringTag||"@@toStringTag";function B(ye,se,Ne){return Object.defineProperty(ye,se,{value:Ne,enumerable:!0,configurable:!0,writable:!0}),ye[se]}try{B({},"")}catch(ye){B=function(se,Ne,st){return se[Ne]=st}}function z(ye,se,Ne,st){var Fe=se&&se.prototype instanceof de?se:de,tt=Object.create(Fe.prototype),Wt=new ie(st||[]);return tt._invoke=Xe(ye,Ne,Wt),tt}c.wrap=z;function Z(ye,se,Ne){try{return{type:"normal",arg:ye.call(se,Ne)}}catch(st){return{type:"throw",arg:st}}}var W="suspendedStart",Y="suspendedYield",te="executing",le="completed",be={};function de(){}function pe(){}function Oe(){}var xe={};B(xe,A,function(){return this});var Ve=Object.getPrototypeOf,K=Ve&&Ve(Ve(oe([])));K&&K!==w&&v.call(K,A)&&(xe=K);var ke=Oe.prototype=de.prototype=Object.create(xe);pe.prototype=Oe,B(ke,"constructor",Oe),B(Oe,"constructor",pe),pe.displayName=B(Oe,k,"GeneratorFunction");function we(ye){["next","throw","return"].forEach(function(se){B(ye,se,function(Ne){return this._invoke(se,Ne)})})}c.isGeneratorFunction=function(ye){var se=typeof ye=="function"&&ye.constructor;return se?se===pe||(se.displayName||se.name)==="GeneratorFunction":!1},c.mark=function(ye){return Object.setPrototypeOf?Object.setPrototypeOf(ye,Oe):(ye.__proto__=Oe,B(ye,k,"GeneratorFunction")),ye.prototype=Object.create(ke),ye},c.awrap=function(ye){return{__await:ye}};function Me(ye,se){function Ne(tt,Wt,Pr,Qt){var xr=Z(ye[tt],ye,Wt);if(xr.type==="throw")Qt(xr.arg);else{var $r=xr.arg,Cr=$r.value;return Cr&&typeof Cr=="object"&&v.call(Cr,"__await")?se.resolve(Cr.__await).then(function(sn){Ne("next",sn,Pr,Qt)},function(sn){Ne("throw",sn,Pr,Qt)}):se.resolve(Cr).then(function(sn){$r.value=sn,Pr($r)},function(sn){return Ne("throw",sn,Pr,Qt)})}}var st;function Fe(tt,Wt){function Pr(){return new se(function(Qt,xr){Ne(tt,Wt,Qt,xr)})}return st=st?st.then(Pr,Pr):Pr()}this._invoke=Fe}we(Me.prototype),B(Me.prototype,D,function(){return this}),c.AsyncIterator=Me,c.async=function(ye,se,Ne,st,Fe){Fe===void 0&&(Fe=Promise);var tt=new Me(z(ye,se,Ne,st),Fe);return c.isGeneratorFunction(se)?tt:tt.next().then(function(Wt){return Wt.done?Wt.value:tt.next()})};function Xe(ye,se,Ne){var st=W;return function(tt,Wt){if(st===te)throw new Error("Generator is already running");if(st===le){if(tt==="throw")throw Wt;return he()}for(Ne.method=tt,Ne.arg=Wt;;){var Pr=Ne.delegate;if(Pr){var Qt=Ke(Pr,Ne);if(Qt){if(Qt===be)continue;return Qt}}if(Ne.method==="next")Ne.sent=Ne._sent=Ne.arg;else if(Ne.method==="throw"){if(st===W)throw st=le,Ne.arg;Ne.dispatchException(Ne.arg)}else Ne.method==="return"&&Ne.abrupt("return",Ne.arg);st=te;var xr=Z(ye,se,Ne);if(xr.type==="normal"){if(st=Ne.done?le:Y,xr.arg===be)continue;return{value:xr.arg,done:Ne.done}}else xr.type==="throw"&&(st=le,Ne.method="throw",Ne.arg=xr.arg)}}}function Ke(ye,se){var Ne=ye.iterator[se.method];if(Ne===l){if(se.delegate=null,se.method==="throw"){if(ye.iterator.return&&(se.method="return",se.arg=l,Ke(ye,se),se.method==="throw"))return be;se.method="throw",se.arg=new TypeError("The iterator does not provide a 'throw' method")}return be}var st=Z(Ne,ye.iterator,se.arg);if(st.type==="throw")return se.method="throw",se.arg=st.arg,se.delegate=null,be;var Fe=st.arg;if(!Fe)return se.method="throw",se.arg=new TypeError("iterator result is not an object"),se.delegate=null,be;if(Fe.done)se[ye.resultName]=Fe.value,se.next=ye.nextLoc,se.method!=="return"&&(se.method="next",se.arg=l);else return Fe;return se.delegate=null,be}we(ke),B(ke,k,"Generator"),B(ke,A,function(){return this}),B(ke,"toString",function(){return"[object Generator]"});function At(ye){var se={tryLoc:ye[0]};1 in ye&&(se.catchLoc=ye[1]),2 in ye&&(se.finallyLoc=ye[2],se.afterLoc=ye[3]),this.tryEntries.push(se)}function mt(ye){var se=ye.completion||{};se.type="normal",delete se.arg,ye.completion=se}function ie(ye){this.tryEntries=[{tryLoc:"root"}],ye.forEach(At,this),this.reset(!0)}c.keys=function(ye){var se=[];for(var Ne in ye)se.push(Ne);return se.reverse(),function st(){for(;se.length;){var Fe=se.pop();if(Fe in ye)return st.value=Fe,st.done=!1,st}return st.done=!0,st}};function oe(ye){if(ye){var se=ye[A];if(se)return se.call(ye);if(typeof ye.next=="function")return ye;if(!isNaN(ye.length)){var Ne=-1,st=function Fe(){for(;++Ne<ye.length;)if(v.call(ye,Ne))return Fe.value=ye[Ne],Fe.done=!1,Fe;return Fe.value=l,Fe.done=!0,Fe};return st.next=st}}return{next:he}}c.values=oe;function he(){return{value:l,done:!0}}return ie.prototype={constructor:ie,reset:function(ye){if(this.prev=0,this.next=0,this.sent=this._sent=l,this.done=!1,this.delegate=null,this.method="next",this.arg=l,this.tryEntries.forEach(mt),!ye)for(var se in this)se.charAt(0)==="t"&&v.call(this,se)&&!isNaN(+se.slice(1))&&(this[se]=l)},stop:function(){this.done=!0;var ye=this.tryEntries[0],se=ye.completion;if(se.type==="throw")throw se.arg;return this.rval},dispatchException:function(ye){if(this.done)throw ye;var se=this;function Ne(Qt,xr){return tt.type="throw",tt.arg=ye,se.next=Qt,xr&&(se.method="next",se.arg=l),!!xr}for(var st=this.tryEntries.length-1;st>=0;--st){var Fe=this.tryEntries[st],tt=Fe.completion;if(Fe.tryLoc==="root")return Ne("end");if(Fe.tryLoc<=this.prev){var Wt=v.call(Fe,"catchLoc"),Pr=v.call(Fe,"finallyLoc");if(Wt&&Pr){if(this.prev<Fe.catchLoc)return Ne(Fe.catchLoc,!0);if(this.prev<Fe.finallyLoc)return Ne(Fe.finallyLoc)}else if(Wt){if(this.prev<Fe.catchLoc)return Ne(Fe.catchLoc,!0)}else if(Pr){if(this.prev<Fe.finallyLoc)return Ne(Fe.finallyLoc)}else throw new Error("try statement without catch or finally")}}},abrupt:function(ye,se){for(var Ne=this.tryEntries.length-1;Ne>=0;--Ne){var st=this.tryEntries[Ne];if(st.tryLoc<=this.prev&&v.call(st,"finallyLoc")&&this.prev<st.finallyLoc){var Fe=st;break}}Fe&&(ye==="break"||ye==="continue")&&Fe.tryLoc<=se&&se<=Fe.finallyLoc&&(Fe=null);var tt=Fe?Fe.completion:{};return tt.type=ye,tt.arg=se,Fe?(this.method="next",this.next=Fe.finallyLoc,be):this.complete(tt)},complete:function(ye,se){if(ye.type==="throw")throw ye.arg;return ye.type==="break"||ye.type==="continue"?this.next=ye.arg:ye.type==="return"?(this.rval=this.arg=ye.arg,this.method="return",this.next="end"):ye.type==="normal"&&se&&(this.next=se),be},finish:function(ye){for(var se=this.tryEntries.length-1;se>=0;--se){var Ne=this.tryEntries[se];if(Ne.finallyLoc===ye)return this.complete(Ne.completion,Ne.afterLoc),mt(Ne),be}},catch:function(ye){for(var se=this.tryEntries.length-1;se>=0;--se){var Ne=this.tryEntries[se];if(Ne.tryLoc===ye){var st=Ne.completion;if(st.type==="throw"){var Fe=st.arg;mt(Ne)}return Fe}}throw new Error("illegal catch attempt")},delegateYield:function(ye,se,Ne){return this.delegate={iterator:oe(ye),resultName:se,nextLoc:Ne},this.method==="next"&&(this.arg=l),be}},c}(U.exports);try{regeneratorRuntime=F}catch(c){typeof globalThis=="object"?globalThis.regeneratorRuntime=F:Function("r","regeneratorRuntime = r")(F)}},85568:function(U,F){"use strict";function c(se,Ne){var st=se.length;se.push(Ne);e:for(;0<st;){var Fe=st-1>>>1,tt=se[Fe];if(0<l(tt,Ne))se[Fe]=Ne,se[st]=tt,st=Fe;else break e}}function w(se){return se.length===0?null:se[0]}function v(se){if(se.length===0)return null;var Ne=se[0],st=se.pop();if(st!==Ne){se[0]=st;e:for(var Fe=0,tt=se.length,Wt=tt>>>1;Fe<Wt;){var Pr=2*(Fe+1)-1,Qt=se[Pr],xr=Pr+1,$r=se[xr];if(0>l(Qt,st))xr<tt&&0>l($r,Qt)?(se[Fe]=$r,se[xr]=st,Fe=xr):(se[Fe]=Qt,se[Pr]=st,Fe=Pr);else if(xr<tt&&0>l($r,st))se[Fe]=$r,se[xr]=st,Fe=xr;else break e}}return Ne}function l(se,Ne){var st=se.sortIndex-Ne.sortIndex;return st!==0?st:se.id-Ne.id}if(typeof performance=="object"&&typeof performance.now=="function"){var R=performance;F.unstable_now=function(){return R.now()}}else{var A=Date,D=A.now();F.unstable_now=function(){return A.now()-D}}var k=[],B=[],z=1,Z=null,W=3,Y=!1,te=!1,le=!1,be=typeof setTimeout=="function"?setTimeout:null,de=typeof clearTimeout=="function"?clearTimeout:null,pe=typeof setImmediate!="undefined"?setImmediate:null;typeof navigator!="undefined"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function Oe(se){for(var Ne=w(B);Ne!==null;){if(Ne.callback===null)v(B);else if(Ne.startTime<=se)v(B),Ne.sortIndex=Ne.expirationTime,c(k,Ne);else break;Ne=w(B)}}function xe(se){if(le=!1,Oe(se),!te)if(w(k)!==null)te=!0,he(Ve);else{var Ne=w(B);Ne!==null&&ye(xe,Ne.startTime-se)}}function Ve(se,Ne){te=!1,le&&(le=!1,de(we),we=-1),Y=!0;var st=W;try{for(Oe(Ne),Z=w(k);Z!==null&&(!(Z.expirationTime>Ne)||se&&!Ke());){var Fe=Z.callback;if(typeof Fe=="function"){Z.callback=null,W=Z.priorityLevel;var tt=Fe(Z.expirationTime<=Ne);Ne=F.unstable_now(),typeof tt=="function"?Z.callback=tt:Z===w(k)&&v(k),Oe(Ne)}else v(k);Z=w(k)}if(Z!==null)var Wt=!0;else{var Pr=w(B);Pr!==null&&ye(xe,Pr.startTime-Ne),Wt=!1}return Wt}finally{Z=null,W=st,Y=!1}}var K=!1,ke=null,we=-1,Me=5,Xe=-1;function Ke(){return!(F.unstable_now()-Xe<Me)}function At(){if(ke!==null){var se=F.unstable_now();Xe=se;var Ne=!0;try{Ne=ke(!0,se)}finally{Ne?mt():(K=!1,ke=null)}}else K=!1}var mt;if(typeof pe=="function")mt=function(){pe(At)};else if(typeof MessageChannel!="undefined"){var ie=new MessageChannel,oe=ie.port2;ie.port1.onmessage=At,mt=function(){oe.postMessage(null)}}else mt=function(){be(At,0)};function he(se){ke=se,K||(K=!0,mt())}function ye(se,Ne){we=be(function(){se(F.unstable_now())},Ne)}F.unstable_IdlePriority=5,F.unstable_ImmediatePriority=1,F.unstable_LowPriority=4,F.unstable_NormalPriority=3,F.unstable_Profiling=null,F.unstable_UserBlockingPriority=2,F.unstable_cancelCallback=function(se){se.callback=null},F.unstable_continueExecution=function(){te||Y||(te=!0,he(Ve))},F.unstable_forceFrameRate=function(se){0>se||125<se?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Me=0<se?Math.floor(1e3/se):5},F.unstable_getCurrentPriorityLevel=function(){return W},F.unstable_getFirstCallbackNode=function(){return w(k)},F.unstable_next=function(se){switch(W){case 1:case 2:case 3:var Ne=3;break;default:Ne=W}var st=W;W=Ne;try{return se()}finally{W=st}},F.unstable_pauseExecution=function(){},F.unstable_requestPaint=function(){},F.unstable_runWithPriority=function(se,Ne){switch(se){case 1:case 2:case 3:case 4:case 5:break;default:se=3}var st=W;W=se;try{return Ne()}finally{W=st}},F.unstable_scheduleCallback=function(se,Ne,st){var Fe=F.unstable_now();switch(typeof st=="object"&&st!==null?(st=st.delay,st=typeof st=="number"&&0<st?Fe+st:Fe):st=Fe,se){case 1:var tt=-1;break;case 2:tt=250;break;case 5:tt=1073741823;break;case 4:tt=1e4;break;default:tt=5e3}return tt=st+tt,se={id:z++,callback:Ne,priorityLevel:se,startTime:st,expirationTime:tt,sortIndex:-1},st>Fe?(se.sortIndex=st,c(B,se),w(k)===null&&se===w(B)&&(le?(de(we),we=-1):le=!0,ye(xe,st-Fe))):(se.sortIndex=tt,c(k,se),te||Y||(te=!0,he(Ve))),se},F.unstable_shouldYield=Ke,F.unstable_wrapCallback=function(se){var Ne=W;return function(){var st=W;W=Ne;try{return se.apply(this,arguments)}finally{W=st}}}},22962:function(U,F,c){"use strict";U.exports=c(85568)},50631:function(U){U.exports=function(c,w,v,l){var R=v?v.call(l,c,w):void 0;if(R!==void 0)return!!R;if(c===w)return!0;if(typeof c!="object"||!c||typeof w!="object"||!w)return!1;var A=Object.keys(c),D=Object.keys(w);if(A.length!==D.length)return!1;for(var k=Object.prototype.hasOwnProperty.bind(w),B=0;B<A.length;B++){var z=A[B];if(!k(z))return!1;var Z=c[z],W=w[z];if(R=v?v.call(l,Z,W,z):void 0,R===!1||R===void 0&&Z!==W)return!1}return!0}},48096:function(U){(function(F,c){U.exports=c()})(this,function(){"use strict";function F(we,Me,Xe,Ke,At,mt){if(!(At-Ke<=Xe)){var ie=Ke+At>>1;c(we,Me,ie,Ke,At,mt%2),F(we,Me,Xe,Ke,ie-1,mt+1),F(we,Me,Xe,ie+1,At,mt+1)}}function c(we,Me,Xe,Ke,At,mt){for(;At>Ke;){if(At-Ke>600){var ie=At-Ke+1,oe=Xe-Ke+1,he=Math.log(ie),ye=.5*Math.exp(2*he/3),se=.5*Math.sqrt(he*ye*(ie-ye)/ie)*(oe-ie/2<0?-1:1),Ne=Math.max(Ke,Math.floor(Xe-oe*ye/ie+se)),st=Math.min(At,Math.floor(Xe+(ie-oe)*ye/ie+se));c(we,Me,Xe,Ne,st,mt)}var Fe=Me[2*Xe+mt],tt=Ke,Wt=At;for(w(we,Me,Ke,Xe),Me[2*At+mt]>Fe&&w(we,Me,Ke,At);tt<Wt;){for(w(we,Me,tt,Wt),tt++,Wt--;Me[2*tt+mt]<Fe;)tt++;for(;Me[2*Wt+mt]>Fe;)Wt--}Me[2*Ke+mt]===Fe?w(we,Me,Ke,Wt):(Wt++,w(we,Me,Wt,At)),Wt<=Xe&&(Ke=Wt+1),Xe<=Wt&&(At=Wt-1)}}function w(we,Me,Xe,Ke){v(we,Xe,Ke),v(Me,2*Xe,2*Ke),v(Me,2*Xe+1,2*Ke+1)}function v(we,Me,Xe){var Ke=we[Me];we[Me]=we[Xe],we[Xe]=Ke}function l(we,Me,Xe,Ke,At,mt,ie){for(var oe=[0,we.length-1,0],he=[],ye,se;oe.length;){var Ne=oe.pop(),st=oe.pop(),Fe=oe.pop();if(st-Fe<=ie){for(var tt=Fe;tt<=st;tt++)ye=Me[2*tt],se=Me[2*tt+1],ye>=Xe&&ye<=At&&se>=Ke&&se<=mt&&he.push(we[tt]);continue}var Wt=Math.floor((Fe+st)/2);ye=Me[2*Wt],se=Me[2*Wt+1],ye>=Xe&&ye<=At&&se>=Ke&&se<=mt&&he.push(we[Wt]);var Pr=(Ne+1)%2;(Ne===0?Xe<=ye:Ke<=se)&&(oe.push(Fe),oe.push(Wt-1),oe.push(Pr)),(Ne===0?At>=ye:mt>=se)&&(oe.push(Wt+1),oe.push(st),oe.push(Pr))}return he}function R(we,Me,Xe,Ke,At,mt){for(var ie=[0,we.length-1,0],oe=[],he=At*At;ie.length;){var ye=ie.pop(),se=ie.pop(),Ne=ie.pop();if(se-Ne<=mt){for(var st=Ne;st<=se;st++)A(Me[2*st],Me[2*st+1],Xe,Ke)<=he&&oe.push(we[st]);continue}var Fe=Math.floor((Ne+se)/2),tt=Me[2*Fe],Wt=Me[2*Fe+1];A(tt,Wt,Xe,Ke)<=he&&oe.push(we[Fe]);var Pr=(ye+1)%2;(ye===0?Xe-At<=tt:Ke-At<=Wt)&&(ie.push(Ne),ie.push(Fe-1),ie.push(Pr)),(ye===0?Xe+At>=tt:Ke+At>=Wt)&&(ie.push(Fe+1),ie.push(se),ie.push(Pr))}return oe}function A(we,Me,Xe,Ke){var At=we-Xe,mt=Me-Ke;return At*At+mt*mt}var D=function(we){return we[0]},k=function(we){return we[1]},B=function(Me,Xe,Ke,At,mt){Xe===void 0&&(Xe=D),Ke===void 0&&(Ke=k),At===void 0&&(At=64),mt===void 0&&(mt=Float64Array),this.nodeSize=At,this.points=Me;for(var ie=Me.length<65536?Uint16Array:Uint32Array,oe=this.ids=new ie(Me.length),he=this.coords=new mt(Me.length*2),ye=0;ye<Me.length;ye++)oe[ye]=ye,he[2*ye]=Xe(Me[ye]),he[2*ye+1]=Ke(Me[ye]);F(oe,he,At,0,oe.length-1,0)};B.prototype.range=function(Me,Xe,Ke,At){return l(this.ids,this.coords,Me,Xe,Ke,At,this.nodeSize)},B.prototype.within=function(Me,Xe,Ke){return R(this.ids,this.coords,Me,Xe,Ke,this.nodeSize)};var z={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:function(we){return we}},Z=Math.fround||function(we){return function(Me){return we[0]=+Me,we[0]}}(new Float32Array(1)),W=function(Me){this.options=Ve(Object.create(z),Me),this.trees=new Array(this.options.maxZoom+1)};W.prototype.load=function(Me){var Xe=this.options,Ke=Xe.log,At=Xe.minZoom,mt=Xe.maxZoom,ie=Xe.nodeSize;Ke&&console.time("total time");var oe="prepare "+Me.length+" points";Ke&&console.time(oe),this.points=Me;for(var he=[],ye=0;ye<Me.length;ye++)!Me[ye].geometry||he.push(te(Me[ye],ye));this.trees[mt+1]=new B(he,K,ke,ie,Float32Array),Ke&&console.timeEnd(oe);for(var se=mt;se>=At;se--){var Ne=+Date.now();he=this._cluster(he,se),this.trees[se]=new B(he,K,ke,ie,Float32Array),Ke&&console.log("z%d: %d clusters in %dms",se,he.length,+Date.now()-Ne)}return Ke&&console.timeEnd("total time"),this},W.prototype.getClusters=function(Me,Xe){var Ke=((Me[0]+180)%360+360)%360-180,At=Math.max(-90,Math.min(90,Me[1])),mt=Me[2]===180?180:((Me[2]+180)%360+360)%360-180,ie=Math.max(-90,Math.min(90,Me[3]));if(Me[2]-Me[0]>=360)Ke=-180,mt=180;else if(Ke>mt){var oe=this.getClusters([Ke,At,180,ie],Xe),he=this.getClusters([-180,At,mt,ie],Xe);return oe.concat(he)}for(var ye=this.trees[this._limitZoom(Xe)],se=ye.range(de(Ke),pe(ie),de(mt),pe(At)),Ne=[],st=0,Fe=se;st<Fe.length;st+=1){var tt=Fe[st],Wt=ye.points[tt];Ne.push(Wt.numPoints?le(Wt):this.points[Wt.index])}return Ne},W.prototype.getChildren=function(Me){var Xe=this._getOriginId(Me),Ke=this._getOriginZoom(Me),At="No cluster with the specified id.",mt=this.trees[Ke];if(!mt)throw new Error(At);var ie=mt.points[Xe];if(!ie)throw new Error(At);for(var oe=this.options.radius/(this.options.extent*Math.pow(2,Ke-1)),he=mt.within(ie.x,ie.y,oe),ye=[],se=0,Ne=he;se<Ne.length;se+=1){var st=Ne[se],Fe=mt.points[st];Fe.parentId===Me&&ye.push(Fe.numPoints?le(Fe):this.points[Fe.index])}if(ye.length===0)throw new Error(At);return ye},W.prototype.getLeaves=function(Me,Xe,Ke){Xe=Xe||10,Ke=Ke||0;var At=[];return this._appendLeaves(At,Me,Xe,Ke,0),At},W.prototype.getTile=function(Me,Xe,Ke){var At=this.trees[this._limitZoom(Me)],mt=Math.pow(2,Me),ie=this.options,oe=ie.extent,he=ie.radius,ye=he/oe,se=(Ke-ye)/mt,Ne=(Ke+1+ye)/mt,st={features:[]};return this._addTileFeatures(At.range((Xe-ye)/mt,se,(Xe+1+ye)/mt,Ne),At.points,Xe,Ke,mt,st),Xe===0&&this._addTileFeatures(At.range(1-ye/mt,se,1,Ne),At.points,mt,Ke,mt,st),Xe===mt-1&&this._addTileFeatures(At.range(0,se,ye/mt,Ne),At.points,-1,Ke,mt,st),st.features.length?st:null},W.prototype.getClusterExpansionZoom=function(Me){for(var Xe=this._getOriginZoom(Me)-1;Xe<=this.options.maxZoom;){var Ke=this.getChildren(Me);if(Xe++,Ke.length!==1)break;Me=Ke[0].properties.cluster_id}return Xe},W.prototype._appendLeaves=function(Me,Xe,Ke,At,mt){for(var ie=this.getChildren(Xe),oe=0,he=ie;oe<he.length;oe+=1){var ye=he[oe],se=ye.properties;if(se&&se.cluster?mt+se.point_count<=At?mt+=se.point_count:mt=this._appendLeaves(Me,se.cluster_id,Ke,At,mt):mt<At?mt++:Me.push(ye),Me.length===Ke)break}return mt},W.prototype._addTileFeatures=function(Me,Xe,Ke,At,mt,ie){for(var oe=0,he=Me;oe<he.length;oe+=1){var ye=he[oe],se=Xe[ye],Ne=se.numPoints,st=void 0,Fe=void 0,tt=void 0;if(Ne)st=be(se),Fe=se.x,tt=se.y;else{var Wt=this.points[se.index];st=Wt.properties,Fe=de(Wt.geometry.coordinates[0]),tt=pe(Wt.geometry.coordinates[1])}var Pr={type:1,geometry:[[Math.round(this.options.extent*(Fe*mt-Ke)),Math.round(this.options.extent*(tt*mt-At))]],tags:st},Qt=void 0;Ne?Qt=se.id:this.options.generateId?Qt=se.index:this.points[se.index].id&&(Qt=this.points[se.index].id),Qt!==void 0&&(Pr.id=Qt),ie.features.push(Pr)}},W.prototype._limitZoom=function(Me){return Math.max(this.options.minZoom,Math.min(Math.floor(+Me),this.options.maxZoom+1))},W.prototype._cluster=function(Me,Xe){for(var Ke=[],At=this.options,mt=At.radius,ie=At.extent,oe=At.reduce,he=At.minPoints,ye=mt/(ie*Math.pow(2,Xe)),se=0;se<Me.length;se++){var Ne=Me[se];if(!(Ne.zoom<=Xe)){Ne.zoom=Xe;for(var st=this.trees[Xe+1],Fe=st.within(Ne.x,Ne.y,ye),tt=Ne.numPoints||1,Wt=tt,Pr=0,Qt=Fe;Pr<Qt.length;Pr+=1){var xr=Qt[Pr],$r=st.points[xr];$r.zoom>Xe&&(Wt+=$r.numPoints||1)}if(Wt>tt&&Wt>=he){for(var Cr=Ne.x*tt,sn=Ne.y*tt,ot=oe&&tt>1?this._map(Ne,!0):null,_r=(se<<5)+(Xe+1)+this.points.length,cr=0,Vr=Fe;cr<Vr.length;cr+=1){var Qn=Vr[cr],mn=st.points[Qn];if(!(mn.zoom<=Xe)){mn.zoom=Xe;var _n=mn.numPoints||1;Cr+=mn.x*_n,sn+=mn.y*_n,mn.parentId=_r,oe&&(ot||(ot=this._map(Ne,!0)),oe(ot,this._map(mn)))}}Ne.parentId=_r,Ke.push(Y(Cr/Wt,sn/Wt,_r,Wt,ot))}else if(Ke.push(Ne),Wt>1)for(var Yr=0,Fr=Fe;Yr<Fr.length;Yr+=1){var kr=Fr[Yr],ft=st.points[kr];ft.zoom<=Xe||(ft.zoom=Xe,Ke.push(ft))}}}return Ke},W.prototype._getOriginId=function(Me){return Me-this.points.length>>5},W.prototype._getOriginZoom=function(Me){return(Me-this.points.length)%32},W.prototype._map=function(Me,Xe){if(Me.numPoints)return Xe?Ve({},Me.properties):Me.properties;var Ke=this.points[Me.index].properties,At=this.options.map(Ke);return Xe&&At===Ke?Ve({},At):At};function Y(we,Me,Xe,Ke,At){return{x:Z(we),y:Z(Me),zoom:1/0,id:Xe,parentId:-1,numPoints:Ke,properties:At}}function te(we,Me){var Xe=we.geometry.coordinates,Ke=Xe[0],At=Xe[1];return{x:Z(de(Ke)),y:Z(pe(At)),zoom:1/0,index:Me,parentId:-1}}function le(we){return{type:"Feature",id:we.id,properties:be(we),geometry:{type:"Point",coordinates:[Oe(we.x),xe(we.y)]}}}function be(we){var Me=we.numPoints,Xe=Me>=1e4?Math.round(Me/1e3)+"k":Me>=1e3?Math.round(Me/100)/10+"k":Me;return Ve(Ve({},we.properties),{cluster:!0,cluster_id:we.id,point_count:Me,point_count_abbreviated:Xe})}function de(we){return we/360+.5}function pe(we){var Me=Math.sin(we*Math.PI/180),Xe=.5-.25*Math.log((1+Me)/(1-Me))/Math.PI;return Xe<0?0:Xe>1?1:Xe}function Oe(we){return(we-.5)*360}function xe(we){var Me=(180-we*360)*Math.PI/180;return 360*Math.atan(Math.exp(Me))/Math.PI-90}function Ve(we,Me){for(var Xe in Me)we[Xe]=Me[Xe];return we}function K(we){return we.x}function ke(we){return we.y}return W})},16935:function(U){U.exports=function(){var F=document.getSelection();if(!F.rangeCount)return function(){};for(var c=document.activeElement,w=[],v=0;v<F.rangeCount;v++)w.push(F.getRangeAt(v));switch(c.tagName.toUpperCase()){case"INPUT":case"TEXTAREA":c.blur();break;default:c=null;break}return F.removeAllRanges(),function(){F.type==="Caret"&&F.removeAllRanges(),F.rangeCount||w.forEach(function(l){F.addRange(l)}),c&&c.focus()}}},34254:function(U,F,c){"use strict";c.d(F,{ZT:function(){return v},_T:function(){return R},ev:function(){return de},pi:function(){return l}});var w=function(mt,ie){return w=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(oe,he){oe.__proto__=he}||function(oe,he){for(var ye in he)Object.prototype.hasOwnProperty.call(he,ye)&&(oe[ye]=he[ye])},w(mt,ie)};function v(mt,ie){if(typeof ie!="function"&&ie!==null)throw new TypeError("Class extends value "+String(ie)+" is not a constructor or null");w(mt,ie);function oe(){this.constructor=mt}mt.prototype=ie===null?Object.create(ie):(oe.prototype=ie.prototype,new oe)}var l=function(){return l=Object.assign||function(ie){for(var oe,he=1,ye=arguments.length;he<ye;he++){oe=arguments[he];for(var se in oe)Object.prototype.hasOwnProperty.call(oe,se)&&(ie[se]=oe[se])}return ie},l.apply(this,arguments)};function R(mt,ie){var oe={};for(var he in mt)Object.prototype.hasOwnProperty.call(mt,he)&&ie.indexOf(he)<0&&(oe[he]=mt[he]);if(mt!=null&&typeof Object.getOwnPropertySymbols=="function")for(var ye=0,he=Object.getOwnPropertySymbols(mt);ye<he.length;ye++)ie.indexOf(he[ye])<0&&Object.prototype.propertyIsEnumerable.call(mt,he[ye])&&(oe[he[ye]]=mt[he[ye]]);return oe}function A(mt,ie,oe,he){var ye=arguments.length,se=ye<3?ie:he===null?he=Object.getOwnPropertyDescriptor(ie,oe):he,Ne;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")se=Reflect.decorate(mt,ie,oe,he);else for(var st=mt.length-1;st>=0;st--)(Ne=mt[st])&&(se=(ye<3?Ne(se):ye>3?Ne(ie,oe,se):Ne(ie,oe))||se);return ye>3&&se&&Object.defineProperty(ie,oe,se),se}function D(mt,ie){return function(oe,he){ie(oe,he,mt)}}function k(mt,ie){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(mt,ie)}function B(mt,ie,oe,he){function ye(se){return se instanceof oe?se:new oe(function(Ne){Ne(se)})}return new(oe||(oe=Promise))(function(se,Ne){function st(Wt){try{tt(he.next(Wt))}catch(Pr){Ne(Pr)}}function Fe(Wt){try{tt(he.throw(Wt))}catch(Pr){Ne(Pr)}}function tt(Wt){Wt.done?se(Wt.value):ye(Wt.value).then(st,Fe)}tt((he=he.apply(mt,ie||[])).next())})}function z(mt,ie){var oe={label:0,sent:function(){if(se[0]&1)throw se[1];return se[1]},trys:[],ops:[]},he,ye,se,Ne;return Ne={next:st(0),throw:st(1),return:st(2)},typeof Symbol=="function"&&(Ne[Symbol.iterator]=function(){return this}),Ne;function st(tt){return function(Wt){return Fe([tt,Wt])}}function Fe(tt){if(he)throw new TypeError("Generator is already executing.");for(;oe;)try{if(he=1,ye&&(se=tt[0]&2?ye.return:tt[0]?ye.throw||((se=ye.return)&&se.call(ye),0):ye.next)&&!(se=se.call(ye,tt[1])).done)return se;switch(ye=0,se&&(tt=[tt[0]&2,se.value]),tt[0]){case 0:case 1:se=tt;break;case 4:return oe.label++,{value:tt[1],done:!1};case 5:oe.label++,ye=tt[1],tt=[0];continue;case 7:tt=oe.ops.pop(),oe.trys.pop();continue;default:if(se=oe.trys,!(se=se.length>0&&se[se.length-1])&&(tt[0]===6||tt[0]===2)){oe=0;continue}if(tt[0]===3&&(!se||tt[1]>se[0]&&tt[1]<se[3])){oe.label=tt[1];break}if(tt[0]===6&&oe.label<se[1]){oe.label=se[1],se=tt;break}if(se&&oe.label<se[2]){oe.label=se[2],oe.ops.push(tt);break}se[2]&&oe.ops.pop(),oe.trys.pop();continue}tt=ie.call(mt,oe)}catch(Wt){tt=[6,Wt],ye=0}finally{he=se=0}if(tt[0]&5)throw tt[1];return{value:tt[0]?tt[1]:void 0,done:!0}}}var Z=Object.create?function(mt,ie,oe,he){he===void 0&&(he=oe);var ye=Object.getOwnPropertyDescriptor(ie,oe);(!ye||("get"in ye?!ie.__esModule:ye.writable||ye.configurable))&&(ye={enumerable:!0,get:function(){return ie[oe]}}),Object.defineProperty(mt,he,ye)}:function(mt,ie,oe,he){he===void 0&&(he=oe),mt[he]=ie[oe]};function W(mt,ie){for(var oe in mt)oe!=="default"&&!Object.prototype.hasOwnProperty.call(ie,oe)&&Z(ie,mt,oe)}function Y(mt){var ie=typeof Symbol=="function"&&Symbol.iterator,oe=ie&&mt[ie],he=0;if(oe)return oe.call(mt);if(mt&&typeof mt.length=="number")return{next:function(){return mt&&he>=mt.length&&(mt=void 0),{value:mt&&mt[he++],done:!mt}}};throw new TypeError(ie?"Object is not iterable.":"Symbol.iterator is not defined.")}function te(mt,ie){var oe=typeof Symbol=="function"&&mt[Symbol.iterator];if(!oe)return mt;var he=oe.call(mt),ye,se=[],Ne;try{for(;(ie===void 0||ie-- >0)&&!(ye=he.next()).done;)se.push(ye.value)}catch(st){Ne={error:st}}finally{try{ye&&!ye.done&&(oe=he.return)&&oe.call(he)}finally{if(Ne)throw Ne.error}}return se}function le(){for(var mt=[],ie=0;ie<arguments.length;ie++)mt=mt.concat(te(arguments[ie]));return mt}function be(){for(var mt=0,ie=0,oe=arguments.length;ie<oe;ie++)mt+=arguments[ie].length;for(var he=Array(mt),ye=0,ie=0;ie<oe;ie++)for(var se=arguments[ie],Ne=0,st=se.length;Ne<st;Ne++,ye++)he[ye]=se[Ne];return he}function de(mt,ie,oe){if(oe||arguments.length===2)for(var he=0,ye=ie.length,se;he<ye;he++)(se||!(he in ie))&&(se||(se=Array.prototype.slice.call(ie,0,he)),se[he]=ie[he]);return mt.concat(se||Array.prototype.slice.call(ie))}function pe(mt){return this instanceof pe?(this.v=mt,this):new pe(mt)}function Oe(mt,ie,oe){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var he=oe.apply(mt,ie||[]),ye,se=[];return ye={},Ne("next"),Ne("throw"),Ne("return"),ye[Symbol.asyncIterator]=function(){return this},ye;function Ne(Qt){he[Qt]&&(ye[Qt]=function(xr){return new Promise(function($r,Cr){se.push([Qt,xr,$r,Cr])>1||st(Qt,xr)})})}function st(Qt,xr){try{Fe(he[Qt](xr))}catch($r){Pr(se[0][3],$r)}}function Fe(Qt){Qt.value instanceof pe?Promise.resolve(Qt.value.v).then(tt,Wt):Pr(se[0][2],Qt)}function tt(Qt){st("next",Qt)}function Wt(Qt){st("throw",Qt)}function Pr(Qt,xr){Qt(xr),se.shift(),se.length&&st(se[0][0],se[0][1])}}function xe(mt){var ie,oe;return ie={},he("next"),he("throw",function(ye){throw ye}),he("return"),ie[Symbol.iterator]=function(){return this},ie;function he(ye,se){ie[ye]=mt[ye]?function(Ne){return(oe=!oe)?{value:pe(mt[ye](Ne)),done:ye==="return"}:se?se(Ne):Ne}:se}}function Ve(mt){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var ie=mt[Symbol.asyncIterator],oe;return ie?ie.call(mt):(mt=typeof Y=="function"?Y(mt):mt[Symbol.iterator](),oe={},he("next"),he("throw"),he("return"),oe[Symbol.asyncIterator]=function(){return this},oe);function he(se){oe[se]=mt[se]&&function(Ne){return new Promise(function(st,Fe){Ne=mt[se](Ne),ye(st,Fe,Ne.done,Ne.value)})}}function ye(se,Ne,st,Fe){Promise.resolve(Fe).then(function(tt){se({value:tt,done:st})},Ne)}}function K(mt,ie){return Object.defineProperty?Object.defineProperty(mt,"raw",{value:ie}):mt.raw=ie,mt}var ke=Object.create?function(mt,ie){Object.defineProperty(mt,"default",{enumerable:!0,value:ie})}:function(mt,ie){mt.default=ie};function we(mt){if(mt&&mt.__esModule)return mt;var ie={};if(mt!=null)for(var oe in mt)oe!=="default"&&Object.prototype.hasOwnProperty.call(mt,oe)&&Z(ie,mt,oe);return ke(ie,mt),ie}function Me(mt){return mt&&mt.__esModule?mt:{default:mt}}function Xe(mt,ie,oe,he){if(oe==="a"&&!he)throw new TypeError("Private accessor was defined without a getter");if(typeof ie=="function"?mt!==ie||!he:!ie.has(mt))throw new TypeError("Cannot read private member from an object whose class did not declare it");return oe==="m"?he:oe==="a"?he.call(mt):he?he.value:ie.get(mt)}function Ke(mt,ie,oe,he,ye){if(he==="m")throw new TypeError("Private method is not writable");if(he==="a"&&!ye)throw new TypeError("Private accessor was defined without a setter");if(typeof ie=="function"?mt!==ie||!ye:!ie.has(mt))throw new TypeError("Cannot write private member to an object whose class did not declare it");return he==="a"?ye.call(mt,oe):ye?ye.value=oe:ie.set(mt,oe),oe}function At(mt,ie){if(ie===null||typeof ie!="object"&&typeof ie!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof mt=="function"?ie===mt:mt.has(ie)}},33737:function(U){function F(c,w){(w==null||w>c.length)&&(w=c.length);for(var v=0,l=new Array(w);v<w;v++)l[v]=c[v];return l}U.exports=F,U.exports.__esModule=!0,U.exports.default=U.exports},31312:function(U){function F(c){if(Array.isArray(c))return c}U.exports=F,U.exports.__esModule=!0,U.exports.default=U.exports},411:function(U){function F(w,v,l,R,A,D,k){try{var B=w[D](k),z=B.value}catch(Z){l(Z);return}B.done?v(z):Promise.resolve(z).then(R,A)}function c(w){return function(){var v=this,l=arguments;return new Promise(function(R,A){var D=w.apply(v,l);function k(z){F(D,R,A,k,B,"next",z)}function B(z){F(D,R,A,k,B,"throw",z)}k(void 0)})}}U.exports=c,U.exports.__esModule=!0,U.exports.default=U.exports},93275:function(U){function F(c,w,v){return w in c?Object.defineProperty(c,w,{value:v,enumerable:!0,configurable:!0,writable:!0}):c[w]=v,c}U.exports=F,U.exports.__esModule=!0,U.exports.default=U.exports},21786:function(U){function F(c,w){var v=c==null?null:typeof Symbol!="undefined"&&c[Symbol.iterator]||c["@@iterator"];if(v!=null){var l=[],R=!0,A=!1,D,k;try{for(v=v.call(c);!(R=(D=v.next()).done)&&(l.push(D.value),!(w&&l.length===w));R=!0);}catch(B){A=!0,k=B}finally{try{!R&&v.return!=null&&v.return()}finally{if(A)throw k}}return l}}U.exports=F,U.exports.__esModule=!0,U.exports.default=U.exports},94343:function(U){function F(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}U.exports=F,U.exports.__esModule=!0,U.exports.default=U.exports},30279:function(U,F,c){var w=c(93275);function v(R,A){var D=Object.keys(R);if(Object.getOwnPropertySymbols){var k=Object.getOwnPropertySymbols(R);A&&(k=k.filter(function(B){return Object.getOwnPropertyDescriptor(R,B).enumerable})),D.push.apply(D,k)}return D}function l(R){for(var A=1;A<arguments.length;A++){var D=arguments[A]!=null?arguments[A]:{};A%2?v(Object(D),!0).forEach(function(k){w(R,k,D[k])}):Object.getOwnPropertyDescriptors?Object.defineProperties(R,Object.getOwnPropertyDescriptors(D)):v(Object(D)).forEach(function(k){Object.defineProperty(R,k,Object.getOwnPropertyDescriptor(D,k))})}return R}U.exports=l,U.exports.__esModule=!0,U.exports.default=U.exports},35290:function(U,F,c){var w=c(69946).default;function v(){"use strict";U.exports=v=function(){return l},U.exports.__esModule=!0,U.exports.default=U.exports;var l={},R=Object.prototype,A=R.hasOwnProperty,D=typeof Symbol=="function"?Symbol:{},k=D.iterator||"@@iterator",B=D.asyncIterator||"@@asyncIterator",z=D.toStringTag||"@@toStringTag";function Z(ie,oe,he){return Object.defineProperty(ie,oe,{value:he,enumerable:!0,configurable:!0,writable:!0}),ie[oe]}try{Z({},"")}catch(ie){Z=function(he,ye,se){return he[ye]=se}}function W(ie,oe,he,ye){var se=oe&&oe.prototype instanceof le?oe:le,Ne=Object.create(se.prototype),st=new Ke(ye||[]);return Ne._invoke=function(Fe,tt,Wt){var Pr="suspendedStart";return function(Qt,xr){if(Pr==="executing")throw new Error("Generator is already running");if(Pr==="completed"){if(Qt==="throw")throw xr;return mt()}for(Wt.method=Qt,Wt.arg=xr;;){var $r=Wt.delegate;if($r){var Cr=we($r,Wt);if(Cr){if(Cr===te)continue;return Cr}}if(Wt.method==="next")Wt.sent=Wt._sent=Wt.arg;else if(Wt.method==="throw"){if(Pr==="suspendedStart")throw Pr="completed",Wt.arg;Wt.dispatchException(Wt.arg)}else Wt.method==="return"&&Wt.abrupt("return",Wt.arg);Pr="executing";var sn=Y(Fe,tt,Wt);if(sn.type==="normal"){if(Pr=Wt.done?"completed":"suspendedYield",sn.arg===te)continue;return{value:sn.arg,done:Wt.done}}sn.type==="throw"&&(Pr="completed",Wt.method="throw",Wt.arg=sn.arg)}}}(ie,he,st),Ne}function Y(ie,oe,he){try{return{type:"normal",arg:ie.call(oe,he)}}catch(ye){return{type:"throw",arg:ye}}}l.wrap=W;var te={};function le(){}function be(){}function de(){}var pe={};Z(pe,k,function(){return this});var Oe=Object.getPrototypeOf,xe=Oe&&Oe(Oe(At([])));xe&&xe!==R&&A.call(xe,k)&&(pe=xe);var Ve=de.prototype=le.prototype=Object.create(pe);function K(ie){["next","throw","return"].forEach(function(oe){Z(ie,oe,function(he){return this._invoke(oe,he)})})}function ke(ie,oe){function he(se,Ne,st,Fe){var tt=Y(ie[se],ie,Ne);if(tt.type!=="throw"){var Wt=tt.arg,Pr=Wt.value;return Pr&&w(Pr)=="object"&&A.call(Pr,"__await")?oe.resolve(Pr.__await).then(function(Qt){he("next",Qt,st,Fe)},function(Qt){he("throw",Qt,st,Fe)}):oe.resolve(Pr).then(function(Qt){Wt.value=Qt,st(Wt)},function(Qt){return he("throw",Qt,st,Fe)})}Fe(tt.arg)}var ye;this._invoke=function(se,Ne){function st(){return new oe(function(Fe,tt){he(se,Ne,Fe,tt)})}return ye=ye?ye.then(st,st):st()}}function we(ie,oe){var he=ie.iterator[oe.method];if(he===void 0){if(oe.delegate=null,oe.method==="throw"){if(ie.iterator.return&&(oe.method="return",oe.arg=void 0,we(ie,oe),oe.method==="throw"))return te;oe.method="throw",oe.arg=new TypeError("The iterator does not provide a 'throw' method")}return te}var ye=Y(he,ie.iterator,oe.arg);if(ye.type==="throw")return oe.method="throw",oe.arg=ye.arg,oe.delegate=null,te;var se=ye.arg;return se?se.done?(oe[ie.resultName]=se.value,oe.next=ie.nextLoc,oe.method!=="return"&&(oe.method="next",oe.arg=void 0),oe.delegate=null,te):se:(oe.method="throw",oe.arg=new TypeError("iterator result is not an object"),oe.delegate=null,te)}function Me(ie){var oe={tryLoc:ie[0]};1 in ie&&(oe.catchLoc=ie[1]),2 in ie&&(oe.finallyLoc=ie[2],oe.afterLoc=ie[3]),this.tryEntries.push(oe)}function Xe(ie){var oe=ie.completion||{};oe.type="normal",delete oe.arg,ie.completion=oe}function Ke(ie){this.tryEntries=[{tryLoc:"root"}],ie.forEach(Me,this),this.reset(!0)}function At(ie){if(ie){var oe=ie[k];if(oe)return oe.call(ie);if(typeof ie.next=="function")return ie;if(!isNaN(ie.length)){var he=-1,ye=function se(){for(;++he<ie.length;)if(A.call(ie,he))return se.value=ie[he],se.done=!1,se;return se.value=void 0,se.done=!0,se};return ye.next=ye}}return{next:mt}}function mt(){return{value:void 0,done:!0}}return be.prototype=de,Z(Ve,"constructor",de),Z(de,"constructor",be),be.displayName=Z(de,z,"GeneratorFunction"),l.isGeneratorFunction=function(ie){var oe=typeof ie=="function"&&ie.constructor;return!!oe&&(oe===be||(oe.displayName||oe.name)==="GeneratorFunction")},l.mark=function(ie){return Object.setPrototypeOf?Object.setPrototypeOf(ie,de):(ie.__proto__=de,Z(ie,z,"GeneratorFunction")),ie.prototype=Object.create(Ve),ie},l.awrap=function(ie){return{__await:ie}},K(ke.prototype),Z(ke.prototype,B,function(){return this}),l.AsyncIterator=ke,l.async=function(ie,oe,he,ye,se){se===void 0&&(se=Promise);var Ne=new ke(W(ie,oe,he,ye),se);return l.isGeneratorFunction(oe)?Ne:Ne.next().then(function(st){return st.done?st.value:Ne.next()})},K(Ve),Z(Ve,z,"Generator"),Z(Ve,k,function(){return this}),Z(Ve,"toString",function(){return"[object Generator]"}),l.keys=function(ie){var oe=[];for(var he in ie)oe.push(he);return oe.reverse(),function ye(){for(;oe.length;){var se=oe.pop();if(se in ie)return ye.value=se,ye.done=!1,ye}return ye.done=!0,ye}},l.values=At,Ke.prototype={constructor:Ke,reset:function(oe){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(Xe),!oe)for(var he in this)he.charAt(0)==="t"&&A.call(this,he)&&!isNaN(+he.slice(1))&&(this[he]=void 0)},stop:function(){this.done=!0;var oe=this.tryEntries[0].completion;if(oe.type==="throw")throw oe.arg;return this.rval},dispatchException:function(oe){if(this.done)throw oe;var he=this;function ye(Wt,Pr){return st.type="throw",st.arg=oe,he.next=Wt,Pr&&(he.method="next",he.arg=void 0),!!Pr}for(var se=this.tryEntries.length-1;se>=0;--se){var Ne=this.tryEntries[se],st=Ne.completion;if(Ne.tryLoc==="root")return ye("end");if(Ne.tryLoc<=this.prev){var Fe=A.call(Ne,"catchLoc"),tt=A.call(Ne,"finallyLoc");if(Fe&&tt){if(this.prev<Ne.catchLoc)return ye(Ne.catchLoc,!0);if(this.prev<Ne.finallyLoc)return ye(Ne.finallyLoc)}else if(Fe){if(this.prev<Ne.catchLoc)return ye(Ne.catchLoc,!0)}else{if(!tt)throw new Error("try statement without catch or finally");if(this.prev<Ne.finallyLoc)return ye(Ne.finallyLoc)}}}},abrupt:function(oe,he){for(var ye=this.tryEntries.length-1;ye>=0;--ye){var se=this.tryEntries[ye];if(se.tryLoc<=this.prev&&A.call(se,"finallyLoc")&&this.prev<se.finallyLoc){var Ne=se;break}}Ne&&(oe==="break"||oe==="continue")&&Ne.tryLoc<=he&&he<=Ne.finallyLoc&&(Ne=null);var st=Ne?Ne.completion:{};return st.type=oe,st.arg=he,Ne?(this.method="next",this.next=Ne.finallyLoc,te):this.complete(st)},complete:function(oe,he){if(oe.type==="throw")throw oe.arg;return oe.type==="break"||oe.type==="continue"?this.next=oe.arg:oe.type==="return"?(this.rval=this.arg=oe.arg,this.method="return",this.next="end"):oe.type==="normal"&&he&&(this.next=he),te},finish:function(oe){for(var he=this.tryEntries.length-1;he>=0;--he){var ye=this.tryEntries[he];if(ye.finallyLoc===oe)return this.complete(ye.completion,ye.afterLoc),Xe(ye),te}},catch:function(oe){for(var he=this.tryEntries.length-1;he>=0;--he){var ye=this.tryEntries[he];if(ye.tryLoc===oe){var se=ye.completion;if(se.type==="throw"){var Ne=se.arg;Xe(ye)}return Ne}}throw new Error("illegal catch attempt")},delegateYield:function(oe,he,ye){return this.delegate={iterator:At(oe),resultName:he,nextLoc:ye},this.method==="next"&&(this.arg=void 0),te}},l}U.exports=v,U.exports.__esModule=!0,U.exports.default=U.exports},46686:function(U,F,c){var w=c(31312),v=c(21786),l=c(94945),R=c(94343);function A(D,k){return w(D)||v(D,k)||l(D,k)||R()}U.exports=A,U.exports.__esModule=!0,U.exports.default=U.exports},69946:function(U){function F(c){return U.exports=F=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(w){return typeof w}:function(w){return w&&typeof Symbol=="function"&&w.constructor===Symbol&&w!==Symbol.prototype?"symbol":typeof w},U.exports.__esModule=!0,U.exports.default=U.exports,F(c)}U.exports=F,U.exports.__esModule=!0,U.exports.default=U.exports},94945:function(U,F,c){var w=c(33737);function v(l,R){if(!!l){if(typeof l=="string")return w(l,R);var A=Object.prototype.toString.call(l).slice(8,-1);if(A==="Object"&&l.constructor&&(A=l.constructor.name),A==="Map"||A==="Set")return Array.from(l);if(A==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(A))return w(l,R)}}U.exports=v,U.exports.__esModule=!0,U.exports.default=U.exports},33305:function(U,F,c){var w=c(99903).default;function v(){"use strict";U.exports=v=function(){return l},U.exports.__esModule=!0,U.exports.default=U.exports;var l={},R=Object.prototype,A=R.hasOwnProperty,D=Object.defineProperty||function(he,ye,se){he[ye]=se.value},k=typeof Symbol=="function"?Symbol:{},B=k.iterator||"@@iterator",z=k.asyncIterator||"@@asyncIterator",Z=k.toStringTag||"@@toStringTag";function W(he,ye,se){return Object.defineProperty(he,ye,{value:se,enumerable:!0,configurable:!0,writable:!0}),he[ye]}try{W({},"")}catch(he){W=function(se,Ne,st){return se[Ne]=st}}function Y(he,ye,se,Ne){var st=ye&&ye.prototype instanceof be?ye:be,Fe=Object.create(st.prototype),tt=new mt(Ne||[]);return D(Fe,"_invoke",{value:Me(he,se,tt)}),Fe}function te(he,ye,se){try{return{type:"normal",arg:he.call(ye,se)}}catch(Ne){return{type:"throw",arg:Ne}}}l.wrap=Y;var le={};function be(){}function de(){}function pe(){}var Oe={};W(Oe,B,function(){return this});var xe=Object.getPrototypeOf,Ve=xe&&xe(xe(ie([])));Ve&&Ve!==R&&A.call(Ve,B)&&(Oe=Ve);var K=pe.prototype=be.prototype=Object.create(Oe);function ke(he){["next","throw","return"].forEach(function(ye){W(he,ye,function(se){return this._invoke(ye,se)})})}function we(he,ye){function se(st,Fe,tt,Wt){var Pr=te(he[st],he,Fe);if(Pr.type!=="throw"){var Qt=Pr.arg,xr=Qt.value;return xr&&w(xr)=="object"&&A.call(xr,"__await")?ye.resolve(xr.__await).then(function($r){se("next",$r,tt,Wt)},function($r){se("throw",$r,tt,Wt)}):ye.resolve(xr).then(function($r){Qt.value=$r,tt(Qt)},function($r){return se("throw",$r,tt,Wt)})}Wt(Pr.arg)}var Ne;D(this,"_invoke",{value:function(Fe,tt){function Wt(){return new ye(function(Pr,Qt){se(Fe,tt,Pr,Qt)})}return Ne=Ne?Ne.then(Wt,Wt):Wt()}})}function Me(he,ye,se){var Ne="suspendedStart";return function(st,Fe){if(Ne==="executing")throw new Error("Generator is already running");if(Ne==="completed"){if(st==="throw")throw Fe;return oe()}for(se.method=st,se.arg=Fe;;){var tt=se.delegate;if(tt){var Wt=Xe(tt,se);if(Wt){if(Wt===le)continue;return Wt}}if(se.method==="next")se.sent=se._sent=se.arg;else if(se.method==="throw"){if(Ne==="suspendedStart")throw Ne="completed",se.arg;se.dispatchException(se.arg)}else se.method==="return"&&se.abrupt("return",se.arg);Ne="executing";var Pr=te(he,ye,se);if(Pr.type==="normal"){if(Ne=se.done?"completed":"suspendedYield",Pr.arg===le)continue;return{value:Pr.arg,done:se.done}}Pr.type==="throw"&&(Ne="completed",se.method="throw",se.arg=Pr.arg)}}}function Xe(he,ye){var se=he.iterator[ye.method];if(se===void 0){if(ye.delegate=null,ye.method==="throw"){if(he.iterator.return&&(ye.method="return",ye.arg=void 0,Xe(he,ye),ye.method==="throw"))return le;ye.method="throw",ye.arg=new TypeError("The iterator does not provide a 'throw' method")}return le}var Ne=te(se,he.iterator,ye.arg);if(Ne.type==="throw")return ye.method="throw",ye.arg=Ne.arg,ye.delegate=null,le;var st=Ne.arg;return st?st.done?(ye[he.resultName]=st.value,ye.next=he.nextLoc,ye.method!=="return"&&(ye.method="next",ye.arg=void 0),ye.delegate=null,le):st:(ye.method="throw",ye.arg=new TypeError("iterator result is not an object"),ye.delegate=null,le)}function Ke(he){var ye={tryLoc:he[0]};1 in he&&(ye.catchLoc=he[1]),2 in he&&(ye.finallyLoc=he[2],ye.afterLoc=he[3]),this.tryEntries.push(ye)}function At(he){var ye=he.completion||{};ye.type="normal",delete ye.arg,he.completion=ye}function mt(he){this.tryEntries=[{tryLoc:"root"}],he.forEach(Ke,this),this.reset(!0)}function ie(he){if(he){var ye=he[B];if(ye)return ye.call(he);if(typeof he.next=="function")return he;if(!isNaN(he.length)){var se=-1,Ne=function st(){for(;++se<he.length;)if(A.call(he,se))return st.value=he[se],st.done=!1,st;return st.value=void 0,st.done=!0,st};return Ne.next=Ne}}return{next:oe}}function oe(){return{value:void 0,done:!0}}return de.prototype=pe,D(K,"constructor",{value:pe,configurable:!0}),D(pe,"constructor",{value:de,configurable:!0}),de.displayName=W(pe,Z,"GeneratorFunction"),l.isGeneratorFunction=function(he){var ye=typeof he=="function"&&he.constructor;return!!ye&&(ye===de||(ye.displayName||ye.name)==="GeneratorFunction")},l.mark=function(he){return Object.setPrototypeOf?Object.setPrototypeOf(he,pe):(he.__proto__=pe,W(he,Z,"GeneratorFunction")),he.prototype=Object.create(K),he},l.awrap=function(he){return{__await:he}},ke(we.prototype),W(we.prototype,z,function(){return this}),l.AsyncIterator=we,l.async=function(he,ye,se,Ne,st){st===void 0&&(st=Promise);var Fe=new we(Y(he,ye,se,Ne),st);return l.isGeneratorFunction(ye)?Fe:Fe.next().then(function(tt){return tt.done?tt.value:Fe.next()})},ke(K),W(K,Z,"Generator"),W(K,B,function(){return this}),W(K,"toString",function(){return"[object Generator]"}),l.keys=function(he){var ye=Object(he),se=[];for(var Ne in ye)se.push(Ne);return se.reverse(),function st(){for(;se.length;){var Fe=se.pop();if(Fe in ye)return st.value=Fe,st.done=!1,st}return st.done=!0,st}},l.values=ie,mt.prototype={constructor:mt,reset:function(ye){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(At),!ye)for(var se in this)se.charAt(0)==="t"&&A.call(this,se)&&!isNaN(+se.slice(1))&&(this[se]=void 0)},stop:function(){this.done=!0;var ye=this.tryEntries[0].completion;if(ye.type==="throw")throw ye.arg;return this.rval},dispatchException:function(ye){if(this.done)throw ye;var se=this;function Ne(Qt,xr){return tt.type="throw",tt.arg=ye,se.next=Qt,xr&&(se.method="next",se.arg=void 0),!!xr}for(var st=this.tryEntries.length-1;st>=0;--st){var Fe=this.tryEntries[st],tt=Fe.completion;if(Fe.tryLoc==="root")return Ne("end");if(Fe.tryLoc<=this.prev){var Wt=A.call(Fe,"catchLoc"),Pr=A.call(Fe,"finallyLoc");if(Wt&&Pr){if(this.prev<Fe.catchLoc)return Ne(Fe.catchLoc,!0);if(this.prev<Fe.finallyLoc)return Ne(Fe.finallyLoc)}else if(Wt){if(this.prev<Fe.catchLoc)return Ne(Fe.catchLoc,!0)}else{if(!Pr)throw new Error("try statement without catch or finally");if(this.prev<Fe.finallyLoc)return Ne(Fe.finallyLoc)}}}},abrupt:function(ye,se){for(var Ne=this.tryEntries.length-1;Ne>=0;--Ne){var st=this.tryEntries[Ne];if(st.tryLoc<=this.prev&&A.call(st,"finallyLoc")&&this.prev<st.finallyLoc){var Fe=st;break}}Fe&&(ye==="break"||ye==="continue")&&Fe.tryLoc<=se&&se<=Fe.finallyLoc&&(Fe=null);var tt=Fe?Fe.completion:{};return tt.type=ye,tt.arg=se,Fe?(this.method="next",this.next=Fe.finallyLoc,le):this.complete(tt)},complete:function(ye,se){if(ye.type==="throw")throw ye.arg;return ye.type==="break"||ye.type==="continue"?this.next=ye.arg:ye.type==="return"?(this.rval=this.arg=ye.arg,this.method="return",this.next="end"):ye.type==="normal"&&se&&(this.next=se),le},finish:function(ye){for(var se=this.tryEntries.length-1;se>=0;--se){var Ne=this.tryEntries[se];if(Ne.finallyLoc===ye)return this.complete(Ne.completion,Ne.afterLoc),At(Ne),le}},catch:function(ye){for(var se=this.tryEntries.length-1;se>=0;--se){var Ne=this.tryEntries[se];if(Ne.tryLoc===ye){var st=Ne.completion;if(st.type==="throw"){var Fe=st.arg;At(Ne)}return Fe}}throw new Error("illegal catch attempt")},delegateYield:function(ye,se,Ne){return this.delegate={iterator:ie(ye),resultName:se,nextLoc:Ne},this.method==="next"&&(this.arg=void 0),le}},l}U.exports=v,U.exports.__esModule=!0,U.exports.default=U.exports},99903:function(U){function F(c){return U.exports=F=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(w){return typeof w}:function(w){return w&&typeof Symbol=="function"&&w.constructor===Symbol&&w!==Symbol.prototype?"symbol":typeof w},U.exports.__esModule=!0,U.exports.default=U.exports,F(c)}U.exports=F,U.exports.__esModule=!0,U.exports.default=U.exports},63363:function(U,F,c){var w=c(33305)();U.exports=w;try{regeneratorRuntime=w}catch(v){typeof globalThis=="object"?globalThis.regeneratorRuntime=w:Function("r","regeneratorRuntime = r")(w)}},98930:function(U,F,c){"use strict";c.d(F,{Z:function(){return w}});function w(v){if(Array.isArray(v))return v}},71120:function(U,F,c){"use strict";c.d(F,{Z:function(){return v}});var w=c(83726);function v(l,R){var A=typeof Symbol!="undefined"&&l[Symbol.iterator]||l["@@iterator"];if(!A){if(Array.isArray(l)||(A=(0,w.Z)(l))||R&&l&&typeof l.length=="number"){A&&(l=A);var D=0,k=function(){};return{s:k,n:function(){return D>=l.length?{done:!0}:{done:!1,value:l[D++]}},e:function(Y){throw Y},f:k}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var B=!0,z=!1,Z;return{s:function(){A=A.call(l)},n:function(){var Y=A.next();return B=Y.done,Y},e:function(Y){z=!0,Z=Y},f:function(){try{!B&&A.return!=null&&A.return()}finally{if(z)throw Z}}}}},82269:function(U,F,c){"use strict";c.d(F,{Z:function(){return w}});function w(v,l,R){return l in v?Object.defineProperty(v,l,{value:R,enumerable:!0,configurable:!0,writable:!0}):v[l]=R,v}},62081:function(U,F,c){"use strict";c.d(F,{Z:function(){return w}});function w(){return w=Object.assign?Object.assign.bind():function(v){for(var l=1;l<arguments.length;l++){var R=arguments[l];for(var A in R)Object.prototype.hasOwnProperty.call(R,A)&&(v[A]=R[A])}return v},w.apply(this,arguments)}},30048:function(U,F,c){"use strict";c.d(F,{Z:function(){return w}});function w(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}},84045:function(U,F,c){"use strict";c.d(F,{Z:function(){return l}});var w=c(82269);function v(R,A){var D=Object.keys(R);if(Object.getOwnPropertySymbols){var k=Object.getOwnPropertySymbols(R);A&&(k=k.filter(function(B){return Object.getOwnPropertyDescriptor(R,B).enumerable})),D.push.apply(D,k)}return D}function l(R){for(var A=1;A<arguments.length;A++){var D=arguments[A]!=null?arguments[A]:{};A%2?v(Object(D),!0).forEach(function(k){(0,w.Z)(R,k,D[k])}):Object.getOwnPropertyDescriptors?Object.defineProperties(R,Object.getOwnPropertyDescriptors(D)):v(Object(D)).forEach(function(k){Object.defineProperty(R,k,Object.getOwnPropertyDescriptor(D,k))})}return R}},18112:function(U,F,c){"use strict";c.d(F,{Z:function(){return v}});function w(l,R){if(l==null)return{};var A={},D=Object.keys(l),k,B;for(B=0;B<D.length;B++)k=D[B],!(R.indexOf(k)>=0)&&(A[k]=l[k]);return A}function v(l,R){if(l==null)return{};var A=w(l,R),D,k;if(Object.getOwnPropertySymbols){var B=Object.getOwnPropertySymbols(l);for(k=0;k<B.length;k++)D=B[k],!(R.indexOf(D)>=0)&&(!Object.prototype.propertyIsEnumerable.call(l,D)||(A[D]=l[D]))}return A}},83726:function(U,F,c){"use strict";c.d(F,{Z:function(){return v}});function w(l,R){(R==null||R>l.length)&&(R=l.length);for(var A=0,D=new Array(R);A<R;A++)D[A]=l[A];return D}function v(l,R){if(!!l){if(typeof l=="string")return w(l,R);var A=Object.prototype.toString.call(l).slice(8,-1);if(A==="Object"&&l.constructor&&(A=l.constructor.name),A==="Map"||A==="Set")return Array.from(l);if(A==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(A))return w(l,R)}}},52352:function(U,F,c){"use strict";c.d(F,{Z:function(){return w}});function w(v,l){(l==null||l>v.length)&&(l=v.length);for(var R=0,A=new Array(l);R<l;R++)A[R]=v[R];return A}},46102:function(U,F,c){"use strict";c.d(F,{Z:function(){return w}});function w(v){if(v===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return v}},17374:function(U,F,c){"use strict";c.d(F,{Z:function(){return v}});function w(l,R,A,D,k,B,z){try{var Z=l[B](z),W=Z.value}catch(Y){A(Y);return}Z.done?R(W):Promise.resolve(W).then(D,k)}function v(l){return function(){var R=this,A=arguments;return new Promise(function(D,k){var B=l.apply(R,A);function z(W){w(B,D,k,z,Z,"next",W)}function Z(W){w(B,D,k,z,Z,"throw",W)}z(void 0)})}}},85665:function(U,F,c){"use strict";c.d(F,{Z:function(){return w}});function w(v,l){if(!(v instanceof l))throw new TypeError("Cannot call a class as a function")}},58966:function(U,F,c){"use strict";c.d(F,{Z:function(){return v}});function w(l,R){for(var A=0;A<R.length;A++){var D=R[A];D.enumerable=D.enumerable||!1,D.configurable=!0,"value"in D&&(D.writable=!0),Object.defineProperty(l,D.key,D)}}function v(l,R,A){return R&&w(l.prototype,R),A&&w(l,A),Object.defineProperty(l,"prototype",{writable:!1}),l}},67519:function(U,F,c){"use strict";c.d(F,{Z:function(){return w}});function w(v,l,R){return l in v?Object.defineProperty(v,l,{value:R,enumerable:!0,configurable:!0,writable:!0}):v[l]=R,v}},24250:function(U,F,c){"use strict";c.d(F,{Z:function(){return w}});function w(){return w=Object.assign?Object.assign.bind():function(v){for(var l=1;l<arguments.length;l++){var R=arguments[l];for(var A in R)Object.prototype.hasOwnProperty.call(R,A)&&(v[A]=R[A])}return v},w.apply(this,arguments)}},28276:function(U,F,c){"use strict";c.d(F,{Z:function(){return w}});function w(v){return w=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(R){return R.__proto__||Object.getPrototypeOf(R)},w(v)}},29848:function(U,F,c){"use strict";c.d(F,{Z:function(){return v}});var w=c(34419);function v(l,R){if(typeof R!="function"&&R!==null)throw new TypeError("Super expression must either be null or a function");l.prototype=Object.create(R&&R.prototype,{constructor:{value:l,writable:!0,configurable:!0}}),Object.defineProperty(l,"prototype",{writable:!1}),R&&(0,w.Z)(l,R)}},4878:function(U,F,c){"use strict";c.d(F,{Z:function(){return w}});function w(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(v){return!1}}},87643:function(U,F,c){"use strict";c.d(F,{Z:function(){return l}});var w=c(67519);function v(R,A){var D=Object.keys(R);if(Object.getOwnPropertySymbols){var k=Object.getOwnPropertySymbols(R);A&&(k=k.filter(function(B){return Object.getOwnPropertyDescriptor(R,B).enumerable})),D.push.apply(D,k)}return D}function l(R){for(var A=1;A<arguments.length;A++){var D=arguments[A]!=null?arguments[A]:{};A%2?v(Object(D),!0).forEach(function(k){(0,w.Z)(R,k,D[k])}):Object.getOwnPropertyDescriptors?Object.defineProperties(R,Object.getOwnPropertyDescriptors(D)):v(Object(D)).forEach(function(k){Object.defineProperty(R,k,Object.getOwnPropertyDescriptor(D,k))})}return R}},91458:function(U,F,c){"use strict";c.d(F,{Z:function(){return v}});function w(l,R){if(l==null)return{};var A={},D=Object.keys(l),k,B;for(B=0;B<D.length;B++)k=D[B],!(R.indexOf(k)>=0)&&(A[k]=l[k]);return A}function v(l,R){if(l==null)return{};var A=w(l,R),D,k;if(Object.getOwnPropertySymbols){var B=Object.getOwnPropertySymbols(l);for(k=0;k<B.length;k++)D=B[k],!(R.indexOf(D)>=0)&&(!Object.prototype.propertyIsEnumerable.call(l,D)||(A[D]=l[D]))}return A}},85412:function(U,F,c){"use strict";c.d(F,{Z:function(){return l}});var w=c(10082),v=c(46102);function l(R,A){if(A&&((0,w.Z)(A)==="object"||typeof A=="function"))return A;if(A!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return(0,v.Z)(R)}},34419:function(U,F,c){"use strict";c.d(F,{Z:function(){return w}});function w(v,l){return w=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(A,D){return A.__proto__=D,A},w(v,l)}},6961:function(U,F,c){"use strict";c.d(F,{Z:function(){return A}});function w(D){if(Array.isArray(D))return D}function v(D,k){var B=D==null?null:typeof Symbol!="undefined"&&D[Symbol.iterator]||D["@@iterator"];if(B!=null){var z=[],Z=!0,W=!1,Y,te;try{for(B=B.call(D);!(Z=(Y=B.next()).done)&&(z.push(Y.value),!(k&&z.length===k));Z=!0);}catch(le){W=!0,te=le}finally{try{!Z&&B.return!=null&&B.return()}finally{if(W)throw te}}return z}}var l=c(45740);function R(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function A(D,k){return w(D)||v(D,k)||(0,l.Z)(D,k)||R()}},67442:function(U,F,c){"use strict";c.d(F,{Z:function(){return D}});var w=c(52352);function v(k){if(Array.isArray(k))return(0,w.Z)(k)}function l(k){if(typeof Symbol!="undefined"&&k[Symbol.iterator]!=null||k["@@iterator"]!=null)return Array.from(k)}var R=c(45740);function A(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function D(k){return v(k)||l(k)||(0,R.Z)(k)||A()}},10082:function(U,F,c){"use strict";c.d(F,{Z:function(){return w}});function w(v){return w=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(l){return typeof l}:function(l){return l&&typeof Symbol=="function"&&l.constructor===Symbol&&l!==Symbol.prototype?"symbol":typeof l},w(v)}},45740:function(U,F,c){"use strict";c.d(F,{Z:function(){return v}});var w=c(52352);function v(l,R){if(!!l){if(typeof l=="string")return(0,w.Z)(l,R);var A=Object.prototype.toString.call(l).slice(8,-1);if(A==="Object"&&l.constructor&&(A=l.constructor.name),A==="Map"||A==="Set")return Array.from(l);if(A==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(A))return(0,w.Z)(l,R)}}}},__webpack_module_cache__={};function __webpack_require__(U){var F=__webpack_module_cache__[U];if(F!==void 0)return F.exports;var c=__webpack_module_cache__[U]={id:U,loaded:!1,exports:{}};return __webpack_modules__[U].call(c.exports,c,c.exports,__webpack_require__),c.loaded=!0,c.exports}__webpack_require__.m=__webpack_modules__,function(){__webpack_require__.n=function(U){var F=U&&U.__esModule?function(){return U.default}:function(){return U};return __webpack_require__.d(F,{a:F}),F}}(),function(){__webpack_require__.d=function(U,F){for(var c in F)__webpack_require__.o(F,c)&&!__webpack_require__.o(U,c)&&Object.defineProperty(U,c,{enumerable:!0,get:F[c]})}}(),function(){__webpack_require__.f={},__webpack_require__.e=function(U){return Promise.all(Object.keys(__webpack_require__.f).reduce(function(F,c){return __webpack_require__.f[c](U,F),F},[]))}}(),function(){__webpack_require__.u=function(U){return""+({81:"Foo__index.md",118:"nm__.pnpm__dumi_2.0.6_56frauz6z7jgqw7nhgbwq7tddm__node_modules__dumi__dist__client__pages__404",244:"docs__typescript__index.md",345:"NextMap__demos",379:"docs__go__index.md",443:"docs__frontend__react.md",506:"index.md",534:"nm__.pnpm__dumi_2.0.6_56frauz6z7jgqw7nhgbwq7tddm__node_modules__dumi__dist__client__pages__Demo__index",585:"NextMap__index.md",705:"docs__frontend__opensource.md",831:"nm__.pnpm__dumi_2.0.6_56frauz6z7jgqw7nhgbwq7tddm__node_modules__dumi__theme-default__layouts__DocLayout__index",899:"NextTopo__index.md",923:"dumi__tmp-production__dumi__theme__ContextWrapper",935:"docs__index.md"}[U]||U)+"."+{81:"ec118e6c",118:"98518967",244:"e050c3f3",345:"b9a60b68",379:"b0789689",443:"58e20039",506:"54920f0a",534:"a3322ff9",585:"8bed5985",705:"adfb708e",803:"76e94550",831:"4d8e6238",854:"bd7d82ed",899:"9e6f1f54",923:"06d27c0e",935:"72dc90eb"}[U]+".async.js"}}(),function(){__webpack_require__.miniCssF=function(U){return""+({81:"Foo__index.md",118:"nm__.pnpm__dumi_2.0.6_56frauz6z7jgqw7nhgbwq7tddm__node_modules__dumi__dist__client__pages__404",244:"docs__typescript__index.md",379:"docs__go__index.md",443:"docs__frontend__react.md",506:"index.md",534:"nm__.pnpm__dumi_2.0.6_56frauz6z7jgqw7nhgbwq7tddm__node_modules__dumi__dist__client__pages__Demo__index",585:"NextMap__index.md",705:"docs__frontend__opensource.md",899:"NextTopo__index.md",935:"docs__index.md"}[U]||U)+"."+{81:"bc13beae",118:"d489b247",244:"bc13beae",379:"bc13beae",443:"bc13beae",506:"bc13beae",534:"578aa5c0",585:"bc13beae",705:"bc13beae",854:"861127b9",899:"bc13beae",935:"bc13beae"}[U]+".chunk.css"}}(),function(){__webpack_require__.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch(U){if(typeof window=="object")return window}}()}(),function(){__webpack_require__.o=function(U,F){return Object.prototype.hasOwnProperty.call(U,F)}}(),function(){var U={},F="dumi2-template:";__webpack_require__.l=function(c,w,v,l){if(U[c]){U[c].push(w);return}var R,A;if(v!==void 0)for(var D=document.getElementsByTagName("script"),k=0;k<D.length;k++){var B=D[k];if(B.getAttribute("src")==c||B.getAttribute("data-webpack")==F+v){R=B;break}}R||(A=!0,R=document.createElement("script"),R.charset="utf-8",R.timeout=120,__webpack_require__.nc&&R.setAttribute("nonce",__webpack_require__.nc),R.setAttribute("data-webpack",F+v),R.src=c),U[c]=[w];var z=function(W,Y){R.onerror=R.onload=null,clearTimeout(Z);var te=U[c];if(delete U[c],R.parentNode&&R.parentNode.removeChild(R),te&&te.forEach(function(le){return le(Y)}),W)return W(Y)},Z=setTimeout(z.bind(null,void 0,{type:"timeout",target:R}),12e4);R.onerror=z.bind(null,R.onerror),R.onload=z.bind(null,R.onload),A&&document.head.appendChild(R)}}(),function(){__webpack_require__.r=function(U){typeof Symbol!="undefined"&&Symbol.toStringTag&&Object.defineProperty(U,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(U,"__esModule",{value:!0})}}(),function(){__webpack_require__.nmd=function(U){return U.paths=[],U.children||(U.children=[]),U}}(),function(){__webpack_require__.p="/dumi2-template/"}(),function(){var U=function(v,l,R,A){var D=document.createElement("link");D.rel="stylesheet",D.type="text/css";var k=function(B){if(D.onerror=D.onload=null,B.type==="load")R();else{var z=B&&(B.type==="load"?"missing":B.type),Z=B&&B.target&&B.target.href||l,W=new Error("Loading CSS chunk "+v+` failed.
(`+Z+")");W.code="CSS_CHUNK_LOAD_FAILED",W.type=z,W.request=Z,D.parentNode.removeChild(D),A(W)}};return D.onerror=D.onload=k,D.href=l,document.head.appendChild(D),D},F=function(v,l){for(var R=document.getElementsByTagName("link"),A=0;A<R.length;A++){var D=R[A],k=D.getAttribute("data-href")||D.getAttribute("href");if(D.rel==="stylesheet"&&(k===v||k===l))return D}for(var B=document.getElementsByTagName("style"),A=0;A<B.length;A++){var D=B[A],k=D.getAttribute("data-href");if(k===v||k===l)return D}},c=function(v){return new Promise(function(l,R){var A=__webpack_require__.miniCssF(v),D=__webpack_require__.p+A;if(F(A,D))return l();U(v,D,l,R)})},w={620:0};__webpack_require__.f.miniCss=function(v,l){var R={81:1,118:1,244:1,379:1,443:1,506:1,534:1,585:1,705:1,854:1,899:1,935:1};w[v]?l.push(w[v]):w[v]!==0&&R[v]&&l.push(w[v]=c(v).then(function(){w[v]=0},function(A){throw delete w[v],A}))}}(),function(){var U={620:0};__webpack_require__.f.j=function(w,v){var l=__webpack_require__.o(U,w)?U[w]:void 0;if(l!==0)if(l)v.push(l[2]);else{var R=new Promise(function(B,z){l=U[w]=[B,z]});v.push(l[2]=R);var A=__webpack_require__.p+__webpack_require__.u(w),D=new Error,k=function(B){if(__webpack_require__.o(U,w)&&(l=U[w],l!==0&&(U[w]=void 0),l)){var z=B&&(B.type==="load"?"missing":B.type),Z=B&&B.target&&B.target.src;D.message="Loading chunk "+w+` failed.
(`+z+": "+Z+")",D.name="ChunkLoadError",D.type=z,D.request=Z,l[1](D)}};__webpack_require__.l(A,k,"chunk-"+w,w)}};var F=function(w,v){var l=v[0],R=v[1],A=v[2],D,k,B=0;if(l.some(function(Z){return U[Z]!==0})){for(D in R)__webpack_require__.o(R,D)&&(__webpack_require__.m[D]=R[D]);if(A)var z=A(__webpack_require__)}for(w&&w(v);B<l.length;B++)k=l[B],__webpack_require__.o(U,k)&&U[k]&&U[k][0](),U[k]=0},c=self.webpackChunkdumi2_template=self.webpackChunkdumi2_template||[];c.forEach(F.bind(null,0)),c.push=F.bind(null,c.push.bind(c))}();var __webpack_exports__={};(function(){"use strict";var U={};__webpack_require__.r(U),__webpack_require__.d(U,{patchRoutes:function(){return ah}});var F={};__webpack_require__.r(F),__webpack_require__.d(F,{i18nProvider:function(){return ku}});var c=__webpack_require__(35290),w=__webpack_require__.n(c),v=__webpack_require__(30279),l=__webpack_require__.n(v),R=__webpack_require__(411),A=__webpack_require__.n(R),D=__webpack_require__(37554),k=__webpack_require__(27008),B=__webpack_require__(22426),z=__webpack_require__(49573),Z=__webpack_require__(92459),W=__webpack_require__(19567),Y=__webpack_require__(53964),te=__webpack_require__(98192),le=__webpack_require__(19278),be=__webpack_require__(21591),de=__webpack_require__(29396),pe=__webpack_require__(90236),Oe=__webpack_require__(5741),xe=__webpack_require__(19202),Ve=__webpack_require__(25641),K=__webpack_require__(24079),ke=__webpack_require__(59860),we=__webpack_require__(66074),Me=__webpack_require__(32490),Xe=__webpack_require__(84037),Ke=__webpack_require__(67829),At=__webpack_require__(62580),mt=__webpack_require__(72324),ie=__webpack_require__(62942),oe=__webpack_require__(5063),he=__webpack_require__(28403),ye=__webpack_require__(97487),se=__webpack_require__(19772),Ne=__webpack_require__(41618),st=__webpack_require__(67147),Fe=__webpack_require__(96323),tt=__webpack_require__(59324),Wt=__webpack_require__(37718),Pr=__webpack_require__(13175),Qt=__webpack_require__(38727),xr=__webpack_require__(49462),$r=__webpack_require__(3791),Cr=__webpack_require__(3214),sn=__webpack_require__(84095),ot=__webpack_require__(11228),_r=__webpack_require__(38338),cr=__webpack_require__(72164),Vr=__webpack_require__(55627),Qn=__webpack_require__(4870),mn=__webpack_require__(52806),_n=__webpack_require__(12278),Yr=__webpack_require__(26996),Fr=__webpack_require__(61433),kr=__webpack_require__(84615),ft=__webpack_require__(18545),me=__webpack_require__(54854),ne=__webpack_require__(45102),fe=__webpack_require__(39110),Q=__webpack_require__(81845),De=__webpack_require__(9117),dt=__webpack_require__(90180),Jt=__webpack_require__(46833),it=__webpack_require__(12014),lt=__webpack_require__(29018),qt=__webpack_require__(59466),pr=__webpack_require__(69557),Hr=__webpack_require__(88999),Xr=__webpack_require__(4342),ce=__webpack_require__(75085),xt=__webpack_require__(97824),Gt=__webpack_require__(80309),Ir=__webpack_require__(16812),nn=__webpack_require__(25037),zi=__webpack_require__(52003),Ui=__webpack_require__(95733),Pi=__webpack_require__(30242),ka=__webpack_require__(16990),Ti=__webpack_require__(11365),Ge=__webpack_require__(21136),et=__webpack_require__(12242),gt=__webpack_require__(47829),ht=__webpack_require__(62720),Et=__webpack_require__(83897),Zt=__webpack_require__(62444),sr=__webpack_require__(14541),bt=__webpack_require__(36548),Ft=__webpack_require__(23770),zr=__webpack_require__(9177),Jn=__webpack_require__(75932),yn=__webpack_require__(46398),tn=__webpack_require__(62304),ni=__webpack_require__(80994),ta=__webpack_require__(34187),fa=__webpack_require__(79563),Mr=__webpack_require__(81765),Wr=__webpack_require__(84729),Zi=__webpack_require__(14931),Wi=__webpack_require__(43716),xo=__webpack_require__(81514),ua=__webpack_require__(65556),Ur=__webpack_require__(67649),Jr=__webpack_require__(77904),Eo=__webpack_require__(53823),Fo=__webpack_require__(86934),So=__webpack_require__(52093),Xa=__webpack_require__(35153),Ko=__webpack_require__(62721),No=__webpack_require__(23231),ui=__webpack_require__(76177),jn=__webpack_require__(23293),rr=__webpack_require__(20888),ps=__webpack_require__(11930),er=__webpack_require__(46147),$s=__webpack_require__(612),Es=__webpack_require__(74684),Os=__webpack_require__(98606),xu=__webpack_require__(56409),bo=__webpack_require__(86103),ic=__webpack_require__(61633),Ru=__webpack_require__(6009),Xs=__webpack_require__(15493),Ys=__webpack_require__(15856),rs=__webpack_require__(51659),au=__webpack_require__(75084),Tu=__webpack_require__(27682),Cl=__webpack_require__(13069),hu=__webpack_require__(28884),ou=__webpack_require__(12819),ss=__webpack_require__(88695),nu=__webpack_require__(50561),Pu=__webpack_require__(97733),Ks=__webpack_require__(28376),$u=__webpack_require__(35381),qe=__webpack_require__(38895),Bt=__webpack_require__(2962),ge=__webpack_require__(12116),je=__webpack_require__(12282),wt=__webpack_require__(78497),nr=__webpack_require__(31113),en=__webpack_require__(59579),Dn=__webpack_require__(13749),Ai=__webpack_require__(91837),na=__webpack_require__(65217),Aa=__webpack_require__(62328),Ta=__webpack_require__(29190),Wa=__webpack_require__(24216),Co=__webpack_require__(74202),lo=__webpack_require__(71490),Vo=__webpack_require__(6144),gs=__webpack_require__(24890),su=__webpack_require__(87138),Zu=__webpack_require__(35332),Ss=__webpack_require__(25751),Us=__webpack_require__(11605),ys=__webpack_require__(18791),Oo=__webpack_require__(91112),qo=__webpack_require__(68440),Rc=__webpack_require__(60347),Hl=__webpack_require__(99889),sf=__webpack_require__(21351),Bf=__webpack_require__(42910),zf=__webpack_require__(75873),ac=__webpack_require__(66421),dc=__webpack_require__(13467),O=__webpack_require__(57728),q=__webpack_require__(812),Le=__webpack_require__(64807),ve=__webpack_require__(26408),ct=__webpack_require__(97051),Lt=__webpack_require__(77410),hr=__webpack_require__(82269),lr=__webpack_require__(84045),Gr=__webpack_require__(71120),ii=__webpack_require__(98930);function fi(qr,ri){var Kn=qr==null?null:typeof Symbol!="undefined"&&qr[Symbol.iterator]||qr["@@iterator"];if(Kn!=null){var Vn=[],Ri=!0,li=!1,ga,Ka;try{for(Kn=Kn.call(qr);!(Ri=(ga=Kn.next()).done)&&(Vn.push(ga.value),!(ri&&Vn.length===ri));Ri=!0);}catch(Ma){li=!0,Ka=Ma}finally{try{!Ri&&Kn.return!=null&&Kn.return()}finally{if(li)throw Ka}}return Vn}}var Na=__webpack_require__(83726),vo=__webpack_require__(30048);function Va(qr,ri){return(0,ii.Z)(qr)||fi(qr,ri)||(0,Na.Z)(qr,ri)||(0,vo.Z)()}var ha=__webpack_require__(50959),$o=__webpack_require__(87593),ms=__webpack_require__(44478),To=__webpack_require__(44492),Qs=__webpack_require__(19188),Wl=__webpack_require__(18112),Pc=__webpack_require__(62081),Js=__webpack_require__(26342),Tl=["redirect"];function bf(qr){var ri=qr.routesById,Kn=qr.parentId,Vn=qr.routeComponents;return Object.keys(ri).filter(function(Ri){return ri[Ri].parentId===Kn}).map(function(Ri){var li=vc((0,lr.Z)({route:ri[Ri],routeComponent:Vn[Ri],loadingComponent:qr.loadingComponent,reactRouter5Compat:qr.reactRouter5Compat},qr.reactRouter5Compat&&{hasChildren:Object.keys(ri).filter(function(Ka){return ri[Ka].parentId===Ri}).length>0})),ga=bf({routesById:ri,routeComponents:Vn,parentId:li.id,loadingComponent:qr.loadingComponent,reactRouter5Compat:qr.reactRouter5Compat});return ga.length>0&&(li.children=ga,li.routes=ga),li})}function Zc(qr){var ri=(0,To.UO)(),Kn=(0,lr.Z)((0,lr.Z)({},qr),{},{to:(0,To.Gn)(qr.to,ri)});return ha.createElement(To.Fg,(0,Pc.Z)({replace:!0},Kn))}function vc(qr){var ri=qr.route,Kn=ri.redirect,Vn=(0,Wl.Z)(ri,Tl),Ri=qr.reactRouter5Compat?bu:cp;return(0,lr.Z)({element:Kn?ha.createElement(Zc,{to:Kn}):ha.createElement(Js.X.Provider,{value:{route:qr.route}},ha.createElement(Ri,{loader:ha.memo(qr.routeComponent),loadingComponent:qr.loadingComponent||jc,hasChildren:qr.hasChildren}))},Vn)}function jc(){return ha.createElement("div",null)}function bu(qr){var ri=(0,Js.Q)(),Kn=ri.route,Vn=(0,Qs.Ov)(),Ri=Vn.history,li=Vn.clientRoutes,ga=(0,To.UO)(),Ka={params:ga,isExact:!0,path:Kn.path,url:Ri.location.pathname},Ma=qr.loader;return ha.createElement(ha.Suspense,{fallback:ha.createElement(qr.loadingComponent,null)},ha.createElement(Ma,{location:Ri.location,match:Ka,history:Ri,params:ga,route:Kn,routes:li},qr.hasChildren&&ha.createElement(To.j3,null)))}function cp(qr){var ri=qr.loader;return ha.createElement(ha.Suspense,{fallback:ha.createElement(qr.loadingComponent,null)},ha.createElement(ri,null))}var Yf=null;function Ju(){return Yf}function Vc(qr){var ri=qr.history,Kn=ha.useState({action:ri.action,location:ri.location}),Vn=Va(Kn,2),Ri=Vn[0],li=Vn[1];return ha.useLayoutEffect(function(){return ri.listen(li)},[ri]),ha.useLayoutEffect(function(){function ga(Ka){qr.pluginManager.applyPlugins({key:"onRouteChange",type:"event",args:{routes:qr.routes,clientRoutes:qr.clientRoutes,location:Ka.location,action:Ka.action,basename:qr.basename}})}ri.listen(ga),ga({location:Ri.location,action:Ri.action})},[ri,qr.routes,qr.clientRoutes]),ha.createElement(To.F0,{navigator:ri,location:Ri.location,basename:qr.basename},qr.children)}function Gc(){var qr=(0,Qs.Ov)(),ri=qr.clientRoutes;return(0,To.V$)(ri)}var ju=["innerProvider","i18nProvider","accessProvider","dataflowProvider","outerProvider","rootContainer"],fp=function(ri,Kn){var Vn=ri.basename||"/",Ri=bf({routesById:ri.routes,routeComponents:ri.routeComponents,loadingComponent:ri.loadingComponent,reactRouter5Compat:ri.reactRouter5Compat});ri.pluginManager.applyPlugins({key:"patchClientRoutes",type:"event",args:{routes:Ri}});var li=ha.createElement(Vc,{basename:Vn,pluginManager:ri.pluginManager,routes:ri.routes,clientRoutes:Ri,history:ri.history},Kn),ga=(0,Gr.Z)(ju),Ka;try{for(ga.s();!(Ka=ga.n()).done;){var Ma=Ka.value;li=ri.pluginManager.applyPlugins({type:"modify",key:Ma,initialValue:li,args:{routes:ri.routes,history:ri.history,plugin:ri.pluginManager}})}}catch(As){ga.e(As)}finally{ga.f()}var Bo=function(){var Su=(0,ha.useState)({}),cu=Va(Su,2),tl=cu[0],Pa=cu[1],la=(0,ha.useState)(window.__UMI_LOADER_DATA__||{}),sl=Va(la,2),us=sl[0],wu=sl[1],Zs=(0,ha.useCallback)(function(ul,Ec){var cf,ws=(((cf=(0,To.fp)(Ri,ul,Vn))===null||cf===void 0?void 0:cf.map(function(Qo){return Qo.route.id}))||[]).filter(Boolean);ws.forEach(function(Qo){var ff,Du,du=window.__umi_manifest__;if(du){var ll=Qo.replace(/[\/\-]/g,"_"),eu="preload-".concat(ll,".js");if(!document.getElementById(eu)){var Rt=Object.keys(du).filter(function(xs){return xs.startsWith(ll+".")});Rt.forEach(function(xs){if(!/\.(js|css)$/.test(xs))throw Error("preload not support ".concat(xs," file"));var tu=du[xs],Mo=document.createElement("link");Mo.rel="preload",Mo.as="style",xs.endsWith(".js")&&(Mo.as="script",Mo.id=eu),ri.runtimePublicPath&&(tu=tu.replace(new RegExp("^".concat(ri.publicPath)),window.publicPath)),Mo.href=tu,document.head.appendChild(Mo)})}}!Ec&&(ff=ri.routes[Qo])!==null&&ff!==void 0&&ff.hasServerLoader&&fetch("/__serverLoader?route="+Qo).then(function(xs){return xs.json()}).then(function(xs){ha.startTransition(function(){wu(function(tu){return(0,lr.Z)((0,lr.Z)({},tu),{},(0,hr.Z)({},Qo,xs))})})}).catch(console.error);var mo=(Du=ri.routes[Qo])===null||Du===void 0?void 0:Du.clientLoader;mo&&!tl[Qo]&&mo().then(function(xs){Pa(function(tu){return(0,lr.Z)((0,lr.Z)({},tu),{},(0,hr.Z)({},Qo,xs))})})})},[tl]);return(0,ha.useEffect)(function(){return Zs(window.location.pathname,!0),ri.history.listen(function(ul){Zs(ul.location.pathname)})},[]),ha.createElement($o.B6,{context:{}},ha.createElement(Qs.Il.Provider,{value:{routes:ri.routes,routeComponents:ri.routeComponents,clientRoutes:Ri,pluginManager:ri.pluginManager,rootElement:ri.rootElement,basename:Vn,clientLoaderData:tl,serverLoaderData:us,preloadRoute:Zs,history:ri.history}},li))};return Bo};function $l(qr){var ri=qr.rootElement||document.getElementById("root"),Kn=fp(qr,ha.createElement(Gc,null));if(qr.components)return Kn;if(qr.hydrate){ms.hydrateRoot(ri,ha.createElement(Kn,null));return}if(ms.createRoot){Yf=ms.createRoot(ri),Yf.render(ha.createElement(Kn,null));return}ms.render(ha.createElement(Kn,null),ri)}function Rs(){return Ml.apply(this,arguments)}function Ml(){return Ml=A()(w()().mark(function qr(){return w()().wrap(function(Kn){for(;;)switch(Kn.prev=Kn.next){case 0:return Kn.abrupt("return",{routes:{404:{id:"404",path:"*",parentId:"DocLayout"},"dumi-context-layout":{id:"dumi-context-layout",path:"/",isLayout:!0},DocLayout:{id:"DocLayout",path:"/",parentId:"dumi-context-layout",isLayout:!0},"docs/frontend/opensource":{path:"frontend/opensource",id:"docs/frontend/opensource",parentId:"DocLayout"},"docs/typescript/index":{path:"typescript",id:"docs/typescript/index",parentId:"DocLayout"},"docs/frontend/react":{path:"frontend/react",id:"docs/frontend/react",parentId:"DocLayout"},"docs/go/index":{path:"go",id:"docs/go/index",parentId:"DocLayout"},"docs/index":{path:"",id:"docs/index",parentId:"DocLayout"},"components/Foo/index":{id:"components/Foo/index",path:"components/foo",parentId:"DocLayout"},"components/index":{id:"components/index",path:"components",parentId:"DocLayout"},"components/NextMap/index":{id:"components/NextMap/index",path:"components/nextmap",parentId:"DocLayout"},"components/NextTopo/index":{id:"components/NextTopo/index",path:"components/nexttopo",parentId:"DocLayout"},"demo-render":{id:"demo-render",path:"~demos/:id",parentId:"dumi-context-layout"}},routeComponents:{404:ha.lazy(function(){return __webpack_require__.e(118).then(__webpack_require__.bind(__webpack_require__,73257))}),"dumi-context-layout":ha.lazy(function(){return __webpack_require__.e(923).then(__webpack_require__.bind(__webpack_require__,41531))}),DocLayout:ha.lazy(function(){return Promise.all([__webpack_require__.e(854),__webpack_require__.e(831)]).then(__webpack_require__.bind(__webpack_require__,84362))}),"docs/frontend/opensource":ha.lazy(function(){return Promise.all([__webpack_require__.e(803),__webpack_require__.e(705)]).then(__webpack_require__.bind(__webpack_require__,16691))}),"docs/typescript/index":ha.lazy(function(){return Promise.all([__webpack_require__.e(803),__webpack_require__.e(244)]).then(__webpack_require__.bind(__webpack_require__,44733))}),"docs/frontend/react":ha.lazy(function(){return Promise.all([__webpack_require__.e(803),__webpack_require__.e(443)]).then(__webpack_require__.bind(__webpack_require__,64348))}),"docs/go/index":ha.lazy(function(){return Promise.all([__webpack_require__.e(803),__webpack_require__.e(379)]).then(__webpack_require__.bind(__webpack_require__,96568))}),"docs/index":ha.lazy(function(){return Promise.all([__webpack_require__.e(803),__webpack_require__.e(935)]).then(__webpack_require__.bind(__webpack_require__,81866))}),"components/Foo/index":ha.lazy(function(){return Promise.all([__webpack_require__.e(803),__webpack_require__.e(81)]).then(__webpack_require__.bind(__webpack_require__,6641))}),"components/index":ha.lazy(function(){return Promise.all([__webpack_require__.e(803),__webpack_require__.e(506)]).then(__webpack_require__.bind(__webpack_require__,69457))}),"components/NextMap/index":ha.lazy(function(){return Promise.all([__webpack_require__.e(803),__webpack_require__.e(585)]).then(__webpack_require__.bind(__webpack_require__,31581))}),"components/NextTopo/index":ha.lazy(function(){return Promise.all([__webpack_require__.e(803),__webpack_require__.e(899)]).then(__webpack_require__.bind(__webpack_require__,30413))}),"demo-render":ha.lazy(function(){return __webpack_require__.e(534).then(__webpack_require__.bind(__webpack_require__,76575))})}});case 1:case"end":return Kn.stop()}},qr)})),Ml.apply(this,arguments)}var Ef=__webpack_require__(87826),Hc=__webpack_require__(17417),Xl=__webpack_require__.n(Hc),ah=function(ri){var Kn=ri.routes;Object.values(Kn).forEach(function(Vn){if(Ef.C3[Vn.id]){var Ri;Vn.meta=Xl()(Vn.meta,Ef.C3[Vn.id]),Vn.meta.tabs=(Ri=Vn.meta.tabs)===null||Ri===void 0?void 0:Ri.map(function(li){return l()(l()({},Ef.eA[li]),{},{meta:Ef.C3[li]})})}})},Kf=__webpack_require__(46686),Ll=__webpack_require__.n(Kf),Wc=__webpack_require__(55566),uu=__webpack_require__(5734),hs=__webpack_require__(34254),kc=__webpack_require__(20266),oc=__webpack_require__(37759),uf=__webpack_require__(6848),mc=__webpack_require__(78157),ds=__webpack_require__(28872),sc=__webpack_require__(23166);function vl(qr,ri){return Object.keys(qr).reduce(function(Kn,Vn){return Kn[Vn]=(0,hs.pi)({timeZone:ri},qr[Vn]),Kn},{})}function pp(qr,ri){var Kn=Object.keys((0,hs.pi)((0,hs.pi)({},qr),ri));return Kn.reduce(function(Vn,Ri){return Vn[Ri]=(0,hs.pi)((0,hs.pi)({},qr[Ri]||{}),ri[Ri]||{}),Vn},{})}function Lc(qr,ri){if(!ri)return qr;var Kn=mc.C.formats;return(0,hs.pi)((0,hs.pi)((0,hs.pi)({},Kn),qr),{date:pp(vl(Kn.date,ri),vl(qr.date||{},ri)),time:pp(vl(Kn.time,ri),vl(qr.time||{},ri))})}var uc=function(qr,ri,Kn,Vn,Ri){var li=qr.locale,ga=qr.formats,Ka=qr.messages,Ma=qr.defaultLocale,Bo=qr.defaultFormats,As=qr.fallbackOnEmptyString,Su=qr.onError,cu=qr.timeZone,tl=qr.defaultRichTextElements;Kn===void 0&&(Kn={id:""});var Pa=Kn.id,la=Kn.defaultMessage;(0,uf.kG)(!!Pa,"[@formatjs/intl] An `id` must be provided to format a message. You can either:\n1. Configure your build toolchain with [babel-plugin-formatjs](https://formatjs.io/docs/tooling/babel-plugin)\nor [@formatjs/ts-transformer](https://formatjs.io/docs/tooling/ts-transformer) OR\n2. Configure your `eslint` config to include [eslint-plugin-formatjs](https://formatjs.io/docs/tooling/linter#enforce-id)\nto autofix this issue");var sl=String(Pa),us=Ka&&Object.prototype.hasOwnProperty.call(Ka,sl)&&Ka[sl];if(Array.isArray(us)&&us.length===1&&us[0].type===sc.wD.literal)return us[0].value;if(!Vn&&us&&typeof us=="string"&&!tl)return us.replace(/'\{(.*?)\}'/gi,"{$1}");if(Vn=(0,hs.pi)((0,hs.pi)({},tl),Vn||{}),ga=Lc(ga,cu),Bo=Lc(Bo,cu),!us){if(As===!1&&us==="")return us;if((!la||li&&li.toLowerCase()!==Ma.toLowerCase())&&Su(new ds.$6(Kn,li)),la)try{var wu=ri.getMessageFormat(la,Ma,Bo,Ri);return wu.format(Vn)}catch(Zs){return Su(new ds.X9('Error formatting default message for: "'.concat(sl,'", rendering default message verbatim'),li,Kn,Zs)),typeof la=="string"?la:sl}return sl}try{var wu=ri.getMessageFormat(us,li,ga,(0,hs.pi)({formatters:ri},Ri||{}));return wu.format(Vn)}catch(Zs){Su(new ds.X9('Error formatting message: "'.concat(sl,'", using ').concat(la?"default message":"id"," as fallback."),li,Kn,Zs))}if(la)try{var wu=ri.getMessageFormat(la,Ma,Bo,Ri);return wu.format(Vn)}catch(Zs){Su(new ds.X9('Error formatting the default message for: "'.concat(sl,'", rendering message verbatim'),li,Kn,Zs))}return typeof us=="string"?us:typeof la=="string"?la:sl},Qf=["style","currency","currencyDisplay","unit","unitDisplay","useGrouping","minimumIntegerDigits","minimumFractionDigits","maximumFractionDigits","minimumSignificantDigits","maximumSignificantDigits","compactDisplay","currencyDisplay","currencySign","notation","signDisplay","unit","unitDisplay","numberingSystem"];function Yl(qr,ri,Kn){var Vn=qr.locale,Ri=qr.formats,li=qr.onError;Kn===void 0&&(Kn={});var ga=Kn.format,Ka=ga&&(0,uu.TB)(Ri,"number",ga,li)||{},Ma=(0,uu.L6)(Kn,Qf,Ka);return ri(Vn,Ma)}function Dc(qr,ri,Kn,Vn){Vn===void 0&&(Vn={});try{return Yl(qr,ri,Vn).format(Kn)}catch(Ri){qr.onError(new ds.Rw(ds.bc.FORMAT_ERROR,"Error formatting number.",Ri))}return String(Kn)}function Jf(qr,ri,Kn,Vn){Vn===void 0&&(Vn={});try{return Yl(qr,ri,Vn).formatToParts(Kn)}catch(Ri){qr.onError(new ds.Rw(ds.bc.FORMAT_ERROR,"Error formatting number.",Ri))}return[]}var gc=__webpack_require__(57474),$c=["numeric","style"];function Fc(qr,ri,Kn){var Vn=qr.locale,Ri=qr.formats,li=qr.onError;Kn===void 0&&(Kn={});var ga=Kn.format,Ka=!!ga&&(0,uu.TB)(Ri,"relative",ga,li)||{},Ma=(0,uu.L6)(Kn,$c,Ka);return ri(Vn,Ma)}function Kl(qr,ri,Kn,Vn,Ri){Ri===void 0&&(Ri={}),Vn||(Vn="second");var li=Intl.RelativeTimeFormat;li||qr.onError(new gc.u_(`Intl.RelativeTimeFormat is not available in this environment.
Try polyfilling it using "@formatjs/intl-relativetimeformat"
`,gc.jK.MISSING_INTL_API));try{return Fc(qr,ri,Ri).format(Kn,Vn)}catch(ga){qr.onError(new ds.Qe("Error formatting relative time.",qr.locale,ga))}return String(Kn)}var Ql=["formatMatcher","timeZone","hour12","weekday","era","year","month","day","hour","minute","second","timeZoneName","hourCycle","dateStyle","timeStyle","calendar","numberingSystem","fractionalSecondDigits"];function Uf(qr,ri,Kn,Vn){var Ri=qr.locale,li=qr.formats,ga=qr.onError,Ka=qr.timeZone;Vn===void 0&&(Vn={});var Ma=Vn.format,Bo=(0,hs.pi)((0,hs.pi)({},Ka&&{timeZone:Ka}),Ma&&(0,uu.TB)(li,ri,Ma,ga)),As=(0,uu.L6)(Vn,Ql,Bo);return ri==="time"&&!As.hour&&!As.minute&&!As.second&&!As.timeStyle&&!As.dateStyle&&(As=(0,hs.pi)((0,hs.pi)({},As),{hour:"numeric",minute:"numeric"})),Kn(Ri,As)}function qf(qr,ri){for(var Kn=[],Vn=2;Vn<arguments.length;Vn++)Kn[Vn-2]=arguments[Vn];var Ri=Kn[0],li=Kn[1],ga=li===void 0?{}:li,Ka=typeof Ri=="string"?new Date(Ri||0):Ri;try{return Uf(qr,"date",ri,ga).format(Ka)}catch(Ma){qr.onError(new ds.Rw(ds.bc.FORMAT_ERROR,"Error formatting date.",Ma))}return String(Ka)}function ep(qr,ri){for(var Kn=[],Vn=2;Vn<arguments.length;Vn++)Kn[Vn-2]=arguments[Vn];var Ri=Kn[0],li=Kn[1],ga=li===void 0?{}:li,Ka=typeof Ri=="string"?new Date(Ri||0):Ri;try{return Uf(qr,"time",ri,ga).format(Ka)}catch(Ma){qr.onError(new ds.Rw(ds.bc.FORMAT_ERROR,"Error formatting time.",Ma))}return String(Ka)}function qu(qr,ri){for(var Kn=[],Vn=2;Vn<arguments.length;Vn++)Kn[Vn-2]=arguments[Vn];var Ri=Kn[0],li=Kn[1],ga=Kn[2],Ka=ga===void 0?{}:ga,Ma=qr.timeZone,Bo=qr.locale,As=qr.onError,Su=(0,uu.L6)(Ka,Ql,Ma?{timeZone:Ma}:{});try{return ri(Bo,Su).formatRange(Ri,li)}catch(cu){As(new ds.Rw(ds.bc.FORMAT_ERROR,"Error formatting date time range.",cu))}return String(Ri)}function Zf(qr,ri){for(var Kn=[],Vn=2;Vn<arguments.length;Vn++)Kn[Vn-2]=arguments[Vn];var Ri=Kn[0],li=Kn[1],ga=li===void 0?{}:li,Ka=typeof Ri=="string"?new Date(Ri||0):Ri;try{return Uf(qr,"date",ri,ga).formatToParts(Ka)}catch(Ma){qr.onError(new ds.Rw(ds.bc.FORMAT_ERROR,"Error formatting date.",Ma))}return[]}function vs(qr,ri){for(var Kn=[],Vn=2;Vn<arguments.length;Vn++)Kn[Vn-2]=arguments[Vn];var Ri=Kn[0],li=Kn[1],ga=li===void 0?{}:li,Ka=typeof Ri=="string"?new Date(Ri||0):Ri;try{return Uf(qr,"time",ri,ga).formatToParts(Ka)}catch(Ma){qr.onError(new ds.Rw(ds.bc.FORMAT_ERROR,"Error formatting time.",Ma))}return[]}var Kr=["type"];function vi(qr,ri,Kn,Vn){var Ri=qr.locale,li=qr.onError;Vn===void 0&&(Vn={}),Intl.PluralRules||li(new gc.u_(`Intl.PluralRules is not available in this environment.
Try polyfilling it using "@formatjs/intl-pluralrules"
`,gc.jK.MISSING_INTL_API));var ga=(0,uu.L6)(Vn,Kr);try{return ri(Ri,ga).select(Kn)}catch(Ka){li(new ds.Qe("Error formatting plural.",Ri,Ka))}return"other"}var ei=["type","style"],xi=Date.now();function da(qr){return"".concat(xi,"_").concat(qr,"_").concat(xi)}function uo(qr,ri,Kn,Vn){Vn===void 0&&(Vn={});var Ri=Ua(qr,ri,Kn,Vn).reduce(function(li,ga){var Ka=ga.value;return typeof Ka!="string"?li.push(Ka):typeof li[li.length-1]=="string"?li[li.length-1]+=Ka:li.push(Ka),li},[]);return Ri.length===1?Ri[0]:Ri.length===0?"":Ri}function Ua(qr,ri,Kn,Vn){var Ri=qr.locale,li=qr.onError;Vn===void 0&&(Vn={});var ga=Intl.ListFormat;ga||li(new gc.u_(`Intl.ListFormat is not available in this environment.
Try polyfilling it using "@formatjs/intl-listformat"
`,gc.jK.MISSING_INTL_API));var Ka=(0,uu.L6)(Vn,ei);try{var Ma={},Bo=Kn.map(function(As,Su){if(typeof As=="object"){var cu=da(Su);return Ma[cu]=As,cu}return String(As)});return ri(Ri,Ka).formatToParts(Bo).map(function(As){return As.type==="literal"?As:(0,hs.pi)((0,hs.pi)({},As),{value:Ma[As.value]||As.value})})}catch(As){li(new ds.Rw(ds.bc.FORMAT_ERROR,"Error formatting list.",As))}return Kn}var ns=["style","type","fallback"];function Vu(qr,ri,Kn,Vn){var Ri=qr.locale,li=qr.onError,ga=Intl.DisplayNames;ga||li(new gc.u_(`Intl.DisplayNames is not available in this environment.
Try polyfilling it using "@formatjs/intl-displaynames"
`,gc.jK.MISSING_INTL_API));var Ka=(0,uu.L6)(Vn,ns);try{return ri(Ri,Ka).of(Kn)}catch(Ma){li(new ds.Rw(ds.bc.FORMAT_ERROR,"Error formatting display name.",Ma))}}function lc(qr){var ri=qr?qr[Object.keys(qr)[0]]:void 0;return typeof ri=="string"}function yc(qr){qr.onWarn&&qr.defaultRichTextElements&&lc(qr.messages||{})&&qr.onWarn(`[@formatjs/intl] "defaultRichTextElements" was specified but "message" was not pre-compiled. 
Please consider using "@formatjs/cli" to pre-compile your messages for performance.
For more details see https://formatjs.io/docs/getting-started/message-distribution`)}function tp(qr,ri){var Kn=(0,uu.ax)(ri),Vn=(0,hs.pi)((0,hs.pi)({},uu.Z0),qr),Ri=Vn.locale,li=Vn.defaultLocale,ga=Vn.onError;return Ri?!Intl.NumberFormat.supportedLocalesOf(Ri).length&&ga?ga(new ds.gb('Missing locale data for locale: "'.concat(Ri,'" in Intl.NumberFormat. Using default locale: "').concat(li,'" as fallback. See https://formatjs.io/docs/react-intl#runtime-requirements for more details'))):!Intl.DateTimeFormat.supportedLocalesOf(Ri).length&&ga&&ga(new ds.gb('Missing locale data for locale: "'.concat(Ri,'" in Intl.DateTimeFormat. Using default locale: "').concat(li,'" as fallback. See https://formatjs.io/docs/react-intl#runtime-requirements for more details'))):(ga&&ga(new ds.OV('"locale" was not configured, using "'.concat(li,'" as fallback. See https://formatjs.io/docs/react-intl/api#intlshape for more details'))),Vn.locale=Vn.defaultLocale||"en"),yc(Vn),(0,hs.pi)((0,hs.pi)({},Vn),{formatters:Kn,formatNumber:Dc.bind(null,Vn,Kn.getNumberFormat),formatNumberToParts:Jf.bind(null,Vn,Kn.getNumberFormat),formatRelativeTime:Kl.bind(null,Vn,Kn.getRelativeTimeFormat),formatDate:qf.bind(null,Vn,Kn.getDateTimeFormat),formatDateToParts:Zf.bind(null,Vn,Kn.getDateTimeFormat),formatTime:ep.bind(null,Vn,Kn.getDateTimeFormat),formatDateTimeRange:qu.bind(null,Vn,Kn.getDateTimeFormat),formatTimeToParts:vs.bind(null,Vn,Kn.getDateTimeFormat),formatPlural:vi.bind(null,Vn,Kn.getPluralRules),formatMessage:uc.bind(null,Vn,Kn),$t:uc.bind(null,Vn,Kn),formatList:uo.bind(null,Vn,Kn.getListFormat),formatListToParts:Ua.bind(null,Vn,Kn.getListFormat),formatDisplayName:Vu.bind(null,Vn,Kn.getDisplayNames)})}var _c=__webpack_require__(91078);function Jl(qr){return{locale:qr.locale,timeZone:qr.timeZone,fallbackOnEmptyString:qr.fallbackOnEmptyString,formats:qr.formats,textComponent:qr.textComponent,messages:qr.messages,defaultLocale:qr.defaultLocale,defaultFormats:qr.defaultFormats,onError:qr.onError,onWarn:qr.onWarn,wrapRichTextChunksInFragment:qr.wrapRichTextChunksInFragment,defaultRichTextElements:qr.defaultRichTextElements}}function ml(qr){return qr&&Object.keys(qr).reduce(function(ri,Kn){var Vn=qr[Kn];return ri[Kn]=(0,_c.Gt)(Vn)?(0,oc.dt)(Vn):Vn,ri},{})}var lu=function(qr,ri,Kn,Vn){for(var Ri=[],li=4;li<arguments.length;li++)Ri[li-4]=arguments[li];var ga=ml(Vn),Ka=uc.apply(void 0,(0,hs.ev)([qr,ri,Kn,ga],Ri,!1));return Array.isArray(Ka)?ha.Children.toArray(Ka):Ka},_s=function(qr,ri){var Kn=qr.defaultRichTextElements,Vn=(0,hs._T)(qr,["defaultRichTextElements"]),Ri=ml(Kn),li=tp((0,hs.pi)((0,hs.pi)((0,hs.pi)({},oc.Z0),Vn),{defaultRichTextElements:Ri}),ri),ga={locale:li.locale,timeZone:li.timeZone,fallbackOnEmptyString:li.fallbackOnEmptyString,formats:li.formats,defaultLocale:li.defaultLocale,defaultFormats:li.defaultFormats,messages:li.messages,onError:li.onError,defaultRichTextElements:Ri};return(0,hs.pi)((0,hs.pi)({},li),{formatMessage:lu.bind(null,ga,li.formatters),$t:lu.bind(null,ga,li.formatters)})},jf=function(qr){(0,hs.ZT)(ri,qr);function ri(){var Kn=qr!==null&&qr.apply(this,arguments)||this;return Kn.cache=(0,uu.Sn)(),Kn.state={cache:Kn.cache,intl:_s(Jl(Kn.props),Kn.cache),prevConfig:Jl(Kn.props)},Kn}return ri.getDerivedStateFromProps=function(Kn,Vn){var Ri=Vn.prevConfig,li=Vn.cache,ga=Jl(Kn);return(0,oc.wU)(Ri,ga)?null:{intl:_s(ga,li),prevConfig:ga}},ri.prototype.render=function(){return(0,oc.lq)(this.state.intl),ha.createElement(kc.zt,{value:this.state.intl},this.props.children)},ri.displayName="IntlProvider",ri.defaultProps=oc.Z0,ri}(ha.PureComponent),qs=null,ji=__webpack_require__(74810),Gs=__webpack_require__(58626),ql=__webpack_require__(11527),Xc=(0,uu.Sn)(),Il=function(ri){var Kn=(0,ha.useCallback)(function(){var Ka=Gs.k.slice().reverse().find(function(Bo){return"suffix"in Bo?Wc.m8.location.pathname.replace(/([^/])\/$/,"$1").endsWith(Bo.suffix):Wc.m8.location.pathname.replace(/([^/])\/$/,"$1").startsWith(Bo.base)}),Ma=Ka?Ka.id:Gs.k[0].id;return _s({locale:Ma,messages:Gs.s[Ma]||{}},Xc)},[]),Vn=(0,ha.useState)(function(){return Kn()}),Ri=Ll()(Vn,2),li=Ri[0],ga=Ri[1];return(0,ji.LI)(function(){return Wc.m8.listen(function(){ga(Kn())})},[]),(0,ql.jsx)(kc.zt,{value:li,children:ri.children},li.locale)};function ku(qr){return ha.createElement(Il,null,qr)}var ec=__webpack_require__(65425);function ia(qr){return qr.default?typeof qr.default=="function"?qr.default():qr.default:qr}function lf(){return[{apply:U,path:void 0},{apply:F,path:void 0}]}function xc(){return["patchRoutes","patchClientRoutes","modifyContextOpts","modifyClientRenderOpts","rootContainer","innerProvider","i18nProvider","accessProvider","dataflowProvider","outerProvider","render","onRouteChange"]}var cc=null;function Ps(){return cc=ec.Q$.create({plugins:lf(),validKeys:xc()}),cc}function ol(){return cc}var Yc=__webpack_require__(20679),Eu="/dumi2-template/",el=!1;function bc(){return Vf.apply(this,arguments)}function Vf(){return Vf=A()(w()().mark(function qr(){var ri,Kn,Vn,Ri;return w()().wrap(function(ga){for(;;)switch(ga.prev=ga.next){case 0:return ri=Ps(),ga.next=3,Rs(ri);case 3:return Kn=ga.sent,Vn=Kn.routes,Ri=Kn.routeComponents,ga.next=8,ri.applyPlugins({key:"patchRoutes",type:ec.Ac.event,args:{routes:Vn,routeComponents:Ri}});case 8:return ga.abrupt("return",ri.applyPlugins({key:"render",type:ec.Ac.compose,initialValue:function(){var Ma=ri.applyPlugins({key:"modifyContextOpts",type:ec.Ac.modify,initialValue:{}}),Bo=Ma.basename||"/dumi2-template/",As={routes:Vn,routeComponents:Ri,pluginManager:ri,rootElement:Ma.rootElement||document.getElementById("root"),publicPath:Eu,runtimePublicPath:el,history:(0,Yc.f)(l()({type:Ma.historyType||"browser",basename:Bo},Ma.historyOpts)),basename:Bo},Su=ri.applyPlugins({key:"modifyClientRenderOpts",type:ec.Ac.modify,initialValue:As});return $l(Su)}})());case 9:case"end":return ga.stop()}},qr)})),Vf.apply(this,arguments)}typeof history!="undefined"&&location.pathname.length>1&&location.pathname.endsWith("/")&&history.replaceState({},"",location.pathname.slice(0,-1)+location.search+location.hash),bc(),window.g_umi={version:"4.0.33"}})()})();
